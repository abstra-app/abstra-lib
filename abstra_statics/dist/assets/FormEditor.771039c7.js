import{A as G}from"./api.8656aeba.js";import{P as Te}from"./PlayerNavbar.8e419fbd.js";import{b as Fe,u as Me}from"./workspaceStore.e47060bf.js";import{B as Ie}from"./BaseLayout.52f1acec.js";import{R as Ue,S as Re,E as Ee,a as Le,I as Ve,L as $e}from"./SourceCode.a748d690.js";import{S as Be}from"./SaveButton.a02cacb0.js";import{F as D,a as De,b as He,c as Ne,d as Pe,r as We}from"./FormRunner.8bf9d58d.js";import{d as $,D as H,f as R,o as i,Y as A,$ as ze,S,e8 as Oe,a as F,X as Ze,E as je,c as _,w as t,b as a,u as e,cL as ne,a0 as W,e as C,dd as B,aG as f,cX as se,d9 as V,cz as x,bL as T,cy as ue,aS as ie,em as de,en as pe,bO as oe,bT as I,eb as Qe,dh as P,eo as qe,ea as Ge,aL as Je,g as re,N as Ke,O as Xe,eg as Ye,z as ea,e9 as Q,by as aa,cO as ta,da as la,aW as N,eS as oa}from"./index.d0f12294.js";import{a as ra}from"./asyncComputed.703c33fd.js";import{W as na}from"./PlayerConfigProvider.e5e86f58.js";import{F as sa}from"./PhArrowSquareOut.vue.418ffcff.js";import{G as ua}from"./PhFlowArrow.vue.be952fce.js";import{F as ia}from"./metadata.bc77f4b9.js";import{F as da}from"./forms.ac0b102a.js";import"./editor.95f16260.js";import{W as J}from"./workspaces.e43325e2.js";import{T as pa}from"./ThreadSelector.f3c948bb.js";import{A as ca}from"./index.289665f1.js";import{A as ma}from"./index.a82e0ed1.js";import{N as va}from"./NavbarControls.be646660.js";import{b as fa}from"./index.3b2f4dca.js";import{A as q,T as ga}from"./TabPane.79f4882f.js";import{B as ha}from"./Badge.f6241be2.js";import{A as ba}from"./index.a552d580.js";import{C as ya}from"./Card.2a8fe028.js";import"./fetch.e5ebd511.js";import"./LoadingOutlined.bcfc8c20.js";import"./PhSignOut.vue.6dacf893.js";import"./index.3e715bc1.js";import"./Avatar.f6415f7c.js";import"./url.121c9984.js";import"./colorHelpers.b079bb04.js";import"./uuid.f9389d59.js";import"./scripts.9802e877.js";import"./record.8c284c67.js";import"./validations.2475f715.js";import"./string.d9c83adf.js";import"./PhCopy.vue.dfade011.js";import"./PhCheckCircle.vue.e567d5b0.js";import"./PhCopySimple.vue.6b8fcb49.js";import"./PhCaretRight.vue.5db53029.js";import"./PhBug.vue.33662d9e.js";import"./PhQuestion.vue.f82af3dd.js";import"./polling.c979afd7.js";import"./PhPencil.vue.7418c4e5.js";import"./toggleHighContrast.0eb315ff.js";import"./UnsavedChangesHandler.d2f6de7c.js";import"./ExclamationCircleOutlined.c4fbd42a.js";import"./Login.vue_vue_type_script_setup_true_lang.9976d09a.js";import"./Logo.8f27935a.js";import"./CircularLoading.13413fc4.js";import"./index.c7e8afe7.js";import"./Steps.b72611f7.js";import"./index.2862b277.js";import"./Watermark.32de12c9.js";import"./PhKanban.vue.fc0591cb.js";import"./PhWebhooksLogo.vue.15a28437.js";import"./index.3814eba6.js";import"./CloseCircleOutlined.c0e3f3e1.js";import"./popupNotifcation.a0a6244b.js";import"./DocsButton.vue_vue_type_script_setup_true_lang.d6f2b20e.js";import"./BookOutlined.7c922f07.js";import"./PhChats.vue.1b5982bf.js";(function(){try{var g=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},h=new Error().stack;h&&(g._sentryDebugIds=g._sentryDebugIds||{},g._sentryDebugIds[h]="0287ff04-74dc-4754-bf6b-db264791daf6",g._sentryDebugIdIdentifier="sentry-dbid-0287ff04-74dc-4754-bf6b-db264791daf6")}catch{}})();const _a=["width","height","fill","transform"],ka={key:0},wa=F("path",{d:"M228,48V96a12,12,0,0,1-12,12H168a12,12,0,0,1,0-24h19l-7.8-7.8a75.55,75.55,0,0,0-53.32-22.26h-.43A75.49,75.49,0,0,0,72.39,75.57,12,12,0,1,1,55.61,58.41a99.38,99.38,0,0,1,69.87-28.47H126A99.42,99.42,0,0,1,196.2,59.23L204,67V48a12,12,0,0,1,24,0ZM183.61,180.43a75.49,75.49,0,0,1-53.09,21.63h-.43A75.55,75.55,0,0,1,76.77,179.8L69,172H88a12,12,0,0,0,0-24H40a12,12,0,0,0-12,12v48a12,12,0,0,0,24,0V189l7.8,7.8A99.42,99.42,0,0,0,130,226.06h.56a99.38,99.38,0,0,0,69.87-28.47,12,12,0,0,0-16.78-17.16Z"},null,-1),Sa=[wa],Ca={key:1},xa=F("path",{d:"M216,128a88,88,0,1,1-88-88A88,88,0,0,1,216,128Z",opacity:"0.2"},null,-1),Aa=F("path",{d:"M224,48V96a8,8,0,0,1-8,8H168a8,8,0,0,1,0-16h28.69L182.06,73.37a79.56,79.56,0,0,0-56.13-23.43h-.45A79.52,79.52,0,0,0,69.59,72.71,8,8,0,0,1,58.41,61.27a96,96,0,0,1,135,.79L208,76.69V48a8,8,0,0,1,16,0ZM186.41,183.29a80,80,0,0,1-112.47-.66L59.31,168H88a8,8,0,0,0,0-16H40a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V179.31l14.63,14.63A95.43,95.43,0,0,0,130,222.06h.53a95.36,95.36,0,0,0,67.07-27.33,8,8,0,0,0-11.18-11.44Z"},null,-1),Ta=[xa,Aa],Fa={key:2},Ma=F("path",{d:"M224,48V96a8,8,0,0,1-8,8H168a8,8,0,0,1-5.66-13.66L180.65,72a79.48,79.48,0,0,0-54.72-22.09h-.45A79.52,79.52,0,0,0,69.59,72.71,8,8,0,0,1,58.41,61.27,96,96,0,0,1,192,60.7l18.36-18.36A8,8,0,0,1,224,48ZM186.41,183.29A80,80,0,0,1,75.35,184l18.31-18.31A8,8,0,0,0,88,152H40a8,8,0,0,0-8,8v48a8,8,0,0,0,13.66,5.66L64,195.3a95.42,95.42,0,0,0,66,26.76h.53a95.36,95.36,0,0,0,67.07-27.33,8,8,0,0,0-11.18-11.44Z"},null,-1),Ia=[Ma],Ua={key:3},Ra=F("path",{d:"M222,48V96a6,6,0,0,1-6,6H168a6,6,0,0,1,0-12h33.52L183.47,72a81.51,81.51,0,0,0-57.53-24h-.46A81.5,81.5,0,0,0,68.19,71.28a6,6,0,1,1-8.38-8.58,93.38,93.38,0,0,1,65.67-26.76H126a93.45,93.45,0,0,1,66,27.53l18,18V48a6,6,0,0,1,12,0ZM187.81,184.72a81.5,81.5,0,0,1-57.29,23.34h-.46a81.51,81.51,0,0,1-57.53-24L54.48,166H88a6,6,0,0,0,0-12H40a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V174.48l18,18.05a93.45,93.45,0,0,0,66,27.53h.52a93.38,93.38,0,0,0,65.67-26.76,6,6,0,1,0-8.38-8.58Z"},null,-1),Ea=[Ra],La={key:4},Va=F("path",{d:"M224,48V96a8,8,0,0,1-8,8H168a8,8,0,0,1,0-16h28.69L182.06,73.37a79.56,79.56,0,0,0-56.13-23.43h-.45A79.52,79.52,0,0,0,69.59,72.71,8,8,0,0,1,58.41,61.27a96,96,0,0,1,135,.79L208,76.69V48a8,8,0,0,1,16,0ZM186.41,183.29a80,80,0,0,1-112.47-.66L59.31,168H88a8,8,0,0,0,0-16H40a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V179.31l14.63,14.63A95.43,95.43,0,0,0,130,222.06h.53a95.36,95.36,0,0,0,67.07-27.33,8,8,0,0,0-11.18-11.44Z"},null,-1),$a=[Va],Ba={key:5},Da=F("path",{d:"M220,48V96a4,4,0,0,1-4,4H168a4,4,0,0,1,0-8h38.34L184.89,70.54A84,84,0,0,0,66.8,69.85a4,4,0,1,1-5.6-5.72,92,92,0,0,1,129.34.76L212,86.34V48a4,4,0,0,1,8,0ZM189.2,186.15a83.44,83.44,0,0,1-58.68,23.91h-.47a83.52,83.52,0,0,1-58.94-24.6L49.66,164H88a4,4,0,0,0,0-8H40a4,4,0,0,0-4,4v48a4,4,0,0,0,8,0V169.66l21.46,21.45A91.43,91.43,0,0,0,130,218.06h.51a91.45,91.45,0,0,0,64.28-26.19,4,4,0,1,0-5.6-5.72Z"},null,-1),Ha=[Da],Na={name:"PhArrowsClockwise"},Pa=$({...Na,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(g){const h=g,r=H("weight","regular"),k=H("size","1em"),s=H("color","currentColor"),o=H("mirrored",!1),v=R(()=>{var p;return(p=h.weight)!=null?p:r}),w=R(()=>{var p;return(p=h.size)!=null?p:k}),y=R(()=>{var p;return(p=h.color)!=null?p:s}),d=R(()=>h.mirrored!==void 0?h.mirrored?"scale(-1, 1)":void 0:o?"scale(-1, 1)":void 0);return(p,b)=>(i(),A("svg",Oe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:w.value,height:w.value,fill:y.value,transform:d.value},p.$attrs),[ze(p.$slots,"default"),v.value==="bold"?(i(),A("g",ka,Sa)):v.value==="duotone"?(i(),A("g",Ca,Ta)):v.value==="fill"?(i(),A("g",Fa,Ia)):v.value==="light"?(i(),A("g",Ua,Ea)):v.value==="regular"?(i(),A("g",La,$a)):v.value==="thin"?(i(),A("g",Ba,Ha)):S("",!0)],16,_a))}}),Wa=$({__name:"ThreadSelectorModal",props:{showThreadModal:{type:Boolean},stage:{},executionConfig:{}},emits:["fix-invalid-json","update:execution-config","update:show-thread-modal"],setup(g,{emit:h}){const r=()=>{h("update:show-thread-modal",!1),J.writeTestData(k.threadData)};Ze(async()=>k.threadData=await J.readTestData());const k=je({threadData:"{}"});return(s,o)=>(i(),_(e(ne),{open:s.showThreadModal,footer:null,onCancel:r},{default:t(()=>[a(pa,{stage:s.stage,"execution-config":s.executionConfig,"onUpdate:executionConfig":o[0]||(o[0]=v=>h("update:execution-config",v)),"onUpdate:showThreadModal":o[1]||(o[1]=v=>h("update:show-thread-modal",v)),onFixInvalidJson:o[2]||(o[2]=v=>h("fix-invalid-json",v,v))},null,8,["stage","execution-config"])]),_:1},8,["open"]))}});const za=W(Wa,[["__scopeId","data-v-24845f55"]]),ce=g=>(de("data-v-b2ed6a6d"),g=g(),pe(),g),Oa=ce(()=>F("i",null,"string",-1)),Za=ce(()=>F("i",null,"string list",-1)),ja=$({__name:"FormNotificationSettings",props:{form:{}},setup(g){const r=C(g.form);return(k,s)=>(i(),A(ie,null,[a(e(ue),{layout:"vertical"},{default:t(()=>[a(e(B),{level:4,width:"100%",height:"30px",style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0px"}},{default:t(()=>[f(" Thread waiting "),a(e(se),{checked:r.value.notificationTrigger.enabled,"onUpdate:checked":s[0]||(s[0]=o=>r.value.notificationTrigger.enabled=o)},{default:t(()=>[f(" Enabled ")]),_:1},8,["checked"])]),_:1}),a(e(V),{class:"description",style:{fontStyle:"italic",marginBottom:"20px"}},{default:t(()=>[f(" Send emails when the thread is waiting for the form to be filled ")]),_:1}),a(e(x),{label:"Variable name"},{default:t(()=>[a(e(T),{value:r.value.notificationTrigger.variable_name,"onUpdate:value":s[1]||(s[1]=o=>r.value.notificationTrigger.variable_name=o),disabled:!r.value.notificationTrigger.enabled,type:"text",placeholder:"variable_name"},null,8,["value","disabled"])]),_:1})]),_:1}),a(e(ca),{type:"info"},{message:t(()=>[a(e(V),null,{default:t(()=>[f(" Notifications are sent to the emails specified in the thread variables set here. The variables should contain a "),Oa,f(" or a "),Za,f(". ")]),_:1})]),_:1})],64))}});const Qa=W(ja,[["__scopeId","data-v-b2ed6a6d"]]),qa=$({__name:"FormSettings",props:{form:{}},setup(g){const r=C(g.form);return(k,s)=>(i(),_(e(ue),{layout:"vertical",class:"form-settings"},{default:t(()=>[a(Ue,{runtime:r.value},null,8,["runtime"]),a(e(x),{label:"Form name"},{default:t(()=>[a(e(T),{value:r.value.title,"onUpdate:value":s[0]||(s[0]=o=>r.value.title=o),type:"text",onChange:s[1]||(s[1]=o=>{var v;return r.value.title=(v=o.target.value)!=null?v:""})},null,8,["value"])]),_:1}),a(e(B),{level:3},{default:t(()=>[f(" Texts ")]),_:1}),a(e(B),{level:4},{default:t(()=>[f(" Welcome Screen ")]),_:1}),a(e(x),{label:"Title"},{default:t(()=>[a(e(T),{value:r.value.welcomeTitle,"onUpdate:value":s[2]||(s[2]=o=>r.value.welcomeTitle=o),type:"text",placeholder:r.value.title,disabled:r.value.autoStart},null,8,["value","placeholder","disabled"])]),_:1}),a(e(x),{label:"Description"},{default:t(()=>[a(e(T),{value:r.value.startMessage,"onUpdate:value":s[3]||(s[3]=o=>r.value.startMessage=o),type:"text",disabled:r.value.autoStart},null,8,["value","disabled"])]),_:1}),a(e(x),{label:"Start button label"},{default:t(()=>[a(e(T),{value:r.value.startButtonText,"onUpdate:value":s[4]||(s[4]=o=>r.value.startButtonText=o),type:"text",placeholder:"Start",disabled:r.value.autoStart},null,8,["value","disabled"])]),_:1}),a(e(x),null,{default:t(()=>[a(e(oe),{checked:r.value.autoStart,"onUpdate:checked":s[5]||(s[5]=o=>r.value.autoStart=o)},{default:t(()=>[f("Skip welcome screen")]),_:1},8,["checked"])]),_:1}),a(e(B),{level:4},{default:t(()=>[f(" End Screen ")]),_:1}),a(e(x),{label:"End text"},{default:t(()=>[a(e(T),{value:r.value.endMessage,"onUpdate:value":s[6]||(s[6]=o=>r.value.endMessage=o),type:"text",placeholder:"Thank you"},null,8,["value"])]),_:1}),a(e(x),{label:"Restart button label"},{default:t(()=>[a(e(T),{value:r.value.restartButtonText,"onUpdate:value":s[7]||(s[7]=o=>r.value.restartButtonText=o),placeholder:"Restart",type:"text",disabled:!r.value.allowRestart},null,8,["value","disabled"])]),_:1}),a(e(x),{help:!r.value.isInitial&&"Only initial forms can be restarted"},{default:t(()=>[a(e(oe),{checked:r.value.allowRestart,"onUpdate:checked":s[8]||(s[8]=o=>r.value.allowRestart=o),disabled:!r.value.isInitial},{default:t(()=>[f("Show restart button at the end")]),_:1},8,["checked","disabled"])]),_:1},8,["help"]),a(e(B),{level:4},{default:t(()=>[f(" Alert Messages ")]),_:1}),a(e(x),{label:"Error message"},{default:t(()=>[a(e(T),{value:r.value.errorMessage,"onUpdate:value":s[9]||(s[9]=o=>r.value.errorMessage=o),type:"text",placeholder:"Something went wrong"},null,8,["value"])]),_:1})]),_:1}))}});const Ga=W(qa,[["__scopeId","data-v-aff64cb2"]]),Ja=$({__name:"QueryParamsModal",props:{open:{type:Boolean},close:{type:Function},queryParams:{}},emits:["update:query-params"],setup(g,{emit:h}){const k=C(s(g.queryParams));function s(d){return Object.entries(d).map(([p,b])=>({key:p,value:b,id:Math.random().toString()}))}function o(){const d={};return k.value.forEach(({key:p,value:b})=>{d[p]=b}),d}const v=(d,p,b)=>{k.value[d]={key:p,value:b},h("update:query-params",o())},w=()=>{const d=k.value.length;k.value.push({key:`param-${d}`,value:"value"}),h("update:query-params",o())},y=d=>{k.value.splice(d,1),h("update:query-params",o())};return(d,p)=>(i(),_(e(ne),{open:d.open,onCancel:d.close},{footer:t(()=>[a(e(I),{type:"primary",onClick:d.close},{default:t(()=>[f("OK")]),_:1},8,["onClick"])]),default:t(()=>[a(e(P),{vertical:"",gap:"20"},{default:t(()=>[a(e(V),null,{default:t(()=>[f("Query params")]),_:1}),(i(!0),A(ie,null,Qe(k.value,(b,E)=>(i(),_(e(x),{key:E},{default:t(()=>[a(e(ma),null,{default:t(()=>[a(e(T),{value:b.key,"onUpdate:value":c=>b.key=c,type:"text",placeholder:"name",onChange:()=>v(E,b.key,b.value)},null,8,["value","onUpdate:value","onChange"]),a(e(T),{value:b.value,"onUpdate:value":c=>b.value=c,type:"text",placeholder:"value",disabled:b.key===e(G),onChange:()=>v(E,b.key,b.value)},null,8,["value","onUpdate:value","disabled","onChange"]),a(e(I),{danger:"",onClick:c=>y(E)},{default:t(()=>[f("remove")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),a(e(x),null,{default:t(()=>[a(e(I),{type:"dashed",style:{width:"100%"},onClick:w},{default:t(()=>[f(" Add Query Param ")]),_:1})]),_:1})]),_:1})]),_:1},8,["open","onCancel"]))}}),Ka=g=>(de("data-v-bb8c2324"),g=g(),pe(),g),Xa={key:0},Ya={key:1},et=Ka(()=>F("br",null,null,-1)),at={class:"form-preview-container"},tt=$({__name:"FormEditor",setup(g){var ae;const h=qe(),r=Ge(),k=Fe(),s=Me(),o=C(null),v=C("source-code"),w=C(null),y=C(null),d=C(null),p=C({}),b=C(!1),E=n=>c.value={...c.value,attached:!!n},c=C({attached:!1,stageRunId:null,isInitial:!1}),L=R(()=>{var n;return(n=m.value)!=null&&n.form.hasChanges()?{title:"Unsaved changes",message:"Save the form before running the workflow"}:!c.value.isInitial&&c.value.attached&&!c.value.stageRunId?{title:"No thread selected",message:"Select a thread to run the workflow"}:null}),me=(n,l)=>{var u;(u=o.value)==null||u.setHighlight(n,l)},ve=()=>{var n,l;(n=o.value)==null||n.restartEditor(),(l=o.value)==null||l.startPreviewMode()},fe=R(()=>!c.value.isInitial&&c.value.attached&&!c.value.stageRunId);Je(()=>c.value.stageRunId?p.value={...p.value,[G]:c.value.stageRunId}:null);const{result:m,loading:ge,refetch:he}=ra(async()=>{const[n,l]=await Promise.all([da.get(r.params.id),J.get()]);return c.value.isInitial=n.isInitial,ea({form:n,workspace:l})});re([()=>c.value.attached,p,m],()=>{K()});function be(){var l;if(!m.value)return;const n=m.value.form.codeContent;(l=o.value)==null||l.updateLocalEditorCode(n),K()}function K(){if(!m.value)return;const n=!c.value.attached;d.value=m.value.form.makeRunnerData(m.value.workspace),w.value=new Ne({formRunnerData:d.value,logService:Y,connectionManager:new Pe(m.value.form.id,"editor",p.value,n),onFormStart:ve,onFormEnd:ye,onRedirect:Se,onStateUpdate:u=>y.value=u,onStackTraceUpdate:me});const l=w.value.getState();y.value=l.formState}const ye=()=>{var n,l,u;c.value={attached:!1,stageRunId:null,isInitial:(l=(n=m.value)==null?void 0:n.form.isInitial)!=null?l:!1},(u=o.value)==null||u.restartEditor()};function _e(){var n,l;(n=z.value)==null||n.closeConsole(),(l=w.value)==null||l.start()}function X(){var n,l;(n=o.value)==null||n.restartEditor(),(l=w.value)==null||l.resetForm()}function ke(){h.push({name:"stages"})}const z=C(null),we=n=>{!m.value||(m.value.form.file=n)},Y=$e.create();function Se(n,l){We("editor",h,n,l)}const Ce=()=>{var u;let n=`/${(u=m.value)==null?void 0:u.form.path}`;const l=new URLSearchParams(p.value);c.value.attached&&c.value.stageRunId&&l.set(G,c.value.stageRunId),window.open(`${n}?${l.toString()}`,"_blank")},O=C(!1),xe=R(()=>{if(!d.value)return"";const n=Object.entries(p.value),l="?"+n.map(([M,U])=>`${M}=${U}`).join("&"),u=n.length?l:"";return`/${d.value.path}${u}`}),ee=new Ke(Xe.boolean(),"dontShowReloadHelper"),Z=C((ae=ee.get())!=null?ae:!1),Ae=()=>{ee.set(!0),Z.value=!0};re(()=>r.params.id,()=>{he()});const j=n=>{var l;return n!==v.value&&((l=m.value)==null?void 0:l.form.hasChanges())};return(n,l)=>(i(),_(Ie,null,Ye({navbar:t(()=>[e(m)?(i(),_(e(fa),{key:0,title:e(m).form.title,style:{padding:"5px 25px",border:"1px solid #f6f6f6"},onBack:ke},{extra:t(()=>[a(va,{"docs-path":"concepts/forms","editing-model":e(m).form},null,8,["editing-model"])]),_:1},8,["title"])):S("",!0)]),content:t(()=>[e(m)?(i(),_(Ee,{key:0},{left:t(()=>[a(e(ga),{"active-key":v.value,"onUpdate:activeKey":l[0]||(l[0]=u=>v.value=u)},{rightExtra:t(()=>[a(Be,{model:e(m).form,onSave:be},null,8,["model"])]),default:t(()=>[a(e(q),{key:"source-code",tab:"Source code",disabled:j("source-code")},null,8,["disabled"]),a(e(q),{key:"settings",tab:"Settings",disabled:j("settings")},null,8,["disabled"]),a(e(q),{key:"notifications",tab:"Notifications",disabled:j("notifications")},null,8,["disabled"])]),_:1},8,["active-key"]),v.value==="source-code"?(i(),_(Le,{key:0,ref_key:"code",ref:o,script:e(m).form,workspace:e(m).workspace,onUpdateFile:we},null,8,["script","workspace"])):S("",!0),v.value==="settings"?(i(),_(Ga,{key:1,form:e(m).form},null,8,["form"])):S("",!0),v.value==="notifications"?(i(),_(Qa,{key:2,form:e(m).form},null,8,["form"])):S("",!0),b.value?(i(),_(za,{key:3,"execution-config":c.value,"onUpdate:executionConfig":l[1]||(l[1]=u=>c.value=u),"show-thread-modal":b.value,"onUpdate:showThreadModal":l[2]||(l[2]=u=>b.value=u),stage:e(m).form,onFixInvalidJson:l[3]||(l[3]=(u,M)=>{var U;return(U=z.value)==null?void 0:U.fixJson(u,M)})},null,8,["execution-config","show-thread-modal","stage"])):S("",!0)]),right:t(()=>[a(e(P),{gap:"10",align:"center",justify:"right",style:{"margin-top":"6px"}},{default:t(()=>{var u;return[a(e(V),null,{default:t(()=>[f(Q(c.value.attached?"Workflow ON":"Workflow OFF"),1)]),_:1}),a(e(se),{disabled:!!y.value&&e(D).includes((u=y.value)==null?void 0:u.type),checked:c.value.attached,"onUpdate:checked":E},null,8,["disabled","checked"]),a(e(ha),{dot:fe.value},{default:t(()=>{var M;return[a(e(I),{disabled:!!y.value&&e(D).includes((M=y.value)==null?void 0:M.type),style:{display:"flex",gap:"5px"},onClick:l[4]||(l[4]=U=>b.value=!0)},{icon:t(()=>[a(e(ua),{size:"20"})]),default:t(()=>[f("Thread")]),_:1},8,["disabled"])]}),_:1},8,["dot"])]}),_:1}),a(e(ba),{style:{margin:"7px 0px 16px"}}),e(ge)||!d.value||!y.value?(i(),_(e(aa),{key:0})):S("",!0),y.value&&d.value?(i(),_(e(P),{key:1,vertical:"",gap:"10",style:{height:"100%",overflow:"hidden"}},{default:t(()=>[a(e(P),{gap:"small"},{default:t(()=>[y.value.type&&e(De).includes(y.value.type)?(i(),_(e(ta),{key:0,placement:"bottom",open:Z.value?void 0:!0},{content:t(()=>[Z.value?(i(),A("span",Xa,"Reload form")):(i(),A("span",Ya,[f(" You can reload the form here"),et,a(e(la),{onClick:Ae},{default:t(()=>[f("Don't show this again")]),_:1})]))]),default:t(()=>[a(e(I),{disabled:!!L.value,onClick:X},{default:t(()=>[a(e(Pa),{size:"20"})]),_:1},8,["disabled"])]),_:1},8,["open"])):S("",!0),e(D).includes(y.value.type)?(i(),_(e(N),{key:1,placement:"bottom"},{title:t(()=>[f("Stop form")]),default:t(()=>[a(e(I),{onClick:X},{default:t(()=>[a(e(Ve),{size:"20"})]),_:1})]),_:1})):S("",!0),y.value.type==="waiting"?(i(),_(e(N),{key:2,placement:"bottom"},{title:t(()=>[f("Start form")]),default:t(()=>[a(e(I),{disabled:!!L.value,onClick:_e},{default:t(()=>[a(e(oa),{size:"20"})]),_:1},8,["disabled"])]),_:1})):S("",!0),a(e(T),{disabled:"",value:xe.value},null,8,["value"]),a(e(N),{placement:"bottom"},{title:t(()=>[f("Edit query params")]),default:t(()=>{var u;return[a(e(I),{disabled:!!y.value&&e(D).includes((u=y.value)==null?void 0:u.type),onClick:l[5]||(l[5]=M=>O.value=!0)},{default:t(()=>[a(e(ia),{size:"20"})]),_:1},8,["disabled"])]}),_:1}),a(e(N),{placement:"bottom"},{title:t(()=>[f("Open in Full Screen")]),default:t(()=>[a(e(I),{target:"_blank","aria-label":"Open in Full Screen","aria-describedby":"sss",disabled:!c.value.attached,onClick:Ce},{default:t(()=>[a(e(sa),{size:"20"})]),_:1},8,["disabled"])]),_:1})]),_:1}),F("div",at,[L.value?(i(),_(e(ya),{key:0,class:"unsaved-changes"},{default:t(()=>[a(e(V),{style:{"font-size":"18px","font-weight":"500"}},{default:t(()=>[f(Q(L.value.title),1)]),_:1}),a(e(V),{style:{"margin-bottom":"6px"}},{default:t(()=>[f(Q(L.value.message),1)]),_:1})]),_:1})):S("",!0),a(na,{class:"center","main-color":d.value.mainColor,background:d.value.theme,"font-family":d.value.fontFamily,locale:d.value.language},{default:t(()=>{var u,M,U,te,le;return[e(s).state.workspace?(i(),_(Te,{key:0,"current-path":e(m).form.path,"hide-login":!0,"runner-data":e(s).state.workspace},null,8,["current-path","runner-data"])):S("",!0),a(He,{"is-preview":"",class:"runner","form-runner-data":d.value,"form-state":y.value,disabled:!!L.value,"user-email":e(k).email,onUpdateWidgetErrors:(u=w.value)==null?void 0:u.updateWidgetFrontendErrors,onUpdateWidgetValue:(M=w.value)==null?void 0:M.updateWidgetValue,onActionClicked:(U=w.value)==null?void 0:U.handleActionClick,onAutoFillClicked:(te=w.value)==null?void 0:te.handleAutofillClick,onAuthComplete:(le=w.value)==null?void 0:le.handleAuthComplete},null,8,["form-runner-data","form-state","disabled","user-email","onUpdateWidgetErrors","onUpdateWidgetValue","onActionClicked","onAutoFillClicked","onAuthComplete"])]}),_:1},8,["main-color","background","font-family","locale"])])]),_:1})):S("",!0),a(Ja,{"query-params":p.value,"onUpdate:queryParams":l[6]||(l[6]=u=>p.value=u),open:O.value,close:()=>O.value=!1},null,8,["query-params","open","close"])]),_:1})):S("",!0)]),_:2},[e(m)?{name:"footer",fn:t(()=>[a(Re,{ref_key:"smartConsole",ref:z,"stage-type":"forms",stage:e(m).form,"log-service":e(Y),workspace:e(m).workspace},null,8,["stage","log-service","workspace"])]),key:"0"}:void 0]),1024))}});const cl=W(tt,[["__scopeId","data-v-bb8c2324"]]);export{cl as default};
//# sourceMappingURL=FormEditor.771039c7.js.map
