import{a as I}from"./asyncComputed.581a6d32.js";import{P as E}from"./project.78d75c60.js";import"./router.88ac172f.js";import{d as k,r as y,b as _,c as C,w as a,aI as s,ex as T,u as e,c0 as B,cC as P,eF as F,H as w,f as t,e as p,eB as m,bV as H,et as D,ev as S,ez as V}from"./outputWidgets.942e04a7.js";import"./columns.b249ad7a.js";import{s as U}from"./index.6d3b437a.js";import{c as j,A as N}from"./Title.02f374d5.js";import{A,a as i}from"./index.a0056785.js";import{A as g}from"./index.f7b7cb5d.js";import{F as $}from"./Form.fa989528.js";import{A as R}from"./index.90e879e1.js";import"./gateway.c853ac2b.js";import"./activeRecord.c49c8827.js";import"./pubsub.c4874b0f.js";import"./index.f4ac7424.js";(function(){try{var u=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},n=new Error().stack;n&&(u._sentryDebugIds=u._sentryDebugIds||{},u._sentryDebugIds[n]="0b5e507b-1a70-4d1e-968f-0af995c7754a",u._sentryDebugIdIdentifier="sentry-dbid-0b5e507b-1a70-4d1e-968f-0af995c7754a")}catch{}})();const z=k({__name:"SaveButton",props:{model:{},disabled:{type:Boolean}},emits:["error"],setup(u,{emit:n}){const r=u,d=y(!1),f=y(null);async function c(){d.value=!0;try{await r.model.save()}catch(o){o instanceof Error&&(n("error",o),P.error({message:"Error",description:o.message}),f.value=o)}finally{d.value=!1}}return addEventListener("keydown",o=>{(o.metaKey||o.ctrlKey)&&o.key==="s"&&(o.preventDefault(),c())}),addEventListener("beforeunload",o=>{r.model.hasChanges()&&(o.preventDefault(),o.returnValue="")}),(o,v)=>{var b,l,h;return _(),C(e(B),{class:T(["save-button",{changes:(b=o.model)==null?void 0:b.hasChanges()}]),loading:d.value,disabled:(h=o.disabled)!=null?h:!((l=o.model)!=null&&l.hasChanges()),onClick:v[0]||(v[0]=M=>c())},{default:a(()=>[s(" Save ")]),_:1},8,["class","loading","disabled"])}}}),K={key:0},L=k({__name:"SubdomainEditor",props:{project:{}},setup(u){const n=u,r=y(void 0),d=F.exports.debounce(async()=>{try{const{available:l}=await n.project.checkSubdomain();r.value=l?"available":"unavailable"}catch{r.value=void 0}},500);function f(){n.project.subdomain?(r.value="loading",d()):r.value="invalid"}const c=w(()=>{switch(r.value){case"invalid":return"error";case"loading":return"validating";case"available":return"success";case"unavailable":return"error";default:return}}),o=w(()=>{switch(r.value){case"loading":return"Checking availability...";case"available":return"Available";case"unavailable":return"Unavailable";case"invalid":return"Invalid subdomain";default:return}}),v=l=>{n.project.subdomain=U(l.target.value,{replacement:"-",lower:!0,strict:!0}),f()};function b(){n.project.resetChanges(),r.value=void 0}return(l,h)=>(_(),C(e(R),{direction:"vertical"},{default:a(()=>[t(e(j),{level:2},{default:a(()=>[s("Subdomain")]),_:1}),t(e(A),null,{default:a(()=>[s(" Every project in Abstra Cloud comes with a default subdomain, which will appear on all shared project links. ")]),_:1}),t(e(g),null,{default:a(()=>[t(e(i),null,{default:a(()=>[s("Forms and Dashes available at:")]),_:1}),t(e(i),{code:""},{default:a(()=>[p("span",null,m(l.project.getUrl("[PATH]")),1)]),_:1})]),_:1}),t(e(g),null,{default:a(()=>[t(e(i),null,{default:a(()=>[s("Hooks available at:")]),_:1}),t(e(i),{code:""},{default:a(()=>[p("span",null,m(l.project.getUrl("_hooks/[PATH]")),1)]),_:1})]),_:1}),t(e($),null,{default:a(()=>[t(e(N),{"validate-status":c.value,help:o.value,"has-feedback":""},{default:a(()=>[t(e(H),{value:l.project.subdomain,type:"text",loading:r.value==="loading",onInput:v},{addonBefore:a(()=>[s("https://")]),addonAfter:a(()=>[s(".abstra.app")]),_:1},8,["value","loading"])]),_:1},8,["validate-status","help"]),t(z,{model:l.project,disabled:r.value!=="available",onError:b},null,8,["model","disabled"])]),_:1}),l.project.customDomain?(_(),D("div",K,[t(e(j),{level:2},{default:a(()=>[s("Custom Domain")]),_:1}),t(e(A),null,{default:a(()=>[s(" Your project also has a custom domain: "),t(e(i),{code:""},{default:a(()=>[p("span",null,m(l.project.customDomain),1)]),_:1})]),_:1}),t(e(g),null,{default:a(()=>[t(e(i),null,{default:a(()=>[s("Forms and Dashes available at:")]),_:1}),t(e(i),{code:""},{default:a(()=>[p("span",null,m(l.project.getCustomDomainUrl("[PATH]")),1)]),_:1})]),_:1}),t(e(g),null,{default:a(()=>[t(e(i),null,{default:a(()=>[s("Hooks available at:")]),_:1}),t(e(i),{code:""},{default:a(()=>[p("span",null,m(l.project.getCustomDomainUrl("_hooks/[PATH]")),1)]),_:1})]),_:1})])):S("",!0)]),_:1}))}}),q={key:0,class:"project-settings"},se=k({__name:"ProjectSettings",setup(u){const r=V().params.projectId,{result:d}=I(()=>E.get(r));return(f,c)=>e(d)?(_(),D("div",q,[t(e(j),null,{default:a(()=>[s("Project Settings")]),_:1}),t(L,{project:e(d)},null,8,["project"])])):S("",!0)}});export{se as default};
//# sourceMappingURL=ProjectSettings.f9eb5ef1.js.map
