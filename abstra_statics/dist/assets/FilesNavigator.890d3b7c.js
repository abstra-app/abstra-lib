import{d as V,D as $,f as P,o as c,Y as g,$ as ae,S as h,ed as ue,a as b,b as f,ee as S,eG as se,eH as ce,eI as de,Z as L,ei as T,e as q,u as s,cD as fe,w as p,c as v,aG as w,ea as W,db as pe,bT as B,ct as me,dh as he,ey as ye,bR as ve,eb as ge,bz as be,bx as D,d4 as Oe,cx as we,p as z,a0 as Pe}from"./index.97914b50.js";import{p as Fe}from"./popupNotifcation.f5d6fec9.js";import{a as Ae}from"./ant-design.6c73842d.js";import{f as Y}from"./string.8b027234.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="fb56e8e6-3ed7-4b1e-ae40-94a5d2ddbdec",t._sentryDebugIdIdentifier="sentry-dbid-fb56e8e6-3ed7-4b1e-ae40-94a5d2ddbdec")}catch{}})();var Se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM544 472c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v108H372c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h108v108c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h108c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V472z"}}]},name:"file-add",theme:"outlined"};const ke=Se;var _e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M484 443.1V528h-84.5c-4.1 0-7.5 3.1-7.5 7v42c0 3.8 3.4 7 7.5 7H484v84.9c0 3.9 3.2 7.1 7 7.1h42c3.9 0 7-3.2 7-7.1V584h84.5c4.1 0 7.5-3.2 7.5-7v-42c0-3.9-3.4-7-7.5-7H540v-84.9c0-3.9-3.1-7.1-7-7.1h-42c-3.8 0-7 3.2-7 7.1zm396-144.7H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder-add",theme:"outlined"};const De=_e;var Ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};const je=Ce,Me=["width","height","fill","transform"],$e={key:0},ze=b("path",{d:"M144,128a16,16,0,1,1-16-16A16,16,0,0,1,144,128ZM60,112a16,16,0,1,0,16,16A16,16,0,0,0,60,112Zm136,0a16,16,0,1,0,16,16A16,16,0,0,0,196,112Z"},null,-1),Be=[ze],Ee={key:1},Ve=b("path",{d:"M240,96v64a16,16,0,0,1-16,16H32a16,16,0,0,1-16-16V96A16,16,0,0,1,32,80H224A16,16,0,0,1,240,96Z",opacity:"0.2"},null,-1),Ne=b("path",{d:"M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128Zm56-12a12,12,0,1,0,12,12A12,12,0,0,0,196,116ZM60,116a12,12,0,1,0,12,12A12,12,0,0,0,60,116Z"},null,-1),Ze=[Ve,Ne],He={key:2},Ue=b("path",{d:"M224,80H32A16,16,0,0,0,16,96v64a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V96A16,16,0,0,0,224,80ZM60,140a12,12,0,1,1,12-12A12,12,0,0,1,60,140Zm68,0a12,12,0,1,1,12-12A12,12,0,0,1,128,140Zm68,0a12,12,0,1,1,12-12A12,12,0,0,1,196,140Z"},null,-1),xe=[Ue],Ie={key:3},Re=b("path",{d:"M138,128a10,10,0,1,1-10-10A10,10,0,0,1,138,128ZM60,118a10,10,0,1,0,10,10A10,10,0,0,0,60,118Zm136,0a10,10,0,1,0,10,10A10,10,0,0,0,196,118Z"},null,-1),Ge=[Re],Le={key:4},Te=b("path",{d:"M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128Zm56-12a12,12,0,1,0,12,12A12,12,0,0,0,196,116ZM60,116a12,12,0,1,0,12,12A12,12,0,0,0,60,116Z"},null,-1),qe=[Te],We={key:5},Ye=b("path",{d:"M136,128a8,8,0,1,1-8-8A8,8,0,0,1,136,128Zm-76-8a8,8,0,1,0,8,8A8,8,0,0,0,60,120Zm136,0a8,8,0,1,0,8,8A8,8,0,0,0,196,120Z"},null,-1),Je=[Ye],Qe={name:"PhDotsThree"},Xe=V({...Qe,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(t){const e=t,n=$("weight","regular"),l=$("size","1em"),o=$("color","currentColor"),y=$("mirrored",!1),O=P(()=>{var m;return(m=e.weight)!=null?m:n}),A=P(()=>{var m;return(m=e.size)!=null?m:l}),C=P(()=>{var m;return(m=e.color)!=null?m:o}),j=P(()=>e.mirrored!==void 0?e.mirrored?"scale(-1, 1)":void 0:y?"scale(-1, 1)":void 0);return(m,R)=>(c(),g("svg",ue({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:A.value,height:A.value,fill:C.value,transform:j.value},m.$attrs),[ae(m.$slots,"default"),O.value==="bold"?(c(),g("g",$e,Be)):O.value==="duotone"?(c(),g("g",Ee,Ze)):O.value==="fill"?(c(),g("g",He,xe)):O.value==="light"?(c(),g("g",Ie,Ge)):O.value==="regular"?(c(),g("g",Le,qe)):O.value==="thin"?(c(),g("g",We,Je)):h("",!0)],16,Me))}});function J(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},l=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),l.forEach(function(o){Ke(t,o,n[o])})}return t}function Ke(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var N=function(e,n){var l=J({},e,n.attrs);return f(S,J({},l,{icon:se}),null)};N.displayName="DeleteOutlined";N.inheritAttrs=!1;const et=N;function Q(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},l=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),l.forEach(function(o){tt(t,o,n[o])})}return t}function tt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Z=function(e,n){var l=Q({},e,n.attrs);return f(S,Q({},l,{icon:ce}),null)};Z.displayName="DownloadOutlined";Z.inheritAttrs=!1;const nt=Z;function X(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},l=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),l.forEach(function(o){rt(t,o,n[o])})}return t}function rt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var H=function(e,n){var l=X({},e,n.attrs);return f(S,X({},l,{icon:de}),null)};H.displayName="EditOutlined";H.inheritAttrs=!1;const at=H;function K(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},l=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),l.forEach(function(o){lt(t,o,n[o])})}return t}function lt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var U=function(e,n){var l=K({},e,n.attrs);return f(S,K({},l,{icon:ke}),null)};U.displayName="FileAddOutlined";U.inheritAttrs=!1;const ee=U;function te(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},l=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),l.forEach(function(o){ot(t,o,n[o])})}return t}function ot(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var x=function(e,n){var l=te({},e,n.attrs);return f(S,te({},l,{icon:De}),null)};x.displayName="FolderAddOutlined";x.inheritAttrs=!1;const it=x;function ne(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},l=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),l.forEach(function(o){ut(t,o,n[o])})}return t}function ut(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var I=function(e,n){var l=ne({},e,n.attrs);return f(S,ne({},l,{icon:je}),null)};I.displayName="UploadOutlined";I.inheritAttrs=!1;const re=I;function Ot(t){var e;return(e=t.split(/\/|\\/).pop())!=null?e:""}function E(t){return t.length===0?".":t[t.length-1]}function wt(t){const e=["B","KB","MB","GB","TB"],n=t.match(/^(\d+(\.\d+)?)\s*(\w+)$/);if(!n)return 0;const l=parseFloat(n[1]),o=n[3],y=e.indexOf(o);return y===-1?0:l*Math.pow(1024,y)}const st=V({__name:"ScrollArea",props:{innerClass:{},outerClass:{},outerStyle:{},innerStyle:{}},setup(t){const e=t,n=P(()=>e.outerStyle?{position:"relative",...e.outerStyle}:{position:"relative"}),l=P(()=>{var o;return{position:"absolute",inset:0,overflow:"auto",...(o=e.innerStyle)!=null?o:{}}});return(o,y)=>(c(),g("div",{style:L(n.value),class:T(o.outerClass)},[b("div",{style:L(l.value),class:T(o.innerClass)},[ae(o.$slots,"default")],6)],6))}}),ct={class:"files-navigator"},dt={key:0},ft={key:1},pt={key:0,class:"file-size"},mt=V({__name:"FilesNavigator",props:{files:{},loading:{type:Boolean},onCreate:{type:Function},onDownload:{type:Function},onDelete:{type:Function},onRefetch:{type:Function},onRename:{type:Function},onOpen:{type:Function},onMkdir:{type:Function},separator:{}},setup(t){const e=t,n=r=>a=>{var i,u;return{key:a.pathParts.join(e.separator),title:r.keepFullPath?a.pathParts.join(e.separator):E(a.pathParts),isLeaf:a.type==="file",file:a,children:r.keepFullPath?void 0:(u=(i=a.children)==null?void 0:i.map(d=>{var _;const k=(_=e.files)==null?void 0:_.find(M=>M.pathParts.join(e.separator)===d.join(e.separator));if(!k)throw new Error("Child node not found");return n({keepFullPath:r.keepFullPath})(k)}))!=null?u:[]}},l=r=>{if(!F.value.trim())return z("span",r);const a=Y(F.value,r);return a?z("span",r.split("").map((i,u)=>a.includes(u)?z("span",{class:"char-match"},i):i)):z("span",r)},o=r=>{if(r.type==="directory")return"";const a=r.size;if(a<1024)return`${a} B`;const i=a/1024;if(i<1024)return`${i.toFixed(2)} KB`;const u=i/1024;return u<1024?`${u.toFixed(2)} MB`:`${(u/1024).toFixed(2)} GB`},y=P(()=>{var r,a;return F.value.trim()?(r=e.files)==null?void 0:r.filter(i=>i.pathParts.length===1&&Y(F.value,i.pathParts.join(e.separator))).map(n({keepFullPath:!0})):(a=e.files)==null?void 0:a.filter(i=>i.pathParts.length===1).map(n({keepFullPath:!1}))}),O=r=>{var a,i;return r.isLeaf?1:(i=(a=r.children)==null?void 0:a.reduce((u,d)=>u+O(d),0))!=null?i:0},A=P(()=>y.value?y==null?void 0:y.value.reduce((r,a)=>r+O(a),0):0),C=q(!1);function j(r){if(r&&r.type==="file")return;const a=document.createElement("input");a.type="file",a.onchange=async()=>{var d,k,_,M,G;const i=(d=a.files)==null?void 0:d[0],u=await(i==null?void 0:i.arrayBuffer());if(!!i)try{C.value=!0,await((M=e.onCreate)==null?void 0:M.call(e,[...(k=r==null?void 0:r.pathParts)!=null?k:[],(_=i.name)!=null?_:"Untitled file"],u?new Uint8Array(u):void 0)),await((G=e.onRefetch)==null?void 0:G.call(e))}catch{Fe("Failed to upload file","File already exists")}finally{C.value=!1}},a.click()}function m(r){var u;if(r&&r.type==="file")return;const a=prompt("Enter the name of the new file");if(!a)return;const i=r?[...r.pathParts,a]:[a];(u=e.onCreate)==null||u.call(e,i)}async function R(r){if(!r||!e.onDownload)return;const a=await e.onDownload(r.pathParts),i=document.createElement("a");i.href=URL.createObjectURL(a),i.download=E(r.pathParts),i.click()}async function le(r){var i,u;if(!r)return;const a="Are you sure you want to delete this "+(r.type==="file"?"file":"directory and all its contents")+"?";await Ae(a)&&(await((i=e.onDelete)==null?void 0:i.call(e,r.pathParts)),await((u=e.onRefetch)==null?void 0:u.call(e)))}async function oe(r){var u,d;if(!r)return;const a=prompt("Enter the new name of the file",E(r.pathParts));if(!a)return;const i=[...r.pathParts.slice(0,-1),a];await((u=e.onRename)==null?void 0:u.call(e,r.pathParts,i)),await((d=e.onRefetch)==null?void 0:d.call(e))}async function ie(r){var u;if(r&&r.type==="file")return;const a=prompt("Enter the name of the new folder");if(!a)return;const i=r?[...r.pathParts,a]:[a];(u=e.onMkdir)==null||u.call(e,i)}const F=q("");return(r,a)=>(c(),g("div",ct,[f(s(fe),{value:F.value,"onUpdate:value":a[0]||(a[0]=i=>F.value=i),loading:e.loading,placeholder:"Search files"},null,8,["value","loading"]),f(s(he),{justify:"space-between"},{default:p(()=>[A.value>0?(c(),v(s(pe),{key:0},{default:p(()=>[b("b",null,[w(W(A.value)+" File",1),A.value!==1?(c(),g("span",dt,"s")):h("",!0),F.value?(c(),g("span",ft," found ")):h("",!0)])]),_:1})):h("",!0),r.loading?h("",!0):(c(),v(s(me),{key:1},{default:p(()=>[r.onCreate?(c(),v(s(B),{key:0,onClick:a[1]||(a[1]=()=>m())},{default:p(()=>[f(s(ee)),w(" New File ")]),_:1})):h("",!0),r.onCreate?(c(),v(s(B),{key:1,onClick:a[2]||(a[2]=()=>j())},{default:p(()=>[f(s(re)),w(" Upload ")]),_:1})):h("",!0),r.onMkdir?(c(),v(s(B),{key:2,onClick:a[3]||(a[3]=()=>ie())},{default:p(()=>[f(s(it)),w(" New Folder ")]),_:1})):h("",!0)]),_:1}))]),_:1}),f(st,{class:"scroll-area","outer-style":{flexGrow:"1"}},{default:p(()=>[y.value&&y.value.length>0?(c(),v(s(Oe),{key:0,class:"files-tree","tree-data":y.value,selectable:"",onSelect:a[5]||(a[5]=(i,{node:{file:u}})=>{var d;return(d=e.onOpen)==null?void 0:d.call(e,u.pathParts)})},{title:p(({title:i,isLeaf:u,file:d})=>[b("span",null,[(c(),v(ye(l(i)))),u?(c(),g("span",pt,"("+W(o(d))+")",1)):h("",!0)]),f(s(ve),{onClick:a[4]||(a[4]=ge(()=>{},["stop"]))},{overlay:p(()=>[f(s(be),{disabled:r.loading},{default:p(()=>[r.onDownload?(c(),v(s(D),{key:0,onClick:()=>R(d)},{default:p(()=>[f(s(nt)),w(" Download ")]),_:2},1032,["onClick"])):h("",!0),r.onRename?(c(),v(s(D),{key:1,onClick:()=>oe(d)},{default:p(()=>[f(s(at)),w(" Rename ")]),_:2},1032,["onClick"])):h("",!0),!u&&r.onCreate?(c(),v(s(D),{key:2,onClick:()=>m(d)},{default:p(()=>[f(s(ee)),w(" New File ")]),_:2},1032,["onClick"])):h("",!0),r.onCreate?(c(),v(s(D),{key:3,loading:r.loading,onClick:()=>j(d)},{default:p(()=>[f(s(re)),w(" Upload ")]),_:2},1032,["loading","onClick"])):h("",!0),r.onDelete?(c(),v(s(D),{key:4,danger:"",onClick:()=>le(d)},{default:p(()=>[f(s(et)),w(" Delete ")]),_:2},1032,["onClick"])):h("",!0)]),_:2},1032,["disabled"])]),default:p(()=>[f(s(Xe),{style:{cursor:"pointer",float:"inline-end"},size:"25px"})]),_:2},1024)]),_:1},8,["tree-data"])):(c(),v(s(we),{key:1,description:r.loading?"Loading...":"No files"},null,8,["description"]))]),_:1})]))}});const Pt=Pe(mt,[["__scopeId","data-v-edd5346e"]]);export{Pt as F,st as _,Ot as f,wt as s};
//# sourceMappingURL=FilesNavigator.890d3b7c.js.map
