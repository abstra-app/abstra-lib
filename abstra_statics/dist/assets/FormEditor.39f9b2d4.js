import{P as Ae}from"./PlayerNavbar.f15ca057.js";import{u as Ce}from"./router.4e800ecb.js";import{B as Fe}from"./BaseLayout.669a9bab.js";import{R as Te,S as Me,E as Ie,a as Ue,I as Re,L as Ee}from"./SourceCode.9a0f091e.js";import{S as Ve}from"./SaveButton.c020f919.js";import{F as D,a as Le,b as De,c as Be,d as He,r as $e}from"./FormRunner.7c7b49d8.js";import{d as V,B,f as E,o as p,W as C,Z as Ne,R as S,es as Pe,a as T,V as Ze,D as We,c as b,w as t,b as a,u as e,cA as oe,$ as N,e as w,cY as L,ax as v,cU as O,co as x,bD as F,cn as re,aJ as ne,eC as se,eD as ue,bG as te,bL as I,ew as ze,d0 as $,eH as Oe,eu as je,aC as Qe,g as le,L as qe,N as Ge,eA as Je,y as Ye,cX as Ke,et as Xe,bp as ea,cD as aa,cV as ta,aN as H,eY as la}from"./vue-router.33ac8cf0.js";import{A as j}from"./api.fe471eef.js";import{a as oa}from"./asyncComputed.9837140d.js";import{F as ra}from"./PhArrowSquareOut.vue.8f35b18d.js";import{G as na}from"./PhFlowArrow.vue.afba3bb5.js";import{F as sa}from"./metadata.9e4f8380.js";import{F as ua}from"./forms.41ab0d93.js";import"./linters.69a7e41d.js";import{W as Q}from"./workspaces.5a78a193.js";import{T as ia}from"./ThreadSelector.35cb13d9.js";import{A as ie}from"./index.375982ae.js";import{A as da}from"./index.fed9fe14.js";import{A as pa}from"./index.f737d7de.js";import{N as ca}from"./NavbarControls.4ade74af.js";import{b as ma}from"./index.205f240d.js";import{A as z,T as va}from"./TabPane.3c2ae325.js";import{B as fa}from"./Badge.5af6a5fd.js";import{A as ga}from"./index.43a96421.js";import"./PhSignOut.vue.8dcabe1f.js";import"./workspaceStore.26ac0c6b.js";import"./api.9e154b60.js";import"./runnerData.411ef4c2.js";import"./url.d6d42cf8.js";import"./index.705caec9.js";import"./uuid.5f70b278.js";import"./jobs.d252ded8.js";import"./record.88671b98.js";import"./scripts.3ee11ab7.js";import"./validations.61b9d43a.js";import"./string.cf4460b1.js";import"./editor.d2f27bd4.js";import"./PhCopy.vue.4363bfc7.js";import"./PhCheckCircle.vue.dd54e5f8.js";import"./PhCopySimple.vue.ce72512f.js";import"./PhCaretRight.vue.9686ff41.js";import"./PhBug.vue.14c4ca47.js";import"./PhQuestion.vue.e4aa867f.js";import"./LoadingOutlined.71bbfb2b.js";import"./PhPencil.vue.82d54551.js";import"./toggleHighContrast.1c697361.js";import"./Card.3815c904.js";import"./ExclamationCircleOutlined.55ff1770.js";import"./Login.vue_vue_type_script_setup_true_lang.f0eb10e5.js";import"./CircularLoading.b81f5bd0.js";import"./WidgetsFrame.c1a5e0e5.js";import"./Steps.fab0fe43.js";import"./Watermark.49ed07d5.js";import"./fetch.fbcfc71d.js";import"./PhKanban.vue.3f725030.js";import"./PhWebhooksLogo.vue.ecd2df5b.js";import"./index.d07f300c.js";import"./CloseCircleOutlined.5b064e67.js";import"./popupNotifcation.6b8971b6.js";import"./DocsButton.vue_vue_type_script_setup_true_lang.e2bbbfd3.js";import"./BookOutlined.c6692cb9.js";import"./PhChats.vue.d63e67b7.js";import"./isNumeric.75337b1e.js";(function(){try{var g=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},h=new Error().stack;h&&(g._sentryDebugIds=g._sentryDebugIds||{},g._sentryDebugIds[h]="9b33d81e-a62e-467c-9033-a633c0f410e6",g._sentryDebugIdIdentifier="sentry-dbid-9b33d81e-a62e-467c-9033-a633c0f410e6")}catch{}})();const ha=["width","height","fill","transform"],ya={key:0},_a=T("path",{d:"M228,48V96a12,12,0,0,1-12,12H168a12,12,0,0,1,0-24h19l-7.8-7.8a75.55,75.55,0,0,0-53.32-22.26h-.43A75.49,75.49,0,0,0,72.39,75.57,12,12,0,1,1,55.61,58.41a99.38,99.38,0,0,1,69.87-28.47H126A99.42,99.42,0,0,1,196.2,59.23L204,67V48a12,12,0,0,1,24,0ZM183.61,180.43a75.49,75.49,0,0,1-53.09,21.63h-.43A75.55,75.55,0,0,1,76.77,179.8L69,172H88a12,12,0,0,0,0-24H40a12,12,0,0,0-12,12v48a12,12,0,0,0,24,0V189l7.8,7.8A99.42,99.42,0,0,0,130,226.06h.56a99.38,99.38,0,0,0,69.87-28.47,12,12,0,0,0-16.78-17.16Z"},null,-1),ba=[_a],ka={key:1},wa=T("path",{d:"M216,128a88,88,0,1,1-88-88A88,88,0,0,1,216,128Z",opacity:"0.2"},null,-1),Sa=T("path",{d:"M224,48V96a8,8,0,0,1-8,8H168a8,8,0,0,1,0-16h28.69L182.06,73.37a79.56,79.56,0,0,0-56.13-23.43h-.45A79.52,79.52,0,0,0,69.59,72.71,8,8,0,0,1,58.41,61.27a96,96,0,0,1,135,.79L208,76.69V48a8,8,0,0,1,16,0ZM186.41,183.29a80,80,0,0,1-112.47-.66L59.31,168H88a8,8,0,0,0,0-16H40a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V179.31l14.63,14.63A95.43,95.43,0,0,0,130,222.06h.53a95.36,95.36,0,0,0,67.07-27.33,8,8,0,0,0-11.18-11.44Z"},null,-1),xa=[wa,Sa],Aa={key:2},Ca=T("path",{d:"M224,48V96a8,8,0,0,1-8,8H168a8,8,0,0,1-5.66-13.66L180.65,72a79.48,79.48,0,0,0-54.72-22.09h-.45A79.52,79.52,0,0,0,69.59,72.71,8,8,0,0,1,58.41,61.27,96,96,0,0,1,192,60.7l18.36-18.36A8,8,0,0,1,224,48ZM186.41,183.29A80,80,0,0,1,75.35,184l18.31-18.31A8,8,0,0,0,88,152H40a8,8,0,0,0-8,8v48a8,8,0,0,0,13.66,5.66L64,195.3a95.42,95.42,0,0,0,66,26.76h.53a95.36,95.36,0,0,0,67.07-27.33,8,8,0,0,0-11.18-11.44Z"},null,-1),Fa=[Ca],Ta={key:3},Ma=T("path",{d:"M222,48V96a6,6,0,0,1-6,6H168a6,6,0,0,1,0-12h33.52L183.47,72a81.51,81.51,0,0,0-57.53-24h-.46A81.5,81.5,0,0,0,68.19,71.28a6,6,0,1,1-8.38-8.58,93.38,93.38,0,0,1,65.67-26.76H126a93.45,93.45,0,0,1,66,27.53l18,18V48a6,6,0,0,1,12,0ZM187.81,184.72a81.5,81.5,0,0,1-57.29,23.34h-.46a81.51,81.51,0,0,1-57.53-24L54.48,166H88a6,6,0,0,0,0-12H40a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V174.48l18,18.05a93.45,93.45,0,0,0,66,27.53h.52a93.38,93.38,0,0,0,65.67-26.76,6,6,0,1,0-8.38-8.58Z"},null,-1),Ia=[Ma],Ua={key:4},Ra=T("path",{d:"M224,48V96a8,8,0,0,1-8,8H168a8,8,0,0,1,0-16h28.69L182.06,73.37a79.56,79.56,0,0,0-56.13-23.43h-.45A79.52,79.52,0,0,0,69.59,72.71,8,8,0,0,1,58.41,61.27a96,96,0,0,1,135,.79L208,76.69V48a8,8,0,0,1,16,0ZM186.41,183.29a80,80,0,0,1-112.47-.66L59.31,168H88a8,8,0,0,0,0-16H40a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V179.31l14.63,14.63A95.43,95.43,0,0,0,130,222.06h.53a95.36,95.36,0,0,0,67.07-27.33,8,8,0,0,0-11.18-11.44Z"},null,-1),Ea=[Ra],Va={key:5},La=T("path",{d:"M220,48V96a4,4,0,0,1-4,4H168a4,4,0,0,1,0-8h38.34L184.89,70.54A84,84,0,0,0,66.8,69.85a4,4,0,1,1-5.6-5.72,92,92,0,0,1,129.34.76L212,86.34V48a4,4,0,0,1,8,0ZM189.2,186.15a83.44,83.44,0,0,1-58.68,23.91h-.47a83.52,83.52,0,0,1-58.94-24.6L49.66,164H88a4,4,0,0,0,0-8H40a4,4,0,0,0-4,4v48a4,4,0,0,0,8,0V169.66l21.46,21.45A91.43,91.43,0,0,0,130,218.06h.51a91.45,91.45,0,0,0,64.28-26.19,4,4,0,1,0-5.6-5.72Z"},null,-1),Da=[La],Ba={name:"PhArrowsClockwise"},Ha=V({...Ba,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(g){const h=g,l=B("weight","regular"),k=B("size","1em"),n=B("color","currentColor"),o=B("mirrored",!1),i=E(()=>{var f;return(f=h.weight)!=null?f:l}),y=E(()=>{var f;return(f=h.size)!=null?f:k}),A=E(()=>{var f;return(f=h.color)!=null?f:n}),m=E(()=>h.mirrored!==void 0?h.mirrored?"scale(-1, 1)":void 0:o?"scale(-1, 1)":void 0);return(f,_)=>(p(),C("svg",Pe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:y.value,height:y.value,fill:A.value,transform:m.value},f.$attrs),[Ne(f.$slots,"default"),i.value==="bold"?(p(),C("g",ya,ba)):i.value==="duotone"?(p(),C("g",ka,xa)):i.value==="fill"?(p(),C("g",Aa,Fa)):i.value==="light"?(p(),C("g",Ta,Ia)):i.value==="regular"?(p(),C("g",Ua,Ea)):i.value==="thin"?(p(),C("g",Va,Da)):S("",!0)],16,ha))}}),$a=V({__name:"ThreadSelectorModal",props:{showThreadModal:{type:Boolean},stage:{},executionConfig:{}},emits:["fix-invalid-json","update:execution-config","update:show-thread-modal"],setup(g,{emit:h}){const l=()=>{h("update:show-thread-modal",!1),Q.writeTestData(k.threadData)};Ze(async()=>k.threadData=await Q.readTestData());const k=We({threadData:"{}"});return(n,o)=>(p(),b(e(oe),{open:n.showThreadModal,footer:null,onCancel:l},{default:t(()=>[a(ia,{stage:n.stage,"execution-config":n.executionConfig,"onUpdate:executionConfig":o[0]||(o[0]=i=>h("update:execution-config",i)),"onUpdate:showThreadModal":o[1]||(o[1]=i=>h("update:show-thread-modal",i)),onFixInvalidJson:o[2]||(o[2]=i=>h("fix-invalid-json",i,i))},null,8,["stage","execution-config"])]),_:1},8,["open"]))}});const Na=N($a,[["__scopeId","data-v-24845f55"]]),de=g=>(se("data-v-b2ed6a6d"),g=g(),ue(),g),Pa=de(()=>T("i",null,"string",-1)),Za=de(()=>T("i",null,"string list",-1)),Wa=V({__name:"FormNotificationSettings",props:{form:{}},setup(g){const l=w(g.form);return(k,n)=>(p(),C(ne,null,[a(e(re),{layout:"vertical"},{default:t(()=>[a(e(L),{level:4,width:"100%",height:"30px",style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0px"}},{default:t(()=>[v(" Thread waiting "),a(e(ie),{checked:l.value.notificationTrigger.enabled,"onUpdate:checked":n[0]||(n[0]=o=>l.value.notificationTrigger.enabled=o)},{default:t(()=>[v(" Enabled ")]),_:1},8,["checked"])]),_:1}),a(e(O),{class:"description",style:{fontStyle:"italic",marginBottom:"20px"}},{default:t(()=>[v(" Send emails when the thread is waiting for the form to be filled ")]),_:1}),a(e(x),{label:"Variable name"},{default:t(()=>[a(e(F),{value:l.value.notificationTrigger.variable_name,"onUpdate:value":n[1]||(n[1]=o=>l.value.notificationTrigger.variable_name=o),disabled:!l.value.notificationTrigger.enabled,type:"text",placeholder:"variable_name"},null,8,["value","disabled"])]),_:1})]),_:1}),a(e(da),{type:"info"},{message:t(()=>[a(e(O),null,{default:t(()=>[v(" Notifications are sent to the emails specified in the thread variables set here. The variables should contain a "),Pa,v(" or a "),Za,v(". ")]),_:1})]),_:1})],64))}});const za=N(Wa,[["__scopeId","data-v-b2ed6a6d"]]),Oa=V({__name:"FormSettings",props:{form:{}},setup(g){const l=w(g.form);return(k,n)=>(p(),b(e(re),{layout:"vertical",class:"form-settings"},{default:t(()=>[a(Te,{runtime:l.value},null,8,["runtime"]),a(e(x),{label:"Form name"},{default:t(()=>[a(e(F),{value:l.value.title,"onUpdate:value":n[0]||(n[0]=o=>l.value.title=o),type:"text",onChange:n[1]||(n[1]=o=>{var i;return l.value.title=(i=o.target.value)!=null?i:""})},null,8,["value"])]),_:1}),a(e(L),{level:3},{default:t(()=>[v(" Texts ")]),_:1}),a(e(L),{level:4},{default:t(()=>[v(" Welcome Screen ")]),_:1}),a(e(x),{label:"Title"},{default:t(()=>[a(e(F),{value:l.value.welcomeTitle,"onUpdate:value":n[2]||(n[2]=o=>l.value.welcomeTitle=o),type:"text",placeholder:l.value.title,disabled:l.value.autoStart},null,8,["value","placeholder","disabled"])]),_:1}),a(e(x),{label:"Description"},{default:t(()=>[a(e(F),{value:l.value.startMessage,"onUpdate:value":n[3]||(n[3]=o=>l.value.startMessage=o),type:"text",disabled:l.value.autoStart},null,8,["value","disabled"])]),_:1}),a(e(x),{label:"Start button label"},{default:t(()=>[a(e(F),{value:l.value.startButtonText,"onUpdate:value":n[4]||(n[4]=o=>l.value.startButtonText=o),type:"text",placeholder:"Start",disabled:l.value.autoStart},null,8,["value","disabled"])]),_:1}),a(e(x),null,{default:t(()=>[a(e(te),{checked:l.value.autoStart,"onUpdate:checked":n[5]||(n[5]=o=>l.value.autoStart=o)},{default:t(()=>[v("Skip welcome screen")]),_:1},8,["checked"])]),_:1}),a(e(L),{level:4},{default:t(()=>[v(" End Screen ")]),_:1}),a(e(x),{label:"End text"},{default:t(()=>[a(e(F),{value:l.value.endMessage,"onUpdate:value":n[6]||(n[6]=o=>l.value.endMessage=o),type:"text",placeholder:"Thank you"},null,8,["value"])]),_:1}),a(e(x),{label:"Restart button label"},{default:t(()=>[a(e(F),{value:l.value.restartButtonText,"onUpdate:value":n[7]||(n[7]=o=>l.value.restartButtonText=o),placeholder:"Restart",type:"text",disabled:!l.value.allowRestart},null,8,["value","disabled"])]),_:1}),a(e(x),{help:!l.value.isInitial&&"Only initial forms can be restarted"},{default:t(()=>[a(e(te),{checked:l.value.allowRestart,"onUpdate:checked":n[8]||(n[8]=o=>l.value.allowRestart=o),disabled:!l.value.isInitial},{default:t(()=>[v("Show restart button at the end")]),_:1},8,["checked","disabled"])]),_:1},8,["help"]),a(e(L),{level:4},{default:t(()=>[v(" Alert Messages ")]),_:1}),a(e(x),{label:"Error message"},{default:t(()=>[a(e(F),{value:l.value.errorMessage,"onUpdate:value":n[9]||(n[9]=o=>l.value.errorMessage=o),type:"text",placeholder:"Something went wrong"},null,8,["value"])]),_:1})]),_:1}))}});const ja=N(Oa,[["__scopeId","data-v-aff64cb2"]]),Qa=V({__name:"QueryParamsModal",props:{open:{type:Boolean},close:{type:Function},queryParams:{}},emits:["update:query-params"],setup(g,{emit:h}){const k=w(n(g.queryParams));function n(m){return Object.entries(m).map(([f,_])=>({key:f,value:_,id:Math.random().toString()}))}function o(){const m={};return k.value.forEach(({key:f,value:_})=>{m[f]=_}),m}const i=(m,f,_)=>{k.value[m]={key:f,value:_},h("update:query-params",o())},y=()=>{const m=k.value.length;k.value.push({key:`param-${m}`,value:"value"}),h("update:query-params",o())},A=m=>{k.value.splice(m,1),h("update:query-params",o())};return(m,f)=>(p(),b(e(oe),{open:m.open,onCancel:m.close},{footer:t(()=>[a(e(I),{type:"primary",onClick:m.close},{default:t(()=>[v("OK")]),_:1},8,["onClick"])]),default:t(()=>[a(e($),{vertical:"",gap:"20"},{default:t(()=>[a(e(O),null,{default:t(()=>[v("Query params")]),_:1}),(p(!0),C(ne,null,ze(k.value,(_,u)=>(p(),b(e(x),{key:u},{default:t(()=>[a(e(pa),null,{default:t(()=>[a(e(F),{value:_.key,"onUpdate:value":U=>_.key=U,type:"text",placeholder:"name",onChange:()=>i(u,_.key,_.value)},null,8,["value","onUpdate:value","onChange"]),a(e(F),{value:_.value,"onUpdate:value":U=>_.value=U,type:"text",placeholder:"value",disabled:_.key===e(j),onChange:()=>i(u,_.key,_.value)},null,8,["value","onUpdate:value","disabled","onChange"]),a(e(I),{danger:"",onClick:U=>A(u)},{default:t(()=>[v("remove")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),a(e(x),null,{default:t(()=>[a(e(I),{type:"dashed",style:{width:"100%"},onClick:y},{default:t(()=>[v(" Add Query Param ")]),_:1})]),_:1})]),_:1})]),_:1},8,["open","onCancel"]))}}),qa=g=>(se("data-v-75e86c4d"),g=g(),ue(),g),Ga={key:0},Ja={key:1},Ya=qa(()=>T("br",null,null,-1)),Ka={class:"form-preview-container"},Xa=V({__name:"FormEditor",setup(g){var K;const h=Oe(),l=je(),k=Ce(),n=w(null),o=w("source-code"),i=w(null),y=w(null),A=w(null),m=w({}),f=w(!1),_=s=>u.value={...u.value,attached:!!s},u=w({attached:!1,stageRunId:null,pendingFork:!1,isInitial:!1}),U=E(()=>{var s;return(s=c.value)!=null&&s.form.hasChanges()?{title:"Unsaved changes",message:"Save the form before running the workflow"}:u.value.attached&&u.value.pendingFork?{title:"Past thread selected",message:"Fork the selected thread to run the workflow"}:!u.value.isInitial&&u.value.attached&&!u.value.stageRunId?{title:"No thread selected",message:"Select a thread to run the workflow"}:null}),pe=(s,r)=>{var d;(d=n.value)==null||d.setHighlight(s,r)},ce=()=>{var s,r;(s=n.value)==null||s.restartEditor(),(r=n.value)==null||r.startPreviewMode()},me=E(()=>!u.value.isInitial&&u.value.attached&&!!(u.value.pendingFork||!u.value.stageRunId));Qe(()=>u.value.stageRunId?m.value={...m.value,[j]:u.value.stageRunId}:null);const{result:c,loading:ve,refetch:fe}=oa(async()=>{const[s,r]=await Promise.all([ua.get(l.params.id),Q.get()]);return u.value.isInitial=s.isInitial,Ye({form:s,workspace:r})});le([()=>u.value.attached,m,c],()=>{q()});function ge(){var r;if(!c.value)return;const s=c.value.form.codeContent;(r=n.value)==null||r.updateLocalEditorCode(s),q()}function q(){if(!c.value)return;const s=!u.value.attached;A.value=c.value.form.makeRunnerData(c.value.workspace),i.value=new Be({formRunnerData:A.value,logService:J,connectionManager:new He(c.value.form.id,"editor",m.value,s),onFormStart:ce,onFormEnd:he,onRedirect:ke,onStateUpdate:d=>y.value=d,onStackTraceUpdate:pe});const r=i.value.getState();y.value=r.formState}const he=()=>{var s,r,d;u.value={attached:!1,stageRunId:null,pendingFork:!1,isInitial:(r=(s=c.value)==null?void 0:s.form.isInitial)!=null?r:!1},(d=n.value)==null||d.restartEditor()};function ye(){var s,r;(s=P.value)==null||s.closeConsole(),(r=i.value)==null||r.start()}function G(){var s,r;(s=n.value)==null||s.restartEditor(),(r=i.value)==null||r.resetForm()}function _e(){h.push({name:"stages"})}const P=w(null),be=s=>{!c.value||(c.value.form.file=s)},J=Ee.create();function ke(s,r){$e("editor",h,s,r)}const we=()=>{var d;let s=`/${(d=c.value)==null?void 0:d.form.path}`;const r=new URLSearchParams(m.value);u.value.attached&&u.value.stageRunId&&r.set(j,u.value.stageRunId),window.open(`${s}?${r.toString()}`,"_blank")},Z=w(!1),Se=E(()=>{if(!A.value)return"";const s=Object.entries(m.value),r="?"+s.map(([M,R])=>`${M}=${R}`).join("&"),d=s.length?r:"";return`/${A.value.path}${d}`}),Y=new qe(Ge.boolean(),"dontShowReloadHelper"),W=w((K=Y.get())!=null?K:!1),xe=()=>{Y.set(!0),W.value=!0};return le(()=>l.params.id,()=>{fe()}),(s,r)=>(p(),b(Fe,null,Je({navbar:t(()=>[e(c)?(p(),b(e(ma),{key:0,title:e(c).form.title,style:{padding:"5px 25px",border:"1px solid #f6f6f6"},onBack:_e},{extra:t(()=>[a(ca,{"docs-path":"concepts/forms","editing-model":e(c).form},null,8,["editing-model"])]),_:1},8,["title"])):S("",!0)]),content:t(()=>[e(c)?(p(),b(Ie,{key:0},{left:t(()=>[a(e(va),{"active-key":o.value,"onUpdate:activeKey":r[0]||(r[0]=d=>o.value=d)},{rightExtra:t(()=>[a(Ve,{model:e(c).form,onSave:ge},null,8,["model"])]),default:t(()=>[a(e(z),{key:"source-code",tab:"Source code"}),a(e(z),{key:"settings",tab:"Settings"}),a(e(z),{key:"notifications",tab:"Notifications"})]),_:1},8,["active-key"]),o.value==="source-code"?(p(),b(Ue,{key:0,ref_key:"code",ref:n,script:e(c).form,workspace:e(c).workspace,onUpdateFile:be},null,8,["script","workspace"])):S("",!0),o.value==="settings"?(p(),b(ja,{key:1,form:e(c).form},null,8,["form"])):S("",!0),o.value==="notifications"?(p(),b(za,{key:2,form:e(c).form},null,8,["form"])):S("",!0),f.value?(p(),b(Na,{key:3,"execution-config":u.value,"onUpdate:executionConfig":r[1]||(r[1]=d=>u.value=d),"show-thread-modal":f.value,"onUpdate:showThreadModal":r[2]||(r[2]=d=>f.value=d),stage:e(c).form,onFixInvalidJson:r[3]||(r[3]=(d,M)=>{var R;return(R=P.value)==null?void 0:R.fixJson(d,M)})},null,8,["execution-config","show-thread-modal","stage"])):S("",!0)]),right:t(()=>[a(e($),{gap:"10",align:"center",justify:"right",style:{"margin-top":"6px"}},{default:t(()=>{var d;return[a(e(Ke),null,{default:t(()=>[v(Xe(u.value.attached?"Workflow ON":"Workflow OFF"),1)]),_:1}),a(e(ie),{disabled:!!y.value&&e(D).includes((d=y.value)==null?void 0:d.type),checked:u.value.attached,"onUpdate:checked":_},null,8,["disabled","checked"]),a(e(fa),{dot:me.value},{default:t(()=>{var M;return[a(e(I),{disabled:!!y.value&&e(D).includes((M=y.value)==null?void 0:M.type),style:{display:"flex",gap:"5px"},onClick:r[4]||(r[4]=R=>f.value=!0)},{icon:t(()=>[a(e(na),{size:"20"})]),default:t(()=>[v("Thread")]),_:1},8,["disabled"])]}),_:1},8,["dot"])]}),_:1}),a(e(ga),{style:{margin:"7px 0px 16px"}}),e(ve)||!A.value||!y.value?(p(),b(e(ea),{key:0})):S("",!0),y.value&&A.value?(p(),b(e($),{key:1,vertical:"",gap:"10",style:{height:"100%",overflow:"hidden"}},{default:t(()=>{var d,M,R,X,ee;return[a(e($),{gap:"small"},{default:t(()=>[y.value.type&&e(Le).includes(y.value.type)?(p(),b(e(aa),{key:0,placement:"bottom",open:W.value?void 0:!0},{content:t(()=>[W.value?(p(),C("span",Ga,"Reload form")):(p(),C("span",Ja,[v(" You can reload the form here"),Ya,a(e(ta),{onClick:xe},{default:t(()=>[v("Don't show this again")]),_:1})]))]),default:t(()=>[a(e(I),{disabled:!!U.value,onClick:G},{default:t(()=>[a(e(Ha),{size:"20"})]),_:1},8,["disabled"])]),_:1},8,["open"])):S("",!0),e(D).includes(y.value.type)?(p(),b(e(H),{key:1,placement:"bottom"},{title:t(()=>[v("Stop form")]),default:t(()=>[a(e(I),{onClick:G},{default:t(()=>[a(e(Re),{size:"20"})]),_:1})]),_:1})):S("",!0),y.value.type==="waiting"?(p(),b(e(H),{key:2,placement:"bottom"},{title:t(()=>[v("Start form")]),default:t(()=>[a(e(I),{disabled:!!U.value,onClick:ye},{default:t(()=>[a(e(la),{size:"20"})]),_:1},8,["disabled"])]),_:1})):S("",!0),a(e(F),{disabled:"",value:Se.value},null,8,["value"]),a(e(H),{placement:"bottom"},{title:t(()=>[v("Edit query params")]),default:t(()=>{var ae;return[a(e(I),{disabled:!!y.value&&e(D).includes((ae=y.value)==null?void 0:ae.type),onClick:r[5]||(r[5]=et=>Z.value=!0)},{default:t(()=>[a(e(sa),{size:"20"})]),_:1},8,["disabled"])]}),_:1}),a(e(H),{placement:"bottom"},{title:t(()=>[v("Open in Full Screen")]),default:t(()=>[a(e(I),{target:"_blank","aria-label":"Open in Full Screen","aria-describedby":"sss",disabled:!u.value.attached,onClick:we},{default:t(()=>[a(e(ra),{size:"20"})]),_:1},8,["disabled"])]),_:1})]),_:1}),T("div",Ka,[a(Ae,{"current-path":e(c).form.path,"hide-login":!0},null,8,["current-path"]),a(De,{"is-preview":"",class:"runner","form-runner-data":A.value,disabled:U.value,"form-state":y.value,"user-email":(d=e(k).user)==null?void 0:d.claims.email,onUpdateWidgetErrors:(M=i.value)==null?void 0:M.updateWidgetFrontendErrors,onUpdateWidgetValue:(R=i.value)==null?void 0:R.updateWidgetValue,onActionClicked:(X=i.value)==null?void 0:X.handleActionClick,onAutoFillClicked:(ee=i.value)==null?void 0:ee.handleAutofillClick},null,8,["form-runner-data","disabled","form-state","user-email","onUpdateWidgetErrors","onUpdateWidgetValue","onActionClicked","onAutoFillClicked"])])]}),_:1})):S("",!0),a(Qa,{"query-params":m.value,"onUpdate:queryParams":r[6]||(r[6]=d=>m.value=d),open:Z.value,close:()=>Z.value=!1},null,8,["query-params","open","close"])]),_:1})):S("",!0)]),_:2},[e(c)?{name:"footer",fn:t(()=>[a(Me,{ref_key:"smartConsole",ref:P,"stage-type":"forms",stage:e(c).form,"log-service":e(J),workspace:e(c).workspace},null,8,["stage","log-service","workspace"])]),key:"0"}:void 0]),1024))}});const dl=N(Xa,[["__scopeId","data-v-75e86c4d"]]);export{dl as default};
//# sourceMappingURL=FormEditor.39f9b2d4.js.map
