import{t as D}from"./ant-design.a23d89b2.js";import{f as c,eG as i,f0 as I,d as M,b as l,c as g,w as d,eU as N,aq as V,eD as o,u as p,br as E,ev as s,cK as T,ez as B,v as x}from"./outputWidgets.5d603989.js";import{S as L,A as k}from"./index.4ad0eacc.js";import{C as P}from"./gateway.4795e7dc.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[e]="b086ffce-8d3f-4582-9377-d6aa72ac49a6",r._sentryDebugIdIdentifier="sentry-dbid-b086ffce-8d3f-4582-9377-d6aa72ac49a6")}catch{}})();var H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 244c176.18 0 319 142.82 319 319v233a32 32 0 01-32 32H225a32 32 0 01-32-32V563c0-176.18 142.82-319 319-319zM484 68h56a8 8 0 018 8v96a8 8 0 01-8 8h-56a8 8 0 01-8-8V76a8 8 0 018-8zM177.25 191.66a8 8 0 0111.32 0l67.88 67.88a8 8 0 010 11.31l-39.6 39.6a8 8 0 01-11.31 0l-67.88-67.88a8 8 0 010-11.31l39.6-39.6zm669.6 0l39.6 39.6a8 8 0 010 11.3l-67.88 67.9a8 8 0 01-11.32 0l-39.6-39.6a8 8 0 010-11.32l67.89-67.88a8 8 0 0111.31 0zM192 892h640a32 32 0 0132 32v24a8 8 0 01-8 8H168a8 8 0 01-8-8v-24a32 32 0 0132-32zm148-317v253h64V575h-64z"}}]},name:"alert",theme:"filled"};const G=H;var q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM513.1 518.1l-192 161c-5.2 4.4-13.1.7-13.1-6.1v-62.7c0-2.3 1.1-4.6 2.9-6.1L420.7 512l-109.8-92.2a7.63 7.63 0 01-2.9-6.1V351c0-6.8 7.9-10.5 13.1-6.1l192 160.9c3.9 3.2 3.9 9.1 0 12.3zM716 673c0 4.4-3.4 8-7.5 8h-185c-4.1 0-7.5-3.6-7.5-8v-48c0-4.4 3.4-8 7.5-8h185c4.1 0 7.5 3.6 7.5 8v48z"}}]},name:"code",theme:"filled"};const J=q;var U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M573 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40zm-280 0c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"}},{tag:"path",attrs:{d:"M894 345a343.92 343.92 0 00-189-130v.1c-17.1-19-36.4-36.5-58-52.1-163.7-119-393.5-82.7-513 81-96.3 133-92.2 311.9 6 439l.8 132.6c0 3.2.5 6.4 1.5 9.4a31.95 31.95 0 0040.1 20.9L309 806c33.5 11.9 68.1 18.7 102.5 20.6l-.5.4c89.1 64.9 205.9 84.4 313 49l127.1 41.4c3.2 1 6.5 1.6 9.9 1.6 17.7 0 32-14.3 32-32V753c88.1-119.6 90.4-284.9 1-408zM323 735l-12-5-99 31-1-104-8-9c-84.6-103.2-90.2-251.9-11-361 96.4-132.2 281.2-161.4 413-66 132.2 96.1 161.5 280.6 66 412-80.1 109.9-223.5 150.5-348 102zm505-17l-8 10 1 104-98-33-12 5c-56 20.8-115.7 22.5-171 7l-.2-.1A367.31 367.31 0 00729 676c76.4-105.3 88.8-237.6 44.4-350.4l.6.4c23 16.5 44.1 37.1 62 62 72.6 99.6 68.5 235.2-8 330z"}},{tag:"path",attrs:{d:"M433 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"}}]},name:"comment",theme:"outlined"};const Q=U;var R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M705.6 124.9a8 8 0 00-11.6 7.2v64.2c0 5.5 2.9 10.6 7.5 13.6a352.2 352.2 0 0162.2 49.8c32.7 32.8 58.4 70.9 76.3 113.3a355 355 0 0127.9 138.7c0 48.1-9.4 94.8-27.9 138.7a355.92 355.92 0 01-76.3 113.3 353.06 353.06 0 01-113.2 76.4c-43.8 18.6-90.5 28-138.5 28s-94.7-9.4-138.5-28a353.06 353.06 0 01-113.2-76.4A355.92 355.92 0 01184 650.4a355 355 0 01-27.9-138.7c0-48.1 9.4-94.8 27.9-138.7 17.9-42.4 43.6-80.5 76.3-113.3 19-19 39.8-35.6 62.2-49.8 4.7-2.9 7.5-8.1 7.5-13.6V132c0-6-6.3-9.8-11.6-7.2C178.5 195.2 82 339.3 80 506.3 77.2 745.1 272.5 943.5 511.2 944c239 .5 432.8-193.3 432.8-432.4 0-169.2-97-315.7-238.4-386.7zM480 560h64c4.4 0 8-3.6 8-8V88c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v464c0 4.4 3.6 8 8 8z"}}]},name:"poweroff",theme:"outlined"};const W=R;function C(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),n.forEach(function(a){X(r,a,t[a])})}return r}function X(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var v=function(e,t){var n=C({},e,t.attrs);return c(i,C({},n,{icon:G}),null)};v.displayName="AlertFilled";v.inheritAttrs=!1;const Y=v;function S(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),n.forEach(function(a){Z(r,a,t[a])})}return r}function Z(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var b=function(e,t){var n=S({},e,t.attrs);return c(i,S({},n,{icon:I}),null)};b.displayName="CheckCircleFilled";b.inheritAttrs=!1;const K=b;function _(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),n.forEach(function(a){ee(r,a,t[a])})}return r}function ee(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var h=function(e,t){var n=_({},e,t.attrs);return c(i,_({},n,{icon:J}),null)};h.displayName="CodeFilled";h.inheritAttrs=!1;const te=h;function j(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),n.forEach(function(a){re(r,a,t[a])})}return r}function re(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var O=function(e,t){var n=j({},e,t.attrs);return c(i,j({},n,{icon:Q}),null)};O.displayName="CommentOutlined";O.inheritAttrs=!1;const ne=O;function A(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),n.forEach(function(a){ae(r,a,t[a])})}return r}function ae(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var y=function(e,t){var n=A({},e,t.attrs);return c(i,A({},n,{icon:W}),null)};y.displayName="PoweroffOutlined";y.inheritAttrs=!1;const le=y;function F(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),n.forEach(function(a){oe(r,a,t[a])})}return r}function oe(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var w=function(e,t){var n=F({},e,t.attrs);return c(i,F({},n,{icon:L}),null)};w.displayName="StarFilled";w.inheritAttrs=!1;const ce=w,ie={key:0},se={key:1},ue=["textContent"],fe=["textContent"],de=["textContent"],pe=M({__name:"Log",props:{log:{}},setup(r){const e=r;function t(){switch(e.log.event){case"stdout":case"stderr":return te;case"success":return K;case"start":case"started":return ce;case"form-response":return ne;case"program:end":case"failed":case"connection-closed":case"error":return le;default:return Y}}return(n,a)=>(l(),g(p(k),{class:B(["log",n.log.event])},{dot:d(()=>[c(p(E),null,{default:d(()=>[(l(),g(N(t())))]),title:d(()=>[V("["+o(n.log.event)+"] "+o(n.log.createdAt),1)]),_:1})]),default:d(()=>{var u,f;return[n.log.event==="start"||n.log.event==="started"?(l(),s("span",ie,"Started "+o(n.log.execId),1)):n.log.event==="success"?(l(),s("span",se,"Finished "+o(n.log.execId),1)):n.log.event==="stdout"?(l(),s("pre",{key:2,class:"stdio-log",textContent:o(n.log.payload.log)},null,8,ue)):n.log.event==="stderr"?(l(),s("pre",{key:3,class:"stdio-log",textContent:o(n.log.payload.log)},null,8,fe)):n.log.event==="widgets-computed"&&((f=(u=n.log.payload.errors)==null?void 0:u.general)==null?void 0:f.repr)?(l(),s("pre",{key:4,textContent:o(n.log.payload.errors.general.repr)},null,8,de)):(l(),g(p(T),{key:5,"tree-data":p(D)(n.log.payload)},null,8,["tree-data"]))]}),_:1},8,["class"]))}});const Oe=x(pe,[["__scopeId","data-v-932d695e"]]);class ge{list({projectId:e,buildId:t,...n}){return P.post(`projects/${e}/builds/${t}/logs`,n)}filters(e){return P.get(`projects/${e}/log-filters`)}}const $=new ge;class m{constructor(e,t,n,a,u,f,z){this.executionId=e,this.runtimeType=t,this.runtimeName=n,this.payload=a,this.event=u,this.buildId=f,this.createdAt=z}static fromDTO(e){return new m(e.executionId,e.runtimeType,e.runtimeName,e.payload,e.event,e.buildId,new Date(e.createdAt))}static async list(e){const t=await $.list(e);return{total:t.total,logs:t.logs.map(m.fromDTO)}}static async filters(e){return $.filters(e)}get displayPayload(){return this.event==="start"?"Start":this.event==="end"?"End":this.event==="stdout"?this.payload.log:this.event==="stderr"?this.payload.log:JSON.stringify(this.payload)}get execId(){return this.executionId.slice(0,8)}}export{K as C,Oe as L,m as a};
//# sourceMappingURL=log.d86bc301.js.map
