import{P as Se}from"./PlayerNavbar.02dea6c3.js";import{b as Ae,u as Ce}from"./workspaceStore.104b1723.js";import{B as Me}from"./BaseLayout.b9b50e9f.js";import{R as He,S as Ze,E as $e,a as Fe,I as xe,L as Te}from"./SourceCode.5d3e7b93.js";import{S as Le}from"./SaveButton.8c522b04.js";import{F as W,a as Ee,b as Ue,c as Ve,d as Re,r as Be}from"./FormRunner.aa039e49.js";import{d as L,D as x,f as $,o as s,Y as y,$ as oe,S,e8 as re,a as b,e as A,b as a,w as t,u as e,df as V,aG as c,cZ as Ne,db as R,cB as M,bL as Z,cA as ne,aS as se,em as ue,en as ie,a0 as O,c as k,bO as ee,bT as F,eb as Ie,dj as D,cN as Pe,eo as ze,ea as We,g as ae,N as De,O as Oe,eg as je,z as Qe,by as qe,cQ as Ge,dc as Ke,aW as N,eM as Ye,e9 as te}from"./index.e1ec3e10.js";import{a as Je}from"./asyncComputed.63476e9c.js";import{W as Xe}from"./PlayerConfigProvider.59f98cb8.js";import{F as ea}from"./PhArrowSquareOut.vue.a4f55619.js";import{F as aa}from"./scripts.3bfd9ffe.js";import"./linters.9304e625.js";import{W as ta}from"./workspaces.90758c14.js";import{A as la}from"./index.af5f8dc4.js";import{A as oa}from"./index.73a3b654.js";import{N as ra}from"./NavbarControls.a60aeb1c.js";import{T as na}from"./TasksManager.1e5e0f1c.js";import{A as U,T as le}from"./TabPane.1fa49f01.js";import{C as sa}from"./Card.a84009b0.js";import{b as ua}from"./index.4aa0caca.js";import"./metadata.19ba303f.js";import"./PhWebhooksLogo.vue.c94412aa.js";import"./LoadingOutlined.952c460f.js";import"./PhSignOut.vue.988a35f9.js";import"./index.3550deea.js";import"./Avatar.c727ae9f.js";import"./url.ab92de50.js";import"./colorHelpers.d32fa46a.js";import"./uuid.9d5e9784.js";import"./validations.d45f66fd.js";import"./string.569a6924.js";import"./editor.1e355c7c.js";import"./ai.22768a7a.js";import"./PhCheckCircle.vue.cc5160bd.js";import"./PhCopySimple.vue.3de9c90b.js";import"./PhCaretRight.vue.f30f1a40.js";import"./Badge.d52f888f.js";import"./polling.bef217f7.js";import"./PhFolder.vue.b23a430f.js";import"./PhPencil.vue.a530f1af.js";import"./toggleHighContrast.b3b309ce.js";import"./UnsavedChangesHandler.d706b866.js";import"./ExclamationCircleOutlined.76217707.js";import"./Login.vue_vue_type_script_setup_true_lang.e7535a2e.js";import"./Logo.4a55224f.js";import"./CircularLoading.2438bd90.js";import"./index.4c8e8024.js";import"./Steps.d05ef1ea.js";import"./index.b968513b.js";import"./Watermark.0d83e39b.js";import"./record.e1888f50.js";import"./CloseCircleOutlined.c4ffadcd.js";import"./popupNotifcation.29a171ed.js";import"./DocsButton.vue_vue_type_script_setup_true_lang.74d2d7e6.js";import"./BookOutlined.24fb62d6.js";import"./PhChats.vue.43012746.js";import"./tasksController.603d6c5b.js";import"./gateway.ab874197.js";import"./ant-design.ac028450.js";import"./AbstraButton.vue_vue_type_script_setup_true_lang.77653d40.js";import"./index.be2d66b3.js";import"./CollapsePanel.272fd103.js";import"./index.7d5cc953.js";(function(){try{var v=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},f=new Error().stack;f&&(v._sentryDebugIds=v._sentryDebugIds||{},v._sentryDebugIds[f]="62e9335c-6ce6-4343-b1cd-36fa125478ee",v._sentryDebugIdIdentifier="sentry-dbid-62e9335c-6ce6-4343-b1cd-36fa125478ee")}catch{}})();const ia=["width","height","fill","transform"],da={key:0},pa=b("path",{d:"M228,48V96a12,12,0,0,1-12,12H168a12,12,0,0,1,0-24h19l-7.8-7.8a75.55,75.55,0,0,0-53.32-22.26h-.43A75.49,75.49,0,0,0,72.39,75.57,12,12,0,1,1,55.61,58.41a99.38,99.38,0,0,1,69.87-28.47H126A99.42,99.42,0,0,1,196.2,59.23L204,67V48a12,12,0,0,1,24,0ZM183.61,180.43a75.49,75.49,0,0,1-53.09,21.63h-.43A75.55,75.55,0,0,1,76.77,179.8L69,172H88a12,12,0,0,0,0-24H40a12,12,0,0,0-12,12v48a12,12,0,0,0,24,0V189l7.8,7.8A99.42,99.42,0,0,0,130,226.06h.56a99.38,99.38,0,0,0,69.87-28.47,12,12,0,0,0-16.78-17.16Z"},null,-1),ma=[pa],ca={key:1},va=b("path",{d:"M216,128a88,88,0,1,1-88-88A88,88,0,0,1,216,128Z",opacity:"0.2"},null,-1),fa=b("path",{d:"M224,48V96a8,8,0,0,1-8,8H168a8,8,0,0,1,0-16h28.69L182.06,73.37a79.56,79.56,0,0,0-56.13-23.43h-.45A79.52,79.52,0,0,0,69.59,72.71,8,8,0,0,1,58.41,61.27a96,96,0,0,1,135,.79L208,76.69V48a8,8,0,0,1,16,0ZM186.41,183.29a80,80,0,0,1-112.47-.66L59.31,168H88a8,8,0,0,0,0-16H40a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V179.31l14.63,14.63A95.43,95.43,0,0,0,130,222.06h.53a95.36,95.36,0,0,0,67.07-27.33,8,8,0,0,0-11.18-11.44Z"},null,-1),ga=[va,fa],ha={key:2},ya=b("path",{d:"M224,48V96a8,8,0,0,1-8,8H168a8,8,0,0,1-5.66-13.66L180.65,72a79.48,79.48,0,0,0-54.72-22.09h-.45A79.52,79.52,0,0,0,69.59,72.71,8,8,0,0,1,58.41,61.27,96,96,0,0,1,192,60.7l18.36-18.36A8,8,0,0,1,224,48ZM186.41,183.29A80,80,0,0,1,75.35,184l18.31-18.31A8,8,0,0,0,88,152H40a8,8,0,0,0-8,8v48a8,8,0,0,0,13.66,5.66L64,195.3a95.42,95.42,0,0,0,66,26.76h.53a95.36,95.36,0,0,0,67.07-27.33,8,8,0,0,0-11.18-11.44Z"},null,-1),ba=[ya],ka={key:3},_a=b("path",{d:"M222,48V96a6,6,0,0,1-6,6H168a6,6,0,0,1,0-12h33.52L183.47,72a81.51,81.51,0,0,0-57.53-24h-.46A81.5,81.5,0,0,0,68.19,71.28a6,6,0,1,1-8.38-8.58,93.38,93.38,0,0,1,65.67-26.76H126a93.45,93.45,0,0,1,66,27.53l18,18V48a6,6,0,0,1,12,0ZM187.81,184.72a81.5,81.5,0,0,1-57.29,23.34h-.46a81.51,81.51,0,0,1-57.53-24L54.48,166H88a6,6,0,0,0,0-12H40a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V174.48l18,18.05a93.45,93.45,0,0,0,66,27.53h.52a93.38,93.38,0,0,0,65.67-26.76,6,6,0,1,0-8.38-8.58Z"},null,-1),wa=[_a],Sa={key:4},Aa=b("path",{d:"M224,48V96a8,8,0,0,1-8,8H168a8,8,0,0,1,0-16h28.69L182.06,73.37a79.56,79.56,0,0,0-56.13-23.43h-.45A79.52,79.52,0,0,0,69.59,72.71,8,8,0,0,1,58.41,61.27a96,96,0,0,1,135,.79L208,76.69V48a8,8,0,0,1,16,0ZM186.41,183.29a80,80,0,0,1-112.47-.66L59.31,168H88a8,8,0,0,0,0-16H40a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V179.31l14.63,14.63A95.43,95.43,0,0,0,130,222.06h.53a95.36,95.36,0,0,0,67.07-27.33,8,8,0,0,0-11.18-11.44Z"},null,-1),Ca=[Aa],Ma={key:5},Ha=b("path",{d:"M220,48V96a4,4,0,0,1-4,4H168a4,4,0,0,1,0-8h38.34L184.89,70.54A84,84,0,0,0,66.8,69.85a4,4,0,1,1-5.6-5.72,92,92,0,0,1,129.34.76L212,86.34V48a4,4,0,0,1,8,0ZM189.2,186.15a83.44,83.44,0,0,1-58.68,23.91h-.47a83.52,83.52,0,0,1-58.94-24.6L49.66,164H88a4,4,0,0,0,0-8H40a4,4,0,0,0-4,4v48a4,4,0,0,0,8,0V169.66l21.46,21.45A91.43,91.43,0,0,0,130,218.06h.51a91.45,91.45,0,0,0,64.28-26.19,4,4,0,1,0-5.6-5.72Z"},null,-1),Za=[Ha],$a={name:"PhArrowsClockwise"},Fa=L({...$a,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(v){const f=v,l=x("weight","regular"),w=x("size","1em"),u=x("color","currentColor"),r=x("mirrored",!1),p=$(()=>{var o;return(o=f.weight)!=null?o:l}),C=$(()=>{var o;return(o=f.size)!=null?o:w}),_=$(()=>{var o;return(o=f.color)!=null?o:u}),d=$(()=>f.mirrored!==void 0?f.mirrored?"scale(-1, 1)":void 0:r?"scale(-1, 1)":void 0);return(o,g)=>(s(),y("svg",re({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:C.value,height:C.value,fill:_.value,transform:d.value},o.$attrs),[oe(o.$slots,"default"),p.value==="bold"?(s(),y("g",da,ma)):p.value==="duotone"?(s(),y("g",ca,ga)):p.value==="fill"?(s(),y("g",ha,ba)):p.value==="light"?(s(),y("g",ka,wa)):p.value==="regular"?(s(),y("g",Sa,Ca)):p.value==="thin"?(s(),y("g",Ma,Za)):S("",!0)],16,ia))}}),xa=["width","height","fill","transform"],Ta={key:0},La=b("path",{d:"M28,64A12,12,0,0,1,40,52H216a12,12,0,0,1,0,24H40A12,12,0,0,1,28,64Zm12,76h64a12,12,0,0,0,0-24H40a12,12,0,0,0,0,24Zm80,40H40a12,12,0,0,0,0,24h80a12,12,0,0,0,0-24Zm120.49,20.49a12,12,0,0,1-17,0l-18.08-18.08a44,44,0,1,1,17-17l18.08,18.07A12,12,0,0,1,240.49,200.49ZM184,164a20,20,0,1,0-20-20A20,20,0,0,0,184,164Z"},null,-1),Ea=[La],Ua={key:1},Va=b("path",{d:"M216,144a32,32,0,1,1-32-32A32,32,0,0,1,216,144Z",opacity:"0.2"},null,-1),Ra=b("path",{d:"M32,64a8,8,0,0,1,8-8H216a8,8,0,0,1,0,16H40A8,8,0,0,1,32,64Zm8,72h72a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16Zm88,48H40a8,8,0,0,0,0,16h88a8,8,0,0,0,0-16Zm109.66,13.66a8,8,0,0,1-11.32,0L206,177.36A40,40,0,1,1,217.36,166l20.3,20.3A8,8,0,0,1,237.66,197.66ZM184,168a24,24,0,1,0-24-24A24,24,0,0,0,184,168Z"},null,-1),Ba=[Va,Ra],Na={key:2},Ia=b("path",{d:"M32,64a8,8,0,0,1,8-8H216a8,8,0,0,1,0,16H40A8,8,0,0,1,32,64Zm8,72h72a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16Zm88,48H40a8,8,0,0,0,0,16h88a8,8,0,0,0,0-16Zm109.66,2.34L217.36,166A40,40,0,1,0,206,177.36l20.3,20.3a8,8,0,0,0,11.32-11.32Z"},null,-1),Pa=[Ia],za={key:3},Wa=b("path",{d:"M34,64a6,6,0,0,1,6-6H216a6,6,0,0,1,0,12H40A6,6,0,0,1,34,64Zm6,70h72a6,6,0,0,0,0-12H40a6,6,0,0,0,0,12Zm88,52H40a6,6,0,0,0,0,12h88a6,6,0,0,0,0-12Zm108.24,10.24a6,6,0,0,1-8.48,0l-21.49-21.48a38.06,38.06,0,1,1,8.49-8.49l21.48,21.49A6,6,0,0,1,236.24,196.24ZM184,170a26,26,0,1,0-26-26A26,26,0,0,0,184,170Z"},null,-1),Da=[Wa],Oa={key:4},ja=b("path",{d:"M32,64a8,8,0,0,1,8-8H216a8,8,0,0,1,0,16H40A8,8,0,0,1,32,64Zm8,72h72a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16Zm88,48H40a8,8,0,0,0,0,16h88a8,8,0,0,0,0-16Zm109.66,13.66a8,8,0,0,1-11.32,0L206,177.36A40,40,0,1,1,217.36,166l20.3,20.3A8,8,0,0,1,237.66,197.66ZM184,168a24,24,0,1,0-24-24A24,24,0,0,0,184,168Z"},null,-1),Qa=[ja],qa={key:5},Ga=b("path",{d:"M36,64a4,4,0,0,1,4-4H216a4,4,0,0,1,0,8H40A4,4,0,0,1,36,64Zm4,68h72a4,4,0,0,0,0-8H40a4,4,0,0,0,0,8Zm88,56H40a4,4,0,0,0,0,8h88a4,4,0,0,0,0-8Zm106.83,6.83a4,4,0,0,1-5.66,0l-22.72-22.72a36.06,36.06,0,1,1,5.66-5.66l22.72,22.72A4,4,0,0,1,234.83,194.83ZM184,172a28,28,0,1,0-28-28A28,28,0,0,0,184,172Z"},null,-1),Ka=[Ga],Ya={name:"PhListMagnifyingGlass"},Ja=L({...Ya,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(v){const f=v,l=x("weight","regular"),w=x("size","1em"),u=x("color","currentColor"),r=x("mirrored",!1),p=$(()=>{var o;return(o=f.weight)!=null?o:l}),C=$(()=>{var o;return(o=f.size)!=null?o:w}),_=$(()=>{var o;return(o=f.color)!=null?o:u}),d=$(()=>f.mirrored!==void 0?f.mirrored?"scale(-1, 1)":void 0:r?"scale(-1, 1)":void 0);return(o,g)=>(s(),y("svg",re({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:C.value,height:C.value,fill:_.value,transform:d.value},o.$attrs),[oe(o.$slots,"default"),p.value==="bold"?(s(),y("g",Ta,Ea)):p.value==="duotone"?(s(),y("g",Ua,Ba)):p.value==="fill"?(s(),y("g",Na,Pa)):p.value==="light"?(s(),y("g",za,Da)):p.value==="regular"?(s(),y("g",Oa,Qa)):p.value==="thin"?(s(),y("g",qa,Ka)):S("",!0)],16,xa))}}),de=v=>(ue("data-v-b2ed6a6d"),v=v(),ie(),v),Xa=de(()=>b("i",null,"string",-1)),et=de(()=>b("i",null,"string list",-1)),at=L({__name:"FormNotificationSettings",props:{form:{}},setup(v){const l=A(v.form);return(w,u)=>(s(),y(se,null,[a(e(ne),{layout:"vertical"},{default:t(()=>[a(e(V),{level:4,width:"100%",height:"30px",style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0px"}},{default:t(()=>[c(" Thread waiting "),a(e(Ne),{checked:l.value.notificationTrigger.enabled,"onUpdate:checked":u[0]||(u[0]=r=>l.value.notificationTrigger.enabled=r)},{default:t(()=>[c(" Enabled ")]),_:1},8,["checked"])]),_:1}),a(e(R),{class:"description",style:{fontStyle:"italic",marginBottom:"20px"}},{default:t(()=>[c(" Send emails when the thread is waiting for the form to be filled ")]),_:1}),a(e(M),{label:"Variable name"},{default:t(()=>[a(e(Z),{value:l.value.notificationTrigger.variable_name,"onUpdate:value":u[1]||(u[1]=r=>l.value.notificationTrigger.variable_name=r),disabled:!l.value.notificationTrigger.enabled,type:"text",placeholder:"variable_name"},null,8,["value","disabled"])]),_:1})]),_:1}),a(e(la),{type:"info"},{message:t(()=>[a(e(R),null,{default:t(()=>[c(" Notifications are sent to the emails specified in the thread variables set here. The variables should contain a "),Xa,c(" or a "),et,c(". ")]),_:1})]),_:1})],64))}});const tt=O(at,[["__scopeId","data-v-b2ed6a6d"]]),lt=L({__name:"FormSettings",props:{form:{}},setup(v){const l=A(v.form);return(w,u)=>(s(),k(e(ne),{layout:"vertical",class:"form-settings"},{default:t(()=>[a(He,{runtime:l.value},null,8,["runtime"]),a(e(M),{label:"Form name"},{default:t(()=>[a(e(Z),{value:l.value.title,"onUpdate:value":u[0]||(u[0]=r=>l.value.title=r),type:"text",onChange:u[1]||(u[1]=r=>{var p;return l.value.title=(p=r.target.value)!=null?p:""})},null,8,["value"])]),_:1}),a(e(V),{level:3},{default:t(()=>[c(" Texts ")]),_:1}),a(e(V),{level:4},{default:t(()=>[c(" Welcome Screen ")]),_:1}),a(e(M),{label:"Title"},{default:t(()=>[a(e(Z),{value:l.value.welcomeTitle,"onUpdate:value":u[2]||(u[2]=r=>l.value.welcomeTitle=r),type:"text",placeholder:l.value.title,disabled:l.value.autoStart},null,8,["value","placeholder","disabled"])]),_:1}),a(e(M),{label:"Description"},{default:t(()=>[a(e(Z),{value:l.value.startMessage,"onUpdate:value":u[3]||(u[3]=r=>l.value.startMessage=r),type:"text",disabled:l.value.autoStart},null,8,["value","disabled"])]),_:1}),a(e(M),{label:"Start button label"},{default:t(()=>[a(e(Z),{value:l.value.startButtonText,"onUpdate:value":u[4]||(u[4]=r=>l.value.startButtonText=r),type:"text",placeholder:"Start",disabled:l.value.autoStart},null,8,["value","disabled"])]),_:1}),a(e(M),null,{default:t(()=>[a(e(ee),{checked:l.value.autoStart,"onUpdate:checked":u[5]||(u[5]=r=>l.value.autoStart=r)},{default:t(()=>[c("Skip welcome screen")]),_:1},8,["checked"])]),_:1}),a(e(V),{level:4},{default:t(()=>[c(" End Screen ")]),_:1}),a(e(M),{label:"End text"},{default:t(()=>[a(e(Z),{value:l.value.endMessage,"onUpdate:value":u[6]||(u[6]=r=>l.value.endMessage=r),type:"text",placeholder:"Thank you"},null,8,["value"])]),_:1}),a(e(M),{label:"Restart button label"},{default:t(()=>[a(e(Z),{value:l.value.restartButtonText,"onUpdate:value":u[7]||(u[7]=r=>l.value.restartButtonText=r),placeholder:"Restart",type:"text",disabled:!l.value.allowRestart},null,8,["value","disabled"])]),_:1}),a(e(M),{help:!l.value.isInitial&&"Only initial forms can be restarted"},{default:t(()=>[a(e(ee),{checked:l.value.allowRestart,"onUpdate:checked":u[8]||(u[8]=r=>l.value.allowRestart=r),disabled:!l.value.isInitial},{default:t(()=>[c("Show restart button at the end")]),_:1},8,["checked","disabled"])]),_:1},8,["help"]),a(e(V),{level:4},{default:t(()=>[c(" Alert Messages ")]),_:1}),a(e(M),{label:"Error message"},{default:t(()=>[a(e(Z),{value:l.value.errorMessage,"onUpdate:value":u[9]||(u[9]=r=>l.value.errorMessage=r),type:"text",placeholder:"Something went wrong"},null,8,["value"])]),_:1})]),_:1}))}});const ot=O(lt,[["__scopeId","data-v-aff64cb2"]]),rt=L({__name:"QueryParamsModal",props:{open:{type:Boolean},close:{type:Function},queryParams:{}},emits:["update:query-params"],setup(v,{emit:f}){const w=A(u(v.queryParams));function u(d){return Object.entries(d).map(([o,g])=>({key:o,value:g,id:Math.random().toString()}))}function r(){const d={};return w.value.forEach(({key:o,value:g})=>{d[o]=g}),d}const p=(d,o,g)=>{w.value[d]={key:o,value:g},f("update:query-params",r())},C=()=>{const d=w.value.length;w.value.push({key:`param-${d}`,value:"value"}),f("update:query-params",r())},_=d=>{w.value.splice(d,1),f("update:query-params",r())};return(d,o)=>(s(),k(e(Pe),{open:d.open,onCancel:d.close},{footer:t(()=>[a(e(F),{type:"primary",onClick:d.close},{default:t(()=>[c("OK")]),_:1},8,["onClick"])]),default:t(()=>[a(e(D),{vertical:"",gap:"20"},{default:t(()=>[a(e(R),null,{default:t(()=>[c("Query params")]),_:1}),(s(!0),y(se,null,Ie(w.value,(g,H)=>(s(),k(e(M),{key:H},{default:t(()=>[a(e(oa),null,{default:t(()=>[a(e(Z),{value:g.key,"onUpdate:value":T=>g.key=T,type:"text",placeholder:"name",onChange:()=>p(H,g.key,g.value)},null,8,["value","onUpdate:value","onChange"]),a(e(Z),{value:g.value,"onUpdate:value":T=>g.value=T,type:"text",placeholder:"value",onChange:()=>p(H,g.key,g.value)},null,8,["value","onUpdate:value","onChange"]),a(e(F),{danger:"",onClick:T=>_(H)},{default:t(()=>[c("remove")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),a(e(M),null,{default:t(()=>[a(e(F),{type:"dashed",style:{width:"100%"},onClick:C},{default:t(()=>[c(" Add Query Param ")]),_:1})]),_:1})]),_:1})]),_:1},8,["open","onCancel"]))}}),nt=v=>(ue("data-v-267dfbdd"),v=v(),ie(),v),st={key:0},ut={key:1},it=nt(()=>b("br",null,null,-1)),dt={class:"form-preview-container"},pt=L({__name:"FormEditor",setup(v){var Y;const f=ze(),l=We(),w=Ae(),u=Ce(),r=A(null),p=A("source-code"),C=A("test"),_=A(null),d=A(null),o=A(null),g=A({}),H=$(()=>{var i;return(i=m.value)!=null&&i.form.hasChanges()?{title:"Unsaved changes",message:"Save the form before running the workflow"}:null}),T=(i,n)=>{var h;(h=r.value)==null||h.setHighlight(i,n)},pe=()=>{var i,n;(i=r.value)==null||i.restartEditor(),(n=r.value)==null||n.startPreviewMode()},{result:m,loading:me,refetch:ce}=Je(async()=>{const[i,n]=await Promise.all([aa.get(l.params.id),ta.get()]);return Qe({form:i,workspace:n})});ae([()=>g,m],()=>{j()});function ve(){var n;if(!m.value)return;const i=m.value.form.codeContent;(n=r.value)==null||n.updateLocalEditorCode(i),j()}function j(){if(!m.value)return;o.value=m.value.form.makeRunnerData(m.value.workspace),_.value=new Ve({formRunnerData:o.value,logService:G,connectionManager:new Re(m.value.form.id,"editor",g.value),onFormStart:pe,onFormEnd:fe,onRedirect:be,onStateUpdate:n=>d.value=n,onStackTraceUpdate:T});const i=_.value.getState();d.value=i.formState}const fe=()=>{var i;(i=r.value)==null||i.restartEditor()};function ge(){var i,n;(i=q.value)==null||i.closeConsole(),(n=_.value)==null||n.start()}function Q(){var i,n;(i=r.value)==null||i.restartEditor(),(n=_.value)==null||n.resetForm()}function he(){f.push({name:"stages"})}const q=A(null),ye=i=>{!m.value||(m.value.form.file=i)},G=Te.create();function be(i,n){Be("editor",f,i,n)}const ke=()=>{var h;let i=`/${(h=m.value)==null?void 0:h.form.path}`;const n=new URLSearchParams(g.value);window.open(`${i}?${n.toString()}`,"_blank")},I=A(!1),_e=$(()=>{if(!o.value)return"";const i=Object.entries(g.value),n="?"+i.map(([E,B])=>`${E}=${B}`).join("&"),h=i.length?n:"";return`/${o.value.path}${h}`}),K=new De(Oe.boolean(),"dontShowReloadHelper"),P=A((Y=K.get())!=null?Y:!1),we=()=>{K.set(!0),P.value=!0};ae(()=>l.params.id,()=>{ce()});const z=i=>{var n;return i!==p.value&&((n=m.value)==null?void 0:n.form.hasChanges())};return(i,n)=>(s(),k(Me,null,je({navbar:t(()=>[e(m)?(s(),k(e(ua),{key:0,title:e(m).form.title,style:{padding:"5px 25px",border:"1px solid #f6f6f6"},onBack:he},{extra:t(()=>[a(ra,{"docs-path":"concepts/forms","editing-model":e(m).form},null,8,["editing-model"])]),_:1},8,["title"])):S("",!0)]),content:t(()=>[e(m)?(s(),k($e,{key:0},{left:t(()=>[a(e(le),{"active-key":p.value,"onUpdate:activeKey":n[0]||(n[0]=h=>p.value=h)},{rightExtra:t(()=>[a(Le,{model:e(m).form,onSave:ve},null,8,["model"])]),default:t(()=>[a(e(U),{key:"source-code",tab:"Source code",disabled:z("source-code")},null,8,["disabled"]),a(e(U),{key:"settings",tab:"Settings",disabled:z("settings")},null,8,["disabled"]),a(e(U),{key:"notifications",tab:"Notifications",disabled:z("notifications")},null,8,["disabled"])]),_:1},8,["active-key"]),p.value==="source-code"?(s(),k(Fe,{key:0,ref_key:"code",ref:r,script:e(m).form,workspace:e(m).workspace,onUpdateFile:ye},null,8,["script","workspace"])):S("",!0),p.value==="settings"?(s(),k(ot,{key:1,form:e(m).form},null,8,["form"])):S("",!0),p.value==="notifications"?(s(),k(tt,{key:2,form:e(m).form},null,8,["form"])):S("",!0)]),right:t(()=>[a(e(le),{"active-key":C.value,"onUpdate:activeKey":n[1]||(n[1]=h=>C.value=h)},{default:t(()=>[a(e(U),{key:"test",tab:"Test"}),a(e(U),{key:"tasks",tab:"Tasks",disabled:!!d.value&&e(W).includes(d.value.type)},null,8,["disabled"])]),_:1},8,["active-key"]),e(me)||!o.value||!d.value?(s(),k(e(qe),{key:0})):S("",!0),d.value&&o.value&&C.value==="test"?(s(),k(e(D),{key:1,vertical:"",gap:"10",style:{height:"100%",overflow:"hidden"}},{default:t(()=>[a(e(D),{gap:"small"},{default:t(()=>[d.value.type&&e(Ee).includes(d.value.type)?(s(),k(e(Ge),{key:0,placement:"bottom",open:P.value?void 0:!0},{content:t(()=>[P.value?(s(),y("span",st,"Reload form")):(s(),y("span",ut,[c(" You can reload the form here"),it,a(e(Ke),{onClick:we},{default:t(()=>[c("Don't show this again")]),_:1})]))]),default:t(()=>[a(e(F),{disabled:!!H.value,onClick:Q},{default:t(()=>[a(e(Fa),{size:"20"})]),_:1},8,["disabled"])]),_:1},8,["open"])):S("",!0),e(W).includes(d.value.type)?(s(),k(e(N),{key:1,placement:"bottom"},{title:t(()=>[c("Stop form")]),default:t(()=>[a(e(F),{onClick:Q},{default:t(()=>[a(e(xe),{size:"20"})]),_:1})]),_:1})):S("",!0),d.value.type==="waiting"?(s(),k(e(N),{key:2,placement:"bottom"},{title:t(()=>[c("Start form")]),default:t(()=>[a(e(F),{disabled:!!H.value,onClick:ge},{default:t(()=>[a(e(Ye),{size:"20"})]),_:1},8,["disabled"])]),_:1})):S("",!0),a(e(Z),{disabled:"",value:_e.value},null,8,["value"]),a(e(N),{placement:"bottom"},{title:t(()=>[c("Edit query params")]),default:t(()=>{var h;return[a(e(F),{disabled:!!d.value&&e(W).includes((h=d.value)==null?void 0:h.type),onClick:n[2]||(n[2]=E=>I.value=!0)},{default:t(()=>[a(e(Ja),{size:"20"})]),_:1},8,["disabled"])]}),_:1}),a(e(N),{placement:"bottom"},{title:t(()=>[c("Open in Full Screen")]),default:t(()=>[a(e(F),{target:"_blank","aria-label":"Open in Full Screen","aria-describedby":"sss",onClick:ke},{default:t(()=>[a(e(ea),{size:"20"})]),_:1})]),_:1})]),_:1}),b("div",dt,[H.value?(s(),k(e(sa),{key:0,class:"unsaved-changes"},{default:t(()=>[a(e(R),{style:{"font-size":"18px","font-weight":"500"}},{default:t(()=>[c(te(H.value.title),1)]),_:1}),a(e(R),{style:{"margin-bottom":"6px"}},{default:t(()=>[c(te(H.value.message),1)]),_:1})]),_:1})):S("",!0),a(Xe,{class:"center","main-color":o.value.mainColor,background:o.value.theme,"font-family":o.value.fontFamily,locale:o.value.language},{default:t(()=>{var h,E,B,J,X;return[e(u).state.workspace?(s(),k(Se,{key:0,"current-path":e(m).form.path,"hide-login":!0,"runner-data":e(u).state.workspace},null,8,["current-path","runner-data"])):S("",!0),a(Ue,{"is-preview":"",class:"runner","form-runner-data":o.value,"form-state":d.value,disabled:!!H.value,"user-email":e(w).email,onUpdateWidgetErrors:(h=_.value)==null?void 0:h.updateWidgetFrontendErrors,onUpdateWidgetValue:(E=_.value)==null?void 0:E.updateWidgetValue,onActionClicked:(B=_.value)==null?void 0:B.handleActionClick,onAutoFillClicked:(J=_.value)==null?void 0:J.handleAutofillClick,onAuthComplete:(X=_.value)==null?void 0:X.handleAuthComplete},null,8,["form-runner-data","form-state","disabled","user-email","onUpdateWidgetErrors","onUpdateWidgetValue","onActionClicked","onAutoFillClicked","onAuthComplete"])]}),_:1},8,["main-color","background","font-family","locale"])])]),_:1})):C.value==="tasks"?(s(),k(na,{key:2,"stage-id":e(m).form.id},null,8,["stage-id"])):S("",!0),a(rt,{"query-params":g.value,"onUpdate:queryParams":n[3]||(n[3]=h=>g.value=h),open:I.value,close:()=>I.value=!1},null,8,["query-params","open","close"])]),_:1})):S("",!0)]),_:2},[e(m)?{name:"footer",fn:t(()=>[a(Ze,{ref_key:"smartConsole",ref:q,"stage-type":"forms",stage:e(m).form,"log-service":e(G),workspace:e(m).workspace},null,8,["stage","log-service","workspace"])]),key:"0"}:void 0]),1024))}});const _l=O(pt,[["__scopeId","data-v-267dfbdd"]]);export{_l as default};
//# sourceMappingURL=FormEditor.e2d2b93a.js.map
