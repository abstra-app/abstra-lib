import{_ as E}from"./AbstraButton.vue_vue_type_script_setup_true_lang.66caf4ad.js";import{o as A}from"./omniChatStore.1072b727.js";import{a as M}from"./string.85cf7ead.js";import{d as $,am as w,c as g,o as l,a5 as u,a7 as F,h as B,e6 as R,e as p,e5 as D,eb as L,r as T,ae as V,J as P,aq as U,i as q,f as r,u as a,a as y,b as n,aR as Z,S as G,A as J,g as C,da as O,de as W,bJ as I,cx as S,ec as H,cy as K,cz as Q,M as X}from"./jwt-decode.esm.ad7fa97d.js";import{a as Y,f as ee}from"./router.5d33714c.js";import{T as ae}from"./tables.4470b280.js";import{T as te}from"./TableCard.20d98e7e.js";import{_ as le}from"./TablesTabs.vue_vue_type_script_setup_true_lang.e4a377e3.js";import{u as oe}from"./useTables.9e9585d6.js";import"./record.74479f08.js";import"./uuid.61868ab7.js";import"./PhCopySimple.vue.af5fe872.js";import"./index.c82498a1.js";import"./PhKey.vue.ca690af6.js";import"./PhPencil.vue.151a9bde.js";import"./vue-flow-core.18b525de.js";import"./Card.e276be5a.js";(function(){try{var f=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new Error().stack;s&&(f._sentryDebugIds=f._sentryDebugIds||{},f._sentryDebugIds[s]="0a336963-b8fa-423b-aa24-57276cb5da4f",f._sentryDebugIdIdentifier="sentry-dbid-0a336963-b8fa-423b-aa24-57276cb5da4f")}catch{}})();const re=["width","height","fill","transform"],ne={key:0},se=p("path",{d:"M232.49,215.51,185,168a92.12,92.12,0,1,0-17,17l47.53,47.54a12,12,0,0,0,17-17ZM44,112a68,68,0,1,1,68,68A68.07,68.07,0,0,1,44,112Z"},null,-1),ie=[se],ue={key:1},de=p("path",{d:"M192,112a80,80,0,1,1-80-80A80,80,0,0,1,192,112Z",opacity:"0.2"},null,-1),me=p("path",{d:"M229.66,218.34,179.6,168.28a88.21,88.21,0,1,0-11.32,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"},null,-1),pe=[de,me],fe={key:2},ce=p("path",{d:"M168,112a56,56,0,1,1-56-56A56,56,0,0,1,168,112Zm61.66,117.66a8,8,0,0,1-11.32,0l-50.06-50.07a88,88,0,1,1,11.32-11.31l50.06,50.06A8,8,0,0,1,229.66,229.66ZM112,184a72,72,0,1,0-72-72A72.08,72.08,0,0,0,112,184Z"},null,-1),be=[ce],ve={key:3},ye=p("path",{d:"M228.24,219.76l-51.38-51.38a86.15,86.15,0,1,0-8.48,8.48l51.38,51.38a6,6,0,0,0,8.48-8.48ZM38,112a74,74,0,1,1,74,74A74.09,74.09,0,0,1,38,112Z"},null,-1),ge=[ye],he={key:4},we=p("path",{d:"M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"},null,-1),ke=[we],_e={key:5},Ce=p("path",{d:"M226.83,221.17l-52.7-52.7a84.1,84.1,0,1,0-5.66,5.66l52.7,52.7a4,4,0,0,0,5.66-5.66ZM36,112a76,76,0,1,1,76,76A76.08,76.08,0,0,1,36,112Z"},null,-1),xe=[Ce],Ae={name:"PhMagnifyingGlass"},Me=$({...Ae,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(f){const s=f,k=w("weight","regular"),c=w("size","1em"),d=w("color","currentColor"),_=w("mirrored",!1),m=g(()=>{var e;return(e=s.weight)!=null?e:k}),b=g(()=>{var e;return(e=s.size)!=null?e:c}),h=g(()=>{var e;return(e=s.color)!=null?e:d}),v=g(()=>s.mirrored!==void 0?s.mirrored?"scale(-1, 1)":void 0:_?"scale(-1, 1)":void 0);return(e,x)=>(l(),u("svg",R({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:b.value,height:b.value,fill:h.value,transform:v.value},e.$attrs),[F(e.$slots,"default"),m.value==="bold"?(l(),u("g",ne,ie)):m.value==="duotone"?(l(),u("g",ue,pe)):m.value==="fill"?(l(),u("g",fe,be)):m.value==="light"?(l(),u("g",ve,ge)):m.value==="regular"?(l(),u("g",he,ke)):m.value==="thin"?(l(),u("g",_e,xe)):B("",!0)],16,re))}}),Te={key:1,style:{padding:"1rem"}},Ze={style:{flex:"1"}},Je=$({__name:"Tables",setup(f){const s=D(),c=L().params.projectId,{tables:d,loading:_,fetchTables:m}=oe(c),b=T(""),h=g(()=>{if(!d.value)return[];if(!b.value)return d.value;const i=b.value.toLowerCase();return d.value.filter(t=>t.name.toLowerCase().includes(i))}),v=T(!1),e=V({name:""}),x=i=>M(i,!0),N=i=>M(i,!1),j=async()=>{const i=await ae.create(c,e.name);v.value=!1,e.name="",s.push({name:"tableEditor",params:{tableId:i.id,projectId:c}})};return P(()=>{const i=A.subscribe("tableCreated",()=>{m(!0)});U(()=>{A.unsubscribe(i)})}),(i,t)=>{const z=q("RouterLink");return l(),u(Z,null,[r(le),a(_)?(l(),y(a(G),{key:0,style:{width:"100%","margin-top":"2rem"}})):(l(),u("div",Te,[r(a(W),{justify:"space-between",align:"center",style:{"margin-bottom":"1rem"}},{default:n(()=>[p("div",Ze,[r(a(J),{level:3},{default:n(()=>[C("Tables")]),_:1}),r(a(O),{type:"secondary"},{default:n(()=>[C("Create and manage your database tables here.")]),_:1})]),r(E,{type:"primary",onClick:t[0]||(t[0]=o=>v.value=!0)},{default:n(()=>[C(" Create Table ")]),_:1})]),_:1}),a(d)&&a(d).length>0?(l(),y(a(I),{key:0,value:b.value,"onUpdate:value":t[1]||(t[1]=o=>b.value=o),placeholder:"Search tables...","allow-clear":"",style:{"margin-bottom":"1rem","max-width":"400px"}},{prefix:n(()=>[r(a(Me),{size:16})]),_:1},8,["value"])):B("",!0),!a(d)||a(d).length===0?(l(),y(a(S),{key:1,description:"No tables here yet"})):h.value.length===0?(l(),y(a(S),{key:2,description:"No tables match your search"})):(l(),y(a(ee),{key:3,gutter:[16,16]},{default:n(()=>[(l(!0),u(Z,null,H(h.value,o=>(l(),y(a(Y),{key:o.id,xs:24,sm:24,md:12,lg:12,xl:8,xxl:8},{default:n(()=>[r(z,{to:`/projects/${a(c)}/tables/${o.id}`,style:{"text-decoration":"none",color:"inherit"}},{default:n(()=>[r(te,{table:o,"project-id":a(c),"show-edit-button":!1},null,8,["table","project-id"])]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1}))])),r(a(X),{open:v.value,"onUpdate:open":t[5]||(t[5]=o=>v.value=o),title:"Create Table",onOk:j,onCancel:t[6]||(t[6]=o=>v.value=!1)},{default:n(()=>[r(a(K),{model:e,layout:"vertical"},{default:n(()=>[r(a(Q),{label:"Table name",name:"name"},{default:n(()=>[r(a(I),{value:e.name,"onUpdate:value":t[2]||(t[2]=o=>e.name=o),placeholder:"Enter table name",onBlur:t[3]||(t[3]=o=>e.name=N(e.name)),onInput:t[4]||(t[4]=o=>e.name=x(e.name))},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])],64)}}});export{Je as default};
//# sourceMappingURL=Tables.f487674b.js.map
