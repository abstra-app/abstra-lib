import{a as I}from"./asyncComputed.89463d98.js";import{P as S}from"./project.72030f5a.js";import"./router.724280b3.js";import{d as k,r as y,b as h,c as D,w as a,aq as r,ey as T,u as e,bU as P,cz as F,eH as H,G as A,f as t,e as m,eD as f,bN as U,eu as B,ew as E,cF as N,eB as V}from"./outputWidgets.bf2ccc30.js";import"./columns.6b6e9690.js";import{A as j}from"./Title.b201b493.js";import{b as C,c as u,A as _}from"./Text.733c8136.js";import{A as $,F as R}from"./Base.08a90b2d.js";import"./gateway.e97424ce.js";import"./record.72c168c7.js";import"./pubsub.4417aa45.js";import"./index.99b6e0a0.js";import"./transButton.4ff5a2f3.js";(function(){try{var d=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new Error().stack;s&&(d._sentryDebugIds=d._sentryDebugIds||{},d._sentryDebugIds[s]="d24dd475-2041-4dd3-bf12-6592d188295e",d._sentryDebugIdIdentifier="sentry-dbid-d24dd475-2041-4dd3-bf12-6592d188295e")}catch{}})();const q=k({__name:"SaveButton",props:{model:{},disabled:{type:Boolean}},emits:["error"],setup(d,{emit:s}){const l=d,i=y(!1),v=y(null);async function c(){i.value=!0;try{await l.model.save()}catch(o){o instanceof Error&&(s("error",o),F.error({message:"Error",description:o.message}),v.value=o)}finally{i.value=!1}}return addEventListener("keydown",o=>{(o.metaKey||o.ctrlKey)&&o.key==="s"&&(o.preventDefault(),c())}),addEventListener("beforeunload",o=>{l.model.hasChanges()&&(o.preventDefault(),o.returnValue="")}),(o,b)=>{var g,n,p;return h(),D(e(P),{class:T(["save-button",{changes:(g=o.model)==null?void 0:g.hasChanges()}]),loading:i.value,disabled:(p=o.disabled)!=null?p:!((n=o.model)!=null&&n.hasChanges()),onClick:b[0]||(b[0]=w=>c())},{default:a(()=>[r(" Save ")]),_:1},8,["class","loading","disabled"])}}}),z={key:0},K=k({__name:"SubdomainEditor",props:{project:{}},setup(d){const s=d,l=y(void 0),i=H.exports.debounce(async()=>{try{const{available:n}=await s.project.checkSubdomain();l.value=n?"available":"unavailable"}catch{l.value=void 0}},500);function v(){s.project.subdomain?(l.value="loading",i()):l.value="invalid"}const c=A(()=>{switch(l.value){case"invalid":return"error";case"loading":return"validating";case"available":return"success";case"unavailable":return"error";default:return}}),o=A(()=>{switch(l.value){case"loading":return"Checking availability...";case"available":return"Available";case"unavailable":return"Unavailable";case"invalid":return"Invalid subdomain";default:return}}),b=()=>{s.project.subdomain=S.formatSubdomain(s.project.subdomain),v()};function g(){s.project.resetChanges(),l.value=void 0}return(n,p)=>(h(),D(e(N),{direction:"vertical"},{default:a(()=>[t(e(j),{level:2},{default:a(()=>[r("Subdomain")]),_:1}),t(e(C),null,{default:a(()=>[r(" Every project in Abstra Cloud comes with a default subdomain, which will appear on all shared project links. ")]),_:1}),t(e(_),null,{default:a(()=>[t(e(u),null,{default:a(()=>[r("Forms available at:")]),_:1}),t(e(u),{code:""},{default:a(()=>[m("span",null,f(n.project.getUrl("[PATH]")),1)]),_:1})]),_:1}),t(e(_),null,{default:a(()=>[t(e(u),null,{default:a(()=>[r("Hooks available at:")]),_:1}),t(e(u),{code:""},{default:a(()=>[m("span",null,f(n.project.getUrl("_hooks/[PATH]")),1)]),_:1})]),_:1}),t(e(R),null,{default:a(()=>[t(e($),{"validate-status":c.value,help:o.value,"has-feedback":""},{default:a(()=>[t(e(U),{value:n.project.subdomain,"onUpdate:value":p[0]||(p[0]=w=>n.project.subdomain=w),type:"text",loading:l.value==="loading",onBlur:b},{addonBefore:a(()=>[r("https://")]),addonAfter:a(()=>[r(".abstra.app")]),_:1},8,["value","loading"])]),_:1},8,["validate-status","help"]),t(q,{model:n.project,disabled:l.value!=="available",onError:g},null,8,["model","disabled"])]),_:1}),n.project.customDomain?(h(),B("div",z,[t(e(j),{level:2},{default:a(()=>[r("Custom Domain")]),_:1}),t(e(C),null,{default:a(()=>[r(" Your project also has a custom domain: "),t(e(u),{code:""},{default:a(()=>[m("span",null,f(n.project.customDomain),1)]),_:1})]),_:1}),t(e(_),null,{default:a(()=>[t(e(u),null,{default:a(()=>[r("Forms available at:")]),_:1}),t(e(u),{code:""},{default:a(()=>[m("span",null,f(n.project.getCustomDomainUrl("[PATH]")),1)]),_:1})]),_:1}),t(e(_),null,{default:a(()=>[t(e(u),null,{default:a(()=>[r("Hooks available at:")]),_:1}),t(e(u),{code:""},{default:a(()=>[m("span",null,f(n.project.getCustomDomainUrl("_hooks/[PATH]")),1)]),_:1})]),_:1})])):E("",!0)]),_:1}))}}),L={key:0,class:"project-settings"},oe=k({__name:"ProjectSettings",setup(d){const l=V().params.projectId,{result:i}=I(()=>S.get(l));return(v,c)=>e(i)?(h(),B("div",L,[t(e(j),null,{default:a(()=>[r("Project Settings")]),_:1}),t(K,{project:e(i)},null,8,["project"])])):E("",!0)}});export{oe as default};
//# sourceMappingURL=ProjectSettings.14fac7fe.js.map
