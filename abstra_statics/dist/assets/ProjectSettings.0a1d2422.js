import{a as D}from"./asyncComputed.d69215c4.js";import{b as t,ee as T,f2 as B,d as y,e as E,ej as x,f as p,o as j,c as F,w as l,u as n,aG as d,dd as S,db as N,dc as c,a as v,e9 as g,cz as U,dh as V,bL as H,aW as R,cy as $,ea as q,Y as z,S as G}from"./index.3c5f59e1.js";import"./gateway.b673f2c4.js";import{a as C}from"./project.5b1de625.js";import"./tables.5e718264.js";import{S as L}from"./SaveButton.09c6d4a7.js";import{a as h}from"./index.b7ffbcab.js";import{A as M}from"./index.4f70a280.js";import"./popupNotifcation.a1adeea8.js";import"./record.55956e40.js";import"./string.9f0382b6.js";import"./UnsavedChangesHandler.16faa868.js";import"./ExclamationCircleOutlined.e6e49c8e.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},o=new Error().stack;o&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[o]="9a40070b-8e2e-4165-965d-0dc792d0d8db",r._sentryDebugIdIdentifier="sentry-dbid-9a40070b-8e2e-4165-965d-0dc792d0d8db")}catch{}})();function _(r){for(var o=1;o<arguments.length;o++){var e=arguments[o]!=null?Object(arguments[o]):{},a=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(e).filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),a.forEach(function(i){W(r,i,e[i])})}return r}function W(r,o,e){return o in r?Object.defineProperty(r,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[o]=e,r}var m=function(o,e){var a=_({},o,e.attrs);return t(T,_({},a,{icon:B}),null)};m.displayName="CopyOutlined";m.inheritAttrs=!1;const Y=m,J=y({__name:"SubdomainEditor",props:{project:{}},emits:["change-subdomain"],setup(r,{emit:o}){const e=r,a=E(void 0),i=x.exports.debounce(async()=>{try{const{available:s}=await e.project.checkSubdomain();a.value=s?"available":"unavailable"}catch{a.value=void 0}},500);function u(){if(!e.project.hasChangesDeep("subdomain")){a.value=void 0;return}e.project.subdomain?(a.value="loading",i()):a.value="invalid"}const b=p(()=>a.value!=="available"||!e.project.hasChangesDeep("subdomain")),w=async()=>{await navigator.clipboard.writeText(e.project.getUrl())},A=p(()=>{switch(a.value){case"invalid":return"error";case"loading":return"validating";case"available":return"success";case"unavailable":return"error";default:return}}),k=p(()=>{switch(a.value){case"loading":return"Checking availability...";case"available":return"Available";case"unavailable":return"Unavailable";case"invalid":return"Invalid subdomain";default:return}}),O=()=>{const s=C.formatSubdomain(e.project.subdomain);o("change-subdomain",s),u()};function P(){e.project.resetChanges(),a.value=void 0}return(s,f)=>(j(),F(n(M),{direction:"vertical"},{default:l(()=>[t(n(S),{level:2},{default:l(()=>[d("Subdomain")]),_:1}),t(n(N),null,{default:l(()=>[d(" Every project in Abstra Cloud comes with a default subdomain, which will appear on all shared project links. ")]),_:1}),t(n(h),null,{default:l(()=>[t(n(c),null,{default:l(()=>[d("Forms available at:")]),_:1}),t(n(c),{code:""},{default:l(()=>[v("span",null,g(s.project.getUrl("[PATH]")),1)]),_:1})]),_:1}),t(n(h),null,{default:l(()=>[t(n(c),null,{default:l(()=>[d("Hooks available at:")]),_:1}),t(n(c),{code:""},{default:l(()=>[v("span",null,g(s.project.getUrl("_hooks/[PATH]")),1)]),_:1})]),_:1}),t(n($),null,{default:l(()=>[t(n(U),{"validate-status":A.value,help:k.value,"has-feedback":""},{default:l(()=>[t(n(V),{gap:"middle"},{default:l(()=>[t(n(H),{value:s.project.subdomain,type:"text",loading:a.value==="loading",onBlur:O,onChange:f[0]||(f[0]=I=>o("change-subdomain",I.target.value))},{addonBefore:l(()=>[d("https://")]),addonAfter:l(()=>[d(".abstra.app/")]),_:1},8,["value","loading"]),t(n(R),{placement:"top",title:"Copy"},{default:l(()=>[t(n(Y),{color:"red",onClick:w})]),_:1})]),_:1})]),_:1},8,["validate-status","help"]),t(L,{model:s.project,disabled:b.value,onError:P},null,8,["model","disabled"])]),_:1})]),_:1}))}}),Q={key:0,class:"project-settings"},ue=y({__name:"ProjectSettings",setup(r){const e=q().params.projectId,{result:a}=D(()=>C.get(e)),i=u=>{a.value.subdomain=u};return(u,b)=>n(a)?(j(),z("div",Q,[t(n(S),null,{default:l(()=>[d("Project Settings")]),_:1}),t(J,{project:n(a),onChangeSubdomain:i},null,8,["project"])])):G("",!0)}});export{ue as default};
//# sourceMappingURL=ProjectSettings.0a1d2422.js.map
