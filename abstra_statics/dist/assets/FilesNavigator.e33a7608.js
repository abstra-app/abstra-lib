import{d as B,af as C,g as P,o as c,K as g,O as E,F as y,e5 as ue,a as b,b as f,e6 as V,eJ as se,eK as ce,eL as de,N as T,ec as q,f as W,u as s,cw as fe,w as p,c as m,az as w,eb as J,d4 as pe,bM as $,cm as me,da as he,ei as ye,bK as ve,eM as ge,bs as be,bq as M,cZ as Oe,cq as we,t as D,Q as Pe}from"./index.1da01ec4.js";import{p as Fe}from"./popupNotifcation.231228f5.js";import{a as Ae}from"./ant-design.a88e12c2.js";import{f as Q}from"./string.4dfa525a.js";import{G as Ve}from"./PhDotsThree.vue.37b8a771.js";import{G as ke}from"./PhFolder.vue.e07cff57.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="ad9758f9-29fc-4c03-ab3e-81e6d3deb97e",t._sentryDebugIdIdentifier="sentry-dbid-ad9758f9-29fc-4c03-ab3e-81e6d3deb97e")}catch{}})();var Se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM544 472c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v108H372c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h108v108c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h108c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V472z"}}]},name:"file-add",theme:"outlined"};const Me=Se;var _e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M484 443.1V528h-84.5c-4.1 0-7.5 3.1-7.5 7v42c0 3.8 3.4 7 7.5 7H484v84.9c0 3.9 3.2 7.1 7 7.1h42c3.9 0 7-3.2 7-7.1V584h84.5c4.1 0 7.5-3.2 7.5-7v-42c0-3.9-3.4-7-7.5-7H540v-84.9c0-3.9-3.1-7.1-7-7.1h-42c-3.8 0-7 3.2-7 7.1zm396-144.7H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder-add",theme:"outlined"};const He=_e;var je={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};const Ce=je,De=["width","height","fill","transform"],$e={key:0},ze=b("path",{d:"M216.49,79.52l-56-56A12,12,0,0,0,152,20H56A20,20,0,0,0,36,40V216a20,20,0,0,0,20,20H200a20,20,0,0,0,20-20V88A12,12,0,0,0,216.49,79.52ZM160,57l23,23H160ZM60,212V44h76V92a12,12,0,0,0,12,12h48V212Z"},null,-1),Be=[ze],Ee={key:1},Ne=b("path",{d:"M208,88H152V32Z",opacity:"0.2"},null,-1),Ze=b("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM200,216H56V40h88V88a8,8,0,0,0,8,8h48V216Z"},null,-1),Ue=[Ne,Ze],Ie={key:2},Le=b("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM152,88V44l44,44Z"},null,-1),Re=[Le],Ge={key:3},xe=b("path",{d:"M212.24,83.76l-56-56A6,6,0,0,0,152,26H56A14,14,0,0,0,42,40V216a14,14,0,0,0,14,14H200a14,14,0,0,0,14-14V88A6,6,0,0,0,212.24,83.76ZM158,46.48,193.52,82H158ZM200,218H56a2,2,0,0,1-2-2V40a2,2,0,0,1,2-2h90V88a6,6,0,0,0,6,6h50V216A2,2,0,0,1,200,218Z"},null,-1),Te=[xe],qe={key:4},We=b("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM200,216H56V40h88V88a8,8,0,0,0,8,8h48V216Z"},null,-1),Je=[We],Qe={key:5},Xe=b("path",{d:"M210.83,85.17l-56-56A4,4,0,0,0,152,28H56A12,12,0,0,0,44,40V216a12,12,0,0,0,12,12H200a12,12,0,0,0,12-12V88A4,4,0,0,0,210.83,85.17ZM156,41.65,198.34,84H156ZM200,220H56a4,4,0,0,1-4-4V40a4,4,0,0,1,4-4h92V88a4,4,0,0,0,4,4h52V216A4,4,0,0,1,200,220Z"},null,-1),Ye=[Xe],Ke={name:"PhFile"},et=B({...Ke,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(t){const e=t,n=C("weight","regular"),o=C("size","1em"),i=C("color","currentColor"),v=C("mirrored",!1),O=P(()=>{var h;return(h=e.weight)!=null?h:n}),A=P(()=>{var h;return(h=e.size)!=null?h:o}),_=P(()=>{var h;return(h=e.color)!=null?h:i}),H=P(()=>e.mirrored!==void 0?e.mirrored?"scale(-1, 1)":void 0:v?"scale(-1, 1)":void 0);return(h,G)=>(c(),g("svg",ue({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:A.value,height:A.value,fill:_.value,transform:H.value},h.$attrs),[E(h.$slots,"default"),O.value==="bold"?(c(),g("g",$e,Be)):O.value==="duotone"?(c(),g("g",Ee,Ue)):O.value==="fill"?(c(),g("g",Ie,Re)):O.value==="light"?(c(),g("g",Ge,Te)):O.value==="regular"?(c(),g("g",qe,Je)):O.value==="thin"?(c(),g("g",Qe,Ye)):y("",!0)],16,De))}});function X(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),o.forEach(function(i){tt(t,i,n[i])})}return t}function tt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var N=function(e,n){var o=X({},e,n.attrs);return f(V,X({},o,{icon:se}),null)};N.displayName="DeleteOutlined";N.inheritAttrs=!1;const nt=N;function Y(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),o.forEach(function(i){rt(t,i,n[i])})}return t}function rt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Z=function(e,n){var o=Y({},e,n.attrs);return f(V,Y({},o,{icon:ce}),null)};Z.displayName="DownloadOutlined";Z.inheritAttrs=!1;const at=Z;function K(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),o.forEach(function(i){lt(t,i,n[i])})}return t}function lt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var U=function(e,n){var o=K({},e,n.attrs);return f(V,K({},o,{icon:de}),null)};U.displayName="EditOutlined";U.inheritAttrs=!1;const ot=U;function ee(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),o.forEach(function(i){it(t,i,n[i])})}return t}function it(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var I=function(e,n){var o=ee({},e,n.attrs);return f(V,ee({},o,{icon:Me}),null)};I.displayName="FileAddOutlined";I.inheritAttrs=!1;const te=I;function ne(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),o.forEach(function(i){ut(t,i,n[i])})}return t}function ut(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var L=function(e,n){var o=ne({},e,n.attrs);return f(V,ne({},o,{icon:He}),null)};L.displayName="FolderAddOutlined";L.inheritAttrs=!1;const st=L;function re(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),o.forEach(function(i){ct(t,i,n[i])})}return t}function ct(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var R=function(e,n){var o=re({},e,n.attrs);return f(V,re({},o,{icon:Ce}),null)};R.displayName="UploadOutlined";R.inheritAttrs=!1;const ae=R;function At(t){var e;return(e=t.split(/\/|\\/).pop())!=null?e:""}function z(t){return t.length===0?".":t[t.length-1]}function Vt(t){const e=["B","KB","MB","GB","TB"],n=t.match(/^(\d+(\.\d+)?)\s*(\w+)$/);if(!n)return 0;const o=parseFloat(n[1]),i=n[3],v=e.indexOf(i);return v===-1?0:o*Math.pow(1024,v)}function kt(t){return[".png",".svg",".jpg",".jpeg",".ico",".webp"].some(e=>t.endsWith(e))}const dt=B({__name:"ScrollArea",props:{innerClass:{},outerClass:{},outerStyle:{},innerStyle:{}},setup(t){const e=t,n=P(()=>e.outerStyle?{position:"relative",...e.outerStyle}:{position:"relative"}),o=P(()=>{var i;return{position:"absolute",inset:0,overflow:"auto",...(i=e.innerStyle)!=null?i:{}}});return(i,v)=>(c(),g("div",{style:T(n.value),class:q(i.outerClass)},[b("div",{style:T(o.value),class:q(i.innerClass)},[E(i.$slots,"default")],6)],6))}}),ft={class:"files-navigator"},pt={key:0},mt={key:1},ht={key:0,class:"file-size"},yt=B({__name:"FilesNavigator",props:{files:{},loading:{type:Boolean},onCreate:{type:Function},onDownload:{type:Function},onDelete:{type:Function},onRefetch:{type:Function},onRename:{type:Function},onOpen:{type:Function},onMkdir:{type:Function},separator:{}},setup(t){const e=t,n=r=>a=>{var l,u;return{key:a.pathParts.join(e.separator),title:r.keepFullPath?a.pathParts.join(e.separator):z(a.pathParts),isLeaf:a.type==="file",file:a,children:r.keepFullPath?void 0:(u=(l=a.children)==null?void 0:l.map(d=>{var S;const k=(S=e.files)==null?void 0:S.find(j=>j.pathParts.join(e.separator)===d.join(e.separator));if(!k)throw new Error("Child node not found");return n({keepFullPath:r.keepFullPath})(k)}))!=null?u:[]}},o=r=>{if(!F.value.trim())return D("span",r);const a=Q(F.value,r);return a?D("span",r.split("").map((l,u)=>a.includes(u)?D("span",{class:"char-match"},l):l)):D("span",r)},i=r=>{if(r.type==="directory")return"";const a=r.size;if(a<1024)return`${a} B`;const l=a/1024;if(l<1024)return`${l.toFixed(2)} KB`;const u=l/1024;return u<1024?`${u.toFixed(2)} MB`:`${(u/1024).toFixed(2)} GB`},v=P(()=>{var r,a;return F.value.trim()?(r=e.files)==null?void 0:r.filter(l=>l.pathParts.length===1&&Q(F.value,l.pathParts.join(e.separator))).map(n({keepFullPath:!0})):(a=e.files)==null?void 0:a.filter(l=>l.pathParts.length===1).map(n({keepFullPath:!1}))}),O=r=>{var a,l;return r.isLeaf?1:(l=(a=r.children)==null?void 0:a.reduce((u,d)=>u+O(d),0))!=null?l:0},A=P(()=>v.value?v==null?void 0:v.value.reduce((r,a)=>r+O(a),0):0),_=W(!1);function H(r){if(r&&r.type==="file")return;const a=document.createElement("input");a.type="file",a.onchange=async()=>{var d,k,S,j,x;const l=(d=a.files)==null?void 0:d[0],u=await(l==null?void 0:l.arrayBuffer());if(!!l)try{_.value=!0,await((j=e.onCreate)==null?void 0:j.call(e,[...(k=r==null?void 0:r.pathParts)!=null?k:[],(S=l.name)!=null?S:"Untitled file"],u?new Uint8Array(u):void 0)),await((x=e.onRefetch)==null?void 0:x.call(e))}catch{Fe("Failed to upload file","File already exists")}finally{_.value=!1}},a.click()}function h(r){var u;if(r&&r.type==="file")return;const a=prompt("Enter the name of the new file");if(!a)return;const l=r?[...r.pathParts,a]:[a];(u=e.onCreate)==null||u.call(e,l)}async function G(r){if(!r||!e.onDownload)return;const a=await e.onDownload(r.pathParts),l=document.createElement("a");l.href=URL.createObjectURL(a),l.download=z(r.pathParts),l.click()}async function le(r){var l,u;if(!r)return;const a="Are you sure you want to delete this "+(r.type==="file"?"file":"directory and all its contents")+"?";await Ae(a)&&(await((l=e.onDelete)==null?void 0:l.call(e,r.pathParts)),await((u=e.onRefetch)==null?void 0:u.call(e)))}async function oe(r){var u,d;if(!r)return;const a=prompt("Enter the new name of the file",z(r.pathParts));if(!a)return;const l=[...r.pathParts.slice(0,-1),a];await((u=e.onRename)==null?void 0:u.call(e,r.pathParts,l)),await((d=e.onRefetch)==null?void 0:d.call(e))}async function ie(r){var u;if(r&&r.type==="file")return;const a=prompt("Enter the name of the new folder");if(!a)return;const l=r?[...r.pathParts,a]:[a];(u=e.onMkdir)==null||u.call(e,l)}const F=W("");return(r,a)=>(c(),g("div",ft,[f(s(fe),{value:F.value,"onUpdate:value":a[0]||(a[0]=l=>F.value=l),loading:e.loading,placeholder:"Search files"},null,8,["value","loading"]),f(s(he),{justify:"space-between"},{default:p(()=>[A.value>0?(c(),m(s(pe),{key:0},{default:p(()=>[b("b",null,[w(J(A.value)+" File",1),A.value!==1?(c(),g("span",pt,"s")):y("",!0),F.value?(c(),g("span",mt," found ")):y("",!0)])]),_:1})):y("",!0),r.loading?y("",!0):(c(),m(s(me),{key:1},{default:p(()=>[r.onCreate?(c(),m(s($),{key:0,onClick:a[1]||(a[1]=()=>h())},{default:p(()=>[f(s(te)),w(" New File ")]),_:1})):y("",!0),r.onCreate?(c(),m(s($),{key:1,onClick:a[2]||(a[2]=()=>H())},{default:p(()=>[f(s(ae)),w(" Upload ")]),_:1})):y("",!0),r.onMkdir?(c(),m(s($),{key:2,onClick:a[3]||(a[3]=()=>ie())},{default:p(()=>[f(s(st)),w(" New Folder ")]),_:1})):y("",!0)]),_:1}))]),_:1}),f(dt,{class:"scroll-area","outer-style":{flexGrow:"1"}},{default:p(()=>[v.value&&v.value.length>0?(c(),m(s(Oe),{key:0,class:"files-tree","tree-data":v.value,selectable:"",onSelect:a[5]||(a[5]=(l,{node:{file:u}})=>{var d;return(d=e.onOpen)==null?void 0:d.call(e,u.pathParts)})},{title:p(({title:l,isLeaf:u,file:d})=>[b("span",null,[(c(),m(ye(o(l)))),u?(c(),g("span",ht,"("+J(i(d))+")",1)):y("",!0)]),f(s(ve),{onClick:a[4]||(a[4]=ge(()=>{},["stop"]))},{overlay:p(()=>[f(s(be),{disabled:r.loading},{default:p(()=>[r.onDownload?(c(),m(s(M),{key:0,onClick:()=>G(d)},{default:p(()=>[f(s(at)),w(" Download ")]),_:2},1032,["onClick"])):y("",!0),r.onRename?(c(),m(s(M),{key:1,onClick:()=>oe(d)},{default:p(()=>[f(s(ot)),w(" Rename ")]),_:2},1032,["onClick"])):y("",!0),!u&&r.onCreate?(c(),m(s(M),{key:2,onClick:()=>h(d)},{default:p(()=>[f(s(te)),w(" New File ")]),_:2},1032,["onClick"])):y("",!0),r.onCreate?(c(),m(s(M),{key:3,loading:r.loading,onClick:()=>H(d)},{default:p(()=>[f(s(ae)),w(" Upload ")]),_:2},1032,["loading","onClick"])):y("",!0),r.onDelete?(c(),m(s(M),{key:4,danger:"",onClick:()=>le(d)},{default:p(()=>[f(s(nt)),w(" Delete ")]),_:2},1032,["onClick"])):y("",!0)]),_:2},1032,["disabled"])]),default:p(()=>[f(s(Ve),{style:{cursor:"pointer",float:"inline-end"},size:"25px"})]),_:2},1024)]),icon:p(({file:l})=>[E(r.$slots,"icon",{file:l},()=>[l.type==="directory"?(c(),m(s(ke),{key:0})):(c(),m(s(et),{key:1}))],!0)]),_:3},8,["tree-data"])):(c(),m(s(we),{key:1,description:r.loading?"Loading...":"No files"},null,8,["description"]))]),_:3})]))}});const St=Pe(yt,[["__scopeId","data-v-1c0a4c2f"]]);export{St as F,et as I,dt as _,At as f,kt as i,Vt as s};
//# sourceMappingURL=FilesNavigator.e33a7608.js.map
