var H=Object.defineProperty;var R=(a,e,t)=>e in a?H(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var u=(a,e,t)=>(R(a,typeof e!="symbol"?e+"":e,t),t);import{f as s,ez as D,d as I,eA as G,eB as U,r as k,G as N,b as l,eu as p,b8 as v,eC as y,e as g,eD as w,ey as C,I as T,ew as h,c as b,w as i,u as d,t as W,eE as q,eF as J,o as Q,K as X,cK as L,b$ as S,aA as z,cG as Y,a as Z}from"./outputWidgets.427e9347.js";import{f as K,h as ee,j as te,d as ae,c as ne,m as se,p as re,w as oe}from"./icons.2a865956.js";import{T as le}from"./Tooltip.93b3fa6a.js";import{_ as ie}from"./logo.084e5d7c.js";import{L as ce}from"./LoginBlock.3d3b004b.js";import{a as ue}from"./asyncComputed.32abd7c2.js";import{A as de}from"./index.3804082b.js";import{B as pe}from"./index.29cf0da5.js";import{_ as fe}from"./DocsButton.vue_vue_type_script_setup_true_lang.09beac58.js";import{B as me}from"./BaseLayout.0abe2ed6.js";import{c as _e}from"./index.e58605b8.js";import"./workspaces.4100d442.js";import"./activeRecord.91f10272.js";import"./pubsub.9b59356e.js";import"./url.9044ee0d.js";import"./popupNotifcation.ad1f6d90.js";import"./index.8dcb7ead.js";import"./index.72b0f783.js";import"./transButton.470f2fe6.js";import"./isNumeric.75337b1e.js";(function(){try{var a=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[e]="919abb95-27ff-43cd-8e8e-85a0604cca0c",a._sentryDebugIdIdentifier="sentry-dbid-919abb95-27ff-43cd-8e8e-85a0604cca0c")}catch{}})();var he={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M865.3 244.7c-.3-.3-61.1 59.8-182.1 180.6l-84.9-84.9 180.9-180.9c-95.2-57.3-217.5-42.6-296.8 36.7A244.42 244.42 0 00419 432l1.8 6.7-283.5 283.4c-6.2 6.2-6.2 16.4 0 22.6l141.4 141.4c6.2 6.2 16.4 6.2 22.6 0l283.3-283.3 6.7 1.8c83.7 22.3 173.6-.9 236-63.3 79.4-79.3 94.1-201.6 38-296.6z"}}]},name:"tool",theme:"filled"};const be=he;var ge={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"};const ve=ge;function j(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),n.forEach(function(o){ye(a,o,t[o])})}return a}function ye(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}var $=function(e,t){var n=j({},e,t.attrs);return s(D,j({},n,{icon:be}),null)};$.displayName="ToolFilled";$.inheritAttrs=!1;const we=$;function F(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),n.forEach(function(o){xe(a,o,t[o])})}return a}function xe(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}var A=function(e,t){var n=F({},e,t.attrs);return s(D,F({},n,{icon:ve}),null)};A.displayName="WarningOutlined";A.inheritAttrs=!1;const Oe=A,ke={class:"sidebar"},Se={class:"section-name"},Ie=["onClick"],$e={class:"item-name"},Ae={key:0,class:"tag soon"},Pe={key:1,class:"tag beta"},Be={key:2,class:"tag cloud"},Ce=I({__name:"Sidebar",setup(a){var _;const e=G(),t=U(),n=k((_=t.name)!=null?_:"forms"),o=N(()=>[{name:"Runtime",items:[{name:"Forms",icon:K,path:"forms"},{name:"Hooks",icon:ee,path:"hooks"},{name:"Jobs",icon:te,path:"jobs",cloud:!0},{name:"Dashes",icon:ae,path:"dashes",beta:!0}]},{name:"Settings",items:[{name:"Style",icon:ne,path:"style"},{name:"Sidebar",icon:se,path:"sidebar"},{name:"Packages",icon:re,path:"requirements"}]}]),x=m=>{m.unavailable||(e.push(m.path),n.value=m.path)};return(m,B)=>(l(),p("div",ke,[(l(!0),p(v,null,y(o.value,c=>(l(),p("div",{key:c.name,class:"section"},[g("span",Se,w(c.name),1),(l(!0),p(v,null,y(c.items,r=>(l(),p("div",{key:r.name,role:"button",class:C(["item",{active:n.value===r.path,disabled:r.unavailable||c.cloud}]),tabindex:"0",onClick:f=>x(r)},[s(T,{class:C(["icon",{disabled:r.unavailable,active:n.value===r.path}]),path:r.icon,width:"20",height:"20"},null,8,["class","path"]),g("span",$e,w(r.name),1),r.unavailable?(l(),p("span",Ae,"SOON")):h("",!0),r.beta?(l(),p("span",Pe,"BETA")):h("",!0),r.cloud?(l(),p("span",Be,"CLOUD")):h("",!0),r.warning?(l(),b(le,{key:3,class:"warning",text:r.warning,fixed:!0,top:18,left:18},{default:i(()=>[s(T,{path:d(oe),fill:"#D35249",width:"20",height:"20"},null,8,["path"])]),_:2},1032,["text"])):h("",!0)],10,Ie))),128))]))),128))]))}});const Te=W(Ce,[["__scopeId","data-v-a17c56d8"]]);const Le={},E=a=>(q("data-v-81cd596e"),a=a(),J(),a),je={class:"logo"},Fe=E(()=>g("img",{src:ie,alt:"Abstra cloud logo"},null,-1)),De=E(()=>g("span",null," Abstra ",-1)),Ne=[Fe,De];function We(a,e){return l(),p("div",je,Ne)}const ze=W(Le,[["render",We],["__scopeId","data-v-81cd596e"]]);class Ee{async check(){return(await fetch("/_editor/api/linters/check")).json()}async fix(e,t){if(!(await fetch(`/_editor/api/linters/fix/${e}/${t}`,{method:"POST"})).ok)throw new Error("Failed to fix")}}const V=new Ee;class Ve{constructor(e,t){u(this,"name");u(this,"label");u(this,"ruleName");this.name=e.name,this.label=e.label,this.ruleName=t}async fix(){await V.fix(this.ruleName,this.name)}}class Me{constructor(e,t){u(this,"label");u(this,"fixes");u(this,"rule");this.label=e.label,this.rule=t,this.fixes=e.fixes.map(n=>new Ve(n,t.name))}}class P{constructor(e){u(this,"name");u(this,"label");u(this,"type");u(this,"issues");u(this,"valid");this.name=e.name,this.label=e.label,this.type=e.type,this.issues=e.issues.map(t=>new Me(t,this)),this.valid=e.valid}static async check(){return(await V.check()).map(t=>new P(t))}}const He=I({__name:"Linter",setup(a){const{result:e,refetch:t}=ue(()=>P.check()),n=N(()=>{var c,r;return(r=(c=e.value)==null?void 0:c.flatMap(f=>f.issues))!=null?r:[]}),o=k(!1);async function x(c){o.value=!0;try{await c.fix(),t()}finally{o.value=!1}}const _=k(!1);function m(){setTimeout(async()=>{await t(),_.value&&m()},1e3)}Q(()=>{_.value=!0,m()}),X(()=>{_.value=!1});function B(c){return c.type==="bug"?"warning":c.type==="security"?"error":"info"}return(c,r)=>n.value.length>0?(l(),b(d(Y),{key:0},{content:i(()=>[s(d(L),{direction:"vertical"},{default:i(()=>[(l(!0),p(v,null,y(n.value,(f,M)=>(l(),b(d(de),{key:M+f.rule.name,type:B(f.rule),style:{width:"400px"},message:f.rule.label},{description:i(()=>[s(d(L),{direction:"vertical"},{default:i(()=>[g("div",null,w(f.label),1),(l(!0),p(v,null,y(f.fixes,O=>(l(),b(d(S),{key:O.name,loading:o.value,disabled:o.value,onClick:Re=>x(O)},{icon:i(()=>[s(d(we))]),default:i(()=>[z(" "+w(O.label),1)]),_:2},1032,["loading","disabled","onClick"]))),128))]),_:2},1024)]),_:2},1032,["type","message"]))),128))]),_:1})]),default:i(()=>[s(d(pe),{count:n.value.length},{default:i(()=>[s(d(S),null,{default:i(()=>[s(d(Oe))]),_:1})]),_:1},8,["count"])]),_:1})):h("",!0)}}),pt=I({__name:"Workspace",setup(a){return(e,t)=>{const n=Z("router-view");return l(),b(me,null,{navbar:i(()=>[s(d(_e),{style:{padding:"5px 10px"}},{title:i(()=>[s(ze)]),extra:i(()=>[s(He),s(d(S),{type:"primary",href:"/_editor/workflow"},{default:i(()=>[z("Workflow editor")]),_:1}),s(fe),s(ce)]),_:1})]),sidebar:i(()=>[s(Te,{class:"sidebar"})]),content:i(()=>[s(n)]),_:1})}}});export{pt as default};
//# sourceMappingURL=Workspace.fbeac0ee.js.map
