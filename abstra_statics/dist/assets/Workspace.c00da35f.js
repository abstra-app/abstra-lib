var R=Object.defineProperty;var G=(a,e,t)=>e in a?R(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var c=(a,e,t)=>(G(a,typeof e!="symbol"?e+"":e,t),t);import{f as r,ez as W,d as P,eA as U,eB as q,r as I,G as $,b as o,eu as d,b8 as w,eC as x,e as v,eD as O,ey as L,I as j,ew as b,c as g,w as l,u,t as z,eE as J,eF as Q,o as X,K as Y,cK as F,b$ as A,aA as E,cG as Z,a as K}from"./outputWidgets.acb147ed.js";import{f as ee,h as te,j as ae,d as ne,c as se,m as re,p as oe,w as le}from"./icons.85d31212.js";import{T as ie}from"./Tooltip.37b7ea52.js";import{_ as ce}from"./logo.084e5d7c.js";import{L as ue}from"./LoginBlock.8de49c70.js";import{a as de}from"./asyncComputed.95a36516.js";import{A as pe}from"./index.1813b5d3.js";import{B as fe}from"./index.6e214607.js";import{_ as me}from"./DocsButton.vue_vue_type_script_setup_true_lang.619d9307.js";import{B as _e}from"./BaseLayout.4d4a7a62.js";import{c as he}from"./index.020fc54c.js";import"./workspaces.c83aff89.js";import"./activeRecord.bc23ce79.js";import"./pubsub.99f97766.js";import"./url.f0c967a6.js";import"./popupNotifcation.54f93a4f.js";import"./index.71ad1466.js";import"./index.c1379052.js";import"./transButton.cef1faca.js";import"./isNumeric.75337b1e.js";(function(){try{var a=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[e]="67e4a443-f277-4ff3-9078-400f04096039",a._sentryDebugIdIdentifier="sentry-dbid-67e4a443-f277-4ff3-9078-400f04096039")}catch{}})();var be={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M865.3 244.7c-.3-.3-61.1 59.8-182.1 180.6l-84.9-84.9 180.9-180.9c-95.2-57.3-217.5-42.6-296.8 36.7A244.42 244.42 0 00419 432l1.8 6.7-283.5 283.4c-6.2 6.2-6.2 16.4 0 22.6l141.4 141.4c6.2 6.2 16.4 6.2 22.6 0l283.3-283.3 6.7 1.8c83.7 22.3 173.6-.9 236-63.3 79.4-79.3 94.1-201.6 38-296.6z"}}]},name:"tool",theme:"filled"};const ge=be;var ve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"};const ye=ve;function D(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},s=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),s.forEach(function(i){we(a,i,t[i])})}return a}function we(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}var B=function(e,t){var s=D({},e,t.attrs);return r(W,D({},s,{icon:ge}),null)};B.displayName="ToolFilled";B.inheritAttrs=!1;const xe=B;function N(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},s=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),s.forEach(function(i){Oe(a,i,t[i])})}return a}function Oe(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}var C=function(e,t){var s=N({},e,t.attrs);return r(W,N({},s,{icon:ye}),null)};C.displayName="WarningOutlined";C.inheritAttrs=!1;const ke=C,Se={class:"sidebar"},Ie={class:"section-name"},$e=["onClick"],Ae={class:"item-name"},Pe={key:0,class:"tag soon"},Be={key:1,class:"tag beta"},Ce={key:2,class:"tag cloud"},Te=P({__name:"Sidebar",setup(a){var y;const e=U(),t=q(),s=I((y=t.name)!=null?y:"forms"),i=$(()=>[{name:"Runtime",items:[{name:"Forms",icon:ee,path:"forms"},{name:"Hooks",icon:te,path:"hooks"},{name:"Jobs",icon:ae,path:"jobs",cloud:!0},{name:"Dashes",icon:ne,path:"dashes",beta:!0}]},{name:"Settings",items:[{name:"Style",icon:se,path:"style"},{name:"Sidebar",icon:re,path:"sidebar"},{name:"Packages",icon:oe,path:"requirements"}]}]),_=f=>{f.unavailable||(e.push(f.path),s.value=f.path)};return(f,k)=>(o(),d("div",Se,[(o(!0),d(w,null,x(i.value,h=>(o(),d("div",{key:h.name,class:"section"},[v("span",Ie,O(h.name),1),(o(!0),d(w,null,x(h.items,n=>(o(),d("div",{key:n.name,role:"button",class:L(["item",{active:s.value===n.path,disabled:n.unavailable||h.cloud}]),tabindex:"0",onClick:m=>_(n)},[r(j,{class:L(["icon",{disabled:n.unavailable,active:s.value===n.path}]),path:n.icon,width:"20",height:"20"},null,8,["class","path"]),v("span",Ae,O(n.name),1),n.unavailable?(o(),d("span",Pe,"SOON")):b("",!0),n.beta?(o(),d("span",Be,"BETA")):b("",!0),n.cloud?(o(),d("span",Ce,"CLOUD")):b("",!0),n.warning?(o(),g(ie,{key:3,class:"warning",text:n.warning,fixed:!0,top:18,left:18},{default:l(()=>[r(j,{path:u(le),fill:"#D35249",width:"20",height:"20"},null,8,["path"])]),_:2},1032,["text"])):b("",!0)],10,$e))),128))]))),128))]))}});const Le=z(Te,[["__scopeId","data-v-a17c56d8"]]);const je={},V=a=>(J("data-v-81cd596e"),a=a(),Q(),a),Fe={class:"logo"},De=V(()=>v("img",{src:ce,alt:"Abstra cloud logo"},null,-1)),Ne=V(()=>v("span",null," Abstra ",-1)),We=[De,Ne];function ze(a,e){return o(),d("div",Fe,We)}const Ee=z(je,[["render",ze],["__scopeId","data-v-81cd596e"]]);class Ve{async check(){return(await fetch("/_editor/api/linters/check")).json()}async fix(e,t){if(!(await fetch(`/_editor/api/linters/fix/${e}/${t}`,{method:"POST"})).ok)throw new Error("Failed to fix")}}const M=new Ve;class Me{constructor(e,t){c(this,"name");c(this,"label");c(this,"ruleName");this.name=e.name,this.label=e.label,this.ruleName=t}async fix(){await M.fix(this.ruleName,this.name)}}class He{constructor(e,t){c(this,"label");c(this,"fixes");c(this,"rule");this.label=e.label,this.rule=t,this.fixes=e.fixes.map(s=>new Me(s,t.name))}}class T{constructor(e){c(this,"name");c(this,"label");c(this,"type");c(this,"issues");c(this,"valid");this.name=e.name,this.label=e.label,this.type=e.type,this.issues=e.issues.map(t=>new He(t,this)),this.valid=e.valid}static async check(){return(await M.check()).map(t=>new T(t))}}const Re=P({__name:"Linter",setup(a){const{result:e,refetch:t}=de(()=>T.check()),s=$(()=>{var n,m;return(m=(n=e.value)==null?void 0:n.filter(p=>!p.valid))!=null?m:[]}),i=$(()=>{var n,m;return(m=(n=e.value)==null?void 0:n.flatMap(p=>p.issues))!=null?m:[]}),_=I(!1);async function y(n){_.value=!0;try{await n.fix(),t()}finally{_.value=!1}}const f=I(!1);function k(){setTimeout(async()=>{await t(),f.value&&k()},1e3)}X(()=>{f.value=!0,k()}),Y(()=>{f.value=!1});function h(n){return n.type==="bug"?"warning":n.type==="security"?"error":"info"}return(n,m)=>s.value.length>0?(o(),g(u(Z),{key:0},{content:l(()=>[r(u(F),{direction:"vertical"},{default:l(()=>[(o(!0),d(w,null,x(i.value,(p,H)=>(o(),g(u(pe),{key:H+p.rule.name,type:h(p.rule),style:{width:"400px"},message:p.rule.label},{description:l(()=>[r(u(F),{direction:"vertical"},{default:l(()=>[v("div",null,O(p.label),1),(o(!0),d(w,null,x(p.fixes,S=>(o(),g(u(A),{key:S.name,loading:_.value,disabled:_.value,onClick:Ge=>y(S)},{icon:l(()=>[r(u(xe))]),default:l(()=>[E(" "+O(S.label),1)]),_:2},1032,["loading","disabled","onClick"]))),128))]),_:2},1024)]),_:2},1032,["type","message"]))),128))]),_:1})]),default:l(()=>[r(u(fe),{count:i.value.length},{default:l(()=>[r(u(A),null,{default:l(()=>[r(u(ke))]),_:1})]),_:1},8,["count"])]),_:1})):b("",!0)}}),ft=P({__name:"Workspace",setup(a){return(e,t)=>{const s=K("router-view");return o(),g(_e,null,{navbar:l(()=>[r(u(he),{style:{padding:"5px 10px"}},{title:l(()=>[r(Ee)]),extra:l(()=>[r(Re),r(u(A),{type:"primary",href:"/_editor/workflow"},{default:l(()=>[E("Workflow editor")]),_:1}),r(me),r(ue)]),_:1})]),sidebar:l(()=>[r(Le,{class:"sidebar"})]),content:l(()=>[r(s)]),_:1})}}});export{ft as default};
//# sourceMappingURL=Workspace.c00da35f.js.map
