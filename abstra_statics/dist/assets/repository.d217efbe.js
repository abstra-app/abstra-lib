import{d as M,X as D,H as O,b as r,eu as h,dl as pe,ew as R,ez as ge,e as _,f as c,eH as X,eQ as Me,r as Y,F as xe,w as i,aC as U,eC as Z,eE as L,u as t,v as B,c as g,aq as v,cL as je,cD as z,bf as $e,eJ as he,eD as ee,aG as be,cl as Se,eF as De,eG as ze,eR as Fe,bF as W,eA as Ve,I as Te,o as Ue,K as Ze,ad as Ne,dj as qe,cC as Be}from"./outputWidgets.e9677800.js";import{a as ye}from"./asyncComputed.37b7af98.js";import"./workspaces.490451ae.js";import{S as Ke}from"./scripts.3b9bc494.js";import"./envVars.5ab5fff0.js";import{A as He,s as te}from"./api.7154604a.js";import{z as e}from"./index.cf4c23b9.js";import{A as I}from"./index.42279d35.js";import{t as We}from"./ant-design.dbbf4726.js";import{A as T}from"./Text.fd9e90fd.js";import"./index.57a332d5.js";import{A as J}from"./index.1a0bd015.js";import{f as Je}from"./index.dc1b9ab1.js";import{A as ce}from"./Paragraph.394702f6.js";import{A as H}from"./Title.c954a24a.js";import"./index.bab2e237.js";import{T as Ge,A as Qe}from"./Timeline.32695c69.js";import{A as Ae,C as fe}from"./CollapsePanel.f1789fc3.js";import{A as Xe}from"./Link.29d21673.js";import{A as Ye}from"./index.64d9fbff.js";import{A as et}from"./index.8ed925b7.js";import{E as tt}from"./ExpandOutlined.5f7515a2.js";import{C as at}from"./Card.32e01a00.js";import{d as nt}from"./vuedraggable.umd.6e43c95f.js";import"./index.a61fac50.js";import{F as ot,A as st}from"./Form.9737d51d.js";(function(){try{var o=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},a=new Error().stack;a&&(o._sentryDebugIds=o._sentryDebugIds||{},o._sentryDebugIds[a]="238e5a1e-3f7f-4973-b0e4-be72d8bb7006",o._sentryDebugIdIdentifier="sentry-dbid-238e5a1e-3f7f-4973-b0e4-be72d8bb7006")}catch{}})();var it={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM641.7 520.8L442.3 677.6c-7.4 5.8-18.3.6-18.3-8.8V355.3c0-9.4 10.9-14.7 18.3-8.8l199.4 156.7a11.2 11.2 0 010 17.6z"}}]},name:"play-square",theme:"filled"};const rt=it;var lt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"};const ct=lt,mt=["width","height","fill","transform"],ut={key:0},dt=_("path",{d:"M228,64a36,36,0,1,0-48,33.94V104a12,12,0,0,1-12,12H88a12,12,0,0,1-12-12V97.94a36,36,0,1,0-24,0V104a36,36,0,0,0,36,36h28v18.06a36,36,0,1,0,24,0V140h28a36,36,0,0,0,36-36V97.94A36.07,36.07,0,0,0,228,64ZM64,52A12,12,0,1,1,52,64,12,12,0,0,1,64,52Zm64,152a12,12,0,1,1,12-12A12,12,0,0,1,128,204ZM192,76a12,12,0,1,1,12-12A12,12,0,0,1,192,76Z"},null,-1),pt=[dt],gt={key:1},ht=_("path",{d:"M88,64A24,24,0,1,1,64,40,24,24,0,0,1,88,64ZM192,40a24,24,0,1,0,24,24A24,24,0,0,0,192,40Z",opacity:"0.2"},null,-1),bt=_("path",{d:"M224,64a32,32,0,1,0-40,31v9a16,16,0,0,1-16,16H88a16,16,0,0,1-16-16V95a32,32,0,1,0-16,0v9a32,32,0,0,0,32,32h32v25a32,32,0,1,0,16,0V136h32a32,32,0,0,0,32-32V95A32.06,32.06,0,0,0,224,64ZM48,64A16,16,0,1,1,64,80,16,16,0,0,1,48,64Zm96,128a16,16,0,1,1-16-16A16,16,0,0,1,144,192ZM192,80a16,16,0,1,1,16-16A16,16,0,0,1,192,80Z"},null,-1),St=[ht,bt],yt={key:2},At=_("path",{d:"M224,64a32,32,0,1,0-40,31v9a16,16,0,0,1-16,16H88a16,16,0,0,1-16-16V95a32,32,0,1,0-16,0v9a32,32,0,0,0,32,32h32v25a32,32,0,1,0,16,0V136h32a32,32,0,0,0,32-32V95A32.06,32.06,0,0,0,224,64ZM144,192a16,16,0,1,1-16-16A16,16,0,0,1,144,192Z"},null,-1),ft=[At],Ct={key:3},vt=_("path",{d:"M222,64a30,30,0,1,0-36,29.4V104a18,18,0,0,1-18,18H88a18,18,0,0,1-18-18V93.4a30,30,0,1,0-12,0V104a30,30,0,0,0,30,30h34v28.6a30,30,0,1,0,12,0V134h34a30,30,0,0,0,30-30V93.4A30.05,30.05,0,0,0,222,64ZM46,64A18,18,0,1,1,64,82,18,18,0,0,1,46,64ZM146,192a18,18,0,1,1-18-18A18,18,0,0,1,146,192ZM192,82a18,18,0,1,1,18-18A18,18,0,0,1,192,82Z"},null,-1),_t=[vt],Rt={key:4},Lt=_("path",{d:"M224,64a32,32,0,1,0-40,31v9a16,16,0,0,1-16,16H88a16,16,0,0,1-16-16V95a32,32,0,1,0-16,0v9a32,32,0,0,0,32,32h32v25a32,32,0,1,0,16,0V136h32a32,32,0,0,0,32-32V95A32.06,32.06,0,0,0,224,64ZM48,64A16,16,0,1,1,64,80,16,16,0,0,1,48,64Zm96,128a16,16,0,1,1-16-16A16,16,0,0,1,144,192ZM192,80a16,16,0,1,1,16-16A16,16,0,0,1,192,80Z"},null,-1),Pt=[Lt],wt={key:5},Et=_("path",{d:"M220,64a28,28,0,1,0-32,27.71V104a20,20,0,0,1-20,20H88a20,20,0,0,1-20-20V91.71a28,28,0,1,0-8,0V104a28,28,0,0,0,28,28h36v32.29a28,28,0,1,0,8,0V132h36a28,28,0,0,0,28-28V91.71A28,28,0,0,0,220,64ZM44,64A20,20,0,1,1,64,84,20,20,0,0,1,44,64ZM148,192a20,20,0,1,1-20-20A20,20,0,0,1,148,192ZM192,84a20,20,0,1,1,20-20A20,20,0,0,1,192,84Z"},null,-1),Ot=[Et],kt={name:"PhGitFork"},It=M({...kt,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(o){const a=o,s=D("weight","regular"),l=D("size","1em"),n=D("color","currentColor"),m=D("mirrored",!1),u=O(()=>{var d;return(d=a.weight)!=null?d:s}),p=O(()=>{var d;return(d=a.size)!=null?d:l}),f=O(()=>{var d;return(d=a.color)!=null?d:n}),A=O(()=>a.mirrored!==void 0?a.mirrored?"scale(-1, 1)":void 0:m?"scale(-1, 1)":void 0);return(d,x)=>(r(),h("svg",ge({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:p.value,height:p.value,fill:f.value,transform:A.value},d.$attrs),[pe(d.$slots,"default"),u.value==="bold"?(r(),h("g",ut,pt)):u.value==="duotone"?(r(),h("g",gt,St)):u.value==="fill"?(r(),h("g",yt,ft)):u.value==="light"?(r(),h("g",Ct,_t)):u.value==="regular"?(r(),h("g",Rt,Pt)):u.value==="thin"?(r(),h("g",wt,Ot)):R("",!0)],16,mt))}}),Mt=["width","height","fill","transform"],xt={key:0},jt=_("path",{d:"M144,180a16,16,0,1,1-16-16A16,16,0,0,1,144,180Zm92-52A108,108,0,1,1,128,20,108.12,108.12,0,0,1,236,128Zm-24,0a84,84,0,1,0-84,84A84.09,84.09,0,0,0,212,128ZM128,64c-24.26,0-44,17.94-44,40v4a12,12,0,0,0,24,0v-4c0-8.82,9-16,20-16s20,7.18,20,16-9,16-20,16a12,12,0,0,0-12,12v8a12,12,0,0,0,23.73,2.56C158.31,137.88,172,122.37,172,104,172,81.94,152.26,64,128,64Z"},null,-1),$t=[jt],Dt={key:1},zt=_("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"},null,-1),Ft=_("path",{d:"M140,180a12,12,0,1,1-12-12A12,12,0,0,1,140,180ZM128,72c-22.06,0-40,16.15-40,36v4a8,8,0,0,0,16,0v-4c0-11,10.77-20,24-20s24,9,24,20-10.77,20-24,20a8,8,0,0,0-8,8v8a8,8,0,0,0,16,0v-.72c18.24-3.35,32-17.9,32-35.28C168,88.15,150.06,72,128,72Zm104,56A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"},null,-1),Vt=[zt,Ft],Tt={key:2},Ut=_("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,168a12,12,0,1,1,12-12A12,12,0,0,1,128,192Zm8-48.72V144a8,8,0,0,1-16,0v-8a8,8,0,0,1,8-8c13.23,0,24-9,24-20s-10.77-20-24-20-24,9-24,20v4a8,8,0,0,1-16,0v-4c0-19.85,17.94-36,40-36s40,16.15,40,36C168,125.38,154.24,139.93,136,143.28Z"},null,-1),Zt=[Ut],Nt={key:3},qt=_("path",{d:"M138,180a10,10,0,1,1-10-10A10,10,0,0,1,138,180ZM128,74c-21,0-38,15.25-38,34v4a6,6,0,0,0,12,0v-4c0-12.13,11.66-22,26-22s26,9.87,26,22-11.66,22-26,22a6,6,0,0,0-6,6v8a6,6,0,0,0,12,0v-2.42c18.11-2.58,32-16.66,32-33.58C166,89.25,149,74,128,74Zm102,54A102,102,0,1,1,128,26,102.12,102.12,0,0,1,230,128Zm-12,0a90,90,0,1,0-90,90A90.1,90.1,0,0,0,218,128Z"},null,-1),Bt=[qt],Kt={key:4},Ht=_("path",{d:"M140,180a12,12,0,1,1-12-12A12,12,0,0,1,140,180ZM128,72c-22.06,0-40,16.15-40,36v4a8,8,0,0,0,16,0v-4c0-11,10.77-20,24-20s24,9,24,20-10.77,20-24,20a8,8,0,0,0-8,8v8a8,8,0,0,0,16,0v-.72c18.24-3.35,32-17.9,32-35.28C168,88.15,150.06,72,128,72Zm104,56A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"},null,-1),Wt=[Ht],Jt={key:5},Gt=_("path",{d:"M136,180a8,8,0,1,1-8-8A8,8,0,0,1,136,180ZM128,76c-19.85,0-36,14.36-36,32v4a4,4,0,0,0,8,0v-4c0-13.23,12.56-24,28-24s28,10.77,28,24-12.56,24-28,24a4,4,0,0,0-4,4v8a4,4,0,0,0,8,0v-4.2c18-1.77,32-15.36,32-31.8C164,90.36,147.85,76,128,76Zm100,52A100,100,0,1,1,128,28,100.11,100.11,0,0,1,228,128Zm-8,0a92,92,0,1,0-92,92A92.1,92.1,0,0,0,220,128Z"},null,-1),Qt=[Gt],Xt={name:"PhQuestion"},Yt=M({...Xt,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(o){const a=o,s=D("weight","regular"),l=D("size","1em"),n=D("color","currentColor"),m=D("mirrored",!1),u=O(()=>{var d;return(d=a.weight)!=null?d:s}),p=O(()=>{var d;return(d=a.size)!=null?d:l}),f=O(()=>{var d;return(d=a.color)!=null?d:n}),A=O(()=>a.mirrored!==void 0?a.mirrored?"scale(-1, 1)":void 0:m?"scale(-1, 1)":void 0);return(d,x)=>(r(),h("svg",ge({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:p.value,height:p.value,fill:f.value,transform:A.value},d.$attrs),[pe(d.$slots,"default"),u.value==="bold"?(r(),h("g",xt,$t)):u.value==="duotone"?(r(),h("g",Dt,Vt)):u.value==="fill"?(r(),h("g",Tt,Zt)):u.value==="light"?(r(),h("g",Nt,Bt)):u.value==="regular"?(r(),h("g",Kt,Wt)):u.value==="thin"?(r(),h("g",Jt,Qt)):R("",!0)],16,Mt))}});function me(o){for(var a=1;a<arguments.length;a++){var s=arguments[a]!=null?Object(arguments[a]):{},l=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(s).filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable}))),l.forEach(function(n){ea(o,n,s[n])})}return o}function ea(o,a,s){return a in o?Object.defineProperty(o,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[a]=s,o}var ae=function(a,s){var l=me({},a,s.attrs);return c(X,me({},l,{icon:Me}),null)};ae.displayName="EyeInvisibleOutlined";ae.inheritAttrs=!1;const ta=ae;function ue(o){for(var a=1;a<arguments.length;a++){var s=arguments[a]!=null?Object(arguments[a]):{},l=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(s).filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable}))),l.forEach(function(n){aa(o,n,s[n])})}return o}function aa(o,a,s){return a in o?Object.defineProperty(o,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[a]=s,o}var ne=function(a,s){var l=ue({},a,s.attrs);return c(X,ue({},l,{icon:rt}),null)};ne.displayName="PlaySquareFilled";ne.inheritAttrs=!1;const na=ne;function de(o){for(var a=1;a<arguments.length;a++){var s=arguments[a]!=null?Object(arguments[a]):{},l=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(s).filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable}))),l.forEach(function(n){oa(o,n,s[n])})}return o}function oa(o,a,s){return a in o?Object.defineProperty(o,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[a]=s,o}var oe=function(a,s){var l=de({},a,s.attrs);return c(X,de({},l,{icon:ct}),null)};oe.displayName="SyncOutlined";oe.inheritAttrs=!1;const sa=oe;function ia(){const o=Y({state:"closed"});function a(){o.value={state:"closed"}}function s(){o.value={state:"visualizations"}}function l(m,u){o.value={state:"stage-run",stageRun:u}}const n=O(()=>"stageRun"in o.value?o.value.stageRun:null);return{closeDrawer:a,openVisualizationEditor:s,inspectStageRun:l,drawerState:o,selectedStageRunForDrawer:n}}const V="kanban-selected-stage-ids",N=10,ra=({kanbanRepository:o,storage:a,filterFactory:s,router:l})=>{const n=xe([]),m=ye(async()=>{try{const b=await o.getData({selection:n.value,filter:s()}),S=await a.get(V)||[];for(const y of b.not_found_stages)a.set(V,S.filter(C=>C!==y)),n.value=n.value.filter(C=>C.stage_id!==y);return b}catch{return n.value=[],await a.set(V,[]),{columns:[],next_stage_options:[]}}});function u(b){const S=b.selected_stage.id,y=n.value.find(C=>C.stage_id===S);return y!=null&&y.limit?y.limit<b.total_count:!1}async function p(b){var y;const S=n.value.find(C=>C.stage_id===b.selected_stage.id);S&&(S.limit=((y=S.limit)!=null?y:0)+N,await m.refetch())}async function f(b){const S=n.value.find(y=>y.stage_id===b);S&&S.limit&&S.limit>N&&(S.limit-=N,await m.refetch())}async function A(){const b=await a.get(V)||[];n.value=b.map(S=>({stage_id:S,limit:N,offset:0}))}async function d(b,S){b?n.value=[...n.value.slice(0,S),{stage_id:b.id,limit:N,offset:0},...n.value.slice(S+1)]:n.value=[...n.value.slice(0,S),...n.value.slice(S+1)],await a.set(V,n.value.map(y=>y.stage_id)),await m.refetch()}async function x(b){await d(b,n.value.length)}async function P(b){const S=n.value[b.moved.oldIndex];d(null,b.moved.oldIndex),n.value=[...n.value.slice(0,b.moved.newIndex),S,...n.value.slice(b.moved.newIndex)],await a.set(V,n.value.map(y=>y.stage_id)),await m.refetch()}let w=null;return{kanbanAsyncComputed:m,selection:n,increasePagination:p,hasPagination:u,seeLess:f,setStage:d,addStage:x,cardActionHandler:async(b,S)=>{const y=b.selected_stage,C=S.id;if(y.type==="script"){const k=await Ke.get(y.id);if(!k)return;await k.run(C)}if(y.type==="form"){const k=l.resolve({path:`/${y.path}`,query:C?{[He]:C}:{}});window.open(k.href,C)}},setup:async()=>{await A(),m.refetch(),w=setInterval(()=>{m.refetch()},1e3)},tearDown:()=>{w&&clearInterval(w)},reorderStages:P}},la=e.boolean(),ca=e.boolean(),ma=e.boolean(),ua=e.boolean();e.object({PROJECT_LIVE:la.optional(),ALLOW_RELEASE:ca.optional(),CONNECTORS_CONSOLE:ma.optional(),DUPLICATE_PROJECTS:ua.optional()});const da=e.string(),pa=e.string(),ga=e.string(),ha=e.string(),ba=e.string();e.object({plan:da.optional(),expires:pa.optional(),message:ga.optional(),messageLink:ha.optional(),messageCTA:ba.optional()});const Sa=e.string(),Ce=e.string(),se=e.string(),ya=e.string(),Aa=e.string(),fa=e.object({id:Sa,name:Ce,description:se.optional(),projectId:ya,createdAt:Aa}),Ca=e.string(),va=e.string(),_a=e.string(),Ra=e.string(),La=e.string().regex(new RegExp("^[0-9]+m$")),Pa=e.string().regex(new RegExp("^[0-9]+m$")),wa=e.string().regex(new RegExp("^[0-9]+Mi$")),Ea=e.string().regex(new RegExp("^[0-9]+Mi$")),Oa=e.string().regex(new RegExp("^[0-9]+$")),ka=e.string().regex(new RegExp("^[0-9]+$")),Ia=e.enum(["shared","clickbus","test"]),Ma=e.object({requestsCPU:La.optional(),limitsCPU:Pa.optional(),requestsMemory:wa.optional(),limitsMemory:Ea.optional(),minReplicas:Oa.optional(),timeoutSeconds:ka.optional(),workerType:Ia.optional()});e.object({id:Ca,name:va,subdomain:_a,organizationId:Ra,deploymentResources:Ma.optional()});const xa=e.string(),ja=e.string(),ve=e.array(ja),_e=e.string(),$a=e.string();e.object({id:xa,emailPatterns:ve,projectId:_e,createdAt:$a});const Da=e.string().regex(new RegExp("^[0-9]+m$")),za=e.string().regex(new RegExp("^[0-9]+m$")),Fa=e.string().regex(new RegExp("^[0-9]+Mi$")),Va=e.string().regex(new RegExp("^[0-9]+Mi$")),Ta=e.string().regex(new RegExp("^[0-9]+$")),Ua=e.string().regex(new RegExp("^[0-9]+$")),Za=e.enum(["shared","clickbus","test"]);e.object({requestsCPU:Da.optional(),limitsCPU:za.optional(),requestsMemory:Fa.optional(),limitsMemory:Va.optional(),minReplicas:Ta.optional(),timeoutSeconds:Ua.optional(),workerType:Za.optional()});const Na=e.string(),G=e.string().email(),qa=e.string(),ie=e.array(qa),Ba=e.string(),Ka=e.string(),Ha=e.object({id:Na,email:G,roles:ie,projectId:Ba,createdAt:Ka}),Re=e.string(),Le=e.string(),Wa=e.boolean(),Ja=e.boolean(),Ga=e.boolean(),Qa=e.boolean(),Pe=e.object({PROJECT_LIVE:Wa,ALLOW_RELEASE:Ja,CONNECTORS_CONSOLE:Ga,DUPLICATE_PROJECTS:Qa}),Xa=e.string(),Ya=e.string(),en=e.string(),tn=e.string(),an=e.string(),we=e.object({plan:Xa.optional(),expires:Ya.optional(),message:en.optional(),messageLink:tn.optional(),messageCTA:an.optional()}),nn=e.string().regex(new RegExp("^[0-9]+m$")),on=e.string().regex(new RegExp("^[0-9]+m$")),sn=e.string().regex(new RegExp("^[0-9]+Mi$")),rn=e.string().regex(new RegExp("^[0-9]+Mi$")),ln=e.string().regex(new RegExp("^[0-9]+$")),cn=e.string().regex(new RegExp("^[0-9]+$")),mn=e.enum(["shared","clickbus","test"]),un=e.object({requestsCPU:nn.optional(),limitsCPU:on.optional(),requestsMemory:sn.optional(),limitsMemory:rn.optional(),minReplicas:ln.optional(),timeoutSeconds:cn.optional(),workerType:mn.optional()}),dn=e.string(),pn=e.array(dn),gn=e.object({whitelistPatterns:pn.optional()});e.object({id:Re,name:Le,featureFlags:Pe,billingMetadata:we,deploymentResources:un.optional(),membershipsMetadata:gn.optional()});const hn=e.string(),bn=e.array(hn);e.object({whitelistPatterns:bn.optional()});const Sn=Re,yn=Le,An=Pe,fn=we;e.object({id:Sn,name:yn,featureFlags:An,billingMetadata:fn});const Cn=se;e.object({description:Cn});const vn=e.number(),_n=e.number();e.object({offset:vn.optional(),limit:_n.optional()});const Rn=fa;e.array(Rn);const Ln=Ce,Pn=se;e.object({name:Ln,description:Pn.optional()});const wn=G,En=ie;e.object({email:wn.optional(),roles:En.optional()});const On=e.number(),kn=e.number();e.object({offset:On.optional(),limit:kn.optional()});const In=Ha;e.array(In);const Mn=G,xn=ie;e.object({email:Mn,roles:xn});const jn=ve;e.object({emailPatterns:jn});const $n=_e;e.object({projectId:$n});const Dn=e.boolean();e.object({shouldBeOnboarded:Dn.optional()});const zn=e.string(),Fn=e.string(),Vn=e.string(),Tn=e.string();e.object({name:zn.optional(),companyName:Fn.optional(),source:Vn.optional(),authorEmail:Tn.optional()});const Un=e.string(),Zn=e.record(e.any()),Nn=e.string(),qn=e.object({key:Un,value:Zn,type:Nn}),Bn=qn,Kn=e.array(Bn),Hn=e.string(),Wn=e.enum(["text","image","table","progress-bar"]),Jn=e.object({name:Hn,type:Wn}),Gn=e.string(),Qn=e.string(),Xn=e.record(e.any()),Ee=e.enum(["waiting","running","finished","failed","abandoned"]),Yn=["waiting","running","finished","failed","abandoned"],eo=e.string(),to=e.string(),ao=e.string(),no=e.string();e.object({id:Gn,stage:Qn,data:Xn,status:Ee,created_at:eo,updated_at:to,parent_id:ao.optional(),execution_id:no.optional()});const oo=e.string(),so=e.string(),io=e.string(),ro=e.string(),lo=Ee,co=Kn,mo=e.object({id:oo,created_at:so,updated_at:io.optional(),assignee:ro.optional(),status:lo,content:co}),uo=mo,po=e.array(uo),go=e.string(),ho=e.enum(["form","hook","job","script","iterator","condition"]),bo=e.string(),So=e.string(),yo=e.boolean(),Oe=e.object({id:go,type:ho,title:bo,path:So.optional(),can_be_started:yo}),Ao=Oe,fo=po,Co=Oe,ke=e.array(Co),vo=ke,_o=e.number(),Ro=e.object({selected_stage:Ao,stage_run_cards:fo,stages:vo,total_count:_o}),Lo=Ro,Po=e.array(Lo),wo=Po,Eo=ke,Oo=e.string(),ko=e.array(Oo);e.object({columns:wo,next_stage_options:Eo,not_found_stages:ko});const Io=Jn;e.array(Io);const Mo=e.string(),xo=e.string(),jo=e.literal("bug"),$o=e.string(),Do=e.string(),zo=e.string(),Fo=e.object({name:Do,label:zo}),Vo=Fo,To=e.array(Vo),Uo=e.object({label:$o,fixes:To}),Zo=Uo,No=e.array(Zo),qo=e.object({name:Mo,label:xo,type:jo,issues:No}),Bo=e.boolean();e.object({success:Bo});const Ko=qo;e.array(Ko);const Ho=e.string(),Wo=e.string(),Jo=e.object({key:Ho,value:Wo}),Go=Jo;e.array(Go);const Qo=G;e.object({email:Qo});function re(o){switch(o.status){case"waiting":return{color:"blue",text:"Waiting"};case"running":return{color:"processing",text:"Running"};case"finished":return{color:"success",text:"Success"};case"failed":return{color:"error",text:"Failed"};case"abandoned":return{color:"warning",text:"Abandoned"}}}const q="Show All",Xo=[q,...Yn];function Yo(){const o=Y(q);return{filterStatus:o,filterFactory:()=>o.value==q?{}:{status:o.value},labelOption:l=>l==q?q:re({status:l}).text}}const es={key:0},ts={key:1,class:"terminal"},as=M({__name:"ExecutionInspector",props:{logs:{}},setup(o){return(a,s)=>a.logs.length===0?(r(),h("span",es)):(r(),h("div",ts,[c(t(I),{vertical:""},{default:i(()=>[(r(!0),h(U,null,Z(a.logs,l=>(r(),h("pre",{key:l.executionId,class:"log-text"},L(l.payload.text),1))),128))]),_:1})]))}});const ns=B(as,[["__scopeId","data-v-4e71a195"]]),Q=M({__name:"StageRunData",props:{data:{}},setup(o){return(a,s)=>(r(),g(t(z),{direction:"vertical",style:{overflow:"hidden"}},{default:i(()=>[(r(!0),h(U,null,Z(a.data,l=>(r(),h("div",{key:l.key},[c(t(T),{strong:""},{default:i(()=>[v(L(l.key),1)]),_:2},1024),c(t(je),{"tree-data":t(We)(l.value),selectable:!1},null,8,["tree-data"])]))),128))]),_:1}))}}),os=o=>(De("data-v-74d7bfb4"),o=o(),ze(),o),ss={key:1},is={key:1},rs=os(()=>_("span",null,"[Deleted Stage]",-1)),ls=["onClick"],cs=M({__name:"StageRunInspector",props:{stageRun:{},kanbanRepository:{},stageRunRepository:{}},emits:["close"],setup(o,{emit:a}){const s=o;function l(p){return Object.entries(p).map(([f,A])=>({key:f,value:A,type:typeof A}))}const{result:n,loading:m}=ye(()=>{var p;return s.kanbanRepository.getLogs((p=s.stageRun)==null?void 0:p.id)}),u=(p,f)=>{var A;p.stopPropagation(),(A=s.stageRunRepository)==null||A.fork(f),a("close")};return(p,f)=>(r(),g(t(et),{open:"",title:"Thread details",size:"large",onClose:f[0]||(f[0]=A=>a("close"))},{extra:i(()=>[c(t(ce),null,{default:i(()=>[c(t(J),{style:{"font-weight":"600"}},{default:i(()=>{var A;return[v(L(t(re)({status:(A=p.stageRun)==null?void 0:A.status}).text),1)]}),_:1}),v(" "+L(t(Je)(new Date(p.stageRun.created_at),{addSuffix:!0})),1)]),_:1})]),default:i(()=>{var A,d,x;return[(A=p.stageRun)!=null&&A.assignee?(r(),g(t(ce),{key:0},{default:i(()=>{var P;return[v(" Assignee: "+L((P=p.stageRun)==null?void 0:P.assignee),1)]}),_:1})):R("",!0),((d=p.stageRun)==null?void 0:d.content)&&((x=p.stageRun)==null?void 0:x.content.length)>0?(r(),h("div",ss,[c(t(H),{level:4},{default:i(()=>[v("Current data")]),_:1}),c(Q,{data:p.stageRun.content},null,8,["data"])])):R("",!0),c(t(H),{level:4,style:{"margin-bottom":"30px"}},{default:i(()=>[v(" Timeline ")]),_:1}),t(m)?(r(),g(t($e),{key:2})):t(n)?(r(),g(t(Ge),{key:3},{default:i(()=>[(r(!0),h(U,null,Z(t(n),({stage:P,stage_run:w,logs:j})=>(r(),g(t(Qe),{key:w.id},{default:i(()=>[c(t(fe),{ghost:"","expand-icon-position":"end"},{default:i(()=>[c(t(Ae),{class:"panel"},he({header:i(()=>[P?(r(),g(t(I),{key:0,align:"center",gap:15},{default:i(()=>[(r(),g(ee(t(te)(P.type)))),j.length?(r(),h("span",is,L(P.title),1)):(r(),g(t(be),{key:0,placement:"right",title:"No logs"},{default:i(()=>[v(L(P.title),1)]),_:2},1024))]),_:2},1024)):(r(),g(t(I),{key:1,align:"center",gap:15},{default:i(()=>[c(t(Yt)),rs]),_:1}))]),default:i(()=>[l(w.data).length||j.length?(r(),g(t(I),{key:0,vertical:""},{default:i(()=>[l(w.data).length?(r(),g(t(I),{key:0,gap:0,vertical:""},{default:i(()=>[c(t(H),{level:5},{default:i(()=>[v(" Output data ")]),_:1}),c(Q,{data:l(w.data)},null,8,["data"])]),_:2},1024)):R("",!0),j.length?(r(),g(t(I),{key:1,vertical:"",gap:0},{default:i(()=>[c(t(Ye)),c(t(H),{level:5},{default:i(()=>[v(" Logs ")]),_:1}),c(ns,{logs:j},null,8,["logs"])]),_:2},1024)):R("",!0)]),_:2},1024)):(r(),g(t(Se),{key:1,description:"No logs"}))]),_:2},[p.stageRunRepository&&P?{name:"extra",fn:i(()=>[_("span",{onClick:K=>u(K,w.id)},[c(t(I),{gap:"small"},{default:i(()=>[c(t(It),{size:"22"}),c(t(Xe),null,{default:i(()=>[v("Fork")]),_:1})]),_:1})],8,ls)]),key:"0"}:void 0]),1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):R("",!0)]}),_:1}))}});const ms=B(cs,[["__scopeId","data-v-74d7bfb4"]]),us=M({__name:"Card",props:{stage:{},card:{}},emits:["inspect","action"],setup(o){const a=o,s=O(()=>re({status:a.card.status}).text),l=O(()=>Fe(new Date(String(a.card.updated_at))));return(n,m)=>{var u,p;return r(),g(t(at),{size:"small",style:{cursor:"pointer"},"head-style":{"border-bottom":((u=n.card.content)==null?void 0:u.length)>0?"":"none"},"body-style":{display:((p=n.card.content)==null?void 0:p.length)>0?"block":"none"}},he({title:i(()=>[c(t(J),null,{default:i(()=>[v(L(s.value)+" ",1),s.value==="Running"?(r(),g(t(sa),{key:0,spin:!0,style:{"margin-left":"4px"}})):R("",!0)]),_:1})]),default:i(()=>[c(t(z),{direction:"vertical",style:{"max-height":"300px",width:"100%",overflow:"hidden"},onClick:m[0]||(m[0]=f=>n.$emit("inspect"))},{default:i(()=>[c(Q,{data:n.card.content,disabled:!0},null,8,["data"]),n.card.assignee?(r(),g(t(J),{key:0},{default:i(()=>[v(L(n.card.assignee),1)]),_:1})):R("",!0)]),_:1})]),extra:i(()=>[c(t(I),{gap:"10"},{default:i(()=>[c(t(be),null,{title:i(()=>[v(L(n.card.updated_at),1)]),default:i(()=>[c(t(T),{type:"secondary",style:{"font-size":"12px"}},{default:i(()=>[v(L(l.value),1)]),_:1})]),_:1}),c(t(tt),{onClick:m[2]||(m[2]=f=>n.$emit("inspect"))})]),_:1})]),_:2},[n.card.status==="waiting"?{name:"actions",fn:i(()=>[c(t(W),{onClick:m[1]||(m[1]=f=>n.$emit("action"))},{default:i(()=>[c(t(na)),v(" Continue this thread ")]),_:1})]),key:"0"}:void 0]),1032,["head-style","body-style"])}}});class ds{constructor(a,s,l){this.router=a,this.column=s,this.kanbanRepository=l}get stage(){return this.column.selected_stage}get canStart(){return this.stage.can_be_started}get launchLink(){return!this.stage.can_be_started||this.stage.type!=="form"||!this.stage.path?null:this.router.resolve({path:`/${this.stage.path}`}).href}click(){if(this.launchLink)return window.open(this.launchLink,"_blank");if(this.stage.type==="job")return this.kanbanRepository.startJob(this.stage.id).catch(console.error)}}const ps=M({__name:"Column",props:{router:{},hasPagination:{type:Boolean},column:{},kanbanRepository:{}},emits:["increasePagination","cardAction","stageUpdate","cardInspection"],setup(o,{emit:a}){const s=o,l=O(()=>new ds(s.router,s.column,s.kanbanRepository));return(n,m)=>(r(),g(t(z),{direction:"vertical",class:"stage-column"},{default:i(()=>[c(t(z),{direction:"horizontal",style:{width:"100%","justify-content":"space-between"}},{default:i(()=>[c(t(I),{gap:"8",style:{"max-width":"200px","padding-left":"10px"}},{default:i(()=>[(r(),g(ee(t(te)(n.column.selected_stage.type)),{size:"20"})),c(t(T),{ellipsis:"",content:n.column.selected_stage.title},null,8,["content"])]),_:1}),c(t(z),null,{default:i(()=>[c(t(T),{type:"secondary",style:{"font-size":"small","margin-right":"2px"}},{default:i(()=>[v(L(n.column.total_count),1)]),_:1}),c(t(W),{type:"text",style:{padding:"4px"},onClick:m[0]||(m[0]=u=>a("stageUpdate",null))},{default:i(()=>[c(t(T),{type:"secondary",style:{"font-size":"small","margin-right":"2px"}},{default:i(()=>[c(t(ta))]),_:1})]),_:1})]),_:1})]),_:1}),c(t(z),{direction:"vertical",style:{width:"100%"}},{default:i(()=>[n.column.stage_run_cards.length===0?(r(),g(t(Se),{key:0})):R("",!0),(r(!0),h(U,null,Z(n.column.stage_run_cards,u=>(r(),g(us,{key:u.id,stage:n.column.selected_stage,card:u,onInspect:p=>a("cardInspection",u),onAction:p=>a("cardAction",u)},null,8,["stage","card","onInspect","onAction"]))),128)),n.hasPagination?(r(),g(t(W),{key:1,style:{width:"100%"},onClick:m[1]||(m[1]=u=>a("increasePagination"))},{default:i(()=>[v("See more")]),_:1})):R("",!0),l.value.canStart?(r(),g(t(W),{key:2,style:{width:"100%"},onClick:m[2]||(m[2]=()=>l.value.click())},{default:i(()=>[v(" Start new thread ")]),_:1})):R("",!0)]),_:1})]),_:1}))}});const gs=B(ps,[["__scopeId","data-v-e6e6b2a5"]]),hs=M({__name:"EmptyColumn",props:{stages:{}},emits:["stageUpdate"],setup(o,{emit:a}){const s=l=>{a("stageUpdate",l)};return(l,n)=>(r(),g(t(z),{direction:"vertical"},{default:i(()=>[(r(!0),h(U,null,Z(l.stages,m=>(r(),g(t(J),{key:m.id,class:"tag",onClick:u=>s(m)},{default:i(()=>[c(t(I),{gap:"8",style:{"max-width":"200px","justify-content":"center","align-items":"center"}},{default:i(()=>[(r(),g(ee(t(te)(m.type)))),c(t(T),{ellipsis:"",content:m.title},null,8,["content"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1}))}});const bs=B(hs,[["__scopeId","data-v-14065569"]]),Ss={style:{"padding-top":"20px"}},ys={class:"stages-container"},As={class:"stages-content"},fs=M({__name:"Kanban",props:{storage:{},kanbanRepository:{},stageRunRepository:{}},setup(o){const a=o,s=Ve(),{closeDrawer:l,inspectStageRun:n,drawerState:m,selectedStageRunForDrawer:u}=ia(),{filterFactory:p,filterStatus:f,labelOption:A}=Yo(),{kanbanAsyncComputed:d,setStage:x,addStage:P,setup:w,tearDown:j,cardActionHandler:K,increasePagination:le,hasPagination:b,reorderStages:S}=ra({kanbanRepository:a.kanbanRepository,storage:a.storage,filterFactory:p,router:s}),y=Y([]);return Te(()=>{var C;return(C=d.result.value)==null?void 0:C.columns},C=>{C!==void 0&&(y.value=C)}),Ue(w),Ze(j),(C,k)=>(r(),h("div",Ss,[c(t(I),{vertical:"",style:{height:"100%"}},{default:i(()=>[c(t(fe),{ghost:""},{default:i(()=>[c(t(Ae),{header:"Filters"},{default:i(()=>[c(t(ot),null,{default:i(()=>[c(t(st),{label:"Status"},{default:i(()=>[c(t(Ne),{value:t(f),"onUpdate:value":k[0]||(k[0]=$=>qe(f)?f.value=$:null),style:{width:"325px"}},{default:i(()=>[(r(!0),h(U,null,Z(t(Xo),$=>(r(),g(t(Be),{key:$,value:$},{default:i(()=>[v(L(t(A)($)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),_("div",ys,[_("div",As,[c(t(z),{align:"start"},{default:i(()=>{var $;return[c(t(nt),{modelValue:y.value,"onUpdate:modelValue":k[1]||(k[1]=E=>y.value=E),class:"draggable","item-key":E=>E.selected_stage.id,"ghost-class":"ghost",onStart:t(j),onEnd:t(w),onChange:t(S)},{item:i(({element:E,index:Ie})=>[(r(),g(t(gs),{key:E.selected_stage.id,column:E,router:t(s),"has-pagination":t(b)(E),"kanban-repository":a.kanbanRepository,class:"stages-content-column",onIncreasePagination:F=>t(le)(E),onCardInspection:F=>t(n)(E,F),onCardAction:F=>t(K)(E,F),onStageUpdate:F=>t(x)(F,Ie)},null,8,["column","router","has-pagination","kanban-repository","onIncreasePagination","onCardInspection","onCardAction","onStageUpdate"]))]),_:1},8,["modelValue","item-key","onStart","onEnd","onChange"]),c(t(bs),{stages:(($=t(d).result.value)==null?void 0:$.next_stage_options)||[],onStageUpdate:k[2]||(k[2]=E=>t(P)(E))},null,8,["stages"])]}),_:1})])])]),_:1}),t(m).state==="stage-run"&&t(u)?(r(),g(t(ms),{key:0,"kanban-repository":a.kanbanRepository,"stage-run":t(u),"stage-run-repository":a.stageRunRepository,onClose:t(l)},null,8,["kanban-repository","stage-run","stage-run-repository","onClose"])):R("",!0)]))}});const Hs=B(fs,[["__scopeId","data-v-e9bc25a1"]]);class Ws{constructor(a,s=localStorage){this.contextKey=a,this.storage=s}makeKey(a){return`${this.contextKey}:${a}`}async get(a){const s=this.storage.getItem(this.makeKey(a));return s?JSON.parse(s):null}async set(a,s){this.storage.setItem(this.makeKey(a),JSON.stringify(s))}}export{Hs as K,Ws as L};
//# sourceMappingURL=repository.d217efbe.js.map
