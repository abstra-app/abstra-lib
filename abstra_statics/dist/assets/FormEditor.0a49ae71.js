import{u as xe}from"./index.8ad251d2.js";import{f as a,eG as ie,d as P,r as _,H as U,b as v,c as b,w as o,ar as f,eD as Ee,u as e,bG as R,cA as M,ev as I,bz as E,aD as q,eE as de,eF as pe,e as $,v as ce,bA as K,eC as Oe,cE as Re,S as ee,a as Ue,ex as x,eA as $e,eB as Pe,aw as Fe,J as te,eL as De,bg as Ie}from"./outputWidgets.120abcec.js";import{B as Le}from"./BaseLayout.d8c7af02.js";import{F as Me,a as me,b as Ne,c as Be,d as qe,r as ae}from"./FormRunner.439660f0.js";import{R as Ve,S as je,a as We,L as Qe}from"./SourceCode.53234c68.js";import{a as ze}from"./asyncComputed.e26882e4.js";import{F as He}from"./forms.80eb6359.js";import{W as oe}from"./workspaces.d48ce1a1.js";import"./envVars.67a8c2f6.js";import{l as re,N as Ge}from"./NavbarControls.fd6662ee.js";import{_ as Je}from"./SaveButton.vue_vue_type_script_setup_true_lang.a344872d.js";import{S as Ye}from"./StageRunSelector.78a632b0.js";import{A as Xe}from"./index.803eef8e.js";import{A as D}from"./Title.2384966a.js";import{T as N}from"./Typography.e89833d8.js";import{A as T,F as V}from"./Form.65d5185b.js";import{A as ne}from"./index.d996b892.js";import{z as Ze,A as Ke,B as et}from"./icons.81fa3ed8.js";import{A as fe}from"./api.47b80f53.js";import{A as B}from"./index.983b1ccc.js";import{M as tt}from"./Modal.c436e1a8.js";import{A as at}from"./Link.6da17aa3.js";import{A as F,T as le}from"./TabPane.a2fe5be5.js";import"./Card.3f5ccb0b.js";import{c as ot}from"./index.40f074b8.js";import{A as rt}from"./index.a72a8d18.js";import{E as nt}from"./ExpandOutlined.82e577bf.js";import"./pubsub.a3533115.js";import"./url.a71238d7.js";import"./Passwordless.d0a0ad2e.js";import"./CircularLoading.dac6d252.js";import"./PlayerNavbar.1cb62301.js";import"./WidgetsFrame.2abbf4da.js";import"./Steps.522a4fa9.js";import"./uuid.c5306f30.js";import"./jobs.057112e7.js";import"./record.bba37786.js";import"./scripts.288fa7bb.js";import"./validations.e71b958a.js";import"./string.7505c905.js";import"./toggleHighContrast.a27b0744.js";import"./runnerData.0b2ffd49.js";import"./CloseCircleOutlined.0b5c92a1.js";import"./popupNotifcation.89e33f50.js";import"./Text.04b2aa2d.js";import"./Base.0deedccd.js";import"./DocsButton.vue_vue_type_script_setup_true_lang.a83146c1.js";import"./Paragraph.200bbb6d.js";import"./ant-design.5df1462b.js";import"./index.51d0c414.js";import"./index.94281765.js";import"./index.71876bcc.js";import"./hasIn.07231e5c.js";import"./index.cf4c23b9.js";import"./ArrowRightOutlined.08fa31dd.js";(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new Error().stack;r&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[r]="5a6f39cd-8807-4ce4-9135-f20015c5745a",s._sentryDebugIdIdentifier="sentry-dbid-5a6f39cd-8807-4ce4-9135-f20015c5745a")}catch{}})();var lt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888.3 757.4h-53.8c-4.2 0-7.7 3.5-7.7 7.7v61.8H197.1V197.1h629.8v61.8c0 4.2 3.5 7.7 7.7 7.7h53.8c4.2 0 7.7-3.4 7.7-7.7V158.7c0-17-13.7-30.7-30.7-30.7H158.7c-17 0-30.7 13.7-30.7 30.7v706.6c0 17 13.7 30.7 30.7 30.7h706.6c17 0 30.7-13.7 30.7-30.7V765.1c0-4.3-3.5-7.7-7.7-7.7zm18.6-251.7L765 393.7c-5.3-4.2-13-.4-13 6.3v76H438c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z"}}]},name:"export",theme:"outlined"};const ut=lt;var st={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"};const it=st;function ue(s){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?Object(arguments[r]):{},d=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(t).filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable}))),d.forEach(function(l){dt(s,l,t[l])})}return s}function dt(s,r,t){return r in s?Object.defineProperty(s,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[r]=t,s}var j=function(r,t){var d=ue({},r,t.attrs);return a(ie,ue({},d,{icon:ut}),null)};j.displayName="ExportOutlined";j.inheritAttrs=!1;const pt=j;function se(s){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?Object(arguments[r]):{},d=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(t).filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable}))),d.forEach(function(l){ct(s,l,t[l])})}return s}function ct(s,r,t){return r in s?Object.defineProperty(s,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[r]=t,s}var W=function(r,t){var d=se({},r,t.attrs);return a(ie,se({},d,{icon:it}),null)};W.displayName="LinkOutlined";W.inheritAttrs=!1;const mt=W,ft=P({__name:"LaunchButton",props:{path:{}},setup(s){const r=s,t=_({state:"loading"}),d=U(()=>t.value.state!=="found"),l=U(()=>t.value.state==="loading"),i=U(()=>t.value.state==="found"?t.value.url:void 0),y=U(()=>{switch(t.value.state){case"error":return"Error";case"loading":return"Loading";case"not-deployed":return"No deploy";case"not-logged":return"Not logged";case"not-found":return"Page not found";case"found":return"Launch";default:throw new Error(`Invalid state ${t.value}`)}}),w=U(()=>{switch(t.value.state){case"error":return"Something went wrong when trying to get your deployed URL.";case"loading":return"Getting deployed url info...";case"not-deployed":return"You have no deployed url yet.";case"not-logged":return"You are not logged.";case"not-found":return"This page is not on the deployed application.";case"found":return"Launch the deployed version of this application in another tab.";default:throw new Error(`Invalid state ${t.value}`)}});async function O(n){const u=`https://${n}.abstra.app/_version`;return(await fetch(u)).ok}async function g(n){const u=`https://${n}.abstra.app/_pages/${r.path}`;return(await fetch(u)).ok}async function h(){var L;const{result:n}=re.asyncComputed;if(!((L=n.value)!=null&&L.logged)){t.value={state:"not-logged"};return}const u=await re.getProjectInfo().catch(()=>null);if(!u){t.value={state:"error"};return}if(!await O(u.subdomain).catch(()=>null)){t.value={state:"not-deployed"};return}if(!await g(u.subdomain).catch(()=>null)){t.value={state:"not-found"};return}const m=`https://${u.subdomain}.abstra.app/${r.path}`;t.value={state:"found",url:m}}return h(),(n,u)=>(v(),b(e(M),{title:y.value},{content:o(()=>[f(Ee(w.value),1)]),default:o(()=>[a(e(R),{href:i.value,target:"_blank",disabled:d.value,loading:l.value,size:"small",type:"link"},{icon:o(()=>[a(e(mt))]),default:o(()=>[f(" Open Deployed ")]),_:1},8,["href","disabled","loading"])]),_:1},8,["title"]))}}),ve=s=>(de("data-v-a8ca44f6"),s=s(),pe(),s),vt=ve(()=>$("i",null,"string",-1)),gt=ve(()=>$("i",null,"string list",-1)),yt=P({__name:"FormNotificationSettings",props:{form:{}},setup(s){const t=_(s.form);return(d,l)=>(v(),I(q,null,[a(e(V),{layout:"vertical"},{default:o(()=>[a(e(D),{level:4,width:"100%",height:"30px",style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0px"}},{default:o(()=>[f(" Thread waiting "),a(e(Xe),{checked:t.value.notificationTrigger.enabled,"onUpdate:checked":l[0]||(l[0]=i=>t.value.notificationTrigger.enabled=i)},{default:o(()=>[f(" Enabled ")]),_:1},8,["checked"])]),_:1}),a(e(N),{class:"description",style:{fontStyle:"italic",marginBottom:"20px"}},{default:o(()=>[f(" Send emails when the thread is waiting for the form to be filled ")]),_:1}),a(e(T),{label:"Variable name"},{default:o(()=>[a(e(E),{value:t.value.notificationTrigger.variable_name,"onUpdate:value":l[1]||(l[1]=i=>t.value.notificationTrigger.variable_name=i),disabled:!t.value.notificationTrigger.enabled,type:"text",placeholder:"variable_name"},null,8,["value","disabled"])]),_:1})]),_:1}),a(e(ne),{type:"info"},{message:o(()=>[a(e(N),null,{default:o(()=>[f(" Notifications are sent to the emails specified in the thread variables set here. The variables should contain a "),vt,f(" or a "),gt,f(". ")]),_:1})]),_:1}),a(e(ne),{style:{"margin-top":"20px"}},{message:o(()=>[a(e(N),null,{default:o(()=>[f(" Notifications are a paid feature. Talk to your account manager to enable them. ")]),_:1})]),_:1})],64))}});const bt=ce(yt,[["__scopeId","data-v-a8ca44f6"]]),ht=P({__name:"FormSettings",props:{form:{}},setup(s){const t=_(s.form);return(d,l)=>(v(),b(e(V),{layout:"vertical",style:{"padding-bottom":"50px"}},{default:o(()=>[a(Ve,{runtime:t.value},null,8,["runtime"]),a(e(T),{label:"Form name"},{default:o(()=>[a(e(E),{value:t.value.title,"onUpdate:value":l[0]||(l[0]=i=>t.value.title=i),type:"text",onChange:l[1]||(l[1]=i=>{var y;return t.value.title=(y=i.target.value)!=null?y:""})},null,8,["value"])]),_:1}),a(e(D),{level:3},{default:o(()=>[f(" Texts ")]),_:1}),a(e(D),{level:4},{default:o(()=>[f(" Welcome Screen ")]),_:1}),a(e(T),{label:"Title"},{default:o(()=>[a(e(E),{value:t.value.welcomeTitle,"onUpdate:value":l[2]||(l[2]=i=>t.value.welcomeTitle=i),type:"text",placeholder:t.value.title,disabled:t.value.autoStart},null,8,["value","placeholder","disabled"])]),_:1}),a(e(T),{label:"Description"},{default:o(()=>[a(e(E),{value:t.value.startMessage,"onUpdate:value":l[3]||(l[3]=i=>t.value.startMessage=i),type:"text",disabled:t.value.autoStart},null,8,["value","disabled"])]),_:1}),a(e(T),{label:"Start button label"},{default:o(()=>[a(e(E),{value:t.value.startButtonText,"onUpdate:value":l[4]||(l[4]=i=>t.value.startButtonText=i),type:"text",placeholder:"Start",disabled:t.value.autoStart},null,8,["value","disabled"])]),_:1}),a(e(T),null,{default:o(()=>[a(e(K),{checked:t.value.autoStart,"onUpdate:checked":l[5]||(l[5]=i=>t.value.autoStart=i)},{default:o(()=>[f("Skip welcome screen")]),_:1},8,["checked"])]),_:1}),a(e(D),{level:4},{default:o(()=>[f(" End Screen ")]),_:1}),a(e(T),{label:"End text"},{default:o(()=>[a(e(E),{value:t.value.endMessage,"onUpdate:value":l[6]||(l[6]=i=>t.value.endMessage=i),type:"text",placeholder:"Thank you"},null,8,["value"])]),_:1}),a(e(T),{label:"Restart button label"},{default:o(()=>[a(e(E),{value:t.value.restartButtonText,"onUpdate:value":l[7]||(l[7]=i=>t.value.restartButtonText=i),placeholder:"Restart",type:"text",disabled:!t.value.allowRestart},null,8,["value","disabled"])]),_:1}),a(e(T),{help:!t.value.isInitial&&"Only initial forms can be restarted"},{default:o(()=>[a(e(K),{checked:t.value.allowRestart,"onUpdate:checked":l[8]||(l[8]=i=>t.value.allowRestart=i),disabled:!t.value.isInitial},{default:o(()=>[f("Show restart button at the end")]),_:1},8,["checked","disabled"])]),_:1},8,["help"]),a(e(D),{level:4},{default:o(()=>[f(" Alert Messages ")]),_:1}),a(e(T),{label:"Error message"},{default:o(()=>[a(e(E),{value:t.value.errorMessage,"onUpdate:value":l[9]||(l[9]=i=>t.value.errorMessage=i),type:"text",placeholder:"Something went wrong"},null,8,["value"])]),_:1})]),_:1}))}}),kt=P({__name:"QueryParamsModal",props:{open:{type:Boolean},close:{type:Function},queryParams:{}},emits:["update:query-params"],setup(s,{emit:r}){const d=_(l(s.queryParams));function l(g){return Object.entries(g).map(([h,n])=>({key:h,value:n,id:Math.random().toString()}))}function i(){const g={};return d.value.forEach(({key:h,value:n})=>{g[h]=n}),g}const y=(g,h,n)=>{d.value[g]={key:h,value:n},r("update:query-params",i())},w=()=>{const g=d.value.length;d.value.push({key:`param-${g}`,value:"value"}),r("update:query-params",i())},O=g=>{d.value.splice(g,1),r("update:query-params",i())};return(g,h)=>(v(),b(e(tt),{open:g.open,onCancel:g.close},{footer:o(()=>[a(e(R),{type:"primary",onClick:g.close},{default:o(()=>[f("OK")]),_:1},8,["onClick"])]),default:o(()=>[a(e(B),{vertical:"",gap:"20"},{default:o(()=>[a(e(N),null,{default:o(()=>[f("Query params")]),_:1}),(v(!0),I(q,null,Oe(d.value,(n,u)=>(v(),b(e(T),{key:u},{default:o(()=>[a(e(Re),null,{default:o(()=>[a(e(E),{value:n.key,"onUpdate:value":A=>n.key=A,type:"text",placeholder:"name",onChange:()=>y(u,n.key,n.value)},null,8,["value","onUpdate:value","onChange"]),a(e(E),{value:n.value,"onUpdate:value":A=>n.value=A,type:"text",placeholder:"value",disabled:n.key===e(fe),onChange:()=>y(u,n.key,n.value)},null,8,["value","onUpdate:value","disabled","onChange"]),a(e(R),{danger:"",onClick:A=>O(u)},{default:o(()=>[f("remove")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),a(e(T),null,{default:o(()=>[a(e(R),{type:"dashed",style:{width:"100%"},onClick:w},{default:o(()=>[f(" Add Query Param ")]),_:1})]),_:1})]),_:1})]),_:1},8,["open","onCancel"]))}}),_t=s=>(de("data-v-d2213ae3"),s=s(),pe(),s),wt={key:0},St={key:1},At=_t(()=>$("br",null,null,-1)),Tt={class:"form-preview-container"},Ct=P({__name:"FormTester",props:{formRunnerData:{},formState:{},userEmail:{},disabled:{type:Boolean},queryParams:{},stageRunId:{}},emits:["start","reset","navigate","logout","auto-fill-clicked","action-clicked","update-widget-errors","update-widget-value","update:query-params"],setup(s,{emit:r}){var h;const t=s,d=_(!1),l=()=>{d.value=!0},i=()=>{d.value=!1},y=U(()=>{const n=g.value.query?`?${g.value.query}`:"";return`/${t.formRunnerData.path}${n}`}),w=_((h=ee.get("dontShowReloadHelper"))!=null?h:!1),O=()=>{ee.set("dontShowReloadHelper",!0),w.value=!0},g=U(()=>{const n=new URLSearchParams(t.queryParams).toString();return{subdomain:"[your-subdomain]",path:t.formRunnerData.path,query:n}});return(n,u)=>{const A=Ue("icon");return v(),I(q,null,[a(e(V),{layout:"vertical"},{default:o(()=>[a(e(B),{gap:"small"},{default:o(()=>[n.formState.type&&e(Me).includes(n.formState.type)?(v(),b(e(M),{key:0,placement:"bottom",visible:w.value?void 0:!0},{content:o(()=>[w.value?(v(),I("span",wt,"Reload form")):(v(),I("span",St,[f(" You can reload the form here"),At,a(e(at),{onClick:O},{default:o(()=>[f("Don't show this again")]),_:1})]))]),default:o(()=>[a(e(R),{disabled:n.disabled,onClick:u[0]||(u[0]=k=>r("reset"))},{default:o(()=>[a(A,{path:e(Ze),width:"20"},null,8,["path"])]),_:1},8,["disabled"])]),_:1},8,["visible"])):x("",!0),e(me).includes(n.formState.type)?(v(),b(e(M),{key:1,placement:"bottom"},{content:o(()=>[f("Stop form")]),default:o(()=>[a(e(R),{onClick:u[1]||(u[1]=k=>r("reset"))},{default:o(()=>[a(A,{path:e(Ke),width:"20"},null,8,["path"])]),_:1})]),_:1})):x("",!0),n.formState.type==="waiting"?(v(),b(e(M),{key:2,placement:"bottom"},{content:o(()=>[f("Start form")]),default:o(()=>[a(e(R),{disabled:n.disabled,onClick:u[2]||(u[2]=k=>r("start"))},{default:o(()=>[a(A,{path:e(et),width:"20"},null,8,["path"])]),_:1},8,["disabled"])]),_:1})):x("",!0),a(e(E),{value:y.value,class:"url-preview",onClick:l},null,8,["value"])]),_:1}),$("div",Tt,[a(Ne,{"is-preview":"","form-runner-data":n.formRunnerData,disabled:n.disabled,"form-state":n.formState,"user-email":n.userEmail,onUpdateWidgetErrors:u[3]||(u[3]=(k,m)=>r("update-widget-errors",k,m)),onUpdateWidgetValue:u[4]||(u[4]=(k,m)=>r("update-widget-value",k,m)),onActionClicked:u[5]||(u[5]=k=>r("action-clicked",k)),onNavigate:u[6]||(u[6]=k=>r("navigate",k)),onLogout:u[7]||(u[7]=k=>r("logout")),onAutofillClicked:u[8]||(u[8]=k=>r("auto-fill-clicked"))},null,8,["form-runner-data","disabled","form-state","user-email"])])]),_:1}),a(kt,{"query-params":n.queryParams,open:d.value,close:i,"onUpdate:queryParams":u[9]||(u[9]=k=>r("update:query-params",k))},null,8,["query-params","open"])],64)}}});const xt=ce(Ct,[["__scopeId","data-v-d2213ae3"]]),Et={style:{width:"50%"}},Ot={style:{width:"50%"}},Ua=P({__name:"FormEditor",setup(s){const r=$e(),t=Pe(),d=_(null),l=_("source-code"),i=_("preview"),y=_(null),w=_(null),O=_(null),g=_(null),h=_({}),n=_(null),u=_(!1),A=(p,c)=>{var C;(C=d.value)==null||C.setHighlight(p,c)},k=()=>{var p,c;(p=d.value)==null||p.restartEditor(),(c=d.value)==null||c.startPreviewMode()};Fe(()=>n.value?h.value={...h.value,[fe]:n.value}:null);const{result:m,loading:L,refetch:ge}=ze(async()=>{const[p,c,C]=await Promise.all([He.get(t.params.id),oe.get(),oe.readTestData()]);return p.updateInitialState("test_data",C),O.value=p.makeRunnerData(c),De({form:p,workspace:c})});te([h,u,m],()=>{if(!m.value)return;const p=m.value.form.isInitial&&!u.value||!m.value.form.isInitial&&!n.value;y.value=new Be({formRunnerData:m.value.form.makeRunnerData(m.value.workspace),queryParams:h.value,userManager:xe,logService:z,connectionManager:new qe(m.value.form.id,p),onFormStart:k,onFormEnd:ye,onRedirect:Se,onAuthUpdate:C=>g.value=C,onStateUpdate:C=>w.value=C,onStackTraceUpdate:A});const c=y.value.getState();w.value=c.formState,g.value=c.passwordlessUser});const ye=()=>{var p;n.value=null,(p=d.value)==null||p.restartEditor()};function be(){var p;(p=y.value)==null||p.start()}function he(){var p,c;(p=d.value)==null||p.restartEditor(),(c=y.value)==null||c.reset()}const ke=p=>{ae("editor",r,p.path)};function _e(){r.push({name:"stages"})}const Q=_(null),we=p=>{!m.value||(m.value.form.file=p)},z=Qe.create();function Se(p,c){ae("editor",r,p,c)}const Ae=()=>{var p;r.push({name:"formPreview",query:t.query,params:{id:(p=m.value)==null?void 0:p.form.id}})},Te=()=>{var c;let p=`/${(c=m.value)==null?void 0:c.form.path}`;n.value&&(p+=`?abstra-run-id=${n.value}`),window.open(p,"_blank")};return te(()=>t.params.id,()=>{ge()}),(p,c)=>(v(),b(Le,{"no-margins":""},{navbar:o(()=>[e(m)?(v(),b(e(ot),{key:0,title:e(m).form.title,style:{padding:"5px 25px","margin-bottom":"15px"},onBack:_e},{extra:o(()=>[a(Ge,{"docs-path":"forms/overview","show-v-s-code-button":"","show-save-button":!1,"editing-model":e(m).form},null,8,["editing-model"])]),_:1},8,["title"])):x("",!0)]),content:o(()=>[e(m)?(v(),b(e(B),{key:0,gap:"40",style:{width:"calc(100% - 80px)"}},{default:o(()=>{var C,H,G,J,Y,X;return[$("div",Et,[a(e(le),{"active-key":l.value,"onUpdate:activeKey":c[0]||(c[0]=S=>l.value=S)},{rightExtra:o(()=>[a(Je,{model:e(m).form},null,8,["model"])]),default:o(()=>[a(e(F),{key:"source-code",tab:"Source code"}),a(e(F),{key:"settings",tab:"Settings"}),a(e(F),{key:"notifications",tab:"Notifications"}),a(e(F),{key:"test-data",tab:"Thread data"})]),_:1},8,["active-key"]),l.value==="source-code"?(v(),b(je,{key:0,ref_key:"code",ref:d,script:e(m).form,workspace:e(m).workspace,onUpdateFile:we},null,8,["script","workspace"])):x("",!0),l.value==="settings"?(v(),b(ht,{key:1,form:e(m).form},null,8,["form"])):x("",!0),l.value==="notifications"?(v(),b(bt,{key:2,form:e(m).form},null,8,["form"])):x("",!0),l.value==="test-data"?(v(),b(Ye,{key:3,"enable-start-thread":u.value,"onUpdate:enableStartThread":c[1]||(c[1]=S=>u.value=S),"stage-run-id":n.value,"onUpdate:stageRunId":c[2]||(c[2]=S=>n.value=S),stage:e(m).form,onFixInvalidJson:c[3]||(c[3]=(S,Ce)=>{var Z;return(Z=Q.value)==null?void 0:Z.fixJson(S,Ce)})},null,8,["enable-start-thread","stage-run-id","stage"])):x("",!0)]),$("div",Ot,[a(e(le),{"active-key":i.value,"onUpdate:activeKey":c[4]||(c[4]=S=>i.value=S)},{rightExtra:o(()=>[a(e(B),{gap:"8",align:"center"},{default:o(()=>{var S;return[w.value&&e(me).includes((S=w.value)==null?void 0:S.type)?(v(),b(e(rt),{key:0,color:"green",style:{"margin-right":"20px"}},{default:o(()=>[f(" Running ")]),_:1})):x("",!0),a(ft,{path:e(m).form.path},null,8,["path"]),n.value||e(m).form.isInitial&&u.value?(v(),b(e(R),{key:1,target:"_blank",onClick:Te},{icon:o(()=>[a(e(pt))]),default:o(()=>[f(" Open ")]),_:1})):(v(),b(e(R),{key:2,target:"_blank",onClick:Ae},{icon:o(()=>[a(e(nt))]),default:o(()=>[f(" Preview ")]),_:1}))]}),_:1})]),default:o(()=>[a(e(F),{key:"preview",tab:"Preview"})]),_:1},8,["active-key"]),e(L)||!O.value||!w.value?(v(),b(e(Ie),{key:0})):i.value==="preview"?(v(),b(xt,{key:1,"query-params":h.value,"onUpdate:queryParams":c[5]||(c[5]=S=>h.value=S),"form-state":w.value,"form-runner-data":O.value,"user-email":(C=g.value)==null?void 0:C.claims.email,disabled:e(m).form.hasChanges(),"stage-run-id":n.value,onStart:be,onReset:he,onLogout:(H=y.value)==null?void 0:H.logout,onActionClicked:(G=y.value)==null?void 0:G.handleActionClick,onNavigate:ke,onUpdateWidgetErrors:(J=y.value)==null?void 0:J.updateWidgetFrontendErrors,onUpdateWidgetValue:(Y=y.value)==null?void 0:Y.updateWidgetValue,onAutoFillClicked:(X=y.value)==null?void 0:X.handleAutofillClick},null,8,["query-params","form-state","form-runner-data","user-email","disabled","stage-run-id","onLogout","onActionClicked","onUpdateWidgetErrors","onUpdateWidgetValue","onAutoFillClicked"])):x("",!0)])]}),_:1})):x("",!0)]),footer:o(()=>[a(We,{ref_key:"smartConsole",ref:Q,runtime:"forms","log-service":e(z)},null,8,["log-service"])]),_:1}))}});export{Ua as default};
//# sourceMappingURL=FormEditor.0a49ae71.js.map
