import{r as q}from"./index.0e9d49f3.js";import{u as g}from"./uuid.fa7e25e5.js";import{F as x,R as S}from"./broker.2e938ec2.js";import{d as B,J as K,H as E,v as N,a1 as m,K as f,z as i,b as o,c,e as O,t as w,O as T,Q as F,x as d,q as L}from"./registerWidgets.f519f117.js";import{D as C,m as V}from"./DashPlayer.55fe52f8.js";import{a as j}from"./asyncComputed.6507680c.js";import{r as z,l as A}from"./runnerData.e3fe2d6a.js";import{L as H}from"./CircularLoading.87f0c18e.js";import"./passwordlessManager.f1e6220e.js";import"./pubsub.6c98d249.js";import"./Passwordless.81ef7509.js";import"./icons.b79e444a.js";import"./executeJs.06927bac.js";import"./PlayerNavbar.b46a648a.js";import"./Steps.f7de1d8e.js";import"./Modal.a7daa1d6.js";import"./WidgetsFrame.682ffaa9.js";import"./ActionButton.vue_vue_type_script_setup_true_lang.10e49e78.js";import"./lottie.e76b6916.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[e]="ec7a36ea-ed5d-4a3c-925c-c9fb5ea6b489",r._sentryDebugIdIdentifier="sentry-dbid-ec7a36ea-ed5d-4a3c-925c-c9fb5ea6b489")}catch{}})();async function J(r){const e=await fetch(`/_api/${r}`);if(e.status==404)return null;if(!e.ok)throw new Error(await e.text());const{form:s,dash:n}=await e.json();return{form:s&&z(s),dash:n&&A(n)}}const p=r=>(T("data-v-2840ab73"),r=r(),F(),r),Q={key:0,class:"loading"},$={key:1,class:"error"},G=p(()=>d("h1",null,"Oops! Something went wrong",-1)),M=p(()=>d("p",null,"An unknown error ocurred. Please try again or contact support.",-1)),U=[G,M],W={key:2,class:"form"},X={key:3,class:"dash-wrapper"},Y={key:4,class:"error not-found"},Z=p(()=>d("h1",null,"Page not found",-1)),ee=p(()=>d("p",null,"The page you requested could not be found.",-1)),ae=[Z,ee],re=B({__name:"Player",setup(r){const e=K(),s=E(),n=N({playerKey:g()});m(e,()=>I());const _=({path:a})=>{s.push({name:"player",query:e.query,params:{path:a.split("/")}})},y=async()=>{n.playerKey=g()};m([()=>e.path,()=>e.query],()=>y());const{loading:k,result:t,error:D,refetch:I}=j(()=>{var a;return J((a=e.path.slice(1))!=null?a:"")}),h=f(()=>l.value?S.create({formPath:l.value.path}):null),l=f(()=>{var a,u;return(u=(a=t.value)==null?void 0:a.form)!=null?u:null}),v=f(()=>{var u,b;if(!((u=t.value)!=null&&u.dash))return null;const a=V((b=t.value)==null?void 0:b.dash);return a.onRedirect(({url:P,queryParams:R})=>q(s,P,R)),a});return m(t,()=>{var a;!t.value||(t.value.form?document.title=(a=t.value.form.welcomeTitle)!=null?a:t.value.form.title:t.value.dash&&(document.title=t.value.dash.title))}),(a,u)=>i(k)?(o(),c("div",Q,[O(H)])):i(D)?(o(),c("div",$,U)):l.value&&h.value?(o(),c("div",W,[(o(),w(x,{key:n.playerKey,class:"player",form:l.value,"is-preview":!1,params:i(e).query,broker:h.value,"enable-auto-focus":!0,onNavigate:_,onLogout:y},null,8,["form","params","broker"]))])):v.value?(o(),c("div",X,[(o(),w(C,{key:n.playerKey,class:"player","is-preview":!1,params:i(e).query,"dash-player-service":v.value,onNavigate:_},null,8,["params","dash-player-service"]))])):(o(),c("div",Y,ae))}});const ke=L(re,[["__scopeId","data-v-2840ab73"]]);export{ke as default};
//# sourceMappingURL=Player.c181a119.js.map
