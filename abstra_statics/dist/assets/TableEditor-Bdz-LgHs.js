import{_ as ca,P as ma}from"./ConsoleOmniChat.vue_vue_type_script_setup_true_lang-BlEIjcTu.js";import{H as Qe,o as De}from"./omniChatStore-BHKyaQfK.js";import{a as Ie}from"./asyncComputed-C-ZN1kJc.js";import{a as G,j as q,c as _,k as c,f as a,l as se,e as L,m as s,n as de,ag as ve,af as Je,b as k,u as e,w as t,h as l,g as P,t as T,i as g,T as fa,Z as ue,E as W,Q as te,aK as Se,b5 as Q,b3 as ie,b9 as pa,bl as va,ba as Le,B as ae,r as U,N as ye,ac as _e,b4 as He,cF as he,a7 as Xe,cA as ga,b6 as Ae,b8 as je,cB as ha,H as Ye,V as ya,A as ge,bf as Ne,bg as Fe,J as ba,dc as _a,aM as Ha,be as ka,F as Ue,a0 as $a}from"./jwt-decode.esm-BT0CZMUi.js";import{j as xe,p as ke,l as wa}from"./router-Dy-EE0-5.js";import{O as Va}from"./organization-Ct3mIZ_B.js";import{P as ze}from"./project-CVONZQAT.js";import{p as ea,T as le,d as Ca,C as Ee}from"./tables-AyQXRFEo.js";import{F as Za}from"./folder-Cft0p4J7.js";import{C as Me}from"./ContentLayout-CgyxLyuX.js";import{F as Aa}from"./PhArrowSquareOut.vue-D3n0utNa.js";import{u as Ma}from"./useTables-BwnG_U7q.js";import{C as Ke,S as Re}from"./index-BnEUKty4.js";import{_ as pe}from"./AbstraButton.vue_vue_type_script_setup_true_lang-Ct61thLE.js";import{F as Ia}from"./OmniChat-BDuQ2Cy7.js";import{S as Te}from"./index-CyCT7jv-.js";import{I as aa,F as Sa,G as La}from"./PhWarningCircle.vue-Bm0nZKuX.js";import{A as ta}from"./index-BQhr-1zk.js";import{F as xa}from"./PhArrowUp.vue-BaHny9Ak.js";import{a as za}from"./ant-design-B_izXXiv.js";import{G as Ta}from"./PhCaretRight.vue-DdIhpeSM.js";import{N as qa}from"./Navbar-Owr8J3eC.js";import"./record-Bo4Wk8Mz.js";import"./uuid-DIQx-id2.js";import"./PhCopySimple.vue-B7eE_yeB.js";import"./ts.worker-DKBPHUqu.js";import"./string-DkM9Shp8.js";import"./PhTranslate.vue-Bkn3KANh.js";import"./index-DYe0KFk-.js";import"./PhClockCounterClockwise.vue-C30leolr.js";import"./LoadingOutlined-1dKWuDjC.js";import"./PhStop.vue-CTV4rmWL.js";import"./file-BOAAc8WS.js";import"./AbstraLogo.vue_vue_type_script_setup_true_lang-8pAPqHas.js";import"./logo-BiWG9_W5.js";import"./Logo-Cuix22vN.js";import"./index-Cf4PbciL.js";import"./PhDatabase.vue-BD2s2xd_.js";import"./constants-L9cJ7uy-.js";import"./PhNotePencil.vue-DdvGjn_6.js";import"./PhSignOut.vue-HUK7-HoR.js";import"./organizationSwitcher-dFA0WyME.js";import"./PhPlus.vue-rPwRaxht.js";import"./PhSparkle.vue-CgnXVn5u.js";import"./index-CMAFMe16.js";(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},u=new Error().stack;u&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[u]="09d14ba0-f3ce-4e65-95ee-f3ecfbea01b4",n._sentryDebugIdIdentifier="sentry-dbid-09d14ba0-f3ce-4e65-95ee-f3ecfbea01b4")}catch{}})();const Ba=["width","height","fill","transform"],Da={key:0},ja=s("path",{d:"M80,28H56A20,20,0,0,0,36,48V208a20,20,0,0,0,20,20H80a20,20,0,0,0,20-20V48A20,20,0,0,0,80,28ZM76,204H60V52H76ZM156,28H132a20,20,0,0,0-20,20V208a20,20,0,0,0,20,20h24a20,20,0,0,0,20-20V48A20,20,0,0,0,156,28Zm-4,176H136V52h16Zm100-76a12,12,0,0,1-12,12h-8v8a12,12,0,0,1-24,0v-8h-8a12,12,0,0,1,0-24h8v-8a12,12,0,0,1,24,0v8h8A12,12,0,0,1,252,128Z"},null,-1),Na=[ja],Fa={key:1},Ua=s("path",{d:"M88,48V208a8,8,0,0,1-8,8H56a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8H80A8,8,0,0,1,88,48Zm64-8H128a8,8,0,0,0-8,8V208a8,8,0,0,0,8,8h24a8,8,0,0,0,8-8V48A8,8,0,0,0,152,40Z",opacity:"0.2"},null,-1),Ea=s("path",{d:"M80,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H80a16,16,0,0,0,16-16V48A16,16,0,0,0,80,32Zm0,176H56V48H80ZM152,32H128a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V48A16,16,0,0,0,152,32Zm0,176H128V48h24Zm96-80a8,8,0,0,1-8,8H224v16a8,8,0,0,1-16,0V136H192a8,8,0,0,1,0-16h16V104a8,8,0,0,1,16,0v16h16A8,8,0,0,1,248,128Z"},null,-1),Ka=[Ua,Ea],Ra={key:2},Pa=s("path",{d:"M96,48V208a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V48A16,16,0,0,1,56,32H80A16,16,0,0,1,96,48Zm56-16H128a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V48A16,16,0,0,0,152,32Zm88,88H224V104a8,8,0,0,0-16,0v16H192a8,8,0,0,0,0,16h16v16a8,8,0,0,0,16,0V136h16a8,8,0,0,0,0-16Z"},null,-1),Oa=[Pa],Wa={key:3},Ga=s("path",{d:"M80,34H56A14,14,0,0,0,42,48V208a14,14,0,0,0,14,14H80a14,14,0,0,0,14-14V48A14,14,0,0,0,80,34Zm2,174a2,2,0,0,1-2,2H56a2,2,0,0,1-2-2V48a2,2,0,0,1,2-2H80a2,2,0,0,1,2,2ZM152,34H128a14,14,0,0,0-14,14V208a14,14,0,0,0,14,14h24a14,14,0,0,0,14-14V48A14,14,0,0,0,152,34Zm2,174a2,2,0,0,1-2,2H128a2,2,0,0,1-2-2V48a2,2,0,0,1,2-2h24a2,2,0,0,1,2,2Zm92-80a6,6,0,0,1-6,6H222v18a6,6,0,0,1-12,0V134H192a6,6,0,0,1,0-12h18V104a6,6,0,0,1,12,0v18h18A6,6,0,0,1,246,128Z"},null,-1),Qa=[Ga],Ja={key:4},Xa=s("path",{d:"M80,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H80a16,16,0,0,0,16-16V48A16,16,0,0,0,80,32Zm0,176H56V48H80ZM152,32H128a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V48A16,16,0,0,0,152,32Zm0,176H128V48h24Zm96-80a8,8,0,0,1-8,8H224v16a8,8,0,0,1-16,0V136H192a8,8,0,0,1,0-16h16V104a8,8,0,0,1,16,0v16h16A8,8,0,0,1,248,128Z"},null,-1),Ya=[Xa],et={key:5},at=s("path",{d:"M80,36H56A12,12,0,0,0,44,48V208a12,12,0,0,0,12,12H80a12,12,0,0,0,12-12V48A12,12,0,0,0,80,36Zm4,172a4,4,0,0,1-4,4H56a4,4,0,0,1-4-4V48a4,4,0,0,1,4-4H80a4,4,0,0,1,4,4ZM152,36H128a12,12,0,0,0-12,12V208a12,12,0,0,0,12,12h24a12,12,0,0,0,12-12V48A12,12,0,0,0,152,36Zm4,172a4,4,0,0,1-4,4H128a4,4,0,0,1-4-4V48a4,4,0,0,1,4-4h24a4,4,0,0,1,4,4Zm88-80a4,4,0,0,1-4,4H220v20a4,4,0,0,1-8,0V132H192a4,4,0,0,1,0-8h20V104a4,4,0,0,1,8,0v20h20A4,4,0,0,1,244,128Z"},null,-1),tt=[at],lt={name:"PhColumnsPlusRight"},nt=G({...lt,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(n){const u=n,r=q("weight","regular"),d=q("size","1em"),f=q("color","currentColor"),o=q("mirrored",!1),i=_(()=>u.weight??r),$=_(()=>u.size??d),I=_(()=>u.color??f),m=_(()=>u.mirrored!==void 0?u.mirrored?"scale(-1, 1)":void 0:o?"scale(-1, 1)":void 0);return(h,Z)=>(a(),c("svg",de({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:$.value,height:$.value,fill:I.value,transform:m.value},h.$attrs),[se(h.$slots,"default"),i.value==="bold"?(a(),c("g",Da,Na)):i.value==="duotone"?(a(),c("g",Fa,Ka)):i.value==="fill"?(a(),c("g",Ra,Oa)):i.value==="light"?(a(),c("g",Wa,Qa)):i.value==="regular"?(a(),c("g",Ja,Ya)):i.value==="thin"?(a(),c("g",et,tt)):L("",!0)],16,Ba))}}),rt=["width","height","fill","transform"],ot={key:0},ut=s("path",{d:"M148,96V48a12,12,0,0,1,24,0V84h36a12,12,0,0,1,0,24H160A12,12,0,0,1,148,96ZM96,148H48a12,12,0,0,0,0,24H84v36a12,12,0,0,0,24,0V160A12,12,0,0,0,96,148Zm112,0H160a12,12,0,0,0-12,12v48a12,12,0,0,0,24,0V172h36a12,12,0,0,0,0-24ZM96,36A12,12,0,0,0,84,48V84H48a12,12,0,0,0,0,24H96a12,12,0,0,0,12-12V48A12,12,0,0,0,96,36Z"},null,-1),it=[ut],st={key:1},dt=s("path",{d:"M208,64V192a16,16,0,0,1-16,16H64a16,16,0,0,1-16-16V64A16,16,0,0,1,64,48H192A16,16,0,0,1,208,64Z",opacity:"0.2"},null,-1),ct=s("path",{d:"M152,96V48a8,8,0,0,1,16,0V88h40a8,8,0,0,1,0,16H160A8,8,0,0,1,152,96ZM96,152H48a8,8,0,0,0,0,16H88v40a8,8,0,0,0,16,0V160A8,8,0,0,0,96,152Zm112,0H160a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V168h40a8,8,0,0,0,0-16ZM96,40a8,8,0,0,0-8,8V88H48a8,8,0,0,0,0,16H96a8,8,0,0,0,8-8V48A8,8,0,0,0,96,40Z"},null,-1),mt=[dt,ct],ft={key:2},pt=s("path",{d:"M152,96V48a8,8,0,0,1,13.66-5.66l48,48A8,8,0,0,1,208,104H160A8,8,0,0,1,152,96ZM96,152H48a8,8,0,0,0-5.66,13.66l48,48A8,8,0,0,0,104,208V160A8,8,0,0,0,96,152ZM99.06,40.61a8,8,0,0,0-8.72,1.73l-48,48A8,8,0,0,0,48,104H96a8,8,0,0,0,8-8V48A8,8,0,0,0,99.06,40.61ZM208,152H160a8,8,0,0,0-8,8v48a8,8,0,0,0,13.66,5.66l48-48A8,8,0,0,0,208,152Z"},null,-1),vt=[pt],gt={key:3},ht=s("path",{d:"M154,96V48a6,6,0,0,1,12,0V90h42a6,6,0,0,1,0,12H160A6,6,0,0,1,154,96ZM96,154H48a6,6,0,0,0,0,12H90v42a6,6,0,0,0,12,0V160A6,6,0,0,0,96,154Zm112,0H160a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V166h42a6,6,0,0,0,0-12ZM96,42a6,6,0,0,0-6,6V90H48a6,6,0,0,0,0,12H96a6,6,0,0,0,6-6V48A6,6,0,0,0,96,42Z"},null,-1),yt=[ht],bt={key:4},_t=s("path",{d:"M152,96V48a8,8,0,0,1,16,0V88h40a8,8,0,0,1,0,16H160A8,8,0,0,1,152,96ZM96,152H48a8,8,0,0,0,0,16H88v40a8,8,0,0,0,16,0V160A8,8,0,0,0,96,152Zm112,0H160a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V168h40a8,8,0,0,0,0-16ZM96,40a8,8,0,0,0-8,8V88H48a8,8,0,0,0,0,16H96a8,8,0,0,0,8-8V48A8,8,0,0,0,96,40Z"},null,-1),Ht=[_t],kt={key:5},$t=s("path",{d:"M156,96V48a4,4,0,0,1,8,0V92h44a4,4,0,0,1,0,8H160A4,4,0,0,1,156,96ZM96,156H48a4,4,0,0,0,0,8H92v44a4,4,0,0,0,8,0V160A4,4,0,0,0,96,156Zm112,0H160a4,4,0,0,0-4,4v48a4,4,0,0,0,8,0V164h44a4,4,0,0,0,0-8ZM96,44a4,4,0,0,0-4,4V92H48a4,4,0,0,0,0,8H96a4,4,0,0,0,4-4V48A4,4,0,0,0,96,44Z"},null,-1),wt=[$t],Vt={name:"PhCornersIn"},Ct=G({...Vt,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(n){const u=n,r=q("weight","regular"),d=q("size","1em"),f=q("color","currentColor"),o=q("mirrored",!1),i=_(()=>u.weight??r),$=_(()=>u.size??d),I=_(()=>u.color??f),m=_(()=>u.mirrored!==void 0?u.mirrored?"scale(-1, 1)":void 0:o?"scale(-1, 1)":void 0);return(h,Z)=>(a(),c("svg",de({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:$.value,height:$.value,fill:I.value,transform:m.value},h.$attrs),[se(h.$slots,"default"),i.value==="bold"?(a(),c("g",ot,it)):i.value==="duotone"?(a(),c("g",st,mt)):i.value==="fill"?(a(),c("g",ft,vt)):i.value==="light"?(a(),c("g",gt,yt)):i.value==="regular"?(a(),c("g",bt,Ht)):i.value==="thin"?(a(),c("g",kt,wt)):L("",!0)],16,rt))}}),Zt=["width","height","fill","transform"],At={key:0},Mt=s("path",{d:"M220,48V88a12,12,0,0,1-24,0V60H168a12,12,0,0,1,0-24h40A12,12,0,0,1,220,48ZM88,196H60V168a12,12,0,0,0-24,0v40a12,12,0,0,0,12,12H88a12,12,0,0,0,0-24Zm120-40a12,12,0,0,0-12,12v28H168a12,12,0,0,0,0,24h40a12,12,0,0,0,12-12V168A12,12,0,0,0,208,156ZM88,36H48A12,12,0,0,0,36,48V88a12,12,0,0,0,24,0V60H88a12,12,0,0,0,0-24Z"},null,-1),It=[Mt],St={key:1},Lt=s("path",{d:"M208,48V208H48V48Z",opacity:"0.2"},null,-1),xt=s("path",{d:"M216,48V88a8,8,0,0,1-16,0V56H168a8,8,0,0,1,0-16h40A8,8,0,0,1,216,48ZM88,200H56V168a8,8,0,0,0-16,0v40a8,8,0,0,0,8,8H88a8,8,0,0,0,0-16Zm120-40a8,8,0,0,0-8,8v32H168a8,8,0,0,0,0,16h40a8,8,0,0,0,8-8V168A8,8,0,0,0,208,160ZM88,40H48a8,8,0,0,0-8,8V88a8,8,0,0,0,16,0V56H88a8,8,0,0,0,0-16Z"},null,-1),zt=[Lt,xt],Tt={key:2},qt=s("path",{d:"M93.66,202.34A8,8,0,0,1,88,216H48a8,8,0,0,1-8-8V168a8,8,0,0,1,13.66-5.66ZM88,40H48a8,8,0,0,0-8,8V88a8,8,0,0,0,13.66,5.66l40-40A8,8,0,0,0,88,40ZM211.06,160.61a8,8,0,0,0-8.72,1.73l-40,40A8,8,0,0,0,168,216h40a8,8,0,0,0,8-8V168A8,8,0,0,0,211.06,160.61ZM208,40H168a8,8,0,0,0-5.66,13.66l40,40A8,8,0,0,0,216,88V48A8,8,0,0,0,208,40Z"},null,-1),Bt=[qt],Dt={key:3},jt=s("path",{d:"M214,48V88a6,6,0,0,1-12,0V54H168a6,6,0,0,1,0-12h40A6,6,0,0,1,214,48ZM88,202H54V168a6,6,0,0,0-12,0v40a6,6,0,0,0,6,6H88a6,6,0,0,0,0-12Zm120-40a6,6,0,0,0-6,6v34H168a6,6,0,0,0,0,12h40a6,6,0,0,0,6-6V168A6,6,0,0,0,208,162ZM88,42H48a6,6,0,0,0-6,6V88a6,6,0,0,0,12,0V54H88a6,6,0,0,0,0-12Z"},null,-1),Nt=[jt],Ft={key:4},Ut=s("path",{d:"M216,48V88a8,8,0,0,1-16,0V56H168a8,8,0,0,1,0-16h40A8,8,0,0,1,216,48ZM88,200H56V168a8,8,0,0,0-16,0v40a8,8,0,0,0,8,8H88a8,8,0,0,0,0-16Zm120-40a8,8,0,0,0-8,8v32H168a8,8,0,0,0,0,16h40a8,8,0,0,0,8-8V168A8,8,0,0,0,208,160ZM88,40H48a8,8,0,0,0-8,8V88a8,8,0,0,0,16,0V56H88a8,8,0,0,0,0-16Z"},null,-1),Et=[Ut],Kt={key:5},Rt=s("path",{d:"M212,48V88a4,4,0,0,1-8,0V52H168a4,4,0,0,1,0-8h40A4,4,0,0,1,212,48ZM88,204H52V168a4,4,0,0,0-8,0v40a4,4,0,0,0,4,4H88a4,4,0,0,0,0-8Zm120-40a4,4,0,0,0-4,4v36H168a4,4,0,0,0,0,8h40a4,4,0,0,0,4-4V168A4,4,0,0,0,208,164ZM88,44H48a4,4,0,0,0-4,4V88a4,4,0,0,0,8,0V52H88a4,4,0,0,0,0-8Z"},null,-1),Pt=[Rt],Ot={name:"PhCornersOut"},Wt=G({...Ot,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(n){const u=n,r=q("weight","regular"),d=q("size","1em"),f=q("color","currentColor"),o=q("mirrored",!1),i=_(()=>u.weight??r),$=_(()=>u.size??d),I=_(()=>u.color??f),m=_(()=>u.mirrored!==void 0?u.mirrored?"scale(-1, 1)":void 0:o?"scale(-1, 1)":void 0);return(h,Z)=>(a(),c("svg",de({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:$.value,height:$.value,fill:I.value,transform:m.value},h.$attrs),[se(h.$slots,"default"),i.value==="bold"?(a(),c("g",At,It)):i.value==="duotone"?(a(),c("g",St,zt)):i.value==="fill"?(a(),c("g",Tt,Bt)):i.value==="light"?(a(),c("g",Dt,Nt)):i.value==="regular"?(a(),c("g",Ft,Et)):i.value==="thin"?(a(),c("g",Kt,Pt)):L("",!0)],16,Zt))}}),Gt=["width","height","fill","transform"],Qt={key:0},Jt=s("path",{d:"M228,160a12,12,0,0,1-12,12H40a12,12,0,0,1,0-24H216A12,12,0,0,1,228,160ZM40,108H216a12,12,0,0,0,0-24H40a12,12,0,0,0,0,24Z"},null,-1),Xt=[Jt],Yt={key:1},e0=s("path",{d:"M216,56V200a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V56A16,16,0,0,1,56,40H200A16,16,0,0,1,216,56Z",opacity:"0.2"},null,-1),a0=s("path",{d:"M224,160a8,8,0,0,1-8,8H40a8,8,0,0,1,0-16H216A8,8,0,0,1,224,160ZM40,104H216a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16Z"},null,-1),t0=[e0,a0],l0={key:2},n0=s("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM184,160H72a8,8,0,0,1,0-16H184a8,8,0,0,1,0,16Zm0-48H72a8,8,0,0,1,0-16H184a8,8,0,0,1,0,16Z"},null,-1),r0=[n0],o0={key:3},u0=s("path",{d:"M222,160a6,6,0,0,1-6,6H40a6,6,0,0,1,0-12H216A6,6,0,0,1,222,160ZM40,102H216a6,6,0,0,0,0-12H40a6,6,0,0,0,0,12Z"},null,-1),i0=[u0],s0={key:4},d0=s("path",{d:"M224,160a8,8,0,0,1-8,8H40a8,8,0,0,1,0-16H216A8,8,0,0,1,224,160ZM40,104H216a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16Z"},null,-1),c0=[d0],m0={key:5},f0=s("path",{d:"M220,160a4,4,0,0,1-4,4H40a4,4,0,0,1,0-8H216A4,4,0,0,1,220,160ZM40,100H216a4,4,0,0,0,0-8H40a4,4,0,0,0,0,8Z"},null,-1),p0=[f0],v0={name:"PhEquals"},g0=G({...v0,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(n){const u=n,r=q("weight","regular"),d=q("size","1em"),f=q("color","currentColor"),o=q("mirrored",!1),i=_(()=>u.weight??r),$=_(()=>u.size??d),I=_(()=>u.color??f),m=_(()=>u.mirrored!==void 0?u.mirrored?"scale(-1, 1)":void 0:o?"scale(-1, 1)":void 0);return(h,Z)=>(a(),c("svg",de({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:$.value,height:$.value,fill:I.value,transform:m.value},h.$attrs),[se(h.$slots,"default"),i.value==="bold"?(a(),c("g",Qt,Xt)):i.value==="duotone"?(a(),c("g",Yt,t0)):i.value==="fill"?(a(),c("g",l0,r0)):i.value==="light"?(a(),c("g",o0,i0)):i.value==="regular"?(a(),c("g",s0,c0)):i.value==="thin"?(a(),c("g",m0,p0)):L("",!0)],16,Gt))}}),h0=["width","height","fill","transform"],y0={key:0},b0=s("path",{d:"M87.5,151.52l64-64a12,12,0,0,1,17,17l-64,64a12,12,0,0,1-17-17Zm131-114a60.08,60.08,0,0,0-84.87,0L103.51,67.61a12,12,0,0,0,17,17l30.07-30.06a36,36,0,0,1,50.93,50.92L171.4,135.52a12,12,0,1,0,17,17l30.08-30.06A60.09,60.09,0,0,0,218.45,37.55ZM135.52,171.4l-30.07,30.08a36,36,0,0,1-50.92-50.93l30.06-30.07a12,12,0,0,0-17-17L37.55,133.58a60,60,0,0,0,84.88,84.87l30.06-30.07a12,12,0,0,0-17-17Z"},null,-1),_0=[b0],H0={key:1},k0=s("path",{d:"M209.94,113.94l-96,96a48,48,0,0,1-67.88-67.88l96-96a48,48,0,0,1,67.88,67.88Z",opacity:"0.2"},null,-1),$0=s("path",{d:"M165.66,90.34a8,8,0,0,1,0,11.32l-64,64a8,8,0,0,1-11.32-11.32l64-64A8,8,0,0,1,165.66,90.34ZM215.6,40.4a56,56,0,0,0-79.2,0L106.34,70.45a8,8,0,0,0,11.32,11.32l30.06-30a40,40,0,0,1,56.57,56.56l-30.07,30.06a8,8,0,0,0,11.31,11.32L215.6,119.6a56,56,0,0,0,0-79.2ZM138.34,174.22l-30.06,30.06a40,40,0,1,1-56.56-56.57l30.05-30.05a8,8,0,0,0-11.32-11.32L40.4,136.4a56,56,0,0,0,79.2,79.2l30.06-30.07a8,8,0,0,0-11.32-11.31Z"},null,-1),w0=[k0,$0],V0={key:2},C0=s("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM144.56,173.66l-21.45,21.45a44,44,0,0,1-62.22-62.22l21.45-21.46a8,8,0,0,1,11.32,11.31L72.2,144.2a28,28,0,0,0,39.6,39.6l21.45-21.46a8,8,0,0,1,11.31,11.32Zm-34.9-16a8,8,0,0,1-11.32-11.32l48-48a8,8,0,0,1,11.32,11.32Zm85.45-34.55-21.45,21.45a8,8,0,0,1-11.32-11.31L183.8,111.8a28,28,0,0,0-39.6-39.6L122.74,93.66a8,8,0,0,1-11.31-11.32l21.46-21.45a44,44,0,0,1,62.22,62.22Z"},null,-1),Z0=[C0],A0={key:3},M0=s("path",{d:"M164.25,91.75a6,6,0,0,1,0,8.49l-64,64a6,6,0,0,1-8.49-8.48l64-64A6,6,0,0,1,164.25,91.75ZM214.2,41.8a54.07,54.07,0,0,0-76.38,0L107.75,71.85a6,6,0,0,0,8.49,8.49l30.07-30.06a42,42,0,0,1,59.41,59.41l-30.08,30.07a6,6,0,1,0,8.49,8.49l30.07-30.07A54,54,0,0,0,214.2,41.8ZM139.76,175.64l-30.07,30.08a42,42,0,0,1-59.41-59.41l30.06-30.07a6,6,0,0,0-8.49-8.49l-30,30.07a54,54,0,0,0,76.38,76.39l30.07-30.08a6,6,0,0,0-8.49-8.49Z"},null,-1),I0=[M0],S0={key:4},L0=s("path",{d:"M165.66,90.34a8,8,0,0,1,0,11.32l-64,64a8,8,0,0,1-11.32-11.32l64-64A8,8,0,0,1,165.66,90.34ZM215.6,40.4a56,56,0,0,0-79.2,0L106.34,70.45a8,8,0,0,0,11.32,11.32l30.06-30a40,40,0,0,1,56.57,56.56l-30.07,30.06a8,8,0,0,0,11.31,11.32L215.6,119.6a56,56,0,0,0,0-79.2ZM138.34,174.22l-30.06,30.06a40,40,0,1,1-56.56-56.57l30.05-30.05a8,8,0,0,0-11.32-11.32L40.4,136.4a56,56,0,0,0,79.2,79.2l30.06-30.07a8,8,0,0,0-11.32-11.31Z"},null,-1),x0=[L0],z0={key:5},T0=s("path",{d:"M162.84,93.16a4,4,0,0,1,0,5.66l-64,64a4,4,0,0,1-5.66-5.66l64-64A4,4,0,0,1,162.84,93.16Zm49.95-49.95a52.07,52.07,0,0,0-73.56,0L109.17,73.27a4,4,0,0,0,5.65,5.66l30.07-30.06a44,44,0,0,1,62.24,62.24l-30.07,30.06a4,4,0,0,0,5.66,5.66l30.07-30.06A52.07,52.07,0,0,0,212.79,43.21ZM141.17,177.06l-30.06,30.07a44,44,0,0,1-62.24-62.24l30.06-30.06a4,4,0,0,0-5.66-5.66L43.21,139.23a52,52,0,0,0,73.56,73.56l30.06-30.07a4,4,0,1,0-5.66-5.66Z"},null,-1),q0=[T0],B0={name:"PhLinkSimple"},Pe=G({...B0,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(n){const u=n,r=q("weight","regular"),d=q("size","1em"),f=q("color","currentColor"),o=q("mirrored",!1),i=_(()=>u.weight??r),$=_(()=>u.size??d),I=_(()=>u.color??f),m=_(()=>u.mirrored!==void 0?u.mirrored?"scale(-1, 1)":void 0:o?"scale(-1, 1)":void 0);return(h,Z)=>(a(),c("svg",de({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:$.value,height:$.value,fill:I.value,transform:m.value},h.$attrs),[se(h.$slots,"default"),i.value==="bold"?(a(),c("g",y0,_0)):i.value==="duotone"?(a(),c("g",H0,w0)):i.value==="fill"?(a(),c("g",V0,Z0)):i.value==="light"?(a(),c("g",A0,I0)):i.value==="regular"?(a(),c("g",S0,x0)):i.value==="thin"?(a(),c("g",z0,q0)):L("",!0)],16,h0))}}),D0=["width","height","fill","transform"],j0={key:0},N0=s("path",{d:"M230.15,70.54,185.46,25.86a20,20,0,0,0-28.28,0L33.86,149.17A19.86,19.86,0,0,0,28,163.31V208a20,20,0,0,0,20,20H216a12,12,0,0,0,0-24H125L230.15,98.83A20,20,0,0,0,230.15,70.54ZM91,204H52V165l84-84,39,39ZM192,103,153,64l18.34-18.34,39,39Z"},null,-1),F0=[N0],U0={key:1},E0=s("path",{d:"M221.66,90.34,192,120,136,64l29.66-29.66a8,8,0,0,1,11.31,0L221.66,79A8,8,0,0,1,221.66,90.34Z",opacity:"0.2"},null,-1),K0=s("path",{d:"M227.32,73.37,182.63,28.69a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H216a8,8,0,0,0,0-16H115.32l112-112A16,16,0,0,0,227.32,73.37ZM48,163.31l88-88L180.69,120l-88,88H48Zm144-54.62L147.32,64l24-24L216,84.69Z"},null,-1),R0=[E0,K0],P0={key:2},O0=s("path",{d:"M227.32,73.37,182.63,28.69a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H216a8,8,0,0,0,0-16H115.32l112-112A16,16,0,0,0,227.32,73.37ZM192,108.69,147.32,64l24-24L216,84.69Z"},null,-1),W0=[O0],G0={key:3},Q0=s("path",{d:"M225.91,74.79,181.22,30.1a14,14,0,0,0-19.8,0L38.1,153.41a13.94,13.94,0,0,0-4.1,9.9V208a14,14,0,0,0,14,14H216a6,6,0,0,0,0-12H110.49L225.91,94.59A14,14,0,0,0,225.91,74.79ZM93.52,210H48a2,2,0,0,1-2-2V163.31a2,2,0,0,1,.59-1.41L136,72.49,183.52,120ZM217.42,86.1,192,111.52,144.49,64,169.9,38.59a2,2,0,0,1,2.83,0l44.69,44.68A2,2,0,0,1,217.42,86.1Z"},null,-1),J0=[Q0],X0={key:4},Y0=s("path",{d:"M227.32,73.37,182.63,28.69a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H216a8,8,0,0,0,0-16H115.32l112-112A16,16,0,0,0,227.32,73.37ZM92.69,208H48V163.31l88-88L180.69,120ZM192,108.69,147.32,64l24-24L216,84.69Z"},null,-1),el=[Y0],al={key:5},tl=s("path",{d:"M224.49,76.2,179.8,31.51a12,12,0,0,0-17,0L39.51,154.83A12,12,0,0,0,36,163.31V208a12,12,0,0,0,12,12H216a4,4,0,0,0,0-8H105.66L224.49,93.17A12,12,0,0,0,224.49,76.2ZM94.34,212H48a4,4,0,0,1-4-4V163.31a4,4,0,0,1,1.17-2.82L136,69.66,186.35,120ZM218.83,87.51,192,114.34,141.66,64l26.83-26.83a4,4,0,0,1,5.66,0l44.68,44.69A4,4,0,0,1,218.83,87.51Z"},null,-1),ll=[tl],nl={name:"PhPencilSimpleLine"},rl=G({...nl,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(n){const u=n,r=q("weight","regular"),d=q("size","1em"),f=q("color","currentColor"),o=q("mirrored",!1),i=_(()=>u.weight??r),$=_(()=>u.size??d),I=_(()=>u.color??f),m=_(()=>u.mirrored!==void 0?u.mirrored?"scale(-1, 1)":void 0:o?"scale(-1, 1)":void 0);return(h,Z)=>(a(),c("svg",de({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:$.value,height:$.value,fill:I.value,transform:m.value},h.$attrs),[se(h.$slots,"default"),i.value==="bold"?(a(),c("g",j0,F0)):i.value==="duotone"?(a(),c("g",U0,R0)):i.value==="fill"?(a(),c("g",P0,W0)):i.value==="light"?(a(),c("g",G0,J0)):i.value==="regular"?(a(),c("g",X0,el)):i.value==="thin"?(a(),c("g",al,ll)):L("",!0)],16,D0))}}),ol=["width","height","fill","transform"],ul={key:0},il=s("path",{d:"M208,112H48a20,20,0,0,0-20,20v24a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V132A20,20,0,0,0,208,112Zm-4,40H52V136H204Zm4-116H48A20,20,0,0,0,28,56V80a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V56A20,20,0,0,0,208,36Zm-4,40H52V60H204ZM160,220a12,12,0,0,1-12,12h-8v8a12,12,0,0,1-24,0v-8h-8a12,12,0,0,1,0-24h8v-8a12,12,0,0,1,24,0v8h8A12,12,0,0,1,160,220Z"},null,-1),sl=[il],dl={key:1},cl=s("path",{d:"M216,128v24a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V128a8,8,0,0,1,8-8H208A8,8,0,0,1,216,128Zm-8-80H48a8,8,0,0,0-8,8V80a8,8,0,0,0,8,8H208a8,8,0,0,0,8-8V56A8,8,0,0,0,208,48Z",opacity:"0.2"},null,-1),ml=s("path",{d:"M208,112H48a16,16,0,0,0-16,16v24a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V128A16,16,0,0,0,208,112Zm0,40H48V128H208v24Zm0-112H48A16,16,0,0,0,32,56V80A16,16,0,0,0,48,96H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40Zm0,40H48V56H208V80ZM160,216a8,8,0,0,1-8,8H136v16a8,8,0,0,1-16,0V224H104a8,8,0,0,1,0-16h16V192a8,8,0,0,1,16,0v16h16A8,8,0,0,1,160,216Z"},null,-1),fl=[cl,ml],pl={key:2},vl=s("path",{d:"M224,128v24a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V128a16,16,0,0,1,16-16H208A16,16,0,0,1,224,128ZM208,40H48A16,16,0,0,0,32,56V80A16,16,0,0,0,48,96H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40ZM152,208H136V192a8,8,0,0,0-16,0v16H104a8,8,0,0,0,0,16h16v16a8,8,0,0,0,16,0V224h16a8,8,0,0,0,0-16Z"},null,-1),gl=[vl],hl={key:3},yl=s("path",{d:"M208,114H48a14,14,0,0,0-14,14v24a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V128A14,14,0,0,0,208,114Zm2,38a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V128a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2ZM208,42H48A14,14,0,0,0,34,56V80A14,14,0,0,0,48,94H208a14,14,0,0,0,14-14V56A14,14,0,0,0,208,42Zm2,38a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V56a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2ZM158,216a6,6,0,0,1-6,6H134v18a6,6,0,0,1-12,0V222H104a6,6,0,0,1,0-12h18V192a6,6,0,0,1,12,0v18h18A6,6,0,0,1,158,216Z"},null,-1),bl=[yl],_l={key:4},Hl=s("path",{d:"M208,112H48a16,16,0,0,0-16,16v24a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V128A16,16,0,0,0,208,112Zm0,40H48V128H208v24Zm0-112H48A16,16,0,0,0,32,56V80A16,16,0,0,0,48,96H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40Zm0,40H48V56H208V80ZM160,216a8,8,0,0,1-8,8H136v16a8,8,0,0,1-16,0V224H104a8,8,0,0,1,0-16h16V192a8,8,0,0,1,16,0v16h16A8,8,0,0,1,160,216Z"},null,-1),kl=[Hl],$l={key:5},wl=s("path",{d:"M208,116H48a12,12,0,0,0-12,12v24a12,12,0,0,0,12,12H208a12,12,0,0,0,12-12V128A12,12,0,0,0,208,116Zm4,36a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V128a4,4,0,0,1,4-4H208a4,4,0,0,1,4,4ZM208,44H48A12,12,0,0,0,36,56V80A12,12,0,0,0,48,92H208a12,12,0,0,0,12-12V56A12,12,0,0,0,208,44Zm4,36a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V56a4,4,0,0,1,4-4H208a4,4,0,0,1,4,4ZM156,216a4,4,0,0,1-4,4H132v20a4,4,0,0,1-8,0V220H104a4,4,0,0,1,0-8h20V192a4,4,0,0,1,8,0v20h20A4,4,0,0,1,156,216Z"},null,-1),Vl=[wl],Cl={name:"PhRowsPlusBottom"},Oe=G({...Cl,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(n){const u=n,r=q("weight","regular"),d=q("size","1em"),f=q("color","currentColor"),o=q("mirrored",!1),i=_(()=>u.weight??r),$=_(()=>u.size??d),I=_(()=>u.color??f),m=_(()=>u.mirrored!==void 0?u.mirrored?"scale(-1, 1)":void 0:o?"scale(-1, 1)":void 0);return(h,Z)=>(a(),c("svg",de({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:$.value,height:$.value,fill:I.value,transform:m.value},h.$attrs),[se(h.$slots,"default"),i.value==="bold"?(a(),c("g",ul,sl)):i.value==="duotone"?(a(),c("g",dl,fl)):i.value==="fill"?(a(),c("g",pl,gl)):i.value==="light"?(a(),c("g",hl,bl)):i.value==="regular"?(a(),c("g",_l,kl)):i.value==="thin"?(a(),c("g",$l,Vl)):L("",!0)],16,ol))}}),Zl={class:"related-tables"},Al={class:"related-section"},Ml={class:"relation-info"},Il={class:"related-tables"},Sl={class:"related-section"},Ll={class:"relation-info"},xl=G({__name:"RelatedTables",props:{table:{}},setup(n){const u=n,r=ve(),d=Je(),f=r.params.projectId,{tables:o,loading:i}=Ma(f),$=_(()=>u.table.getColumns().find(M=>M.primaryKey)?.name||"id"),I=_(()=>{if(!o.value.length)return{referencingTables:[],referencedTables:[]};const Z=o.value.filter(F=>F.id!==u.table.id),M=[];for(const F of Z){const A=F.getColumns().filter(D=>D.foreignKey);for(const D of A){if(!D.foreignKey)continue;let J;for(const Y of o.value)if(J=Y.getColumns().find(ee=>ee.id===D.foreignKey?.columnId),J)break;J?.tableId===u.table.id&&M.push({table:F,column:D})}}const v=[],B=u.table.getColumns().filter(F=>F.foreignKey);for(const F of B){if(!F.foreignKey)continue;let A,D;for(const J of o.value)if(D=J.getColumns().find(Y=>Y.id===F.foreignKey?.columnId),D){A=J;break}A&&D&&v.push({table:A,sourceColumn:F,targetColumn:D})}return{referencingTables:M,referencedTables:v}}),m=_(()=>{const Z=new Map;for(const M of I.value.referencingTables)Z.has(M.table.id)||Z.set(M.table.id,{tableId:M.table.id,tableName:M.table.name,description:`${M.column.name} → ${$.value}`});for(const M of I.value.referencedTables)Z.has(M.table.id)||Z.set(M.table.id,{tableId:M.table.id,tableName:M.table.name,description:`${M.sourceColumn.name} → ${M.targetColumn.name}`});return Array.from(Z.values())}),h=Z=>{d.push({name:"tableEditor",params:{projectId:f,tableId:Z}})};return(Z,M)=>e(i)?(a(),k(Me,{key:0,"full-width":""},{default:t(()=>[s("div",Zl,[s("div",Al,[l(e(fa),null,{default:t(()=>[P(T(e(g).translate("i18n_relatedtables_related_tables")),1)]),_:1}),l(e(W),{gap:"middle",wrap:"wrap"},{default:t(()=>[(a(),c(te,null,ue(3,v=>l(e(Ke),{key:v,class:"related-table-card loading-card"},{title:t(()=>[l(e(W),{justify:"space-between",align:"center"},{default:t(()=>[l(e(Re),{active:!0,paragraph:!1,title:{width:"120px"}}),l(e(Aa),{size:16,style:{opacity:"0.3"}})]),_:1})]),default:t(()=>[s("p",Ml,[l(e(Pe),{size:16,style:{opacity:"0.3"}}),l(e(Re),{active:!0,paragraph:!1,title:{width:"150px"}})])]),_:1})),64))]),_:1})])])]),_:1})):m.value.length>0?(a(),k(Me,{key:1,"full-width":""},{default:t(()=>[s("div",Il,[s("div",Sl,[s("h3",null,T(e(g).translate("i18n_relatedtables_related_tables_count",null,m.value.length)),1),l(e(W),{gap:"middle",wrap:"wrap"},{default:t(()=>[(a(!0),c(te,null,ue(m.value,v=>(a(),k(e(Ke),{key:v.tableId,title:v.tableName,class:"related-table-card",hoverable:"",onClick:B=>h(v.tableId)},{default:t(()=>[s("p",Ll,[l(e(Pe),{size:16}),s("span",null,T(v.description),1)])]),_:2},1032,["title","onClick"]))),128))]),_:1})])])]),_:1})):L("",!0)}}),zl=Se(xl,[["__scopeId","data-v-55a3ad92"]]),Tl=G({__name:"AddData",props:{open:{type:Boolean},editableItem:{},table:{},loading:{type:Boolean}},emits:["save","close","update-nullable","record-change"],setup(n,{emit:u}){const r=u;return(d,f)=>(a(),k(e(xe),{title:e(g).translate("i18n_adddata_title"),width:720,open:n.open,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:f[2]||(f[2]=o=>r("close"))},{extra:t(()=>[l(e(Te),null,{default:t(()=>[l(e(ae),{onClick:f[0]||(f[0]=o=>r("close"))},{default:t(()=>[P(T(e(g).translate("i18n_adddata_cancel")),1)]),_:1}),l(e(ae),{type:"primary",loading:n.loading,onClick:f[1]||(f[1]=o=>r("save"))},{default:t(()=>[P(T(e(g).translate("i18n_adddata_save")),1)]),_:1},8,["loading"])]),_:1})]),default:t(()=>[l(e(Le),{model:n.editableItem,layout:"vertical"},{default:t(()=>[(a(!0),c(te,null,ue(n.table.getUnprotectedColumns(),o=>(a(),k(e(Q),{key:o.id,label:o.name,required:!o.nullable},{default:t(()=>[n.editableItem?(a(),k(e(ie),{key:0,placeholder:o.type,value:n.editableItem[o.name],disabled:n.editableItem[o.name]===null,"onUpdate:value":i=>r("record-change",o.name,i)},pa({_:2},[o.nullable?{name:"addonAfter",fn:t(()=>[l(e(va),{checked:n.editableItem[o.name]===null,"onUpdate:checked":i=>r("update-nullable",o.name,i)},{default:t(()=>[P(T(e(g).translate("i18n_adddata_null")),1)]),_:1},8,["checked","onUpdate:checked"])]),key:"0"}:void 0]),1032,["placeholder","value","disabled","onUpdate:value"])):L("",!0)]),_:2},1032,["label","required"]))),128))]),_:1},8,["model"])]),_:1},8,["title","open"]))}}),la=(n,u)=>u.includes(n)?{status:"error",help:"There already is a column with this name in the table"}:{status:""},ql=G({__name:"NewColumn",props:{open:{type:Boolean},table:{}},emits:["created","cancel"],setup(n,{emit:u}){const r=u,d=n,o=ve().params.projectId,i=_(()=>d.table?.getColumns().map(V=>V.name)||[]),$=_(()=>la(m.value.name,i.value)),I={name:"",type:null,default:"",nullable:!0,unique:!1},m=U(I),h=()=>{m.value={...I}},Z=U([{value:"reference",label:"reference",isLeaf:!1},...ea.map(V=>({value:V,label:V,isLeaf:!0}))]),M=V=>{if(!V)return;const p=V[V.length-1];switch(V.length){case 0:return;case 1:p.loading=!0,le.list(o).then(E=>{p.children=E.map(X=>({value:X.id,label:X.name,isLeaf:!1})),p.loading=!1});return;case 2:p.loading=!0,le.get(o,p.value).then(E=>{p.children=E.getColumns().map(X=>({type:X.type,value:X.id,label:X.name,isLeaf:!0})),p.loading=!1});return}},v=(V,p)=>{if(V){if(V.length===1){m.value.type=V[0],m.value.foreignKey=void 0;return}if(V.length===3){const E=p[p.length-1];m.value.type=E.type,m.value.foreignKey={columnId:E.value}}}},B=V=>{const p=V.selectedOptions;return p?p.length===1?p[0].label:p.length===3?g.translate("i18n_newcolumn_reference_to",null,{tableName:p[1].label,columnName:p[2].label}):"":g.translate("i18n_newcolumn_select_type")},A=U({...{status:"success",message:"",fakeLoading:!1}}),D=()=>{A.value.fakeLoading=!0,Y()};ye(()=>m.value.type,()=>{m.value.type&&(m.value.default=Ca[m.value.type]||"",D())});const Y=_e.debounce(async()=>{if(!m.value.default){A.value.status="success",A.value.message="",A.value.fakeLoading=!1;return}const V=`select (${m.value.default})::${m.value.type} `;ze.executeQuery(o,V,[]).then(p=>{A.value.status=p.errors.length>0?"error":"success",A.value.message=p.errors[0]||"",A.value.fakeLoading=!1})},500);function ee(){r("cancel")}async function S(){if(d.table&&!(!m.value.name||!m.value.type))try{await d.table.addColumn(m.value),h(),r("created")}catch(V){V instanceof Error&&ke("Database error",V.message)}}return(V,p)=>(a(),k(e(xe),{title:e(g).translate("i18n_newcolumn_new_column"),width:720,open:d.open,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:ee},{extra:t(()=>[l(e(Te),null,{default:t(()=>[l(e(ae),{onClick:ee},{default:t(()=>[P(T(e(g).translate("i18n_newcolumn_cancel")),1)]),_:1}),l(e(ae),{type:"primary",onClick:S},{default:t(()=>[P(T(e(g).translate("i18n_newcolumn_save")),1)]),_:1})]),_:1})]),default:t(()=>[l(e(Le),{model:m.value,layout:"vertical"},{default:t(()=>[l(e(Q),{key:"name",label:e(g).translate("i18n_newcolumn_name"),required:"","validate-status":$.value.status,help:$.value.help},{default:t(()=>[l(e(ie),{value:m.value.name,"onUpdate:value":p[0]||(p[0]=E=>m.value.name=E)},null,8,["value"])]),_:1},8,["label","validate-status","help"]),l(e(Q),{key:"type",label:e(g).translate("i18n_newcolumn_type"),required:""},{default:t(()=>[l(e(ta),{options:Z.value,"load-data":M,"display-render":B,"allow-clear":!1,onChange:v},null,8,["options"])]),_:1},8,["label"]),l(e(Q),{key:"default-value",label:e(g).translate("i18n_newcolumn_default_value"),"validate-status":A.value.status,help:A.value.message},{default:t(()=>[l(e(ie),{value:m.value.default,"onUpdate:value":p[1]||(p[1]=E=>m.value.default=E),placeholder:e(g).translate("i18n_newcolumn_null_placeholder"),onInput:D},{suffix:t(()=>[A.value.fakeLoading?(a(),k(e(He),{key:0})):L("",!0),!A.value.fakeLoading&&A.value.status==="success"?(a(),k(e(Qe),{key:1,size:"18"})):L("",!0),!A.value.fakeLoading&&A.value.status==="error"?(a(),k(e(aa),{key:2,size:"18"})):L("",!0)]),_:1},8,["value","placeholder"])]),_:1},8,["label","validate-status","help"]),l(e(Q),{key:"nullable",label:e(g).translate("i18n_newcolumn_nullable")},{default:t(()=>[l(e(he),{checked:m.value.nullable,"onUpdate:checked":p[2]||(p[2]=E=>m.value.nullable=E)},null,8,["checked"])]),_:1},8,["label"]),l(e(Q),{key:"unique",label:e(g).translate("i18n_newcolumn_unique")},{default:t(()=>[l(e(he),{checked:m.value.unique,"onUpdate:checked":p[3]||(p[3]=E=>m.value.unique=E)},null,8,["checked"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","open"]))}}),Bl={class:"icon"},Dl=G({__name:"OrderByIcon",props:{column:{},orderBy:{}},emits:["reorder"],setup(n,{emit:u}){const r=u;return(d,f)=>(a(),c("div",Bl,[n.orderBy?.column!==String(n.column.title)?(a(),k(e(Sa),{key:0,size:"16",onClick:f[0]||(f[0]=o=>r("reorder",String(n.column.title)))})):L("",!0),n.orderBy?.column===String(n.column.title)&&n.orderBy.direction==="asc"?(a(),k(e(xa),{key:1,size:"16",onClick:f[1]||(f[1]=o=>r("reorder",String(n.column.title)))})):L("",!0),n.orderBy?.column===String(n.column.title)&&n.orderBy.direction==="desc"?(a(),k(e(La),{key:2,size:"16",onClick:f[2]||(f[2]=o=>r("reorder",String(n.column.title)))})):L("",!0)]))}}),We=Se(Dl,[["__scopeId","data-v-6ae5cef6"]]);function Ge(n){return`"${n.replace(/"/g,'""')}"`}function jl(n){return n==null?"NULL":`'${String(n).replace(/'/g,"''")}'`}function Nl(n,u){if(n.type==="search")return!n.q||n.q.trim()==="","";if(n.type==="and"){const r=n.conditions.filter(o=>o.value!==""&&o.value!==null);if(r.length===0)return"";const d=r.map(o=>{const i=Ge(o.field),$=jl(o.value);return`${i} = ${$}`});return`SELECT * FROM ${Ge(u)} WHERE ${d.join(" AND ")}`}return""}function Fl(n,u){const r=U(u||{type:"search",q:""}),d=_(()=>n.value.getColumns().filter(v=>r.value.type==="and"&&!r.value.conditions.some(B=>B.field===v.name))),f=_(()=>n.value.getColumns().filter(v=>r.value.type==="and"&&!r.value.conditions.some(B=>B.field===v.name)));function o(){r.value={type:"and",conditions:[{type:"eq",field:"id",value:""}]}}function i(v){v==="search"?r.value={type:"search",q:""}:o()}function $(v){r.value.type==="and"&&r.value.conditions.push({type:"eq",field:String(v),value:""})}function I(v){r.value.type==="and"&&(r.value.conditions=r.value.conditions.filter(B=>B.field!==v))}function m(v){r.value.type==="search"&&(r.value={type:"search",q:v})}function h(v){if(r.value.type!=="and")return;const B=r.value.conditions.find(F=>F.field===v);B&&(B.field=v)}function Z(v,B){if(r.value.type!=="and")return;const F=r.value.conditions.find(A=>A.field===v);F&&(F.value=B)}function M(){return Nl(r.value,n.value.name)}return{searchValue:r,filteredColumns:d,nonFilteredColumns:f,changeSearchType:i,addCondition:$,removeCondition:I,updateSearch:m,updateConditionField:h,updateConditionValue:Z,getSqlQuery:M}}const Ul=G({__name:"TableFilter",props:{search:{},table:{},data:{}},emits:["update:search"],setup(n,{emit:u}){const r=n,d=ve(),f=_(()=>r.table),{searchValue:o,filteredColumns:i,nonFilteredColumns:$,changeSearchType:I,addCondition:m,removeCondition:h,updateSearch:Z,updateConditionField:M,updateConditionValue:v,getSqlQuery:B}=Fl(f,r.search),F=[{label:g.translate("i18n_tablefilter_search"),value:"search"},{label:g.translate("i18n_tablefilter_advanced"),value:"and"}],A=u;function D(p){I(p),A("update:search",o.value)}function J(p){m(String(p)),A("update:search",o.value)}function Y(p){h(p),A("update:search",o.value)}function ee(p){Z(p),A("update:search",o.value)}function S(p){M(p),A("update:search",o.value)}const V=(p,E)=>{v(p,E),A("update:search",o.value)};return ye(()=>r.search,p=>{o.value=p},{deep:!0}),(p,E)=>{const X=Xe("RouterLink");return a(),k(e(W),{vertical:"",align:"start",gap:"small"},{default:t(()=>[l(e(W),{align:"center",justify:"space-between",style:{width:"100%"}},{default:t(()=>[l(e(wa),{options:F,value:e(o).type,"onUpdate:value":D},null,8,["value"]),e(o).type==="and"?(a(),k(X,{key:0,to:{name:"sql",params:{projectId:e(d).params.projectId},query:{filter:e(B)()}}},{default:t(()=>[l(pe,{type:"text",underline:""},{default:t(()=>[P(T(e(g).translate("i18n_tablefilter_edit_as_sql")),1)]),_:1})]),_:1},8,["to"])):L("",!0)]),_:1}),e(o).type==="search"?(a(),k(e(W),{key:0},{default:t(()=>[l(e(ga),{value:e(o).q,"onUpdate:value":ee},null,8,["value"])]),_:1})):e(o).type==="and"?(a(),k(e(W),{key:1,vertical:"",gap:"small"},{default:t(()=>[(a(!0),c(te,null,ue(e(o).conditions,K=>(a(),k(e(W),{key:K.field,gap:"large",align:"center"},{default:t(()=>[l(e(Ae),{value:K.field,"onUpdate:value":[O=>K.field=O,O=>S(K.field)],style:{width:"120px"}},{default:t(()=>[(a(!0),c(te,null,ue(e(i),O=>(a(),k(e(je),{key:O.id,value:O.name},{default:t(()=>[P(T(O.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","onUpdate:value"]),l(e(g0)),l(e(ie),{value:K.value,"onUpdate:value":[O=>K.value=O,O=>V(K.field,O)],style:{width:"120px"}},null,8,["value","onUpdate:value"]),l(e(ha),{style:{cursor:"pointer"},onClick:O=>Y(K.field)},null,8,["onClick"])]),_:2},1024))),128)),e($)[0]?(a(),k(e(W),{key:0,justify:"space-between"},{default:t(()=>[l(e(Ae),{style:{width:"120px"},value:"","onUpdate:value":J},{default:t(()=>[(a(!0),c(te,null,ue(e($),K=>(a(),k(e(je),{key:K.id,value:K.name},{default:t(()=>[P(T(K.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})):L("",!0)]),_:1})):L("",!0)]),_:1})}}}),El={class:"twin-container"},Kl={class:"fullwidth-input"},Rl={class:"fullwidth-input"},Pl={class:"using-container"},Ol={class:"fullwidth-input"},Wl=G({__name:"UpdateColumn",props:{open:{type:Boolean},table:{},column:{}},emits:["updated","cancel"],setup(n,{emit:u}){const r=u,d=n,o=ve().params.projectId,i=U(d.column.type);Ye(async()=>{if(!d.column.foreignKey)return;i.value=g.translate("i18n_updatecolumn_loading");const H=await le.fromColumnId(o,d.column.foreignKey.columnId),y=H.getColumn(d.column.foreignKey.columnId);i.value=g.translate("i18n_updatecolumn_reference_to",null,{tableName:H.name,columnName:y.name})});const $=_(()=>d.table?.getColumns().map(H=>H.record.initialState.name)||[]),I=_(()=>d.column.name===d.column.record.initialState.name?{status:"",help:""}:la(d.column.name,$.value)),{result:m,loading:h}=Ie(async()=>d.table.select({},10,0).then(({total:H})=>H));function Z(){d.column.record.resetChanges(),r("cancel")}const v=U({status:"success",message:"",fakeLoading:!1}),B=()=>{v.value.fakeLoading=!0,F()},F=_e.debounce(async()=>{if(!d.column.default){v.value.status="success",v.value.message="",v.value.fakeLoading=!1;return}const H=`select (${d.column.default})::${d.column.type} `,y=await ze.executeQuery(o,H,[]);v.value.status=y.errors.length>0?"error":"success",v.value.message=y.errors[0]||"",v.value.fakeLoading=!1},500),A=U([{value:"reference",label:"reference",isLeaf:!1},...ea.filter(H=>H!==d.column.type).map(H=>({value:H,label:H,isLeaf:!0}))]),D=H=>{if(!H)return;const y=H[H.length-1];switch(H.length){case 0:return;case 1:y.loading=!0,le.list(o).then(j=>{y.children=j.map(oe=>({value:oe.id,label:oe.name,isLeaf:!1})),y.loading=!1});return;case 2:y.loading=!0,le.get(o,y.value).then(j=>{y.children=j.getColumns().map(oe=>({type:oe.type,value:oe.id,label:oe.name,isLeaf:!0})),y.loading=!1});return}},J=H=>{const y=H.selectedOptions;return y?y.length===1?y[0].label:y.length===3?g.translate("i18n_updatecolumn_reference_to",null,{tableName:y[1].label,columnName:y[2].label}):"":g.translate("i18n_updatecolumn_select_type")},Y=(H,y)=>{if(H){if(H.length===1){d.column.type=H[0],d.column.foreignKey=null;return}if(H.length===3){if(d.column.foreignKey&&d.column.foreignKey.columnId===H[2])return;const j=y[y.length-1];d.column.type=j.type,d.column.foreignKey={columnId:j.value}}}};async function ee(H){await za(g.translate("i18n_updatecolumn_confirm_delete"))&&await S(H)}async function S(H){await d.table?.getColumn(H)?.delete(),r("updated")}const V=()=>m.value===0||h.value?!1:d.column.record.hasChanges("type"),p=U({type:"default"}),E=()=>{d.column.type=d.column.record.initialState.type,p.value={type:"default"}};function X(H,y){return y==="varchar"||H==="int"&&y==="boolean"||H==="boolean"&&y==="int"}ye(()=>d.column.type,()=>{B(),O.value||(p.value={type:"user-defined",using:ce.value,mandatory:!0})});const O=_(()=>p.value.type==="default"&&X(d.column.record.initialState.type,d.column.type)),be=_(()=>!X(d.column.record.initialState.type,d.column.type));function ne(H){H?p.value={type:"default"}:p.value={type:"user-defined",using:ce.value,mandatory:!1}}function $e(H){if(p.value.type==="default")throw new Error("Can't change using when using default casting");p.value.using=H??""}const re=()=>be.value?!0:V()&&p.value.type==="user-defined",ce=_(()=>`${d.column.record.initialState.name}::${d.column.type}`);async function we(){if(!d.column)return;let H=p.value.type==="default"?ce.value:p.value.using;m.value===0&&(H=`${d.column.record.initialState.name}::text::${d.column.type}`);try{await d.column.update(H),r("updated")}catch(y){y instanceof Error&&ke("Database error",y.message)}}return(H,y)=>(a(),k(e(xe),{title:e(g).translate("i18n_updatecolumn_edit_column"),width:720,open:n.open,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:Z},{extra:t(()=>[l(e(Te),null,{default:t(()=>[l(e(ae),{onClick:Z},{default:t(()=>[P(T(e(g).translate("i18n_updatecolumn_cancel")),1)]),_:1}),l(e(ae),{type:"primary",onClick:we},{default:t(()=>[P(T(e(g).translate("i18n_updatecolumn_save")),1)]),_:1})]),_:1})]),footer:t(()=>[l(pe,{danger:"",onClick:y[7]||(y[7]=j=>ee(String(n.column.id)))},{default:t(()=>[P(T(e(g).translate("i18n_updatecolumn_delete")),1)]),_:1})]),default:t(()=>[l(e(Le),{model:n.column,layout:"vertical"},{default:t(()=>[l(e(Q),{key:"name",label:e(g).translate("i18n_updatecolumn_name"),"validate-status":I.value.status,help:I.value.help},{default:t(()=>[l(e(ie),{value:n.column.name,"onUpdate:value":y[0]||(y[0]=j=>n.column.name=j)},null,8,["value"])]),_:1},8,["label","validate-status","help"]),s("div",El,[s("span",Kl,[l(e(Q),{key:"type",label:e(g).translate("i18n_updatecolumn_current_type")},{default:t(()=>[l(e(Ae),{value:i.value,"onUpdate:value":y[1]||(y[1]=j=>i.value=j),"default-active-first-option":"",disabled:""},null,8,["value"])]),_:1},8,["label"])]),l(e(Ta),{class:"right-arrow"}),s("span",Rl,[l(e(Q),{key:"new-type",label:e(g).translate("i18n_updatecolumn_new_type")},{default:t(()=>[l(e(ta),{options:A.value,"load-data":D,"display-render":J,"allow-clear":!0,onClear:E,onChange:Y},null,8,["options"])]),_:1},8,["label"])])]),l(e(Q),{key:"default-value",label:e(g).translate("i18n_updatecolumn_default_value"),"validate-status":v.value.status,help:v.value.message},{default:t(()=>[l(e(ie),{value:n.column.default,"onUpdate:value":y[2]||(y[2]=j=>n.column.default=j),placeholder:e(g).translate("i18n_updatecolumn_null_placeholder"),onInput:B},{suffix:t(()=>[v.value.fakeLoading?(a(),k(e(He),{key:0,size:"small"})):L("",!0),!v.value.fakeLoading&&v.value.status==="success"?(a(),k(e(Qe),{key:1,size:18})):L("",!0),!v.value.fakeLoading&&v.value.status==="error"?(a(),k(e(aa),{key:2,size:18})):L("",!0)]),_:1},8,["value","placeholder"])]),_:1},8,["label","validate-status","help"]),s("div",Pl,[V()?(a(),k(e(Q),{key:"default-casting",label:e(g).translate("i18n_updatecolumn_use_default_casting")},{default:t(()=>[l(e(he),{checked:O.value,disabled:be.value,"onUpdate:checked":y[3]||(y[3]=j=>ne(!!j))},null,8,["checked","disabled"])]),_:1},8,["label"])):L("",!0),s("span",Ol,[V()?(a(),k(e(Q),{key:"using",label:e(g).translate("i18n_updatecolumn_using")},{default:t(()=>[l(e(ie),{value:p.value.type==="user-defined"?p.value.using:ce.value,disabled:!re(),onInput:y[4]||(y[4]=j=>$e(j.target.value))},null,8,["value","disabled"])]),_:1},8,["label"])):L("",!0)])]),l(e(W),null,{default:t(()=>[l(e(Q),{key:"nullable",label:e(g).translate("i18n_updatecolumn_nullable")},{default:t(()=>[l(e(he),{checked:n.column.nullable,"onUpdate:checked":y[5]||(y[5]=j=>n.column.nullable=j)},null,8,["checked"])]),_:1},8,["label"]),l(e(Q),{key:"unique",label:e(g).translate("i18n_updatecolumn_unique")},{default:t(()=>[l(e(he),{checked:n.column.unique,"onUpdate:checked":y[6]||(y[6]=j=>n.column.unique=j)},null,8,["checked"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","open"]))}}),Gl=Se(Wl,[["__scopeId","data-v-dd18872e"]]),Ql={style:{overflow:"hidden","white-space":"wrap"}},Jl={key:1},Xl={key:0,class:"table-row null"},Yl={class:"foreign-key-popover"},en={key:0,class:"popover-loading"},an={class:"field-label"},tn={class:"foreign-key-popover"},ln={key:0,class:"popover-loading"},nn={class:"field-label"},rn={class:"field-value"},on={key:2,class:"foreign-key-error"},un={key:1,class:"field-value"},sn={key:2,class:"foreign-key-error"},dn={class:"button-container"},cn={class:"button-container"},mn={class:"button-container"},fn={class:"button-container"},pn=G({__name:"TableData",props:{table:{},loading:{type:Boolean}},emits:["refresh"],setup(n,{emit:u}){const r=n,d=u,f=U(1),o=U(10),i=_(()=>({total:ne.value?.total??0,current:f.value,pageSize:o.value,totalBoundaryShowSizeChanger:10,showSizeChanger:!0,pageSizeOptions:["10","25","50","100"],onChange:async(b,C)=>{f.value=b,o.value=C,await re()}})),$=U([]),I=U(!1),m=U(null),h=U(null),Z=U(!1),M=U(null),v=ve(),B=Je(),F=U(typeof v.query.q=="string"?v.query.q:""),A=_(()=>{try{return JSON.parse(v.query.where)}catch{return{}}}),D=U(Object.keys(A.value).length>0?{type:"and",conditions:Object.entries(A.value).reduce((b,[C,z])=>[...b,{type:"eq",field:C,value:z}],[])}:{type:"search",q:F.value}),J=_(()=>D.value.type==="search"?D.value.q:""),Y=_(()=>D.value.type==="search"?{}:D.value.conditions.reduce((b,C)=>({...b,[C.field]:C.value}),{}));function ee(b){b.type==="search"?B.replace({query:{q:b.q}}):B.replace({query:{where:JSON.stringify(Y.value)}}),f.value=1,re()}const S=U({type:"idle"});function V(){S.value={type:"idle"}}async function p(){V(),d("refresh")}ye(()=>r.table,()=>{ra(),re()});function E(){S.value={type:"creating"}}const X=b=>{if(!r.table)throw new Error("Table not found");S.value={type:"editing",column:r.table.getColumn(b)}},K=U(null),O=b=>{K.value?.column===b?K.value={column:b,direction:K.value.direction==="asc"?"desc":"asc"}:K.value={column:b,direction:"asc"},re()},be=_(()=>ne.value?.rows.length===1),{result:ne,loading:$e,refetch:re}=Ie(async()=>{const[{rows:b,total:C},z]=await Promise.all([r.table.select(Y.value,(f.value-1)*o.value,o.value,J.value,K.value||void 0),Promise.all(r.table.getColumns().filter(w=>w.foreignKey).map(w=>le.fromColumnId(v.params.projectId,w.foreignKey.columnId).then(R=>[w.name,R])))]);return{rows:b,total:C,columns:z.reduce((w,[R,N])=>({...w,[R]:N}),{})}}),ce=(b,C)=>{const z=r.table?.getColumns().find(N=>N.name===b);if(!z)return"";const w=ne.value?.columns[z.name],R=w?.getColumns().find(N=>N.id===z.foreignKey?.columnId);return!w||!R?"":{name:"tableEditor",params:{projectId:v.params.projectId,tableId:w.id},query:{where:JSON.stringify({[R.name]:C})}}},we=async(b,C)=>{I.value=!0,m.value=null,h.value=null;try{const z=r.table?.getColumns().find(x=>x.name===b);if(!z||!z.foreignKey)return;const w=await Ee.fromID(v.params.projectId,z.foreignKey.columnId),R=await le.get(v.params.projectId,w.tableId),N=await R.select({[w.name]:C},0,1,"");N.rows.length>0&&(m.value=N.rows[0],h.value=R)}catch(z){console.error("Error loading foreign key data:",z)}finally{I.value=!1}},H=b=>h.value?!!h.value.getColumns().find(z=>z.name===b)?.foreignKey:!1,y=async(b,C)=>{if(h.value){Z.value=!0,M.value=null;try{const z=h.value.getColumns().find(x=>x.name===b);if(!z||!z.foreignKey)return;const w=await Ee.fromID(v.params.projectId,z.foreignKey.columnId),N=await(await le.get(v.params.projectId,w.tableId)).select({[w.name]:C},0,1,"");N.rows.length>0&&(M.value=N.rows[0])}catch(z){console.error("Error loading nested foreign key data:",z)}finally{Z.value=!1}}},j=(b,C)=>{S.value.type==="adding"&&(S.value.editableItem[b]=C)},oe=(b,C)=>{S.value.type==="adding"&&(S.value.editableItem[b]=C?null:"")},qe=()=>[...r.table.getColumns().map(b=>({key:b.id??"",title:b.name,dataIndex:b.name,width:220,resizable:!0,ellipsis:!1})),{key:"action",title:"",fixed:"right",width:100,align:"center",resizable:!1,ellipsis:!1}],na=qe(),me=U(na),ra=()=>me.value=qe();function oa(b,C){const z=C;if(!z?.key)return;const w=me.value.findIndex(R=>R.key===z.key);w!==-1&&(me.value[w].width=b)}const Ve=_(()=>ne.value?.rows.map(b=>({key:b.id,...b}))||[]);let ua=ya(r.table?.getUnprotectedColumns().reduce((b,C)=>({...b,[C.name]:""}),{}));const Ce=U(!1);async function ia(){if(!(!r.table||!ua||S.value.type!=="adding")){Ce.value=!0;try{S.value.editableItem.id&&(typeof S.value.editableItem.id=="string"||typeof S.value.editableItem.id=="number")?await r.table.updateRow(S.value.editableItem.id.toString(),S.value.editableItem):await r.table.insertRow(S.value.editableItem),re(),V()}catch(b){b instanceof Error&&ke("Database error",b.message)}finally{Ce.value=!1}}}const sa=async b=>{if(!(!ne.value||!ne.value.rows.find(C=>C.id===b)))try{await r.table.deleteRow(b),be.value&&(f.value=Math.max(1,f.value-1)),re()}catch(C){C instanceof Error&&ke("Database error",C.message)}},da=b=>{const C=Ve.value?.filter(x=>b===x.key)[0],z=r.table.getColumns(),w=z.map(x=>x.name),R=z.filter(x=>x.type==="json").map(x=>x.name),N=_e.pick(_e.cloneDeep(C),w);R.forEach(x=>{N[x]&&(N[x]=JSON.stringify(N[x]))}),S.value={type:"adding",editableItem:N}};return(b,C)=>{const z=Xe("RouterLink");return a(),k(Me,{"full-width":""},{default:t(()=>[l(e(W),{justify:"space-between",style:{"margin-bottom":"16px"},gap:"middle"},{default:t(()=>[l(Ul,{search:D.value,"onUpdate:search":[C[0]||(C[0]=w=>D.value=w),ee],table:n.table,data:Ve.value},null,8,["search","table","data"]),l(e(W),{justify:"flex-end",gap:"middle"},{default:t(()=>[l(pe,{type:"primary",onClick:E},{default:t(()=>[l(e(nt)),P(T(e(g).translate("i18n_tabledata_create_column")),1)]),_:1}),me.value.length===3?(a(),k(e(ge),{key:0,title:e(g).translate("i18n_tabledata_create_column_first")},{default:t(()=>[l(pe,{disabled:!0,onClick:C[1]||(C[1]=w=>S.value={type:"adding",editableItem:{}})},{default:t(()=>[l(e(Oe)),P(T(e(g).translate("i18n_tabledata_add_data")),1)]),_:1})]),_:1},8,["title"])):(a(),k(pe,{key:1,onClick:C[2]||(C[2]=w=>S.value={type:"adding",editableItem:{}})},{default:t(()=>[l(e(Oe)),P(T(e(g).translate("i18n_tabledata_add_data")),1)]),_:1}))]),_:1})]),_:1}),l(e(ka),{columns:me.value,"data-source":Ve.value,pagination:i.value,bordered:"",loading:e($e)||n.loading,scroll:{x:1e3,y:720},size:"small",onResizeColumn:oa},{headerCell:t(({column:w})=>[w.title!=="id"&&w.title!=="created_at"&&w.key!=="action"?(a(),k(e(W),{key:0,align:"center",justify:"space-between",gap:"small"},{default:t(()=>[l(e(W),{style:{overflow:"hidden","white-space":"wrap"},align:"center",gap:"small"},{default:t(()=>[s("span",Ql,T(w.title),1),l(e(W),null,{default:t(()=>[l(We,{column:w,"order-by":K.value,onReorder:O},null,8,["column","order-by"])]),_:2},1024)]),_:2},1024),l(pe,{type:"text",onClick:R=>X(String(w.key))},{default:t(()=>[l(e(Ia),{size:"18"})]),_:1},8,["onClick"])]),_:2},1024)):(a(),c("span",Jl,[l(e(W),{align:"center",gap:"small"},{default:t(()=>[P(T(w.title)+" ",1),w.key!=="action"?(a(),k(We,{key:0,column:w,"order-by":K.value,onReorder:O},null,8,["column","order-by"])):L("",!0)]),_:2},1024)]))]),bodyCell:t(({column:w,text:R,record:N})=>[me.value.map(x=>x.title).includes(w.dataIndex)?(a(),c(te,{key:0},[R===null?(a(),c("div",Xl,T(e(g).translate("i18n_tabledata_null")),1)):n.table.getColumns().find(x=>x.name===w.dataIndex)?.foreignKey?(a(),k(e(Ne),{key:1,trigger:["hover"],placement:"right",onMouseenter:x=>we(w.dataIndex,R)},{content:t(()=>[s("div",Yl,[I.value?(a(),c("div",en,[l(e(He),{size:"small"})])):m.value&&h.value?(a(!0),c(te,{key:1},ue(m.value,(x,fe)=>(a(),c("div",{key:fe,class:"foreign-key-field"},[s("div",an,T(fe),1),H(fe)&&x!==null?(a(),k(e(Ne),{key:0,trigger:["hover"],placement:"right",onMouseenter:Ze=>y(fe,x)},{content:t(()=>[s("div",tn,[Z.value?(a(),c("div",ln,[l(e(He),{size:"small"})])):M.value?(a(!0),c(te,{key:1},ue(M.value,(Ze,Be)=>(a(),c("div",{key:Be,class:"foreign-key-field"},[s("div",nn,T(Be),1),s("div",rn,T(Ze!==null?Ze:""),1)]))),128)):(a(),c("div",on,T(e(g).translate("i18n_tabledata_failed_to_load")),1))])]),default:t(()=>[l(e(Fe),{class:"nested-fk-tag",color:"blue"},{default:t(()=>[P(T(x),1)]),_:2},1024)]),_:2},1032,["onMouseenter"])):(a(),c("div",un,T(x!==null?x:""),1))]))),128)):(a(),c("div",sn,T(e(g).translate("i18n_tabledata_failed_to_load")),1))])]),default:t(()=>[l(e(Fe),{color:"blue",class:"foreign-key-tag"},{default:t(()=>[l(z,{to:ce(w.dataIndex,R),target:"_blank",class:"foreign-key-link"},{default:t(()=>[P(T(R),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2},1032,["onMouseenter"])):(a(),c("div",{key:2,class:ba(["table-row",{expanded:$.value.includes(N.id)}])},T(R),3))],64)):L("",!0),w.key==="action"?(a(),k(e(W),{key:1,gap:"small",justify:"center"},{default:t(()=>[$.value.includes(N.id)?(a(),k(e(ae),{key:0,class:"icons",onClick:x=>$.value=$.value.filter(fe=>fe!==N.id)},{icon:t(()=>[l(e(ge),{title:e(g).translate("i18n_tabledata_collapse")},{default:t(()=>[s("div",dn,[l(e(Ct),{size:15})])]),_:1},8,["title"])]),_:1},8,["onClick"])):(a(),k(e(ae),{key:1,onClick:x=>$.value.push(N.id)},{icon:t(()=>[l(e(ge),{title:e(g).translate("i18n_tabledata_expand")},{default:t(()=>[s("div",cn,[l(e(Wt),{size:15})])]),_:1},8,["title"])]),_:1},8,["onClick"])),l(e(ae),{onClick:x=>da(N.id)},{icon:t(()=>[l(e(ge),{title:e(g).translate("i18n_tabledata_edit")},{default:t(()=>[s("div",mn,[l(e(rl),{size:15})])]),_:1},8,["title"])]),_:1},8,["onClick"]),l(e(_a),{title:e(g).translate("i18n_tabledata_sure_to_delete"),onConfirm:x=>sa(N.id)},{default:t(()=>[l(e(ae),null,{icon:t(()=>[l(e(ge),{title:e(g).translate("i18n_tabledata_delete")},{default:t(()=>[s("div",fn,[l(e(Ha),{size:15})])]),_:1},8,["title"])]),_:1})]),_:1},8,["title","onConfirm"])]),_:2},1024)):L("",!0)]),_:1},8,["columns","data-source","pagination","loading"]),S.value.type==="adding"?(a(),k(Tl,{key:0,open:S.value.type==="adding",table:r.table,"editable-item":S.value.editableItem,loading:Ce.value,onUpdateNullable:oe,onRecordChange:j,onClose:V,onCancel:V,onSave:ia},null,8,["open","table","editable-item","loading"])):L("",!0),S.value.type==="creating"?(a(),k(ql,{key:1,open:S.value.type==="creating",table:r.table,onClose:V,onCancel:V,onCreated:p},null,8,["open","table"])):L("",!0),S.value.type==="editing"?(a(),k(Gl,{key:2,open:S.value.type==="editing",column:S.value.column,table:n.table,onUpdated:p,onClose:V,onCancel:V},null,8,["open","column","table"])):L("",!0)]),_:1})}}}),o1=G({__name:"TableEditor",setup(n){const u=ve(),r=Ue(()=>{if(typeof u.params.tableId=="string")return u.params.tableId;throw new Error("tableId is not a string")}),d=Ue(()=>{if(typeof u.params.projectId=="string")return u.params.projectId;throw new Error("projectId is not a string")}),{result:f,loading:o,refetch:i}=Ie(()=>Promise.all([ze.get(d.value).then(async m=>{const h=await Va.get(m.organizationId),v=(await new Za().list(h.id)).find(B=>B.id===m.folderId);if(!v)throw new Error("Folder not found");return{project:m,organization:h,folder:v}}),le.get(d.value,r.value)]).then(([{project:m,organization:h,folder:Z},M])=>({project:m,organization:h,folder:Z,table:M})));ye([r,d],()=>i());const $=_(()=>!o.value&&f.value?[{label:f.value.organization.name,type:"organization-switcher",organizationId:f.value.organization.id},{label:f.value.folder.name,path:`/organizations/${f.value.organization.id}#${f.value.folder.id}`},{label:f.value.project.name,path:`/projects/${f.value.project.id}`},{label:g.translate("i18n_projectview_tables"),path:`/projects/${f.value.project.id}/tables`},{label:f.value.table.name,type:"editable"}]:void 0);function I({index:m,label:h}){m===4&&f.value&&(f.value.table.name=h,f.value.table.save())}return Ye(()=>{const m=De.subscribe("columnCreated",({tableId:h})=>{h===r.value&&i()});$a(()=>De.unsubscribe(m))}),(m,h)=>(a(),k(ma,{key:r.value},{navbar:t(()=>[l(qa,{breadcrumb:$.value,"show-ai-sparkles":"","onUpdate:breadcrumbLabel":I},null,8,["breadcrumb"])]),content:t(()=>[e(f)?(a(),k(pn,{key:0,loading:e(o),table:e(f).table,onRefresh:h[0]||(h[0]=Z=>e(i)())},null,8,["loading","table"])):L("",!0),e(f)?(a(),k(zl,{key:1,table:e(f).table},null,8,["table"])):L("",!0)]),chat:t(()=>[l(ca)]),_:1}))}});export{o1 as default};
//# sourceMappingURL=TableEditor-Bdz-LgHs.js.map
