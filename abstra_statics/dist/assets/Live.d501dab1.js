import{C as T}from"./CrudView.36f5326e.js";import{a as $}from"./asyncComputed.10de8a4b.js";import{d as B,Z as R,ac as D,u as e,o as d,et as h,aD as E,eC as z,c as b,w as a,b as r,ar as l,ez as _,cP as x,cw as U,bj as V,R as L,eA as N,f as P,a as f,fe as F,cO as S,cQ as C,ev as G,bG as M,eH as q,eI as H,cp as O}from"./vue-router.e016c212.js";import"./gateway.cb160cc2.js";import{g as Q,B as W,a as Y}from"./datetime.961337fb.js";import"./tables.201b204f.js";import{P as Z}from"./project.719eb1b1.js";import{r as A,C as J}from"./router.de4b25c8.js";import{_ as K,E as X}from"./ExecutionStatusIcon.vue_vue_type_script_setup_true_lang.b4f7ccf5.js";import{G as ee}from"./PhArrowCounterClockwise.vue.4ba68a01.js";import{F as te}from"./PhArrowSquareOut.vue.641159d0.js";import{G as se}from"./PhChats.vue.2f139104.js";import{I as oe}from"./PhCopySimple.vue.77067fbb.js";import{F as ae}from"./PhRocketLaunch.vue.4bac908f.js";import{A as re}from"./index.4d7c8d15.js";import{A as ie}from"./index.1eba9f45.js";import"./DocsButton.vue_vue_type_script_setup_true_lang.31878121.js";import"./BookOutlined.f3bced1b.js";import"./url.3a22c66f.js";import"./index.7eacc144.js";import"./popupNotifcation.c9c9aa91.js";import"./record.c4c2199a.js";import"./string.8ec7016b.js";import"./LoadingOutlined.e2f1014b.js";(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},m=new Error().stack;m&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[m]="6dc9ef1d-18ce-4786-93cc-d84898637528",n._sentryDebugIdIdentifier="sentry-dbid-6dc9ef1d-18ce-4786-93cc-d84898637528")}catch{}})();const le={key:0,class:"flex-row"},ne={key:1,class:"flex-row"},ce={key:2,class:"flex-row"},pe=B({__name:"ExecutionsShort",props:{stageId:{},projectId:{}},emits:["select"],setup(n,{emit:m}){const p=n,k=new X,{result:g,refetch:u,loading:w}=$(async()=>{const{executions:o}=await k.list({projectId:p.projectId,stageId:p.stageId,limit:6});return o}),v=o=>{m("select",o)},I=o=>Q(o,{weekday:void 0});let s=null;return R(()=>{s=setInterval(()=>u(),15e3)}),D(()=>{s&&clearInterval(s)}),(o,c)=>e(g)?(d(),h("div",le,[(d(!0),h(E,null,z(e(g),t=>(d(),b(e(U),{key:t.id,title:I(t.createdAt),onClick:y=>v(t)},{content:a(()=>[r(e(x),null,{default:a(()=>[l("Status: "+_(t.status),1)]),_:2},1024),r(e(x),null,{default:a(()=>[l("Duration: "+_(t.duration_seconds),1)]),_:2},1024),r(e(x),null,{default:a(()=>[l("Build: "+_(t.buildId.slice(0,6)),1)]),_:2},1024)]),default:a(()=>[r(K,{status:t.status},null,8,["status"])]),_:2},1032,["title","onClick"]))),128))])):e(w)?(d(),h("div",ne,[r(e(V))])):(d(),h("div",ce,"None"))}});const de=L(pe,[["__scopeId","data-v-da0ef620"]]),ue=n=>(q("data-v-62d24ea6"),n=n(),H(),n),fe={style:{"max-width":"250px",overflow:"hidden","text-overflow":"ellipsis ellipsis","white-space":"nowrap"}},_e={key:1},me={class:"desc",style:{"margin-bottom":"80px",padding:"10px 30px","background-color":"#f6f6f6","border-radius":"5px"}},ge={style:{"font-size":"16px",display:"flex","align-items":"center",gap:"5px"}},ye=ue(()=>f("strong",null,"Getting started",-1)),he=B({__name:"Live",setup(n){const p=N().params.projectId,k=s=>{A.push({name:"logs",params:{projectId:p},query:{stageId:s.stageId,executionId:s.id}})},{loading:g,result:u}=$(async()=>{const o=(await W.list(p)).find(y=>y.latest);if(!o)return null;const[c,t]=await Promise.all([Y.get(o.id),Z.get(p)]);return{buildSpec:c,project:t}}),w=s=>{var t;if(!("path"in s)||!s.path)return;const o=s.type==="form"?`/${s.path}`:`/_hooks/${s.path}`,c=(t=u.value)==null?void 0:t.project.getUrl(o);!c||(navigator.clipboard.writeText(c),O.success("Copied URL to clipboard"))},v=s=>s.type=="form"?`/${s.path}`:s.type=="hook"?`/_hooks/${s.path}`:s.type=="job"?`${s.schedule}`:"",I=P(()=>{var c;const s=[{name:"Type",align:"left"},{name:"Title",align:"left"},{name:"Trigger",align:"left"},{name:"Last Runs"},{name:"",align:"right"}],o=(c=u.value)==null?void 0:c.buildSpec;return o?{columns:s,rows:o.runtimes.map(t=>({key:t.id,cells:[{type:"tag",text:t.type.charAt(0).toUpperCase()+t.type.slice(1),tagColor:"default"},{type:"slot",key:"title",payload:{runtime:t}},{type:"slot",key:"trigger",payload:{runtime:t}},{type:"slot",key:"last-runs",payload:{runtime:t}},{type:"actions",actions:[{icon:ee,label:"View script logs",onClick:()=>A.push({name:"logs",params:{projectId:p},query:{stageId:t.id}})},{icon:oe,label:"Copy URL",onClick:()=>w(t),hide:!["form","hook"].includes(t.type)}]}]}))}:{columns:s,rows:[]}});return(s,o)=>{var c,t,y;return e(g)||((y=(t=(c=e(u))==null?void 0:c.buildSpec)==null?void 0:t.runtimes.length)!=null?y:0)>0?(d(),b(T,{key:0,"empty-title":"","entity-name":"build",description:"Access and monitor your project's current scripts here.",table:I.value,loading:e(g),title:"Live View"},{description:a(()=>{var i;return[r(e(S),{target:"_blank",href:(i=e(u))==null?void 0:i.project.getUrl()},{default:a(()=>[l(" Open App"),r(e(te),{class:"icon",size:16})]),_:1},8,["href"])]}),title:a(({payload:i})=>{var j;return[f("div",fe,[i.runtime.type!="form"?(d(),b(e(C),{key:0},{default:a(()=>[l(_(i.runtime.title),1)]),_:2},1024)):i.runtime.type=="form"?(d(),b(e(S),{key:1,href:(j=e(u))==null?void 0:j.project.getUrl(i.runtime.path),target:"_blank"},{default:a(()=>[l(_(i.runtime.title),1)]),_:2},1032,["href"])):G("",!0)])]}),"last-runs":a(({payload:i})=>[r(de,{"stage-id":i.runtime.id,"project-id":e(p),onSelect:k},null,8,["stage-id","project-id"])]),trigger:a(({payload:i})=>[r(e(ie),{color:"default",class:"ellipsis"},{default:a(()=>[l(_(v(i.runtime)),1)]),_:2},1024)]),_:1},8,["table","loading"])):(d(),h("section",_e,[f("div",me,[f("p",ge,[r(e(F),{size:"30"}),ye]),f("p",null,[l("Install the editor using pip: "),r(e(C),{code:"",copyable:""},{default:a(()=>[l("pip install abstra")]),_:1})]),f("p",null,[l(" Run the editor: "),r(e(C),{code:"",copyable:""},{default:a(()=>[l("abstra editor my-new-project")]),_:1})]),f("p",null,[l(" Feeling lost? "),r(e(M),{target:"_blank",type:"default",size:"small",onClick:o[0]||(o[0]=()=>e(J).showNewMessage("I need help getting started with Abstra"))},{default:a(()=>[r(e(se))]),_:1})])]),r(e(re),{status:"info",title:"Waiting for your first deploy!","sub-title":"Your live stages will appear here once you make your first deploy"},{icon:a(()=>[r(e(ae),{size:"100",color:"#d14056"})]),_:1})]))}}});const Me=L(he,[["__scopeId","data-v-62d24ea6"]]);export{Me as default};
//# sourceMappingURL=Live.d501dab1.js.map
