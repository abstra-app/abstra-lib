import{a as pe,i as ie,c as te,b as $,e as h,f as Te,g as ce,h as I,m as Me,r as E,s as Ee,H as De,ae as Ie,D as Le,X as Re,Y as Ce,p as O,bp as Ae,u as e,v as de,w as l,j as o,b7 as fe,S as ue,U as N,ak as Pe,ac as ze,k as We,aj as je,af as g,aJ as me,aK as Q,aL as Ue,b8 as ne,M as He,W as $e,be as Be,bf as Oe,bg as we,E as Ze,c7 as Fe,bt as Ne,c9 as oe,bs as re,ca as Ve,aN as Xe}from"./jwt-decode.esm-C-CO7HLt.js";import{R as Se,u as Ye,L as qe,E as Ge}from"./ExecutionContext-Bs7lHyme.js";import{d as ge,c as ee,e as Ke,f as Je}from"./router-B3wCUauF.js";import{a as Qe,b as et}from"./build-Cs9ugb6h.js";import"./tables-_Z_iUZnX.js";import{G as tt}from"./PhDotsThreeVertical.vue-BXEMPcsv.js";import{I as at}from"./PhStop.vue-BEAPJPJJ.js";import{S as be}from"./index-BTiZQC5j.js";import{T as nt,A as ve}from"./index-DU1Vw7iI.js";import{L as ot}from"./LoadingOutlined-D9YlHgY1.js";import{f as lt,a as st,l as it}from"./index-B0ywMIal.js";import{R as xe}from"./dayjs-DS5cwUoj.js";import"./string-sKpjBN0d.js";import"./polling-BKeIZn-H.js";import"./ant-design-BGHJHwKd.js";import"./PhCopy.vue-B-EwxI0T.js";import"./PhRobot.vue-CZpLCxBI.js";import"./ts.worker-BgN9zSpg.js";import"./record-BbzBpCnF.js";(function(){try{var w=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},b=new Error().stack;b&&(w._sentryDebugIds=w._sentryDebugIds||{},w._sentryDebugIds[b]="fe22fc40-a2f0-4713-9f33-8339244958da",w._sentryDebugIdIdentifier="sentry-dbid-fe22fc40-a2f0-4713-9f33-8339244958da")}catch{}})();const rt=["width","height","fill","transform"],ut={key:0},ct=I("path",{d:"M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"},null,-1),dt=[ct],ft={key:1},pt=I("path",{d:"M218.34,119.6,183.6,154.34a46.58,46.58,0,0,1-44.31,12.26c-.31.34-.62.67-.95,1L103.6,202.34A46.63,46.63,0,1,1,37.66,136.4L72.4,101.66A46.6,46.6,0,0,1,116.71,89.4c.31-.34.62-.67,1-1L152.4,53.66a46.63,46.63,0,0,1,65.94,65.94Z",opacity:"0.2"},null,-1),gt=I("path",{d:"M240,88.23a54.43,54.43,0,0,1-16,37L189.25,160a54.27,54.27,0,0,1-38.63,16h-.05A54.63,54.63,0,0,1,96,119.84a8,8,0,0,1,16,.45A38.62,38.62,0,0,0,150.58,160h0a38.39,38.39,0,0,0,27.31-11.31l34.75-34.75a38.63,38.63,0,0,0-54.63-54.63l-11,11A8,8,0,0,1,135.7,59l11-11A54.65,54.65,0,0,1,224,48,54.86,54.86,0,0,1,240,88.23ZM109,185.66l-11,11A38.41,38.41,0,0,1,70.6,208h0a38.63,38.63,0,0,1-27.29-65.94L78,107.31A38.63,38.63,0,0,1,144,135.71a8,8,0,0,0,7.78,8.22H152a8,8,0,0,0,8-7.78A54.86,54.86,0,0,0,144,96a54.65,54.65,0,0,0-77.27,0L32,130.75A54.62,54.62,0,0,0,70.56,224h0a54.28,54.28,0,0,0,38.64-16l11-11A8,8,0,0,0,109,185.66Z"},null,-1),vt=[pt,gt],ht={key:2},yt=I("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM115.7,192.49a43.31,43.31,0,0,1-55-66.43l25.37-25.37a43.35,43.35,0,0,1,61.25,0,42.9,42.9,0,0,1,9.95,15.43,8,8,0,1,1-15,5.6A27.33,27.33,0,0,0,97.37,112L72,137.37a27.32,27.32,0,0,0,34.68,41.91,8,8,0,1,1,9,13.21Zm79.61-62.55-25.37,25.37A43,43,0,0,1,139.32,168h0a43.35,43.35,0,0,1-40.53-28.12,8,8,0,1,1,15-5.6A27.35,27.35,0,0,0,139.28,152h0a27.14,27.14,0,0,0,19.32-8L184,118.63a27.32,27.32,0,0,0-34.68-41.91,8,8,0,1,1-9-13.21,43.32,43.32,0,0,1,55,66.43Z"},null,-1),_t=[yt],mt={key:3},wt=I("path",{d:"M238,88.18a52.42,52.42,0,0,1-15.4,35.66l-34.75,34.75A52.28,52.28,0,0,1,150.62,174h-.05A52.63,52.63,0,0,1,98,119.9a6,6,0,0,1,6-5.84h.17a6,6,0,0,1,5.83,6.16A40.62,40.62,0,0,0,150.58,162h0a40.4,40.4,0,0,0,28.73-11.9l34.75-34.74A40.63,40.63,0,0,0,156.63,57.9l-11,11a6,6,0,0,1-8.49-8.49l11-11a52.62,52.62,0,0,1,74.43,0A52.83,52.83,0,0,1,238,88.18Zm-127.62,98.9-11,11A40.36,40.36,0,0,1,70.6,210h0a40.63,40.63,0,0,1-28.7-69.36L76.62,105.9A40.63,40.63,0,0,1,146,135.77a6,6,0,0,0,5.83,6.16H152a6,6,0,0,0,6-5.84A52.63,52.63,0,0,0,68.14,97.42L33.38,132.16A52.63,52.63,0,0,0,70.56,222h0a52.26,52.26,0,0,0,37.22-15.42l11-11a6,6,0,1,0-8.49-8.48Z"},null,-1),bt=[wt],xt={key:4},kt=I("path",{d:"M240,88.23a54.43,54.43,0,0,1-16,37L189.25,160a54.27,54.27,0,0,1-38.63,16h-.05A54.63,54.63,0,0,1,96,119.84a8,8,0,0,1,16,.45A38.62,38.62,0,0,0,150.58,160h0a38.39,38.39,0,0,0,27.31-11.31l34.75-34.75a38.63,38.63,0,0,0-54.63-54.63l-11,11A8,8,0,0,1,135.7,59l11-11A54.65,54.65,0,0,1,224,48,54.86,54.86,0,0,1,240,88.23ZM109,185.66l-11,11A38.41,38.41,0,0,1,70.6,208h0a38.63,38.63,0,0,1-27.29-65.94L78,107.31A38.63,38.63,0,0,1,144,135.71a8,8,0,0,0,16,.45A54.86,54.86,0,0,0,144,96a54.65,54.65,0,0,0-77.27,0L32,130.75A54.62,54.62,0,0,0,70.56,224h0a54.28,54.28,0,0,0,38.64-16l11-11A8,8,0,0,0,109,185.66Z"},null,-1),It=[kt],At={key:5},St=I("path",{d:"M236,88.12a50.44,50.44,0,0,1-14.81,34.31l-34.75,34.74A50.33,50.33,0,0,1,150.62,172h-.05A50.63,50.63,0,0,1,100,120a4,4,0,0,1,4-3.89h.11a4,4,0,0,1,3.89,4.11A42.64,42.64,0,0,0,150.58,164h0a42.32,42.32,0,0,0,30.14-12.49l34.75-34.74a42.63,42.63,0,1,0-60.29-60.28l-11,11a4,4,0,0,1-5.66-5.65l11-11A50.64,50.64,0,0,1,236,88.12ZM111.78,188.49l-11,11A42.33,42.33,0,0,1,70.6,212h0a42.63,42.63,0,0,1-30.11-72.77l34.75-34.74A42.63,42.63,0,0,1,148,135.82a4,4,0,0,0,8,.23A50.64,50.64,0,0,0,69.55,98.83L34.8,133.57A50.63,50.63,0,0,0,70.56,220h0a50.33,50.33,0,0,0,35.81-14.83l11-11a4,4,0,1,0-5.65-5.66Z"},null,-1),Tt=[St],Mt={name:"PhLink"},Et=pe({...Mt,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(w){const b=w,A=ie("weight","regular"),Z=ie("size","1em"),R=ie("color","currentColor"),V=ie("mirrored",!1),x=te(()=>b.weight??A),z=te(()=>b.size??Z),k=te(()=>b.color??R),S=te(()=>b.mirrored!==void 0?b.mirrored?"scale(-1, 1)":void 0:V?"scale(-1, 1)":void 0);return(G,y)=>(h(),$("svg",Me({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:z.value,height:z.value,fill:k.value,transform:S.value},G.$attrs),[Te(G.$slots,"default"),x.value==="bold"?(h(),$("g",ut,dt)):x.value==="duotone"?(h(),$("g",ft,vt)):x.value==="fill"?(h(),$("g",ht,_t)):x.value==="light"?(h(),$("g",mt,bt)):x.value==="regular"?(h(),$("g",xt,It)):x.value==="thin"?(h(),$("g",At,Tt)):ce("",!0)],16,rt))}}),Dt={0:"pending",1:"running",2:"finished",3:"failed"};function ke(w){return new Worker("/assets/timeline.worker-CTtnDIl5.js",{type:"module",name:w?.name})}function Lt(){const w=E(!0),b=E(!1),A=E(null),Z=E([]),R=E([]),V=Ee([]),x=new Map,z=E(Date.now()),k=E(Date.now()),S=E(Date.now()-6e4),G=E(null);let y=null,K=null;const D=new Se,C=200,B=te(()=>{const v=(k.value-S.value)/6e4;return v<10?1:v<60?5:v<720?30:v<1440?60:v<1440*7?360:1440}),P=te(()=>{const _=B.value*6e4,T=Math.floor(S.value/_)*_,W=Math.ceil(k.value/_)*_,M=[];for(let j=T;j<=W;j+=_)M.push(new Date(j));return M});function n(v){return x.get(v)}function X(v,_){y||(y=new ke,Y()),y.postMessage({type:"initCanvas",payload:{canvas:v,pixelRatio:_}},[v])}function Y(){y&&(y.onmessage=v=>{const{buffers:_}=v.data;_&&(V.value=_)})}function L(v,_,T=!1){if(!y)return;const W=v.map(M=>{const j=M.context,r=j?.sentTasks?[...j.sentTasks]:[];return{id:M.id,stageId:M.stageId,createdAt:M.createdAt.getTime(),updatedAt:M.updatedAt.getTime(),sentTasks:r,triggerTaskId:j?.taskId||void 0,status:M.status,shortId:M.shortId,context:M.context}});y.postMessage({type:"data",payload:{executions:W,tasks:_,reset:T}})}function i(){y&&y.postMessage({type:"stagesList",payload:JSON.parse(JSON.stringify(R.value))})}function a(v){y&&y.postMessage({type:"view",payload:v})}function t(){y&&y.postMessage({type:"view",payload:{now:z.value,viewStart:S.value,viewEnd:k.value,spacerWidth:C,rootId:G.value}})}async function p(v,_){const T=new Set,W=[_];let M=0;const j=1e3;b.value=!0;const r=new Set;try{for(;W.length>0&&M<j;){const s=W.shift();if(T.has(s))continue;T.add(s),M++;let d=x.get(s);if(d||(d=await D.get(v,s),x.set(d.id,d)),!r.has(d.stageId)){r.add(d.stageId);const u=Z.value.filter(F=>r.has(F.id));u.length!==R.value.length&&(R.value=u,i())}const c=await D.getExecutionTasks(v,s),m={};if(c.sentTasks.forEach(u=>{m[u.id]={start:new Date(u.created.at).getTime(),end:u.completed?new Date(u.completed.at).getTime():void 0}}),c.triggerTask){const u=c.triggerTask;m[u.id]={start:new Date(u.created.at).getTime(),end:u.completed?new Date(u.completed.at).getTime():void 0}}if(L([d],m,!1),s===_){const u=d.createdAt.getTime(),F=d.updatedAt.getTime(),f=Math.max(1e3,F-u);S.value=u-f,k.value=F+f,w.value=!1}c.triggerTask&&c.triggerTask.created.byExecutionId&&(T.has(c.triggerTask.created.byExecutionId)||W.push(c.triggerTask.created.byExecutionId)),c.sentTasks.forEach(u=>{u.completed&&u.completed.byExecutionId&&(T.has(u.completed.byExecutionId)||W.push(u.completed.byExecutionId))})}}catch(s){console.error("Error loading thread",s),A.value="Failed to load execution thread."}finally{b.value=!1,w.value=!1}}async function J(v,_){if(w.value=!0,A.value=null,R.value=[],Z.value=[],V.value=[],z.value=Date.now(),x.clear(),!_){A.value="No execution ID provided.",w.value=!1;return}G.value=_,y||(y=new ke,Y()),K||(K=setInterval(()=>{z.value=Date.now()},6e4));try{const T=await D.get(v,_);if(x.set(T.id,T),T.buildId){const W=await Qe.get(T.buildId);W&&(Z.value=W.runtimesSorted)}L([],{},!0),await p(v,_)}catch(T){A.value="Failed to load data.",console.error(T),w.value=!1}}function ae(){y&&(y.terminate(),y=null),K&&(clearInterval(K),K=null)}return De([R,z,S,k],()=>{t()}),{initialLoading:w,loadingGraph:b,error:A,stages:R,stageBuffers:V,viewStart:S,viewEnd:k,now:z,timelineInterval:B,moments:P,init:J,cleanup:ae,postDataToWorker:L,initCanvas:X,updateView:a,getExecution:n}}const Rt={style:{height:"100%","min-height":"400px",position:"relative",overflow:"hidden"}},Ct={key:2,style:{position:"absolute",top:"10px",right:"220px","z-index":"10","pointer-events":"none"}},H=200,le=32,se=40,Pt=pe({__name:"TimelineComponent",props:{projectId:{},execution:{}},setup(w){const b=w,A=Ie(),{initialLoading:Z,loadingGraph:R,error:V,stages:x,stageBuffers:z,viewStart:k,viewEnd:S,init:G,cleanup:y,initCanvas:K,updateView:D}=Lt(),C=E(null),B=E(null),P=E(0),n=E(null),X=E(!1),Y=E(0),L=E(0),i=te(()=>{const r=B.value;if(!r)return 0;const s=r.height/window.devicePixelRatio-le;return Math.max(0,x.value.length*se-s)});function a(r){if(!C.value)return 0;const s=C.value.clientWidth-H,d=S.value-k.value,c=r-H;return k.value+c/s*d}function t(r){if(!C.value)return 0;const s=C.value.clientWidth-H,d=S.value-k.value,c=r-k.value;return H+c/d*s}function p(r){if(!B.value)return{x:0,y:0};const s=B.value.getBoundingClientRect();return{x:r.clientX-s.left,y:r.clientY-s.top}}function J(r,s){const d=s-le;if(r>H){const c=a(r),m=d+P.value;if(m>=0){const u=Math.floor(m/se);if(u>=0&&u<x.value.length){const F=x.value[u],f=z.value.find(q=>q.stageId===F.id);if(f){const q=f.count;for(let U=0;U<q;U++){const he=f.starts[U],ye=f.ends[U];if(c>=he&&c<=ye){const _e=u*se+(se-24)/2;if(m>=_e&&m<=_e+24)return{type:"execution",data:{id:f.ids[U],status:Dt[f.statuses[U]]||"unknown",start:he,end:ye}}}}}}}}return null}const ae=r=>{const{x:s,y:d}=p(r),c=d-le+P.value,m=Math.floor(c/se);if(m>=0&&m<x.value.length&&d>le){const f=x.value[m];n.value!==f.id&&(n.value=f.id,D({hoveredStageId:f.id}))}else n.value!==null&&(n.value=null,D({hoveredStageId:null}));if(X.value){L.value=a(s);const f=t(Y.value)-H,q=t(L.value)-H;D({selection:{active:!0,start:f,end:q}})}let u={visible:!1,x:0,label:""},F={visible:!1,x:0,y:0,title:"",items:[]};if(s>H){const f=a(s),q=new Date(f);if(!isNaN(q.getTime())){const U=q.toLocaleString([],{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3});u={visible:!0,x:s-H,label:U}}}if(s>H&&d>le){const f=J(s,d);if(f){document.body.style.cursor="pointer";const U=((f.data.end-f.data.start)/1e3).toFixed(3)+" s";F={visible:!0,x:s,y:d,title:f.type==="execution"?"Execution":"Task",items:[`Status: ${f.data.status}`,`ID: ${f.data.id}`,`Duration: ${U}`]}}else document.body.style.cursor="default"}else document.body.style.cursor="default";D({cursor:u,tooltip:F})},v=()=>{D({cursor:{visible:!1,x:0},tooltip:{visible:!1,x:0,y:0},hoveredStageId:null}),n.value=null,document.body.style.cursor="default"},_=r=>{const{x:s,y:d}=p(r);if(s<=H)return;const c=J(s,d);c&&c.type==="execution"||(X.value=!0,Y.value=a(s),L.value=Y.value)},T=r=>{const{x:s,y:d}=p(r);if(X.value){const c=Math.min(Y.value,L.value),m=Math.max(Y.value,L.value);m-c>100&&(k.value=c,S.value=m),X.value=!1,D({selection:{active:!1,start:0,end:0}})}else{const c=J(s,d);if(c&&c.type==="execution"){const m=A.resolve({name:"logs",params:{projectId:b.projectId},query:{executionId:c.data.id}});window.open(m.href,"_blank")}}},W=r=>{if(!C.value)return;const s=C.value.clientWidth-H,d=S.value-k.value;if(r.ctrlKey){const m=Math.exp(-r.deltaY*.005),u=d/m;if(u<100||u>1e3*60*60*24*365*10)return;const F=B.value.getBoundingClientRect(),f=r.clientX-F.left-H,U=k.value+f/s*d-f/s*u;k.value=U,S.value=U+u}else{const c=s/(d/6e4),m=r.deltaX/c*6e4;k.value+=m,S.value+=m,P.value=Math.max(0,Math.min(i.value,P.value+r.deltaY)),D({scrollTop:P.value})}},M=r=>{r.key==="Escape"&&X.value&&(X.value=!1,D({selection:{active:!1,start:0,end:0}}))},j=()=>{C.value&&D({viewportWidth:C.value.clientWidth,viewportHeight:C.value.clientHeight})};return Le(async()=>{if(window.addEventListener("resize",j),window.addEventListener("keydown",M),B.value){const r=B.value.transferControlToOffscreen();K(r,window.devicePixelRatio)}await Re(),j(),await G(b.projectId,b.execution.id)}),Ce(()=>{y(),window.removeEventListener("resize",j),window.removeEventListener("keydown",M)}),(r,s)=>(h(),$("div",Rt,[I("div",{ref_key:"canvasContainerRef",ref:C,style:{width:"100%",height:"100%",position:"relative",overflow:"hidden"}},[I("canvas",{ref_key:"canvasRef",ref:B,style:{display:"block",width:"100%",height:"100%"},onMousemove:ae,onMouseleave:v,onMousedown:_,onMouseup:T,onWheel:Ae(W,["prevent"])},null,544)],512),e(Z)?(h(),O(e(de),{key:0,style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%","z-index":"20",background:"#fff"},justify:"center",align:"center"},{default:l(()=>[o(e(fe),{size:"large"})]),_:1})):e(V)?(h(),O(e(de),{key:1,style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%","z-index":"20",background:"#fff"},justify:"center",align:"center"},{default:l(()=>[o(e(Pe),{type:"danger"},{default:l(()=>[ue(N(e(V)),1)]),_:1})]),_:1})):ce("",!0),e(R)&&!e(Z)?(h(),$("div",Ct,[o(e(fe))])):ce("",!0)]))}}),zt={class:"execution-header"},Wt={class:"execution-header-left"},jt={key:0,class:"status-spinner"},Ut={class:"execution-info"},Ht={class:"execution-stage"},$t={class:"execution-meta"},Bt={class:"execution-time"},Ot={class:"time-relative"},Zt={class:"time-exact"},Ft={key:0,style:{display:"flex",width:"100%","justify-content":"center"}},Nt=pe({__name:"Logs",props:{executionRepository:{},buildRepository:{},showAllFilters:{type:Boolean}},setup(w){const b=w,A=ze(),Z=Ie(),R=A.params.projectId,V=A.query.executionId;function x(){const{stageId:i,buildId:a,status:t,startDate:p,endDate:J,executionId:ae}=A.query;return p&&J?{stageId:i,buildId:a,status:t,dateRange:[oe(p),oe(J)]}:{stageId:i,buildId:a,status:t,search:ae}}function z(i){const a={};Y(),Object.entries(i).forEach(([t,p])=>{typeof p=="string"&&t==="search"&&p?a.executionId=p:typeof p=="string"&&p?a[t]=p:t==="dateRange"&&p&&oe.isDayjs(p[0])&&oe.isDayjs(p[1])&&(a.startDate=p[0].toISOString().slice(0,10),a.endDate=p[1].toISOString().slice(0,10))}),Z.replace({query:a})}function k(){const{page:i,pageSize:a}=A.query;return{currentIndex:i?parseInt(i,10):1,pageSize:a?parseInt(a,10):10}}function S(i){i=i.slice(0,6);const a=`${window.location.origin}${window.location.pathname}?executionId=${i}`;navigator.clipboard.writeText(a),re.success({content:g.translate("i18n_logs_copied_to_clipboard")})}function G(i,a){let t={...i};return t.sentTasks=a.sentTasks,delete t.mockExecution,a.triggerTask&&(t.triggerTask=a.triggerTask,delete t.taskId),t}function y(){return g.getLocale()==="pt"?it:Ve}function K(i){return lt(new Date(i),{addSuffix:!0,locale:y()})}function D(i){return st(new Date(i),"dd/MM/yyyy HH:mm:ss",{locale:y()})}async function C(i){try{await P.stopExecution(i),re.success({content:g.translate("i18n_logs_execution_stopped")})}catch{re.error({content:g.translate("i18n_logs_execution_stop_error")})}}function B(i){return!1}const P=Ye();P.init({executionRepository:b.executionRepository,buildRepository:b.buildRepository,projectId:R,filters:x(),pagination:k(),pool:!0,openedExecutionId:V,onFilterChange:z});const{state:n}=P;function X(i,a){P.fetchExecutionLogsPage(i,a)}We(()=>P.teardown());function Y(){const i=n.filters.dateRange,a=oe();!i||!i[1]?n.filters.dateRange=[a.subtract(90,"day"),a]:i[1].diff(i[0],"day")>90&&(n.filters.dateRange=[i[1].subtract(90,"day"),i[1]],re.warning({content:g.translate("i18n_logs_date_range_limit_warning",null,90)}))}z(n.filters);function L(i,a){return a&&"label"in a&&typeof a.label=="string"?a.label.toLowerCase().includes(i.toLowerCase()):!0}return(i,a)=>(h(),O(e(be),{direction:"vertical",style:{width:"100%",padding:"0px 0px 20px 0px"}},{default:l(()=>[o(e(je),null,{default:l(()=>[ue(N(e(g).translate("i18n_logs_title")),1)]),_:1}),w.showAllFilters?(h(),O(e(me),{key:0,layout:"vertical"},{default:l(()=>[o(e(ge),{gutter:10},{default:l(()=>[o(e(ee),{span:12},{default:l(()=>[o(e(Q),{label:e(g).translate("i18n_logs_execution_id_label")},{default:l(()=>[o(e(Ue),{value:e(n).filters.search,"onUpdate:value":a[0]||(a[0]=t=>e(n).filters.search=t),placeholder:e(g).translate("i18n_logs_search_by_execution_id_placeholder"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),o(e(ee),{span:12},{default:l(()=>[o(e(Q),{label:e(g).translate("i18n_logs_stage_label")},{default:l(()=>[o(e(ne),{value:e(n).filters.stageId,"onUpdate:value":a[1]||(a[1]=t=>e(n).filters.stageId=t),options:e(n).filterOptions.stages,placeholder:e(g).translate("i18n_logs_all_placeholder"),"allow-clear":"","show-search":"","filter-option":L},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),o(e(ge),{gutter:10},{default:l(()=>[o(e(ee),{span:8},{default:l(()=>[o(e(Q),{label:e(g).translate("i18n_logs_date_label")},{default:l(()=>[o(e(xe),{value:e(n).filters.dateRange,"onUpdate:value":a[2]||(a[2]=t=>e(n).filters.dateRange=t),style:{width:"100%"}},null,8,["value"])]),_:1},8,["label"])]),_:1}),o(e(ee),{span:10},{default:l(()=>[o(e(Q),{label:e(g).translate("i18n_logs_version_label")},{default:l(()=>[o(e(ne),{value:e(n).filters.buildId,"onUpdate:value":a[3]||(a[3]=t=>e(n).filters.buildId=t),options:e(n).filterOptions.builds,"option-label":"label","option-value":"value",filter:!1,placeholder:e(g).translate("i18n_logs_all_placeholder"),"allow-clear":"","show-search":"","filter-option":L},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1}),o(e(ee),{span:6},{default:l(()=>[o(e(Q),{label:e(g).translate("i18n_logs_status_label")},{default:l(()=>[o(e(ne),{value:e(n).filters.status,"onUpdate:value":a[4]||(a[4]=t=>e(n).filters.status=t),options:e(n).filterOptions.statuses,"option-label":"label","option-value":"value",filter:!1,placeholder:e(g).translate("i18n_logs_all_placeholder"),"allow-clear":"","show-search":"","filter-option":L},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})):(h(),O(e(me),{key:1,layout:"vertical"},{default:l(()=>[o(e(ge),{gutter:10},{default:l(()=>[o(e(ee),{span:8},{default:l(()=>[o(e(Q),{label:e(g).translate("i18n_logs_date_label")},{default:l(()=>[o(e(xe),{value:e(n).filters.dateRange,"onUpdate:value":a[5]||(a[5]=t=>e(n).filters.dateRange=t),style:{width:"100%"}},null,8,["value"])]),_:1},8,["label"])]),_:1}),o(e(ee),{span:10},{default:l(()=>[o(e(Q),{label:e(g).translate("i18n_logs_script_label")},{default:l(()=>[o(e(ne),{value:e(n).filters.stageId,"onUpdate:value":a[6]||(a[6]=t=>e(n).filters.stageId=t),options:e(n).filterOptions.stages,placeholder:e(g).translate("i18n_logs_all_placeholder"),"allow-clear":"","show-search":"","filter-option":L},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1}),o(e(ee),{span:6},{default:l(()=>[o(e(Q),{label:e(g).translate("i18n_logs_status_label")},{default:l(()=>[o(e(ne),{value:e(n).filters.status,"onUpdate:value":a[7]||(a[7]=t=>e(n).filters.status=t),options:e(n).filterOptions.statuses,"option-label":"label","option-value":"value",filter:!1,placeholder:e(g).translate("i18n_logs_all_placeholder"),"allow-clear":"","show-search":"","filter-option":L},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})),e(n).currentPage.loadingExecutions||e(n).currentPage.waitingDebounce?(h(),O(e(fe),{key:2,style:{width:"100%"}})):e(n).currentPage.executions&&e(n).currentPage.executions.length>0?(h(),O(e(be),{key:3,direction:"vertical",style:{width:"100%"}},{default:l(()=>[o(e(Ke),{"active-key":e(n).currentPage.openedExecutionIds,"onUpdate:activeKey":a[9]||(a[9]=t=>e(n).currentPage.openedExecutionIds=t),bordered:!1,style:{"background-color":"transparent"},onChange:e(P).fetchEmptyLogs},{default:l(()=>[(h(!0),$(He,null,$e(e(n).currentPage.executions,t=>(h(),O(e(Je),{key:t.id,class:"execution-card"},{header:l(()=>[I("div",zt,[I("div",Wt,[t.status==="running"?(h(),$("div",jt,[o(e(ot),{spin:""})])):(h(),$("div",{key:1,class:Ze(["status-dot",t.status])},null,2)),I("div",Ut,[I("span",Ht,N(e(n).filterOptions.stages.find(p=>p.value===t.stageId)?.label??"Deleted stage"),1),I("span",$t,N(e(g).translate("i18n_logs_execution_id_label"))+": "+N(t.id.slice(0,8))+" Â· "+N(e(g).translate("i18n_logs_version_label"))+": "+N(t.buildId.slice(0,8)),1)])]),I("span",Bt,[I("span",Ot,N(K(t.createdAt)),1),I("span",Zt,N(D(t.createdAt)),1)])])]),extra:l(()=>[o(e(Be),{trigger:["click"],placement:"bottomRight"},{overlay:l(()=>[o(e(Oe),null,{default:l(()=>[o(e(we),{key:"copy",onClick:p=>S(t.id)},{default:l(()=>[o(e(de),{align:"center",gap:8},{default:l(()=>[o(e(Et),{size:16}),ue(" "+N(e(g).translate("i18n_logs_copy_url_tooltip")),1)]),_:1})]),_:1},8,["onClick"]),t.status==="running"&&B(t.buildId)?(h(),O(e(we),{key:"stop",danger:"",onClick:p=>C(t.id)},{default:l(()=>[o(e(de),{align:"center",gap:8},{default:l(()=>[o(e(at),{size:16}),ue(" "+N(e(g).translate("i18n_logs_stop_execution")),1)]),_:1})]),_:1},8,["onClick"])):ce("",!0)]),_:2},1024)]),default:l(()=>[I("div",{class:"execution-actions-trigger",onClick:a[8]||(a[8]=Ae(()=>{},["stop"]))},[o(e(tt),{size:18})])]),_:2},1024)]),default:l(()=>[e(n).currentPage.executionData[t.id]?(h(),O(e(nt),{key:1},{default:l(()=>[o(e(ve),{key:"logs",tab:"Logs"},{default:l(()=>[o(qe,{logs:e(n).currentPage.executionData[t.id].logs,pagination:e(n).currentPage.executionData[t.id].logsPagination,onPageChange:p=>X(t.id,p)},null,8,["logs","pagination","onPageChange"])]),_:2},1024),o(e(ve),{key:"context",tab:e(g).translate("i18n_executioncontext_header")},{default:l(()=>[o(Ge,{data:G(t.context,e(n).currentPage.executionData[t.id].tasks),"show-fix-with-ai":!1},null,8,["data"])]),_:2},1032,["tab"]),o(e(ve),{key:"timeline",tab:"Timeline"},{default:l(()=>[o(Pt,{"project-id":e(R),execution:t},null,8,["project-id","execution"])]),_:2},1024)]),_:2},1024)):(h(),$("div",Ft,[o(e(fe))]))]),_:2},1024))),128))]),_:1},8,["active-key","onChange"]),o(e(Fe),{current:e(n).pagination.currentIndex,"onUpdate:current":a[10]||(a[10]=t=>e(n).pagination.currentIndex=t),"page-size":e(n).pagination.pageSize,"onUpdate:pageSize":a[11]||(a[11]=t=>e(n).pagination.pageSize=t),total:e(n).pagination.totalCount,"show-total":t=>e(g).translate("i18n_logs_found_runs",null,t),"show-size-changer":""},null,8,["current","page-size","total","show-total"])]),_:1})):(h(),O(e(Ne),{key:4}))]),_:1}))}}),Vt=Xe(Nt,[["__scopeId","data-v-7a86f06d"]]),fa=pe({__name:"Logs",setup(w){const b=new Se,A=new et;return(Z,R)=>(h(),O(Vt,{"execution-repository":e(b),"build-repository":e(A),"show-all-filters":""},null,8,["execution-repository","build-repository"]))}});export{fa as default};
//# sourceMappingURL=Logs-CFdZLeFi.js.map
