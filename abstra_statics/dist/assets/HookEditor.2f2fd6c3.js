import{d as w,b as o,c as n,e as a,q as S,r as R,U as k,N as f,x as t,F as x,L as P,v as U,a as V,t as $,z as c,W as b,Z as B,a3 as q,D as H,O,Q as J,w as y,J as L}from"./registerWidgets.36cee80e.js";import{T as N,a as I}from"./Tab.e6f8f251.js";import{L as D}from"./CircularLoading.4d896bc6.js";import{R as A,L as E,S as G,_ as M}from"./UnsavedChangesHandler.vue_vue_type_script_setup_true_lang.5b8b5cdb.js";import{a as Q}from"./asyncComputed.db02d47d.js";import{H as F}from"./hooks.86584c9a.js";import{B as j}from"./BackButton.d56f1b56.js";import{B as z,C as W,f as Z}from"./icons.ec70ef26.js";import{S as K}from"./SaveButton.a94c40fb.js";import{D as X}from"./DocsButton.bc7745c6.js";import"./lottie.860c5500.js";import"./forms.cc67aabe.js";import"./activeRecord.650b5598.js";import"./pubsub.53791b0c.js";import"./dashes.3894792c.js";import"./runnerData.5e542713.js";import"./jobs.8b0e6aec.js";import"./workspaces.f9e88f87.js";import"./uuid.426f03a1.js";import"./login.dbf91bd7.js";(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},d=new Error().stack;d&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[d]="8978d364-cf05-4633-b65e-0f5f279976e7",s._sentryDebugIdIdentifier="sentry-dbid-8978d364-cf05-4633-b65e-0f5f279976e7")}catch{}})();const Y={class:"hook-settings"},ee=w({__name:"HookSettings",props:{hook:null},setup(s){return(d,u)=>(o(),n("div",Y,[a(A,{runtime:s.hook},null,8,["runtime"])]))}});const oe=S(ee,[["__scopeId","data-v-6e8accf0"]]),te={class:"options-wrapper"},se=["onClick"],ne=w({__name:"ADropdown",props:{options:null,value:null},emits:["select"],setup(s,{emit:d}){const u=R(null),e=i=>{var m;d("select",i),(m=u.value)==null||m.blur()};return(i,m)=>(o(),n("div",{ref_key:"dropdown",ref:u,class:"dropdown",tabindex:"1"},[k(f(s.value)+" ",1),t("div",te,[(o(!0),n(x,null,P(s.options,p=>(o(),n("div",{key:p.value,class:"option",onClick:T=>e(p.value)},f(p.label),9,se))),128))])],512))}});const ae=S(ne,[["__scopeId","data-v-cac46a2e"]]),C=s=>(O("data-v-36cb1667"),s=s(),J(),s),le={class:"hook-runner"},ie={class:"title"},re={class:"section"},ce=C(()=>t("div",{class:"section-header"},"Request configuration",-1)),de=C(()=>t("div",{class:"subsection-label"},"Method",-1)),ue={class:"subsection-label"},pe=["onUpdate:modelValue"],_e=["onUpdate:modelValue"],he={key:0,class:"subsection-label"},me={class:"property"},ve=C(()=>t("div",{class:"property-label"},"Body is JSON",-1)),fe={class:"section"},ye=C(()=>t("div",{class:"section-header"},"Response",-1)),ke={key:0,class:"section"},ge={class:"no-execution-message"},be={key:1,class:"section"},xe=w({__name:"HookRunner",props:{hook:null},setup(s){const d=s,u=[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"PUT",value:"PUT"},{label:"PATCH",value:"PATCH"}],e=U({queryParams:[{name:"",value:""}],method:"GET",body:"",loading:!1,isBodyJson:!0}),i=E.create(),m=async()=>{const v={"Content-Type":e.isBodyJson?"application/json":"text/plain"},r=await d.hook.test({method:e.method,query:e.queryParams.reduce((_,{name:l,value:h})=>(l&&h&&(_[l]=h),_),{}),body:e.body,headers:{...v}});e.response=r,r.stderr&&i.log({type:"stderr",log:r.stderr}),r.stdout&&i.log({type:"stdout",log:r.stdout})},p=()=>{e.queryParams.push({name:"",value:""})},T=v=>{e.queryParams=e.queryParams.filter((r,_)=>_!==v)};return(v,r)=>{const _=V("icon");return o(),n("div",le,[t("div",ie,[k(" Test your hook here "),e.loading?(o(),$(D,{key:0})):(o(),n("button",{key:1,class:"execution-button",onClick:m},[a(_,{path:c(z),width:"14",height:"14",fill:"#ffffff"},null,8,["path"]),k(" Run ")]))]),t("div",re,[ce,de,a(ae,{value:e.method,options:u,onSelect:r[0]||(r[0]=l=>e.method=l)},null,8,["value"]),t("div",ue,[k(" Query Params "),a(_,{class:"action-icon",path:c(W),width:"16",height:"16","fill-hover":"#777777",onClick:p},null,8,["path"])]),(o(!0),n(x,null,P(e.queryParams,(l,h)=>(o(),n("div",{key:h,class:"params-input"},[b(t("input",{"onUpdate:modelValue":g=>l.name=g,type:"text",placeholder:"name"},null,8,pe),[[B,l.name]]),b(t("input",{"onUpdate:modelValue":g=>l.value=g,type:"text",placeholder:"value"},null,8,_e),[[B,l.value]]),a(_,{class:"delete-icon",path:c(Z),"fill-hover":"#777777",onClick:g=>T(h)},null,8,["path","onClick"])]))),128)),e.method!=="GET"?(o(),n("div",he,[k(" Request Body "),t("div",me,[b(t("input",{"onUpdate:modelValue":r[1]||(r[1]=l=>e.isBodyJson=l),class:"checkbox-input",type:"checkbox"},null,512),[[q,e.isBodyJson]]),ve])])):H("",!0),e.method!=="GET"?b((o(),n("textarea",{key:1,"onUpdate:modelValue":r[2]||(r[2]=l=>e.body=l)},null,512)),[[B,e.body]]):H("",!0)]),t("div",fe,[ye,e.loading?(o(),n("div",ke,[t("div",ge,[a(D)])])):e.response?(o(),n("div",be,[t("pre",null,"Status: "+f(e.response.status),1),(o(!0),n(x,null,P(e.response.headers,(l,h)=>(o(),n("pre",{key:h},f(h)+": "+f(l),1))),128)),t("pre",null,f(e.response.body),1)])):H("",!0)])])}}});const we=S(xe,[["__scopeId","data-v-36cb1667"]]),Se={class:"page"},Ce={key:0,class:"loading"},Te=w({__name:"HookEditor",setup(s){const d=L(),u=E.create(),{loading:e,result:i}=Q(async()=>await F.get(d.params.hookPath)),m=async p=>{i.value&&(i.value.path=p,await i.value.save())};return(p,T)=>{var v;return o(),n(x,null,[t("div",Se,[c(e)||!c(i)?(o(),n("div",Ce,[a(D)])):(o(),$(N,{key:1,class:"editor"},{left:y(()=>[a(j,{link:"/_editor/hooks"})]),right:y(()=>[a(X,{path:"hooks"}),a(K,{model:c(i)},null,8,["model"])]),default:y(()=>[a(I,{title:"Debug"},{default:y(()=>[a(we,{hook:c(i)},null,8,["hook"])]),_:1}),a(I,{title:"Settings"},{default:y(()=>[a(oe,{hook:c(i),onUpdatePath:m},null,8,["hook"])]),_:1})]),_:1})),a(G,{"log-service":c(u),runtime:"hooks"},null,8,["log-service"])]),a(M,{"has-changes":(v=c(i))==null?void 0:v.hasChanges()},null,8,["has-changes"])],64)}}});const je=S(Te,[["__scopeId","data-v-69cc27ff"]]);export{je as default};
//# sourceMappingURL=HookEditor.2f2fd6c3.js.map
