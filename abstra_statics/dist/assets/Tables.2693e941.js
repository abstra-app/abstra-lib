import{_ as F}from"./AbstraButton.vue_vue_type_script_setup_true_lang.30bbaa32.js";import{o as T}from"./omniChatStore.f8037396.js";import{a as Z}from"./string.8637e715.js";import{d as B,at as w,c as y,o as l,ac as u,ae as L,h as D,ed as P,e as c,ec as R,ei as U,r as I,al as V,U as G,ax as q,j as O,f as r,u as e,a as g,b as o,aY as S,S as Q,A as W,g as A,t as C,i as m,df as Y,dj as H,bQ as j,cC as $,ej as J,cD as K,cE as X,M as ee}from"./jwt-decode.esm.8627fbd4.js";import{a as te,g as ae}from"./router.6385fe0d.js";import{T as le}from"./tables.18201695.js";import{T as ne}from"./TableCard.56b90e96.js";import{_ as re}from"./TablesTabs.vue_vue_type_script_setup_true_lang.867e2f0b.js";import{u as oe}from"./useTables.fc16a66f.js";import"./record.f89bb5e3.js";import"./uuid.b09f512f.js";import"./PhCopySimple.vue.58329409.js";import"./index.d49580c9.js";import"./PhKey.vue.6ce693a9.js";import"./PhPencil.vue.60ff846f.js";import"./vue-flow-core.7da9a250.js";import"./Card.ef87977f.js";(function(){try{var f=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new Error().stack;s&&(f._sentryDebugIds=f._sentryDebugIds||{},f._sentryDebugIds[s]="15ad8281-7ac1-4692-9f70-204ab6ce91bb",f._sentryDebugIdIdentifier="sentry-dbid-15ad8281-7ac1-4692-9f70-204ab6ce91bb")}catch{}})();const se=["width","height","fill","transform"],ie={key:0},ue=c("path",{d:"M232.49,215.51,185,168a92.12,92.12,0,1,0-17,17l47.53,47.54a12,12,0,0,0,17-17ZM44,112a68,68,0,1,1,68,68A68.07,68.07,0,0,1,44,112Z"},null,-1),de=[ue],me={key:1},pe=c("path",{d:"M192,112a80,80,0,1,1-80-80A80,80,0,0,1,192,112Z",opacity:"0.2"},null,-1),ce=c("path",{d:"M229.66,218.34,179.6,168.28a88.21,88.21,0,1,0-11.32,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"},null,-1),fe=[pe,ce],be={key:2},ve=c("path",{d:"M168,112a56,56,0,1,1-56-56A56,56,0,0,1,168,112Zm61.66,117.66a8,8,0,0,1-11.32,0l-50.06-50.07a88,88,0,1,1,11.32-11.31l50.06,50.06A8,8,0,0,1,229.66,229.66ZM112,184a72,72,0,1,0-72-72A72.08,72.08,0,0,0,112,184Z"},null,-1),_e=[ve],ge={key:3},ye=c("path",{d:"M228.24,219.76l-51.38-51.38a86.15,86.15,0,1,0-8.48,8.48l51.38,51.38a6,6,0,0,0,8.48-8.48ZM38,112a74,74,0,1,1,74,74A74.09,74.09,0,0,1,38,112Z"},null,-1),he=[ye],we={key:4},ke=c("path",{d:"M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"},null,-1),xe=[ke],Ae={key:5},Ce=c("path",{d:"M226.83,221.17l-52.7-52.7a84.1,84.1,0,1,0-5.66,5.66l52.7,52.7a4,4,0,0,0,5.66-5.66ZM36,112a76,76,0,1,1,76,76A76.08,76.08,0,0,1,36,112Z"},null,-1),Me=[Ce],Te={name:"PhMagnifyingGlass"},Ze=B({...Te,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(f){const s=f,k=w("weight","regular"),b=w("size","1em"),d=w("color","currentColor"),x=w("mirrored",!1),p=y(()=>{var t;return(t=s.weight)!=null?t:k}),v=y(()=>{var t;return(t=s.size)!=null?t:b}),h=y(()=>{var t;return(t=s.color)!=null?t:d}),_=y(()=>s.mirrored!==void 0?s.mirrored?"scale(-1, 1)":void 0:x?"scale(-1, 1)":void 0);return(t,M)=>(l(),u("svg",P({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:v.value,height:v.value,fill:h.value,transform:_.value},t.$attrs),[L(t.$slots,"default"),p.value==="bold"?(l(),u("g",ie,de)):p.value==="duotone"?(l(),u("g",me,fe)):p.value==="fill"?(l(),u("g",be,_e)):p.value==="light"?(l(),u("g",ge,he)):p.value==="regular"?(l(),u("g",we,xe)):p.value==="thin"?(l(),u("g",Ae,Me)):D("",!0)],16,se))}}),Ie={key:1,style:{padding:"1rem"}},Se={style:{flex:"1"}},We=B({__name:"Tables",setup(f){const s=R(),b=U().params.projectId,{tables:d,loading:x,fetchTables:p}=oe(b),v=I(""),h=y(()=>{if(!d.value)return[];if(!v.value)return d.value;const i=v.value.toLowerCase();return d.value.filter(a=>a.name.toLowerCase().includes(i))}),_=I(!1),t=V({name:""}),M=i=>Z(i,!0),N=i=>Z(i,!1),z=async()=>{const i=await le.create(b,t.name);_.value=!1,t.name="",s.push({name:"tableEditor",params:{tableId:i.id,projectId:b}})};return G(()=>{const i=T.subscribe("tableCreated",()=>{p(!0)});q(()=>{T.unsubscribe(i)})}),(i,a)=>{const E=O("RouterLink");return l(),u(S,null,[r(re),e(x)?(l(),g(e(Q),{key:0,style:{width:"100%","margin-top":"2rem"}})):(l(),u("div",Ie,[r(e(H),{justify:"space-between",align:"center",style:{"margin-bottom":"1rem"}},{default:o(()=>[c("div",Se,[r(e(W),{level:3},{default:o(()=>[A(C(e(m).translate("i18n_tables_tables")),1)]),_:1}),r(e(Y),{type:"secondary"},{default:o(()=>[A(C(e(m).translate("i18n_tables_description")),1)]),_:1})]),r(F,{type:"primary",onClick:a[0]||(a[0]=n=>_.value=!0)},{default:o(()=>[A(C(e(m).translate("i18n_tables_create_table")),1)]),_:1})]),_:1}),e(d)&&e(d).length>0?(l(),g(e(j),{key:0,value:v.value,"onUpdate:value":a[1]||(a[1]=n=>v.value=n),placeholder:e(m).translate("i18n_tables_search_placeholder"),"allow-clear":"",style:{"margin-bottom":"1rem","max-width":"400px"}},{prefix:o(()=>[r(e(Ze),{size:16})]),_:1},8,["value","placeholder"])):D("",!0),!e(d)||e(d).length===0?(l(),g(e($),{key:1,description:e(m).translate("i18n_tables_empty_title")},null,8,["description"])):h.value.length===0?(l(),g(e($),{key:2,description:e(m).translate("i18n_tables_no_match")},null,8,["description"])):(l(),g(e(ae),{key:3,gutter:[16,16]},{default:o(()=>[(l(!0),u(S,null,J(h.value,n=>(l(),g(e(te),{key:n.id,xs:24,sm:24,md:12,lg:12,xl:8,xxl:8},{default:o(()=>[r(E,{to:`/projects/${e(b)}/tables/${n.id}`,style:{"text-decoration":"none",color:"inherit"}},{default:o(()=>[r(ne,{table:n,"project-id":e(b),"show-edit-button":!1},null,8,["table","project-id"])]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1}))])),r(e(ee),{open:_.value,"onUpdate:open":a[5]||(a[5]=n=>_.value=n),title:e(m).translate("i18n_tables_create_table"),onOk:z,onCancel:a[6]||(a[6]=n=>_.value=!1)},{default:o(()=>[r(e(K),{model:t,layout:"vertical"},{default:o(()=>[r(e(X),{label:e(m).translate("i18n_tables_table_name"),name:"name"},{default:o(()=>[r(e(j),{value:t.name,"onUpdate:value":a[2]||(a[2]=n=>t.name=n),placeholder:e(m).translate("i18n_tables_enter_table_name"),onBlur:a[3]||(a[3]=n=>t.name=N(t.name)),onInput:a[4]||(a[4]=n=>t.name=M(t.name))},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["open","title"])],64)}}});export{We as default};
//# sourceMappingURL=Tables.2693e941.js.map
