import{f as r,f7 as C,d as O,L as V,z as B,r as _,b as D,eX as P,w as d,e as k,u as c,d5 as z,aV as f,d6 as E,b_ as I,e$ as A,f6 as L,cP as j,at as H}from"./outputWidgets.216ab6ee.js";import{U as N}from"./UnsavedChangesHandler.ab3bf4bc.js";import{n as $}from"./index.920e6a0b.js";(function(){try{var a=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},n=new Error().stack;n&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[n]="1dd0dfa7-b7c7-4f71-b377-cd5c48612a7a",a._sentryDebugIdIdentifier="sentry-dbid-1dd0dfa7-b7c7-4f71-b377-cd5c48612a7a")}catch{}})();var x={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};const M=x;function S(a){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?Object(arguments[n]):{},s=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(t).filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),s.forEach(function(o){U(a,o,t[o])})}return a}function U(a,n,t){return n in a?Object.defineProperty(a,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[n]=t,a}var v=function(n,t){var s=S({},n,t.attrs);return r(C,S({},s,{icon:M}),null)};v.displayName="SaveOutlined";v.inheritAttrs=!1;const T=v,X={class:"popup-container"},Y={style:{padding:"0px 4px"}},q=O({__name:"SaveButton",props:{model:{},neverShowPopover:{type:Boolean}},emits:["save"],setup(a,{emit:n}){var h;const t=a,s=e=>{var l;return(l=e.parentElement)!=null?l:document.body},o=new V(B.boolean(),"dontShowUnsavedChanges"),p=_((h=o.get())!=null?h:!1),w=()=>{o.set(!0),p.value=!0},i=_(!1);async function g(){i.value=!0;try{await t.model.save(),n("save")}catch{$.error({message:"Error saving"})}finally{i.value=!1}}return addEventListener("keydown",e=>{(e.metaKey||e.ctrlKey)&&e.key==="s"&&(e.preventDefault(),g())}),addEventListener("beforeunload",e=>{t.model.hasChanges()&&(e.preventDefault(),e.returnValue="")}),(e,l)=>{var m;return D(),P("div",X,[r(c(j),{placement:"left",open:e.model.hasChanges()&&!p.value&&!e.neverShowPopover,"get-popup-container":s},{content:d(()=>[k("div",Y,[r(c(z),null,{default:d(()=>[f("You have unsaved changes")]),_:1}),r(c(E),{onClick:w},{default:d(()=>[f("Don't show this again")]),_:1})])]),default:d(()=>{var b,y;return[r(c(I),{class:A(["save-button",{changes:(b=e.model)==null?void 0:b.hasChanges()}]),loading:i.value,disabled:!((y=e.model)!=null&&y.hasChanges()),onClick:l[0]||(l[0]=u=>g())},{icon:d(()=>[r(c(T))]),default:d(()=>{var u;return[f(L((u=e.model)!=null&&u.hasChanges()?"Save":"Saved")+" ",1)]}),_:1},8,["class","loading","disabled"])]}),_:1},8,["open"]),r(N,{"has-changes":(m=e.model)==null?void 0:m.hasChanges()},null,8,["has-changes"])])}}});const K=H(q,[["__scopeId","data-v-3136ae90"]]);export{K as S};
//# sourceMappingURL=SaveButton.ff408e23.js.map
