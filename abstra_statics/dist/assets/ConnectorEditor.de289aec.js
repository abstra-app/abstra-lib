import{d as v,w as M,ac as P,o as E,W as N,ad as q,b as e,c as t,D as w,t as C,F as $,N as k,y as d,O as I,e as f,L as T,E as p,u as A,al as V,$ as L,z as U,ab as G,a as x,A as y,H as z,V as F,K as H,x as S,X as J,Q,R as W}from"./registerWidgets.a9b9c198.js";import{b as D}from"./index.6965b89d.js";import"./gateway.ff7b2acd.js";import{C as X}from"./connector.2bb2cd57.js";import{a as Y}from"./asyncComputed.380e0794.js";import{B as Z}from"./BackButton.1b50147b.js";import{S as K}from"./SaveButton.d48dae5b.js";import{L as ee}from"./CircularLoading.7f46cf05.js";import"./passwordlessManager.18e9d509.js";import"./pubsub.d6cf90d7.js";import"./activeRecord.ded96690.js";import"./icons.e4ff78f2.js";import"./lottie.cb2a87b3.js";(function(){try{var l=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},o=new Error().stack;o&&(l._sentryDebugIds=l._sentryDebugIds||{},l._sentryDebugIds[o]="8f9024b1-6ed6-4af4-aded-15a78808d60b",l._sentryDebugIdIdentifier="sentry-dbid-8f9024b1-6ed6-4af4-aded-15a78808d60b")}catch{}})();const te={class:"tab"},se=v({__name:"Tab",props:{title:{},icon:{}},setup(l){const o=l,r=M({isActive:!1,title:o.title,icon:o.icon}),s=P("addTab");return E(()=>{s(r)}),(n,a)=>N((e(),t("div",te,[w(n.$slots,"default",{},void 0,!0)],512)),[[q,r.isActive]])}});const O=C(se,[["__scopeId","data-v-497e4e8e"]]),ne=["value"],ae=v({__name:"TextInput",props:{value:{},schema:{}},emits:["change"],setup(l,{emit:o}){return(r,s)=>(e(),t("input",{value:r.value,onChange:s[0]||(s[0]=n=>o("change",n.target.value))},null,40,ne))}}),oe=["value"],ce=v({__name:"NumberInput",props:{value:{},schema:{}},emits:["change"],setup(l,{emit:o}){return(r,s)=>(e(),t("input",{value:r.value,type:"number",onChange:s[0]||(s[0]=n=>o("change",n.target.value))},null,40,oe))}}),re=["value"],le=v({__name:"BooleanInput",props:{value:{type:Boolean},schema:{}},emits:["change"],setup(l,{emit:o}){return(r,s)=>(e(),t("input",{value:r.value,type:"checkbox",onChange:s[0]||(s[0]=n=>o("change",n.target.checked))},null,40,re))}}),ue={class:"oi"},ie={class:"oi-item-label"},de=v({__name:"ObjectInput",props:{value:{},schema:{}},emits:["change"],setup(l,{emit:o}){var g;const r=l,s=M({value:(g=r.value)!=null?g:{}}),n=(_,c)=>{s.value[_]=c,a()},a=()=>{o("change",s.value)};return(_,c)=>(e(),t("div",ue,[(e(!0),t($,null,k(r.schema.values,(h,i)=>(e(),t("div",{key:i,class:"oi-item"},[d("div",ie,I(i),1),f(R,{class:"oi-item-input",schema:h,value:s.value[i],onChange:b=>n(i,b)},null,8,["schema","value","onChange"])]))),128))]))}});const _e=C(de,[["__scopeId","data-v-bd751ecc"]]),pe={class:"ai"},he=["onClick"],me=v({__name:"ArrayInput",props:{value:{},schema:{}},emits:["change"],setup(l,{emit:o}){var c;const s=M({value:(c=l.value)!=null?c:[]}),n=()=>{s.value.push(void 0)},a=h=>{s.value.splice(h,1),_()},g=(h,i)=>{s.value[h]=i,_()},_=()=>{o("change",s.value)};return(h,i)=>(e(),t("div",pe,[(e(!0),t($,null,k(s.value,(b,u)=>(e(),t("div",{key:u,class:"ai-item"},[f(R,{schema:h.schema.items,value:b,onChange:m=>g(u,m)},null,8,["schema","value","onChange"]),d("button",{class:"ai-item-remove",onClick:m=>a(u)},"x",8,he)]))),128)),d("button",{class:"ai-item-add",onClick:i[0]||(i[0]=b=>n())},"Add")]))}});const ve=C(me,[["__scopeId","data-v-a6c8b9fb"]]),ge=["value"],be=["value"],fe=v({__name:"OptionsInput",props:{value:{},schema:{}},emits:["change"],setup(l,{emit:o}){return(r,s)=>(e(),t("select",{value:r.value,onChange:s[0]||(s[0]=n=>o("change",n.target.value))},[(e(!0),t($,null,k(r.schema.values,n=>(e(),t("option",{key:n,value:n},I(n),9,be))),128))],40,ge))}}),ye=["value"],$e=v({__name:"UnionInput",props:{value:{},schema:{}},emits:["change"],setup(l,{emit:o}){return(r,s)=>(e(),t("input",{value:r.value,onChange:s[0]||(s[0]=n=>o("change",n.target.value))},null,40,ye))}}),ke=["value"],Ie=v({__name:"AnyInput",props:{value:{},schema:{}},emits:["change"],setup(l,{emit:o}){return(r,s)=>(e(),t("input",{value:r.value,onChange:s[0]||(s[0]=n=>o("change",n.target.value))},null,40,ke))}}),Ce={string:ae,number:ce,boolean:le,object:_e,array:ve,options:fe,any:Ie,union:$e},Se={class:"gi"},Te={key:0,class:"gi-header"},Me={key:0,class:"gi-label"},we={key:1,class:"gi-tags"},Ae={key:0,class:"gi-required"},Re={key:1,class:"gi-required"},Be={key:1,class:"gi-description"},je=v({__name:"GenericInput",props:{value:{},schema:{}},emits:["change"],setup(l,{emit:o}){const r=l,s=T(()=>({component:Ce[r.schema.type],props:{value:r.value,schema:r.schema}}));return(n,a)=>(e(),t("div",Se,["label"in n.schema?(e(),t("div",Te,["label"in n.schema?(e(),t("label",Me,I(n.schema.label),1)):p("",!0),"required"in n.schema||"secret"in n.schema?(e(),t("div",we,["required"in n.schema&&n.schema.required?(e(),t("span",Ae,"[Required]")):p("",!0),"secret"in n.schema&&n.schema.secret?(e(),t("span",Re,"[Secret]")):p("",!0)])):p("",!0)])):p("",!0),"description"in n.schema?(e(),t("div",Be,I(n.schema.description),1)):p("",!0),(e(),A(L(s.value.component),V({class:"gi-input"},s.value.props,{onChange:a[0]||(a[0]=g=>o("change",g))}),null,16))]))}});const R=C(je,[["__scopeId","data-v-dd33d764"]]),De={class:"tab-menu"},Oe={class:"tabs"},Ee={key:0,class:"group"},Ne={class:"group"},Pe=["onClick"],qe={key:1,class:"group"},Ve={class:"content"},Le=v({__name:"TabMenuUnderline",setup(l){const o=M([]),r=U(),s=a=>{const g=_=>_==a;o.forEach((_,c)=>{_.isActive=g(c)})},n=T(()=>o.findIndex(a=>a.isActive));return G("addTab",a=>{o.push(a)}),E(()=>{s(0)}),(a,g)=>{const _=x("icon");return e(),t("div",De,[d("div",Oe,[y(r).left?(e(),t("div",Ee,[w(a.$slots,"left",{},void 0,!0)])):p("",!0),d("div",Ne,[(e(!0),t($,null,k(o,(c,h)=>(e(),t("button",{key:c.title,class:z(["form-tab",n.value==h&&"active"]),onClick:i=>s(h)},[c.icon?(e(),A(_,{key:0,path:c.icon,fill:"#8692A5",width:"10",height:"10"},null,8,["path"])):p("",!0),F(" "+I(c.title),1)],10,Pe))),128))]),y(r).right?(e(),t("div",qe,[w(a.$slots,"right",{},void 0,!0)])):p("",!0)]),d("div",Ve,[w(a.$slots,"default",{},void 0,!0)])])}}});const Ue=C(Le,[["__scopeId","data-v-f2e43fa2"]]),B=l=>(Q("data-v-63dce332"),l=l(),W(),l),Ge={class:"page settings"},xe={class:"page test"},ze={class:"test-method-selector"},Fe=B(()=>d("label",{class:"test-method-selector-label"},"Method",-1)),He=B(()=>d("option",{value:null,disabled:"",selected:"",hidden:""},"Select a method",-1)),Je=["value"],Qe={key:0,class:"test-method-parameters"},We=B(()=>d("label",{class:"test-method-parameters-label"},"Params",-1)),Xe={key:1,class:"test-method-response"},Ye=B(()=>d("label",{class:"test-method-response-label"},"Response",-1)),Ze={key:0,class:"test-method-response-errors"},Ke={key:1,class:"test-method-response-returns"},et={class:"test-method-response-returns-value"},tt=v({__name:"ConnectorEditor",setup(l){const o=T(()=>{var i;return`/projects/${(i=a.value)==null?void 0:i.projectId}/connectors`}),s=H().params.connectorId,{loading:n,result:a}=Y(()=>X.get(s)),g=T(()=>{var i;return(i=a.value)!=null&&i.schema.methods?Object.keys(a.value.schema.methods).reduce((b,u)=>{const m=a.value.schema.methods[u];return[...b,{key:u,...m}]},[]):[]}),_=T(()=>!a.value||!(a.value.type in D.schema)?null:D.schema[a.value.type]),c=M({testMethod:null,testParams:{},testResponse:null}),h=async()=>{!a.value||!c.testMethod||!c.testParams||(c.testResponse=await a.value.test(c.testMethod,c.testParams))};return(i,b)=>y(n)||!y(a)||!_.value?(e(),A(ee,{key:0})):(e(),A(Ue,{key:1,class:"connector-editor"},{left:S(()=>[f(Z,{link:o.value},null,8,["link"])]),right:S(()=>[f(K,{model:y(a)},null,8,["model"])]),default:S(()=>[f(O,{title:"Settings"},{default:S(()=>[d("div",Ge,[(e(!0),t($,null,k(_.value.settings,(u,m)=>(e(),t("div",{key:m},[f(R,{schema:u,value:y(a).settings[m],onChange:j=>y(a).settings[m]=j},null,8,["schema","value","onChange"])]))),128))])]),_:1}),f(O,{title:"Test"},{default:S(()=>[d("div",xe,[d("div",ze,[Fe,N(d("select",{"onUpdate:modelValue":b[0]||(b[0]=u=>c.testMethod=u),class:"test-method-selector-selector"},[He,(e(!0),t($,null,k(g.value,u=>(e(),t("option",{key:u.key,value:u.key},I(u.label),9,Je))),128))],512),[[J,c.testMethod]])]),c.testMethod?(e(),t("div",Qe,[We,(e(!0),t($,null,k(y(a).schema.methods[c.testMethod].params,(u,m)=>(e(),t("div",{key:m,class:"test-field"},[f(R,{schema:u,value:c.testParams[m],onChange:j=>c.testParams[m]=j},null,8,["schema","value","onChange"])]))),128)),d("button",{class:"test-method-run",onClick:b[1]||(b[1]=u=>h())},"Test")])):p("",!0),c.testResponse?(e(),t("div",Xe,[Ye,c.testResponse.errors.length>0?(e(),t("div",Ze,[(e(!0),t($,null,k(c.testResponse.errors,u=>(e(),t("div",{key:u},I(u),1))),128))])):p("",!0),c.testResponse.returns&&Object.keys(c.testResponse.returns).length>0?(e(),t("div",Ke,[d("span",et,[d("pre",null,I(JSON.stringify(c.testResponse.returns,null,2)),1)])])):p("",!0)])):p("",!0)])]),_:1})]),_:1}))}});const mt=C(tt,[["__scopeId","data-v-63dce332"]]);export{mt as default};
//# sourceMappingURL=ConnectorEditor.de289aec.js.map
