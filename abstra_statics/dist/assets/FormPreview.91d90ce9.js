import{d as g,u as x,r as F,G as R,b as a,c as n,y as e,t as B,e as i,v as b,K as q,L as E,q as L}from"./registerWidgets.fff064a1.js";import{a as f,L as C}from"./CircularLoading.59d7fd3d.js";import{E as I}from"./Error.de2ae46c.js";import{F as N,R as M}from"./broker.64603716.js";import{B as V}from"./BackButton.c350c17f.js";import{F as W}from"./forms.7bc6baea.js";import{W as D}from"./workspaces.32af92db.js";import"./WidgetsFrame.cebd6d3d.js";import"./icons.907f45d7.js";import"./index.314cf40a.js";import"./Modal.2ceba592.js";import"./utils.3371dfe5.js";const G={class:"page"},H={key:1,class:"error"},K={key:2,style:{width:"100%",height:"100%",display:"flex"}},S={style:{width:"100%",height:"100%",display:"flex"}},U=g({__name:"FormPreview",setup($){const s=q(),r=E(),o=x({started:!1}),c=F(null),{loading:_,result:m,error:u,refetch:d}=f(()=>W.get(r.params.formPath)),{result:l}=f(()=>D.get()),h=R(()=>M.create({isLocal:!1,formPath:r.params.formPath,isPreview:!0})),v=async()=>{var t;if(!o.started){(t=c.value)==null||t.run();return}o.started=!1},y=({path:t,type:p})=>{p==="dash"?s.push({name:"dashPreview",params:{dashPath:t},query:r.query}):(s.push({name:"form-preview",params:{formPath:t},query:r.query}),d())},k=()=>{s.push(`/_editor/form/${encodeURIComponent(r.params.formPath)}`)},w=()=>{o.started=!0},P=()=>{o.started=!1};return(t,p)=>(a(),n("div",G,[e(_)||!e(m)||!e(l)?(a(),B(C,{key:0})):e(u)?(a(),n("div",H,[i(I,{error:e(u),onReload:e(d)},null,8,["error","onReload"])])):(a(),n("main",K,[b("div",S,[i(N,{ref_key:"runner",ref:c,form:e(m).makeRunnerData(e(l)),params:e(r).query,"is-preview":!0,"enable-auto-focus":!0,broker:e(h),style:{height:"unset",flex:1,overflow:"hidden"},onNavigate:y,onLogout:v,onExit:P,onStart:w},null,8,["form","params","broker"]),i(V,{onExitFullscreenPreview:k})])]))]))}});const te=L(U,[["__scopeId","data-v-f7c2ba13"]]);export{te as default};
//# sourceMappingURL=FormPreview.91d90ce9.js.map
