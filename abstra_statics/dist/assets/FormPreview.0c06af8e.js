import{u as C}from"./index.fd87973b.js";import{d as I,I as U,b as u,ev as f,e as o,eG as g,eB as W,eC as M,v as S,eJ as q,eD as B,r as v,u as t,c as P,f as R,eM as A}from"./outputWidgets.a83b1016.js";import{b as V,c as $,d as L,r as N}from"./FormRunner.b284b584.js";import{a as O}from"./asyncComputed.7dc1bf59.js";import{L as T}from"./CircularLoading.d651d3f8.js";import{F as j}from"./forms.ca7bd5c2.js";import{W as G}from"./workspaces.0e9eebc0.js";import"./envVars.c9c5943a.js";import"./fetch.ccd477ec.js";import"./pubsub.6df6e033.js";import"./url.50f64913.js";import"./Passwordless.b8840bc7.js";import"./index.c5fb3e5a.js";import"./PlayerNavbar.c03afb9d.js";import"./PhKanban.vue.3646885b.js";import"./PhSignOut.vue.b2a0a836.js";import"./Text.ddf9b82a.js";import"./index.10185861.js";import"./Link.0ec41952.js";import"./Paragraph.17bf1949.js";import"./Title.d405014f.js";import"./index.ecedcd8d.js";import"./WidgetsFrame.834fcfd8.js";import"./Steps.ad8ffa86.js";import"./PhInfo.vue.1b5bd70d.js";import"./Card.561ade5e.js";import"./TabPane.1f6c3621.js";import"./hasIn.f0c3cb47.js";import"./record.0d390bc5.js";import"./runnerData.f52d4f8a.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},a=new Error().stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="bf9b2bbb-e91a-4ce6-8427-a87450796623",e._sentryDebugIdIdentifier="sentry-dbid-bf9b2bbb-e91a-4ce6-8427-a87450796623")}catch{}})();const E=e=>(W("data-v-3e46b76c"),e=e(),M(),e),H={class:"error"},J=E(()=>o("h1",{class:"error-header"},"Error",-1)),z={class:"error-body"},K={class:"error-message"},Q={class:"error-details"},X=E(()=>o("span",null,"Reload",-1)),Y=[X],Z=I({__name:"Error",props:{error:{type:Object,required:!0},repeated:{type:Boolean,required:!1}},emits:["reload"],setup(e,{emit:a}){const s=e,n=U(()=>s.repeated?"Ooops. The same error occured, please try again later.":"An error occurred while loading.");function c(){a("reload")}return(h,m)=>(u(),f("div",H,[J,o("div",z,[o("div",K,[o("p",null,g(n.value),1),o("p",Q,g(e.error.name)+": "+g(e.error.message),1)]),o("div",{class:"error-actions"},[o("button",{class:"btn btn-primary",onClick:c},Y)])])]))}});const ee=S(Z,[["__scopeId","data-v-3e46b76c"]]),re={class:"page"},oe={key:1,class:"error"},te={key:2,style:{width:"100%",height:"100%",display:"flex"}},ae={style:{width:"100%",height:"100%",display:"flex"}},se=I({__name:"FormPreview",setup(e){const a=q(),s=B(),n=v(null),c=v(null),h=s.query,m=v(null);function F(r,i){N("preview",a,r,i)}const{result:_,loading:D,refetch:y,error:b}=O(async()=>{const[r,i]=await Promise.all([j.get(s.params.id),G.get()]),d=new $({formRunnerData:r.makeRunnerData(i),queryParams:h,userManager:C,connectionManager:new L(r.id),onFormStart:()=>{},onFormEnd:()=>{},onRedirect:F,onAuthUpdate:l=>m.value=l,onStateUpdate:l=>n.value=l,logService:null,onStackTraceUpdate:null});c.value=r.makeRunnerData(i);const p=d.getState();return n.value=p.formState,m.value=p.passwordlessUser,A({form:r,workspace:i,controller:d})}),x=async({id:r})=>{await a.push({params:{id:r},name:"formPreview",query:s.query}),y()};return(r,i)=>{var d,p,l,w,k;return u(),f("div",re,[t(D)||!n.value||!c.value?(u(),P(T,{key:0})):t(b)?(u(),f("div",oe,[R(ee,{error:t(b),onReload:t(y)},null,8,["error","onReload"])])):(u(),f("main",te,[o("div",ae,[R(V,{style:{height:"unset",flex:1,overflow:"hidden"},"is-preview":!1,"form-runner-data":c.value,"form-state":n.value,"user-email":(d=m.value)==null?void 0:d.claims.email,onUpdateWidgetErrors:(p=t(_))==null?void 0:p.controller.updateWidgetFrontendErrors,onUpdateWidgetValue:(l=t(_))==null?void 0:l.controller.updateWidgetValue,onActionClicked:(w=t(_))==null?void 0:w.controller.handleActionClick,onNavigate:x,onLogout:(k=t(_))==null?void 0:k.controller.logout},null,8,["form-runner-data","form-state","user-email","onUpdateWidgetErrors","onUpdateWidgetValue","onActionClicked","onLogout"])])]))])}}});const Pe=S(se,[["__scopeId","data-v-a7c36a64"]]);export{Pe as default};
//# sourceMappingURL=FormPreview.0c06af8e.js.map
