var ge=Object.defineProperty;var ye=(l,e,s)=>e in l?ge(l,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[e]=s;var B=(l,e,s)=>(ye(l,typeof e!="symbol"?e+"":e,s),s);import{C as ve}from"./ContentLayout.150390bd.js";import{l as le}from"./fetch.d2d3ed34.js";import{E as ie}from"./record.c7d63161.js";import{f as o,eI as he,d as C,b as v,c as h,w as n,u as t,bG as T,as as g,ey as O,ew as E,eF as se,cB as be,eH as I,aE as N,af as z,eG as _e,r as A,K as Ce,J as R,e as G,x as we,cC as j,cz as Q,ak as Pe,eS as ke,I as Oe,bz as ce,dh as re}from"./outputWidgets.6e1c5425.js";import{E as Ae,a as Ue}from"./repository.1507146e.js";import{a as F}from"./asyncComputed.06ede41f.js";import{d as X,F as Z}from"./vuedraggable.umd.203fdeb3.js";import"./workspaces.0676e56f.js";import{l as $}from"./login.35b4472b.js";import"./envVars.72a577f4.js";import{P as Ie,A as ee,T as Re}from"./TabPane.6f71397e.js";import{A as Se}from"./index.e3b3130d.js";import{s as xe}from"./metadata.85c4f3ac.js";import{I as Te,F as De}from"./PhKey.vue.ad206296.js";import{G as je}from"./PhIdentificationBadge.vue.f6183b8b.js";import{G as $e}from"./PhKanban.vue.0b81dffb.js";import{A as S}from"./Text.b10c1140.js";import{A as k}from"./index.c12e1c2f.js";import{A as qe}from"./Item.c37126c1.js";import{A as x}from"./Paragraph.4ce326b3.js";import{A as ue}from"./index.1442882a.js";import{A as de}from"./index.0b7245cc.js";import{_ as Ee}from"./SaveButton.vue_vue_type_script_setup_true_lang.a37b6a4e.js";import{C as Ne}from"./CrudView.88823d06.js";import{G as Be}from"./PhPencil.vue.09a8c9d5.js";import{A as L,F as pe}from"./Form.b82a2cec.js";import{A as me}from"./index.19929efb.js";import{A as Fe}from"./Title.dfd37452.js";import"./pubsub.4f3043c8.js";import"./router.4a0ba06b.js";import"./popupNotifcation.76f4dd63.js";import"./runnerData.dbd7d7cb.js";import"./url.5357e9db.js";import"./hasIn.bf07751b.js";import"./PhCheckCircle.vue.c66a4019.js";import"./PhScroll.vue.1ea6100a.js";import"./PhWebhooksLogo.vue.9951768a.js";import"./Base.0277cf44.js";import"./UnsavedChangesHandler.77610fef.js";import"./ExclamationCircleOutlined.0240c9dc.js";import"./Modal.e50e9e9a.js";import"./Link.5b1de2a9.js";import"./DocsButton.vue_vue_type_script_setup_true_lang.3a6e05dd.js";import"./BookOutlined.8202b78f.js";import"./isNumeric.75337b1e.js";(function(){try{var l=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(l._sentryDebugIds=l._sentryDebugIds||{},l._sentryDebugIds[e]="947aff7f-f2c0-41e5-aedd-bc2b97cb0a9e",l._sentryDebugIdIdentifier="sentry-dbid-947aff7f-f2c0-41e5-aedd-bc2b97cb0a9e")}catch{}})();function ae(l){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?Object(arguments[e]):{},u=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(s).filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable}))),u.forEach(function(i){Ge(l,i,s[i])})}return l}function Ge(l,e,s){return e in l?Object.defineProperty(l,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):l[e]=s,l}var oe=function(e,s){var u=ae({},e,s.attrs);return o(he,ae({},u,{icon:Ie}),null)};oe.displayName="PlusOutlined";oe.inheritAttrs=!1;const Le=oe;class ne{constructor(e){B(this,"record");this.record=ie.from(e)}get id(){return this.record.get("id")}get type(){return this.record.get("type")}get title(){return this.record.get("title")}get isPublic(){return this.record.get("is_public")}set isPublic(e){e&&this.record.set("required_roles",[]),this.record.set("is_public",e)}get requiredRoles(){return this.record.get("required_roles")}set requiredRoles(e){e.length!==0&&this.record.set("is_public",!1),this.record.set("required_roles",e)}makePublic(){this.isPublic=!0}makeProtected(){this.isPublic=!1,this.requiredRoles=[]}require(e){e.length!==0&&(this.isPublic=!1),this.requiredRoles=e}get visibility(){return this.isPublic?"public":this.requiredRoles.length===0?"protected":"private"}hasChanges(){return this.record.hasChanges("is_public")||this.record.hasChangesDeep("required_roles")}get changes(){return this.record.changes}get initialState(){return this.record.initialState}toUpdateDTO(){return{id:this.id,is_public:this.isPublic,required_roles:this.requiredRoles}}commit(){this.record.commit()}static from(e){return new ne(e)}}class Ve{constructor(e=le){this.fetch=e}async list(){return(await(await this.fetch("/_editor/api/access-control",{method:"GET",headers:{"Content-Type":"application/json"}})).json()).map(ne.from)}async update(e){const s=e.reduce((i,a)=>(a.hasChanges()&&i.push({id:a.id,...a.changes}),i),[]);return await(await fetch("/_editor/api/access-control",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json()}}const V=class{constructor(e){B(this,"record");this.dto=e,this.record=ie.from(e)}static from(e){return new V(e)}toDTO(){return this.record.toDTO()}get id(){return this.record.get("id")}get projectId(){return this.record.get("projectId")}get emailPatterns(){return this.record.get("emailPatterns")}set emailPatterns(e){this.record.set("emailPatterns",e)}get hasChanges(){return this.record.hasChangesDeep("emailPatterns")}get strategy(){return this.dto.emailPatterns.length===0?"inviteOnly":this.dto.emailPatterns.length==1&&this.dto.emailPatterns[0]=="*"?"anyone":"patternOnly"}get changes(){return this.record.changes}allowAnyone(){this.record.set("emailPatterns",["*"])}allowOnlyInvited(){this.record.set("emailPatterns",[])}static validate(e){let s="";return e.startsWith("@")&&(s=e.slice(1)),e.startsWith("*@")&&(s=e.slice(2)),s.match(V.pattern)!==null}};let q=V;B(q,"pattern",/^[a-z0-9.-]+\.[a-z]{2,}$/);class ze{constructor(e=le){this.fetch=e}async update(e){const{emailPatterns:s}=e.changes;return s?(await this.fetch("/_editor/api/users/signup-policy",{method:"PUT",body:JSON.stringify({email_patterns:s}),headers:{"Content-Type":"application/json"}}),q.from({...e.toDTO(),emailPatterns:s})):e}async get(){const s=await(await this.fetch("/_editor/api/users/signup-policy")).json();return q.from({emailPatterns:s.email_patterns,id:s.id,projectId:s.project_id,createdAt:s.created_at})}}const He=C({__name:"RoleSelector",props:{value:{},roleOptions:{}},emits:["update:value"],setup(l,{emit:e}){const s=()=>{var f,p;if(!((f=$.asyncComputed.result.value)!=null&&f.logged))return;const a=(p=$.asyncComputed.result.value)==null?void 0:p.project_id;window.open(`https://cloud.abstra.io/projects/${a}/access-control?selected-panel=roles`,"__roles")},u=a=>{e("update:value",a)},i=C({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}});return(a,f)=>(v(),h(t(z),{value:a.value,mode:"multiple","onUpdate:value":u},{dropdownRender:n(({menuNode:p})=>{var c;return[o(t(i),{vnodes:p},null,8,["vnodes"]),o(t(Se),{style:{margin:"4px 0"}}),(c=t($).asyncComputed.result.value)!=null&&c.logged?(v(),h(t(T),{key:0,type:"default",style:{width:"100%"},onClick:s},{icon:n(()=>[o(t(Le))]),default:n(()=>[g(" Create a new role ")]),_:1})):O("",!0)]}),default:n(()=>[(v(!0),E(N,null,se(a.roleOptions,p=>(v(),h(t(be),{key:p,value:p},{default:n(()=>[g(I(p),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"]))}}),Je=l=>l==="internal"?$e:xe(l),Ye=Te,Me="Public",We="Pages that are accessible to anyone with the link. No sign-up required.",Ke=je,Qe="Requires Identification",Xe=De,Ze="Requires Role",te=C({__name:"DraggeableItem",props:{item:{},roleOptions:{}},emits:["update:roles"],setup(l,{emit:e}){const s=l,u=typeof s.roleOptions<"u",i=a=>{e("update:roles",a)};return(a,f)=>(v(),h(t(qe),{style:{"list-style":"none"},class:"item"},{default:n(()=>[o(t(k),{align:"center"},{default:n(()=>[(v(),h(_e(t(Je)(s.item.type)),{style:{"flex-shrink":"0",width:"24px"}})),o(t(S),{ellipsis:"",content:a.item.title,style:{"max-width":"90%",margin:"10px"}},null,8,["content"])]),_:1}),u?(v(),h(He,{key:0,style:{width:"100%"},value:a.item.requiredRoles||[],"role-options":a.roleOptions||[],"onUpdate:value":i},null,8,["value","role-options"])):O("",!0)]),_:1}))}});const et=["href"],tt=C({__name:"DraggeableSelector",props:{accessControls:{},roles:{}},emits:["update:accessControls","see-signup-policy","see-console-access-control","see-editor-test-users"],setup(l,{emit:e}){const s=l,u=y=>y.reduce((r,d)=>{switch(d.visibility){case"public":r.public.push(d);break;case"protected":r.protected.push(d);break;case"private":r.private.push(d);break;default:throw new Error("Invalid visibility")}return r},{public:[],protected:[],private:[]}),i=u(s.accessControls),a=A(i.public),f=A(i.protected),p=A(i.private);Ce(()=>s.accessControls,y=>{const r=u(y);a.value=r.public,f.value=r.protected,p.value=r.private},{immediate:!0});const c=R(()=>s.roles.map(y=>y.name)),m=new Map,_=y=>{if("added"in y){const r=s.accessControls.findIndex(d=>d.id===y.added.element.id);if(r===-1)return!0;s.accessControls[r].makePublic(),e("update:accessControls",[...s.accessControls])}return!0},H=y=>{if("added"in y){const r=s.accessControls.findIndex(d=>d.id===y.added.element.id);if(r===-1)return!0;s.accessControls[r].makeProtected(),e("update:accessControls",[...s.accessControls])}return!0},D=y=>{if("added"in y){const r=y.added.element.id,d=m.get(r);if(d){const w=s.accessControls.findIndex(W=>W.id===y.added.element.id);if(w===-1)return!0;s.accessControls[w].require(d),e("update:accessControls",[...s.accessControls])}}return!0},J=y=>{const r=p.value[y];r&&m.set(r.id,r.requiredRoles)},Y=(y,r)=>{const d=s.accessControls.findIndex(w=>w.id===y.id);d!==-1&&(s.accessControls[d].require(r),r.length===0?(p.value=p.value.filter(w=>w.id!==y.id),f.value=[y,...f.value]):s.accessControls[d].isPublic=!1,e("update:accessControls",[...s.accessControls]))},M=()=>{var r,d;return(r=$.asyncComputed.result.value)!=null&&r.logged?`https://cloud.abstra.io/projects/${(d=$.asyncComputed.result.value)==null?void 0:d.project_id}/access-control?selected-panel=roles`:"https://cloud.abstra.io"};return(y,r)=>(v(),h(t(k),{justify:"space-between",gap:"middle"},{default:n(()=>[o(t(k),{vertical:"",class:"container"},{default:n(()=>[o(t(k),{class:"container-title"},{default:n(()=>[o(t(Ye)),o(t(S),{strong:""},{default:n(()=>[g(I(t(Me)),1)]),_:1})]),_:1}),o(t(x),null,{default:n(()=>[g(I(t(We)),1)]),_:1}),o(t(X),{list:a.value,"onUpdate:list":r[0]||(r[0]=d=>a.value=d),class:"content","item-key":"id","force-fallback":t(Z),group:"drag","ghost-class":"ghost",onChange:_},{item:n(({element:d})=>[o(te,{class:"item",item:d},null,8,["item"])]),_:1},8,["list","force-fallback"])]),_:1}),o(t(k),{vertical:"",class:"container"},{default:n(()=>[o(t(k),{class:"container-title"},{default:n(()=>[o(t(Ke)),o(t(S),{strong:""},{default:n(()=>[g(I(t(Qe)),1)]),_:1})]),_:1}),o(t(x),null,{default:n(()=>[g(" Pages that are accessible to signed in users, according to the "),G("a",{onClick:r[1]||(r[1]=d=>e("see-signup-policy"))},"signup policy"),g(". ")]),_:1}),o(t(X),{list:f.value,"onUpdate:list":r[2]||(r[2]=d=>f.value=d),class:"content","item-key":"id","force-fallback":t(Z),group:"drag","ghost-class":"ghost",onChange:H},{item:n(({element:d})=>[o(te,{class:"item",item:d},null,8,["item"])]),_:1},8,["list","force-fallback"])]),_:1}),o(t(k),{vertical:"",class:"container"},{default:n(()=>[o(t(k),{class:"container-title"},{default:n(()=>[o(t(Xe)),o(t(S),{strong:""},{default:n(()=>[g(I(t(Ze)),1)]),_:1})]),_:1}),o(t(x),null,{default:n(()=>[g(" Pages that are accessible to users with specific roles. Those roles can be assigned in the "),G("a",{target:"_blank",href:M()},"console (production)",8,et),g(" or in the "),G("a",{onClick:r[3]||(r[3]=d=>e("see-editor-test-users"))},'"Test users" tab (local environment)'),g(". ")]),_:1}),o(t(X),{list:p.value,"onUpdate:list":r[4]||(r[4]=d=>p.value=d),class:"content","item-key":"id","force-fallback":t(Z),group:"drag","ghost-class":"ghost",onChange:D,onStart:r[5]||(r[5]=d=>J(d.oldIndex))},{item:n(({element:d})=>[o(te,{class:"item",item:d,"role-options":c.value,"onUpdate:roles":w=>Y(d,w)},null,8,["item","role-options","onUpdate:roles"])]),_:1},8,["list","force-fallback"])]),_:1})]),_:1}))}});const st=we(tt,[["__scopeId","data-v-1ae0e521"]]),ot=C({__name:"DanglingRolesAlert",props:{danglingRoles:{}},setup(l){return(e,s)=>(v(),h(t(de),{type:"warning","show-icon":"",closable:""},{description:n(()=>[o(t(S),null,{default:n(()=>[g("The following roles are not defined in the Cloud Console:")]),_:1}),(v(!0),E(N,null,se(e.danglingRoles,u=>(v(),h(t(ue),{key:u,style:{margin:"2px"},color:"red"},{default:n(()=>[g(I(u),1)]),_:2},1024))),128))]),_:1}))}}),nt=C({__name:"View",props:{accessControls:{},roles:{},loading:{type:Boolean}},emits:["update:access-controls","save","see-signup-policy","see-console-access-control","see-editor-test-users"],setup(l,{emit:e}){const s=l,u=R(()=>{var c;return((c=s.accessControls)==null?void 0:c.filter(m=>m.hasChanges()))||[]}),i=R(()=>u.value.length>0),f={save:async()=>{e("save")},hasChanges:()=>i.value},p=R(()=>{const c=s.accessControls.flatMap(_=>_.requiredRoles)||[],m=s.roles.map(_=>_.name)||[];return(c==null?void 0:c.filter(_=>!m.includes(_)))||[]});return(c,m)=>(v(),E(N,null,[o(t(k),{justify:"flex-end"},{default:n(()=>[o(Ee,{model:f})]),_:1}),!c.loading&&p.value.length>0?(v(),h(ot,{key:0,"dangling-roles":p.value},null,8,["dangling-roles"])):O("",!0),o(st,{"access-controls":c.accessControls,roles:c.roles||[],"onUpdate:accessControls":m[0]||(m[0]=_=>e("update:access-controls",_)),onSeeConsoleAccessControl:m[1]||(m[1]=_=>e("see-console-access-control")),onSeeEditorTestUsers:m[2]||(m[2]=_=>e("see-editor-test-users")),onSeeSignupPolicy:m[3]||(m[3]=_=>e("see-signup-policy"))},null,8,["access-controls","roles"])],64))}}),rt={style:{padding:"30px"}},at=C({__name:"View",props:{signupPolicy:{}},emits:["update:signup-policy","save"],setup(l,{emit:e}){const s=l,u=A(s.signupPolicy.strategy),i=A(s.signupPolicy.strategy==="patternOnly"?s.signupPolicy.emailPatterns:[]),a=A(s.signupPolicy.strategy==="patternOnly"?s.signupPolicy.emailPatterns.map(c=>({label:c})):[]),f=c=>{const m=c;if(i.value=m,m.length===0){p("inviteOnly");return}a.value=m.map(_=>({label:_})),s.signupPolicy.emailPatterns=c,e("update:signup-policy",s.signupPolicy)},p=c=>{u.value=c,c!=="patternOnly"&&(c==="anyone"&&s.signupPolicy.allowAnyone(),c==="inviteOnly"&&s.signupPolicy.allowOnlyInvited(),e("update:signup-policy",s.signupPolicy))};return(c,m)=>(v(),h(t(j),{direction:"vertical",style:{"padding-top":"8px"}},{default:n(()=>[o(t(x),null,{default:n(()=>[g(" Control which end users may sign-up to your app. ")]),_:1}),o(t(T),{disabled:!c.signupPolicy.hasChanges,type:"primary",onClick:m[0]||(m[0]=_=>e("save"))},{default:n(()=>[g(" Save changes ")]),_:1},8,["disabled"]),G("div",rt,[o(t(x),{strong:""},{default:n(()=>[g(" Allow self sign-up? ")]),_:1}),o(t(Pe),{value:u.value,"onUpdate:value":p},{default:n(()=>[o(t(j),{direction:"vertical"},{default:n(()=>[o(t(Q),{value:"inviteOnly"},{default:n(()=>[g("No, users must be added by me.")]),_:1}),o(t(j),null,{default:n(()=>[o(t(Q),{value:"patternOnly"},{default:n(()=>[g("Yes, but only for users in")]),_:1}),o(t(z),{mode:"tags",value:i.value,style:{"min-width":"250px"},placeholder:"@domain.com or sub.domain.com",disabled:u.value!=="patternOnly",options:a.value,"dropdown-match-select-width":"",open:!1,"onUpdate:value":f},null,8,["value","disabled","options"])]),_:1}),o(t(Q),{value:"anyone"},{default:n(()=>[g("Yes, for anyone")]),_:1})]),_:1})]),_:1},8,["value"])])]),_:1}))}}),lt=C({__name:"View",props:{loading:{type:Boolean},users:{}},emits:["create","edit","delete"],setup(l,{emit:e}){const s=l,u=R(()=>{var i;return{columns:[{name:"Email"},{name:"Roles"},{name:"",align:"right"}],rows:(i=s.users.map(a=>({key:a.email,cells:[{type:"text",text:a.email},{type:"slot",key:"roles",payload:{roles:a.roles}},{type:"actions",actions:[{icon:Be,label:"Edit",onClick:()=>e("edit",a)},{icon:ke,label:"Delete",onClick:()=>e("delete",a)}]}]})))!=null?i:[]}});return(i,a)=>(v(),E(N,null,[o(Ne,{"entity-name":"users",title:"",loading:i.loading,description:"List all user profiles to be used for testing purposes.","empty-title":"No users yet",table:u.value,"create-button-text":"Add users",onCreate:a[0]||(a[0]=f=>e("create",f))},{roles:n(({payload:f})=>[(v(!0),E(N,null,se(f.roles,p=>(v(),h(t(ue),{key:p,bordered:""},{default:n(()=>[g(I(p),1)]),_:2},1024))),128))]),_:1},8,["loading","table"]),o(t(de),{type:"info","show-icon":"",closable:""},{description:n(()=>[o(t(S),null,{default:n(()=>[g("Configurations made here only affect your local environment. To manage real users, please access the Cloud Console.")]),_:1})]),_:1})],64))}}),it=C({__name:"NewUser",props:{roleOptions:{}},emits:["created","cancel"],setup(l,{emit:e}){const u=l.roleOptions.map(p=>({label:p.name,value:p.name})),i=Oe({email:"",roles:[]});function a(){e("cancel")}function f(){!i.email||e("created",i)}return(p,c)=>(v(),h(t(me),{open:"",title:"New user",width:720,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:a},{extra:n(()=>[o(t(j),null,{default:n(()=>[o(t(T),{onClick:a},{default:n(()=>[g("Cancel")]),_:1}),o(t(T),{type:"primary",onClick:f},{default:n(()=>[g("Submit")]),_:1})]),_:1})]),default:n(()=>[o(t(pe),{model:i,layout:"vertical"},{default:n(()=>[o(t(L),{key:"email",label:"Email",required:!0},{default:n(()=>[o(t(ce),{value:i.email,"onUpdate:value":c[0]||(c[0]=m=>i.email=m)},null,8,["value"])]),_:1}),o(t(L),{key:"role",label:"Role"},{default:n(()=>[o(t(z),{value:i.roles,"onUpdate:value":c[1]||(c[1]=m=>i.roles=m),mode:"multiple",options:t(u)},null,8,["value","options"])]),_:1})]),_:1},8,["model"])]),_:1}))}}),ct=C({__name:"UpdateUser",props:{roleOptions:{},value:{}},emits:["updated","cancel"],setup(l,{emit:e}){const s=l,u=s.roleOptions.map(f=>({label:f.name,value:f.name}));function i(){e("cancel")}function a(){e("updated",s.value)}return(f,p)=>(v(),h(t(me),{open:"",title:"Update user",width:720,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:i},{extra:n(()=>[o(t(j),null,{default:n(()=>[o(t(T),{onClick:i},{default:n(()=>[g("Cancel")]),_:1}),o(t(T),{type:"primary",onClick:a},{default:n(()=>[g("Submit")]),_:1})]),_:1})]),default:n(()=>[o(t(pe),{layout:"vertical"},{default:n(()=>[o(t(L),{key:"email",label:"Email"},{default:n(()=>[o(t(ce),{value:f.value.email,"onUpdate:value":p[0]||(p[0]=c=>f.value.email=c),disabled:""},null,8,["value"])]),_:1}),o(t(L),{key:"role",label:"Role"},{default:n(()=>[o(t(z),{value:f.value.roles,"onUpdate:value":p[1]||(p[1]=c=>f.value.roles=c),mode:"multiple",options:t(u)},null,8,["value","options"])]),_:1})]),_:1})]),_:1}))}}),ss=C({__name:"AccessControlEditor",setup(l){const e=()=>{s.value={type:"initial"}},s=A({type:"initial"}),u=A("enforcement"),i=new Ve,{result:a,refetch:f}=F(async()=>await i.list()),p=R(()=>{var P;return((P=a.value)==null?void 0:P.filter(b=>b.hasChanges()))||[]}),c=async()=>{await i.update(p.value),await f()},m=new Ae,{result:_,loading:H,refetch:D}=F(()=>m.list()),J=async P=>{await m.create(P),await D(),e()},Y=async P=>{await m.update(P.id,P.changes),await D(),e()},M=async P=>{await m.delete(P.id),await D(),e()},y=new ze,{result:r,refetch:d}=F(()=>y.get()),w=async()=>{!r.value||(await y.update(r.value),await d())},W=new Ue,{result:K,loading:fe}=F(()=>W.list(100,0));return(P,b)=>(v(),h(ve,null,{default:n(()=>[o(t(Fe),null,{default:n(()=>[g("Access Control")]),_:1}),o(t(x),null,{default:n(()=>[g(" Configure the security level of your application. You can define which pages are accessible to signed-in users, which pages are accessible to users with specific roles, and which pages are accessible to everyone. ")]),_:1}),o(t(Re),{"active-key":u.value,"onUpdate:activeKey":b[0]||(b[0]=U=>u.value=U)},{default:n(()=>[o(t(ee),{key:"enforcement",tab:"Security Level"}),o(t(ee),{key:"signup-policy",tab:"Sign-Up Policy"}),o(t(ee),{key:"users",tab:"Test Users"})]),_:1},8,["active-key"]),u.value==="enforcement"&&t(a)?(v(),h(nt,{key:0,"access-controls":t(a),"onUpdate:accessControls":b[1]||(b[1]=U=>re(a)?a.value=U:null),roles:t(K)||[],loading:t(fe),onSave:c,onSeeConsoleAccessControl:b[2]||(b[2]=()=>u.value="roles"),onSeeEditorTestUsers:b[3]||(b[3]=()=>u.value="users"),onSeeSignupPolicy:b[4]||(b[4]=()=>u.value="signup-policy")},null,8,["access-controls","roles","loading"])):O("",!0),u.value==="users"?(v(),h(t(lt),{key:1,loading:t(H),users:t(_)||[],onDelete:M,onCreate:b[5]||(b[5]=()=>s.value={type:"user-create"}),onEdit:b[6]||(b[6]=U=>s.value={type:"user-update",user:U})},null,8,["loading","users"])):O("",!0),u.value==="signup-policy"&&t(r)?(v(),h(at,{key:2,"signup-policy":t(r),"onUpdate:signupPolicy":b[7]||(b[7]=U=>re(r)?r.value=U:null),onSave:w},null,8,["signup-policy"])):O("",!0),s.value.type==="user-create"?(v(),h(t(it),{key:3,"role-options":t(K)||[],onCreated:J,onCancel:e},null,8,["role-options"])):O("",!0),s.value.type==="user-update"?(v(),h(t(ct),{key:4,value:s.value.user,"role-options":t(K)||[],onUpdated:Y,onCancel:e},null,8,["value","role-options"])):O("",!0)]),_:1}))}});export{ss as default};
//# sourceMappingURL=AccessControlEditor.491a3998.js.map
