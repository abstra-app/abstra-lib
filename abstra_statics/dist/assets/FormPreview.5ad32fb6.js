import{u as U}from"./index.1d9902cf.js";import{d as E,H as C,b as u,eu as f,e as o,eD as g,eE as W,eF as q,v as F,eI as A,eA as M,r as v,u as t,c as P,f as R,eK as B}from"./outputWidgets.5ea0a846.js";import{b as V,c as $,d as L,r as N}from"./FormRunner.f455af71.js";import{a as H}from"./asyncComputed.5e5133b6.js";import{L as O}from"./CircularLoading.08e73c51.js";import{F as T}from"./forms.79f13836.js";import{W as j}from"./workspaces.56aa087f.js";import"./envVars.81264c8d.js";import"./pubsub.6d1d5b7b.js";import"./fetch.28ebaa70.js";import"./url.16f11e2b.js";import"./Passwordless.7d252421.js";import"./index.ad5d5681.js";import"./PhArrowClockwise.vue.0a2a853c.js";import"./PlayerNavbar.1b0ee66d.js";import"./PhKanban.vue.b3d6709c.js";import"./PhSignOut.vue.e49a68f3.js";import"./Text.a8e86ea0.js";import"./index.cdc861ca.js";import"./Link.fde2a38d.js";import"./Paragraph.30b952f7.js";import"./Title.718df1d3.js";import"./index.378cf0db.js";import"./WidgetsFrame.8ec1ebc9.js";import"./Steps.37d30715.js";import"./PhInfo.vue.14793aed.js";import"./Card.1ea76977.js";import"./index.5f52c97a.js";import"./TabPane.ecf0f09f.js";import"./hasIn.63662996.js";import"./record.660b1d89.js";import"./runnerData.092d390a.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},a=new Error().stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="e40cb99a-0b7c-4ee9-bdf4-bf8b52b03b02",e._sentryDebugIdIdentifier="sentry-dbid-e40cb99a-0b7c-4ee9-bdf4-bf8b52b03b02")}catch{}})();const I=e=>(W("data-v-3e46b76c"),e=e(),q(),e),K={class:"error"},z=I(()=>o("h1",{class:"error-header"},"Error",-1)),G={class:"error-body"},J={class:"error-message"},Q={class:"error-details"},X=I(()=>o("span",null,"Reload",-1)),Y=[X],Z=E({__name:"Error",props:{error:{type:Object,required:!0},repeated:{type:Boolean,required:!1}},emits:["reload"],setup(e,{emit:a}){const s=e,n=C(()=>s.repeated?"Ooops. The same error occured, please try again later.":"An error occurred while loading.");function d(){a("reload")}return(h,m)=>(u(),f("div",K,[z,o("div",G,[o("div",J,[o("p",null,g(n.value),1),o("p",Q,g(e.error.name)+": "+g(e.error.message),1)]),o("div",{class:"error-actions"},[o("button",{class:"btn btn-primary",onClick:d},Y)])])]))}});const ee=F(Z,[["__scopeId","data-v-3e46b76c"]]),re={class:"page"},oe={key:1,class:"error"},te={key:2,style:{width:"100%",height:"100%",display:"flex"}},ae={style:{width:"100%",height:"100%",display:"flex"}},se=E({__name:"FormPreview",setup(e){const a=A(),s=M(),n=v(null),d=v(null),h=s.query,m=v(null);function S(r,i){N("preview",a,r,i)}const{result:_,loading:D,refetch:y,error:b}=H(async()=>{const[r,i]=await Promise.all([T.get(s.params.id),j.get()]),l=new $({formRunnerData:r.makeRunnerData(i),queryParams:h,userManager:U,connectionManager:new L(r.id),onFormStart:()=>{},onFormEnd:()=>{},onRedirect:S,onAuthUpdate:c=>m.value=c,onStateUpdate:c=>n.value=c,logService:null,onStackTraceUpdate:null});d.value=r.makeRunnerData(i);const p=l.getState();return n.value=p.formState,m.value=p.passwordlessUser,B({form:r,workspace:i,controller:l})}),x=async({id:r})=>{await a.push({params:{id:r},name:"formPreview",query:s.query}),y()};return(r,i)=>{var l,p,c,w,k;return u(),f("div",re,[t(D)||!n.value||!d.value?(u(),P(O,{key:0})):t(b)?(u(),f("div",oe,[R(ee,{error:t(b),onReload:t(y)},null,8,["error","onReload"])])):(u(),f("main",te,[o("div",ae,[R(V,{style:{height:"unset",flex:1,overflow:"hidden"},"is-preview":!1,"form-runner-data":d.value,"form-state":n.value,"user-email":(l=m.value)==null?void 0:l.claims.email,onUpdateWidgetErrors:(p=t(_))==null?void 0:p.controller.updateWidgetFrontendErrors,onUpdateWidgetValue:(c=t(_))==null?void 0:c.controller.updateWidgetValue,onActionClicked:(w=t(_))==null?void 0:w.controller.handleActionClick,onNavigate:x,onLogout:(k=t(_))==null?void 0:k.controller.logout},null,8,["form-runner-data","form-state","user-email","onUpdateWidgetErrors","onUpdateWidgetValue","onActionClicked","onLogout"])])]))])}}});const Ve=F(se,[["__scopeId","data-v-a7c36a64"]]);export{Ve as default};
//# sourceMappingURL=FormPreview.5ad32fb6.js.map
