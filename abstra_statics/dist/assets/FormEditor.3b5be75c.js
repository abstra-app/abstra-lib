import{u as He}from"./index.3c41cd1a.js";import{d as Z,X as H,H as $,b as i,eu as w,dl as O,ew as V,ez as q,e as y,f as t,eH as Fe,o as Re,G as Ze,c as _,w as a,u as e,v as z,r as C,aq as k,by as F,aC as W,eF as de,eG as pe,bz as oe,bF as R,eC as Ue,cD as Ee,S as le,cz as N,eA as Ie,eB as Pe,av as Le,I as re,eL as Be,bf as Ne}from"./outputWidgets.e9677800.js";import{B as De}from"./BaseLayout.07d4d66c.js";import{F as Oe,a as me,b as qe,c as ze,d as We,r as ne}from"./FormRunner.eebb695e.js";import{R as je,S as Qe,a as Ge,L as Je}from"./SourceCode.0773d731.js";import{a as Ke}from"./asyncComputed.37b7af98.js";import{F as Xe}from"./forms.cb549279.js";import{W as D}from"./workspaces.490451ae.js";import"./envVars.5ab5fff0.js";import{_ as Ye}from"./SaveButton.vue_vue_type_script_setup_true_lang.9cdd0e68.js";import{T as et}from"./ThreadSelector.a6e5c27d.js";import{M as ve}from"./Modal.df560cc7.js";import{A as ce}from"./index.31e940e8.js";import{A as I}from"./Title.c954a24a.js";import{T as B}from"./Typography.511f4fec.js";import{A as T,F as j}from"./Form.9737d51d.js";import{A as ue}from"./index.3e3be57f.js";import{A as fe}from"./api.7154604a.js";import{A as P}from"./index.42279d35.js";import{A as tt}from"./Link.29d21673.js";import{B as at}from"./Badge.223eb9c8.js";import{N as ot}from"./NavbarControls.e62f165f.js";import{A as L,T as se}from"./TabPane.d21194be.js";import"./Card.32e01a00.js";import{c as lt}from"./index.c478ec95.js";import{A as rt}from"./index.1a0bd015.js";import{A as nt}from"./Text.fd9e90fd.js";import{E as ut}from"./ExpandOutlined.5f7515a2.js";import"./pubsub.9e36d89a.js";import"./url.89c6b244.js";import"./Passwordless.b561ab0b.js";import"./PhArrowClockwise.vue.07468c7d.js";import"./CircularLoading.4609b9a9.js";import"./PlayerNavbar.b88282dc.js";import"./repository.0c41f07e.js";import"./ArrowRightOutlined.08fa31dd.js";import"./WidgetsFrame.53b7430c.js";import"./Steps.c6f28a72.js";import"./uuid.0a8db1d1.js";import"./PhCaretRight.vue.460a2be4.js";import"./jobs.a5bb2f06.js";import"./record.767f28b7.js";import"./scripts.3b9bc494.js";import"./validations.3237e8d9.js";import"./string.07505ec9.js";import"./toggleHighContrast.fd868840.js";import"./PhPencil.vue.502d3996.js";import"./runnerData.11ae4383.js";import"./ant-design.dbbf4726.js";import"./index.bbda4abd.js";import"./index.dc1b9ab1.js";import"./index.64d9fbff.js";import"./Base.64d54b8f.js";import"./hasIn.bd3f78ff.js";import"./index.cf4c23b9.js";import"./PhScroll.vue.ba9ff361.js";import"./PhWebhooksLogo.vue.52f74867.js";import"./isNumeric.75337b1e.js";import"./Paragraph.394702f6.js";import"./popupNotifcation.7148cdf9.js";import"./PhArrowSquareOut.vue.b47e902f.js";import"./CloseCircleOutlined.b5de4acc.js";import"./DocsButton.vue_vue_type_script_setup_true_lang.a4277c3a.js";(function(){try{var m=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},l=new Error().stack;l&&(m._sentryDebugIds=m._sentryDebugIds||{},m._sentryDebugIds[l]="3d015648-04ea-41d1-9fe6-37237e1ea1ab",m._sentryDebugIdIdentifier="sentry-dbid-3d015648-04ea-41d1-9fe6-37237e1ea1ab")}catch{}})();var st={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888.3 757.4h-53.8c-4.2 0-7.7 3.5-7.7 7.7v61.8H197.1V197.1h629.8v61.8c0 4.2 3.5 7.7 7.7 7.7h53.8c4.2 0 7.7-3.4 7.7-7.7V158.7c0-17-13.7-30.7-30.7-30.7H158.7c-17 0-30.7 13.7-30.7 30.7v706.6c0 17 13.7 30.7 30.7 30.7h706.6c17 0 30.7-13.7 30.7-30.7V765.1c0-4.3-3.5-7.7-7.7-7.7zm18.6-251.7L765 393.7c-5.3-4.2-13-.4-13 6.3v76H438c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z"}}]},name:"export",theme:"outlined"};const it=st,dt=["width","height","fill","transform"],pt={key:0},mt=y("path",{d:"M200.49,183.51a12,12,0,0,1,0,17c-1.13,1.12-28,27.51-72.49,27.51-33.71,0-59.35-17.46-76-33.86V208a12,12,0,0,1-24,0V160a12,12,0,0,1,12-12H88a12,12,0,0,1,0,24H64.12c13.1,14.32,35.08,32,63.88,32,34.63,0,55.31-20.28,55.51-20.49A12,12,0,0,1,200.49,183.51ZM216,36a12,12,0,0,0-12,12V61.86C187.35,45.46,161.71,28,128,28,83.54,28,56.64,54.39,55.51,55.51a12,12,0,0,0,17,17C72.69,72.28,93.37,52,128,52c28.8,0,50.78,17.68,63.88,32H168a12,12,0,0,0,0,24h48a12,12,0,0,0,12-12V48A12,12,0,0,0,216,36Z"},null,-1),vt=[mt],ct={key:1},ft=y("path",{d:"M216,48V96H168ZM40,208l48-48H40Z",opacity:"0.2"},null,-1),gt=y("path",{d:"M219.06,40.61a8,8,0,0,0-8.72,1.73L194.28,58.41C174.13,41.1,151.36,32,128,32,85.18,32,59.42,57.27,58.34,58.34A8,8,0,0,0,69.66,69.66C69.87,69.44,91.73,48,128,48c23.17,0,41.92,10.85,54.92,21.76L162.34,90.34A8,8,0,0,0,168,104h48a8,8,0,0,0,8-8V48A8,8,0,0,0,219.06,40.61ZM208,88H187.31L208,67.31Zm-21.66,98.34c-.21.22-22.07,21.66-58.34,21.66-23.17,0-41.92-10.85-54.92-21.76l20.58-20.58A8,8,0,0,0,88,152H40a8,8,0,0,0-8,8v48a8,8,0,0,0,13.66,5.66l16.06-16.07C81.87,214.9,104.64,224,128,224c42.82,0,68.58-25.27,69.66-26.34a8,8,0,0,0-11.32-11.32ZM48,168H68.69L48,188.69Z"},null,-1),ht=[ft,gt],yt={key:2},wt=y("path",{d:"M197.66,186.34a8,8,0,0,1,0,11.32C196.58,198.73,170.82,224,128,224c-23.36,0-46.13-9.1-66.28-26.41L45.66,213.66A8,8,0,0,1,32,208V160a8,8,0,0,1,8-8H88a8,8,0,0,1,5.66,13.66L73.08,186.24C86.08,197.15,104.83,208,128,208c36.27,0,58.13-21.44,58.34-21.66A8,8,0,0,1,197.66,186.34Zm21.4-145.73a8,8,0,0,0-8.72,1.73L194.28,58.41C174.13,41.1,151.36,32,128,32,85.18,32,59.42,57.27,58.34,58.34A8,8,0,0,0,69.66,69.66C69.87,69.44,91.73,48,128,48c23.17,0,41.92,10.85,54.92,21.76L162.34,90.34A8,8,0,0,0,168,104h48a8,8,0,0,0,8-8V48A8,8,0,0,0,219.06,40.61Z"},null,-1),kt=[wt],bt={key:3},At=y("path",{d:"M196.24,187.76a6,6,0,0,1,0,8.48C195.19,197.29,170,222,128,222c-39.66,0-67.59-25.75-82-43.26V208a6,6,0,0,1-12,0V160a6,6,0,0,1,6-6H88a6,6,0,0,1,0,12H51.35c11.41,15.11,38.23,44,76.65,44,37.09,0,59.54-22,59.76-22.24A6,6,0,0,1,196.24,187.76ZM216,42a6,6,0,0,0-6,6V77.26C195.59,59.75,167.66,34,128,34,86,34,60.81,58.71,59.76,59.76a6,6,0,0,0,8.48,8.48C68.46,68,90.91,46,128,46c38.42,0,65.24,28.89,76.65,44H168a6,6,0,0,0,0,12h48a6,6,0,0,0,6-6V48A6,6,0,0,0,216,42Z"},null,-1),_t=[At],St={key:4},Ct=y("path",{d:"M197.67,186.37a8,8,0,0,1,0,11.29C196.58,198.73,170.82,224,128,224c-37.39,0-64.53-22.4-80-39.85V208a8,8,0,0,1-16,0V160a8,8,0,0,1,8-8H88a8,8,0,0,1,0,16H55.44C67.76,183.35,93,208,128,208c36,0,58.14-21.46,58.36-21.68A8,8,0,0,1,197.67,186.37ZM216,40a8,8,0,0,0-8,8V71.85C192.53,54.4,165.39,32,128,32,85.18,32,59.42,57.27,58.34,58.34a8,8,0,0,0,11.3,11.34C69.86,69.46,92,48,128,48c35,0,60.24,24.65,72.56,40H168a8,8,0,0,0,0,16h48a8,8,0,0,0,8-8V48A8,8,0,0,0,216,40Z"},null,-1),$t=[Ct],Mt={key:5},Vt=y("path",{d:"M194.83,189.18a4,4,0,0,1,0,5.65c-1,1-25.65,25.17-66.83,25.17-23.93,0-47.35-10.05-67.73-29.08a146.39,146.39,0,0,1-16.27-18V208a4,4,0,0,1-8,0V160a4,4,0,0,1,4-4H88a4,4,0,0,1,0,8H47.41c10,14.06,38.39,48,80.59,48,37.75,0,60.95-22.6,61.18-22.83A4,4,0,0,1,194.83,189.18ZM216,44a4,4,0,0,0-4,4V83.07a146.39,146.39,0,0,0-16.27-18C175.35,46.05,151.93,36,128,36,86.82,36,62.2,60.14,61.17,61.17a4,4,0,0,0,5.65,5.66C67.05,66.6,90.25,44,128,44c42.2,0,70.63,33.94,80.59,48H168a4,4,0,0,0,0,8h48a4,4,0,0,0,4-4V48A4,4,0,0,0,216,44Z"},null,-1),xt=[Vt],Tt={name:"PhArrowsClockwise"},Ht=Z({...Tt,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(m){const l=m,o=H("weight","regular"),c=H("size","1em"),n=H("color","currentColor"),u=H("mirrored",!1),s=$(()=>{var r;return(r=l.weight)!=null?r:o}),A=$(()=>{var r;return(r=l.size)!=null?r:c}),M=$(()=>{var r;return(r=l.color)!=null?r:n}),h=$(()=>l.mirrored!==void 0?l.mirrored?"scale(-1, 1)":void 0:u?"scale(-1, 1)":void 0);return(r,p)=>(i(),w("svg",q({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:A.value,height:A.value,fill:M.value,transform:h.value},r.$attrs),[O(r.$slots,"default"),s.value==="bold"?(i(),w("g",pt,vt)):s.value==="duotone"?(i(),w("g",ct,ht)):s.value==="fill"?(i(),w("g",yt,kt)):s.value==="light"?(i(),w("g",bt,_t)):s.value==="regular"?(i(),w("g",St,$t)):s.value==="thin"?(i(),w("g",Mt,xt)):V("",!0)],16,dt))}}),Ft=["width","height","fill","transform"],Rt={key:0},Zt=y("path",{d:"M234.49,111.07,90.41,22.94A20,20,0,0,0,60,39.87V216.13a20,20,0,0,0,30.41,16.93l144.08-88.13a19.82,19.82,0,0,0,0-33.86ZM84,208.85V47.15L216.16,128Z"},null,-1),Ut=[Zt],Et={key:1},It=y("path",{d:"M228.23,134.69,84.15,222.81A8,8,0,0,1,72,216.12V39.88a8,8,0,0,1,12.15-6.69l144.08,88.12A7.82,7.82,0,0,1,228.23,134.69Z",opacity:"0.2"},null,-1),Pt=y("path",{d:"M232.4,114.49,88.32,26.35a16,16,0,0,0-16.2-.3A15.86,15.86,0,0,0,64,39.87V216.13A15.94,15.94,0,0,0,80,232a16.07,16.07,0,0,0,8.36-2.35L232.4,141.51a15.81,15.81,0,0,0,0-27ZM80,215.94V40l143.83,88Z"},null,-1),Lt=[It,Pt],Bt={key:2},Nt=y("path",{d:"M240,128a15.74,15.74,0,0,1-7.6,13.51L88.32,229.65a16,16,0,0,1-16.2.3A15.86,15.86,0,0,1,64,216.13V39.87a15.86,15.86,0,0,1,8.12-13.82,16,16,0,0,1,16.2.3L232.4,114.49A15.74,15.74,0,0,1,240,128Z"},null,-1),Dt=[Nt],Ot={key:3},qt=y("path",{d:"M231.36,116.19,87.28,28.06a14,14,0,0,0-14.18-.27A13.69,13.69,0,0,0,66,39.87V216.13a13.69,13.69,0,0,0,7.1,12.08,14,14,0,0,0,14.18-.27l144.08-88.13a13.82,13.82,0,0,0,0-23.62Zm-6.26,13.38L81,217.7a2,2,0,0,1-2.06,0,1.78,1.78,0,0,1-1-1.61V39.87a1.78,1.78,0,0,1,1-1.61A2.06,2.06,0,0,1,80,38a2,2,0,0,1,1,.31L225.1,126.43a1.82,1.82,0,0,1,0,3.14Z"},null,-1),zt=[qt],Wt={key:4},jt=y("path",{d:"M232.4,114.49,88.32,26.35a16,16,0,0,0-16.2-.3A15.86,15.86,0,0,0,64,39.87V216.13A15.94,15.94,0,0,0,80,232a16.07,16.07,0,0,0,8.36-2.35L232.4,141.51a15.81,15.81,0,0,0,0-27ZM80,215.94V40l143.83,88Z"},null,-1),Qt=[jt],Gt={key:5},Jt=y("path",{d:"M230.32,117.9,86.24,29.79a11.91,11.91,0,0,0-12.17-.23A11.71,11.71,0,0,0,68,39.89V216.11a11.71,11.71,0,0,0,6.07,10.33,11.91,11.91,0,0,0,12.17-.23L230.32,138.1a11.82,11.82,0,0,0,0-20.2Zm-4.18,13.37L82.06,219.39a4,4,0,0,1-4.07.07,3.77,3.77,0,0,1-2-3.35V39.89a3.77,3.77,0,0,1,2-3.35,4,4,0,0,1,4.07.07l144.08,88.12a3.8,3.8,0,0,1,0,6.54Z"},null,-1),Kt=[Jt],Xt={name:"PhPlay"},Yt=Z({...Xt,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(m){const l=m,o=H("weight","regular"),c=H("size","1em"),n=H("color","currentColor"),u=H("mirrored",!1),s=$(()=>{var r;return(r=l.weight)!=null?r:o}),A=$(()=>{var r;return(r=l.size)!=null?r:c}),M=$(()=>{var r;return(r=l.color)!=null?r:n}),h=$(()=>l.mirrored!==void 0?l.mirrored?"scale(-1, 1)":void 0:u?"scale(-1, 1)":void 0);return(r,p)=>(i(),w("svg",q({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:A.value,height:A.value,fill:M.value,transform:h.value},r.$attrs),[O(r.$slots,"default"),s.value==="bold"?(i(),w("g",Rt,Ut)):s.value==="duotone"?(i(),w("g",Et,Lt)):s.value==="fill"?(i(),w("g",Bt,Dt)):s.value==="light"?(i(),w("g",Ot,zt)):s.value==="regular"?(i(),w("g",Wt,Qt)):s.value==="thin"?(i(),w("g",Gt,Kt)):V("",!0)],16,Ft))}}),ea=["width","height","fill","transform"],ta={key:0},aa=y("path",{d:"M200.73,36H55.27A19.3,19.3,0,0,0,36,55.27V200.73A19.3,19.3,0,0,0,55.27,220H200.73A19.3,19.3,0,0,0,220,200.73V55.27A19.3,19.3,0,0,0,200.73,36ZM196,196H60V60H196Z"},null,-1),oa=[aa],la={key:1},ra=y("path",{d:"M208,55.27V200.73a7.28,7.28,0,0,1-7.27,7.27H55.27A7.28,7.28,0,0,1,48,200.73V55.27A7.28,7.28,0,0,1,55.27,48H200.73A7.28,7.28,0,0,1,208,55.27Z",opacity:"0.2"},null,-1),na=y("path",{d:"M200.73,40H55.27A15.29,15.29,0,0,0,40,55.27V200.73A15.29,15.29,0,0,0,55.27,216H200.73A15.29,15.29,0,0,0,216,200.73V55.27A15.29,15.29,0,0,0,200.73,40ZM200,200H56V56H200Z"},null,-1),ua=[ra,na],sa={key:2},ia=y("path",{d:"M216,55.27V200.73A15.29,15.29,0,0,1,200.73,216H55.27A15.29,15.29,0,0,1,40,200.73V55.27A15.29,15.29,0,0,1,55.27,40H200.73A15.29,15.29,0,0,1,216,55.27Z"},null,-1),da=[ia],pa={key:3},ma=y("path",{d:"M200.73,42H55.27A13.28,13.28,0,0,0,42,55.27V200.73A13.28,13.28,0,0,0,55.27,214H200.73A13.28,13.28,0,0,0,214,200.73V55.27A13.28,13.28,0,0,0,200.73,42ZM202,200.73a1.27,1.27,0,0,1-1.27,1.27H55.27A1.27,1.27,0,0,1,54,200.73V55.27A1.27,1.27,0,0,1,55.27,54H200.73A1.27,1.27,0,0,1,202,55.27Z"},null,-1),va=[ma],ca={key:4},fa=y("path",{d:"M200.73,40H55.27A15.29,15.29,0,0,0,40,55.27V200.73A15.29,15.29,0,0,0,55.27,216H200.73A15.29,15.29,0,0,0,216,200.73V55.27A15.29,15.29,0,0,0,200.73,40ZM200,200H56V56H200Z"},null,-1),ga=[fa],ha={key:5},ya=y("path",{d:"M200.73,44H55.27A11.29,11.29,0,0,0,44,55.27V200.73A11.29,11.29,0,0,0,55.27,212H200.73A11.29,11.29,0,0,0,212,200.73V55.27A11.29,11.29,0,0,0,200.73,44ZM204,200.73a3.28,3.28,0,0,1-3.27,3.27H55.27A3.28,3.28,0,0,1,52,200.73V55.27A3.28,3.28,0,0,1,55.27,52H200.73A3.28,3.28,0,0,1,204,55.27Z"},null,-1),wa=[ya],ka={name:"PhStop"},ba=Z({...ka,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(m){const l=m,o=H("weight","regular"),c=H("size","1em"),n=H("color","currentColor"),u=H("mirrored",!1),s=$(()=>{var r;return(r=l.weight)!=null?r:o}),A=$(()=>{var r;return(r=l.size)!=null?r:c}),M=$(()=>{var r;return(r=l.color)!=null?r:n}),h=$(()=>l.mirrored!==void 0?l.mirrored?"scale(-1, 1)":void 0:u?"scale(-1, 1)":void 0);return(r,p)=>(i(),w("svg",q({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:A.value,height:A.value,fill:M.value,transform:h.value},r.$attrs),[O(r.$slots,"default"),s.value==="bold"?(i(),w("g",ta,oa)):s.value==="duotone"?(i(),w("g",la,ua)):s.value==="fill"?(i(),w("g",sa,da)):s.value==="light"?(i(),w("g",pa,va)):s.value==="regular"?(i(),w("g",ca,ga)):s.value==="thin"?(i(),w("g",ha,wa)):V("",!0)],16,ea))}});function ie(m){for(var l=1;l<arguments.length;l++){var o=arguments[l]!=null?Object(arguments[l]):{},c=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(c=c.concat(Object.getOwnPropertySymbols(o).filter(function(n){return Object.getOwnPropertyDescriptor(o,n).enumerable}))),c.forEach(function(n){Aa(m,n,o[n])})}return m}function Aa(m,l,o){return l in m?Object.defineProperty(m,l,{value:o,enumerable:!0,configurable:!0,writable:!0}):m[l]=o,m}var Q=function(l,o){var c=ie({},l,o.attrs);return t(Fe,ie({},c,{icon:it}),null)};Q.displayName="ExportOutlined";Q.inheritAttrs=!1;const _a=Q,Sa=Z({__name:"ThreadSelectorModal",props:{showThreadModal:{type:Boolean},stage:{},executionConfig:{}},emits:["fix-invalid-json","update:execution-config","update:show-thread-modal"],setup(m,{emit:l}){const o=()=>{l("update:show-thread-modal",!1),D.writeTestData(c.threadData)};Re(async()=>c.threadData=await D.readTestData());const c=Ze({threadData:"{}"});return(n,u)=>(i(),_(e(ve),{open:n.showThreadModal,footer:null,onCancel:o},{default:a(()=>[t(et,{stage:n.stage,"execution-config":n.executionConfig,"onUpdate:executionConfig":u[0]||(u[0]=s=>l("update:execution-config",s)),"onUpdate:showThreadModal":u[1]||(u[1]=s=>l("update:show-thread-modal",s)),onFixInvalidJson:u[2]||(u[2]=s=>l("fix-invalid-json",s,s))},null,8,["stage","execution-config"])]),_:1},8,["open"]))}});const Ca=z(Sa,[["__scopeId","data-v-541d30a8"]]),ge=m=>(de("data-v-a8ca44f6"),m=m(),pe(),m),$a=ge(()=>y("i",null,"string",-1)),Ma=ge(()=>y("i",null,"string list",-1)),Va=Z({__name:"FormNotificationSettings",props:{form:{}},setup(m){const o=C(m.form);return(c,n)=>(i(),w(W,null,[t(e(j),{layout:"vertical"},{default:a(()=>[t(e(I),{level:4,width:"100%",height:"30px",style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0px"}},{default:a(()=>[k(" Thread waiting "),t(e(ce),{checked:o.value.notificationTrigger.enabled,"onUpdate:checked":n[0]||(n[0]=u=>o.value.notificationTrigger.enabled=u)},{default:a(()=>[k(" Enabled ")]),_:1},8,["checked"])]),_:1}),t(e(B),{class:"description",style:{fontStyle:"italic",marginBottom:"20px"}},{default:a(()=>[k(" Send emails when the thread is waiting for the form to be filled ")]),_:1}),t(e(T),{label:"Variable name"},{default:a(()=>[t(e(F),{value:o.value.notificationTrigger.variable_name,"onUpdate:value":n[1]||(n[1]=u=>o.value.notificationTrigger.variable_name=u),disabled:!o.value.notificationTrigger.enabled,type:"text",placeholder:"variable_name"},null,8,["value","disabled"])]),_:1})]),_:1}),t(e(ue),{type:"info"},{message:a(()=>[t(e(B),null,{default:a(()=>[k(" Notifications are sent to the emails specified in the thread variables set here. The variables should contain a "),$a,k(" or a "),Ma,k(". ")]),_:1})]),_:1}),t(e(ue),{style:{"margin-top":"20px"}},{message:a(()=>[t(e(B),null,{default:a(()=>[k(" Notifications are a paid feature. Talk to your account manager to enable them. ")]),_:1})]),_:1})],64))}});const xa=z(Va,[["__scopeId","data-v-a8ca44f6"]]),Ta=Z({__name:"FormSettings",props:{form:{}},setup(m){const o=C(m.form);return(c,n)=>(i(),_(e(j),{layout:"vertical",style:{"padding-bottom":"50px"}},{default:a(()=>[t(je,{runtime:o.value},null,8,["runtime"]),t(e(T),{label:"Form name"},{default:a(()=>[t(e(F),{value:o.value.title,"onUpdate:value":n[0]||(n[0]=u=>o.value.title=u),type:"text",onChange:n[1]||(n[1]=u=>{var s;return o.value.title=(s=u.target.value)!=null?s:""})},null,8,["value"])]),_:1}),t(e(I),{level:3},{default:a(()=>[k(" Texts ")]),_:1}),t(e(I),{level:4},{default:a(()=>[k(" Welcome Screen ")]),_:1}),t(e(T),{label:"Title"},{default:a(()=>[t(e(F),{value:o.value.welcomeTitle,"onUpdate:value":n[2]||(n[2]=u=>o.value.welcomeTitle=u),type:"text",placeholder:o.value.title,disabled:o.value.autoStart},null,8,["value","placeholder","disabled"])]),_:1}),t(e(T),{label:"Description"},{default:a(()=>[t(e(F),{value:o.value.startMessage,"onUpdate:value":n[3]||(n[3]=u=>o.value.startMessage=u),type:"text",disabled:o.value.autoStart},null,8,["value","disabled"])]),_:1}),t(e(T),{label:"Start button label"},{default:a(()=>[t(e(F),{value:o.value.startButtonText,"onUpdate:value":n[4]||(n[4]=u=>o.value.startButtonText=u),type:"text",placeholder:"Start",disabled:o.value.autoStart},null,8,["value","disabled"])]),_:1}),t(e(T),null,{default:a(()=>[t(e(oe),{checked:o.value.autoStart,"onUpdate:checked":n[5]||(n[5]=u=>o.value.autoStart=u)},{default:a(()=>[k("Skip welcome screen")]),_:1},8,["checked"])]),_:1}),t(e(I),{level:4},{default:a(()=>[k(" End Screen ")]),_:1}),t(e(T),{label:"End text"},{default:a(()=>[t(e(F),{value:o.value.endMessage,"onUpdate:value":n[6]||(n[6]=u=>o.value.endMessage=u),type:"text",placeholder:"Thank you"},null,8,["value"])]),_:1}),t(e(T),{label:"Restart button label"},{default:a(()=>[t(e(F),{value:o.value.restartButtonText,"onUpdate:value":n[7]||(n[7]=u=>o.value.restartButtonText=u),placeholder:"Restart",type:"text",disabled:!o.value.allowRestart},null,8,["value","disabled"])]),_:1}),t(e(T),{help:!o.value.isInitial&&"Only initial forms can be restarted"},{default:a(()=>[t(e(oe),{checked:o.value.allowRestart,"onUpdate:checked":n[8]||(n[8]=u=>o.value.allowRestart=u),disabled:!o.value.isInitial},{default:a(()=>[k("Show restart button at the end")]),_:1},8,["checked","disabled"])]),_:1},8,["help"]),t(e(I),{level:4},{default:a(()=>[k(" Alert Messages ")]),_:1}),t(e(T),{label:"Error message"},{default:a(()=>[t(e(F),{value:o.value.errorMessage,"onUpdate:value":n[9]||(n[9]=u=>o.value.errorMessage=u),type:"text",placeholder:"Something went wrong"},null,8,["value"])]),_:1})]),_:1}))}}),Ha=Z({__name:"QueryParamsModal",props:{open:{type:Boolean},close:{type:Function},queryParams:{}},emits:["update:query-params"],setup(m,{emit:l}){const c=C(n(m.queryParams));function n(h){return Object.entries(h).map(([r,p])=>({key:r,value:p,id:Math.random().toString()}))}function u(){const h={};return c.value.forEach(({key:r,value:p})=>{h[r]=p}),h}const s=(h,r,p)=>{c.value[h]={key:r,value:p},l("update:query-params",u())},A=()=>{const h=c.value.length;c.value.push({key:`param-${h}`,value:"value"}),l("update:query-params",u())},M=h=>{c.value.splice(h,1),l("update:query-params",u())};return(h,r)=>(i(),_(e(ve),{open:h.open,onCancel:h.close},{footer:a(()=>[t(e(R),{type:"primary",onClick:h.close},{default:a(()=>[k("OK")]),_:1},8,["onClick"])]),default:a(()=>[t(e(P),{vertical:"",gap:"20"},{default:a(()=>[t(e(B),null,{default:a(()=>[k("Query params")]),_:1}),(i(!0),w(W,null,Ue(c.value,(p,g)=>(i(),_(e(T),{key:g},{default:a(()=>[t(e(Ee),null,{default:a(()=>[t(e(F),{value:p.key,"onUpdate:value":d=>p.key=d,type:"text",placeholder:"name",onChange:()=>s(g,p.key,p.value)},null,8,["value","onUpdate:value","onChange"]),t(e(F),{value:p.value,"onUpdate:value":d=>p.value=d,type:"text",placeholder:"value",disabled:p.key===e(fe),onChange:()=>s(g,p.key,p.value)},null,8,["value","onUpdate:value","disabled","onChange"]),t(e(R),{danger:"",onClick:d=>M(g)},{default:a(()=>[k("remove")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),t(e(T),null,{default:a(()=>[t(e(R),{type:"dashed",style:{width:"100%"},onClick:A},{default:a(()=>[k(" Add Query Param ")]),_:1})]),_:1})]),_:1})]),_:1},8,["open","onCancel"]))}}),Fa=m=>(de("data-v-48d2f314"),m=m(),pe(),m),Ra={key:0},Za={key:1},Ua=Fa(()=>y("br",null,null,-1)),Ea={class:"form-preview-container"},Ia=Z({__name:"FormTester",props:{formRunnerData:{},formState:{},userEmail:{},disabledWarning:{},queryParams:{},stageRunId:{},needsThread:{type:Boolean}},emits:["start","reset","navigate","logout","auto-fill-clicked","action-clicked","update-widget-errors","update-widget-value","update:query-params","update:show-thread-modal"],setup(m,{emit:l}){var r;const o=m,c=C(!1),n=()=>{c.value=!0},u=()=>{c.value=!1},s=$(()=>{const p=h.value.query?`?${h.value.query}`:"";return`/${o.formRunnerData.path}${p}`}),A=C((r=le.get("dontShowReloadHelper"))!=null?r:!1),M=()=>{le.set("dontShowReloadHelper",!0),A.value=!0},h=$(()=>{const p=new URLSearchParams(o.queryParams).toString();return{subdomain:"[your-subdomain]",path:o.formRunnerData.path,query:p}});return(p,g)=>(i(),w(W,null,[t(e(j),{layout:"vertical"},{default:a(()=>[t(e(P),{gap:"small"},{default:a(()=>[p.formState.type&&e(Oe).includes(p.formState.type)?(i(),_(e(N),{key:0,placement:"bottom",visible:A.value?void 0:!0},{content:a(()=>[A.value?(i(),w("span",Ra,"Reload form")):(i(),w("span",Za,[k(" You can reload the form here"),Ua,t(e(tt),{onClick:M},{default:a(()=>[k("Don't show this again")]),_:1})]))]),default:a(()=>[t(e(R),{disabled:!!p.disabledWarning,onClick:g[0]||(g[0]=d=>l("reset"))},{default:a(()=>[t(e(Ht),{size:"20"})]),_:1},8,["disabled"])]),_:1},8,["visible"])):V("",!0),e(me).includes(p.formState.type)?(i(),_(e(N),{key:1,placement:"bottom"},{content:a(()=>[k("Stop form")]),default:a(()=>[t(e(R),{onClick:g[1]||(g[1]=d=>l("reset"))},{default:a(()=>[t(e(ba),{size:"20"})]),_:1})]),_:1})):V("",!0),p.formState.type==="waiting"?(i(),_(e(N),{key:2,placement:"bottom"},{content:a(()=>[k("Start form")]),default:a(()=>[t(e(R),{disabled:!!p.disabledWarning,onClick:g[2]||(g[2]=d=>l("start"))},{default:a(()=>[t(e(Yt),{size:"20"})]),_:1},8,["disabled"])]),_:1})):V("",!0),t(e(F),{value:s.value,class:"url-preview",onClick:n},null,8,["value"]),t(e(at),{dot:p.needsThread},{default:a(()=>[t(e(R),{onClick:g[3]||(g[3]=d=>l("update:show-thread-modal",!0))},{default:a(()=>[k("Thread")]),_:1})]),_:1},8,["dot"])]),_:1}),y("div",Ea,[t(qe,{"is-preview":"","form-runner-data":p.formRunnerData,disabled:p.disabledWarning,"form-state":p.formState,"user-email":p.userEmail,onUpdateWidgetErrors:g[4]||(g[4]=(d,U)=>l("update-widget-errors",d,U)),onUpdateWidgetValue:g[5]||(g[5]=(d,U)=>l("update-widget-value",d,U)),onActionClicked:g[6]||(g[6]=d=>l("action-clicked",d)),onNavigate:g[7]||(g[7]=d=>l("navigate",d)),onLogout:g[8]||(g[8]=d=>l("logout")),onAutofillClicked:g[9]||(g[9]=d=>l("auto-fill-clicked"))},null,8,["form-runner-data","disabled","form-state","user-email"])])]),_:1}),t(Ha,{"query-params":p.queryParams,open:c.value,close:u,"onUpdate:queryParams":g[10]||(g[10]=d=>l("update:query-params",d))},null,8,["query-params","open"])],64))}});const Pa=z(Ia,[["__scopeId","data-v-48d2f314"]]),La={style:{width:"50%"}},Ba={style:{width:"50%"}},Ko=Z({__name:"FormEditor",setup(m){const l=Ie(),o=Pe(),c=C(null),n=C("source-code"),u=C("preview"),s=C(null),A=C(null),M=C(null),h=C(null),r=C({}),p=C(!1),g=v=>d.value={...d.value,attached:!!v},d=C({attached:!1,stageRunId:null,pendingFork:!1}),U=$(()=>{var v;return(v=b.value)!=null&&v.form.hasChanges()?{title:"Unsaved changes",message:"Save the form before running the workflow"}:d.value.attached&&d.value.pendingFork?{title:"No thread selected",message:"Fork the selected thread to run the workflow"}:d.value.attached&&!d.value.stageRunId?{title:"No thread selected",message:"Select a thread to run the workflow"}:null}),he=(v,f)=>{var x;(x=c.value)==null||x.setHighlight(v,f)},ye=()=>{var v,f;(v=c.value)==null||v.restartEditor(),(f=c.value)==null||f.startPreviewMode()};Le(()=>d.value.stageRunId?r.value={...r.value,[fe]:d.value.stageRunId}:null);const{result:b,loading:we,refetch:ke}=Ke(async()=>{const[v,f]=await Promise.all([Xe.get(o.params.id),D.get()]);return Be({form:v,workspace:f})});re([d,r,b],()=>{G()});function G(){if(!b.value)return;const v=!d.value.attached;M.value=b.value.form.makeRunnerData(b.value.workspace),s.value=new ze({formRunnerData:M.value,queryParams:r.value,userManager:He,logService:K,connectionManager:new We(b.value.form.id,v),onFormStart:ye,onFormEnd:be,onRedirect:Me,onAuthUpdate:x=>h.value=x,onStateUpdate:x=>A.value=x,onStackTraceUpdate:he});const f=s.value.getState();A.value=f.formState,h.value=f.passwordlessUser}const be=()=>{var v;d.value={attached:!1,stageRunId:null,pendingFork:!1},(v=c.value)==null||v.restartEditor()};function Ae(){var v;(v=s.value)==null||v.start()}function _e(){var v,f;(v=c.value)==null||v.restartEditor(),(f=s.value)==null||f.reset()}const Se=v=>{ne("editor",l,v.path)};function Ce(){l.push({name:"stages"})}const J=C(null),$e=v=>{!b.value||(b.value.form.file=v)},K=Je.create();function Me(v,f){ne("editor",l,v,f)}const Ve=()=>{var v;l.push({name:"formPreview",query:o.query,params:{id:(v=b.value)==null?void 0:v.form.id}})},xe=()=>{var f;let v=`/${(f=b.value)==null?void 0:f.form.path}`;d.value.attached&&d.value.stageRunId&&(v+=`?abstra-run-id=${d.value.stageRunId}`),window.open(v,"_blank")};return re(()=>o.params.id,()=>{ke()}),(v,f)=>(i(),_(De,{"no-margins":""},{navbar:a(()=>[e(b)?(i(),_(e(lt),{key:0,title:e(b).form.title,style:{padding:"5px 25px","margin-bottom":"15px"},onBack:Ce},{extra:a(()=>[t(ot,{"docs-path":"forms/overview","show-v-s-code-button":"","show-save-button":!1,"editing-model":e(b).form},null,8,["editing-model"])]),_:1},8,["title"])):V("",!0)]),content:a(()=>[e(b)?(i(),_(e(P),{key:0,gap:"40",style:{width:"calc(100% - 80px)"}},{default:a(()=>{var x,E,X,Y,ee,te;return[y("div",La,[t(e(se),{"active-key":n.value,"onUpdate:activeKey":f[0]||(f[0]=S=>n.value=S)},{rightExtra:a(()=>[t(Ye,{model:e(b).form,onSave:G},null,8,["model"])]),default:a(()=>[t(e(L),{key:"source-code",tab:"Source code"}),t(e(L),{key:"settings",tab:"Settings"}),t(e(L),{key:"notifications",tab:"Notifications"})]),_:1},8,["active-key"]),n.value==="source-code"?(i(),_(Qe,{key:0,ref_key:"code",ref:c,script:e(b).form,workspace:e(b).workspace,onUpdateFile:$e},null,8,["script","workspace"])):V("",!0),n.value==="settings"?(i(),_(Ta,{key:1,form:e(b).form},null,8,["form"])):V("",!0),n.value==="notifications"?(i(),_(xa,{key:2,form:e(b).form},null,8,["form"])):V("",!0),p.value?(i(),_(Ca,{key:3,"execution-config":d.value,"onUpdate:executionConfig":f[1]||(f[1]=S=>d.value=S),"show-thread-modal":p.value,"onUpdate:showThreadModal":f[2]||(f[2]=S=>p.value=S),stage:e(b).form,onFixInvalidJson:f[3]||(f[3]=(S,Te)=>{var ae;return(ae=J.value)==null?void 0:ae.fixJson(S,Te)})},null,8,["execution-config","show-thread-modal","stage"])):V("",!0)]),y("div",Ba,[t(e(se),{"active-key":u.value,"onUpdate:activeKey":f[4]||(f[4]=S=>u.value=S)},{rightExtra:a(()=>[t(e(P),{gap:"large",align:"center"},{default:a(()=>{var S;return[A.value&&e(me).includes((S=A.value)==null?void 0:S.type)?(i(),_(e(rt),{key:0,color:"green"},{default:a(()=>[k(" Running ")]),_:1})):V("",!0),t(e(P),{gap:"small"},{default:a(()=>[t(e(nt),null,{default:a(()=>[k("Continue workflow")]),_:1}),t(e(ce),{checked:d.value.attached,"onUpdate:checked":g},null,8,["checked"])]),_:1}),d.value.attached?(i(),_(e(R),{key:1,target:"_blank",onClick:xe},{icon:a(()=>[t(e(_a))]),default:a(()=>[k(" Open ")]),_:1})):(i(),_(e(R),{key:2,target:"_blank",onClick:Ve},{icon:a(()=>[t(e(ut))]),default:a(()=>[k(" Preview ")]),_:1}))]}),_:1})]),default:a(()=>[t(e(L),{key:"preview",tab:"Preview"})]),_:1},8,["active-key"]),e(we)||!M.value||!A.value?(i(),_(e(Ne),{key:0})):u.value==="preview"?(i(),_(Pa,{key:1,"query-params":r.value,"onUpdate:queryParams":f[5]||(f[5]=S=>r.value=S),"show-thread-modal":p.value,"onUpdate:showThreadModal":f[6]||(f[6]=S=>p.value=S),"form-state":A.value,"form-runner-data":M.value,"user-email":(x=h.value)==null?void 0:x.claims.email,"disabled-warning":U.value,"stage-run-id":d.value.stageRunId,"needs-thread":d.value.attached&&!!(d.value.pendingFork||!d.value.stageRunId),onStart:Ae,onReset:_e,onLogout:(E=s.value)==null?void 0:E.logout,onActionClicked:(X=s.value)==null?void 0:X.handleActionClick,onNavigate:Se,onUpdateWidgetErrors:(Y=s.value)==null?void 0:Y.updateWidgetFrontendErrors,onUpdateWidgetValue:(ee=s.value)==null?void 0:ee.updateWidgetValue,onAutoFillClicked:(te=s.value)==null?void 0:te.handleAutofillClick},null,8,["query-params","show-thread-modal","form-state","form-runner-data","user-email","disabled-warning","stage-run-id","needs-thread","onLogout","onActionClicked","onUpdateWidgetErrors","onUpdateWidgetValue","onAutoFillClicked"])):V("",!0)])]}),_:1})):V("",!0)]),footer:a(()=>{var x,E;return[t(Ge,{ref_key:"smartConsole",ref:J,runtime:"forms","log-service":e(K),stage:(x=e(b))==null?void 0:x.form,workspace:(E=e(b))==null?void 0:E.workspace},null,8,["log-service","stage","workspace"])]}),_:1}))}});export{Ko as default};
//# sourceMappingURL=FormEditor.3b5be75c.js.map
