import{d as w,b as o,c as a,e as n,t as C,r as R,bh as b,eA as f,er as t,bw as S,ez as P,E as V,a as U,u as E,bu as d,aS as g,eF as B,eL as q,eu as H,eB as A,eC as L,ey as O,eq as y}from"./registerWidgets.fbede4e9.js";import{R as G,L as $,T as J,S as M,_ as N,a as D}from"./UnsavedChangesHandler.vue_vue_type_script_setup_true_lang.3a556503.js";import{L as I}from"./CircularLoading.1684a417.js";import{a as Q}from"./asyncComputed.ded4e064.js";import{H as F}from"./hooks.cd5e1776.js";import{B as j}from"./BackButton.a6b30b4d.js";import{A as z,B as K,e as W}from"./icons.9ea484f9.js";import{S as X}from"./SaveButton.f88b88d5.js";import{D as Y}from"./DocsButton.a635e15a.js";import"./forms.21e90a92.js";import"./activeRecord.4cd28aae.js";import"./pubsub.9639d873.js";import"./dashes.77dad170.js";import"./index.1acdc6c8.js";import"./jobs.8fda85a0.js";import"./workspaces.33fab7b8.js";import"./uuid.fde67f9b.js";import"./storage.953471f2.js";import"./lottie.af5deb23.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},i=new Error().stack;i&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[i]="2f74cbb0-fb3d-4c5c-95f7-613ad6b39cb0",r._sentryDebugIdIdentifier="sentry-dbid-2f74cbb0-fb3d-4c5c-95f7-613ad6b39cb0")}catch{}})();const Z={class:"hook-settings"},ee=w({__name:"HookSettings",props:{hook:{}},setup(r){return(i,u)=>(o(),a("div",Z,[n(G,{runtime:i.hook},null,8,["runtime"])]))}});const oe=C(ee,[["__scopeId","data-v-6e8accf0"]]),te={class:"options-wrapper"},se=["onClick"],ae=w({__name:"ADropdown",props:{options:{},value:{}},emits:["select"],setup(r,{emit:i}){const u=R(null),e=s=>{var m;i("select",s),(m=u.value)==null||m.blur()};return(s,m)=>(o(),a("div",{ref_key:"dropdown",ref:u,class:"dropdown",tabindex:"1"},[b(f(s.value)+" ",1),t("div",te,[(o(!0),a(S,null,P(s.options,p=>(o(),a("div",{key:p.value,class:"option",onClick:T=>e(p.value)},f(p.label),9,se))),128))])],512))}});const ne=C(ae,[["__scopeId","data-v-cac46a2e"]]),x=r=>(A("data-v-36cb1667"),r=r(),L(),r),le={class:"hook-runner"},re={class:"title"},ce={class:"section"},ie=x(()=>t("div",{class:"section-header"},"Request configuration",-1)),de=x(()=>t("div",{class:"subsection-label"},"Method",-1)),ue={class:"subsection-label"},pe=["onUpdate:modelValue"],_e=["onUpdate:modelValue"],he={key:0,class:"subsection-label"},me={class:"property"},ve=x(()=>t("div",{class:"property-label"},"Body is JSON",-1)),fe={class:"section"},ye=x(()=>t("div",{class:"section-header"},"Response",-1)),be={key:0,class:"section"},ke={class:"no-execution-message"},ge={key:1,class:"section"},Se=w({__name:"HookRunner",props:{hook:{}},setup(r){const i=r,u=[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"PUT",value:"PUT"},{label:"PATCH",value:"PATCH"}],e=V({queryParams:[{name:"",value:""}],method:"GET",body:"",loading:!1,isBodyJson:!0}),s=$.create(),m=async()=>{const v={"Content-Type":e.isBodyJson?"application/json":"text/plain"},c=await i.hook.test({method:e.method,query:e.queryParams.reduce((_,{name:l,value:h})=>(l&&h&&(_[l]=h),_),{}),body:e.body,headers:{...v}});e.response=c,c.stderr&&s.log({type:"stderr",log:c.stderr}),c.stdout&&s.log({type:"stdout",log:c.stdout})},p=()=>{e.queryParams.push({name:"",value:""})},T=v=>{e.queryParams=e.queryParams.filter((c,_)=>_!==v)};return(v,c)=>{const _=U("icon");return o(),a("div",le,[t("div",re,[b(" Test your hook here "),e.loading?(o(),E(I,{key:0})):(o(),a("button",{key:1,class:"execution-button",onClick:m},[n(_,{path:d(z),width:"14",height:"14",fill:"#ffffff"},null,8,["path"]),b(" Run ")]))]),t("div",ce,[ie,de,n(ne,{value:e.method,options:u,onSelect:c[0]||(c[0]=l=>e.method=l)},null,8,["value"]),t("div",ue,[b(" Query Params "),n(_,{class:"action-icon",path:d(K),width:"16",height:"16","fill-hover":"#777777",onClick:p},null,8,["path"])]),(o(!0),a(S,null,P(e.queryParams,(l,h)=>(o(),a("div",{key:h,class:"params-input"},[g(t("input",{"onUpdate:modelValue":k=>l.name=k,type:"text",placeholder:"name"},null,8,pe),[[B,l.name]]),g(t("input",{"onUpdate:modelValue":k=>l.value=k,type:"text",placeholder:"value"},null,8,_e),[[B,l.value]]),n(_,{class:"delete-icon",path:d(W),"fill-hover":"#777777",onClick:k=>T(h)},null,8,["path","onClick"])]))),128)),e.method!=="GET"?(o(),a("div",he,[b(" Request Body "),t("div",me,[g(t("input",{"onUpdate:modelValue":c[1]||(c[1]=l=>e.isBodyJson=l),class:"checkbox-input",type:"checkbox"},null,512),[[q,e.isBodyJson]]),ve])])):H("",!0),e.method!=="GET"?g((o(),a("textarea",{key:1,"onUpdate:modelValue":c[2]||(c[2]=l=>e.body=l)},null,512)),[[B,e.body]]):H("",!0)]),t("div",fe,[ye,e.loading?(o(),a("div",be,[t("div",ke,[n(I)])])):e.response?(o(),a("div",ge,[t("pre",null,"Status: "+f(e.response.status),1),(o(!0),a(S,null,P(e.response.headers,(l,h)=>(o(),a("pre",{key:h},f(h)+": "+f(l),1))),128)),t("pre",null,f(e.response.body),1)])):H("",!0)])])}}});const we=C(Se,[["__scopeId","data-v-36cb1667"]]),Ce={class:"page"},xe={key:0,class:"loading"},Te=w({__name:"HookEditor",setup(r){const i=O(),u=$.create(),{loading:e,result:s}=Q(async()=>await F.get(i.params.hookPath)),m=async p=>{s.value&&(s.value.path=p,await s.value.save())};return(p,T)=>{var v;return o(),a(S,null,[t("div",Ce,[d(e)||!d(s)?(o(),a("div",xe,[n(I)])):(o(),E(J,{key:1,class:"editor"},{left:y(()=>[n(j,{link:"/_editor/hooks"})]),right:y(()=>[n(Y,{path:"hooks"}),n(X,{model:d(s)},null,8,["model"])]),default:y(()=>[n(D,{title:"Debug"},{default:y(()=>[n(we,{hook:d(s)},null,8,["hook"])]),_:1}),n(D,{title:"Settings"},{default:y(()=>[n(oe,{hook:d(s),onUpdatePath:m},null,8,["hook"])]),_:1})]),_:1})),n(M,{"log-service":d(u),runtime:"hooks"},null,8,["log-service"])]),n(N,{"has-changes":(v=d(s))==null?void 0:v.hasChanges()},null,8,["has-changes"])],64)}}});const Fe=C(Te,[["__scopeId","data-v-69cc27ff"]]);export{Fe as default};
//# sourceMappingURL=HookEditor.4c158dec.js.map
