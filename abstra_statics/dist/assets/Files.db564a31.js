import{_ as G}from"./DocsButton.vue_vue_type_script_setup_true_lang.7cb8b26a.js";import{C as W}from"./ContentLayout.81ad2c3f.js";import{p as J}from"./popupNotifcation.89324e27.js";import{a as Y}from"./ant-design.254ef16f.js";import{a as Q}from"./asyncComputed.b54c1816.js";import{d as R,B as I,f as A,o as u,W as g,Z as T,R as w,e5 as X,a as f,b as i,eb as L,eS as K,e7 as ee,e as te,c as b,w as s,ax as _,u as o,d5 as ae,d3 as F,bL as $,e6 as M,cY as ne,bJ as oe,bq as re,bo as z,d4 as B,cq as le,ef as ie,eg as se,$ as ue}from"./vue-router.8691855a.js";import{C as k}from"./gateway.332a789a.js";import"./tables.28a36928.js";import{D as N}from"./DeleteOutlined.3e122f9a.js";import{C as ce}from"./Card.64a4f103.js";import"./BookOutlined.ba12266a.js";import"./record.4bbdf897.js";import"./string.3ebdf426.js";import"./TabPane.b5040917.js";(function(){try{var a=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[e]="4f5ba518-751e-4068-ab63-fea96220efcc",a._sentryDebugIdIdentifier="sentry-dbid-4f5ba518-751e-4068-ab63-fea96220efcc")}catch{}})();var de={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};const pe=de,fe=["width","height","fill","transform"],me={key:0},ye=f("path",{d:"M144,128a16,16,0,1,1-16-16A16,16,0,0,1,144,128ZM60,112a16,16,0,1,0,16,16A16,16,0,0,0,60,112Zm136,0a16,16,0,1,0,16,16A16,16,0,0,0,196,112Z"},null,-1),he=[ye],ge={key:1},ve=f("path",{d:"M240,96v64a16,16,0,0,1-16,16H32a16,16,0,0,1-16-16V96A16,16,0,0,1,32,80H224A16,16,0,0,1,240,96Z",opacity:"0.2"},null,-1),_e=f("path",{d:"M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128Zm56-12a12,12,0,1,0,12,12A12,12,0,0,0,196,116ZM60,116a12,12,0,1,0,12,12A12,12,0,0,0,60,116Z"},null,-1),be=[ve,_e],we={key:2},Ae=f("path",{d:"M224,80H32A16,16,0,0,0,16,96v64a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V96A16,16,0,0,0,224,80ZM60,140a12,12,0,1,1,12-12A12,12,0,0,1,60,140Zm68,0a12,12,0,1,1,12-12A12,12,0,0,1,128,140Zm68,0a12,12,0,1,1,12-12A12,12,0,0,1,196,140Z"},null,-1),Oe=[Ae],ke={key:3},Ce=f("path",{d:"M138,128a10,10,0,1,1-10-10A10,10,0,0,1,138,128ZM60,118a10,10,0,1,0,10,10A10,10,0,0,0,60,118Zm136,0a10,10,0,1,0,10,10A10,10,0,0,0,196,118Z"},null,-1),je=[Ce],Ie={key:4},Ze=f("path",{d:"M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128Zm56-12a12,12,0,1,0,12,12A12,12,0,0,0,196,116ZM60,116a12,12,0,1,0,12,12A12,12,0,0,0,60,116Z"},null,-1),$e=[Ze],Me={key:5},De=f("path",{d:"M136,128a8,8,0,1,1-8-8A8,8,0,0,1,136,128Zm-76-8a8,8,0,1,0,8,8A8,8,0,0,0,60,120Zm136,0a8,8,0,1,0,8,8A8,8,0,0,0,196,120Z"},null,-1),Se=[De],Pe={name:"PhDotsThree"},Ue=R({...Pe,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(a){const e=a,n=I("weight","regular"),r=I("size","1em"),p=I("color","currentColor"),Z=I("mirrored",!1),m=A(()=>{var c;return(c=e.weight)!=null?c:n}),O=A(()=>{var c;return(c=e.size)!=null?c:r}),y=A(()=>{var c;return(c=e.color)!=null?c:p}),C=A(()=>e.mirrored!==void 0?e.mirrored?"scale(-1, 1)":void 0:Z?"scale(-1, 1)":void 0);return(c,j)=>(u(),g("svg",X({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:O.value,height:O.value,fill:y.value,transform:C.value},c.$attrs),[T(c.$slots,"default"),m.value==="bold"?(u(),g("g",me,he)):m.value==="duotone"?(u(),g("g",ge,be)):m.value==="fill"?(u(),g("g",we,Oe)):m.value==="light"?(u(),g("g",ke,je)):m.value==="regular"?(u(),g("g",Ie,$e)):m.value==="thin"?(u(),g("g",Me,Se)):w("",!0)],16,fe))}});function V(a){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(p){return Object.getOwnPropertyDescriptor(n,p).enumerable}))),r.forEach(function(p){xe(a,p,n[p])})}return a}function xe(a,e,n){return e in a?Object.defineProperty(a,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[e]=n,a}var D=function(e,n){var r=V({},e,n.attrs);return i(L,V({},r,{icon:K}),null)};D.displayName="DownloadOutlined";D.inheritAttrs=!1;const Fe=D;function E(a){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(p){return Object.getOwnPropertyDescriptor(n,p).enumerable}))),r.forEach(function(p){ze(a,p,n[p])})}return a}function ze(a,e,n){return e in a?Object.defineProperty(a,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[e]=n,a}var S=function(e,n){var r=E({},e,n.attrs);return i(L,E({},r,{icon:pe}),null)};S.displayName="UploadOutlined";S.inheritAttrs=!1;const H=S;class P{constructor(e){this.projectId=e}static fromProjectId(e){return new P(e)}async list(){return k.get(`projects/${this.projectId}/files`)}async upload(e,n=""){const r={"Content-Type":"multipart/form-data"};return k.post(`projects/${this.projectId}/files/upload?path=${encodeURIComponent(n+"/"+e.name)}`,e,r)}async download(e){return k.getBlob(`projects/${this.projectId}/files/download?path=${encodeURIComponent(e)}`)}async delete(e){return k.delete(`projects/${this.projectId}/files?path=${encodeURIComponent(e)}`)}async move(e,n){return k.patch(`projects/${this.projectId}/files?path=${encodeURIComponent(e)}&newPath=${encodeURIComponent(n)}`,{})}}const Be=a=>(ie("data-v-a3a8b085"),a=a(),se(),a),Ne=Be(()=>f("br",null,null,-1)),Ve={key:0},Ee={key:0,class:"file-size"},He={class:"action-item"},Re={class:"action-item"},Te=R({__name:"Files",setup(a){const n=ee().params.projectId,r=P.fromProjectId(n),{loading:p,result:Z,refetch:m}=Q(()=>r.list());function O(t){var l,d;return{key:t.path,title:t.name,isLeaf:t.type==="file",file:t,children:t.type==="file"?[]:(d=(l=t.children)==null?void 0:l.map(O))!=null?d:[]}}const y=A(()=>{var t;return(t=Z.value)==null?void 0:t.map(O)}),C=t=>{var l,d;return t.isLeaf?1:(d=(l=t.children)==null?void 0:l.reduce((h,v)=>h+C(v),0))!=null?d:0},c=A(()=>y.value?y==null?void 0:y.value.reduce((t,l)=>t+C(l),0):0),j=te(!1);function U(t){if(t&&t.type==="file")return;const l=document.createElement("input");l.type="file",l.onchange=async()=>{var h;const d=(h=l.files)==null?void 0:h[0];if(!!d)try{j.value=!0,await r.upload(d,t==null?void 0:t.path),await m()}catch{J("Failed to upload file","File already exists")}finally{j.value=!1}},l.click()}async function q(t){if(!t)return;const l=await r.download(t.path),d=document.createElement("a");d.href=URL.createObjectURL(l),d.download=t.name,d.click()}async function x(t){if(!t)return;const l="Are you sure you want to delete this "+(t.type==="file"?"file":"directory and all its contents")+"?";await Y(l)&&(await r.delete(t.path),await m())}return(t,l)=>(u(),b(W,null,{default:s(()=>[i(o(ae),null,{default:s(()=>[_("Files")]),_:1}),i(o(F),null,{default:s(()=>[_(" Here you can upload, download and delete files in your persistent dir."),Ne,_(" Files can be used in your scripts. "),i(G,{path:"cloud/files"}),T(t.$slots,"description",{},void 0,!0)]),_:3}),i(o($),{type:"primary",loading:j.value,onClick:l[0]||(l[0]=d=>U())},{default:s(()=>[i(o(H)),_(" Upload ")]),_:1},8,["loading"]),i(o(ce),null,{default:s(()=>[c.value>0?(u(),b(o(F),{key:0},{default:s(()=>[f("b",null,[_(M(c.value)+" file",1),c.value!==1?(u(),g("span",Ve,"s")):w("",!0)])]),_:1})):w("",!0),y.value&&y.value.length>0?(u(),b(o(ne),{key:1,"tree-data":y.value,selectable:!1},{title:s(({title:d,isLeaf:h,file:v})=>[f("span",null,[_(M(d)+" ",1),h?(u(),g("span",Ee,"("+M(v.size)+")",1)):w("",!0)]),h?(u(),b(o($),{key:0,type:"text",size:"small",style:{float:"inline-end"},onClick:()=>q(v)},{default:s(()=>[i(o(Fe))]),_:2},1032,["onClick"])):w("",!0),h?(u(),b(o($),{key:1,type:"text",size:"small",style:{float:"inline-end"},onClick:()=>x(v)},{default:s(()=>[i(o(N))]),_:2},1032,["onClick"])):w("",!0),h?w("",!0):(u(),b(o(oe),{key:2},{overlay:s(()=>[i(o(re),{disabled:o(p)},{default:s(()=>[i(o(z),{danger:!1,onClick:()=>U(v)},{default:s(()=>[f("div",He,[i(o(H)),i(o(B),null,{default:s(()=>[_(" Upload ")]),_:1})])]),_:2},1032,["onClick"]),i(o(z),{danger:!1,onClick:()=>x(v)},{default:s(()=>[f("div",Re,[i(o(N)),i(o(B),null,{default:s(()=>[_(" Delete ")]),_:1})])]),_:2},1032,["onClick"])]),_:2},1032,["disabled"])]),default:s(()=>[i(o(Ue),{style:{cursor:"pointer",float:"inline-end"},size:"25px"})]),_:2},1024))]),_:1},8,["tree-data"])):(u(),b(o(le),{key:2,description:o(p)?"Loading...":"No files"},null,8,["description"]))]),_:1})]),_:3}))}});const rt=ue(Te,[["__scopeId","data-v-a3a8b085"]]);export{rt as default};
//# sourceMappingURL=Files.db564a31.js.map
