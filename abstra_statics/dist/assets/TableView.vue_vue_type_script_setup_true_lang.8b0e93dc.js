import{l as be}from"./fetch.94c8b741.js";import{d as z,Z,J as I,b as o,ew as f,dl as Y,ey as x,eB as ee,e as C,f as u,eI as ye,eT as Te,z as e,r as D,c as A,w as i,eF as W,as as P,eH as j,u as t,cM as ze,aE as G,cE as U,x as Q,bh as Ve,eL as Fe,eG as te,aI as oe,cm as fe,eC as Ne,eD as Ue,eU as Be,bG as q,eK as qe,K as He,o as Ae,O as ve,af as Ke,cD as We,eN as Ge,bz as Je,eV as Qe,cG as de}from"./outputWidgets.f4ff73cb.js";import{d as Xe,F as Ye}from"./vuedraggable.umd.98bc57eb.js";import"./workspaces.b1acd1b5.js";import{S as et}from"./scripts.257e5be3.js";import"./envVars.092fda86.js";import{A as tt}from"./api.d23d8696.js";import{t as at}from"./ant-design.b167c820.js";import{A as H}from"./Text.b0ae0f80.js";import{a as Ce}from"./asyncComputed.1c2e733f.js";import{A as O}from"./index.38a388d2.js";import{s as ae}from"./metadata.c0f81356.js";import{A as J}from"./index.72e9756f.js";import{f as nt}from"./index.feda5b51.js";import{A as me}from"./Paragraph.0762ff9a.js";import"./index.1893243b.js";import{T as ot,A as st}from"./index.79c263e0.js";import{A as _e,C as Re}from"./CollapsePanel.5f9312a1.js";import{A as rt}from"./Link.58a56401.js";import{A as it}from"./index.cead1e00.js";import{A as lt}from"./index.5920a48d.js";import{A as X}from"./Title.8356c432.js";import{G as ct}from"./PhArrowCounterClockwise.vue.01cffaf3.js";import{C as ut,A as dt}from"./Card.c86b7818.js";import{L as we}from"./LoadingOutlined.7dd20886.js";import"./index.971fc0f1.js";import{F as mt,A as pt}from"./Form.c8ea7c3d.js";import{c as gt}from"./string.08374cff.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},a=new Error().stack;a&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[a]="8911252f-7a89-411c-b243-3b8d4bc3ab73",r._sentryDebugIdIdentifier="sentry-dbid-8911252f-7a89-411c-b243-3b8d4bc3ab73")}catch{}})();var ht={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"};const St=ht,bt=["width","height","fill","transform"],yt={key:0},ft=C("path",{d:"M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm0,192a84,84,0,1,1,84-84A84.09,84.09,0,0,1,128,212Zm68-84a12,12,0,0,1-12,12H128a12,12,0,0,1-12-12V72a12,12,0,0,1,24,0v44h44A12,12,0,0,1,196,128Z"},null,-1),At=[ft],vt={key:1},Ct=C("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"},null,-1),_t=C("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm64-88a8,8,0,0,1-8,8H128a8,8,0,0,1-8-8V72a8,8,0,0,1,16,0v48h48A8,8,0,0,1,192,128Z"},null,-1),Rt=[Ct,_t],wt={key:2},Lt=C("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm56,112H128a8,8,0,0,1-8-8V72a8,8,0,0,1,16,0v48h48a8,8,0,0,1,0,16Z"},null,-1),kt=[Lt],$t={key:3},Et=C("path",{d:"M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm0,192a90,90,0,1,1,90-90A90.1,90.1,0,0,1,128,218Zm62-90a6,6,0,0,1-6,6H128a6,6,0,0,1-6-6V72a6,6,0,0,1,12,0v50h50A6,6,0,0,1,190,128Z"},null,-1),Pt=[Et],It={key:4},xt=C("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm64-88a8,8,0,0,1-8,8H128a8,8,0,0,1-8-8V72a8,8,0,0,1,16,0v48h48A8,8,0,0,1,192,128Z"},null,-1),Ot=[xt],Mt={key:5},Dt=C("path",{d:"M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm0,192a92,92,0,1,1,92-92A92.1,92.1,0,0,1,128,220Zm60-92a4,4,0,0,1-4,4H128a4,4,0,0,1-4-4V72a4,4,0,0,1,8,0v52h52A4,4,0,0,1,188,128Z"},null,-1),jt=[Dt],Zt={name:"PhClock"},Tt=z({...Zt,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(r){const a=r,s=Z("weight","regular"),n=Z("size","1em"),l=Z("color","currentColor"),p=Z("mirrored",!1),d=I(()=>{var c;return(c=a.weight)!=null?c:s}),h=I(()=>{var c;return(c=a.size)!=null?c:n}),L=I(()=>{var c;return(c=a.color)!=null?c:l}),m=I(()=>a.mirrored!==void 0?a.mirrored?"scale(-1, 1)":void 0:p?"scale(-1, 1)":void 0);return(c,y)=>(o(),f("svg",ee({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:h.value,height:h.value,fill:L.value,transform:m.value},c.$attrs),[Y(c.$slots,"default"),d.value==="bold"?(o(),f("g",yt,At)):d.value==="duotone"?(o(),f("g",vt,Rt)):d.value==="fill"?(o(),f("g",wt,kt)):d.value==="light"?(o(),f("g",$t,Pt)):d.value==="regular"?(o(),f("g",It,Ot)):d.value==="thin"?(o(),f("g",Mt,jt)):x("",!0)],16,bt))}}),zt=["width","height","fill","transform"],Vt={key:0},Ft=C("path",{d:"M228,64a36,36,0,1,0-48,33.94V112a4,4,0,0,1-4,4H80a4,4,0,0,1-4-4V97.94a36,36,0,1,0-24,0V112a28,28,0,0,0,28,28h36v18.06a36,36,0,1,0,24,0V140h36a28,28,0,0,0,28-28V97.94A36.07,36.07,0,0,0,228,64ZM64,52A12,12,0,1,1,52,64,12,12,0,0,1,64,52Zm64,152a12,12,0,1,1,12-12A12,12,0,0,1,128,204ZM192,76a12,12,0,1,1,12-12A12,12,0,0,1,192,76Z"},null,-1),Nt=[Ft],Ut={key:1},Bt=C("path",{d:"M88,64A24,24,0,1,1,64,40,24,24,0,0,1,88,64ZM192,40a24,24,0,1,0,24,24A24,24,0,0,0,192,40Z",opacity:"0.2"},null,-1),qt=C("path",{d:"M224,64a32,32,0,1,0-40,31v17a8,8,0,0,1-8,8H80a8,8,0,0,1-8-8V95a32,32,0,1,0-16,0v17a24,24,0,0,0,24,24h40v25a32,32,0,1,0,16,0V136h40a24,24,0,0,0,24-24V95A32.06,32.06,0,0,0,224,64ZM48,64A16,16,0,1,1,64,80,16,16,0,0,1,48,64Zm96,128a16,16,0,1,1-16-16A16,16,0,0,1,144,192ZM192,80a16,16,0,1,1,16-16A16,16,0,0,1,192,80Z"},null,-1),Ht=[Bt,qt],Kt={key:2},Wt=C("path",{d:"M224,64a32,32,0,1,0-40,31v17a8,8,0,0,1-8,8H80a8,8,0,0,1-8-8V95a32,32,0,1,0-16,0v17a24,24,0,0,0,24,24h40v25a32,32,0,1,0,16,0V136h40a24,24,0,0,0,24-24V95A32.06,32.06,0,0,0,224,64ZM144,192a16,16,0,1,1-16-16A16,16,0,0,1,144,192Z"},null,-1),Gt=[Wt],Jt={key:3},Qt=C("path",{d:"M222,64a30,30,0,1,0-36,29.4V112a10,10,0,0,1-10,10H80a10,10,0,0,1-10-10V93.4a30,30,0,1,0-12,0V112a22,22,0,0,0,22,22h42v28.6a30,30,0,1,0,12,0V134h42a22,22,0,0,0,22-22V93.4A30.05,30.05,0,0,0,222,64ZM46,64A18,18,0,1,1,64,82,18,18,0,0,1,46,64ZM146,192a18,18,0,1,1-18-18A18,18,0,0,1,146,192ZM192,82a18,18,0,1,1,18-18A18,18,0,0,1,192,82Z"},null,-1),Xt=[Qt],Yt={key:4},ea=C("path",{d:"M224,64a32,32,0,1,0-40,31v17a8,8,0,0,1-8,8H80a8,8,0,0,1-8-8V95a32,32,0,1,0-16,0v17a24,24,0,0,0,24,24h40v25a32,32,0,1,0,16,0V136h40a24,24,0,0,0,24-24V95A32.06,32.06,0,0,0,224,64ZM48,64A16,16,0,1,1,64,80,16,16,0,0,1,48,64Zm96,128a16,16,0,1,1-16-16A16,16,0,0,1,144,192ZM192,80a16,16,0,1,1,16-16A16,16,0,0,1,192,80Z"},null,-1),ta=[ea],aa={key:5},na=C("path",{d:"M220,64a28,28,0,1,0-32,27.71V112a12,12,0,0,1-12,12H80a12,12,0,0,1-12-12V91.71a28,28,0,1,0-8,0V112a20,20,0,0,0,20,20h44v32.29a28,28,0,1,0,8,0V132h44a20,20,0,0,0,20-20V91.71A28,28,0,0,0,220,64ZM44,64A20,20,0,1,1,64,84,20,20,0,0,1,44,64ZM148,192a20,20,0,1,1-20-20A20,20,0,0,1,148,192ZM192,84a20,20,0,1,1,20-20A20,20,0,0,1,192,84Z"},null,-1),oa=[na],sa={name:"PhGitFork"},ra=z({...sa,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(r){const a=r,s=Z("weight","regular"),n=Z("size","1em"),l=Z("color","currentColor"),p=Z("mirrored",!1),d=I(()=>{var c;return(c=a.weight)!=null?c:s}),h=I(()=>{var c;return(c=a.size)!=null?c:n}),L=I(()=>{var c;return(c=a.color)!=null?c:l}),m=I(()=>a.mirrored!==void 0?a.mirrored?"scale(-1, 1)":void 0:p?"scale(-1, 1)":void 0);return(c,y)=>(o(),f("svg",ee({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:h.value,height:h.value,fill:L.value,transform:m.value},c.$attrs),[Y(c.$slots,"default"),d.value==="bold"?(o(),f("g",Vt,Nt)):d.value==="duotone"?(o(),f("g",Ut,Ht)):d.value==="fill"?(o(),f("g",Kt,Gt)):d.value==="light"?(o(),f("g",Jt,Xt)):d.value==="regular"?(o(),f("g",Yt,ta)):d.value==="thin"?(o(),f("g",aa,oa)):x("",!0)],16,zt))}}),ia=["width","height","fill","transform"],la={key:0},ca=C("path",{d:"M176,128a12,12,0,0,1-5.17,9.87l-52,36A12,12,0,0,1,100,164V92a12,12,0,0,1,18.83-9.87l52,36A12,12,0,0,1,176,128Zm60,0A108,108,0,1,1,128,20,108.12,108.12,0,0,1,236,128Zm-24,0a84,84,0,1,0-84,84A84.09,84.09,0,0,0,212,128Z"},null,-1),ua=[ca],da={key:1},ma=C("path",{d:"M128,32a96,96,0,1,0,96,96A96,96,0,0,0,128,32ZM108,168V88l64,40Z",opacity:"0.2"},null,-1),pa=C("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm48.24-94.78-64-40A8,8,0,0,0,100,88v80a8,8,0,0,0,12.24,6.78l64-40a8,8,0,0,0,0-13.56ZM116,153.57V102.43L156.91,128Z"},null,-1),ga=[ma,pa],ha={key:2},Sa=C("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm40.55,110.58-52,36A8,8,0,0,1,104,164V92a8,8,0,0,1,12.55-6.58l52,36a8,8,0,0,1,0,13.16Z"},null,-1),ba=[Sa],ya={key:3},fa=C("path",{d:"M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm0,192a90,90,0,1,1,90-90A90.1,90.1,0,0,1,128,218Zm47.18-95.09-64-40A6,6,0,0,0,102,88v80a6,6,0,0,0,9.18,5.09l64-40a6,6,0,0,0,0-10.18ZM114,157.17V98.83L160.68,128Z"},null,-1),Aa=[fa],va={key:4},Ca=C("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm48.24-94.78-64-40A8,8,0,0,0,100,88v80a8,8,0,0,0,12.24,6.78l64-40a8,8,0,0,0,0-13.56ZM116,153.57V102.43L156.91,128Z"},null,-1),_a=[Ca],Ra={key:5},wa=C("path",{d:"M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm0,192a92,92,0,1,1,92-92A92.1,92.1,0,0,1,128,220Zm46.12-95.39-64-40A4,4,0,0,0,104,88v80a4,4,0,0,0,2.06,3.5,4.06,4.06,0,0,0,1.94.5,4,4,0,0,0,2.12-.61l64-40a4,4,0,0,0,0-6.78ZM112,160.78V95.22L164.45,128Z"},null,-1),La=[wa],ka={name:"PhPlayCircle"},$a=z({...ka,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(r){const a=r,s=Z("weight","regular"),n=Z("size","1em"),l=Z("color","currentColor"),p=Z("mirrored",!1),d=I(()=>{var c;return(c=a.weight)!=null?c:s}),h=I(()=>{var c;return(c=a.size)!=null?c:n}),L=I(()=>{var c;return(c=a.color)!=null?c:l}),m=I(()=>a.mirrored!==void 0?a.mirrored?"scale(-1, 1)":void 0:p?"scale(-1, 1)":void 0);return(c,y)=>(o(),f("svg",ee({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:h.value,height:h.value,fill:L.value,transform:m.value},c.$attrs),[Y(c.$slots,"default"),d.value==="bold"?(o(),f("g",la,ua)):d.value==="duotone"?(o(),f("g",da,ga)):d.value==="fill"?(o(),f("g",ha,ba)):d.value==="light"?(o(),f("g",ya,Aa)):d.value==="regular"?(o(),f("g",va,_a)):d.value==="thin"?(o(),f("g",Ra,La)):x("",!0)],16,ia))}}),Ea=["width","height","fill","transform"],Pa={key:0},Ia=C("path",{d:"M144,180a16,16,0,1,1-16-16A16,16,0,0,1,144,180Zm92-52A108,108,0,1,1,128,20,108.12,108.12,0,0,1,236,128Zm-24,0a84,84,0,1,0-84,84A84.09,84.09,0,0,0,212,128ZM128,64c-24.26,0-44,17.94-44,40v4a12,12,0,0,0,24,0v-4c0-8.82,9-16,20-16s20,7.18,20,16-9,16-20,16a12,12,0,0,0-12,12v8a12,12,0,0,0,23.73,2.56C158.31,137.88,172,122.37,172,104,172,81.94,152.26,64,128,64Z"},null,-1),xa=[Ia],Oa={key:1},Ma=C("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"},null,-1),Da=C("path",{d:"M140,180a12,12,0,1,1-12-12A12,12,0,0,1,140,180ZM128,72c-22.06,0-40,16.15-40,36v4a8,8,0,0,0,16,0v-4c0-11,10.77-20,24-20s24,9,24,20-10.77,20-24,20a8,8,0,0,0-8,8v8a8,8,0,0,0,16,0v-.72c18.24-3.35,32-17.9,32-35.28C168,88.15,150.06,72,128,72Zm104,56A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"},null,-1),ja=[Ma,Da],Za={key:2},Ta=C("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,168a12,12,0,1,1,12-12A12,12,0,0,1,128,192Zm8-48.72V144a8,8,0,0,1-16,0v-8a8,8,0,0,1,8-8c13.23,0,24-9,24-20s-10.77-20-24-20-24,9-24,20v4a8,8,0,0,1-16,0v-4c0-19.85,17.94-36,40-36s40,16.15,40,36C168,125.38,154.24,139.93,136,143.28Z"},null,-1),za=[Ta],Va={key:3},Fa=C("path",{d:"M138,180a10,10,0,1,1-10-10A10,10,0,0,1,138,180ZM128,74c-21,0-38,15.25-38,34v4a6,6,0,0,0,12,0v-4c0-12.13,11.66-22,26-22s26,9.87,26,22-11.66,22-26,22a6,6,0,0,0-6,6v8a6,6,0,0,0,12,0v-2.42c18.11-2.58,32-16.66,32-33.58C166,89.25,149,74,128,74Zm102,54A102,102,0,1,1,128,26,102.12,102.12,0,0,1,230,128Zm-12,0a90,90,0,1,0-90,90A90.1,90.1,0,0,0,218,128Z"},null,-1),Na=[Fa],Ua={key:4},Ba=C("path",{d:"M140,180a12,12,0,1,1-12-12A12,12,0,0,1,140,180ZM128,72c-22.06,0-40,16.15-40,36v4a8,8,0,0,0,16,0v-4c0-11,10.77-20,24-20s24,9,24,20-10.77,20-24,20a8,8,0,0,0-8,8v8a8,8,0,0,0,16,0v-.72c18.24-3.35,32-17.9,32-35.28C168,88.15,150.06,72,128,72Zm104,56A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"},null,-1),qa=[Ba],Ha={key:5},Ka=C("path",{d:"M136,180a8,8,0,1,1-8-8A8,8,0,0,1,136,180ZM128,76c-19.85,0-36,14.36-36,32v4a4,4,0,0,0,8,0v-4c0-13.23,12.56-24,28-24s28,10.77,28,24-12.56,24-28,24a4,4,0,0,0-4,4v8a4,4,0,0,0,8,0v-4.2c18-1.77,32-15.36,32-31.8C164,90.36,147.85,76,128,76Zm100,52A100,100,0,1,1,128,28,100.11,100.11,0,0,1,228,128Zm-8,0a92,92,0,1,0-92,92A92.1,92.1,0,0,0,220,128Z"},null,-1),Wa=[Ka],Ga={name:"PhQuestion"},Ja=z({...Ga,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(r){const a=r,s=Z("weight","regular"),n=Z("size","1em"),l=Z("color","currentColor"),p=Z("mirrored",!1),d=I(()=>{var c;return(c=a.weight)!=null?c:s}),h=I(()=>{var c;return(c=a.size)!=null?c:n}),L=I(()=>{var c;return(c=a.color)!=null?c:l}),m=I(()=>a.mirrored!==void 0?a.mirrored?"scale(-1, 1)":void 0:p?"scale(-1, 1)":void 0);return(c,y)=>(o(),f("svg",ee({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:h.value,height:h.value,fill:L.value,transform:m.value},c.$attrs),[Y(c.$slots,"default"),d.value==="bold"?(o(),f("g",Pa,xa)):d.value==="duotone"?(o(),f("g",Oa,ja)):d.value==="fill"?(o(),f("g",Za,za)):d.value==="light"?(o(),f("g",Va,Na)):d.value==="regular"?(o(),f("g",Ua,qa)):d.value==="thin"?(o(),f("g",Ha,Wa)):x("",!0)],16,Ea))}});function pe(r){for(var a=1;a<arguments.length;a++){var s=arguments[a]!=null?Object(arguments[a]):{},n=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(l){return Object.getOwnPropertyDescriptor(s,l).enumerable}))),n.forEach(function(l){Qa(r,l,s[l])})}return r}function Qa(r,a,s){return a in r?Object.defineProperty(r,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[a]=s,r}var re=function(a,s){var n=pe({},a,s.attrs);return u(ye,pe({},n,{icon:Te}),null)};re.displayName="EyeInvisibleOutlined";re.inheritAttrs=!1;const Xa=re;function ge(r){for(var a=1;a<arguments.length;a++){var s=arguments[a]!=null?Object(arguments[a]):{},n=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(l){return Object.getOwnPropertyDescriptor(s,l).enumerable}))),n.forEach(function(l){Ya(r,l,s[l])})}return r}function Ya(r,a,s){return a in r?Object.defineProperty(r,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[a]=s,r}var ie=function(a,s){var n=ge({},a,s.attrs);return u(ye,ge({},n,{icon:St}),null)};ie.displayName="SyncOutlined";ie.inheritAttrs=!1;const Le=ie,en=e.boolean(),tn=e.boolean(),an=e.boolean(),nn=e.boolean();e.object({PROJECT_LIVE:en.optional(),ALLOW_RELEASE:tn.optional(),CONNECTORS_CONSOLE:an.optional(),DUPLICATE_PROJECTS:nn.optional()});const on=e.string(),sn=e.string(),rn=e.string(),ln=e.string(),cn=e.string();e.object({plan:on.optional(),expires:sn.optional(),message:rn.optional(),messageLink:ln.optional(),messageCTA:cn.optional()});const un=e.string(),ke=e.string(),le=e.string(),dn=e.string(),mn=e.string(),pn=e.object({id:un,name:ke,description:le.optional(),projectId:dn,createdAt:mn}),gn=e.string(),hn=e.string(),Sn=e.string(),bn=e.string(),yn=e.string().regex(new RegExp("^[0-9]+m$")),fn=e.string().regex(new RegExp("^[0-9]+m$")),An=e.string().regex(new RegExp("^[0-9]+Mi$")),vn=e.string().regex(new RegExp("^[0-9]+Mi$")),Cn=e.string().regex(new RegExp("^[0-9]+$")),_n=e.string().regex(new RegExp("^[0-9]+$")),Rn=e.enum(["shared","clickbus","test"]),wn=e.object({requestsCPU:yn.optional(),limitsCPU:fn.optional(),requestsMemory:An.optional(),limitsMemory:vn.optional(),minReplicas:Cn.optional(),timeoutSeconds:_n.optional(),workerType:Rn.optional()});e.object({id:gn,name:hn,subdomain:Sn,organizationId:bn,deploymentResources:wn.optional()});const Ln=e.string(),kn=e.string(),$e=e.array(kn),Ee=e.string(),$n=e.string();e.object({id:Ln,emailPatterns:$e,projectId:Ee,createdAt:$n});const En=e.string().regex(new RegExp("^[0-9]+m$")),Pn=e.string().regex(new RegExp("^[0-9]+m$")),In=e.string().regex(new RegExp("^[0-9]+Mi$")),xn=e.string().regex(new RegExp("^[0-9]+Mi$")),On=e.string().regex(new RegExp("^[0-9]+$")),Mn=e.string().regex(new RegExp("^[0-9]+$")),Dn=e.enum(["shared","clickbus","test"]);e.object({requestsCPU:En.optional(),limitsCPU:Pn.optional(),requestsMemory:In.optional(),limitsMemory:xn.optional(),minReplicas:On.optional(),timeoutSeconds:Mn.optional(),workerType:Dn.optional()});const jn=e.string(),ne=e.string().email(),Zn=e.string(),ce=e.array(Zn),Tn=e.string(),zn=e.string(),Vn=e.object({id:jn,email:ne,roles:ce,projectId:Tn,createdAt:zn}),Pe=e.string(),Ie=e.string(),Fn=e.boolean(),Nn=e.boolean(),Un=e.boolean(),Bn=e.boolean(),xe=e.object({PROJECT_LIVE:Fn,ALLOW_RELEASE:Nn,CONNECTORS_CONSOLE:Un,DUPLICATE_PROJECTS:Bn}),qn=e.string(),Hn=e.string(),Kn=e.string(),Wn=e.string(),Gn=e.string(),Oe=e.object({plan:qn.optional(),expires:Hn.optional(),message:Kn.optional(),messageLink:Wn.optional(),messageCTA:Gn.optional()}),Jn=e.string().regex(new RegExp("^[0-9]+m$")),Qn=e.string().regex(new RegExp("^[0-9]+m$")),Xn=e.string().regex(new RegExp("^[0-9]+Mi$")),Yn=e.string().regex(new RegExp("^[0-9]+Mi$")),eo=e.string().regex(new RegExp("^[0-9]+$")),to=e.string().regex(new RegExp("^[0-9]+$")),ao=e.enum(["shared","clickbus","test"]),no=e.object({requestsCPU:Jn.optional(),limitsCPU:Qn.optional(),requestsMemory:Xn.optional(),limitsMemory:Yn.optional(),minReplicas:eo.optional(),timeoutSeconds:to.optional(),workerType:ao.optional()}),oo=e.string(),so=e.array(oo),ro=e.object({whitelistPatterns:so.optional()});e.object({id:Pe,name:Ie,featureFlags:xe,billingMetadata:Oe,deploymentResources:no.optional(),membershipsMetadata:ro.optional()});const io=e.string(),lo=e.array(io);e.object({whitelistPatterns:lo.optional()});const co=Pe,uo=Ie,mo=xe,po=Oe;e.object({id:co,name:uo,featureFlags:mo,billingMetadata:po});const go=le;e.object({description:go});const ho=e.number(),So=e.number();e.object({offset:ho.optional(),limit:So.optional()});const bo=pn;e.array(bo);const yo=ke,fo=le;e.object({name:yo,description:fo.optional()});const Ao=ne,vo=ce;e.object({email:Ao.optional(),roles:vo.optional()});const Co=e.number(),_o=e.number();e.object({offset:Co.optional(),limit:_o.optional()});const Ro=Vn;e.array(Ro);const wo=ne,Lo=ce;e.object({email:wo,roles:Lo});const ko=$e;e.object({emailPatterns:ko});const $o=Ee;e.object({projectId:$o});const Eo=e.boolean();e.object({shouldBeOnboarded:Eo.optional()});const Po=e.string(),Io=e.string(),xo=e.string(),Oo=e.string();e.object({name:Po.optional(),companyName:Io.optional(),source:xo.optional(),authorEmail:Oo.optional()});const Mo=e.string(),Do=e.record(e.any()),jo=e.string(),Zo=e.object({key:Mo,value:Do,type:jo}),To=Zo,zo=e.array(To),Vo=e.string(),Fo=e.enum(["text","image","table","progress-bar"]),No=e.object({name:Vo,type:Fo}),Uo=e.string(),Bo=e.string(),qo=e.record(e.any()),Me=e.enum(["waiting","running","processing","finished","failed","abandoned"]),Ho=["waiting","running","processing","finished","failed","abandoned"],Ko=e.string(),Wo=e.string(),Go=e.string(),Jo=e.string();e.object({id:Uo,stage:Bo,data:qo,status:Me,created_at:Ko,updated_at:Wo,parent_id:Go.optional(),execution_id:Jo.optional()});const Qo=e.string(),Xo=e.string(),Yo=e.string(),es=e.string(),ts=Me,as=zo,ns=e.string(),os=e.object({id:Qo,created_at:Xo,updated_at:Yo.optional(),assignee:es.optional(),status:ts,content:as,stage:ns.optional()}),ss=os,De=e.array(ss),rs=e.string(),is=e.enum(["form","hook","job","script","iterator","condition"]),ls=e.string(),cs=e.string(),us=e.boolean(),je=e.object({id:rs,type:is,title:ls,path:cs.optional(),can_be_started:us}),ds=je,ms=De,ps=e.number(),gs=e.boolean(),hs=e.object({selected_stage:ds,stage_run_cards:ms,total_count:ps,loading:gs.optional()}),Ss=hs,bs=e.array(Ss),ys=bs;e.object({columns:ys});const fs=De,As=e.string(),vs=e.array(As),Cs=e.number();e.object({stage_run_cards:fs,not_found_stages:vs,total_count:Cs});const _s=No;e.array(_s);const Rs=je,Yr=e.array(Rs),ws=e.string(),Ls=e.string(),ks=e.literal("bug"),$s=e.string(),Es=e.string(),Ps=e.string(),Is=e.object({name:Es,label:Ps}),xs=Is,Os=e.array(xs),Ms=e.object({label:$s,fixes:Os}),Ds=Ms,js=e.array(Ds),Zs=e.object({name:ws,label:Ls,type:ks,issues:js}),Ts=e.string(),zs=e.string(),Vs=e.object({key:Ts,value:zs}),Fs=e.boolean();e.object({success:Fs});const Ns=Zs;e.array(Ns);const Us=Vs;e.array(Us);const Bs=ne;e.object({email:Bs});const qs=e.enum(["ALLOWED","UNAUTHORIZED","FORBIDEN"]);e.object({status:qs});class ei{constructor(a=be){this.fetch=a}async getStages(){return(await this.fetch("/_editor/api/kanban/stages")).json()}async getData(a){return(await this.fetch("/_editor/api/kanban",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}})).json()}async getPath(a){return(await this.fetch(`/_editor/api/kanban/path?n=${a}`)).json()}async getLogs(a){return(await this.fetch(`/_editor/api/kanban/logs/${a}`)).json()}async startJob(a){await this.fetch(`/_editor/api/kanban/jobs/${a}/start`,{method:"POST"})}}class ti{constructor(a,s=be){this.authProvider=a,this.fetch=s}get headers(){return{"Content-Type":"application/json",...this.authProvider.authHeaders()}}async getStages(){return(await this.fetch("/_kanban/stages",{headers:this.headers})).json()}async getData(a){return(await this.fetch("/_kanban/",{method:"POST",body:JSON.stringify(a),headers:this.headers})).json()}async getPath(a){return(await this.fetch(`/_kanban/path?n=${a}`,{headers:this.headers})).json()}async getLogs(a){return(await this.fetch(`/_kanban/logs/${a}`,{headers:this.headers})).json()}async startJob(a){await this.fetch(`/_kanban/jobs/${a}/start`,{method:"POST",headers:this.headers})}}function ue(r){switch(r.status){case"waiting":return{color:"blue",text:"Waiting"};case"running":case"processing":return{color:"processing",text:"Running"};case"finished":return{color:"success",text:"Success"};case"failed":return{color:"error",text:"Failed"};case"abandoned":return{color:"warning",text:"Abandoned"}}}const Hs=10,Ks=[...Ho].filter(r=>r!=="processing"),Ze=()=>{const r=D([]),a=D({}),s=D(""),n=D([]),l=D(Hs),p=D(0),d=()=>({status:r.value,data:a.value,search:s.value,stage:n.value});return{stageIds:n,filterStatus:r,filterData:a,filterSearch:s,limit:l,offset:p,filterFactory:d,labelOption:m=>ue({status:m}).text,requestDataFactory:()=>({filter:d(),limit:l.value,offset:p.value})}},Ws=3,Gs=({kanbanStagesStorage:r,kanbanRepository:a})=>{const s=D([]),n=D([]),l=I(()=>s.value.filter(y=>!n.value.map(g=>g.stage.id).includes(y.id))),p=async()=>{n.value=[]},d=y=>{n.value=n.value.filter(g=>g.stage.id!==y),r.set(n.value.map(g=>g.stage).filter(g=>g.id!==y))},h=async(y,g)=>{if(y)n.value=[...n.value.slice(0,g),{stage:y,limit:K,offset:0},...n.value.slice(g+1)];else{const R=n.value[g].stage;return n.value=[...n.value.slice(0,g),...n.value.slice(g+1)],R}return r.set(n.value.map(R=>R.stage)),y},L=async y=>{const g=n.value[y.moved.oldIndex];h(null,y.moved.oldIndex),n.value=[...n.value.slice(0,y.moved.newIndex),g,...n.value.slice(y.moved.newIndex)],r.set(n.value.map(R=>R.stage))},m=y=>{n.value=y.reduce((g,R)=>{const M=s.value.find(T=>T.id===R);return M&&g.push({stage:M,limit:K,offset:0}),g},[])};return{setup:async()=>{var g;s.value=await a.getStages();const y=(g=r.get())!=null?g:[];if(y.length===0){const R=await a.getPath(Ws);m(R)}else n.value=y.map(R=>({stage:R,limit:K,offset:0}))},allStages:s,selectedStages:n,nonSelectedStages:l,clearSelection:p,unselect:d,setStage:h,reorderStages:L,initSelection:m}},K=10,Js=1e3,Qs=({kanbanRepository:r,kanbanStagesStorage:a,router:s})=>{const n=Ze(),l=Gs({kanbanStagesStorage:a,kanbanRepository:r}),p=D({columns:[],next_stage_options:[]}),d=async()=>{try{const v=l.selectedStages.value,w=v.map($=>(n.stageIds.value=[$.stage.id],r.getData(n.requestDataFactory()))),_={columns:[]},k=new Set,b=(await Promise.all(w)).map(($,F)=>({...$,stage:v[F].stage})),S=l.selectedStages.value;for(const $ of S){const F=b.find(N=>N.stage.id===$.stage.id);if(!F){_.columns.push({stage_run_cards:[],selected_stage:$.stage,total_count:0,loading:!1});continue}_.columns.push({stage_run_cards:F.stage_run_cards,selected_stage:$.stage,total_count:F.total_count,loading:!1});for(const N of F.not_found_stages)k.add(N)}const V=Array.from(k);for(const $ of V)l.unselect($);return{columns:_.columns,next_stage_options:l.nonSelectedStages.value}}catch{return l.clearSelection(),{columns:[],next_stage_options:[]}}};function h(v){const w=v.selected_stage.id,_=l.selectedStages.value.find(k=>k.stage.id===w);return _!=null&&_.limit?_.limit<v.total_count:!1}async function L(v){var _;const w=l.selectedStages.value.find(k=>k.stage.id===v.selected_stage.id);w&&(w.limit=((_=w.limit)!=null?_:0)+K,p.value=await d())}async function m(v){const w=l.selectedStages.value.find(_=>_.stage.id===v);w&&w.limit&&w.limit>K&&(w.limit-=K,p.value=await d())}async function c(v,w){const _=await l.setStage(v,w);if(v===null){l.unselect(_.id),p.value.columns=p.value.columns.filter(S=>S.selected_stage.id!==_.id);const k=l.allStages.value,E=k.findIndex(S=>S.id===_.id);let b=0;for(const S of p.value.next_stage_options)k.findIndex($=>$.id===S.id)<E&&b++;p.value.next_stage_options=[...p.value.next_stage_options.slice(0,b),_,...p.value.next_stage_options.slice(b)]}}async function y(v){await l.setStage(v,l.selectedStages.value.length),v&&(p.value.columns.push({stage_run_cards:[],selected_stage:v,total_count:0,loading:!0}),n.stageIds.value=[v.id],p.value.next_stage_options=l.nonSelectedStages.value)}async function g(v){await l.reorderStages(v)}let R=null;return{kanbanState:p,increasePagination:L,hasPagination:h,seeLess:m,setStage:c,addStage:y,cardRunHandler:async(v,w)=>{const _=v.selected_stage,k=w.id;if(_.type==="script"){const E=await et.get(_.id);if(!E)return;await E.run(k)}if(_.type==="form"){const E=s.resolve({path:`/${_.path}`,query:k?{[tt]:k}:{}});window.open(E.href,k)}},setup:async()=>{await l.setup(),p.value={columns:l.selectedStages.value.map(w=>({stage_run_cards:[],selected_stage:w.stage,total_count:0,loading:!0})),next_stage_options:l.nonSelectedStages.value};let v=!1;p.value=await d(),R=setInterval(async()=>{v||(v=!0,p.value=await d(),v=!1)},Js)},tearDown:()=>{R&&clearInterval(R)},reorderStages:g,filterController:n}},se=z({__name:"StageRunData",props:{data:{}},setup(r){return(a,s)=>(o(),A(t(U),{direction:"vertical",style:{overflow:"hidden"}},{default:i(()=>[(o(!0),f(G,null,W(a.data,n=>(o(),f("div",{key:n.key},[u(t(H),{strong:""},{default:i(()=>[P(j(n.key),1)]),_:2},1024),u(t(ze),{"tree-data":t(at)(n.value),selectable:!1},null,8,["tree-data"])]))),128))]),_:1}))}}),Xs={key:0},Ys={key:1,class:"terminal"},er=z({__name:"ExecutionInspector",props:{logs:{}},setup(r){return(a,s)=>a.logs.length===0?(o(),f("span",Xs)):(o(),f("div",Ys,[u(t(O),{vertical:""},{default:i(()=>[(o(!0),f(G,null,W(a.logs,n=>(o(),f("pre",{key:n.executionId,class:"log-text"},j(n.payload.text),1))),128))]),_:1})]))}});const tr=Q(er,[["__scopeId","data-v-4e71a195"]]),ar=r=>(Ne("data-v-b7151dd7"),r=r(),Ue(),r),nr={key:1},or={key:1},sr=ar(()=>C("span",null,"[Deleted Stage]",-1)),rr=["onClick"],ir=z({__name:"StageRunInspector",props:{stageRun:{},kanbanRepository:{},stageRunRepository:{}},emits:["close"],setup(r,{emit:a}){const s=r;function n(h){return Object.entries(h).map(([L,m])=>({key:L,value:m,type:typeof m}))}const{result:l,loading:p}=Ce(()=>{var h;return s.kanbanRepository.getLogs((h=s.stageRun)==null?void 0:h.id)}),d=(h,L)=>{var m;h.stopPropagation(),(m=s.stageRunRepository)==null||m.fork(L),a("close")};return(h,L)=>(o(),A(t(lt),{open:"",title:"Thread details",size:"large",onClose:L[0]||(L[0]=m=>a("close"))},{extra:i(()=>[u(t(me),null,{default:i(()=>[u(t(J),{style:{"font-weight":"600"}},{default:i(()=>{var m;return[P(j(t(ue)({status:(m=h.stageRun)==null?void 0:m.status}).text),1)]}),_:1}),P(" "+j(t(nt)(new Date(h.stageRun.created_at),{addSuffix:!0})),1)]),_:1})]),default:i(()=>{var m,c,y;return[(m=h.stageRun)!=null&&m.assignee?(o(),A(t(me),{key:0},{default:i(()=>{var g;return[P(" Assignee: "+j((g=h.stageRun)==null?void 0:g.assignee),1)]}),_:1})):x("",!0),((c=h.stageRun)==null?void 0:c.content)&&((y=h.stageRun)==null?void 0:y.content.length)>0?(o(),f("div",nr,[u(t(X),{level:4},{default:i(()=>[P("Current data")]),_:1}),u(se,{data:h.stageRun.content},null,8,["data"])])):x("",!0),u(t(X),{level:4,style:{"margin-bottom":"30px"}},{default:i(()=>[P(" Timeline ")]),_:1}),t(p)?(o(),A(t(Ve),{key:2})):t(l)?(o(),A(t(ot),{key:3},{default:i(()=>[(o(!0),f(G,null,W(t(l),({stage:g,stage_run:R,logs:M})=>(o(),A(t(st),{key:R.id},{default:i(()=>[u(t(Re),{ghost:"","expand-icon-position":"end"},{default:i(()=>[u(t(_e),{class:"panel"},Fe({header:i(()=>[g?(o(),A(t(O),{key:0,align:"center",gap:15},{default:i(()=>[(o(),A(te(t(ae)(g.type)))),M.length?(o(),f("span",or,j(g.title),1)):(o(),A(t(oe),{key:0,placement:"right",title:"No logs"},{default:i(()=>[P(j(g.title),1)]),_:2},1024))]),_:2},1024)):(o(),A(t(O),{key:1,align:"center",gap:15},{default:i(()=>[u(t(Ja)),sr]),_:1}))]),default:i(()=>[n(R.data).length||M.length?(o(),A(t(O),{key:0,vertical:""},{default:i(()=>[n(R.data).length?(o(),A(t(O),{key:0,gap:0,vertical:""},{default:i(()=>[u(t(X),{level:5},{default:i(()=>[P(" Output data ")]),_:1}),u(se,{data:n(R.data)},null,8,["data"])]),_:2},1024)):x("",!0),M.length?(o(),A(t(O),{key:1,vertical:"",gap:0},{default:i(()=>[u(t(it)),u(t(X),{level:5},{default:i(()=>[P(" Logs ")]),_:1}),u(tr,{logs:M},null,8,["logs"])]),_:2},1024)):x("",!0)]),_:2},1024)):(o(),A(t(fe),{key:1,description:"No logs"}))]),_:2},[h.stageRunRepository&&g?{name:"extra",fn:i(()=>[C("span",{onClick:T=>d(T,R.id)},[u(t(O),{gap:"small"},{default:i(()=>[u(t(ra),{size:"22"}),u(t(rt),null,{default:i(()=>[P("Fork")]),_:1})]),_:1})],8,rr)]),key:"0"}:void 0]),1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):x("",!0)]}),_:1}))}});const lr=Q(ir,[["__scopeId","data-v-b7151dd7"]]),he="_thread_title",cr=z({__name:"Card",props:{stage:{},card:{}},emits:["inspect","run","retry"],setup(r,{emit:a}){const s=r,n=I(()=>{const m=s.card.content.find(y=>y.key===he);return m?m.value:new Date(String(s.card.updated_at)).toLocaleString()}),l=I(()=>s.card.content.filter(m=>m.key!==he)),p=m=>{m.stopPropagation(),a("run")},d=m=>{m.stopPropagation(),a("retry")},h=I(()=>ue({status:s.card.status}).text),L=I(()=>Be(new Date(String(s.card.updated_at))));return(m,c)=>{var y,g;return o(),A(t(ut),{size:"small",style:{cursor:"pointer"},"head-style":{"border-bottom":((y=m.card.content)==null?void 0:y.length)>0?"":"none"},"body-style":{display:((g=m.card.content)==null?void 0:g.length)>0?"block":"none"},onClick:c[0]||(c[0]=R=>m.$emit("inspect"))},{title:i(()=>[u(t(oe),{title:n.value.length>24?n.value:void 0},{default:i(()=>[P(j(n.value),1)]),_:1},8,["title"])]),default:i(()=>[u(t(U),{direction:"vertical",style:{"max-height":"300px",width:"100%",overflow:"hidden"}},{default:i(()=>[u(se,{data:l.value,disabled:!0},null,8,["data"]),m.card.assignee?(o(),A(t(J),{key:0},{default:i(()=>[P(j(m.card.assignee),1)]),_:1})):x("",!0)]),_:1}),u(t(O),{gap:"10",style:{"margin-top":"8px"}},{default:i(()=>[u(t(oe),null,{title:i(()=>[P(j(m.card.updated_at),1)]),default:i(()=>[u(t(H),{type:"secondary",style:{"font-size":"12px",display:"flex","align-items":"center",gap:"4px"}},{default:i(()=>[u(t(Tt),{size:14}),P(" Updated at: "+j(L.value),1)]),_:1})]),_:1})]),_:1})]),actions:i(()=>[m.card.status==="waiting"?(o(),A(t(q),{key:0,onClick:p},{default:i(()=>[u(t(O),{align:"center",gap:"6"},{default:i(()=>[u(t($a),{size:"16"}),P(" Continue this thread ")]),_:1})]),_:1})):x("",!0),m.card.status==="failed"?(o(),A(t(q),{key:1,onClick:d},{default:i(()=>[u(t(O),{align:"center",gap:"6"},{default:i(()=>[u(t(ct),{size:"14"}),P(" Retry ")]),_:1})]),_:1})):x("",!0)]),extra:i(()=>[u(t(J),null,{default:i(()=>[P(j(h.value)+" ",1),h.value==="Running"?(o(),A(t(Le),{key:0,spin:!0,style:{"margin-left":"4px"}})):x("",!0)]),_:1})]),_:1},8,["head-style","body-style"])}}});class ur{constructor(a,s,n){this.router=a,this.column=s,this.kanbanRepository=n}get stage(){return this.column.selected_stage}get canStart(){return this.stage.can_be_started}get launchLink(){return!this.stage.can_be_started||this.stage.type!=="form"||!this.stage.path?null:this.router.resolve({path:`/${this.stage.path}`}).href}click(){if(this.launchLink)return window.open(this.launchLink,"_blank");if(this.stage.type==="job")return this.kanbanRepository.startJob(this.stage.id).catch(console.error)}}const dr={class:"draggable-handler"},mr=z({__name:"Column",props:{router:{},hasPagination:{type:Boolean},column:{},kanbanRepository:{}},emits:["increasePagination","cardRun","stageUpdate","cardInspection","cardRetry"],setup(r,{emit:a}){const s=r,n=I(()=>new ur(s.router,s.column,s.kanbanRepository));return(l,p)=>(o(),A(t(U),{direction:"vertical",class:"stage-column"},{default:i(()=>[C("div",dr,[u(t(U),{direction:"horizontal",style:{width:"100%","justify-content":"space-between"}},{default:i(()=>[u(t(O),{gap:"8",style:{"max-width":"200px","padding-left":"10px"}},{default:i(()=>[u(t(O),null,{default:i(()=>[(o(),A(te(t(ae)(l.column.selected_stage.type)),{size:"20"}))]),_:1}),u(t(H),{ellipsis:"",content:l.column.selected_stage.title},null,8,["content"])]),_:1}),u(t(U),null,{default:i(()=>[l.column.loading?x("",!0):(o(),A(t(H),{key:0,type:"secondary",style:{"font-size":"small","margin-right":"2px"}},{default:i(()=>[P(j(l.column.total_count),1)]),_:1})),l.column.loading?(o(),A(t(we),{key:1})):x("",!0),u(t(q),{type:"text",style:{padding:"4px"},onClick:p[0]||(p[0]=d=>a("stageUpdate",null))},{default:i(()=>[u(t(H),{type:"secondary",style:{"font-size":"small","margin-right":"2px"}},{default:i(()=>[u(t(Xa))]),_:1})]),_:1})]),_:1})]),_:1})]),u(t(U),{direction:"vertical",style:{width:"100%"}},{default:i(()=>[u(t(O),{justify:"center",align:"center"},{default:i(()=>[l.column.loading?(o(),A(t(dt),{key:0,active:"",block:"",size:"large",class:"skeleton"})):x("",!0)]),_:1}),!l.column.loading&&l.column.stage_run_cards.length===0?(o(),A(t(fe),{key:0})):x("",!0),(o(!0),f(G,null,W(l.column.stage_run_cards,d=>(o(),A(cr,{key:d.id,stage:l.column.selected_stage,card:d,onInspect:h=>a("cardInspection",d),onRun:h=>a("cardRun",d),onRetry:h=>a("cardRetry",d)},null,8,["stage","card","onInspect","onRun","onRetry"]))),128)),l.hasPagination?(o(),A(t(q),{key:1,style:{width:"100%"},onClick:p[1]||(p[1]=d=>a("increasePagination"))},{default:i(()=>[P("See more")]),_:1})):x("",!0),n.value.canStart?(o(),A(t(q),{key:2,style:{width:"100%"},onClick:p[2]||(p[2]=()=>n.value.click())},{default:i(()=>[P(" Start new thread ")]),_:1})):x("",!0)]),_:1})]),_:1}))}});const pr=Q(mr,[["__scopeId","data-v-6a0f1fd2"]]),gr=z({__name:"EmptyColumn",props:{stages:{}},emits:["stageUpdate"],setup(r,{emit:a}){const s=n=>{a("stageUpdate",n)};return(n,l)=>(o(),A(t(U),{direction:"vertical"},{default:i(()=>[(o(!0),f(G,null,W(n.stages,p=>(o(),A(t(J),{key:p.id,class:"tag",onClick:d=>s(p)},{default:i(()=>[u(t(O),{gap:"8",style:{"max-width":"200px","justify-content":"center","align-items":"center"}},{default:i(()=>[u(t(O),null,{default:i(()=>[(o(),A(te(t(ae)(p.type)),{size:"20"}))]),_:2},1024),u(t(H),{ellipsis:"",content:p.title},null,8,["content"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1}))}});const hr=Q(gr,[["__scopeId","data-v-08e39e62"]]);function Sr(){const r=D({state:"closed"});function a(){r.value={state:"closed"}}function s(){r.value={state:"visualizations"}}function n(p,d){r.value={state:"stage-run",stageRun:d}}const l=I(()=>"stageRun"in r.value?r.value.stageRun:null);return{closeDrawer:a,openVisualizationEditor:s,inspectStageRun:n,drawerState:r,selectedStageRunForDrawer:l}}const br={class:"stages-container"},yr={class:"stages-content"},fr=z({__name:"Kanban",props:{kanbanStagesStorage:{},kanbanRepository:{},stageRunRepository:{}},setup(r){const a=r,s=qe(),{closeDrawer:n,inspectStageRun:l,drawerState:p,selectedStageRunForDrawer:d}=Sr(),h=E=>{w.value=E},L=E=>{var b;(b=a.stageRunRepository)==null||b.retry(E.id)},{kanbanState:m,setStage:c,addStage:y,setup:g,tearDown:R,cardRunHandler:M,increasePagination:T,hasPagination:B,reorderStages:v,filterController:{filterStatus:w,labelOption:_}}=Qs({kanbanRepository:a.kanbanRepository,kanbanStagesStorage:a.kanbanStagesStorage,router:s}),k=D([]);return He(()=>{var E;return(E=m.value)==null?void 0:E.columns},E=>{E!==void 0&&(k.value=E)}),Ae(g),ve(R),(E,b)=>(o(),f("div",null,[u(t(O),{vertical:"",style:{height:"100%"}},{default:i(()=>[u(t(Re),{ghost:""},{default:i(()=>[u(t(_e),{header:"Filters"},{default:i(()=>[u(t(mt),null,{default:i(()=>[u(t(pt),{label:"Status",colon:!1},{default:i(()=>[u(t(Ke),{value:t(w),style:{width:"325px"},mode:"multiple","onUpdate:value":b[0]||(b[0]=S=>h(S))},{default:i(()=>[(o(!0),f(G,null,W(t(Ks),S=>(o(),A(t(We),{key:S,value:S},{default:i(()=>[P(j(t(_)(S)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),C("div",br,[C("div",yr,[u(t(U),{align:"start"},{default:i(()=>[u(t(Xe),{modelValue:k.value,"onUpdate:modelValue":b[2]||(b[2]=S=>k.value=S),class:"draggable","item-key":S=>S.selected_stage.id,"ghost-class":"ghost","force-fallback":t(Ye),handle:".draggable-handler",onStart:t(R),onEnd:t(g),onChange:t(v)},{item:i(({element:S,index:V})=>[(o(),A(t(pr),{key:S.selected_stage.id,column:S,router:t(s),"has-pagination":t(B)(S),"kanban-repository":a.kanbanRepository,onIncreasePagination:$=>t(T)(S),onCardInspection:$=>t(l)(S,$),onCardRun:$=>t(M)(S,$),onCardRetry:b[1]||(b[1]=$=>L($)),onStageUpdate:$=>t(c)($,V)},null,8,["column","router","has-pagination","kanban-repository","onIncreasePagination","onCardInspection","onCardRun","onStageUpdate"]))]),_:1},8,["modelValue","item-key","force-fallback","onStart","onEnd","onChange"]),u(t(hr),{stages:t(m).next_stage_options||[],onStageUpdate:b[3]||(b[3]=S=>t(y)(S))},null,8,["stages"])]),_:1})])])]),_:1}),t(p).state==="stage-run"&&t(d)?(o(),A(t(lr),{key:0,"kanban-repository":a.kanbanRepository,"stage-run":t(d),"stage-run-repository":a.stageRunRepository,onClose:t(n)},null,8,["kanban-repository","stage-run","stage-run-repository","onClose"])):x("",!0)]))}});const ai=Q(fr,[["__scopeId","data-v-f1a9f184"]]),Ar=2e3,Se=[{title:"Thread",dataIndex:"thread",align:"center"},{title:"Stage",dataIndex:"stage",align:"center"},{title:"Status",dataIndex:"status",align:"center"},{title:"Updated at",dataIndex:"updated_at",align:"center"}],vr=({kanbanRepository:r})=>{const a=Ze(),s=D(0),n=D(1),l=D(10),p=async()=>{a.limit.value=l.value*n.value,a.offset.value=(n.value-1)*l.value;const y=a.requestDataFactory(),g=await r.getData(y);return s.value=g.total_count,g},d=async()=>{var k,E;const y=await p(),R=(await r.getStages()).reduce((b,S)=>(b[S.id]=S,b),{}),M=(k=y.stage_run_cards)==null?void 0:k.map(b=>b.content.map(S=>S.key)).flat(),T=Array.from(new Set(M)),v=[...Se.map(b=>b.title),...T],w=(E=y.stage_run_cards)==null?void 0:E.map(b=>{var $,F;const S=b.stage?R[b.stage]:void 0,V={};for(const N of b.content)V[N.key]=JSON.stringify(N.value);return[b.id,($=S==null?void 0:S.title)!=null?$:"",b.status,(F=b.updated_at)!=null?F:"",...T.map(N=>V[N]||"")]}),_=new Date;return{columns:v,rows:w!=null?w:[],fileName:`threads-${_.toISOString()}`}},h=Ce(async()=>{var y,g,R;try{const M=await p(),B=(await r.getStages()).reduce((b,S)=>(b[S.id]=S,b),{}),v=(g=(y=M.stage_run_cards)==null?void 0:y.map(b=>b.content.map(S=>S.key)).flat())!=null?g:[],w=Array.from(new Set(v)),_=(R=M.stage_run_cards)==null?void 0:R.map(b=>{const S=b.stage?B[b.stage]:void 0,V={thread:b.id,type:(S==null?void 0:S.type)||"",stage:(S==null?void 0:S.title)||"",status:b.status,updated_at:b.updated_at||""};for(const $ of b.content)V[`data.${$.key}`]=JSON.stringify($.value)||"";return V}),k=w.map(b=>({title:b,dataIndex:`data.${b}`,align:"center",width:200}));return{tableColumns:[...Se,{title:"Data",children:k}],tableRows:_}}catch{return{tableColumns:[],tableRows:[]}}});let L=null;return{setup:async()=>{h.refetch(),L=setInterval(()=>{h.refetch()},Ar)},tearDown:()=>{L&&clearInterval(L)},tableAsyncComputed:h,totalCount:s,current:n,pageSize:l,filterController:a,getDataAsCsv:d}},Cr=r=>{let a=r.columns.join(",")+`
`;r.rows.forEach(n=>{a+=n.join(","),a+=`
`});const s=document.createElement("a");s.href="data:text/csv;charset=utf-8,"+encodeURIComponent(a),s.target="_blank",s.download=`${r.fileName}.csv`,s.click()},_r={style:{"text-align":"center"}},Rr=C("div",{style:{height:"50px"}},null,-1),ni=z({__name:"TableView",props:{kanbanRepository:{}},setup(r){const a=r,s=D(""),n=D(!1),l=D(!1),p=()=>{n.value=!0,R.filterSearch.value=s.value,d()},d=Ge.exports.debounce(()=>{m.refetch(),n.value=!1},500),{setup:h,tearDown:L,tableAsyncComputed:m,totalCount:c,current:y,pageSize:g,filterController:R,getDataAsCsv:M}=vr({kanbanRepository:a.kanbanRepository}),T=I(()=>({total:c.value,current:y.value,pageSize:g.value,totalBoundaryShowSizeChanger:10,showSizeChanger:!0,pageSizeOptions:["10","25","50","100"],onChange:async(v,w)=>{y.value=v,g.value=w,await m.refetch()}})),B=async()=>{if(l.value=!0,!m.result.value)return;const v=await M();Cr(v),l.value=!1};return Ae(h),ve(L),(v,w)=>(o(),f("div",null,[u(t(O),{justify:"space-between",style:{"margin-bottom":"12px"}},{default:i(()=>[u(t(Je),{value:s.value,placeholder:"Search data or status",style:{width:"400px"},"allow-clear":"","onUpdate:value":p},{prefix:i(()=>[u(t(Qe))]),suffix:i(()=>[n.value?(o(),A(t(we),{key:0})):x("",!0)]),_:1},8,["value"]),u(t(q),{loading:l.value,onClick:B},{default:i(()=>[P("Export to CSV")]),_:1},8,["loading"])]),_:1}),t(m).result.value?(o(),A(t(de),{key:0,columns:t(m).result.value.tableColumns,"data-source":t(m).result.value.tableRows,loading:n.value,pagination:T.value,scroll:{x:"max-content",y:700},bordered:"",size:"small"},{headerCell:i(({column:_})=>[C("p",_r,j(_.title),1)]),bodyCell:i(({column:_,text:k,record:E})=>[_.dataIndex==="stage"?(o(),A(t(O),{key:0,gap:"small",justify:"center"},{default:i(()=>[(o(),A(te(t(ae)(E.type)),{size:"20"})),P(" "+j(k),1)]),_:2},1024)):_.dataIndex==="status"?(o(),A(t(O),{key:1,gap:"small",justify:"center"},{default:i(()=>[u(t(J),null,{default:i(()=>[P(j(t(gt)(String(k)))+" ",1),k==="running"?(o(),A(t(Le),{key:0,spin:!0,style:{"margin-left":"4px"}})):x("",!0)]),_:2},1024)]),_:2},1024)):x("",!0)]),_:1},8,["columns","data-source","loading","pagination"])):(o(),A(t(de),{key:1,loading:"",columns:[{title:"Thread"},{title:"Stage"},{title:"Status"}],bordered:""},{emptyText:i(()=>[Rr]),_:1}))]))}});export{Yr as A,ei as E,ai as K,ti as P,ni as _};
//# sourceMappingURL=TableView.vue_vue_type_script_setup_true_lang.8b0e93dc.js.map
