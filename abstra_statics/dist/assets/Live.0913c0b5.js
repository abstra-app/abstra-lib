import{C as D}from"./CrudView.f04f853e.js";import{a as U}from"./asyncComputed.95993e52.js";import{d as R,V as E,ai as z,u as t,o as f,W as C,aJ as L,eD as F,c as $,w as a,b as r,ax as l,eA as I,cU as S,cB as P,bp as G,$ as V,eB as M,f as H,a as k,fe as W,bL as N,c_ as q,cV as A,cT as J,R as K,eJ as Y,eK as O,cu as Q}from"./vue-router.78d58ff0.js";import"./gateway.3d93841d.js";import{g as X,B as Z,a as tt}from"./datetime.ac7e1858.js";import"./tables.aed54935.js";import{P as et}from"./project.bfa0c03b.js";import{r as B,C as st}from"./router.ce687edb.js";import{_ as ot,E as at}from"./ExecutionStatusIcon.vue_vue_type_script_setup_true_lang.08791a5b.js";import{G as rt}from"./PhArrowCounterClockwise.vue.91d84d7e.js";import{F as T}from"./PhArrowSquareOut.vue.f7ba9bd2.js";import{G as it}from"./PhChats.vue.a9cb8ab5.js";import{I as nt}from"./PhCopySimple.vue.b61522d9.js";import{F as lt}from"./PhRocketLaunch.vue.6c584205.js";import{A as ct}from"./index.33c392c8.js";import{A as dt}from"./index.8e2351ec.js";import"./DocsButton.vue_vue_type_script_setup_true_lang.c6ea29d9.js";import"./BookOutlined.238416cb.js";import"./url.f92f4d36.js";import"./PhDotsThree.vue.4c71ca22.js";import"./index.e96c19f7.js";import"./popupNotifcation.466d80c0.js";import"./record.6c05e3f5.js";import"./string.b574f1fa.js";import"./LoadingOutlined.734d4a55.js";(function(){try{var u=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},i=new Error().stack;i&&(u._sentryDebugIds=u._sentryDebugIds||{},u._sentryDebugIds[i]="0b0e2b92-c14f-45ea-a2b7-2cc65a5b6cb0",u._sentryDebugIdIdentifier="sentry-dbid-0b0e2b92-c14f-45ea-a2b7-2cc65a5b6cb0")}catch{}})();class y{constructor(i,n,_,h){this.major=i,this.minor=n,this.patch=_,this.dev=h}static from(i){if(i===null)return new y(0,0,0);const n=/^(\d+\.\d+\.\d+)(.dev(\d+))?$/,_=i.match(n);if(!_)return new y(0,0,0);const[,h,,v]=_,[b,c,x]=h.split(".").map(Number),m=v?Number(v):void 0;return isNaN(b)||isNaN(c)||isNaN(x)?new y(0,0,0):m&&isNaN(m)?new y(0,0,0):new y(b,c,x,m)}gte(i){return this.major!==i.major?this.major>=i.major:this.minor!==i.minor?this.minor>=i.minor:this.patch>=i.patch}get version(){const i=this.dev?`.dev${this.dev}`:"";return`${this.major}.${this.minor}.${this.patch}${i}`}}const pt=y.from("2.16.10"),ut={key:0,class:"flex-row"},mt={key:1,class:"flex-row"},ft={key:2,class:"flex-row"},_t=R({__name:"ExecutionsShort",props:{stageId:{},projectId:{}},emits:["select"],setup(u,{emit:i}){const n=u,_=new at,{result:h,refetch:v,loading:b}=U(async()=>{const{executions:g}=await _.list({projectId:n.projectId,stageId:n.stageId,limit:6});return g}),c=g=>{i("select",g)},x=g=>X(g,{weekday:void 0});let m=null;return E(()=>{m=setInterval(()=>v(),15e3)}),z(()=>{m&&clearInterval(m)}),(g,e)=>t(h)?(f(),C("div",ut,[(f(!0),C(L,null,F(t(h),s=>(f(),$(t(P),{key:s.id,title:x(s.createdAt),onClick:d=>c(s)},{content:a(()=>[r(t(S),null,{default:a(()=>[l("Status: "+I(s.status),1)]),_:2},1024),r(t(S),null,{default:a(()=>[l("Duration: "+I(s.duration_seconds),1)]),_:2},1024),r(t(S),null,{default:a(()=>[l("Build: "+I(s.buildId.slice(0,6)),1)]),_:2},1024)]),default:a(()=>[r(ot,{status:s.status},null,8,["status"])]),_:2},1032,["title","onClick"]))),128))])):t(b)?(f(),C("div",mt,[r(t(G))])):(f(),C("div",ft,"None"))}});const ht=V(_t,[["__scopeId","data-v-da0ef620"]]),gt=u=>(Y("data-v-44f8a783"),u=u(),O(),u),yt={style:{"max-width":"250px",overflow:"hidden","text-overflow":"ellipsis ellipsis","white-space":"nowrap"}},bt={key:1},wt={class:"desc",style:{"margin-bottom":"80px",padding:"10px 30px","background-color":"#f6f6f6","border-radius":"5px"}},kt={style:{"font-size":"16px",display:"flex","align-items":"center",gap:"5px"}},vt=gt(()=>k("strong",null,"Getting started",-1)),xt=R({__name:"Live",setup(u){const n=M().params.projectId,_=()=>{var s;const e=(s=c.value)==null?void 0:s.project.getUrl();e&&window.open(e,"_blank")},h=()=>{var w,p,j;const e=(p=(w=c.value)==null?void 0:w.buildSpec)==null?void 0:p.abstraVersion;if(!e)return;let s="threads";y.from(e).gte(pt)||(s="_player/"+s);const o=((j=c.value)==null?void 0:j.project.getUrl())+s;window.open(o,"_blank")},v=e=>{B.push({name:"logs",params:{projectId:n},query:{stageId:e.stageId,executionId:e.id}})},{loading:b,result:c}=U(async()=>{const s=(await Z.list(n)).find(w=>w.latest);if(!s)return null;const[d,o]=await Promise.all([tt.get(s.id),et.get(n)]);return{buildSpec:d,project:o}}),x=e=>{var o;if(!("path"in e)||!e.path)return;const s=e.type==="form"?`/${e.path}`:`/_hooks/${e.path}`,d=(o=c.value)==null?void 0:o.project.getUrl(s);!d||(navigator.clipboard.writeText(d),Q.success("Copied URL to clipboard"))},m=e=>e.type=="form"?`/${e.path}`:e.type=="hook"?`/_hooks/${e.path}`:e.type=="job"?`${e.schedule}`:"",g=H(()=>{var d;const e=[{name:"Type",align:"left"},{name:"Title",align:"left"},{name:"Trigger",align:"left"},{name:"Last Runs"},{name:"",align:"right"}],s=(d=c.value)==null?void 0:d.buildSpec;return s?{columns:e,rows:s.runtimes.map(o=>({key:o.id,cells:[{type:"tag",text:o.type.charAt(0).toUpperCase()+o.type.slice(1),tagColor:"default"},{type:"slot",key:"title",payload:{runtime:o}},{type:"slot",key:"trigger",payload:{runtime:o}},{type:"slot",key:"last-runs",payload:{runtime:o}},{type:"actions",actions:[{icon:rt,label:"View script logs",onClick:()=>B.push({name:"logs",params:{projectId:n},query:{stageId:o.id}})},{icon:nt,label:"Copy URL",onClick:()=>x(o),hide:!["form","hook"].includes(o.type)}]}]}))}:{columns:e,rows:[]}});return(e,s)=>{var d,o,w;return t(b)||((w=(o=(d=t(c))==null?void 0:d.buildSpec)==null?void 0:o.runtimes.length)!=null?w:0)>0?(f(),$(D,{key:0,"empty-title":"","entity-name":"build",description:"Access and monitor your project's current scripts here.",table:g.value,loading:t(b),title:"Live View"},{description:a(()=>[r(t(q),{gap:"middle",style:{"margin-top":"12px"}},{default:a(()=>[r(t(N),{onClick:_},{default:a(()=>[l(" Home"),r(t(T),{class:"icon",size:16})]),_:1}),r(t(N),{onClick:h},{default:a(()=>[l(" Threads"),r(t(T),{class:"icon",size:16})]),_:1})]),_:1})]),title:a(({payload:p})=>{var j;return[k("div",yt,[p.runtime.type!="form"?(f(),$(t(A),{key:0},{default:a(()=>[l(I(p.runtime.title),1)]),_:2},1024)):p.runtime.type=="form"?(f(),$(t(J),{key:1,href:(j=t(c))==null?void 0:j.project.getUrl(p.runtime.path),target:"_blank"},{default:a(()=>[l(I(p.runtime.title),1)]),_:2},1032,["href"])):K("",!0)])]}),"last-runs":a(({payload:p})=>[r(ht,{"stage-id":p.runtime.id,"project-id":t(n),onSelect:v},null,8,["stage-id","project-id"])]),trigger:a(({payload:p})=>[r(t(dt),{color:"default",class:"ellipsis"},{default:a(()=>[l(I(m(p.runtime)),1)]),_:2},1024)]),_:1},8,["table","loading"])):(f(),C("section",bt,[k("div",wt,[k("p",kt,[r(t(W),{size:"30"}),vt]),k("p",null,[l("Install the editor using pip: "),r(t(A),{code:"",copyable:""},{default:a(()=>[l("pip install abstra")]),_:1})]),k("p",null,[l(" Run the editor: "),r(t(A),{code:"",copyable:""},{default:a(()=>[l("abstra editor my-new-project")]),_:1})]),k("p",null,[l(" Feeling lost? "),r(t(N),{target:"_blank",type:"default",size:"small",onClick:s[0]||(s[0]=()=>t(st).showNewMessage("I need help getting started with Abstra"))},{default:a(()=>[r(t(it))]),_:1})])]),r(t(ct),{status:"info",title:"Waiting for your first deploy!","sub-title":"Your live stages will appear here once you make your first deploy"},{icon:a(()=>[r(t(lt),{size:"100",color:"#d14056"})]),_:1})]))}}});const Yt=V(xt,[["__scopeId","data-v-44f8a783"]]);export{Yt as default};
//# sourceMappingURL=Live.0913c0b5.js.map
