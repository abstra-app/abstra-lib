import{_ as fa,P as pa}from"./ConsoleOmniChat.vue_vue_type_script_setup_true_lang-rr1Hso-1.js";import{H as Xe,o as Fe}from"./omniChatStore-BvQIlOaN.js";import{a as xe}from"./asyncComputed-jy8qYMJr.js";import{a as G,j as D,c as y,k as c,f as a,l as ce,e as M,m as s,n as me,ag as he,af as Ye,b as H,u as e,w as t,h as l,g as R,t as z,i as v,T as va,Z as se,E as O,Q as le,aK as ze,r as U,b5 as J,b3 as de,b9 as ga,bl as ha,ba as qe,B as te,N as _e,ac as $e,b4 as we,cF as be,a7 as ea,cA as ya,b6 as Se,b7 as He,b8 as ke,P as ba,cB as _a,H as aa,V as Ha,A as ye,bf as Ee,bg as Ue,J as ka,dc as $a,aM as wa,be as Va,F as Ke,a0 as Ca}from"./jwt-decode.esm-pmJTfMF_.js";import{j as Te,p as Ve,l as Za}from"./router-FiPGiJmO.js";import{O as Aa}from"./organization-CaWgUrjn.js";import{P as Be}from"./project-CAZFudAP.js";import{p as ta,T as ne,d as Ma,C as Pe}from"./tables-Bky1cD5E.js";import{F as Ia}from"./folder-BdKsjGYn.js";import{C as Le}from"./ContentLayout-DbHmzwLX.js";import{F as Sa}from"./PhArrowSquareOut.vue-DepD75qS.js";import{u as La}from"./useTables-CxALZ7Ho.js";import{C as Re,S as Oe}from"./index-CgmLa77E.js";import{_ as ge}from"./AbstraButton.vue_vue_type_script_setup_true_lang-Diy-uh_H.js";import{F as xa}from"./OmniChat-DlPuPtU1.js";import{S as De}from"./index-lJA5FKFO.js";import{I as la,F as za,G as qa}from"./PhWarningCircle.vue-DxIdgJey.js";import{A as na}from"./index-C_pOG3Le.js";import{F as Ta}from"./PhArrowUp.vue-Bvu8Unrv.js";import{a as Ba}from"./ant-design-CjaB9-tx.js";import{G as Da}from"./PhCaretRight.vue-BuRSuKKg.js";import{N as ja}from"./Navbar-DIMSHsPu.js";import"./record-oSECIlP2.js";import"./uuid-CPL2C0bE.js";import"./PhCopySimple.vue-Pe9GTkgx.js";import"./ts.worker-D2PA0F_A.js";import"./string-BIiBoNw2.js";import"./PhTranslate.vue-CtHOGFez.js";import"./index-CiXFfdSn.js";import"./PhClockCounterClockwise.vue-Bgucy3tG.js";import"./LoadingOutlined-yUu3G8hk.js";import"./PhStop.vue-CWpmH94n.js";import"./file-2-2RaJfD.js";import"./AbstraLogo.vue_vue_type_script_setup_true_lang-DWoEl1R_.js";import"./logo-BiWG9_W5.js";import"./Logo-RGReAR87.js";import"./index--pQisTxL.js";import"./PhDatabase.vue-BCALUGg4.js";import"./constants-CkryEuH7.js";import"./PhNotePencil.vue-BY_ahb93.js";import"./PhSignOut.vue-BkBGeRV8.js";import"./organizationSwitcher-D42FFvkp.js";import"./PhPlus.vue-sSeA2ayd.js";import"./PhSparkle.vue-CTcPlsc3.js";import"./index-CpbmMOFT.js";(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},u=new Error().stack;u&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[u]="afe2c79a-7881-4d47-b51e-c3b07b6d5741",n._sentryDebugIdIdentifier="sentry-dbid-afe2c79a-7881-4d47-b51e-c3b07b6d5741")}catch{}})();const Na=["width","height","fill","transform"],Fa={key:0},Ea=s("path",{d:"M80,28H56A20,20,0,0,0,36,48V208a20,20,0,0,0,20,20H80a20,20,0,0,0,20-20V48A20,20,0,0,0,80,28ZM76,204H60V52H76ZM156,28H132a20,20,0,0,0-20,20V208a20,20,0,0,0,20,20h24a20,20,0,0,0,20-20V48A20,20,0,0,0,156,28Zm-4,176H136V52h16Zm100-76a12,12,0,0,1-12,12h-8v8a12,12,0,0,1-24,0v-8h-8a12,12,0,0,1,0-24h8v-8a12,12,0,0,1,24,0v8h8A12,12,0,0,1,252,128Z"},null,-1),Ua=[Ea],Ka={key:1},Pa=s("path",{d:"M88,48V208a8,8,0,0,1-8,8H56a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8H80A8,8,0,0,1,88,48Zm64-8H128a8,8,0,0,0-8,8V208a8,8,0,0,0,8,8h24a8,8,0,0,0,8-8V48A8,8,0,0,0,152,40Z",opacity:"0.2"},null,-1),Ra=s("path",{d:"M80,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H80a16,16,0,0,0,16-16V48A16,16,0,0,0,80,32Zm0,176H56V48H80ZM152,32H128a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V48A16,16,0,0,0,152,32Zm0,176H128V48h24Zm96-80a8,8,0,0,1-8,8H224v16a8,8,0,0,1-16,0V136H192a8,8,0,0,1,0-16h16V104a8,8,0,0,1,16,0v16h16A8,8,0,0,1,248,128Z"},null,-1),Oa=[Pa,Ra],Wa={key:2},Ga=s("path",{d:"M96,48V208a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V48A16,16,0,0,1,56,32H80A16,16,0,0,1,96,48Zm56-16H128a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V48A16,16,0,0,0,152,32Zm88,88H224V104a8,8,0,0,0-16,0v16H192a8,8,0,0,0,0,16h16v16a8,8,0,0,0,16,0V136h16a8,8,0,0,0,0-16Z"},null,-1),Qa=[Ga],Ja={key:3},Xa=s("path",{d:"M80,34H56A14,14,0,0,0,42,48V208a14,14,0,0,0,14,14H80a14,14,0,0,0,14-14V48A14,14,0,0,0,80,34Zm2,174a2,2,0,0,1-2,2H56a2,2,0,0,1-2-2V48a2,2,0,0,1,2-2H80a2,2,0,0,1,2,2ZM152,34H128a14,14,0,0,0-14,14V208a14,14,0,0,0,14,14h24a14,14,0,0,0,14-14V48A14,14,0,0,0,152,34Zm2,174a2,2,0,0,1-2,2H128a2,2,0,0,1-2-2V48a2,2,0,0,1,2-2h24a2,2,0,0,1,2,2Zm92-80a6,6,0,0,1-6,6H222v18a6,6,0,0,1-12,0V134H192a6,6,0,0,1,0-12h18V104a6,6,0,0,1,12,0v18h18A6,6,0,0,1,246,128Z"},null,-1),Ya=[Xa],et={key:4},at=s("path",{d:"M80,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H80a16,16,0,0,0,16-16V48A16,16,0,0,0,80,32Zm0,176H56V48H80ZM152,32H128a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V48A16,16,0,0,0,152,32Zm0,176H128V48h24Zm96-80a8,8,0,0,1-8,8H224v16a8,8,0,0,1-16,0V136H192a8,8,0,0,1,0-16h16V104a8,8,0,0,1,16,0v16h16A8,8,0,0,1,248,128Z"},null,-1),tt=[at],lt={key:5},nt=s("path",{d:"M80,36H56A12,12,0,0,0,44,48V208a12,12,0,0,0,12,12H80a12,12,0,0,0,12-12V48A12,12,0,0,0,80,36Zm4,172a4,4,0,0,1-4,4H56a4,4,0,0,1-4-4V48a4,4,0,0,1,4-4H80a4,4,0,0,1,4,4ZM152,36H128a12,12,0,0,0-12,12V208a12,12,0,0,0,12,12h24a12,12,0,0,0,12-12V48A12,12,0,0,0,152,36Zm4,172a4,4,0,0,1-4,4H128a4,4,0,0,1-4-4V48a4,4,0,0,1,4-4h24a4,4,0,0,1,4,4Zm88-80a4,4,0,0,1-4,4H220v20a4,4,0,0,1-8,0V132H192a4,4,0,0,1,0-8h20V104a4,4,0,0,1,8,0v20h20A4,4,0,0,1,244,128Z"},null,-1),rt=[nt],ot={name:"PhColumnsPlusRight"},ut=G({...ot,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(n){const u=n,r=D("weight","regular"),d=D("size","1em"),f=D("color","currentColor"),o=D("mirrored",!1),i=y(()=>u.weight??r),k=y(()=>u.size??d),S=y(()=>u.color??f),m=y(()=>u.mirrored!==void 0?u.mirrored?"scale(-1, 1)":void 0:o?"scale(-1, 1)":void 0);return(g,Z)=>(a(),c("svg",me({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:k.value,height:k.value,fill:S.value,transform:m.value},g.$attrs),[ce(g.$slots,"default"),i.value==="bold"?(a(),c("g",Fa,Ua)):i.value==="duotone"?(a(),c("g",Ka,Oa)):i.value==="fill"?(a(),c("g",Wa,Qa)):i.value==="light"?(a(),c("g",Ja,Ya)):i.value==="regular"?(a(),c("g",et,tt)):i.value==="thin"?(a(),c("g",lt,rt)):M("",!0)],16,Na))}}),it=["width","height","fill","transform"],st={key:0},dt=s("path",{d:"M148,96V48a12,12,0,0,1,24,0V84h36a12,12,0,0,1,0,24H160A12,12,0,0,1,148,96ZM96,148H48a12,12,0,0,0,0,24H84v36a12,12,0,0,0,24,0V160A12,12,0,0,0,96,148Zm112,0H160a12,12,0,0,0-12,12v48a12,12,0,0,0,24,0V172h36a12,12,0,0,0,0-24ZM96,36A12,12,0,0,0,84,48V84H48a12,12,0,0,0,0,24H96a12,12,0,0,0,12-12V48A12,12,0,0,0,96,36Z"},null,-1),ct=[dt],mt={key:1},ft=s("path",{d:"M208,64V192a16,16,0,0,1-16,16H64a16,16,0,0,1-16-16V64A16,16,0,0,1,64,48H192A16,16,0,0,1,208,64Z",opacity:"0.2"},null,-1),pt=s("path",{d:"M152,96V48a8,8,0,0,1,16,0V88h40a8,8,0,0,1,0,16H160A8,8,0,0,1,152,96ZM96,152H48a8,8,0,0,0,0,16H88v40a8,8,0,0,0,16,0V160A8,8,0,0,0,96,152Zm112,0H160a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V168h40a8,8,0,0,0,0-16ZM96,40a8,8,0,0,0-8,8V88H48a8,8,0,0,0,0,16H96a8,8,0,0,0,8-8V48A8,8,0,0,0,96,40Z"},null,-1),vt=[ft,pt],gt={key:2},ht=s("path",{d:"M152,96V48a8,8,0,0,1,13.66-5.66l48,48A8,8,0,0,1,208,104H160A8,8,0,0,1,152,96ZM96,152H48a8,8,0,0,0-5.66,13.66l48,48A8,8,0,0,0,104,208V160A8,8,0,0,0,96,152ZM99.06,40.61a8,8,0,0,0-8.72,1.73l-48,48A8,8,0,0,0,48,104H96a8,8,0,0,0,8-8V48A8,8,0,0,0,99.06,40.61ZM208,152H160a8,8,0,0,0-8,8v48a8,8,0,0,0,13.66,5.66l48-48A8,8,0,0,0,208,152Z"},null,-1),yt=[ht],bt={key:3},_t=s("path",{d:"M154,96V48a6,6,0,0,1,12,0V90h42a6,6,0,0,1,0,12H160A6,6,0,0,1,154,96ZM96,154H48a6,6,0,0,0,0,12H90v42a6,6,0,0,0,12,0V160A6,6,0,0,0,96,154Zm112,0H160a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V166h42a6,6,0,0,0,0-12ZM96,42a6,6,0,0,0-6,6V90H48a6,6,0,0,0,0,12H96a6,6,0,0,0,6-6V48A6,6,0,0,0,96,42Z"},null,-1),Ht=[_t],kt={key:4},$t=s("path",{d:"M152,96V48a8,8,0,0,1,16,0V88h40a8,8,0,0,1,0,16H160A8,8,0,0,1,152,96ZM96,152H48a8,8,0,0,0,0,16H88v40a8,8,0,0,0,16,0V160A8,8,0,0,0,96,152Zm112,0H160a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V168h40a8,8,0,0,0,0-16ZM96,40a8,8,0,0,0-8,8V88H48a8,8,0,0,0,0,16H96a8,8,0,0,0,8-8V48A8,8,0,0,0,96,40Z"},null,-1),wt=[$t],Vt={key:5},Ct=s("path",{d:"M156,96V48a4,4,0,0,1,8,0V92h44a4,4,0,0,1,0,8H160A4,4,0,0,1,156,96ZM96,156H48a4,4,0,0,0,0,8H92v44a4,4,0,0,0,8,0V160A4,4,0,0,0,96,156Zm112,0H160a4,4,0,0,0-4,4v48a4,4,0,0,0,8,0V164h44a4,4,0,0,0,0-8ZM96,44a4,4,0,0,0-4,4V92H48a4,4,0,0,0,0,8H96a4,4,0,0,0,4-4V48A4,4,0,0,0,96,44Z"},null,-1),Zt=[Ct],At={name:"PhCornersIn"},Mt=G({...At,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(n){const u=n,r=D("weight","regular"),d=D("size","1em"),f=D("color","currentColor"),o=D("mirrored",!1),i=y(()=>u.weight??r),k=y(()=>u.size??d),S=y(()=>u.color??f),m=y(()=>u.mirrored!==void 0?u.mirrored?"scale(-1, 1)":void 0:o?"scale(-1, 1)":void 0);return(g,Z)=>(a(),c("svg",me({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:k.value,height:k.value,fill:S.value,transform:m.value},g.$attrs),[ce(g.$slots,"default"),i.value==="bold"?(a(),c("g",st,ct)):i.value==="duotone"?(a(),c("g",mt,vt)):i.value==="fill"?(a(),c("g",gt,yt)):i.value==="light"?(a(),c("g",bt,Ht)):i.value==="regular"?(a(),c("g",kt,wt)):i.value==="thin"?(a(),c("g",Vt,Zt)):M("",!0)],16,it))}}),It=["width","height","fill","transform"],St={key:0},Lt=s("path",{d:"M220,48V88a12,12,0,0,1-24,0V60H168a12,12,0,0,1,0-24h40A12,12,0,0,1,220,48ZM88,196H60V168a12,12,0,0,0-24,0v40a12,12,0,0,0,12,12H88a12,12,0,0,0,0-24Zm120-40a12,12,0,0,0-12,12v28H168a12,12,0,0,0,0,24h40a12,12,0,0,0,12-12V168A12,12,0,0,0,208,156ZM88,36H48A12,12,0,0,0,36,48V88a12,12,0,0,0,24,0V60H88a12,12,0,0,0,0-24Z"},null,-1),xt=[Lt],zt={key:1},qt=s("path",{d:"M208,48V208H48V48Z",opacity:"0.2"},null,-1),Tt=s("path",{d:"M216,48V88a8,8,0,0,1-16,0V56H168a8,8,0,0,1,0-16h40A8,8,0,0,1,216,48ZM88,200H56V168a8,8,0,0,0-16,0v40a8,8,0,0,0,8,8H88a8,8,0,0,0,0-16Zm120-40a8,8,0,0,0-8,8v32H168a8,8,0,0,0,0,16h40a8,8,0,0,0,8-8V168A8,8,0,0,0,208,160ZM88,40H48a8,8,0,0,0-8,8V88a8,8,0,0,0,16,0V56H88a8,8,0,0,0,0-16Z"},null,-1),Bt=[qt,Tt],Dt={key:2},jt=s("path",{d:"M93.66,202.34A8,8,0,0,1,88,216H48a8,8,0,0,1-8-8V168a8,8,0,0,1,13.66-5.66ZM88,40H48a8,8,0,0,0-8,8V88a8,8,0,0,0,13.66,5.66l40-40A8,8,0,0,0,88,40ZM211.06,160.61a8,8,0,0,0-8.72,1.73l-40,40A8,8,0,0,0,168,216h40a8,8,0,0,0,8-8V168A8,8,0,0,0,211.06,160.61ZM208,40H168a8,8,0,0,0-5.66,13.66l40,40A8,8,0,0,0,216,88V48A8,8,0,0,0,208,40Z"},null,-1),Nt=[jt],Ft={key:3},Et=s("path",{d:"M214,48V88a6,6,0,0,1-12,0V54H168a6,6,0,0,1,0-12h40A6,6,0,0,1,214,48ZM88,202H54V168a6,6,0,0,0-12,0v40a6,6,0,0,0,6,6H88a6,6,0,0,0,0-12Zm120-40a6,6,0,0,0-6,6v34H168a6,6,0,0,0,0,12h40a6,6,0,0,0,6-6V168A6,6,0,0,0,208,162ZM88,42H48a6,6,0,0,0-6,6V88a6,6,0,0,0,12,0V54H88a6,6,0,0,0,0-12Z"},null,-1),Ut=[Et],Kt={key:4},Pt=s("path",{d:"M216,48V88a8,8,0,0,1-16,0V56H168a8,8,0,0,1,0-16h40A8,8,0,0,1,216,48ZM88,200H56V168a8,8,0,0,0-16,0v40a8,8,0,0,0,8,8H88a8,8,0,0,0,0-16Zm120-40a8,8,0,0,0-8,8v32H168a8,8,0,0,0,0,16h40a8,8,0,0,0,8-8V168A8,8,0,0,0,208,160ZM88,40H48a8,8,0,0,0-8,8V88a8,8,0,0,0,16,0V56H88a8,8,0,0,0,0-16Z"},null,-1),Rt=[Pt],Ot={key:5},Wt=s("path",{d:"M212,48V88a4,4,0,0,1-8,0V52H168a4,4,0,0,1,0-8h40A4,4,0,0,1,212,48ZM88,204H52V168a4,4,0,0,0-8,0v40a4,4,0,0,0,4,4H88a4,4,0,0,0,0-8Zm120-40a4,4,0,0,0-4,4v36H168a4,4,0,0,0,0,8h40a4,4,0,0,0,4-4V168A4,4,0,0,0,208,164ZM88,44H48a4,4,0,0,0-4,4V88a4,4,0,0,0,8,0V52H88a4,4,0,0,0,0-8Z"},null,-1),Gt=[Wt],Qt={name:"PhCornersOut"},Jt=G({...Qt,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(n){const u=n,r=D("weight","regular"),d=D("size","1em"),f=D("color","currentColor"),o=D("mirrored",!1),i=y(()=>u.weight??r),k=y(()=>u.size??d),S=y(()=>u.color??f),m=y(()=>u.mirrored!==void 0?u.mirrored?"scale(-1, 1)":void 0:o?"scale(-1, 1)":void 0);return(g,Z)=>(a(),c("svg",me({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:k.value,height:k.value,fill:S.value,transform:m.value},g.$attrs),[ce(g.$slots,"default"),i.value==="bold"?(a(),c("g",St,xt)):i.value==="duotone"?(a(),c("g",zt,Bt)):i.value==="fill"?(a(),c("g",Dt,Nt)):i.value==="light"?(a(),c("g",Ft,Ut)):i.value==="regular"?(a(),c("g",Kt,Rt)):i.value==="thin"?(a(),c("g",Ot,Gt)):M("",!0)],16,It))}}),Xt=["width","height","fill","transform"],Yt={key:0},e0=s("path",{d:"M228,160a12,12,0,0,1-12,12H40a12,12,0,0,1,0-24H216A12,12,0,0,1,228,160ZM40,108H216a12,12,0,0,0,0-24H40a12,12,0,0,0,0,24Z"},null,-1),a0=[e0],t0={key:1},l0=s("path",{d:"M216,56V200a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V56A16,16,0,0,1,56,40H200A16,16,0,0,1,216,56Z",opacity:"0.2"},null,-1),n0=s("path",{d:"M224,160a8,8,0,0,1-8,8H40a8,8,0,0,1,0-16H216A8,8,0,0,1,224,160ZM40,104H216a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16Z"},null,-1),r0=[l0,n0],o0={key:2},u0=s("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM184,160H72a8,8,0,0,1,0-16H184a8,8,0,0,1,0,16Zm0-48H72a8,8,0,0,1,0-16H184a8,8,0,0,1,0,16Z"},null,-1),i0=[u0],s0={key:3},d0=s("path",{d:"M222,160a6,6,0,0,1-6,6H40a6,6,0,0,1,0-12H216A6,6,0,0,1,222,160ZM40,102H216a6,6,0,0,0,0-12H40a6,6,0,0,0,0,12Z"},null,-1),c0=[d0],m0={key:4},f0=s("path",{d:"M224,160a8,8,0,0,1-8,8H40a8,8,0,0,1,0-16H216A8,8,0,0,1,224,160ZM40,104H216a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16Z"},null,-1),p0=[f0],v0={key:5},g0=s("path",{d:"M220,160a4,4,0,0,1-4,4H40a4,4,0,0,1,0-8H216A4,4,0,0,1,220,160ZM40,100H216a4,4,0,0,0,0-8H40a4,4,0,0,0,0,8Z"},null,-1),h0=[g0],y0={name:"PhEquals"},b0=G({...y0,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(n){const u=n,r=D("weight","regular"),d=D("size","1em"),f=D("color","currentColor"),o=D("mirrored",!1),i=y(()=>u.weight??r),k=y(()=>u.size??d),S=y(()=>u.color??f),m=y(()=>u.mirrored!==void 0?u.mirrored?"scale(-1, 1)":void 0:o?"scale(-1, 1)":void 0);return(g,Z)=>(a(),c("svg",me({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:k.value,height:k.value,fill:S.value,transform:m.value},g.$attrs),[ce(g.$slots,"default"),i.value==="bold"?(a(),c("g",Yt,a0)):i.value==="duotone"?(a(),c("g",t0,r0)):i.value==="fill"?(a(),c("g",o0,i0)):i.value==="light"?(a(),c("g",s0,c0)):i.value==="regular"?(a(),c("g",m0,p0)):i.value==="thin"?(a(),c("g",v0,h0)):M("",!0)],16,Xt))}}),_0=["width","height","fill","transform"],H0={key:0},k0=s("path",{d:"M87.5,151.52l64-64a12,12,0,0,1,17,17l-64,64a12,12,0,0,1-17-17Zm131-114a60.08,60.08,0,0,0-84.87,0L103.51,67.61a12,12,0,0,0,17,17l30.07-30.06a36,36,0,0,1,50.93,50.92L171.4,135.52a12,12,0,1,0,17,17l30.08-30.06A60.09,60.09,0,0,0,218.45,37.55ZM135.52,171.4l-30.07,30.08a36,36,0,0,1-50.92-50.93l30.06-30.07a12,12,0,0,0-17-17L37.55,133.58a60,60,0,0,0,84.88,84.87l30.06-30.07a12,12,0,0,0-17-17Z"},null,-1),$0=[k0],w0={key:1},V0=s("path",{d:"M209.94,113.94l-96,96a48,48,0,0,1-67.88-67.88l96-96a48,48,0,0,1,67.88,67.88Z",opacity:"0.2"},null,-1),C0=s("path",{d:"M165.66,90.34a8,8,0,0,1,0,11.32l-64,64a8,8,0,0,1-11.32-11.32l64-64A8,8,0,0,1,165.66,90.34ZM215.6,40.4a56,56,0,0,0-79.2,0L106.34,70.45a8,8,0,0,0,11.32,11.32l30.06-30a40,40,0,0,1,56.57,56.56l-30.07,30.06a8,8,0,0,0,11.31,11.32L215.6,119.6a56,56,0,0,0,0-79.2ZM138.34,174.22l-30.06,30.06a40,40,0,1,1-56.56-56.57l30.05-30.05a8,8,0,0,0-11.32-11.32L40.4,136.4a56,56,0,0,0,79.2,79.2l30.06-30.07a8,8,0,0,0-11.32-11.31Z"},null,-1),Z0=[V0,C0],A0={key:2},M0=s("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM144.56,173.66l-21.45,21.45a44,44,0,0,1-62.22-62.22l21.45-21.46a8,8,0,0,1,11.32,11.31L72.2,144.2a28,28,0,0,0,39.6,39.6l21.45-21.46a8,8,0,0,1,11.31,11.32Zm-34.9-16a8,8,0,0,1-11.32-11.32l48-48a8,8,0,0,1,11.32,11.32Zm85.45-34.55-21.45,21.45a8,8,0,0,1-11.32-11.31L183.8,111.8a28,28,0,0,0-39.6-39.6L122.74,93.66a8,8,0,0,1-11.31-11.32l21.46-21.45a44,44,0,0,1,62.22,62.22Z"},null,-1),I0=[M0],S0={key:3},L0=s("path",{d:"M164.25,91.75a6,6,0,0,1,0,8.49l-64,64a6,6,0,0,1-8.49-8.48l64-64A6,6,0,0,1,164.25,91.75ZM214.2,41.8a54.07,54.07,0,0,0-76.38,0L107.75,71.85a6,6,0,0,0,8.49,8.49l30.07-30.06a42,42,0,0,1,59.41,59.41l-30.08,30.07a6,6,0,1,0,8.49,8.49l30.07-30.07A54,54,0,0,0,214.2,41.8ZM139.76,175.64l-30.07,30.08a42,42,0,0,1-59.41-59.41l30.06-30.07a6,6,0,0,0-8.49-8.49l-30,30.07a54,54,0,0,0,76.38,76.39l30.07-30.08a6,6,0,0,0-8.49-8.49Z"},null,-1),x0=[L0],z0={key:4},q0=s("path",{d:"M165.66,90.34a8,8,0,0,1,0,11.32l-64,64a8,8,0,0,1-11.32-11.32l64-64A8,8,0,0,1,165.66,90.34ZM215.6,40.4a56,56,0,0,0-79.2,0L106.34,70.45a8,8,0,0,0,11.32,11.32l30.06-30a40,40,0,0,1,56.57,56.56l-30.07,30.06a8,8,0,0,0,11.31,11.32L215.6,119.6a56,56,0,0,0,0-79.2ZM138.34,174.22l-30.06,30.06a40,40,0,1,1-56.56-56.57l30.05-30.05a8,8,0,0,0-11.32-11.32L40.4,136.4a56,56,0,0,0,79.2,79.2l30.06-30.07a8,8,0,0,0-11.32-11.31Z"},null,-1),T0=[q0],B0={key:5},D0=s("path",{d:"M162.84,93.16a4,4,0,0,1,0,5.66l-64,64a4,4,0,0,1-5.66-5.66l64-64A4,4,0,0,1,162.84,93.16Zm49.95-49.95a52.07,52.07,0,0,0-73.56,0L109.17,73.27a4,4,0,0,0,5.65,5.66l30.07-30.06a44,44,0,0,1,62.24,62.24l-30.07,30.06a4,4,0,0,0,5.66,5.66l30.07-30.06A52.07,52.07,0,0,0,212.79,43.21ZM141.17,177.06l-30.06,30.07a44,44,0,0,1-62.24-62.24l30.06-30.06a4,4,0,0,0-5.66-5.66L43.21,139.23a52,52,0,0,0,73.56,73.56l30.06-30.07a4,4,0,1,0-5.66-5.66Z"},null,-1),j0=[D0],N0={name:"PhLinkSimple"},We=G({...N0,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(n){const u=n,r=D("weight","regular"),d=D("size","1em"),f=D("color","currentColor"),o=D("mirrored",!1),i=y(()=>u.weight??r),k=y(()=>u.size??d),S=y(()=>u.color??f),m=y(()=>u.mirrored!==void 0?u.mirrored?"scale(-1, 1)":void 0:o?"scale(-1, 1)":void 0);return(g,Z)=>(a(),c("svg",me({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:k.value,height:k.value,fill:S.value,transform:m.value},g.$attrs),[ce(g.$slots,"default"),i.value==="bold"?(a(),c("g",H0,$0)):i.value==="duotone"?(a(),c("g",w0,Z0)):i.value==="fill"?(a(),c("g",A0,I0)):i.value==="light"?(a(),c("g",S0,x0)):i.value==="regular"?(a(),c("g",z0,T0)):i.value==="thin"?(a(),c("g",B0,j0)):M("",!0)],16,_0))}}),F0=["width","height","fill","transform"],E0={key:0},U0=s("path",{d:"M230.15,70.54,185.46,25.86a20,20,0,0,0-28.28,0L33.86,149.17A19.86,19.86,0,0,0,28,163.31V208a20,20,0,0,0,20,20H216a12,12,0,0,0,0-24H125L230.15,98.83A20,20,0,0,0,230.15,70.54ZM91,204H52V165l84-84,39,39ZM192,103,153,64l18.34-18.34,39,39Z"},null,-1),K0=[U0],P0={key:1},R0=s("path",{d:"M221.66,90.34,192,120,136,64l29.66-29.66a8,8,0,0,1,11.31,0L221.66,79A8,8,0,0,1,221.66,90.34Z",opacity:"0.2"},null,-1),O0=s("path",{d:"M227.32,73.37,182.63,28.69a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H216a8,8,0,0,0,0-16H115.32l112-112A16,16,0,0,0,227.32,73.37ZM48,163.31l88-88L180.69,120l-88,88H48Zm144-54.62L147.32,64l24-24L216,84.69Z"},null,-1),W0=[R0,O0],G0={key:2},Q0=s("path",{d:"M227.32,73.37,182.63,28.69a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H216a8,8,0,0,0,0-16H115.32l112-112A16,16,0,0,0,227.32,73.37ZM192,108.69,147.32,64l24-24L216,84.69Z"},null,-1),J0=[Q0],X0={key:3},Y0=s("path",{d:"M225.91,74.79,181.22,30.1a14,14,0,0,0-19.8,0L38.1,153.41a13.94,13.94,0,0,0-4.1,9.9V208a14,14,0,0,0,14,14H216a6,6,0,0,0,0-12H110.49L225.91,94.59A14,14,0,0,0,225.91,74.79ZM93.52,210H48a2,2,0,0,1-2-2V163.31a2,2,0,0,1,.59-1.41L136,72.49,183.52,120ZM217.42,86.1,192,111.52,144.49,64,169.9,38.59a2,2,0,0,1,2.83,0l44.69,44.68A2,2,0,0,1,217.42,86.1Z"},null,-1),el=[Y0],al={key:4},tl=s("path",{d:"M227.32,73.37,182.63,28.69a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H216a8,8,0,0,0,0-16H115.32l112-112A16,16,0,0,0,227.32,73.37ZM92.69,208H48V163.31l88-88L180.69,120ZM192,108.69,147.32,64l24-24L216,84.69Z"},null,-1),ll=[tl],nl={key:5},rl=s("path",{d:"M224.49,76.2,179.8,31.51a12,12,0,0,0-17,0L39.51,154.83A12,12,0,0,0,36,163.31V208a12,12,0,0,0,12,12H216a4,4,0,0,0,0-8H105.66L224.49,93.17A12,12,0,0,0,224.49,76.2ZM94.34,212H48a4,4,0,0,1-4-4V163.31a4,4,0,0,1,1.17-2.82L136,69.66,186.35,120ZM218.83,87.51,192,114.34,141.66,64l26.83-26.83a4,4,0,0,1,5.66,0l44.68,44.69A4,4,0,0,1,218.83,87.51Z"},null,-1),ol=[rl],ul={name:"PhPencilSimpleLine"},il=G({...ul,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(n){const u=n,r=D("weight","regular"),d=D("size","1em"),f=D("color","currentColor"),o=D("mirrored",!1),i=y(()=>u.weight??r),k=y(()=>u.size??d),S=y(()=>u.color??f),m=y(()=>u.mirrored!==void 0?u.mirrored?"scale(-1, 1)":void 0:o?"scale(-1, 1)":void 0);return(g,Z)=>(a(),c("svg",me({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:k.value,height:k.value,fill:S.value,transform:m.value},g.$attrs),[ce(g.$slots,"default"),i.value==="bold"?(a(),c("g",E0,K0)):i.value==="duotone"?(a(),c("g",P0,W0)):i.value==="fill"?(a(),c("g",G0,J0)):i.value==="light"?(a(),c("g",X0,el)):i.value==="regular"?(a(),c("g",al,ll)):i.value==="thin"?(a(),c("g",nl,ol)):M("",!0)],16,F0))}}),sl=["width","height","fill","transform"],dl={key:0},cl=s("path",{d:"M208,112H48a20,20,0,0,0-20,20v24a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V132A20,20,0,0,0,208,112Zm-4,40H52V136H204Zm4-116H48A20,20,0,0,0,28,56V80a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V56A20,20,0,0,0,208,36Zm-4,40H52V60H204ZM160,220a12,12,0,0,1-12,12h-8v8a12,12,0,0,1-24,0v-8h-8a12,12,0,0,1,0-24h8v-8a12,12,0,0,1,24,0v8h8A12,12,0,0,1,160,220Z"},null,-1),ml=[cl],fl={key:1},pl=s("path",{d:"M216,128v24a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V128a8,8,0,0,1,8-8H208A8,8,0,0,1,216,128Zm-8-80H48a8,8,0,0,0-8,8V80a8,8,0,0,0,8,8H208a8,8,0,0,0,8-8V56A8,8,0,0,0,208,48Z",opacity:"0.2"},null,-1),vl=s("path",{d:"M208,112H48a16,16,0,0,0-16,16v24a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V128A16,16,0,0,0,208,112Zm0,40H48V128H208v24Zm0-112H48A16,16,0,0,0,32,56V80A16,16,0,0,0,48,96H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40Zm0,40H48V56H208V80ZM160,216a8,8,0,0,1-8,8H136v16a8,8,0,0,1-16,0V224H104a8,8,0,0,1,0-16h16V192a8,8,0,0,1,16,0v16h16A8,8,0,0,1,160,216Z"},null,-1),gl=[pl,vl],hl={key:2},yl=s("path",{d:"M224,128v24a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V128a16,16,0,0,1,16-16H208A16,16,0,0,1,224,128ZM208,40H48A16,16,0,0,0,32,56V80A16,16,0,0,0,48,96H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40ZM152,208H136V192a8,8,0,0,0-16,0v16H104a8,8,0,0,0,0,16h16v16a8,8,0,0,0,16,0V224h16a8,8,0,0,0,0-16Z"},null,-1),bl=[yl],_l={key:3},Hl=s("path",{d:"M208,114H48a14,14,0,0,0-14,14v24a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V128A14,14,0,0,0,208,114Zm2,38a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V128a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2ZM208,42H48A14,14,0,0,0,34,56V80A14,14,0,0,0,48,94H208a14,14,0,0,0,14-14V56A14,14,0,0,0,208,42Zm2,38a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V56a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2ZM158,216a6,6,0,0,1-6,6H134v18a6,6,0,0,1-12,0V222H104a6,6,0,0,1,0-12h18V192a6,6,0,0,1,12,0v18h18A6,6,0,0,1,158,216Z"},null,-1),kl=[Hl],$l={key:4},wl=s("path",{d:"M208,112H48a16,16,0,0,0-16,16v24a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V128A16,16,0,0,0,208,112Zm0,40H48V128H208v24Zm0-112H48A16,16,0,0,0,32,56V80A16,16,0,0,0,48,96H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40Zm0,40H48V56H208V80ZM160,216a8,8,0,0,1-8,8H136v16a8,8,0,0,1-16,0V224H104a8,8,0,0,1,0-16h16V192a8,8,0,0,1,16,0v16h16A8,8,0,0,1,160,216Z"},null,-1),Vl=[wl],Cl={key:5},Zl=s("path",{d:"M208,116H48a12,12,0,0,0-12,12v24a12,12,0,0,0,12,12H208a12,12,0,0,0,12-12V128A12,12,0,0,0,208,116Zm4,36a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V128a4,4,0,0,1,4-4H208a4,4,0,0,1,4,4ZM208,44H48A12,12,0,0,0,36,56V80A12,12,0,0,0,48,92H208a12,12,0,0,0,12-12V56A12,12,0,0,0,208,44Zm4,36a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V56a4,4,0,0,1,4-4H208a4,4,0,0,1,4,4ZM156,216a4,4,0,0,1-4,4H132v20a4,4,0,0,1-8,0V220H104a4,4,0,0,1,0-8h20V192a4,4,0,0,1,8,0v20h20A4,4,0,0,1,156,216Z"},null,-1),Al=[Zl],Ml={name:"PhRowsPlusBottom"},Ge=G({...Ml,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(n){const u=n,r=D("weight","regular"),d=D("size","1em"),f=D("color","currentColor"),o=D("mirrored",!1),i=y(()=>u.weight??r),k=y(()=>u.size??d),S=y(()=>u.color??f),m=y(()=>u.mirrored!==void 0?u.mirrored?"scale(-1, 1)":void 0:o?"scale(-1, 1)":void 0);return(g,Z)=>(a(),c("svg",me({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:k.value,height:k.value,fill:S.value,transform:m.value},g.$attrs),[ce(g.$slots,"default"),i.value==="bold"?(a(),c("g",dl,ml)):i.value==="duotone"?(a(),c("g",fl,gl)):i.value==="fill"?(a(),c("g",hl,bl)):i.value==="light"?(a(),c("g",_l,kl)):i.value==="regular"?(a(),c("g",$l,Vl)):i.value==="thin"?(a(),c("g",Cl,Al)):M("",!0)],16,sl))}}),Il={class:"related-tables"},Sl={class:"related-section"},Ll={class:"relation-info"},xl={class:"related-tables"},zl={class:"related-section"},ql={class:"relation-info"},Tl=G({__name:"RelatedTables",props:{table:{}},setup(n){const u=n,r=he(),d=Ye(),f=r.params.projectId,{tables:o,loading:i}=La(f),k=y(()=>u.table.getColumns().find(I=>I.primaryKey)?.name||"id"),S=y(()=>{if(!o.value.length)return{referencingTables:[],referencedTables:[]};const Z=o.value.filter(E=>E.id!==u.table.id),I=[];for(const E of Z){const q=E.getColumns().filter(B=>B.foreignKey);for(const B of q){if(!B.foreignKey)continue;let X;for(const Y of o.value)if(X=Y.getColumns().find(ee=>ee.id===B.foreignKey?.columnId),X)break;X?.tableId===u.table.id&&I.push({table:E,column:B})}}const p=[],j=u.table.getColumns().filter(E=>E.foreignKey);for(const E of j){if(!E.foreignKey)continue;let q,B;for(const X of o.value)if(B=X.getColumns().find(Y=>Y.id===E.foreignKey?.columnId),B){q=X;break}q&&B&&p.push({table:q,sourceColumn:E,targetColumn:B})}return{referencingTables:I,referencedTables:p}}),m=y(()=>{const Z=new Map;for(const I of S.value.referencingTables)Z.has(I.table.id)||Z.set(I.table.id,{tableId:I.table.id,tableName:I.table.name,description:`${I.column.name} → ${k.value}`});for(const I of S.value.referencedTables)Z.has(I.table.id)||Z.set(I.table.id,{tableId:I.table.id,tableName:I.table.name,description:`${I.sourceColumn.name} → ${I.targetColumn.name}`});return Array.from(Z.values())}),g=Z=>{d.push({name:"tableEditor",params:{projectId:f,tableId:Z}})};return(Z,I)=>e(i)?(a(),H(Le,{key:0,"full-width":""},{default:t(()=>[s("div",Il,[s("div",Sl,[l(e(va),null,{default:t(()=>[R(z(e(v).translate("i18n_relatedtables_related_tables")),1)]),_:1}),l(e(O),{gap:"middle",wrap:"wrap"},{default:t(()=>[(a(),c(le,null,se(3,p=>l(e(Re),{key:p,class:"related-table-card loading-card"},{title:t(()=>[l(e(O),{justify:"space-between",align:"center"},{default:t(()=>[l(e(Oe),{active:!0,paragraph:!1,title:{width:"120px"}}),l(e(Sa),{size:16,style:{opacity:"0.3"}})]),_:1})]),default:t(()=>[s("p",Ll,[l(e(We),{size:16,style:{opacity:"0.3"}}),l(e(Oe),{active:!0,paragraph:!1,title:{width:"150px"}})])]),_:1})),64))]),_:1})])])]),_:1})):m.value.length>0?(a(),H(Le,{key:1,"full-width":""},{default:t(()=>[s("div",xl,[s("div",zl,[s("h3",null,z(e(v).translate("i18n_relatedtables_related_tables_count",null,m.value.length)),1),l(e(O),{gap:"middle",wrap:"wrap"},{default:t(()=>[(a(!0),c(le,null,se(m.value,p=>(a(),H(e(Re),{key:p.tableId,title:p.tableName,class:"related-table-card",hoverable:"",onClick:j=>g(p.tableId)},{default:t(()=>[s("p",ql,[l(e(We),{size:16}),s("span",null,z(p.description),1)])]),_:2},1032,["title","onClick"]))),128))]),_:1})])])]),_:1})):M("",!0)}}),Bl=ze(Tl,[["__scopeId","data-v-55a3ad92"]]),ie="_sql";function Qe(n){return`"${n.replace(/"/g,'""')}"`}function Dl(n){return n==null?"NULL":`'${String(n).replace(/'/g,"''")}'`}function jl(n,u){if(n.type==="search")return!n.q||n.q.trim()==="","";if(n.type==="and"){const r=n.conditions.filter(o=>o.value!==""&&o.value!==null);if(r.length===0)return"";const d=r.map(o=>{if(o.field===ie)return`(${o.value})`;const i=Qe(o.field),k=Dl(o.value);return`${i} = ${k}`});return`SELECT * FROM ${Qe(u)} WHERE ${d.join(" AND ")}`}return""}function Nl(n,u){const r=U(u||{type:"search",q:""}),d=y(()=>n.value.getColumns().filter(p=>r.value.type==="and"&&!r.value.conditions.some(j=>j.field===p.name))),f=y(()=>n.value.getColumns().filter(p=>r.value.type==="and"&&!r.value.conditions.some(j=>j.field===p.name)));function o(){r.value={type:"and",conditions:[{type:"eq",field:"id",value:""}]}}function i(p){p==="search"?r.value={type:"search",q:""}:o()}function k(p){r.value.type==="and"&&r.value.conditions.push({type:"eq",field:String(p),value:""})}function S(p){r.value.type==="and"&&(r.value.conditions=r.value.conditions.filter(j=>j.field!==p))}function m(p){r.value.type==="search"&&(r.value={type:"search",q:p})}function g(p){if(r.value.type!=="and")return;const j=r.value.conditions.find(E=>E.field===p);j&&(j.field=p)}function Z(p,j){if(r.value.type!=="and")return;const E=r.value.conditions.find(q=>q.field===p);E&&(E.value=j)}function I(){return jl(r.value,n.value.name)}return{searchValue:r,filteredColumns:d,nonFilteredColumns:f,changeSearchType:i,addCondition:k,removeCondition:S,updateSearch:m,updateConditionField:g,updateConditionValue:Z,getSqlQuery:I}}const Fl=G({__name:"AddData",props:{open:{type:Boolean},editableItem:{},table:{},loading:{type:Boolean}},emits:["save","close","update-nullable","record-change"],setup(n,{emit:u}){const r=u;return(d,f)=>(a(),H(e(Te),{title:e(v).translate("i18n_adddata_title"),width:720,open:n.open,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:f[2]||(f[2]=o=>r("close"))},{extra:t(()=>[l(e(De),null,{default:t(()=>[l(e(te),{onClick:f[0]||(f[0]=o=>r("close"))},{default:t(()=>[R(z(e(v).translate("i18n_adddata_cancel")),1)]),_:1}),l(e(te),{type:"primary",loading:n.loading,onClick:f[1]||(f[1]=o=>r("save"))},{default:t(()=>[R(z(e(v).translate("i18n_adddata_save")),1)]),_:1},8,["loading"])]),_:1})]),default:t(()=>[l(e(qe),{model:n.editableItem,layout:"vertical"},{default:t(()=>[(a(!0),c(le,null,se(n.table.getUnprotectedColumns(),o=>(a(),H(e(J),{key:o.id,label:o.name,required:!o.nullable},{default:t(()=>[n.editableItem?(a(),H(e(de),{key:0,placeholder:o.type,value:n.editableItem[o.name],disabled:n.editableItem[o.name]===null,"onUpdate:value":i=>r("record-change",o.name,i)},ga({_:2},[o.nullable?{name:"addonAfter",fn:t(()=>[l(e(ha),{checked:n.editableItem[o.name]===null,"onUpdate:checked":i=>r("update-nullable",o.name,i)},{default:t(()=>[R(z(e(v).translate("i18n_adddata_null")),1)]),_:1},8,["checked","onUpdate:checked"])]),key:"0"}:void 0]),1032,["placeholder","value","disabled","onUpdate:value"])):M("",!0)]),_:2},1032,["label","required"]))),128))]),_:1},8,["model"])]),_:1},8,["title","open"]))}}),ra=(n,u)=>u.includes(n)?{status:"error",help:"There already is a column with this name in the table"}:{status:""},El=G({__name:"NewColumn",props:{open:{type:Boolean},table:{}},emits:["created","cancel"],setup(n,{emit:u}){const r=u,d=n,o=he().params.projectId,i=y(()=>d.table?.getColumns().map(C=>C.name)||[]),k=y(()=>ra(m.value.name,i.value)),S={name:"",type:null,default:"",nullable:!0,unique:!1},m=U(S),g=()=>{m.value={...S}},Z=U([{value:"reference",label:"reference",isLeaf:!1},...ta.map(C=>({value:C,label:C,isLeaf:!0}))]),I=C=>{if(!C)return;const _=C[C.length-1];switch(C.length){case 0:return;case 1:_.loading=!0,ne.list(o).then(A=>{_.children=A.map(Q=>({value:Q.id,label:Q.name,isLeaf:!1})),_.loading=!1});return;case 2:_.loading=!0,ne.get(o,_.value).then(A=>{_.children=A.getColumns().map(Q=>({type:Q.type,value:Q.id,label:Q.name,isLeaf:!0})),_.loading=!1});return}},p=(C,_)=>{if(C){if(C.length===1){m.value.type=C[0],m.value.foreignKey=void 0;return}if(C.length===3){const A=_[_.length-1];m.value.type=A.type,m.value.foreignKey={columnId:A.value}}}},j=C=>{const _=C.selectedOptions;return _?_.length===1?_[0].label:_.length===3?v.translate("i18n_newcolumn_reference_to",null,{tableName:_[1].label,columnName:_[2].label}):"":v.translate("i18n_newcolumn_select_type")},q=U({...{status:"success",message:"",fakeLoading:!1}}),B=()=>{q.value.fakeLoading=!0,Y()};_e(()=>m.value.type,()=>{m.value.type&&(m.value.default=Ma[m.value.type]||"",B())});const Y=$e.debounce(async()=>{if(!m.value.default){q.value.status="success",q.value.message="",q.value.fakeLoading=!1;return}const C=`select (${m.value.default})::${m.value.type} `;Be.executeQuery(o,C,[]).then(_=>{q.value.status=_.errors.length>0?"error":"success",q.value.message=_.errors[0]||"",q.value.fakeLoading=!1})},500);function ee(){r("cancel")}async function L(){if(d.table&&!(!m.value.name||!m.value.type))try{await d.table.addColumn(m.value),g(),r("created")}catch(C){C instanceof Error&&Ve("Database error",C.message)}}return(C,_)=>(a(),H(e(Te),{title:e(v).translate("i18n_newcolumn_new_column"),width:720,open:d.open,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:ee},{extra:t(()=>[l(e(De),null,{default:t(()=>[l(e(te),{onClick:ee},{default:t(()=>[R(z(e(v).translate("i18n_newcolumn_cancel")),1)]),_:1}),l(e(te),{type:"primary",onClick:L},{default:t(()=>[R(z(e(v).translate("i18n_newcolumn_save")),1)]),_:1})]),_:1})]),default:t(()=>[l(e(qe),{model:m.value,layout:"vertical"},{default:t(()=>[l(e(J),{key:"name",label:e(v).translate("i18n_newcolumn_name"),required:"","validate-status":k.value.status,help:k.value.help},{default:t(()=>[l(e(de),{value:m.value.name,"onUpdate:value":_[0]||(_[0]=A=>m.value.name=A)},null,8,["value"])]),_:1},8,["label","validate-status","help"]),l(e(J),{key:"type",label:e(v).translate("i18n_newcolumn_type"),required:""},{default:t(()=>[l(e(na),{options:Z.value,"load-data":I,"display-render":j,"allow-clear":!1,onChange:p},null,8,["options"])]),_:1},8,["label"]),l(e(J),{key:"default-value",label:e(v).translate("i18n_newcolumn_default_value"),"validate-status":q.value.status,help:q.value.message},{default:t(()=>[l(e(de),{value:m.value.default,"onUpdate:value":_[1]||(_[1]=A=>m.value.default=A),placeholder:e(v).translate("i18n_newcolumn_null_placeholder"),onInput:B},{suffix:t(()=>[q.value.fakeLoading?(a(),H(e(we),{key:0})):M("",!0),!q.value.fakeLoading&&q.value.status==="success"?(a(),H(e(Xe),{key:1,size:"18"})):M("",!0),!q.value.fakeLoading&&q.value.status==="error"?(a(),H(e(la),{key:2,size:"18"})):M("",!0)]),_:1},8,["value","placeholder"])]),_:1},8,["label","validate-status","help"]),l(e(J),{key:"nullable",label:e(v).translate("i18n_newcolumn_nullable")},{default:t(()=>[l(e(be),{checked:m.value.nullable,"onUpdate:checked":_[2]||(_[2]=A=>m.value.nullable=A)},null,8,["checked"])]),_:1},8,["label"]),l(e(J),{key:"unique",label:e(v).translate("i18n_newcolumn_unique")},{default:t(()=>[l(e(be),{checked:m.value.unique,"onUpdate:checked":_[3]||(_[3]=A=>m.value.unique=A)},null,8,["checked"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","open"]))}}),Ul={class:"icon"},Kl=G({__name:"OrderByIcon",props:{column:{},orderBy:{}},emits:["reorder"],setup(n,{emit:u}){const r=u;return(d,f)=>(a(),c("div",Ul,[n.orderBy?.column!==String(n.column.title)?(a(),H(e(za),{key:0,size:"16",onClick:f[0]||(f[0]=o=>r("reorder",String(n.column.title)))})):M("",!0),n.orderBy?.column===String(n.column.title)&&n.orderBy.direction==="asc"?(a(),H(e(Ta),{key:1,size:"16",onClick:f[1]||(f[1]=o=>r("reorder",String(n.column.title)))})):M("",!0),n.orderBy?.column===String(n.column.title)&&n.orderBy.direction==="desc"?(a(),H(e(qa),{key:2,size:"16",onClick:f[2]||(f[2]=o=>r("reorder",String(n.column.title)))})):M("",!0)]))}}),Je=ze(Kl,[["__scopeId","data-v-6ae5cef6"]]),Pl=G({__name:"TableFilter",props:{search:{},table:{},data:{}},emits:["update:search"],setup(n,{emit:u}){const r=n,d=he(),f=y(()=>r.table),{searchValue:o,filteredColumns:i,nonFilteredColumns:k,changeSearchType:S,addCondition:m,removeCondition:g,updateSearch:Z,updateConditionField:I,updateConditionValue:p,getSqlQuery:j}=Nl(f,r.search),E=[{label:v.translate("i18n_tablefilter_search"),value:"search"},{label:v.translate("i18n_tablefilter_advanced"),value:"and"}],q=y(()=>o.value.type==="and"&&o.value.conditions.some(A=>A.field===ie)),B=u;function X(A){S(A),B("update:search",o.value)}function Y(A){m(String(A)),B("update:search",o.value)}function ee(A){g(A),B("update:search",o.value)}function L(A){Z(A),B("update:search",o.value)}function C(A){I(A),B("update:search",o.value)}const _=(A,Q)=>{p(A,Q),B("update:search",o.value)};return _e(()=>r.search,A=>{o.value=A},{deep:!0}),(A,Q)=>{const ae=ea("RouterLink");return a(),H(e(O),{vertical:"",align:"start",gap:"small"},{default:t(()=>[l(e(O),{align:"center",justify:"space-between",style:{width:"100%"}},{default:t(()=>[l(e(Za),{options:E,value:e(o).type,"onUpdate:value":X},null,8,["value"]),e(o).type==="and"?(a(),H(ae,{key:0,to:{name:"sql",params:{projectId:e(d).params.projectId},query:{filter:e(j)()}}},{default:t(()=>[l(ge,{type:"text",underline:""},{default:t(()=>[R(z(e(v).translate("i18n_tablefilter_edit_as_sql")),1)]),_:1})]),_:1},8,["to"])):M("",!0)]),_:1}),e(o).type==="search"?(a(),H(e(O),{key:0},{default:t(()=>[l(e(ya),{value:e(o).q,"onUpdate:value":L},null,8,["value"])]),_:1})):e(o).type==="and"?(a(),H(e(O),{key:1,vertical:"",gap:"small"},{default:t(()=>[(a(!0),c(le,null,se(e(o).conditions,K=>(a(),H(e(O),{key:K.field,gap:"large",align:"center"},{default:t(()=>[l(e(Se),{value:K.field,"onUpdate:value":[W=>K.field=W,W=>C(K.field)],style:{width:"120px"}},{default:t(()=>[l(e(He),{label:e(v).translate("i18n_tablefilter_columns")},{default:t(()=>[(a(!0),c(le,null,se(e(i),W=>(a(),H(e(ke),{key:W.id,value:W.name},{default:t(()=>[R(z(W.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["label"]),l(e(He),{label:e(v).translate("i18n_tablefilter_expression")},{default:t(()=>[l(e(ke),{value:e(ie)},{default:t(()=>[R(z(e(v).translate("i18n_tablefilter_sql")),1)]),_:1},8,["value"])]),_:1},8,["label"])]),_:1},8,["value","onUpdate:value"]),K.field!==e(ie)?(a(),H(e(b0),{key:0})):M("",!0),l(e(de),{value:K.value,"onUpdate:value":[W=>K.value=W,W=>_(K.field,W)],style:ba({width:K.field===e(ie)?"240px":"120px"}),placeholder:K.field===e(ie)?"col1 < col2 + 2 and col3 = 1":""},null,8,["value","onUpdate:value","style","placeholder"]),l(e(_a),{style:{cursor:"pointer"},onClick:W=>ee(K.field)},null,8,["onClick"])]),_:2},1024))),128)),e(k)[0]||!q.value?(a(),H(e(O),{key:0,justify:"space-between"},{default:t(()=>[l(e(Se),{style:{width:"120px"},value:"","onUpdate:value":Y},{default:t(()=>[e(k)[0]?(a(),H(e(He),{key:0,label:e(v).translate("i18n_tablefilter_columns")},{default:t(()=>[(a(!0),c(le,null,se(e(k),K=>(a(),H(e(ke),{key:K.id,value:K.name},{default:t(()=>[R(z(K.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["label"])):M("",!0),q.value?M("",!0):(a(),H(e(He),{key:1,label:e(v).translate("i18n_tablefilter_expression")},{default:t(()=>[l(e(ke),{value:e(ie)},{default:t(()=>[R(z(e(v).translate("i18n_tablefilter_sql")),1)]),_:1},8,["value"])]),_:1},8,["label"]))]),_:1})]),_:1})):M("",!0)]),_:1})):M("",!0)]),_:1})}}}),Rl={class:"twin-container"},Ol={class:"fullwidth-input"},Wl={class:"fullwidth-input"},Gl={class:"using-container"},Ql={class:"fullwidth-input"},Jl=G({__name:"UpdateColumn",props:{open:{type:Boolean},table:{},column:{}},emits:["updated","cancel"],setup(n,{emit:u}){const r=u,d=n,o=he().params.projectId,i=U(d.column.type);aa(async()=>{if(!d.column.foreignKey)return;i.value=v.translate("i18n_updatecolumn_loading");const $=await ne.fromColumnId(o,d.column.foreignKey.columnId),h=$.getColumn(d.column.foreignKey.columnId);i.value=v.translate("i18n_updatecolumn_reference_to",null,{tableName:$.name,columnName:h.name})});const k=y(()=>d.table?.getColumns().map($=>$.record.initialState.name)||[]),S=y(()=>d.column.name===d.column.record.initialState.name?{status:"",help:""}:ra(d.column.name,k.value)),{result:m,loading:g}=xe(async()=>d.table.select({},10,0).then(({total:$})=>$));function Z(){d.column.record.resetChanges(),r("cancel")}const p=U({status:"success",message:"",fakeLoading:!1}),j=()=>{p.value.fakeLoading=!0,E()},E=$e.debounce(async()=>{if(!d.column.default){p.value.status="success",p.value.message="",p.value.fakeLoading=!1;return}const $=`select (${d.column.default})::${d.column.type} `,h=await Be.executeQuery(o,$,[]);p.value.status=h.errors.length>0?"error":"success",p.value.message=h.errors[0]||"",p.value.fakeLoading=!1},500),q=U([{value:"reference",label:"reference",isLeaf:!1},...ta.filter($=>$!==d.column.type).map($=>({value:$,label:$,isLeaf:!0}))]),B=$=>{if(!$)return;const h=$[$.length-1];switch($.length){case 0:return;case 1:h.loading=!0,ne.list(o).then(N=>{h.children=N.map(ue=>({value:ue.id,label:ue.name,isLeaf:!1})),h.loading=!1});return;case 2:h.loading=!0,ne.get(o,h.value).then(N=>{h.children=N.getColumns().map(ue=>({type:ue.type,value:ue.id,label:ue.name,isLeaf:!0})),h.loading=!1});return}},X=$=>{const h=$.selectedOptions;return h?h.length===1?h[0].label:h.length===3?v.translate("i18n_updatecolumn_reference_to",null,{tableName:h[1].label,columnName:h[2].label}):"":v.translate("i18n_updatecolumn_select_type")},Y=($,h)=>{if($){if($.length===1){d.column.type=$[0],d.column.foreignKey=null;return}if($.length===3){if(d.column.foreignKey&&d.column.foreignKey.columnId===$[2])return;const N=h[h.length-1];d.column.type=N.type,d.column.foreignKey={columnId:N.value}}}};async function ee($){await Ba(v.translate("i18n_updatecolumn_confirm_delete"))&&await L($)}async function L($){await d.table?.getColumn($)?.delete(),r("updated")}const C=()=>m.value===0||g.value?!1:d.column.record.hasChanges("type"),_=U({type:"default"}),A=()=>{d.column.type=d.column.record.initialState.type,_.value={type:"default"}};function Q($,h){return h==="varchar"||$==="int"&&h==="boolean"||$==="boolean"&&h==="int"}_e(()=>d.column.type,()=>{j(),K.value||(_.value={type:"user-defined",using:fe.value,mandatory:!0})});const K=y(()=>_.value.type==="default"&&Q(d.column.record.initialState.type,d.column.type)),W=y(()=>!Q(d.column.record.initialState.type,d.column.type));function re($){$?_.value={type:"default"}:_.value={type:"user-defined",using:fe.value,mandatory:!1}}function Ce($){if(_.value.type==="default")throw new Error("Can't change using when using default casting");_.value.using=$??""}const oe=()=>W.value?!0:C()&&_.value.type==="user-defined",fe=y(()=>`${d.column.record.initialState.name}::${d.column.type}`);async function Ze(){if(!d.column)return;let $=_.value.type==="default"?fe.value:_.value.using;m.value===0&&($=`${d.column.record.initialState.name}::text::${d.column.type}`);try{await d.column.update($),r("updated")}catch(h){h instanceof Error&&Ve("Database error",h.message)}}return($,h)=>(a(),H(e(Te),{title:e(v).translate("i18n_updatecolumn_edit_column"),width:720,open:n.open,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:Z},{extra:t(()=>[l(e(De),null,{default:t(()=>[l(e(te),{onClick:Z},{default:t(()=>[R(z(e(v).translate("i18n_updatecolumn_cancel")),1)]),_:1}),l(e(te),{type:"primary",onClick:Ze},{default:t(()=>[R(z(e(v).translate("i18n_updatecolumn_save")),1)]),_:1})]),_:1})]),footer:t(()=>[l(ge,{danger:"",onClick:h[7]||(h[7]=N=>ee(String(n.column.id)))},{default:t(()=>[R(z(e(v).translate("i18n_updatecolumn_delete")),1)]),_:1})]),default:t(()=>[l(e(qe),{model:n.column,layout:"vertical"},{default:t(()=>[l(e(J),{key:"name",label:e(v).translate("i18n_updatecolumn_name"),"validate-status":S.value.status,help:S.value.help},{default:t(()=>[l(e(de),{value:n.column.name,"onUpdate:value":h[0]||(h[0]=N=>n.column.name=N)},null,8,["value"])]),_:1},8,["label","validate-status","help"]),s("div",Rl,[s("span",Ol,[l(e(J),{key:"type",label:e(v).translate("i18n_updatecolumn_current_type")},{default:t(()=>[l(e(Se),{value:i.value,"onUpdate:value":h[1]||(h[1]=N=>i.value=N),"default-active-first-option":"",disabled:""},null,8,["value"])]),_:1},8,["label"])]),l(e(Da),{class:"right-arrow"}),s("span",Wl,[l(e(J),{key:"new-type",label:e(v).translate("i18n_updatecolumn_new_type")},{default:t(()=>[l(e(na),{options:q.value,"load-data":B,"display-render":X,"allow-clear":!0,onClear:A,onChange:Y},null,8,["options"])]),_:1},8,["label"])])]),l(e(J),{key:"default-value",label:e(v).translate("i18n_updatecolumn_default_value"),"validate-status":p.value.status,help:p.value.message},{default:t(()=>[l(e(de),{value:n.column.default,"onUpdate:value":h[2]||(h[2]=N=>n.column.default=N),placeholder:e(v).translate("i18n_updatecolumn_null_placeholder"),onInput:j},{suffix:t(()=>[p.value.fakeLoading?(a(),H(e(we),{key:0,size:"small"})):M("",!0),!p.value.fakeLoading&&p.value.status==="success"?(a(),H(e(Xe),{key:1,size:18})):M("",!0),!p.value.fakeLoading&&p.value.status==="error"?(a(),H(e(la),{key:2,size:18})):M("",!0)]),_:1},8,["value","placeholder"])]),_:1},8,["label","validate-status","help"]),s("div",Gl,[C()?(a(),H(e(J),{key:"default-casting",label:e(v).translate("i18n_updatecolumn_use_default_casting")},{default:t(()=>[l(e(be),{checked:K.value,disabled:W.value,"onUpdate:checked":h[3]||(h[3]=N=>re(!!N))},null,8,["checked","disabled"])]),_:1},8,["label"])):M("",!0),s("span",Ql,[C()?(a(),H(e(J),{key:"using",label:e(v).translate("i18n_updatecolumn_using")},{default:t(()=>[l(e(de),{value:_.value.type==="user-defined"?_.value.using:fe.value,disabled:!oe(),onInput:h[4]||(h[4]=N=>Ce(N.target.value))},null,8,["value","disabled"])]),_:1},8,["label"])):M("",!0)])]),l(e(O),null,{default:t(()=>[l(e(J),{key:"nullable",label:e(v).translate("i18n_updatecolumn_nullable")},{default:t(()=>[l(e(be),{checked:n.column.nullable,"onUpdate:checked":h[5]||(h[5]=N=>n.column.nullable=N)},null,8,["checked"])]),_:1},8,["label"]),l(e(J),{key:"unique",label:e(v).translate("i18n_updatecolumn_unique")},{default:t(()=>[l(e(be),{checked:n.column.unique,"onUpdate:checked":h[6]||(h[6]=N=>n.column.unique=N)},null,8,["checked"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","open"]))}}),Xl=ze(Jl,[["__scopeId","data-v-dd18872e"]]),Yl={style:{overflow:"hidden","white-space":"wrap"}},en={key:1},an={key:0,class:"table-row null"},tn={class:"foreign-key-popover"},ln={key:0,class:"popover-loading"},nn={class:"field-label"},rn={class:"foreign-key-popover"},on={key:0,class:"popover-loading"},un={class:"field-label"},sn={class:"field-value"},dn={key:2,class:"foreign-key-error"},cn={key:1,class:"field-value"},mn={key:2,class:"foreign-key-error"},fn={class:"button-container"},pn={class:"button-container"},vn={class:"button-container"},gn={class:"button-container"},hn=G({__name:"TableData",props:{table:{},loading:{type:Boolean}},emits:["refresh"],setup(n,{emit:u}){const r=n,d=u,f=U(1),o=U(10),i=y(()=>({total:re.value?.total??0,current:f.value,pageSize:o.value,totalBoundaryShowSizeChanger:10,showSizeChanger:!0,pageSizeOptions:["10","25","50","100"],onChange:async(b,V)=>{f.value=b,o.value=V,await oe()}})),k=U([]),S=U(!1),m=U(null),g=U(null),Z=U(!1),I=U(null),p=he(),j=Ye(),E=U(typeof p.query.q=="string"?p.query.q:""),q=y(()=>{try{return JSON.parse(p.query.where)}catch{return{}}}),B=U(Object.keys(q.value).length>0?{type:"and",conditions:Object.entries(q.value).reduce((b,[V,x])=>[...b,{type:"eq",field:V,value:x}],[])}:{type:"search",q:E.value}),X=y(()=>B.value.type==="search"?B.value.q:""),Y=y(()=>B.value.type==="search"?{}:B.value.conditions.reduce((b,V)=>{const x=V.field===ie&&!V.value?"true":V.value;return{...b,[V.field]:x}},{}));function ee(b){b.type==="search"?j.replace({query:{q:b.q}}):j.replace({query:{where:JSON.stringify(Y.value)}}),f.value=1,oe()}const L=U({type:"idle"});function C(){L.value={type:"idle"}}async function _(){C(),d("refresh")}_e(()=>r.table,()=>{ua(),oe()});function A(){L.value={type:"creating"}}const Q=b=>{if(!r.table)throw new Error("Table not found");L.value={type:"editing",column:r.table.getColumn(b)}},ae=U(null),K=b=>{ae.value?.column===b?ae.value={column:b,direction:ae.value.direction==="asc"?"desc":"asc"}:ae.value={column:b,direction:"asc"},oe()},W=y(()=>re.value?.rows.length===1),{result:re,loading:Ce,refetch:oe}=xe(async()=>{const[{rows:b,total:V},x]=await Promise.all([r.table.select(Y.value,(f.value-1)*o.value,o.value,X.value,ae.value||void 0),Promise.all(r.table.getColumns().filter(w=>w.foreignKey).map(w=>ne.fromColumnId(p.params.projectId,w.foreignKey.columnId).then(P=>[w.name,P])))]);return{rows:b,total:V,columns:x.reduce((w,[P,F])=>({...w,[P]:F}),{})}}),fe=(b,V)=>{const x=r.table?.getColumns().find(F=>F.name===b);if(!x)return"";const w=re.value?.columns[x.name],P=w?.getColumns().find(F=>F.id===x.foreignKey?.columnId);return!w||!P?"":{name:"tableEditor",params:{projectId:p.params.projectId,tableId:w.id},query:{where:JSON.stringify({[P.name]:V})}}},Ze=async(b,V)=>{S.value=!0,m.value=null,g.value=null;try{const x=r.table?.getColumns().find(T=>T.name===b);if(!x||!x.foreignKey)return;const w=await Pe.fromID(p.params.projectId,x.foreignKey.columnId),P=await ne.get(p.params.projectId,w.tableId),F=await P.select({[w.name]:V},0,1,"");F.rows.length>0&&(m.value=F.rows[0],g.value=P)}catch(x){console.error("Error loading foreign key data:",x)}finally{S.value=!1}},$=b=>g.value?!!g.value.getColumns().find(x=>x.name===b)?.foreignKey:!1,h=async(b,V)=>{if(g.value){Z.value=!0,I.value=null;try{const x=g.value.getColumns().find(T=>T.name===b);if(!x||!x.foreignKey)return;const w=await Pe.fromID(p.params.projectId,x.foreignKey.columnId),F=await(await ne.get(p.params.projectId,w.tableId)).select({[w.name]:V},0,1,"");F.rows.length>0&&(I.value=F.rows[0])}catch(x){console.error("Error loading nested foreign key data:",x)}finally{Z.value=!1}}},N=(b,V)=>{L.value.type==="adding"&&(L.value.editableItem[b]=V)},ue=(b,V)=>{L.value.type==="adding"&&(L.value.editableItem[b]=V?null:"")},je=()=>[...r.table.getColumns().map(b=>({key:b.id??"",title:b.name,dataIndex:b.name,width:220,resizable:!0,ellipsis:!1})),{key:"action",title:"",fixed:"right",width:100,align:"center",resizable:!1,ellipsis:!1}],oa=je(),pe=U(oa),ua=()=>pe.value=je();function ia(b,V){const x=V;if(!x?.key)return;const w=pe.value.findIndex(P=>P.key===x.key);w!==-1&&(pe.value[w].width=b)}const Ae=y(()=>re.value?.rows.map(b=>({key:b.id,...b}))||[]);let sa=Ha(r.table?.getUnprotectedColumns().reduce((b,V)=>({...b,[V.name]:""}),{}));const Me=U(!1);async function da(){if(!(!r.table||!sa||L.value.type!=="adding")){Me.value=!0;try{L.value.editableItem.id&&(typeof L.value.editableItem.id=="string"||typeof L.value.editableItem.id=="number")?await r.table.updateRow(L.value.editableItem.id.toString(),L.value.editableItem):await r.table.insertRow(L.value.editableItem),oe(),C()}catch(b){b instanceof Error&&Ve("Database error",b.message)}finally{Me.value=!1}}}const ca=async b=>{if(!(!re.value||!re.value.rows.find(V=>V.id===b)))try{await r.table.deleteRow(b),W.value&&(f.value=Math.max(1,f.value-1)),oe()}catch(V){V instanceof Error&&Ve("Database error",V.message)}},ma=b=>{const V=Ae.value?.filter(T=>b===T.key)[0],x=r.table.getColumns(),w=x.map(T=>T.name),P=x.filter(T=>T.type==="json").map(T=>T.name),F=$e.pick($e.cloneDeep(V),w);P.forEach(T=>{F[T]&&(F[T]=JSON.stringify(F[T]))}),L.value={type:"adding",editableItem:F}};return(b,V)=>{const x=ea("RouterLink");return a(),H(Le,{"full-width":""},{default:t(()=>[l(e(O),{justify:"space-between",style:{"margin-bottom":"16px"},gap:"middle"},{default:t(()=>[l(Pl,{search:B.value,"onUpdate:search":[V[0]||(V[0]=w=>B.value=w),ee],table:n.table,data:Ae.value},null,8,["search","table","data"]),l(e(O),{justify:"flex-end",gap:"middle"},{default:t(()=>[l(ge,{type:"primary",onClick:A},{default:t(()=>[l(e(ut)),R(z(e(v).translate("i18n_tabledata_create_column")),1)]),_:1}),pe.value.length===3?(a(),H(e(ye),{key:0,title:e(v).translate("i18n_tabledata_create_column_first")},{default:t(()=>[l(ge,{disabled:!0,onClick:V[1]||(V[1]=w=>L.value={type:"adding",editableItem:{}})},{default:t(()=>[l(e(Ge)),R(z(e(v).translate("i18n_tabledata_add_data")),1)]),_:1})]),_:1},8,["title"])):(a(),H(ge,{key:1,onClick:V[2]||(V[2]=w=>L.value={type:"adding",editableItem:{}})},{default:t(()=>[l(e(Ge)),R(z(e(v).translate("i18n_tabledata_add_data")),1)]),_:1}))]),_:1})]),_:1}),l(e(Va),{columns:pe.value,"data-source":Ae.value,pagination:i.value,bordered:"",loading:e(Ce)||n.loading,scroll:{x:1e3,y:720},size:"small",onResizeColumn:ia},{headerCell:t(({column:w})=>[w.title!=="id"&&w.title!=="created_at"&&w.key!=="action"?(a(),H(e(O),{key:0,align:"center",justify:"space-between",gap:"small"},{default:t(()=>[l(e(O),{style:{overflow:"hidden","white-space":"wrap"},align:"center",gap:"small"},{default:t(()=>[s("span",Yl,z(w.title),1),l(e(O),null,{default:t(()=>[l(Je,{column:w,"order-by":ae.value,onReorder:K},null,8,["column","order-by"])]),_:2},1024)]),_:2},1024),l(ge,{type:"text",onClick:P=>Q(String(w.key))},{default:t(()=>[l(e(xa),{size:"18"})]),_:1},8,["onClick"])]),_:2},1024)):(a(),c("span",en,[l(e(O),{align:"center",gap:"small"},{default:t(()=>[R(z(w.title)+" ",1),w.key!=="action"?(a(),H(Je,{key:0,column:w,"order-by":ae.value,onReorder:K},null,8,["column","order-by"])):M("",!0)]),_:2},1024)]))]),bodyCell:t(({column:w,text:P,record:F})=>[pe.value.map(T=>T.title).includes(w.dataIndex)?(a(),c(le,{key:0},[P===null?(a(),c("div",an,z(e(v).translate("i18n_tabledata_null")),1)):n.table.getColumns().find(T=>T.name===w.dataIndex)?.foreignKey?(a(),H(e(Ee),{key:1,trigger:["hover"],placement:"right",onMouseenter:T=>Ze(w.dataIndex,P)},{content:t(()=>[s("div",tn,[S.value?(a(),c("div",ln,[l(e(we),{size:"small"})])):m.value&&g.value?(a(!0),c(le,{key:1},se(m.value,(T,ve)=>(a(),c("div",{key:ve,class:"foreign-key-field"},[s("div",nn,z(ve),1),$(ve)&&T!==null?(a(),H(e(Ee),{key:0,trigger:["hover"],placement:"right",onMouseenter:Ie=>h(ve,T)},{content:t(()=>[s("div",rn,[Z.value?(a(),c("div",on,[l(e(we),{size:"small"})])):I.value?(a(!0),c(le,{key:1},se(I.value,(Ie,Ne)=>(a(),c("div",{key:Ne,class:"foreign-key-field"},[s("div",un,z(Ne),1),s("div",sn,z(Ie!==null?Ie:""),1)]))),128)):(a(),c("div",dn,z(e(v).translate("i18n_tabledata_failed_to_load")),1))])]),default:t(()=>[l(e(Ue),{class:"nested-fk-tag",color:"blue"},{default:t(()=>[R(z(T),1)]),_:2},1024)]),_:2},1032,["onMouseenter"])):(a(),c("div",cn,z(T!==null?T:""),1))]))),128)):(a(),c("div",mn,z(e(v).translate("i18n_tabledata_failed_to_load")),1))])]),default:t(()=>[l(e(Ue),{color:"blue",class:"foreign-key-tag"},{default:t(()=>[l(x,{to:fe(w.dataIndex,P),target:"_blank",class:"foreign-key-link"},{default:t(()=>[R(z(P),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2},1032,["onMouseenter"])):(a(),c("div",{key:2,class:ka(["table-row",{expanded:k.value.includes(F.id)}])},z(P),3))],64)):M("",!0),w.key==="action"?(a(),H(e(O),{key:1,gap:"small",justify:"center"},{default:t(()=>[k.value.includes(F.id)?(a(),H(e(te),{key:0,class:"icons",onClick:T=>k.value=k.value.filter(ve=>ve!==F.id)},{icon:t(()=>[l(e(ye),{title:e(v).translate("i18n_tabledata_collapse")},{default:t(()=>[s("div",fn,[l(e(Mt),{size:15})])]),_:1},8,["title"])]),_:1},8,["onClick"])):(a(),H(e(te),{key:1,onClick:T=>k.value.push(F.id)},{icon:t(()=>[l(e(ye),{title:e(v).translate("i18n_tabledata_expand")},{default:t(()=>[s("div",pn,[l(e(Jt),{size:15})])]),_:1},8,["title"])]),_:1},8,["onClick"])),l(e(te),{onClick:T=>ma(F.id)},{icon:t(()=>[l(e(ye),{title:e(v).translate("i18n_tabledata_edit")},{default:t(()=>[s("div",vn,[l(e(il),{size:15})])]),_:1},8,["title"])]),_:1},8,["onClick"]),l(e($a),{title:e(v).translate("i18n_tabledata_sure_to_delete"),onConfirm:T=>ca(F.id)},{default:t(()=>[l(e(te),null,{icon:t(()=>[l(e(ye),{title:e(v).translate("i18n_tabledata_delete")},{default:t(()=>[s("div",gn,[l(e(wa),{size:15})])]),_:1},8,["title"])]),_:1})]),_:1},8,["title","onConfirm"])]),_:2},1024)):M("",!0)]),_:1},8,["columns","data-source","pagination","loading"]),L.value.type==="adding"?(a(),H(Fl,{key:0,open:L.value.type==="adding",table:r.table,"editable-item":L.value.editableItem,loading:Me.value,onUpdateNullable:ue,onRecordChange:N,onClose:C,onCancel:C,onSave:da},null,8,["open","table","editable-item","loading"])):M("",!0),L.value.type==="creating"?(a(),H(El,{key:1,open:L.value.type==="creating",table:r.table,onClose:C,onCancel:C,onCreated:_},null,8,["open","table"])):M("",!0),L.value.type==="editing"?(a(),H(Xl,{key:2,open:L.value.type==="editing",column:L.value.column,table:n.table,onUpdated:_,onClose:C,onCancel:C},null,8,["open","column","table"])):M("",!0)]),_:1})}}}),s1=G({__name:"TableEditor",setup(n){const u=he(),r=Ke(()=>{if(typeof u.params.tableId=="string")return u.params.tableId;throw new Error("tableId is not a string")}),d=Ke(()=>{if(typeof u.params.projectId=="string")return u.params.projectId;throw new Error("projectId is not a string")}),{result:f,loading:o,refetch:i}=xe(()=>Promise.all([Be.get(d.value).then(async m=>{const g=await Aa.get(m.organizationId),p=(await new Ia().list(g.id)).find(j=>j.id===m.folderId);if(!p)throw new Error("Folder not found");return{project:m,organization:g,folder:p}}),ne.get(d.value,r.value)]).then(([{project:m,organization:g,folder:Z},I])=>({project:m,organization:g,folder:Z,table:I})));_e([r,d],()=>i());const k=y(()=>!o.value&&f.value?[{label:f.value.organization.name,type:"organization-switcher",organizationId:f.value.organization.id},{label:f.value.folder.name,path:`/organizations/${f.value.organization.id}#${f.value.folder.id}`},{label:f.value.project.name,path:`/projects/${f.value.project.id}`},{label:v.translate("i18n_projectview_tables"),path:`/projects/${f.value.project.id}/tables`},{label:f.value.table.name,type:"editable"}]:void 0);function S({index:m,label:g}){m===4&&f.value&&(f.value.table.name=g,f.value.table.save())}return aa(()=>{const m=Fe.subscribe("columnCreated",({tableId:g})=>{g===r.value&&i()});Ca(()=>Fe.unsubscribe(m))}),(m,g)=>(a(),H(pa,{key:r.value},{navbar:t(()=>[l(ja,{breadcrumb:k.value,"show-ai-sparkles":"","onUpdate:breadcrumbLabel":S},null,8,["breadcrumb"])]),content:t(()=>[e(f)?(a(),H(hn,{key:0,loading:e(o),table:e(f).table,onRefresh:g[0]||(g[0]=Z=>e(i)())},null,8,["loading","table"])):M("",!0),e(f)?(a(),H(Bl,{key:1,table:e(f).table},null,8,["table"])):M("",!0)]),chat:t(()=>[l(fa)]),_:1}))}});export{s1 as default};
//# sourceMappingURL=TableEditor-z8SY3m9X.js.map
