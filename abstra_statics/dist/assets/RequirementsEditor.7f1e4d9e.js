import{C as ie}from"./ContentLayout.0ff89c94.js";import{C as le}from"./CrudView.5e2b55fd.js";import{a as se}from"./asyncComputed.82e95638.js";import{d as Y,al as z,c as R,o as l,W as u,Y as ae,h as x,e6 as ne,e as w,ad as j,r as F,k as oe,ap as re,a as m,b as i,f as a,u as t,db as v,eX as E,d7 as k,g as r,ec as L,bQ as D,A as de,d6 as ue,aQ as W,eb as q,S as G,eY as O,ef as Q,M as ce,et as I}from"./jwt-decode.esm.d8763b5b.js";import{u as me}from"./polling.92851069.js";import"./linters.17034461.js";import{R as M}from"./requirements.f30bb9d7.js";import{W as pe}from"./workspaces.de471929.js";import{o as U}from"./omniChatStore.b69b1ac5.js";import"./router.f6d1d2b0.js";import"./gateway.ecde0932.js";import"./popupNotifcation.7f1daeb6.js";import"./DocsButton.vue_vue_type_script_setup_true_lang.847544bc.js";import"./constants.a1417080.js";import"./url.b9e61201.js";import"./PhDotsThreeVertical.vue.81a7dc15.js";import"./Badge.8e0c0079.js";import"./index.f7eb7d63.js";import"./index.ce13c44a.js";import"./record.19092615.js";import"./runnerData.8197ed0d.js";import"./colorHelpers.aaea5d39.js";(function(){try{var p=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},g=new Error().stack;g&&(p._sentryDebugIds=p._sentryDebugIds||{},p._sentryDebugIds[g]="b5e77cb1-f9f7-4507-9091-fadd8fcfacb2",p._sentryDebugIdIdentifier="sentry-dbid-b5e77cb1-f9f7-4507-9091-fadd8fcfacb2")}catch{}})();const ge=["width","height","fill","transform"],fe={key:0},be=w("path",{d:"M120,137,48,201A12,12,0,1,1,32,183l61.91-55L32,73A12,12,0,1,1,48,55l72,64A12,12,0,0,1,120,137Zm96,43H120a12,12,0,0,0,0,24h96a12,12,0,0,0,0-24Z"},null,-1),ye=[be],he={key:1},_e=w("path",{d:"M216,80V192H40V64H200A16,16,0,0,1,216,80Z",opacity:"0.2"},null,-1),ve=w("path",{d:"M117.31,134l-72,64a8,8,0,1,1-10.63-12L100,128,34.69,70A8,8,0,1,1,45.32,58l72,64a8,8,0,0,1,0,12ZM216,184H120a8,8,0,0,0,0,16h96a8,8,0,0,0,0-16Z"},null,-1),ke=[_e,ve],xe={key:2},we=w("path",{d:"M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40ZM77.66,173.66a8,8,0,0,1-11.32-11.32L100.69,128,66.34,93.66A8,8,0,0,1,77.66,82.34l40,40a8,8,0,0,1,0,11.32ZM192,176H128a8,8,0,0,1,0-16h64a8,8,0,0,1,0,16Z"},null,-1),Ce=[we],Ae={key:3},Ve=w("path",{d:"M116,132.48l-72,64a6,6,0,0,1-8-9L103,128,36,68.49a6,6,0,0,1,8-9l72,64a6,6,0,0,1,0,9ZM216,186H120a6,6,0,0,0,0,12h96a6,6,0,0,0,0-12Z"},null,-1),Me=[Ve],Re={key:4},Ze=w("path",{d:"M117.31,134l-72,64a8,8,0,1,1-10.63-12L100,128,34.69,70A8,8,0,1,1,45.32,58l72,64a8,8,0,0,1,0,12ZM216,184H120a8,8,0,0,0,0,16h96a8,8,0,0,0,0-16Z"},null,-1),ze=[Ze],Le={key:5},Se=w("path",{d:"M116,128a4,4,0,0,1-1.34,3l-72,64a4,4,0,1,1-5.32-6L106,128,37.34,67a4,4,0,0,1,5.32-6l72,64A4,4,0,0,1,116,128Zm100,60H120a4,4,0,0,0,0,8h96a4,4,0,0,0,0-8Z"},null,-1),He=[Se],Be={name:"PhTerminal"},Ie=Y({...Be,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(p){const g=p,y=z("weight","regular"),f=z("size","1em"),S=z("color","currentColor"),H=z("mirrored",!1),h=R(()=>{var o;return(o=g.weight)!=null?o:y}),b=R(()=>{var o;return(o=g.size)!=null?o:f}),_=R(()=>{var o;return(o=g.color)!=null?o:S}),Z=R(()=>g.mirrored!==void 0?g.mirrored?"scale(-1, 1)":void 0:H?"scale(-1, 1)":void 0);return(o,N)=>(l(),u("svg",ne({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:b.value,height:b.value,fill:_.value,transform:Z.value},o.$attrs),[ae(o.$slots,"default"),h.value==="bold"?(l(),u("g",fe,ye)):h.value==="duotone"?(l(),u("g",he,ke)):h.value==="fill"?(l(),u("g",xe,Ce)):h.value==="light"?(l(),u("g",Ae,Me)):h.value==="regular"?(l(),u("g",Re,ze)):h.value==="thin"?(l(),u("g",Le,He)):x("",!0)],16,ge))}}),Ne=p=>["__future__","__main__","_thread","abc","aifc","argparse","array","ast","asynchat","asyncio","asyncore","atexit","audioop","base64","bdb","binascii","binhex","bisect","builtins","bz2","calendar","cgi","cgitb","chunk","cmath","cmd","code","codecs","codeop","collections","collections.abc","colorsys","compileall","concurrent","concurrent.futures","configparser","contextlib","contextvars","copy","copyreg","cProfile","crypt","csv","ctypes","curses","curses.ascii","curses.panel","curses.textpad","dataclasses","datetime","dbm","dbm.dumb","dbm.gnu","dbm.ndbm","decimal","difflib","dis","distutils","distutils.archive_util","distutils.bcppcompiler","distutils.ccompiler","distutils.cmd","distutils.command","distutils.command.bdist","distutils.command.bdist_dumb","distutils.command.bdist_msi","distutils.command.bdist_packager","distutils.command.bdist_rpm","distutils.command.build","distutils.command.build_clib","distutils.command.build_ext","distutils.command.build_py","distutils.command.build_scripts","distutils.command.check","distutils.command.clean","distutils.command.config","distutils.command.install","distutils.command.install_data","distutils.command.install_headers","distutils.command.install_lib","distutils.command.install_scripts","distutils.command.register","distutils.command.sdist","distutils.core","distutils.cygwinccompiler","distutils.debug","distutils.dep_util","distutils.dir_util","distutils.dist","distutils.errors","distutils.extension","distutils.fancy_getopt","distutils.file_util","distutils.filelist","distutils.log","distutils.msvccompiler","distutils.spawn","distutils.sysconfig","distutils.text_file","distutils.unixccompiler","distutils.util","distutils.version","doctest","email","email.charset","email.contentmanager","email.encoders","email.errors","email.generator","email.header","email.headerregistry","email.iterators","email.message","email.mime","email.parser","email.policy","email.utils","encodings","encodings.idna","encodings.mbcs","encodings.utf_8_sig","ensurepip","enum","errno","faulthandler","fcntl","filecmp","fileinput","fnmatch","fractions","ftplib","functools","gc","getopt","getpass","gettext","glob","graphlib","grp","gzip","hashlib","heapq","hmac","html","html.entities","html.parser","http","http.client","http.cookiejar","http.cookies","http.server","idlelib","imaplib","imghdr","imp","importlib","importlib.abc","importlib.machinery","importlib.metadata","importlib.resources","importlib.util","inspect","io","ipaddress","itertools","json","json.tool","keyword","lib2to3","linecache","locale","logging","logging.config","logging.handlers","lzma","mailbox","mailcap","marshal","math","mimetypes","mmap","modulefinder","msilib","msvcrt","multiprocessing","multiprocessing.connection","multiprocessing.dummy","multiprocessing.managers","multiprocessing.pool","multiprocessing.shared_memory","multiprocessing.sharedctypes","netrc","nis","nntplib","numbers","operator","optparse","os","os.path","ossaudiodev","pathlib","pdb","pickle","pickletools","pipes","pkgutil","platform","plistlib","poplib","posix","pprint","profile","pstats","pty","pwd","py_compile","pyclbr","pydoc","queue","quopri","random","re","readline","reprlib","resource","rlcompleter","runpy","sched","secrets","select","selectors","shelve","shlex","shutil","signal","site","smtpd","smtplib","sndhdr","socket","socketserver","spwd","sqlite3","ssl","stat","statistics","string","stringprep","struct","subprocess","sunau","symtable","sys","sysconfig","syslog","tabnanny","tarfile","telnetlib","tempfile","termios","test","test.support","test.support.bytecode_helper","test.support.import_helper","test.support.os_helper","test.support.script_helper","test.support.socket_helper","test.support.threading_helper","test.support.warnings_helper","textwrap","threading","time","timeit","tkinter","tkinter.colorchooser","tkinter.commondialog","tkinter.dnd","tkinter.filedialog","tkinter.font","tkinter.messagebox","tkinter.scrolledtext","tkinter.simpledialog","tkinter.tix","tkinter.ttk","token","tokenize","trace","traceback","tracemalloc","tty","turtle","turtledemo","types","typing","unicodedata","unittest","unittest.mock","urllib","urllib.error","urllib.parse","urllib.request","urllib.response","urllib.robotparser","uu","uuid","venv","warnings","wave","weakref","webbrowser","winreg","winsound","wsgiref","wsgiref.handlers","wsgiref.headers","wsgiref.simple_server","wsgiref.util","wsgiref.validate","xdrlib","xml","xml.dom","xml.dom.minidom","xml.dom.pulldom","xml.etree.ElementTree","xml.parsers.expat","xml.parsers.expat.errors","xml.parsers.expat.model","xml.sax","xml.sax.handler","xml.sax.saxutils","xml.sax.xmlreader","xmlrpc","xmlrpc.client","xmlrpc.server","zipapp","zipfile","zipimport","zlib","zoneinfo"].includes(p),Pe=p=>/^(\d+!)?(\d+)(\.\d+)+([\\.\-\\_])?((a(lpha)?|b(eta)?|c|r(c|ev)?|pre(view)?)\d*)?(\.?(post|dev)\d*)?$/.test(p),$e={key:2},Te={key:0,class:"logs-output"},je=["textContent"],dt=Y({__name:"RequirementsEditor",setup(p){const{loading:g,result:y,refetch:f}=se(()=>Promise.all([M.list(),M.recommendations()]).then(([e,s])=>({requirements:e,recommendations:s}))),{startPolling:S,endPolling:H}=me({task:f,interval:2e3});function h(){pe.openFile("requirements.txt")}const b=j({}),_=j(new Set);function Z(e){return s=>{b[e.name]?b[e.name]=[...b[e.name],s]:b[e.name]=[s]}}function o(e){b[e.name]=[]}async function N(e){o(e),c.value="installing",B(e),_.add(e.name);try{await M.install(Z(e)),c.value="install-success"}catch{c.value="install-error"}finally{_.delete(e.name),await f()}}const c=F("idle"),C=F(null);function B(e){C.value=e.name}async function P(e){_.add(e.name);try{await e.delete()}finally{_.delete(e.name),await f()}}async function X(e){o(e),c.value="uninstalling",B(e),_.add(e.name);try{await e.uninstall(Z(e)),c.value="uninstall-success"}catch{c.value="uninstall-error"}finally{_.delete(e.name),await f()}}async function J(e,s){await M.create(e,s).then(f),f()}const K=[{label:"Name",key:"name",hint:e=>Ne(e)?"This requirement is built-in should not be installed":void 0},{label:"Required version",key:"version",placeholder:"latest",hint:e=>!e||Pe(e)?void 0:"Invalid version"}];async function ee({name:e,version:s}){await M.create(e,s),f()}const te=R(()=>{var e,s;return{columns:[{title:"Name"},{title:"Version"},{title:"Installed"},{title:"",align:"right"}],rows:(s=(e=y.value)==null?void 0:e.requirements.map(n=>{var A,V;return{key:n.name,cells:[{type:"text",text:n.name},{type:"text",text:(A=n.version)!=null?A:" - "},{type:"slot",key:"status",payload:n},{type:"actions",actions:[{icon:Ie,label:"Logs",onClick:()=>B(n),hide:!((V=b[n.name])!=null&&V.length)},n.installedVersion?{icon:I,label:"Remove",onClick:()=>P(n),dangerous:!0}:{icon:E,label:"Install",onClick:()=>N(n)},n.installedVersion?{icon:I,label:"Remove and uninstall",onClick:()=>X(n),dangerous:!0}:{icon:I,label:"Remove",onClick:()=>P(n),dangerous:!0}]}]}}))!=null?s:[]}});return oe(()=>{S();const e=U.subscribe("packageInstalled",()=>{f()});re(()=>{H(),U.unsubscribe(e)})}),(e,s)=>(l(),m(ie,null,{default:i(()=>{var n,A,V;return[a(le,{"entity-name":"Requirements",loading:t(g),title:"Requirements",description:"Specify pip requirements for your project. This will create and update your requirements.txt file.","empty-title":"No python requirements set",table:te.value,"create-button-text":"Add requirement",fields:K,live:"",create:ee},{status:i(({payload:d})=>[a(t(v),{gap:"small",align:"center",justify:"center"},{default:i(()=>[d.installedVersion?(l(),m(t(E),{key:0})):x("",!0),d.installedVersion?(l(),m(t(k),{key:1,type:"secondary"},{default:i(()=>[r(L(d.installedVersion),1)]),_:2},1024)):(l(),m(t(k),{key:2,type:"secondary"},{default:i(()=>[r(" Not installed ")]),_:1}))]),_:2},1024)]),secondary:i(()=>[a(t(D),{onClick:s[0]||(s[0]=d=>h())},{default:i(()=>[r("Open requirements.txt")]),_:1})]),_:1},8,["loading","table"]),(n=t(y))!=null&&n.recommendations.length?(l(),m(t(de),{key:0},{default:i(()=>[r(" Suggested requirements ")]),_:1})):x("",!0),(A=t(y))!=null&&A.recommendations.length?(l(),m(t(ue),{key:1},{default:i(()=>[r(" The following requirements are being utilized by your code but are not listed in your requirements.txt. ")]),_:1})):x("",!0),(V=t(y))!=null&&V.recommendations.length?(l(),u("ul",$e,[(l(!0),u(W,null,q(t(y).recommendations,d=>(l(),u("li",{key:d.name},[r(L(d.name)+" ("+L(d.version)+") ",1),a(t(D),{onClick:$=>{var T;return J(d.name,(T=d.version)!=null?T:void 0)}},{default:i(()=>[r(" Add to requirements ")]),_:2},1032,["onClick"])]))),128))])):x("",!0),a(t(ce),{open:!!C.value,onCancel:s[1]||(s[1]=d=>C.value=null)},{footer:i(()=>[]),title:i(()=>[r("Logs")]),default:i(()=>[a(t(v),{vertical:"",gap:"small"},{default:i(()=>[C.value?(l(),u("div",Te,[(l(!0),u(W,null,q(b[C.value],(d,$)=>(l(),u("pre",{key:$,textContent:L(d)},null,8,je))),128))])):x("",!0),c.value==="installing"?(l(),m(t(v),{key:1,gap:"small",align:"center"},{default:i(()=>[a(t(G)),a(t(k),{type:"secondary"},{default:i(()=>[r("Installing requirement...")]),_:1})]),_:1})):c.value==="uninstalling"?(l(),m(t(v),{key:2,gap:"small",align:"center"},{default:i(()=>[a(t(G)),a(t(k),{type:"secondary"},{default:i(()=>[r("Uninstalling requirement...")]),_:1})]),_:1})):c.value==="install-success"?(l(),m(t(v),{key:3,gap:"small",align:"center"},{default:i(()=>[a(t(O)),a(t(k),{type:"success"},{default:i(()=>[r("Requirement installed successfully")]),_:1})]),_:1})):c.value==="install-error"?(l(),m(t(v),{key:4,gap:"small",align:"center"},{default:i(()=>[a(t(Q)),a(t(k),{type:"danger"},{default:i(()=>[r("Requirement installation failed")]),_:1})]),_:1})):c.value==="uninstall-success"?(l(),m(t(v),{key:5,gap:"small",align:"center"},{default:i(()=>[a(t(O)),a(t(k),{type:"success"},{default:i(()=>[r("Requirement uninstalled successfully")]),_:1})]),_:1})):c.value==="uninstall-error"?(l(),m(t(v),{key:6,gap:"small",align:"center"},{default:i(()=>[a(t(Q)),a(t(k),{type:"danger"},{default:i(()=>[r("Requirement uninstallation failed")]),_:1})]),_:1})):x("",!0)]),_:1})]),_:1},8,["open"])]}),_:1}))}});export{dt as default};
//# sourceMappingURL=RequirementsEditor.7f1e4d9e.js.map
