import{_ as de}from"./AbstraButton.vue_vue_type_script_setup_true_lang.f540b263.js";import{B as va}from"./BaseLayout.a3f89c19.js";import{H as ea,u as fa,o as Re}from"./omniChatStore.ce66300c.js";import{a as Se}from"./asyncComputed.86f36fe5.js";import{d as Q,at as D,c as y,o as a,ac as d,ae as me,h as z,ew as ve,e as i,eA as ge,ec as xe,u as e,a as w,b as l,f as n,g as O,t as q,i as h,df as pa,eB as oe,dj as W,aY as le,_ as Le,bY as te,cE as Y,bQ as ce,eI as ga,bT as ha,cD as ze,r as F,w as be,eH as He,S as $e,c$ as ye,j as Be,cI as ya,cY as Ue,aI as Me,eR as ba,U as aa,al as _a,b0 as he,cS as Ee,d9 as Ke,ez as Ha,cR as $a,eL as ka,d0 as Va,bG as Pe,ax as wa,M as Za}from"./jwt-decode.esm.3f85b5bd.js";import{G as Aa}from"./PhSparkle.vue.1855e14b.js";import{d as Te,p as ke,j as Ca}from"./router.15a12e65.js";import{a as Ma}from"./organization.bb069730.js";import{a as qe}from"./project.9dbef88d.js";import{p as ta,T as re,d as Ia,C as Oe}from"./tables.42ba584a.js";import{F as Sa}from"./folder.9ac6efaa.js";import{_ as xa}from"./ConsoleOmniChat.vue_vue_type_script_setup_true_lang.a3b58583.js";import{C as Ie}from"./ContentLayout.dcc59308.js";import{F as La}from"./PhArrowSquareOut.vue.33373d1d.js";import{u as za}from"./useTables.7867cd37.js";import{C as We,S as Ge}from"./Card.8d826208.js";import{F as Ba}from"./PhGear.vue.a1790fda.js";import{b as De,B as Ta,A as qa}from"./index.c0e60a0a.js";import{I as la,F as Da,a as ja,G as Na}from"./PhWarningCircle.vue.cc46c542.js";import{A as na}from"./index.0ddbbe2b.js";import{F as Fa}from"./PhArrowUp.vue.302de44f.js";import{a as Ra}from"./ant-design.cfc322f7.js";import{A as Ua}from"./index.73a6f95e.js";import"./record.1428e774.js";import"./uuid.631fd935.js";import"./PhCopySimple.vue.b75f6d7e.js";import"./index.9bf11922.js";import"./string.9fda8d6f.js";import"./OmniChat.5d7e9db4.js";import"./AbstraLogo.vue_vue_type_script_setup_true_lang.76eea27b.js";import"./Logo.26a483eb.js";import"./PhClockCounterClockwise.vue.9bc8a2af.js";import"./LoadingOutlined.4b6b6325.js";import"./file.27d7cfff.js";import"./PhDatabase.vue.c52ef834.js";import"./index.8b0cec7f.js";import"./index.9790290f.js";(function(){try{var o=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c=new Error().stack;c&&(o._sentryDebugIds=o._sentryDebugIds||{},o._sentryDebugIds[c]="a8c884ec-7808-4e2b-ad79-9753623ba3df",o._sentryDebugIdIdentifier="sentry-dbid-a8c884ec-7808-4e2b-ad79-9753623ba3df")}catch{}})();const Ea=["width","height","fill","transform"],Ka={key:0},Pa=i("path",{d:"M80,28H56A20,20,0,0,0,36,48V208a20,20,0,0,0,20,20H80a20,20,0,0,0,20-20V48A20,20,0,0,0,80,28ZM76,204H60V52H76ZM156,28H132a20,20,0,0,0-20,20V208a20,20,0,0,0,20,20h24a20,20,0,0,0,20-20V48A20,20,0,0,0,156,28Zm-4,176H136V52h16Zm100-76a12,12,0,0,1-12,12h-8v8a12,12,0,0,1-24,0v-8h-8a12,12,0,0,1,0-24h8v-8a12,12,0,0,1,24,0v8h8A12,12,0,0,1,252,128Z"},null,-1),Oa=[Pa],Wa={key:1},Ga=i("path",{d:"M88,48V208a8,8,0,0,1-8,8H56a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8H80A8,8,0,0,1,88,48Zm64-8H128a8,8,0,0,0-8,8V208a8,8,0,0,0,8,8h24a8,8,0,0,0,8-8V48A8,8,0,0,0,152,40Z",opacity:"0.2"},null,-1),Qa=i("path",{d:"M80,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H80a16,16,0,0,0,16-16V48A16,16,0,0,0,80,32Zm0,176H56V48H80ZM152,32H128a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V48A16,16,0,0,0,152,32Zm0,176H128V48h24Zm96-80a8,8,0,0,1-8,8H224v16a8,8,0,0,1-16,0V136H192a8,8,0,0,1,0-16h16V104a8,8,0,0,1,16,0v16h16A8,8,0,0,1,248,128Z"},null,-1),Ja=[Ga,Qa],Ya={key:2},Xa=i("path",{d:"M96,48V208a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V48A16,16,0,0,1,56,32H80A16,16,0,0,1,96,48Zm56-16H128a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V48A16,16,0,0,0,152,32Zm88,88H224V104a8,8,0,0,0-16,0v16H192a8,8,0,0,0,0,16h16v16a8,8,0,0,0,16,0V136h16a8,8,0,0,0,0-16Z"},null,-1),e0=[Xa],a0={key:3},t0=i("path",{d:"M80,34H56A14,14,0,0,0,42,48V208a14,14,0,0,0,14,14H80a14,14,0,0,0,14-14V48A14,14,0,0,0,80,34Zm2,174a2,2,0,0,1-2,2H56a2,2,0,0,1-2-2V48a2,2,0,0,1,2-2H80a2,2,0,0,1,2,2ZM152,34H128a14,14,0,0,0-14,14V208a14,14,0,0,0,14,14h24a14,14,0,0,0,14-14V48A14,14,0,0,0,152,34Zm2,174a2,2,0,0,1-2,2H128a2,2,0,0,1-2-2V48a2,2,0,0,1,2-2h24a2,2,0,0,1,2,2Zm92-80a6,6,0,0,1-6,6H222v18a6,6,0,0,1-12,0V134H192a6,6,0,0,1,0-12h18V104a6,6,0,0,1,12,0v18h18A6,6,0,0,1,246,128Z"},null,-1),l0=[t0],n0={key:4},o0=i("path",{d:"M80,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H80a16,16,0,0,0,16-16V48A16,16,0,0,0,80,32Zm0,176H56V48H80ZM152,32H128a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V48A16,16,0,0,0,152,32Zm0,176H128V48h24Zm96-80a8,8,0,0,1-8,8H224v16a8,8,0,0,1-16,0V136H192a8,8,0,0,1,0-16h16V104a8,8,0,0,1,16,0v16h16A8,8,0,0,1,248,128Z"},null,-1),r0=[o0],u0={key:5},i0=i("path",{d:"M80,36H56A12,12,0,0,0,44,48V208a12,12,0,0,0,12,12H80a12,12,0,0,0,12-12V48A12,12,0,0,0,80,36Zm4,172a4,4,0,0,1-4,4H56a4,4,0,0,1-4-4V48a4,4,0,0,1,4-4H80a4,4,0,0,1,4,4ZM152,36H128a12,12,0,0,0-12,12V208a12,12,0,0,0,12,12h24a12,12,0,0,0,12-12V48A12,12,0,0,0,152,36Zm4,172a4,4,0,0,1-4,4H128a4,4,0,0,1-4-4V48a4,4,0,0,1,4-4h24a4,4,0,0,1,4,4Zm88-80a4,4,0,0,1-4,4H220v20a4,4,0,0,1-8,0V132H192a4,4,0,0,1,0-8h20V104a4,4,0,0,1,8,0v20h20A4,4,0,0,1,244,128Z"},null,-1),s0=[i0],d0={name:"PhColumnsPlusRight"},c0=Q({...d0,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(o){const c=o,r=D("weight","regular"),v=D("size","1em"),_=D("color","currentColor"),s=D("mirrored",!1),u=y(()=>{var t;return(t=c.weight)!=null?t:r}),$=y(()=>{var t;return(t=c.size)!=null?t:v}),I=y(()=>{var t;return(t=c.color)!=null?t:_}),m=y(()=>c.mirrored!==void 0?c.mirrored?"scale(-1, 1)":void 0:s?"scale(-1, 1)":void 0);return(t,Z)=>(a(),d("svg",ve({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:$.value,height:$.value,fill:I.value,transform:m.value},t.$attrs),[me(t.$slots,"default"),u.value==="bold"?(a(),d("g",Ka,Oa)):u.value==="duotone"?(a(),d("g",Wa,Ja)):u.value==="fill"?(a(),d("g",Ya,e0)):u.value==="light"?(a(),d("g",a0,l0)):u.value==="regular"?(a(),d("g",n0,r0)):u.value==="thin"?(a(),d("g",u0,s0)):z("",!0)],16,Ea))}}),m0=["width","height","fill","transform"],v0={key:0},f0=i("path",{d:"M148,96V48a12,12,0,0,1,24,0V84h36a12,12,0,0,1,0,24H160A12,12,0,0,1,148,96ZM96,148H48a12,12,0,0,0,0,24H84v36a12,12,0,0,0,24,0V160A12,12,0,0,0,96,148Zm112,0H160a12,12,0,0,0-12,12v48a12,12,0,0,0,24,0V172h36a12,12,0,0,0,0-24ZM96,36A12,12,0,0,0,84,48V84H48a12,12,0,0,0,0,24H96a12,12,0,0,0,12-12V48A12,12,0,0,0,96,36Z"},null,-1),p0=[f0],g0={key:1},h0=i("path",{d:"M208,64V192a16,16,0,0,1-16,16H64a16,16,0,0,1-16-16V64A16,16,0,0,1,64,48H192A16,16,0,0,1,208,64Z",opacity:"0.2"},null,-1),y0=i("path",{d:"M152,96V48a8,8,0,0,1,16,0V88h40a8,8,0,0,1,0,16H160A8,8,0,0,1,152,96ZM96,152H48a8,8,0,0,0,0,16H88v40a8,8,0,0,0,16,0V160A8,8,0,0,0,96,152Zm112,0H160a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V168h40a8,8,0,0,0,0-16ZM96,40a8,8,0,0,0-8,8V88H48a8,8,0,0,0,0,16H96a8,8,0,0,0,8-8V48A8,8,0,0,0,96,40Z"},null,-1),b0=[h0,y0],_0={key:2},H0=i("path",{d:"M152,96V48a8,8,0,0,1,13.66-5.66l48,48A8,8,0,0,1,208,104H160A8,8,0,0,1,152,96ZM96,152H48a8,8,0,0,0-5.66,13.66l48,48A8,8,0,0,0,104,208V160A8,8,0,0,0,96,152ZM99.06,40.61a8,8,0,0,0-8.72,1.73l-48,48A8,8,0,0,0,48,104H96a8,8,0,0,0,8-8V48A8,8,0,0,0,99.06,40.61ZM208,152H160a8,8,0,0,0-8,8v48a8,8,0,0,0,13.66,5.66l48-48A8,8,0,0,0,208,152Z"},null,-1),$0=[H0],k0={key:3},V0=i("path",{d:"M154,96V48a6,6,0,0,1,12,0V90h42a6,6,0,0,1,0,12H160A6,6,0,0,1,154,96ZM96,154H48a6,6,0,0,0,0,12H90v42a6,6,0,0,0,12,0V160A6,6,0,0,0,96,154Zm112,0H160a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V166h42a6,6,0,0,0,0-12ZM96,42a6,6,0,0,0-6,6V90H48a6,6,0,0,0,0,12H96a6,6,0,0,0,6-6V48A6,6,0,0,0,96,42Z"},null,-1),w0=[V0],Z0={key:4},A0=i("path",{d:"M152,96V48a8,8,0,0,1,16,0V88h40a8,8,0,0,1,0,16H160A8,8,0,0,1,152,96ZM96,152H48a8,8,0,0,0,0,16H88v40a8,8,0,0,0,16,0V160A8,8,0,0,0,96,152Zm112,0H160a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V168h40a8,8,0,0,0,0-16ZM96,40a8,8,0,0,0-8,8V88H48a8,8,0,0,0,0,16H96a8,8,0,0,0,8-8V48A8,8,0,0,0,96,40Z"},null,-1),C0=[A0],M0={key:5},I0=i("path",{d:"M156,96V48a4,4,0,0,1,8,0V92h44a4,4,0,0,1,0,8H160A4,4,0,0,1,156,96ZM96,156H48a4,4,0,0,0,0,8H92v44a4,4,0,0,0,8,0V160A4,4,0,0,0,96,156Zm112,0H160a4,4,0,0,0-4,4v48a4,4,0,0,0,8,0V164h44a4,4,0,0,0,0-8ZM96,44a4,4,0,0,0-4,4V92H48a4,4,0,0,0,0,8H96a4,4,0,0,0,4-4V48A4,4,0,0,0,96,44Z"},null,-1),S0=[I0],x0={name:"PhCornersIn"},L0=Q({...x0,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(o){const c=o,r=D("weight","regular"),v=D("size","1em"),_=D("color","currentColor"),s=D("mirrored",!1),u=y(()=>{var t;return(t=c.weight)!=null?t:r}),$=y(()=>{var t;return(t=c.size)!=null?t:v}),I=y(()=>{var t;return(t=c.color)!=null?t:_}),m=y(()=>c.mirrored!==void 0?c.mirrored?"scale(-1, 1)":void 0:s?"scale(-1, 1)":void 0);return(t,Z)=>(a(),d("svg",ve({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:$.value,height:$.value,fill:I.value,transform:m.value},t.$attrs),[me(t.$slots,"default"),u.value==="bold"?(a(),d("g",v0,p0)):u.value==="duotone"?(a(),d("g",g0,b0)):u.value==="fill"?(a(),d("g",_0,$0)):u.value==="light"?(a(),d("g",k0,w0)):u.value==="regular"?(a(),d("g",Z0,C0)):u.value==="thin"?(a(),d("g",M0,S0)):z("",!0)],16,m0))}}),z0=["width","height","fill","transform"],B0={key:0},T0=i("path",{d:"M220,48V88a12,12,0,0,1-24,0V60H168a12,12,0,0,1,0-24h40A12,12,0,0,1,220,48ZM88,196H60V168a12,12,0,0,0-24,0v40a12,12,0,0,0,12,12H88a12,12,0,0,0,0-24Zm120-40a12,12,0,0,0-12,12v28H168a12,12,0,0,0,0,24h40a12,12,0,0,0,12-12V168A12,12,0,0,0,208,156ZM88,36H48A12,12,0,0,0,36,48V88a12,12,0,0,0,24,0V60H88a12,12,0,0,0,0-24Z"},null,-1),q0=[T0],D0={key:1},j0=i("path",{d:"M208,48V208H48V48Z",opacity:"0.2"},null,-1),N0=i("path",{d:"M216,48V88a8,8,0,0,1-16,0V56H168a8,8,0,0,1,0-16h40A8,8,0,0,1,216,48ZM88,200H56V168a8,8,0,0,0-16,0v40a8,8,0,0,0,8,8H88a8,8,0,0,0,0-16Zm120-40a8,8,0,0,0-8,8v32H168a8,8,0,0,0,0,16h40a8,8,0,0,0,8-8V168A8,8,0,0,0,208,160ZM88,40H48a8,8,0,0,0-8,8V88a8,8,0,0,0,16,0V56H88a8,8,0,0,0,0-16Z"},null,-1),F0=[j0,N0],R0={key:2},U0=i("path",{d:"M93.66,202.34A8,8,0,0,1,88,216H48a8,8,0,0,1-8-8V168a8,8,0,0,1,13.66-5.66ZM88,40H48a8,8,0,0,0-8,8V88a8,8,0,0,0,13.66,5.66l40-40A8,8,0,0,0,88,40ZM211.06,160.61a8,8,0,0,0-8.72,1.73l-40,40A8,8,0,0,0,168,216h40a8,8,0,0,0,8-8V168A8,8,0,0,0,211.06,160.61ZM208,40H168a8,8,0,0,0-5.66,13.66l40,40A8,8,0,0,0,216,88V48A8,8,0,0,0,208,40Z"},null,-1),E0=[U0],K0={key:3},P0=i("path",{d:"M214,48V88a6,6,0,0,1-12,0V54H168a6,6,0,0,1,0-12h40A6,6,0,0,1,214,48ZM88,202H54V168a6,6,0,0,0-12,0v40a6,6,0,0,0,6,6H88a6,6,0,0,0,0-12Zm120-40a6,6,0,0,0-6,6v34H168a6,6,0,0,0,0,12h40a6,6,0,0,0,6-6V168A6,6,0,0,0,208,162ZM88,42H48a6,6,0,0,0-6,6V88a6,6,0,0,0,12,0V54H88a6,6,0,0,0,0-12Z"},null,-1),O0=[P0],W0={key:4},G0=i("path",{d:"M216,48V88a8,8,0,0,1-16,0V56H168a8,8,0,0,1,0-16h40A8,8,0,0,1,216,48ZM88,200H56V168a8,8,0,0,0-16,0v40a8,8,0,0,0,8,8H88a8,8,0,0,0,0-16Zm120-40a8,8,0,0,0-8,8v32H168a8,8,0,0,0,0,16h40a8,8,0,0,0,8-8V168A8,8,0,0,0,208,160ZM88,40H48a8,8,0,0,0-8,8V88a8,8,0,0,0,16,0V56H88a8,8,0,0,0,0-16Z"},null,-1),Q0=[G0],J0={key:5},Y0=i("path",{d:"M212,48V88a4,4,0,0,1-8,0V52H168a4,4,0,0,1,0-8h40A4,4,0,0,1,212,48ZM88,204H52V168a4,4,0,0,0-8,0v40a4,4,0,0,0,4,4H88a4,4,0,0,0,0-8Zm120-40a4,4,0,0,0-4,4v36H168a4,4,0,0,0,0,8h40a4,4,0,0,0,4-4V168A4,4,0,0,0,208,164ZM88,44H48a4,4,0,0,0-4,4V88a4,4,0,0,0,8,0V52H88a4,4,0,0,0,0-8Z"},null,-1),X0=[Y0],et={name:"PhCornersOut"},at=Q({...et,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(o){const c=o,r=D("weight","regular"),v=D("size","1em"),_=D("color","currentColor"),s=D("mirrored",!1),u=y(()=>{var t;return(t=c.weight)!=null?t:r}),$=y(()=>{var t;return(t=c.size)!=null?t:v}),I=y(()=>{var t;return(t=c.color)!=null?t:_}),m=y(()=>c.mirrored!==void 0?c.mirrored?"scale(-1, 1)":void 0:s?"scale(-1, 1)":void 0);return(t,Z)=>(a(),d("svg",ve({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:$.value,height:$.value,fill:I.value,transform:m.value},t.$attrs),[me(t.$slots,"default"),u.value==="bold"?(a(),d("g",B0,q0)):u.value==="duotone"?(a(),d("g",D0,F0)):u.value==="fill"?(a(),d("g",R0,E0)):u.value==="light"?(a(),d("g",K0,O0)):u.value==="regular"?(a(),d("g",W0,Q0)):u.value==="thin"?(a(),d("g",J0,X0)):z("",!0)],16,z0))}}),tt=["width","height","fill","transform"],lt={key:0},nt=i("path",{d:"M228,160a12,12,0,0,1-12,12H40a12,12,0,0,1,0-24H216A12,12,0,0,1,228,160ZM40,108H216a12,12,0,0,0,0-24H40a12,12,0,0,0,0,24Z"},null,-1),ot=[nt],rt={key:1},ut=i("path",{d:"M216,56V200a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V56A16,16,0,0,1,56,40H200A16,16,0,0,1,216,56Z",opacity:"0.2"},null,-1),it=i("path",{d:"M224,160a8,8,0,0,1-8,8H40a8,8,0,0,1,0-16H216A8,8,0,0,1,224,160ZM40,104H216a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16Z"},null,-1),st=[ut,it],dt={key:2},ct=i("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM184,160H72a8,8,0,0,1,0-16H184a8,8,0,0,1,0,16Zm0-48H72a8,8,0,0,1,0-16H184a8,8,0,0,1,0,16Z"},null,-1),mt=[ct],vt={key:3},ft=i("path",{d:"M222,160a6,6,0,0,1-6,6H40a6,6,0,0,1,0-12H216A6,6,0,0,1,222,160ZM40,102H216a6,6,0,0,0,0-12H40a6,6,0,0,0,0,12Z"},null,-1),pt=[ft],gt={key:4},ht=i("path",{d:"M224,160a8,8,0,0,1-8,8H40a8,8,0,0,1,0-16H216A8,8,0,0,1,224,160ZM40,104H216a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16Z"},null,-1),yt=[ht],bt={key:5},_t=i("path",{d:"M220,160a4,4,0,0,1-4,4H40a4,4,0,0,1,0-8H216A4,4,0,0,1,220,160ZM40,100H216a4,4,0,0,0,0-8H40a4,4,0,0,0,0,8Z"},null,-1),Ht=[_t],$t={name:"PhEquals"},kt=Q({...$t,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(o){const c=o,r=D("weight","regular"),v=D("size","1em"),_=D("color","currentColor"),s=D("mirrored",!1),u=y(()=>{var t;return(t=c.weight)!=null?t:r}),$=y(()=>{var t;return(t=c.size)!=null?t:v}),I=y(()=>{var t;return(t=c.color)!=null?t:_}),m=y(()=>c.mirrored!==void 0?c.mirrored?"scale(-1, 1)":void 0:s?"scale(-1, 1)":void 0);return(t,Z)=>(a(),d("svg",ve({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:$.value,height:$.value,fill:I.value,transform:m.value},t.$attrs),[me(t.$slots,"default"),u.value==="bold"?(a(),d("g",lt,ot)):u.value==="duotone"?(a(),d("g",rt,st)):u.value==="fill"?(a(),d("g",dt,mt)):u.value==="light"?(a(),d("g",vt,pt)):u.value==="regular"?(a(),d("g",gt,yt)):u.value==="thin"?(a(),d("g",bt,Ht)):z("",!0)],16,tt))}}),Vt=["width","height","fill","transform"],wt={key:0},Zt=i("path",{d:"M87.5,151.52l64-64a12,12,0,0,1,17,17l-64,64a12,12,0,0,1-17-17Zm131-114a60.08,60.08,0,0,0-84.87,0L103.51,67.61a12,12,0,0,0,17,17l30.07-30.06a36,36,0,0,1,50.93,50.92L171.4,135.52a12,12,0,1,0,17,17l30.08-30.06A60.09,60.09,0,0,0,218.45,37.55ZM135.52,171.4l-30.07,30.08a36,36,0,0,1-50.92-50.93l30.06-30.07a12,12,0,0,0-17-17L37.55,133.58a60,60,0,0,0,84.88,84.87l30.06-30.07a12,12,0,0,0-17-17Z"},null,-1),At=[Zt],Ct={key:1},Mt=i("path",{d:"M209.94,113.94l-96,96a48,48,0,0,1-67.88-67.88l96-96a48,48,0,0,1,67.88,67.88Z",opacity:"0.2"},null,-1),It=i("path",{d:"M165.66,90.34a8,8,0,0,1,0,11.32l-64,64a8,8,0,0,1-11.32-11.32l64-64A8,8,0,0,1,165.66,90.34ZM215.6,40.4a56,56,0,0,0-79.2,0L106.34,70.45a8,8,0,0,0,11.32,11.32l30.06-30a40,40,0,0,1,56.57,56.56l-30.07,30.06a8,8,0,0,0,11.31,11.32L215.6,119.6a56,56,0,0,0,0-79.2ZM138.34,174.22l-30.06,30.06a40,40,0,1,1-56.56-56.57l30.05-30.05a8,8,0,0,0-11.32-11.32L40.4,136.4a56,56,0,0,0,79.2,79.2l30.06-30.07a8,8,0,0,0-11.32-11.31Z"},null,-1),St=[Mt,It],xt={key:2},Lt=i("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM144.56,173.66l-21.45,21.45a44,44,0,0,1-62.22-62.22l21.45-21.46a8,8,0,0,1,11.32,11.31L72.2,144.2a28,28,0,0,0,39.6,39.6l21.45-21.46a8,8,0,0,1,11.31,11.32Zm-34.9-16a8,8,0,0,1-11.32-11.32l48-48a8,8,0,0,1,11.32,11.32Zm85.45-34.55-21.45,21.45a8,8,0,0,1-11.32-11.31L183.8,111.8a28,28,0,0,0-39.6-39.6L122.74,93.66a8,8,0,0,1-11.31-11.32l21.46-21.45a44,44,0,0,1,62.22,62.22Z"},null,-1),zt=[Lt],Bt={key:3},Tt=i("path",{d:"M164.25,91.75a6,6,0,0,1,0,8.49l-64,64a6,6,0,0,1-8.49-8.48l64-64A6,6,0,0,1,164.25,91.75ZM214.2,41.8a54.07,54.07,0,0,0-76.38,0L107.75,71.85a6,6,0,0,0,8.49,8.49l30.07-30.06a42,42,0,0,1,59.41,59.41l-30.08,30.07a6,6,0,1,0,8.49,8.49l30.07-30.07A54,54,0,0,0,214.2,41.8ZM139.76,175.64l-30.07,30.08a42,42,0,0,1-59.41-59.41l30.06-30.07a6,6,0,0,0-8.49-8.49l-30,30.07a54,54,0,0,0,76.38,76.39l30.07-30.08a6,6,0,0,0-8.49-8.49Z"},null,-1),qt=[Tt],Dt={key:4},jt=i("path",{d:"M165.66,90.34a8,8,0,0,1,0,11.32l-64,64a8,8,0,0,1-11.32-11.32l64-64A8,8,0,0,1,165.66,90.34ZM215.6,40.4a56,56,0,0,0-79.2,0L106.34,70.45a8,8,0,0,0,11.32,11.32l30.06-30a40,40,0,0,1,56.57,56.56l-30.07,30.06a8,8,0,0,0,11.31,11.32L215.6,119.6a56,56,0,0,0,0-79.2ZM138.34,174.22l-30.06,30.06a40,40,0,1,1-56.56-56.57l30.05-30.05a8,8,0,0,0-11.32-11.32L40.4,136.4a56,56,0,0,0,79.2,79.2l30.06-30.07a8,8,0,0,0-11.32-11.31Z"},null,-1),Nt=[jt],Ft={key:5},Rt=i("path",{d:"M162.84,93.16a4,4,0,0,1,0,5.66l-64,64a4,4,0,0,1-5.66-5.66l64-64A4,4,0,0,1,162.84,93.16Zm49.95-49.95a52.07,52.07,0,0,0-73.56,0L109.17,73.27a4,4,0,0,0,5.65,5.66l30.07-30.06a44,44,0,0,1,62.24,62.24l-30.07,30.06a4,4,0,0,0,5.66,5.66l30.07-30.06A52.07,52.07,0,0,0,212.79,43.21ZM141.17,177.06l-30.06,30.07a44,44,0,0,1-62.24-62.24l30.06-30.06a4,4,0,0,0-5.66-5.66L43.21,139.23a52,52,0,0,0,73.56,73.56l30.06-30.07a4,4,0,1,0-5.66-5.66Z"},null,-1),Ut=[Rt],Et={name:"PhLinkSimple"},Qe=Q({...Et,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(o){const c=o,r=D("weight","regular"),v=D("size","1em"),_=D("color","currentColor"),s=D("mirrored",!1),u=y(()=>{var t;return(t=c.weight)!=null?t:r}),$=y(()=>{var t;return(t=c.size)!=null?t:v}),I=y(()=>{var t;return(t=c.color)!=null?t:_}),m=y(()=>c.mirrored!==void 0?c.mirrored?"scale(-1, 1)":void 0:s?"scale(-1, 1)":void 0);return(t,Z)=>(a(),d("svg",ve({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:$.value,height:$.value,fill:I.value,transform:m.value},t.$attrs),[me(t.$slots,"default"),u.value==="bold"?(a(),d("g",wt,At)):u.value==="duotone"?(a(),d("g",Ct,St)):u.value==="fill"?(a(),d("g",xt,zt)):u.value==="light"?(a(),d("g",Bt,qt)):u.value==="regular"?(a(),d("g",Dt,Nt)):u.value==="thin"?(a(),d("g",Ft,Ut)):z("",!0)],16,Vt))}}),Kt=["width","height","fill","transform"],Pt={key:0},Ot=i("path",{d:"M232.49,55.51l-32-32a12,12,0,0,0-17,0l-96,96A12,12,0,0,0,84,128v32a12,12,0,0,0,12,12h32a12,12,0,0,0,8.49-3.51l96-96A12,12,0,0,0,232.49,55.51ZM192,49l15,15L196,75,181,60Zm-69,99H108V133l56-56,15,15Zm105-7.43V208a20,20,0,0,1-20,20H48a20,20,0,0,1-20-20V48A20,20,0,0,1,48,28h67.43a12,12,0,0,1,0,24H52V204H204V140.57a12,12,0,0,1,24,0Z"},null,-1),Wt=[Ot],Gt={key:1},Qt=i("path",{d:"M200,88l-72,72H96V128l72-72Z",opacity:"0.2"},null,-1),Jt=i("path",{d:"M229.66,58.34l-32-32a8,8,0,0,0-11.32,0l-96,96A8,8,0,0,0,88,128v32a8,8,0,0,0,8,8h32a8,8,0,0,0,5.66-2.34l96-96A8,8,0,0,0,229.66,58.34ZM124.69,152H104V131.31l64-64L188.69,88ZM200,76.69,179.31,56,192,43.31,212.69,64ZM224,128v80a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32h80a8,8,0,0,1,0,16H48V208H208V128a8,8,0,0,1,16,0Z"},null,-1),Yt=[Qt,Jt],Xt={key:2},el=i("path",{d:"M224,128v80a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32h80a8,8,0,0,1,0,16H48V208H208V128a8,8,0,0,1,16,0Zm5.66-58.34-96,96A8,8,0,0,1,128,168H96a8,8,0,0,1-8-8V128a8,8,0,0,1,2.34-5.66l96-96a8,8,0,0,1,11.32,0l32,32A8,8,0,0,1,229.66,69.66Zm-17-5.66L192,43.31,179.31,56,200,76.69Z"},null,-1),al=[el],tl={key:3},ll=i("path",{d:"M228.24,59.76l-32-32a6,6,0,0,0-8.48,0l-96,96A6,6,0,0,0,90,128v32a6,6,0,0,0,6,6h32a6,6,0,0,0,4.24-1.76l96-96A6,6,0,0,0,228.24,59.76ZM125.51,154H102V130.49l66-66L191.51,88ZM200,79.51,176.49,56,192,40.49,215.51,64ZM222,128v80a14,14,0,0,1-14,14H48a14,14,0,0,1-14-14V48A14,14,0,0,1,48,34h80a6,6,0,0,1,0,12H48a2,2,0,0,0-2,2V208a2,2,0,0,0,2,2H208a2,2,0,0,0,2-2V128a6,6,0,0,1,12,0Z"},null,-1),nl=[ll],ol={key:4},rl=i("path",{d:"M229.66,58.34l-32-32a8,8,0,0,0-11.32,0l-96,96A8,8,0,0,0,88,128v32a8,8,0,0,0,8,8h32a8,8,0,0,0,5.66-2.34l96-96A8,8,0,0,0,229.66,58.34ZM124.69,152H104V131.31l64-64L188.69,88ZM200,76.69,179.31,56,192,43.31,212.69,64ZM224,128v80a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32h80a8,8,0,0,1,0,16H48V208H208V128a8,8,0,0,1,16,0Z"},null,-1),ul=[rl],il={key:5},sl=i("path",{d:"M226.83,61.17l-32-32a4,4,0,0,0-5.66,0l-96,96A4,4,0,0,0,92,128v32a4,4,0,0,0,4,4h32a4,4,0,0,0,2.83-1.17l96-96A4,4,0,0,0,226.83,61.17ZM126.34,156H100V129.66l68-68L194.34,88ZM200,82.34,173.66,56,192,37.66,218.34,64ZM220,128v80a12,12,0,0,1-12,12H48a12,12,0,0,1-12-12V48A12,12,0,0,1,48,36h80a4,4,0,0,1,0,8H48a4,4,0,0,0-4,4V208a4,4,0,0,0,4,4H208a4,4,0,0,0,4-4V128a4,4,0,0,1,8,0Z"},null,-1),dl=[sl],cl={name:"PhNotePencil"},ml=Q({...cl,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(o){const c=o,r=D("weight","regular"),v=D("size","1em"),_=D("color","currentColor"),s=D("mirrored",!1),u=y(()=>{var t;return(t=c.weight)!=null?t:r}),$=y(()=>{var t;return(t=c.size)!=null?t:v}),I=y(()=>{var t;return(t=c.color)!=null?t:_}),m=y(()=>c.mirrored!==void 0?c.mirrored?"scale(-1, 1)":void 0:s?"scale(-1, 1)":void 0);return(t,Z)=>(a(),d("svg",ve({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:$.value,height:$.value,fill:I.value,transform:m.value},t.$attrs),[me(t.$slots,"default"),u.value==="bold"?(a(),d("g",Pt,Wt)):u.value==="duotone"?(a(),d("g",Gt,Yt)):u.value==="fill"?(a(),d("g",Xt,al)):u.value==="light"?(a(),d("g",tl,nl)):u.value==="regular"?(a(),d("g",ol,ul)):u.value==="thin"?(a(),d("g",il,dl)):z("",!0)],16,Kt))}}),vl=["width","height","fill","transform"],fl={key:0},pl=i("path",{d:"M230.15,70.54,185.46,25.86a20,20,0,0,0-28.28,0L33.86,149.17A19.86,19.86,0,0,0,28,163.31V208a20,20,0,0,0,20,20H216a12,12,0,0,0,0-24H125L230.15,98.83A20,20,0,0,0,230.15,70.54ZM91,204H52V165l84-84,39,39ZM192,103,153,64l18.34-18.34,39,39Z"},null,-1),gl=[pl],hl={key:1},yl=i("path",{d:"M221.66,90.34,192,120,136,64l29.66-29.66a8,8,0,0,1,11.31,0L221.66,79A8,8,0,0,1,221.66,90.34Z",opacity:"0.2"},null,-1),bl=i("path",{d:"M227.32,73.37,182.63,28.69a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H216a8,8,0,0,0,0-16H115.32l112-112A16,16,0,0,0,227.32,73.37ZM48,163.31l88-88L180.69,120l-88,88H48Zm144-54.62L147.32,64l24-24L216,84.69Z"},null,-1),_l=[yl,bl],Hl={key:2},$l=i("path",{d:"M227.32,73.37,182.63,28.69a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H216a8,8,0,0,0,0-16H115.32l112-112A16,16,0,0,0,227.32,73.37ZM192,108.69,147.32,64l24-24L216,84.69Z"},null,-1),kl=[$l],Vl={key:3},wl=i("path",{d:"M225.91,74.79,181.22,30.1a14,14,0,0,0-19.8,0L38.1,153.41a13.94,13.94,0,0,0-4.1,9.9V208a14,14,0,0,0,14,14H216a6,6,0,0,0,0-12H110.49L225.91,94.59A14,14,0,0,0,225.91,74.79ZM93.52,210H48a2,2,0,0,1-2-2V163.31a2,2,0,0,1,.59-1.41L136,72.49,183.52,120ZM217.42,86.1,192,111.52,144.49,64,169.9,38.59a2,2,0,0,1,2.83,0l44.69,44.68A2,2,0,0,1,217.42,86.1Z"},null,-1),Zl=[wl],Al={key:4},Cl=i("path",{d:"M227.32,73.37,182.63,28.69a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H216a8,8,0,0,0,0-16H115.32l112-112A16,16,0,0,0,227.32,73.37ZM92.69,208H48V163.31l88-88L180.69,120ZM192,108.69,147.32,64l24-24L216,84.69Z"},null,-1),Ml=[Cl],Il={key:5},Sl=i("path",{d:"M224.49,76.2,179.8,31.51a12,12,0,0,0-17,0L39.51,154.83A12,12,0,0,0,36,163.31V208a12,12,0,0,0,12,12H216a4,4,0,0,0,0-8H105.66L224.49,93.17A12,12,0,0,0,224.49,76.2ZM94.34,212H48a4,4,0,0,1-4-4V163.31a4,4,0,0,1,1.17-2.82L136,69.66,186.35,120ZM218.83,87.51,192,114.34,141.66,64l26.83-26.83a4,4,0,0,1,5.66,0l44.68,44.69A4,4,0,0,1,218.83,87.51Z"},null,-1),xl=[Sl],Ll={name:"PhPencilSimpleLine"},zl=Q({...Ll,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(o){const c=o,r=D("weight","regular"),v=D("size","1em"),_=D("color","currentColor"),s=D("mirrored",!1),u=y(()=>{var t;return(t=c.weight)!=null?t:r}),$=y(()=>{var t;return(t=c.size)!=null?t:v}),I=y(()=>{var t;return(t=c.color)!=null?t:_}),m=y(()=>c.mirrored!==void 0?c.mirrored?"scale(-1, 1)":void 0:s?"scale(-1, 1)":void 0);return(t,Z)=>(a(),d("svg",ve({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:$.value,height:$.value,fill:I.value,transform:m.value},t.$attrs),[me(t.$slots,"default"),u.value==="bold"?(a(),d("g",fl,gl)):u.value==="duotone"?(a(),d("g",hl,_l)):u.value==="fill"?(a(),d("g",Hl,kl)):u.value==="light"?(a(),d("g",Vl,Zl)):u.value==="regular"?(a(),d("g",Al,Ml)):u.value==="thin"?(a(),d("g",Il,xl)):z("",!0)],16,vl))}}),Bl=["width","height","fill","transform"],Tl={key:0},ql=i("path",{d:"M208,112H48a20,20,0,0,0-20,20v24a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V132A20,20,0,0,0,208,112Zm-4,40H52V136H204Zm4-116H48A20,20,0,0,0,28,56V80a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V56A20,20,0,0,0,208,36Zm-4,40H52V60H204ZM160,220a12,12,0,0,1-12,12h-8v8a12,12,0,0,1-24,0v-8h-8a12,12,0,0,1,0-24h8v-8a12,12,0,0,1,24,0v8h8A12,12,0,0,1,160,220Z"},null,-1),Dl=[ql],jl={key:1},Nl=i("path",{d:"M216,128v24a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V128a8,8,0,0,1,8-8H208A8,8,0,0,1,216,128Zm-8-80H48a8,8,0,0,0-8,8V80a8,8,0,0,0,8,8H208a8,8,0,0,0,8-8V56A8,8,0,0,0,208,48Z",opacity:"0.2"},null,-1),Fl=i("path",{d:"M208,112H48a16,16,0,0,0-16,16v24a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V128A16,16,0,0,0,208,112Zm0,40H48V128H208v24Zm0-112H48A16,16,0,0,0,32,56V80A16,16,0,0,0,48,96H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40Zm0,40H48V56H208V80ZM160,216a8,8,0,0,1-8,8H136v16a8,8,0,0,1-16,0V224H104a8,8,0,0,1,0-16h16V192a8,8,0,0,1,16,0v16h16A8,8,0,0,1,160,216Z"},null,-1),Rl=[Nl,Fl],Ul={key:2},El=i("path",{d:"M224,128v24a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V128a16,16,0,0,1,16-16H208A16,16,0,0,1,224,128ZM208,40H48A16,16,0,0,0,32,56V80A16,16,0,0,0,48,96H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40ZM152,208H136V192a8,8,0,0,0-16,0v16H104a8,8,0,0,0,0,16h16v16a8,8,0,0,0,16,0V224h16a8,8,0,0,0,0-16Z"},null,-1),Kl=[El],Pl={key:3},Ol=i("path",{d:"M208,114H48a14,14,0,0,0-14,14v24a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V128A14,14,0,0,0,208,114Zm2,38a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V128a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2ZM208,42H48A14,14,0,0,0,34,56V80A14,14,0,0,0,48,94H208a14,14,0,0,0,14-14V56A14,14,0,0,0,208,42Zm2,38a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V56a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2ZM158,216a6,6,0,0,1-6,6H134v18a6,6,0,0,1-12,0V222H104a6,6,0,0,1,0-12h18V192a6,6,0,0,1,12,0v18h18A6,6,0,0,1,158,216Z"},null,-1),Wl=[Ol],Gl={key:4},Ql=i("path",{d:"M208,112H48a16,16,0,0,0-16,16v24a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V128A16,16,0,0,0,208,112Zm0,40H48V128H208v24Zm0-112H48A16,16,0,0,0,32,56V80A16,16,0,0,0,48,96H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40Zm0,40H48V56H208V80ZM160,216a8,8,0,0,1-8,8H136v16a8,8,0,0,1-16,0V224H104a8,8,0,0,1,0-16h16V192a8,8,0,0,1,16,0v16h16A8,8,0,0,1,160,216Z"},null,-1),Jl=[Ql],Yl={key:5},Xl=i("path",{d:"M208,116H48a12,12,0,0,0-12,12v24a12,12,0,0,0,12,12H208a12,12,0,0,0,12-12V128A12,12,0,0,0,208,116Zm4,36a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V128a4,4,0,0,1,4-4H208a4,4,0,0,1,4,4ZM208,44H48A12,12,0,0,0,36,56V80A12,12,0,0,0,48,92H208a12,12,0,0,0,12-12V56A12,12,0,0,0,208,44Zm4,36a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V56a4,4,0,0,1,4-4H208a4,4,0,0,1,4,4ZM156,216a4,4,0,0,1-4,4H132v20a4,4,0,0,1-8,0V220H104a4,4,0,0,1,0-8h20V192a4,4,0,0,1,8,0v20h20A4,4,0,0,1,156,216Z"},null,-1),e1=[Xl],a1={name:"PhRowsPlusBottom"},Je=Q({...a1,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(o){const c=o,r=D("weight","regular"),v=D("size","1em"),_=D("color","currentColor"),s=D("mirrored",!1),u=y(()=>{var t;return(t=c.weight)!=null?t:r}),$=y(()=>{var t;return(t=c.size)!=null?t:v}),I=y(()=>{var t;return(t=c.color)!=null?t:_}),m=y(()=>c.mirrored!==void 0?c.mirrored?"scale(-1, 1)":void 0:s?"scale(-1, 1)":void 0);return(t,Z)=>(a(),d("svg",ve({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:$.value,height:$.value,fill:I.value,transform:m.value},t.$attrs),[me(t.$slots,"default"),u.value==="bold"?(a(),d("g",Tl,Dl)):u.value==="duotone"?(a(),d("g",jl,Rl)):u.value==="fill"?(a(),d("g",Ul,Kl)):u.value==="light"?(a(),d("g",Pl,Wl)):u.value==="regular"?(a(),d("g",Gl,Jl)):u.value==="thin"?(a(),d("g",Yl,e1)):z("",!0)],16,Bl))}}),t1={class:"related-tables"},l1={class:"related-section"},n1={class:"relation-info"},o1={class:"related-tables"},r1={class:"related-section"},u1={class:"relation-info"},i1=Q({__name:"RelatedTables",props:{table:{}},setup(o){const c=o,r=ge(),v=xe(),_=r.params.projectId,{tables:s,loading:u}=za(_),$=y(()=>{const Z=c.table.getColumns().find(B=>B.primaryKey);return(Z==null?void 0:Z.name)||"id"}),I=y(()=>{if(!s.value.length)return{referencingTables:[],referencedTables:[]};const Z=s.value.filter(A=>A.id!==c.table.id),B=[];for(const A of Z){const C=A.getColumns().filter(S=>S.foreignKey);for(const S of C){if(!S.foreignKey)continue;let P;for(const J of s.value)if(P=J.getColumns().find(X=>{var L;return X.id===((L=S.foreignKey)==null?void 0:L.columnId)}),P)break;(P==null?void 0:P.tableId)===c.table.id&&B.push({table:A,column:S})}}const p=[],x=c.table.getColumns().filter(A=>A.foreignKey);for(const A of x){if(!A.foreignKey)continue;let C,S;for(const P of s.value)if(S=P.getColumns().find(J=>{var X;return J.id===((X=A.foreignKey)==null?void 0:X.columnId)}),S){C=P;break}C&&S&&p.push({table:C,sourceColumn:A,targetColumn:S})}return{referencingTables:B,referencedTables:p}}),m=y(()=>{const Z=new Map;for(const B of I.value.referencingTables)Z.has(B.table.id)||Z.set(B.table.id,{tableId:B.table.id,tableName:B.table.name,description:`${B.column.name} \u2192 ${$.value}`});for(const B of I.value.referencedTables)Z.has(B.table.id)||Z.set(B.table.id,{tableId:B.table.id,tableName:B.table.name,description:`${B.sourceColumn.name} \u2192 ${B.targetColumn.name}`});return Array.from(Z.values())}),t=Z=>{v.push({name:"tableEditor",params:{projectId:_,tableId:Z}})};return(Z,B)=>e(u)?(a(),w(Ie,{key:0,"full-width":""},{default:l(()=>[i("div",t1,[i("div",l1,[n(e(pa),null,{default:l(()=>[O(q(e(h).translate("i18n_relatedtables_related_tables")),1)]),_:1}),n(e(W),{gap:"middle",wrap:"wrap"},{default:l(()=>[(a(),d(le,null,oe(3,p=>n(e(We),{key:p,class:"related-table-card loading-card"},{title:l(()=>[n(e(W),{justify:"space-between",align:"center"},{default:l(()=>[n(e(Ge),{active:!0,paragraph:!1,title:{width:"120px"}}),n(e(La),{size:16,style:{opacity:"0.3"}})]),_:1})]),default:l(()=>[i("p",n1,[n(e(Qe),{size:16,style:{opacity:"0.3"}}),n(e(Ge),{active:!0,paragraph:!1,title:{width:"150px"}})])]),_:1})),64))]),_:1})])])]),_:1})):m.value.length>0?(a(),w(Ie,{key:1,"full-width":""},{default:l(()=>[i("div",o1,[i("div",r1,[i("h3",null,q(e(h).translate("i18n_relatedtables_related_tables_count",null,m.value.length)),1),n(e(W),{gap:"middle",wrap:"wrap"},{default:l(()=>[(a(!0),d(le,null,oe(m.value,p=>(a(),w(e(We),{key:p.tableId,title:p.tableName,class:"related-table-card",hoverable:"",onClick:x=>t(p.tableId)},{default:l(()=>[i("p",u1,[n(e(Qe),{size:16}),i("span",null,q(p.description),1)])]),_:2},1032,["title","onClick"]))),128))]),_:1})])])]),_:1})):z("",!0)}});const s1=Le(i1,[["__scopeId","data-v-55a3ad92"]]),d1=Q({__name:"AddData",props:{open:{type:Boolean},editableItem:{},table:{},loading:{type:Boolean}},emits:["save","close","update-nullable","record-change"],setup(o,{emit:c}){const r=c;return(v,_)=>(a(),w(e(Te),{title:e(h).translate("i18n_adddata_title"),width:720,open:o.open,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:_[2]||(_[2]=s=>r("close"))},{extra:l(()=>[n(e(De),null,{default:l(()=>[n(e(te),{onClick:_[0]||(_[0]=s=>r("close"))},{default:l(()=>[O(q(e(h).translate("i18n_adddata_cancel")),1)]),_:1}),n(e(te),{type:"primary",loading:o.loading,onClick:_[1]||(_[1]=s=>r("save"))},{default:l(()=>[O(q(e(h).translate("i18n_adddata_save")),1)]),_:1},8,["loading"])]),_:1})]),default:l(()=>[n(e(ze),{model:o.editableItem,layout:"vertical"},{default:l(()=>[(a(!0),d(le,null,oe(o.table.getUnprotectedColumns(),s=>(a(),w(e(Y),{key:s.id,label:s.name,required:!s.nullable},{default:l(()=>[o.editableItem?(a(),w(e(ce),{key:0,placeholder:s.type,value:o.editableItem[s.name],disabled:o.editableItem[s.name]===null,"onUpdate:value":u=>r("record-change",s.name,u)},ga({_:2},[s.nullable?{name:"addonAfter",fn:l(()=>[n(e(ha),{checked:o.editableItem[s.name]===null,"onUpdate:checked":u=>r("update-nullable",s.name,u)},{default:l(()=>[O(q(e(h).translate("i18n_adddata_null")),1)]),_:1},8,["checked","onUpdate:checked"])]),key:"0"}:void 0]),1032,["placeholder","value","disabled","onUpdate:value"])):z("",!0)]),_:2},1032,["label","required"]))),128))]),_:1},8,["model"])]),_:1},8,["title","open"]))}}),oa=(o,c)=>c.includes(o)?{status:"error",help:"There already is a column with this name in the table"}:{status:""},c1=Q({__name:"NewColumn",props:{open:{type:Boolean},table:{}},emits:["created","cancel"],setup(o,{emit:c}){const r=c,v=o,s=ge().params.projectId,u=y(()=>{var M;return((M=v.table)==null?void 0:M.getColumns().map(f=>f.name))||[]}),$=y(()=>oa(m.value.name,u.value)),I={name:"",type:null,default:"",nullable:!0,unique:!1},m=F(I),t=()=>{m.value={...I}},Z=F([{value:"reference",label:"reference",isLeaf:!1},...ta.map(M=>({value:M,label:M,isLeaf:!0}))]),B=M=>{if(!M)return;const f=M[M.length-1];switch(M.length){case 0:return;case 1:f.loading=!0,re.list(s).then(U=>{f.children=U.map(ee=>({value:ee.id,label:ee.name,isLeaf:!1})),f.loading=!1});return;case 2:f.loading=!0,re.get(s,f.value).then(U=>{f.children=U.getColumns().map(ee=>({type:ee.type,value:ee.id,label:ee.name,isLeaf:!0})),f.loading=!1});return}},p=(M,f)=>{if(!!M){if(M.length===1){m.value.type=M[0],m.value.foreignKey=void 0;return}if(M.length===3){const U=f[f.length-1];m.value.type=U.type,m.value.foreignKey={columnId:U.value}}}},x=M=>{const f=M.selectedOptions;return f?f.length===1?f[0].label:f.length===3?h.translate("i18n_newcolumn_reference_to",null,{tableName:f[1].label,columnName:f[2].label}):"":h.translate("i18n_newcolumn_select_type")},C=F({...{status:"success",message:"",fakeLoading:!1}}),S=()=>{C.value.fakeLoading=!0,J()};be(()=>m.value.type,()=>{!m.value.type||(m.value.default=Ia[m.value.type]||"",S())});const J=He.exports.debounce(async()=>{if(!m.value.default){C.value.status="success",C.value.message="",C.value.fakeLoading=!1;return}const M=`select (${m.value.default})::${m.value.type} `;qe.executeQuery(s,M,[]).then(f=>{C.value.status=f.errors.length>0?"error":"success",C.value.message=f.errors[0]||"",C.value.fakeLoading=!1})},500);function X(){r("cancel")}async function L(){if(!!v.table&&!(!m.value.name||!m.value.type))try{await v.table.addColumn(m.value),t(),r("created")}catch(M){M instanceof Error&&ke("Database error",M.message)}}return(M,f)=>(a(),w(e(Te),{title:e(h).translate("i18n_newcolumn_new_column"),width:720,open:v.open,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:X},{extra:l(()=>[n(e(De),null,{default:l(()=>[n(e(te),{onClick:X},{default:l(()=>[O(q(e(h).translate("i18n_newcolumn_cancel")),1)]),_:1}),n(e(te),{type:"primary",onClick:L},{default:l(()=>[O(q(e(h).translate("i18n_newcolumn_save")),1)]),_:1})]),_:1})]),default:l(()=>[n(e(ze),{model:m.value,layout:"vertical"},{default:l(()=>[n(e(Y),{key:"name",label:e(h).translate("i18n_newcolumn_name"),required:"","validate-status":$.value.status,help:$.value.help},{default:l(()=>[n(e(ce),{value:m.value.name,"onUpdate:value":f[0]||(f[0]=U=>m.value.name=U)},null,8,["value"])]),_:1},8,["label","validate-status","help"]),n(e(Y),{key:"type",label:e(h).translate("i18n_newcolumn_type"),required:""},{default:l(()=>[n(e(na),{options:Z.value,"load-data":B,"display-render":x,"allow-clear":!1,onChange:p},null,8,["options"])]),_:1},8,["label"]),n(e(Y),{key:"default-value",label:e(h).translate("i18n_newcolumn_default_value"),"validate-status":C.value.status,help:C.value.message},{default:l(()=>[n(e(ce),{value:m.value.default,"onUpdate:value":f[1]||(f[1]=U=>m.value.default=U),placeholder:e(h).translate("i18n_newcolumn_null_placeholder"),onInput:S},{suffix:l(()=>[C.value.fakeLoading?(a(),w(e($e),{key:0})):z("",!0),!C.value.fakeLoading&&C.value.status==="success"?(a(),w(e(ea),{key:1,size:"18"})):z("",!0),!C.value.fakeLoading&&C.value.status==="error"?(a(),w(e(la),{key:2,size:"18"})):z("",!0)]),_:1},8,["value","placeholder"])]),_:1},8,["label","validate-status","help"]),n(e(Y),{key:"nullable",label:e(h).translate("i18n_newcolumn_nullable")},{default:l(()=>[n(e(ye),{checked:m.value.nullable,"onUpdate:checked":f[2]||(f[2]=U=>m.value.nullable=U)},null,8,["checked"])]),_:1},8,["label"]),n(e(Y),{key:"unique",label:e(h).translate("i18n_newcolumn_unique")},{default:l(()=>[n(e(ye),{checked:m.value.unique,"onUpdate:checked":f[3]||(f[3]=U=>m.value.unique=U)},null,8,["checked"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","open"]))}}),m1={class:"icon"},v1=Q({__name:"OrderByIcon",props:{column:{},orderBy:{}},emits:["reorder"],setup(o,{emit:c}){const r=c;return(v,_)=>{var s,u,$;return a(),d("div",m1,[((s=o.orderBy)==null?void 0:s.column)!==String(o.column.title)?(a(),w(e(Da),{key:0,size:"16",onClick:_[0]||(_[0]=I=>r("reorder",String(o.column.title)))})):z("",!0),((u=o.orderBy)==null?void 0:u.column)===String(o.column.title)&&o.orderBy.direction==="asc"?(a(),w(e(Fa),{key:1,size:"16",onClick:_[1]||(_[1]=I=>r("reorder",String(o.column.title)))})):z("",!0),(($=o.orderBy)==null?void 0:$.column)===String(o.column.title)&&o.orderBy.direction==="desc"?(a(),w(e(ja),{key:2,size:"16",onClick:_[2]||(_[2]=I=>r("reorder",String(o.column.title)))})):z("",!0)])}}});const Ye=Le(v1,[["__scopeId","data-v-6ae5cef6"]]);function Xe(o){return`"${o.replace(/"/g,'""')}"`}function f1(o){return o==null?"NULL":`'${String(o).replace(/'/g,"''")}'`}function p1(o,c){if(o.type==="search")return!o.q||o.q.trim()==="","";if(o.type==="and"){const r=o.conditions.filter(s=>s.value!==""&&s.value!==null);if(r.length===0)return"";const v=r.map(s=>{const u=Xe(s.field),$=f1(s.value);return`${u} = ${$}`});return`SELECT * FROM ${Xe(c)} WHERE ${v.join(" AND ")}`}return""}function g1(o,c){const r=F(c||{type:"search",q:""}),v=y(()=>o.value.getColumns().filter(p=>r.value.type==="and"&&!r.value.conditions.some(x=>x.field===p.name))),_=y(()=>o.value.getColumns().filter(p=>r.value.type==="and"&&!r.value.conditions.some(x=>x.field===p.name)));function s(){r.value={type:"and",conditions:[{type:"eq",field:"id",value:""}]}}function u(p){p==="search"?r.value={type:"search",q:""}:s()}function $(p){r.value.type==="and"&&r.value.conditions.push({type:"eq",field:String(p),value:""})}function I(p){r.value.type==="and"&&(r.value.conditions=r.value.conditions.filter(x=>x.field!==p))}function m(p){r.value.type==="search"&&(r.value={type:"search",q:p})}function t(p){if(r.value.type!=="and")return;const x=r.value.conditions.find(A=>A.field===p);x&&(x.field=p)}function Z(p,x){if(r.value.type!=="and")return;const A=r.value.conditions.find(C=>C.field===p);A&&(A.value=x)}function B(){return p1(r.value,o.value.name)}return{searchValue:r,filteredColumns:v,nonFilteredColumns:_,changeSearchType:u,addCondition:$,removeCondition:I,updateSearch:m,updateConditionField:t,updateConditionValue:Z,getSqlQuery:B}}const h1=Q({__name:"TableFilter",props:{search:{},table:{},data:{}},emits:["update:search"],setup(o,{emit:c}){const r=o,v=ge(),_=y(()=>r.table),{searchValue:s,filteredColumns:u,nonFilteredColumns:$,changeSearchType:I,addCondition:m,removeCondition:t,updateSearch:Z,updateConditionField:B,updateConditionValue:p,getSqlQuery:x}=g1(_,r.search),A=[{label:h.translate("i18n_tablefilter_search"),value:"search"},{label:h.translate("i18n_tablefilter_advanced"),value:"and"}],C=c;function S(f){I(f),C("update:search",s.value)}function P(f){m(String(f)),C("update:search",s.value)}function J(f){t(f),C("update:search",s.value)}function X(f){Z(f),C("update:search",s.value)}function L(f){B(f),C("update:search",s.value)}const M=(f,U)=>{p(f,U),C("update:search",s.value)};return be(()=>r.search,f=>{s.value=f},{deep:!0}),(f,U)=>{const ee=Be("RouterLink");return a(),w(e(W),{vertical:"",align:"start",gap:"small"},{default:l(()=>[n(e(W),{align:"center",justify:"space-between",style:{width:"100%"}},{default:l(()=>[n(e(Ca),{options:A,value:e(s).type,"onUpdate:value":S},null,8,["value"]),e(s).type==="and"?(a(),w(ee,{key:0,to:{name:"sql",params:{projectId:e(v).params.projectId},query:{filter:e(x)()}}},{default:l(()=>[n(de,{type:"text",underline:""},{default:l(()=>[O(q(e(h).translate("i18n_tablefilter_edit_as_sql")),1)]),_:1})]),_:1},8,["to"])):z("",!0)]),_:1}),e(s).type==="search"?(a(),w(e(W),{key:0},{default:l(()=>[n(e(ya),{value:e(s).q,"onUpdate:value":X},null,8,["value"])]),_:1})):e(s).type==="and"?(a(),w(e(W),{key:1,vertical:"",gap:"small"},{default:l(()=>[(a(!0),d(le,null,oe(e(s).conditions,E=>(a(),w(e(W),{key:E.field,gap:"large",align:"center"},{default:l(()=>[n(e(Me),{value:E.field,"onUpdate:value":[G=>E.field=G,G=>L(E.field)],style:{width:"120px"}},{default:l(()=>[(a(!0),d(le,null,oe(e(u),G=>(a(),w(e(Ue),{key:G.id,value:G.name},{default:l(()=>[O(q(G.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","onUpdate:value"]),n(e(kt)),n(e(ce),{value:E.value,"onUpdate:value":[G=>E.value=G,G=>M(E.field,G)],style:{width:"120px"}},null,8,["value","onUpdate:value"]),n(e(ba),{style:{cursor:"pointer"},onClick:G=>J(E.field)},null,8,["onClick"])]),_:2},1024))),128)),e($)[0]?(a(),w(e(W),{key:0,justify:"space-between"},{default:l(()=>[n(e(Me),{style:{width:"120px"},value:"","onUpdate:value":P},{default:l(()=>[(a(!0),d(le,null,oe(e($),E=>(a(),w(e(Ue),{key:E.id,value:E.name},{default:l(()=>[O(q(E.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})):z("",!0)]),_:1})):z("",!0)]),_:1})}}}),y1={class:"twin-container"},b1={class:"fullwidth-input"},_1={class:"fullwidth-input"},H1={class:"using-container"},$1={class:"fullwidth-input"},k1=Q({__name:"UpdateColumn",props:{open:{type:Boolean},table:{},column:{}},emits:["updated","cancel"],setup(o,{emit:c}){const r=c,v=o,s=ge().params.projectId,u=F(v.column.type);aa(async()=>{if(!v.column.foreignKey)return;u.value=h.translate("i18n_updatecolumn_loading");const V=await re.fromColumnId(s,v.column.foreignKey.columnId),g=V.getColumn(v.column.foreignKey.columnId);u.value=h.translate("i18n_updatecolumn_reference_to",null,{tableName:V.name,columnName:g.name})});const $=y(()=>{var V;return((V=v.table)==null?void 0:V.getColumns().map(g=>g.record.initialState.name))||[]}),I=y(()=>v.column.name===v.column.record.initialState.name?{status:"",help:""}:oa(v.column.name,$.value)),{result:m,loading:t}=Se(async()=>v.table.select({},10,0).then(({total:V})=>V));function Z(){v.column.record.resetChanges(),r("cancel")}const p=F({status:"success",message:"",fakeLoading:!1}),x=()=>{p.value.fakeLoading=!0,A()},A=He.exports.debounce(async()=>{if(!v.column.default){p.value.status="success",p.value.message="",p.value.fakeLoading=!1;return}const V=`select (${v.column.default})::${v.column.type} `,g=await qe.executeQuery(s,V,[]);p.value.status=g.errors.length>0?"error":"success",p.value.message=g.errors[0]||"",p.value.fakeLoading=!1},500),C=F([{value:"reference",label:"reference",isLeaf:!1},...ta.filter(V=>V!==v.column.type).map(V=>({value:V,label:V,isLeaf:!0}))]),S=V=>{if(!V)return;const g=V[V.length-1];switch(V.length){case 0:return;case 1:g.loading=!0,re.list(s).then(N=>{g.children=N.map(se=>({value:se.id,label:se.name,isLeaf:!1})),g.loading=!1});return;case 2:g.loading=!0,re.get(s,g.value).then(N=>{g.children=N.getColumns().map(se=>({type:se.type,value:se.id,label:se.name,isLeaf:!0})),g.loading=!1});return}},P=V=>{const g=V.selectedOptions;return g?g.length===1?g[0].label:g.length===3?h.translate("i18n_updatecolumn_reference_to",null,{tableName:g[1].label,columnName:g[2].label}):"":h.translate("i18n_updatecolumn_select_type")},J=(V,g)=>{if(!!V){if(V.length===1){v.column.type=V[0],v.column.foreignKey=null;return}if(V.length===3){if(v.column.foreignKey&&v.column.foreignKey.columnId===V[2])return;const N=g[g.length-1];v.column.type=N.type,v.column.foreignKey={columnId:N.value}}}};async function X(V){await Ra(h.translate("i18n_updatecolumn_confirm_delete"))&&await L(V)}async function L(V){var g,N;await((N=(g=v.table)==null?void 0:g.getColumn(V))==null?void 0:N.delete()),r("updated")}const M=()=>m.value===0||t.value?!1:v.column.record.hasChangesDeep("type"),f=F({type:"default"}),U=()=>{v.column.type=v.column.record.initialState.type,f.value={type:"default"}};function ee(V,g){return g==="varchar"||V==="int"&&g==="boolean"||V==="boolean"&&g==="int"}be(()=>v.column.type,()=>{x(),G.value||(f.value={type:"user-defined",using:fe.value,mandatory:!0})});const G=y(()=>f.value.type==="default"&&ee(v.column.record.initialState.type,v.column.type)),_e=y(()=>!ee(v.column.record.initialState.type,v.column.type));function ue(V){V?f.value={type:"default"}:f.value={type:"user-defined",using:fe.value,mandatory:!1}}function Ve(V){if(f.value.type==="default")throw new Error("Can't change using when using default casting");f.value.using=V!=null?V:""}const ie=()=>_e.value?!0:M()&&f.value.type==="user-defined",fe=y(()=>`${v.column.record.initialState.name}::${v.column.type}`);async function we(){if(!v.column)return;let V=f.value.type==="default"?fe.value:f.value.using;m.value===0&&(V=`${v.column.record.initialState.name}::text::${v.column.type}`);try{await v.column.update(V),r("updated")}catch(g){g instanceof Error&&ke("Database error",g.message)}}return(V,g)=>(a(),w(e(Te),{title:e(h).translate("i18n_updatecolumn_edit_column"),width:720,open:o.open,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:Z},{extra:l(()=>[n(e(De),null,{default:l(()=>[n(e(te),{onClick:Z},{default:l(()=>[O(q(e(h).translate("i18n_updatecolumn_cancel")),1)]),_:1}),n(e(te),{type:"primary",onClick:we},{default:l(()=>[O(q(e(h).translate("i18n_updatecolumn_save")),1)]),_:1})]),_:1})]),footer:l(()=>[n(de,{danger:"",onClick:g[7]||(g[7]=N=>X(String(o.column.id)))},{default:l(()=>[O(q(e(h).translate("i18n_updatecolumn_delete")),1)]),_:1})]),default:l(()=>[n(e(ze),{model:o.column,layout:"vertical"},{default:l(()=>[n(e(Y),{key:"name",label:e(h).translate("i18n_updatecolumn_name"),"validate-status":I.value.status,help:I.value.help},{default:l(()=>[n(e(ce),{value:o.column.name,"onUpdate:value":g[0]||(g[0]=N=>o.column.name=N)},null,8,["value"])]),_:1},8,["label","validate-status","help"]),i("div",y1,[i("span",b1,[n(e(Y),{key:"type",label:e(h).translate("i18n_updatecolumn_current_type")},{default:l(()=>[n(e(Me),{value:u.value,"onUpdate:value":g[1]||(g[1]=N=>u.value=N),"default-active-first-option":"",disabled:""},null,8,["value"])]),_:1},8,["label"])]),n(e(Na),{class:"right-arrow"}),i("span",_1,[n(e(Y),{key:"new-type",label:e(h).translate("i18n_updatecolumn_new_type")},{default:l(()=>[n(e(na),{options:C.value,"load-data":S,"display-render":P,"allow-clear":!0,onClear:U,onChange:J},null,8,["options"])]),_:1},8,["label"])])]),n(e(Y),{key:"default-value",label:e(h).translate("i18n_updatecolumn_default_value"),"validate-status":p.value.status,help:p.value.message},{default:l(()=>[n(e(ce),{value:o.column.default,"onUpdate:value":g[2]||(g[2]=N=>o.column.default=N),placeholder:e(h).translate("i18n_updatecolumn_null_placeholder"),onInput:x},{suffix:l(()=>[p.value.fakeLoading?(a(),w(e($e),{key:0,size:"small"})):z("",!0),!p.value.fakeLoading&&p.value.status==="success"?(a(),w(e(ea),{key:1,size:18})):z("",!0),!p.value.fakeLoading&&p.value.status==="error"?(a(),w(e(la),{key:2,size:18})):z("",!0)]),_:1},8,["value","placeholder"])]),_:1},8,["label","validate-status","help"]),i("div",H1,[M()?(a(),w(e(Y),{key:"default-casting",label:e(h).translate("i18n_updatecolumn_use_default_casting")},{default:l(()=>[n(e(ye),{checked:G.value,disabled:_e.value,"onUpdate:checked":g[3]||(g[3]=N=>ue(!!N))},null,8,["checked","disabled"])]),_:1},8,["label"])):z("",!0),i("span",$1,[M()?(a(),w(e(Y),{key:"using",label:e(h).translate("i18n_updatecolumn_using")},{default:l(()=>[n(e(ce),{value:f.value.type==="user-defined"?f.value.using:fe.value,disabled:!ie(),onInput:g[4]||(g[4]=N=>Ve(N.target.value))},null,8,["value","disabled"])]),_:1},8,["label"])):z("",!0)])]),n(e(W),null,{default:l(()=>[n(e(Y),{key:"nullable",label:e(h).translate("i18n_updatecolumn_nullable")},{default:l(()=>[n(e(ye),{checked:o.column.nullable,"onUpdate:checked":g[5]||(g[5]=N=>o.column.nullable=N)},null,8,["checked"])]),_:1},8,["label"]),n(e(Y),{key:"unique",label:e(h).translate("i18n_updatecolumn_unique")},{default:l(()=>[n(e(ye),{checked:o.column.unique,"onUpdate:checked":g[6]||(g[6]=N=>o.column.unique=N)},null,8,["checked"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","open"]))}});const V1=Le(k1,[["__scopeId","data-v-f24d9ba7"]]),w1={style:{overflow:"hidden","white-space":"wrap"}},Z1={key:1},A1={key:0,class:"table-row null"},C1={class:"foreign-key-popover"},M1={key:0,class:"popover-loading"},I1={class:"field-label"},S1={class:"foreign-key-popover"},x1={key:0,class:"popover-loading"},L1={class:"field-label"},z1={class:"field-value"},B1={key:2,class:"foreign-key-error"},T1={key:1,class:"field-value"},q1={key:2,class:"foreign-key-error"},D1={class:"button-container"},j1={class:"button-container"},N1={class:"button-container"},F1={class:"button-container"},R1=Q({__name:"TableData",props:{table:{},loading:{type:Boolean}},emits:["refresh"],setup(o,{emit:c}){var Ne;const r=o,v=c,_=F(1),s=F(10),u=y(()=>{var b,H;return{total:(H=(b=ue.value)==null?void 0:b.total)!=null?H:0,current:_.value,pageSize:s.value,totalBoundaryShowSizeChanger:10,showSizeChanger:!0,pageSizeOptions:["10","25","50","100"],onChange:async(j,k)=>{_.value=j,s.value=k,await ie()}}}),$=F([]),I=F(!1),m=F(null),t=F(null),Z=F(!1),B=F(null),p=ge(),x=xe(),A=F(typeof p.query.q=="string"?p.query.q:""),C=y(()=>{try{return JSON.parse(p.query.where)}catch{return{}}}),S=F(Object.keys(C.value).length>0?{type:"and",conditions:Object.entries(C.value).reduce((b,[H,j])=>[...b,{type:"eq",field:H,value:j}],[])}:{type:"search",q:A.value}),P=y(()=>S.value.type==="search"?S.value.q:""),J=y(()=>S.value.type==="search"?{}:S.value.conditions.reduce((b,H)=>({...b,[H.field]:H.value}),{}));function X(b){b.type==="search"?x.replace({query:{q:b.q}}):x.replace({query:{where:JSON.stringify(J.value)}}),_.value=1,ie()}const L=F({type:"idle"});function M(){L.value={type:"idle"}}async function f(){M(),v("refresh")}be(()=>r.table,()=>{ua(),ie()});function U(){L.value={type:"creating"}}const ee=b=>{if(!r.table)throw new Error("Table not found");L.value={type:"editing",column:r.table.getColumn(b)}},E=F(null),G=b=>{var H;((H=E.value)==null?void 0:H.column)===b?E.value={column:b,direction:E.value.direction==="asc"?"desc":"asc"}:E.value={column:b,direction:"asc"},ie()},_e=y(()=>{var b;return((b=ue.value)==null?void 0:b.rows.length)===1}),{result:ue,loading:Ve,refetch:ie}=Se(async()=>{const[{rows:b,total:H},j]=await Promise.all([r.table.select(J.value,(_.value-1)*s.value,s.value,P.value,E.value||void 0),Promise.all(r.table.getColumns().filter(k=>k.foreignKey).map(k=>re.fromColumnId(p.params.projectId,k.foreignKey.columnId).then(K=>[k.name,K])))]);return{rows:b,total:H,columns:j.reduce((k,[K,R])=>({...k,[K]:R}),{})}}),fe=(b,H)=>{var R,ae;const j=(R=r.table)==null?void 0:R.getColumns().find(T=>T.name===b);if(!j)return"";const k=(ae=ue.value)==null?void 0:ae.columns[j.name],K=k==null?void 0:k.getColumns().find(T=>{var ne;return T.id===((ne=j.foreignKey)==null?void 0:ne.columnId)});return!k||!K?"":{name:"tableEditor",params:{projectId:p.params.projectId,tableId:k.id},query:{where:JSON.stringify({[K.name]:H})}}},we=async(b,H)=>{var j;I.value=!0,m.value=null,t.value=null;try{const k=(j=r.table)==null?void 0:j.getColumns().find(T=>T.name===b);if(!k||!k.foreignKey)return;const K=await Oe.fromID(p.params.projectId,k.foreignKey.columnId),R=await re.get(p.params.projectId,K.tableId),ae=await R.select({[K.name]:H},0,1,"");ae.rows.length>0&&(m.value=ae.rows[0],t.value=R)}catch(k){console.error("Error loading foreign key data:",k)}finally{I.value=!1}},V=b=>{if(!t.value)return!1;const H=t.value.getColumns().find(j=>j.name===b);return!!(H!=null&&H.foreignKey)},g=async(b,H)=>{if(!!t.value){Z.value=!0,B.value=null;try{const j=t.value.getColumns().find(ae=>ae.name===b);if(!j||!j.foreignKey)return;const k=await Oe.fromID(p.params.projectId,j.foreignKey.columnId),R=await(await re.get(p.params.projectId,k.tableId)).select({[k.name]:H},0,1,"");R.rows.length>0&&(B.value=R.rows[0])}catch(j){console.error("Error loading nested foreign key data:",j)}finally{Z.value=!1}}},N=(b,H)=>{L.value.type==="adding"&&(L.value.editableItem[b]=H)},se=(b,H)=>{L.value.type==="adding"&&(L.value.editableItem[b]=H?null:"")},je=()=>[...r.table.getColumns().map(b=>{var H;return{key:(H=b.id)!=null?H:"",title:b.name,dataIndex:b.name,width:220,resizable:!0,ellipsis:!1}}),{key:"action",title:"",fixed:"right",width:100,align:"center",resizable:!1,ellipsis:!1}],ra=je(),pe=F(ra),ua=()=>pe.value=je();function ia(b,H){const j=H;if(!(j!=null&&j.key))return;const k=pe.value.findIndex(K=>K.key===j.key);k!==-1&&(pe.value[k].width=b)}const Ze=y(()=>{var b;return((b=ue.value)==null?void 0:b.rows.map(H=>({key:H.id,...H})))||[]});let sa=_a((Ne=r.table)==null?void 0:Ne.getUnprotectedColumns().reduce((b,H)=>({...b,[H.name]:""}),{}));const Ae=F(!1);async function da(){if(!(!r.table||!sa||L.value.type!=="adding")){Ae.value=!0;try{L.value.editableItem.id&&(typeof L.value.editableItem.id=="string"||typeof L.value.editableItem.id=="number")?await r.table.updateRow(L.value.editableItem.id.toString(),L.value.editableItem):await r.table.insertRow(L.value.editableItem),ie(),M()}catch(b){b instanceof Error&&ke("Database error",b.message)}finally{Ae.value=!1}}}const ca=async b=>{if(!(!ue.value||!ue.value.rows.find(H=>H.id===b)))try{await r.table.deleteRow(b),_e.value&&(_.value=Math.max(1,_.value-1)),ie()}catch(H){H instanceof Error&&ke("Database error",H.message)}},ma=b=>{var ae;const H=(ae=Ze.value)==null?void 0:ae.filter(T=>b===T.key)[0],j=r.table.getColumns(),k=j.map(T=>T.name),K=j.filter(T=>T.type==="json").map(T=>T.name),R=He.exports.pick(He.exports.cloneDeep(H),k);K.forEach(T=>{R[T]&&(R[T]=JSON.stringify(R[T]))}),L.value={type:"adding",editableItem:R}};return(b,H)=>{const j=Be("RouterLink");return a(),w(Ie,{"full-width":""},{default:l(()=>[n(e(W),{justify:"space-between",style:{"margin-bottom":"16px"},gap:"middle"},{default:l(()=>[n(h1,{search:S.value,"onUpdate:search":[H[0]||(H[0]=k=>S.value=k),X],table:o.table,data:Ze.value},null,8,["search","table","data"]),n(e(W),{justify:"flex-end",gap:"middle"},{default:l(()=>[n(de,{type:"primary",onClick:U},{default:l(()=>[n(e(c0)),O(q(e(h).translate("i18n_tabledata_create_column")),1)]),_:1}),pe.value.length===3?(a(),w(e(he),{key:0,title:e(h).translate("i18n_tabledata_create_column_first")},{default:l(()=>[n(de,{disabled:!0,onClick:H[1]||(H[1]=k=>L.value={type:"adding",editableItem:{}})},{default:l(()=>[n(e(Je)),O(q(e(h).translate("i18n_tabledata_add_data")),1)]),_:1})]),_:1},8,["title"])):(a(),w(de,{key:1,onClick:H[2]||(H[2]=k=>L.value={type:"adding",editableItem:{}})},{default:l(()=>[n(e(Je)),O(q(e(h).translate("i18n_tabledata_add_data")),1)]),_:1}))]),_:1})]),_:1}),n(e(Va),{columns:pe.value,"data-source":Ze.value,pagination:u.value,bordered:"",loading:e(Ve)||o.loading,scroll:{x:1e3,y:720},size:"small",onResizeColumn:ia},{headerCell:l(({column:k})=>[k.title!=="id"&&k.title!=="created_at"&&k.key!=="action"?(a(),w(e(W),{key:0,align:"center",justify:"space-between",gap:"small"},{default:l(()=>[n(e(W),{style:{overflow:"hidden","white-space":"wrap"},align:"center",gap:"small"},{default:l(()=>[i("span",w1,q(k.title),1),n(e(W),null,{default:l(()=>[n(Ye,{column:k,"order-by":E.value,onReorder:G},null,8,["column","order-by"])]),_:2},1024)]),_:2},1024),n(de,{type:"text",onClick:K=>ee(String(k.key))},{default:l(()=>[n(e(Ba),{size:"18"})]),_:1},8,["onClick"])]),_:2},1024)):(a(),d("span",Z1,[n(e(W),{align:"center",gap:"small"},{default:l(()=>[O(q(k.title)+" ",1),k.key!=="action"?(a(),w(Ye,{key:0,column:k,"order-by":E.value,onReorder:G},null,8,["column","order-by"])):z("",!0)]),_:2},1024)]))]),bodyCell:l(({column:k,text:K,record:R})=>{var ae;return[pe.value.map(T=>T.title).includes(k.dataIndex)?(a(),d(le,{key:0},[K===null?(a(),d("div",A1,q(e(h).translate("i18n_tabledata_null")),1)):(ae=o.table.getColumns().find(T=>T.name===k.dataIndex))!=null&&ae.foreignKey?(a(),w(e(Ee),{key:1,trigger:["hover"],placement:"right",onMouseenter:T=>we(k.dataIndex,K)},{content:l(()=>[i("div",C1,[I.value?(a(),d("div",M1,[n(e($e),{size:"small"})])):m.value&&t.value?(a(!0),d(le,{key:1},oe(m.value,(T,ne)=>(a(),d("div",{key:ne,class:"foreign-key-field"},[i("div",I1,q(ne),1),V(ne)&&T!==null?(a(),w(e(Ee),{key:0,trigger:["hover"],placement:"right",onMouseenter:Ce=>g(ne,T)},{content:l(()=>[i("div",S1,[Z.value?(a(),d("div",x1,[n(e($e),{size:"small"})])):B.value?(a(!0),d(le,{key:1},oe(B.value,(Ce,Fe)=>(a(),d("div",{key:Fe,class:"foreign-key-field"},[i("div",L1,q(Fe),1),i("div",z1,q(Ce!==null?Ce:""),1)]))),128)):(a(),d("div",B1,q(e(h).translate("i18n_tabledata_failed_to_load")),1))])]),default:l(()=>[n(e(Ke),{class:"nested-fk-tag",color:"blue"},{default:l(()=>[O(q(T),1)]),_:2},1024)]),_:2},1032,["onMouseenter"])):(a(),d("div",T1,q(T!==null?T:""),1))]))),128)):(a(),d("div",q1,q(e(h).translate("i18n_tabledata_failed_to_load")),1))])]),default:l(()=>[n(e(Ke),{color:"blue",class:"foreign-key-tag"},{default:l(()=>[n(j,{to:fe(k.dataIndex,K),target:"_blank",class:"foreign-key-link"},{default:l(()=>[O(q(K),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2},1032,["onMouseenter"])):(a(),d("div",{key:2,class:Ha(["table-row",{expanded:$.value.includes(R.id)}])},q(K),3))],64)):z("",!0),k.key==="action"?(a(),w(e(W),{key:1,gap:"small",justify:"center"},{default:l(()=>[$.value.includes(R.id)?(a(),w(e(te),{key:0,class:"icons",onClick:T=>$.value=$.value.filter(ne=>ne!==R.id)},{icon:l(()=>[n(e(he),{title:e(h).translate("i18n_tabledata_collapse")},{default:l(()=>[i("div",D1,[n(e(L0),{size:15})])]),_:1},8,["title"])]),_:1},8,["onClick"])):(a(),w(e(te),{key:1,onClick:T=>$.value.push(R.id)},{icon:l(()=>[n(e(he),{title:e(h).translate("i18n_tabledata_expand")},{default:l(()=>[i("div",j1,[n(e(at),{size:15})])]),_:1},8,["title"])]),_:1},8,["onClick"])),n(e(te),{onClick:T=>ma(R.id)},{icon:l(()=>[n(e(he),{title:e(h).translate("i18n_tabledata_edit")},{default:l(()=>[i("div",N1,[n(e(zl),{size:15})])]),_:1},8,["title"])]),_:1},8,["onClick"]),n(e($a),{title:e(h).translate("i18n_tabledata_sure_to_delete"),onConfirm:T=>ca(R.id)},{default:l(()=>[n(e(te),null,{icon:l(()=>[n(e(he),{title:e(h).translate("i18n_tabledata_delete")},{default:l(()=>[i("div",F1,[n(e(ka),{size:15})])]),_:1},8,["title"])]),_:1})]),_:1},8,["title","onConfirm"])]),_:2},1024)):z("",!0)]}),_:1},8,["columns","data-source","pagination","loading"]),L.value.type==="adding"?(a(),w(d1,{key:0,open:L.value.type==="adding",table:r.table,"editable-item":L.value.editableItem,loading:Ae.value,onUpdateNullable:se,onRecordChange:N,onClose:M,onCancel:M,onSave:da},null,8,["open","table","editable-item","loading"])):z("",!0),L.value.type==="creating"?(a(),w(c1,{key:1,open:L.value.type==="creating",table:r.table,onClose:M,onCancel:M,onCreated:f},null,8,["open","table"])):z("",!0),L.value.type==="editing"?(a(),w(V1,{key:2,open:L.value.type==="editing",column:L.value.column,table:o.table,onUpdated:f,onClose:M,onCancel:M},null,8,["open","column","table"])):z("",!0)]),_:1})}}});const U1={style:{"font-size":"16px"}},Cn=Q({__name:"TableEditor",setup(o){const c=xe(),r=ge(),v=Pe(()=>{if(typeof r.params.tableId=="string")return r.params.tableId;throw new Error("tableId is not a string")}),_=Pe(()=>{if(typeof r.params.projectId=="string")return r.params.projectId;throw new Error("projectId is not a string")}),s=F(!1),u=fa(),$=()=>{var x;s.value=!1,(x=m.value)==null||x.table.save(),Z()},I=y(()=>m.value?m.value.table.name:h.translate("i18n_tableeditor_loading")),{result:m,loading:t,refetch:Z}=Se(()=>Promise.all([qe.get(_.value).then(async x=>{const A=await Ma.get(x.organizationId),P=(await new Sa().list(A.id)).find(J=>J.id===x.folderId);if(!P)throw new Error("Folder not found");return{project:x,organization:A,folder:P}}),re.get(_.value,v.value)]).then(([{project:x,organization:A,folder:C},S])=>({project:x,organization:A,table:S,folder:C})));be([v,_],()=>{Z()});const B=y(()=>!t.value&&m.value?[{label:h.translate("i18n_tableeditor_my_organizations"),path:"/organizations"},{label:m.value.organization.name,path:`/organizations/${m.value.organization.id}`},{label:m.value.folder.name,path:`/organizations/${m.value.organization.id}#${m.value.folder.id}`},{label:m.value.project.name,path:`/projects/${m.value.project.id}/tables`}]:void 0);function p(){c.push({name:"tables",params:{projectId:_.value}})}return aa(()=>{const x=Re.subscribe("columnCreated",({tableId:A})=>{A===v.value&&Z()});wa(()=>{Re.unsubscribe(x)})}),(x,A)=>{const C=Be("RouterLink");return a(),w(va,{key:v.value},{navbar:l(()=>[n(e(Ua),{style:{padding:"5px 25px",border:"1px solid #f0f0f0"},onBack:p},{title:l(()=>[n(e(W),{align:"center",gap:"small"},{default:l(()=>[i("span",U1,q(I.value),1),n(de,{type:"text",onClick:A[0]||(A[0]=S=>s.value=!0)},{default:l(()=>[n(e(ml),{size:"16"})]),_:1})]),_:1}),n(e(Za),{title:e(h).translate("i18n_tableeditor_change_table_name"),open:s.value,onCancel:A[2]||(A[2]=S=>s.value=!1),onOk:$},{default:l(()=>[e(m)?(a(),w(e(ce),{key:0,value:e(m).table.name,"onUpdate:value":A[1]||(A[1]=S=>e(m).table.name=S)},null,8,["value"])):z("",!0)]),_:1},8,["title","open"])]),subTitle:l(()=>[B.value?(a(),w(e(Ta),{key:0,style:{margin:"0px 20px"}},{default:l(()=>[(a(!0),d(le,null,oe(B.value,(S,P)=>(a(),w(e(qa),{key:P},{default:l(()=>[n(C,{to:S.path},{default:l(()=>[O(q(S.label),1)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1})):z("",!0)]),extra:l(()=>[n(de,{type:"link",onClick:A[3]||(A[3]=S=>e(u).toggle())},{default:l(()=>[n(e(Aa)),O(" "+q(e(h).translate("i18n_tableeditor_ai_assistant")),1)]),_:1})]),_:1})]),content:l(()=>[e(m)?(a(),w(R1,{key:0,loading:e(t),table:e(m).table,onRefresh:A[4]||(A[4]=S=>e(Z)())},null,8,["loading","table"])):z("",!0),e(m)?(a(),w(s1,{key:1,table:e(m).table},null,8,["table"])):z("",!0)]),chat:l(()=>[n(xa)]),_:1})}}});export{Cn as default};
//# sourceMappingURL=TableEditor.9c221d1d.js.map
