import{_ as ie}from"./AbstraButton.vue_vue_type_script_setup_true_lang-BA8vm3Vt.js";import{B as ca}from"./BaseLayout-D07UP4Mt.js";import{H as Ye,u as ma,o as je}from"./omniChatStore-A51dz7dE.js";import{a as Se}from"./asyncComputed-DgaL3uME.js";import{a as Q,i as T,c as g,b as s,e as a,f as de,g as L,h as r,m as ce,ac as pe,ad as Ie,p as _,u as e,w as t,j as l,S as R,U as B,ae as p,ak as fa,W as le,v as W,M as te,aN as Le,aK as Y,aL as se,ba as va,bA as pa,aJ as xe,B as ae,r as E,H as ye,a9 as _e,b6 as He,cl as he,a4 as ze,by as ga,b7 as Ae,b9 as Fe,d5 as ha,D as Xe,P as ya,A as ge,bc as Ee,bl as Ue,E as ba,d6 as _a,aP as Ha,bk as $a,x as Ke,Y as ka,a8 as Va}from"./jwt-decode.esm-BUNoeFQb.js";import{G as wa}from"./PhSparkle.vue-CCBnsvKu.js";import{i as Be,p as $e,j as Ca}from"./router-Ce7vux9G.js";import{O as Za}from"./organization-e_Hz_czz.js";import{P as Te}from"./project-C96O3OQf.js";import{p as ea,T as ne,d as Aa,C as Pe}from"./tables-B6ab137X.js";import{F as Ma}from"./folder-9ol1fknW.js";import{_ as Sa}from"./ConsoleOmniChat.vue_vue_type_script_setup_true_lang-CqyegRwC.js";import{C as Me}from"./ContentLayout-CSB8gx6n.js";import{F as Ia}from"./PhArrowSquareOut.vue-DLcVaWG7.js";import{u as La}from"./useTables-BGr0ekFh.js";import{C as Re,S as Oe}from"./index-D0-ndXtW.js";import{F as xa}from"./PhGear.vue-CVCBkNke.js";import{S as qe,B as za,A as Ba}from"./index-DH2bnUzH.js";import{I as aa,F as Ta,G as qa,a as Da}from"./PhWarningCircle.vue-Aupte8CO.js";import{A as ta}from"./index-DU_62uMQ.js";import{F as Na}from"./PhArrowUp.vue-xEg2JpHS.js";import{a as ja}from"./ant-design-BP4kJ6bv.js";import{A as Fa}from"./index-ChxKkTqy.js";import"./record-B55Q18RJ.js";import"./uuid-tzkkQ6hu.js";import"./PhCopySimple.vue-BluCLSU1.js";import"./ts.worker-CvuE0-uF.js";import"./string-BfzpEcI5.js";import"./OmniChat-DuVyn3WX.js";import"./index-DiHMIDQK.js";import"./PhClockCounterClockwise.vue-Cx8NLfPt.js";import"./LoadingOutlined-C0fSFaSO.js";import"./file-Cgb9rAcN.js";import"./AbstraLogo.vue_vue_type_script_setup_true_lang-iXy0uO6n.js";import"./Logo-BU2eUgbG.js";import"./index-BROuKhLS.js";import"./PhDatabase.vue-CaQF93Sw.js";(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},d=new Error().stack;d&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[d]="140dee35-07e2-4937-afea-0da843dc89d0",n._sentryDebugIdIdentifier="sentry-dbid-140dee35-07e2-4937-afea-0da843dc89d0")}catch{}})();const Ea=["width","height","fill","transform"],Ua={key:0},Ka=r("path",{d:"M80,28H56A20,20,0,0,0,36,48V208a20,20,0,0,0,20,20H80a20,20,0,0,0,20-20V48A20,20,0,0,0,80,28ZM76,204H60V52H76ZM156,28H132a20,20,0,0,0-20,20V208a20,20,0,0,0,20,20h24a20,20,0,0,0,20-20V48A20,20,0,0,0,156,28Zm-4,176H136V52h16Zm100-76a12,12,0,0,1-12,12h-8v8a12,12,0,0,1-24,0v-8h-8a12,12,0,0,1,0-24h8v-8a12,12,0,0,1,24,0v8h8A12,12,0,0,1,252,128Z"},null,-1),Pa=[Ka],Ra={key:1},Oa=r("path",{d:"M88,48V208a8,8,0,0,1-8,8H56a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8H80A8,8,0,0,1,88,48Zm64-8H128a8,8,0,0,0-8,8V208a8,8,0,0,0,8,8h24a8,8,0,0,0,8-8V48A8,8,0,0,0,152,40Z",opacity:"0.2"},null,-1),Wa=r("path",{d:"M80,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H80a16,16,0,0,0,16-16V48A16,16,0,0,0,80,32Zm0,176H56V48H80ZM152,32H128a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V48A16,16,0,0,0,152,32Zm0,176H128V48h24Zm96-80a8,8,0,0,1-8,8H224v16a8,8,0,0,1-16,0V136H192a8,8,0,0,1,0-16h16V104a8,8,0,0,1,16,0v16h16A8,8,0,0,1,248,128Z"},null,-1),Ga=[Oa,Wa],Qa={key:2},Ja=r("path",{d:"M96,48V208a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V48A16,16,0,0,1,56,32H80A16,16,0,0,1,96,48Zm56-16H128a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V48A16,16,0,0,0,152,32Zm88,88H224V104a8,8,0,0,0-16,0v16H192a8,8,0,0,0,0,16h16v16a8,8,0,0,0,16,0V136h16a8,8,0,0,0,0-16Z"},null,-1),Ya=[Ja],Xa={key:3},e0=r("path",{d:"M80,34H56A14,14,0,0,0,42,48V208a14,14,0,0,0,14,14H80a14,14,0,0,0,14-14V48A14,14,0,0,0,80,34Zm2,174a2,2,0,0,1-2,2H56a2,2,0,0,1-2-2V48a2,2,0,0,1,2-2H80a2,2,0,0,1,2,2ZM152,34H128a14,14,0,0,0-14,14V208a14,14,0,0,0,14,14h24a14,14,0,0,0,14-14V48A14,14,0,0,0,152,34Zm2,174a2,2,0,0,1-2,2H128a2,2,0,0,1-2-2V48a2,2,0,0,1,2-2h24a2,2,0,0,1,2,2Zm92-80a6,6,0,0,1-6,6H222v18a6,6,0,0,1-12,0V134H192a6,6,0,0,1,0-12h18V104a6,6,0,0,1,12,0v18h18A6,6,0,0,1,246,128Z"},null,-1),a0=[e0],t0={key:4},l0=r("path",{d:"M80,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H80a16,16,0,0,0,16-16V48A16,16,0,0,0,80,32Zm0,176H56V48H80ZM152,32H128a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V48A16,16,0,0,0,152,32Zm0,176H128V48h24Zm96-80a8,8,0,0,1-8,8H224v16a8,8,0,0,1-16,0V136H192a8,8,0,0,1,0-16h16V104a8,8,0,0,1,16,0v16h16A8,8,0,0,1,248,128Z"},null,-1),n0=[l0],o0={key:5},r0=r("path",{d:"M80,36H56A12,12,0,0,0,44,48V208a12,12,0,0,0,12,12H80a12,12,0,0,0,12-12V48A12,12,0,0,0,80,36Zm4,172a4,4,0,0,1-4,4H56a4,4,0,0,1-4-4V48a4,4,0,0,1,4-4H80a4,4,0,0,1,4,4ZM152,36H128a12,12,0,0,0-12,12V208a12,12,0,0,0,12,12h24a12,12,0,0,0,12-12V48A12,12,0,0,0,152,36Zm4,172a4,4,0,0,1-4,4H128a4,4,0,0,1-4-4V48a4,4,0,0,1,4-4h24a4,4,0,0,1,4,4Zm88-80a4,4,0,0,1-4,4H220v20a4,4,0,0,1-8,0V132H192a4,4,0,0,1,0-8h20V104a4,4,0,0,1,8,0v20h20A4,4,0,0,1,244,128Z"},null,-1),u0=[r0],i0={name:"PhColumnsPlusRight"},s0=Q({...i0,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(n){const d=n,o=T("weight","regular"),m=T("size","1em"),h=T("color","currentColor"),u=T("mirrored",!1),i=g(()=>d.weight??o),H=g(()=>d.size??m),I=g(()=>d.color??h),c=g(()=>d.mirrored!==void 0?d.mirrored?"scale(-1, 1)":void 0:u?"scale(-1, 1)":void 0);return($,A)=>(a(),s("svg",ce({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:H.value,height:H.value,fill:I.value,transform:c.value},$.$attrs),[de($.$slots,"default"),i.value==="bold"?(a(),s("g",Ua,Pa)):i.value==="duotone"?(a(),s("g",Ra,Ga)):i.value==="fill"?(a(),s("g",Qa,Ya)):i.value==="light"?(a(),s("g",Xa,a0)):i.value==="regular"?(a(),s("g",t0,n0)):i.value==="thin"?(a(),s("g",o0,u0)):L("",!0)],16,Ea))}}),d0=["width","height","fill","transform"],c0={key:0},m0=r("path",{d:"M148,96V48a12,12,0,0,1,24,0V84h36a12,12,0,0,1,0,24H160A12,12,0,0,1,148,96ZM96,148H48a12,12,0,0,0,0,24H84v36a12,12,0,0,0,24,0V160A12,12,0,0,0,96,148Zm112,0H160a12,12,0,0,0-12,12v48a12,12,0,0,0,24,0V172h36a12,12,0,0,0,0-24ZM96,36A12,12,0,0,0,84,48V84H48a12,12,0,0,0,0,24H96a12,12,0,0,0,12-12V48A12,12,0,0,0,96,36Z"},null,-1),f0=[m0],v0={key:1},p0=r("path",{d:"M208,64V192a16,16,0,0,1-16,16H64a16,16,0,0,1-16-16V64A16,16,0,0,1,64,48H192A16,16,0,0,1,208,64Z",opacity:"0.2"},null,-1),g0=r("path",{d:"M152,96V48a8,8,0,0,1,16,0V88h40a8,8,0,0,1,0,16H160A8,8,0,0,1,152,96ZM96,152H48a8,8,0,0,0,0,16H88v40a8,8,0,0,0,16,0V160A8,8,0,0,0,96,152Zm112,0H160a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V168h40a8,8,0,0,0,0-16ZM96,40a8,8,0,0,0-8,8V88H48a8,8,0,0,0,0,16H96a8,8,0,0,0,8-8V48A8,8,0,0,0,96,40Z"},null,-1),h0=[p0,g0],y0={key:2},b0=r("path",{d:"M152,96V48a8,8,0,0,1,13.66-5.66l48,48A8,8,0,0,1,208,104H160A8,8,0,0,1,152,96ZM96,152H48a8,8,0,0,0-5.66,13.66l48,48A8,8,0,0,0,104,208V160A8,8,0,0,0,96,152ZM99.06,40.61a8,8,0,0,0-8.72,1.73l-48,48A8,8,0,0,0,48,104H96a8,8,0,0,0,8-8V48A8,8,0,0,0,99.06,40.61ZM208,152H160a8,8,0,0,0-8,8v48a8,8,0,0,0,13.66,5.66l48-48A8,8,0,0,0,208,152Z"},null,-1),_0=[b0],H0={key:3},$0=r("path",{d:"M154,96V48a6,6,0,0,1,12,0V90h42a6,6,0,0,1,0,12H160A6,6,0,0,1,154,96ZM96,154H48a6,6,0,0,0,0,12H90v42a6,6,0,0,0,12,0V160A6,6,0,0,0,96,154Zm112,0H160a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V166h42a6,6,0,0,0,0-12ZM96,42a6,6,0,0,0-6,6V90H48a6,6,0,0,0,0,12H96a6,6,0,0,0,6-6V48A6,6,0,0,0,96,42Z"},null,-1),k0=[$0],V0={key:4},w0=r("path",{d:"M152,96V48a8,8,0,0,1,16,0V88h40a8,8,0,0,1,0,16H160A8,8,0,0,1,152,96ZM96,152H48a8,8,0,0,0,0,16H88v40a8,8,0,0,0,16,0V160A8,8,0,0,0,96,152Zm112,0H160a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V168h40a8,8,0,0,0,0-16ZM96,40a8,8,0,0,0-8,8V88H48a8,8,0,0,0,0,16H96a8,8,0,0,0,8-8V48A8,8,0,0,0,96,40Z"},null,-1),C0=[w0],Z0={key:5},A0=r("path",{d:"M156,96V48a4,4,0,0,1,8,0V92h44a4,4,0,0,1,0,8H160A4,4,0,0,1,156,96ZM96,156H48a4,4,0,0,0,0,8H92v44a4,4,0,0,0,8,0V160A4,4,0,0,0,96,156Zm112,0H160a4,4,0,0,0-4,4v48a4,4,0,0,0,8,0V164h44a4,4,0,0,0,0-8ZM96,44a4,4,0,0,0-4,4V92H48a4,4,0,0,0,0,8H96a4,4,0,0,0,4-4V48A4,4,0,0,0,96,44Z"},null,-1),M0=[A0],S0={name:"PhCornersIn"},I0=Q({...S0,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(n){const d=n,o=T("weight","regular"),m=T("size","1em"),h=T("color","currentColor"),u=T("mirrored",!1),i=g(()=>d.weight??o),H=g(()=>d.size??m),I=g(()=>d.color??h),c=g(()=>d.mirrored!==void 0?d.mirrored?"scale(-1, 1)":void 0:u?"scale(-1, 1)":void 0);return($,A)=>(a(),s("svg",ce({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:H.value,height:H.value,fill:I.value,transform:c.value},$.$attrs),[de($.$slots,"default"),i.value==="bold"?(a(),s("g",c0,f0)):i.value==="duotone"?(a(),s("g",v0,h0)):i.value==="fill"?(a(),s("g",y0,_0)):i.value==="light"?(a(),s("g",H0,k0)):i.value==="regular"?(a(),s("g",V0,C0)):i.value==="thin"?(a(),s("g",Z0,M0)):L("",!0)],16,d0))}}),L0=["width","height","fill","transform"],x0={key:0},z0=r("path",{d:"M220,48V88a12,12,0,0,1-24,0V60H168a12,12,0,0,1,0-24h40A12,12,0,0,1,220,48ZM88,196H60V168a12,12,0,0,0-24,0v40a12,12,0,0,0,12,12H88a12,12,0,0,0,0-24Zm120-40a12,12,0,0,0-12,12v28H168a12,12,0,0,0,0,24h40a12,12,0,0,0,12-12V168A12,12,0,0,0,208,156ZM88,36H48A12,12,0,0,0,36,48V88a12,12,0,0,0,24,0V60H88a12,12,0,0,0,0-24Z"},null,-1),B0=[z0],T0={key:1},q0=r("path",{d:"M208,48V208H48V48Z",opacity:"0.2"},null,-1),D0=r("path",{d:"M216,48V88a8,8,0,0,1-16,0V56H168a8,8,0,0,1,0-16h40A8,8,0,0,1,216,48ZM88,200H56V168a8,8,0,0,0-16,0v40a8,8,0,0,0,8,8H88a8,8,0,0,0,0-16Zm120-40a8,8,0,0,0-8,8v32H168a8,8,0,0,0,0,16h40a8,8,0,0,0,8-8V168A8,8,0,0,0,208,160ZM88,40H48a8,8,0,0,0-8,8V88a8,8,0,0,0,16,0V56H88a8,8,0,0,0,0-16Z"},null,-1),N0=[q0,D0],j0={key:2},F0=r("path",{d:"M93.66,202.34A8,8,0,0,1,88,216H48a8,8,0,0,1-8-8V168a8,8,0,0,1,13.66-5.66ZM88,40H48a8,8,0,0,0-8,8V88a8,8,0,0,0,13.66,5.66l40-40A8,8,0,0,0,88,40ZM211.06,160.61a8,8,0,0,0-8.72,1.73l-40,40A8,8,0,0,0,168,216h40a8,8,0,0,0,8-8V168A8,8,0,0,0,211.06,160.61ZM208,40H168a8,8,0,0,0-5.66,13.66l40,40A8,8,0,0,0,216,88V48A8,8,0,0,0,208,40Z"},null,-1),E0=[F0],U0={key:3},K0=r("path",{d:"M214,48V88a6,6,0,0,1-12,0V54H168a6,6,0,0,1,0-12h40A6,6,0,0,1,214,48ZM88,202H54V168a6,6,0,0,0-12,0v40a6,6,0,0,0,6,6H88a6,6,0,0,0,0-12Zm120-40a6,6,0,0,0-6,6v34H168a6,6,0,0,0,0,12h40a6,6,0,0,0,6-6V168A6,6,0,0,0,208,162ZM88,42H48a6,6,0,0,0-6,6V88a6,6,0,0,0,12,0V54H88a6,6,0,0,0,0-12Z"},null,-1),P0=[K0],R0={key:4},O0=r("path",{d:"M216,48V88a8,8,0,0,1-16,0V56H168a8,8,0,0,1,0-16h40A8,8,0,0,1,216,48ZM88,200H56V168a8,8,0,0,0-16,0v40a8,8,0,0,0,8,8H88a8,8,0,0,0,0-16Zm120-40a8,8,0,0,0-8,8v32H168a8,8,0,0,0,0,16h40a8,8,0,0,0,8-8V168A8,8,0,0,0,208,160ZM88,40H48a8,8,0,0,0-8,8V88a8,8,0,0,0,16,0V56H88a8,8,0,0,0,0-16Z"},null,-1),W0=[O0],G0={key:5},Q0=r("path",{d:"M212,48V88a4,4,0,0,1-8,0V52H168a4,4,0,0,1,0-8h40A4,4,0,0,1,212,48ZM88,204H52V168a4,4,0,0,0-8,0v40a4,4,0,0,0,4,4H88a4,4,0,0,0,0-8Zm120-40a4,4,0,0,0-4,4v36H168a4,4,0,0,0,0,8h40a4,4,0,0,0,4-4V168A4,4,0,0,0,208,164ZM88,44H48a4,4,0,0,0-4,4V88a4,4,0,0,0,8,0V52H88a4,4,0,0,0,0-8Z"},null,-1),J0=[Q0],Y0={name:"PhCornersOut"},X0=Q({...Y0,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(n){const d=n,o=T("weight","regular"),m=T("size","1em"),h=T("color","currentColor"),u=T("mirrored",!1),i=g(()=>d.weight??o),H=g(()=>d.size??m),I=g(()=>d.color??h),c=g(()=>d.mirrored!==void 0?d.mirrored?"scale(-1, 1)":void 0:u?"scale(-1, 1)":void 0);return($,A)=>(a(),s("svg",ce({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:H.value,height:H.value,fill:I.value,transform:c.value},$.$attrs),[de($.$slots,"default"),i.value==="bold"?(a(),s("g",x0,B0)):i.value==="duotone"?(a(),s("g",T0,N0)):i.value==="fill"?(a(),s("g",j0,E0)):i.value==="light"?(a(),s("g",U0,P0)):i.value==="regular"?(a(),s("g",R0,W0)):i.value==="thin"?(a(),s("g",G0,J0)):L("",!0)],16,L0))}}),et=["width","height","fill","transform"],at={key:0},tt=r("path",{d:"M228,160a12,12,0,0,1-12,12H40a12,12,0,0,1,0-24H216A12,12,0,0,1,228,160ZM40,108H216a12,12,0,0,0,0-24H40a12,12,0,0,0,0,24Z"},null,-1),lt=[tt],nt={key:1},ot=r("path",{d:"M216,56V200a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V56A16,16,0,0,1,56,40H200A16,16,0,0,1,216,56Z",opacity:"0.2"},null,-1),rt=r("path",{d:"M224,160a8,8,0,0,1-8,8H40a8,8,0,0,1,0-16H216A8,8,0,0,1,224,160ZM40,104H216a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16Z"},null,-1),ut=[ot,rt],it={key:2},st=r("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM184,160H72a8,8,0,0,1,0-16H184a8,8,0,0,1,0,16Zm0-48H72a8,8,0,0,1,0-16H184a8,8,0,0,1,0,16Z"},null,-1),dt=[st],ct={key:3},mt=r("path",{d:"M222,160a6,6,0,0,1-6,6H40a6,6,0,0,1,0-12H216A6,6,0,0,1,222,160ZM40,102H216a6,6,0,0,0,0-12H40a6,6,0,0,0,0,12Z"},null,-1),ft=[mt],vt={key:4},pt=r("path",{d:"M224,160a8,8,0,0,1-8,8H40a8,8,0,0,1,0-16H216A8,8,0,0,1,224,160ZM40,104H216a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16Z"},null,-1),gt=[pt],ht={key:5},yt=r("path",{d:"M220,160a4,4,0,0,1-4,4H40a4,4,0,0,1,0-8H216A4,4,0,0,1,220,160ZM40,100H216a4,4,0,0,0,0-8H40a4,4,0,0,0,0,8Z"},null,-1),bt=[yt],_t={name:"PhEquals"},Ht=Q({..._t,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(n){const d=n,o=T("weight","regular"),m=T("size","1em"),h=T("color","currentColor"),u=T("mirrored",!1),i=g(()=>d.weight??o),H=g(()=>d.size??m),I=g(()=>d.color??h),c=g(()=>d.mirrored!==void 0?d.mirrored?"scale(-1, 1)":void 0:u?"scale(-1, 1)":void 0);return($,A)=>(a(),s("svg",ce({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:H.value,height:H.value,fill:I.value,transform:c.value},$.$attrs),[de($.$slots,"default"),i.value==="bold"?(a(),s("g",at,lt)):i.value==="duotone"?(a(),s("g",nt,ut)):i.value==="fill"?(a(),s("g",it,dt)):i.value==="light"?(a(),s("g",ct,ft)):i.value==="regular"?(a(),s("g",vt,gt)):i.value==="thin"?(a(),s("g",ht,bt)):L("",!0)],16,et))}}),$t=["width","height","fill","transform"],kt={key:0},Vt=r("path",{d:"M87.5,151.52l64-64a12,12,0,0,1,17,17l-64,64a12,12,0,0,1-17-17Zm131-114a60.08,60.08,0,0,0-84.87,0L103.51,67.61a12,12,0,0,0,17,17l30.07-30.06a36,36,0,0,1,50.93,50.92L171.4,135.52a12,12,0,1,0,17,17l30.08-30.06A60.09,60.09,0,0,0,218.45,37.55ZM135.52,171.4l-30.07,30.08a36,36,0,0,1-50.92-50.93l30.06-30.07a12,12,0,0,0-17-17L37.55,133.58a60,60,0,0,0,84.88,84.87l30.06-30.07a12,12,0,0,0-17-17Z"},null,-1),wt=[Vt],Ct={key:1},Zt=r("path",{d:"M209.94,113.94l-96,96a48,48,0,0,1-67.88-67.88l96-96a48,48,0,0,1,67.88,67.88Z",opacity:"0.2"},null,-1),At=r("path",{d:"M165.66,90.34a8,8,0,0,1,0,11.32l-64,64a8,8,0,0,1-11.32-11.32l64-64A8,8,0,0,1,165.66,90.34ZM215.6,40.4a56,56,0,0,0-79.2,0L106.34,70.45a8,8,0,0,0,11.32,11.32l30.06-30a40,40,0,0,1,56.57,56.56l-30.07,30.06a8,8,0,0,0,11.31,11.32L215.6,119.6a56,56,0,0,0,0-79.2ZM138.34,174.22l-30.06,30.06a40,40,0,1,1-56.56-56.57l30.05-30.05a8,8,0,0,0-11.32-11.32L40.4,136.4a56,56,0,0,0,79.2,79.2l30.06-30.07a8,8,0,0,0-11.32-11.31Z"},null,-1),Mt=[Zt,At],St={key:2},It=r("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM144.56,173.66l-21.45,21.45a44,44,0,0,1-62.22-62.22l21.45-21.46a8,8,0,0,1,11.32,11.31L72.2,144.2a28,28,0,0,0,39.6,39.6l21.45-21.46a8,8,0,0,1,11.31,11.32Zm-34.9-16a8,8,0,0,1-11.32-11.32l48-48a8,8,0,0,1,11.32,11.32Zm85.45-34.55-21.45,21.45a8,8,0,0,1-11.32-11.31L183.8,111.8a28,28,0,0,0-39.6-39.6L122.74,93.66a8,8,0,0,1-11.31-11.32l21.46-21.45a44,44,0,0,1,62.22,62.22Z"},null,-1),Lt=[It],xt={key:3},zt=r("path",{d:"M164.25,91.75a6,6,0,0,1,0,8.49l-64,64a6,6,0,0,1-8.49-8.48l64-64A6,6,0,0,1,164.25,91.75ZM214.2,41.8a54.07,54.07,0,0,0-76.38,0L107.75,71.85a6,6,0,0,0,8.49,8.49l30.07-30.06a42,42,0,0,1,59.41,59.41l-30.08,30.07a6,6,0,1,0,8.49,8.49l30.07-30.07A54,54,0,0,0,214.2,41.8ZM139.76,175.64l-30.07,30.08a42,42,0,0,1-59.41-59.41l30.06-30.07a6,6,0,0,0-8.49-8.49l-30,30.07a54,54,0,0,0,76.38,76.39l30.07-30.08a6,6,0,0,0-8.49-8.49Z"},null,-1),Bt=[zt],Tt={key:4},qt=r("path",{d:"M165.66,90.34a8,8,0,0,1,0,11.32l-64,64a8,8,0,0,1-11.32-11.32l64-64A8,8,0,0,1,165.66,90.34ZM215.6,40.4a56,56,0,0,0-79.2,0L106.34,70.45a8,8,0,0,0,11.32,11.32l30.06-30a40,40,0,0,1,56.57,56.56l-30.07,30.06a8,8,0,0,0,11.31,11.32L215.6,119.6a56,56,0,0,0,0-79.2ZM138.34,174.22l-30.06,30.06a40,40,0,1,1-56.56-56.57l30.05-30.05a8,8,0,0,0-11.32-11.32L40.4,136.4a56,56,0,0,0,79.2,79.2l30.06-30.07a8,8,0,0,0-11.32-11.31Z"},null,-1),Dt=[qt],Nt={key:5},jt=r("path",{d:"M162.84,93.16a4,4,0,0,1,0,5.66l-64,64a4,4,0,0,1-5.66-5.66l64-64A4,4,0,0,1,162.84,93.16Zm49.95-49.95a52.07,52.07,0,0,0-73.56,0L109.17,73.27a4,4,0,0,0,5.65,5.66l30.07-30.06a44,44,0,0,1,62.24,62.24l-30.07,30.06a4,4,0,0,0,5.66,5.66l30.07-30.06A52.07,52.07,0,0,0,212.79,43.21ZM141.17,177.06l-30.06,30.07a44,44,0,0,1-62.24-62.24l30.06-30.06a4,4,0,0,0-5.66-5.66L43.21,139.23a52,52,0,0,0,73.56,73.56l30.06-30.07a4,4,0,1,0-5.66-5.66Z"},null,-1),Ft=[jt],Et={name:"PhLinkSimple"},We=Q({...Et,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(n){const d=n,o=T("weight","regular"),m=T("size","1em"),h=T("color","currentColor"),u=T("mirrored",!1),i=g(()=>d.weight??o),H=g(()=>d.size??m),I=g(()=>d.color??h),c=g(()=>d.mirrored!==void 0?d.mirrored?"scale(-1, 1)":void 0:u?"scale(-1, 1)":void 0);return($,A)=>(a(),s("svg",ce({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:H.value,height:H.value,fill:I.value,transform:c.value},$.$attrs),[de($.$slots,"default"),i.value==="bold"?(a(),s("g",kt,wt)):i.value==="duotone"?(a(),s("g",Ct,Mt)):i.value==="fill"?(a(),s("g",St,Lt)):i.value==="light"?(a(),s("g",xt,Bt)):i.value==="regular"?(a(),s("g",Tt,Dt)):i.value==="thin"?(a(),s("g",Nt,Ft)):L("",!0)],16,$t))}}),Ut=["width","height","fill","transform"],Kt={key:0},Pt=r("path",{d:"M232.49,55.51l-32-32a12,12,0,0,0-17,0l-96,96A12,12,0,0,0,84,128v32a12,12,0,0,0,12,12h32a12,12,0,0,0,8.49-3.51l96-96A12,12,0,0,0,232.49,55.51ZM192,49l15,15L196,75,181,60Zm-69,99H108V133l56-56,15,15Zm105-7.43V208a20,20,0,0,1-20,20H48a20,20,0,0,1-20-20V48A20,20,0,0,1,48,28h67.43a12,12,0,0,1,0,24H52V204H204V140.57a12,12,0,0,1,24,0Z"},null,-1),Rt=[Pt],Ot={key:1},Wt=r("path",{d:"M200,88l-72,72H96V128l72-72Z",opacity:"0.2"},null,-1),Gt=r("path",{d:"M229.66,58.34l-32-32a8,8,0,0,0-11.32,0l-96,96A8,8,0,0,0,88,128v32a8,8,0,0,0,8,8h32a8,8,0,0,0,5.66-2.34l96-96A8,8,0,0,0,229.66,58.34ZM124.69,152H104V131.31l64-64L188.69,88ZM200,76.69,179.31,56,192,43.31,212.69,64ZM224,128v80a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32h80a8,8,0,0,1,0,16H48V208H208V128a8,8,0,0,1,16,0Z"},null,-1),Qt=[Wt,Gt],Jt={key:2},Yt=r("path",{d:"M224,128v80a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32h80a8,8,0,0,1,0,16H48V208H208V128a8,8,0,0,1,16,0Zm5.66-58.34-96,96A8,8,0,0,1,128,168H96a8,8,0,0,1-8-8V128a8,8,0,0,1,2.34-5.66l96-96a8,8,0,0,1,11.32,0l32,32A8,8,0,0,1,229.66,69.66Zm-17-5.66L192,43.31,179.31,56,200,76.69Z"},null,-1),Xt=[Yt],el={key:3},al=r("path",{d:"M228.24,59.76l-32-32a6,6,0,0,0-8.48,0l-96,96A6,6,0,0,0,90,128v32a6,6,0,0,0,6,6h32a6,6,0,0,0,4.24-1.76l96-96A6,6,0,0,0,228.24,59.76ZM125.51,154H102V130.49l66-66L191.51,88ZM200,79.51,176.49,56,192,40.49,215.51,64ZM222,128v80a14,14,0,0,1-14,14H48a14,14,0,0,1-14-14V48A14,14,0,0,1,48,34h80a6,6,0,0,1,0,12H48a2,2,0,0,0-2,2V208a2,2,0,0,0,2,2H208a2,2,0,0,0,2-2V128a6,6,0,0,1,12,0Z"},null,-1),tl=[al],ll={key:4},nl=r("path",{d:"M229.66,58.34l-32-32a8,8,0,0,0-11.32,0l-96,96A8,8,0,0,0,88,128v32a8,8,0,0,0,8,8h32a8,8,0,0,0,5.66-2.34l96-96A8,8,0,0,0,229.66,58.34ZM124.69,152H104V131.31l64-64L188.69,88ZM200,76.69,179.31,56,192,43.31,212.69,64ZM224,128v80a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32h80a8,8,0,0,1,0,16H48V208H208V128a8,8,0,0,1,16,0Z"},null,-1),ol=[nl],rl={key:5},ul=r("path",{d:"M226.83,61.17l-32-32a4,4,0,0,0-5.66,0l-96,96A4,4,0,0,0,92,128v32a4,4,0,0,0,4,4h32a4,4,0,0,0,2.83-1.17l96-96A4,4,0,0,0,226.83,61.17ZM126.34,156H100V129.66l68-68L194.34,88ZM200,82.34,173.66,56,192,37.66,218.34,64ZM220,128v80a12,12,0,0,1-12,12H48a12,12,0,0,1-12-12V48A12,12,0,0,1,48,36h80a4,4,0,0,1,0,8H48a4,4,0,0,0-4,4V208a4,4,0,0,0,4,4H208a4,4,0,0,0,4-4V128a4,4,0,0,1,8,0Z"},null,-1),il=[ul],sl={name:"PhNotePencil"},dl=Q({...sl,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(n){const d=n,o=T("weight","regular"),m=T("size","1em"),h=T("color","currentColor"),u=T("mirrored",!1),i=g(()=>d.weight??o),H=g(()=>d.size??m),I=g(()=>d.color??h),c=g(()=>d.mirrored!==void 0?d.mirrored?"scale(-1, 1)":void 0:u?"scale(-1, 1)":void 0);return($,A)=>(a(),s("svg",ce({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:H.value,height:H.value,fill:I.value,transform:c.value},$.$attrs),[de($.$slots,"default"),i.value==="bold"?(a(),s("g",Kt,Rt)):i.value==="duotone"?(a(),s("g",Ot,Qt)):i.value==="fill"?(a(),s("g",Jt,Xt)):i.value==="light"?(a(),s("g",el,tl)):i.value==="regular"?(a(),s("g",ll,ol)):i.value==="thin"?(a(),s("g",rl,il)):L("",!0)],16,Ut))}}),cl=["width","height","fill","transform"],ml={key:0},fl=r("path",{d:"M230.15,70.54,185.46,25.86a20,20,0,0,0-28.28,0L33.86,149.17A19.86,19.86,0,0,0,28,163.31V208a20,20,0,0,0,20,20H216a12,12,0,0,0,0-24H125L230.15,98.83A20,20,0,0,0,230.15,70.54ZM91,204H52V165l84-84,39,39ZM192,103,153,64l18.34-18.34,39,39Z"},null,-1),vl=[fl],pl={key:1},gl=r("path",{d:"M221.66,90.34,192,120,136,64l29.66-29.66a8,8,0,0,1,11.31,0L221.66,79A8,8,0,0,1,221.66,90.34Z",opacity:"0.2"},null,-1),hl=r("path",{d:"M227.32,73.37,182.63,28.69a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H216a8,8,0,0,0,0-16H115.32l112-112A16,16,0,0,0,227.32,73.37ZM48,163.31l88-88L180.69,120l-88,88H48Zm144-54.62L147.32,64l24-24L216,84.69Z"},null,-1),yl=[gl,hl],bl={key:2},_l=r("path",{d:"M227.32,73.37,182.63,28.69a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H216a8,8,0,0,0,0-16H115.32l112-112A16,16,0,0,0,227.32,73.37ZM192,108.69,147.32,64l24-24L216,84.69Z"},null,-1),Hl=[_l],$l={key:3},kl=r("path",{d:"M225.91,74.79,181.22,30.1a14,14,0,0,0-19.8,0L38.1,153.41a13.94,13.94,0,0,0-4.1,9.9V208a14,14,0,0,0,14,14H216a6,6,0,0,0,0-12H110.49L225.91,94.59A14,14,0,0,0,225.91,74.79ZM93.52,210H48a2,2,0,0,1-2-2V163.31a2,2,0,0,1,.59-1.41L136,72.49,183.52,120ZM217.42,86.1,192,111.52,144.49,64,169.9,38.59a2,2,0,0,1,2.83,0l44.69,44.68A2,2,0,0,1,217.42,86.1Z"},null,-1),Vl=[kl],wl={key:4},Cl=r("path",{d:"M227.32,73.37,182.63,28.69a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H216a8,8,0,0,0,0-16H115.32l112-112A16,16,0,0,0,227.32,73.37ZM92.69,208H48V163.31l88-88L180.69,120ZM192,108.69,147.32,64l24-24L216,84.69Z"},null,-1),Zl=[Cl],Al={key:5},Ml=r("path",{d:"M224.49,76.2,179.8,31.51a12,12,0,0,0-17,0L39.51,154.83A12,12,0,0,0,36,163.31V208a12,12,0,0,0,12,12H216a4,4,0,0,0,0-8H105.66L224.49,93.17A12,12,0,0,0,224.49,76.2ZM94.34,212H48a4,4,0,0,1-4-4V163.31a4,4,0,0,1,1.17-2.82L136,69.66,186.35,120ZM218.83,87.51,192,114.34,141.66,64l26.83-26.83a4,4,0,0,1,5.66,0l44.68,44.69A4,4,0,0,1,218.83,87.51Z"},null,-1),Sl=[Ml],Il={name:"PhPencilSimpleLine"},Ll=Q({...Il,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(n){const d=n,o=T("weight","regular"),m=T("size","1em"),h=T("color","currentColor"),u=T("mirrored",!1),i=g(()=>d.weight??o),H=g(()=>d.size??m),I=g(()=>d.color??h),c=g(()=>d.mirrored!==void 0?d.mirrored?"scale(-1, 1)":void 0:u?"scale(-1, 1)":void 0);return($,A)=>(a(),s("svg",ce({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:H.value,height:H.value,fill:I.value,transform:c.value},$.$attrs),[de($.$slots,"default"),i.value==="bold"?(a(),s("g",ml,vl)):i.value==="duotone"?(a(),s("g",pl,yl)):i.value==="fill"?(a(),s("g",bl,Hl)):i.value==="light"?(a(),s("g",$l,Vl)):i.value==="regular"?(a(),s("g",wl,Zl)):i.value==="thin"?(a(),s("g",Al,Sl)):L("",!0)],16,cl))}}),xl=["width","height","fill","transform"],zl={key:0},Bl=r("path",{d:"M208,112H48a20,20,0,0,0-20,20v24a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V132A20,20,0,0,0,208,112Zm-4,40H52V136H204Zm4-116H48A20,20,0,0,0,28,56V80a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V56A20,20,0,0,0,208,36Zm-4,40H52V60H204ZM160,220a12,12,0,0,1-12,12h-8v8a12,12,0,0,1-24,0v-8h-8a12,12,0,0,1,0-24h8v-8a12,12,0,0,1,24,0v8h8A12,12,0,0,1,160,220Z"},null,-1),Tl=[Bl],ql={key:1},Dl=r("path",{d:"M216,128v24a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V128a8,8,0,0,1,8-8H208A8,8,0,0,1,216,128Zm-8-80H48a8,8,0,0,0-8,8V80a8,8,0,0,0,8,8H208a8,8,0,0,0,8-8V56A8,8,0,0,0,208,48Z",opacity:"0.2"},null,-1),Nl=r("path",{d:"M208,112H48a16,16,0,0,0-16,16v24a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V128A16,16,0,0,0,208,112Zm0,40H48V128H208v24Zm0-112H48A16,16,0,0,0,32,56V80A16,16,0,0,0,48,96H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40Zm0,40H48V56H208V80ZM160,216a8,8,0,0,1-8,8H136v16a8,8,0,0,1-16,0V224H104a8,8,0,0,1,0-16h16V192a8,8,0,0,1,16,0v16h16A8,8,0,0,1,160,216Z"},null,-1),jl=[Dl,Nl],Fl={key:2},El=r("path",{d:"M224,128v24a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V128a16,16,0,0,1,16-16H208A16,16,0,0,1,224,128ZM208,40H48A16,16,0,0,0,32,56V80A16,16,0,0,0,48,96H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40ZM152,208H136V192a8,8,0,0,0-16,0v16H104a8,8,0,0,0,0,16h16v16a8,8,0,0,0,16,0V224h16a8,8,0,0,0,0-16Z"},null,-1),Ul=[El],Kl={key:3},Pl=r("path",{d:"M208,114H48a14,14,0,0,0-14,14v24a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V128A14,14,0,0,0,208,114Zm2,38a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V128a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2ZM208,42H48A14,14,0,0,0,34,56V80A14,14,0,0,0,48,94H208a14,14,0,0,0,14-14V56A14,14,0,0,0,208,42Zm2,38a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V56a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2ZM158,216a6,6,0,0,1-6,6H134v18a6,6,0,0,1-12,0V222H104a6,6,0,0,1,0-12h18V192a6,6,0,0,1,12,0v18h18A6,6,0,0,1,158,216Z"},null,-1),Rl=[Pl],Ol={key:4},Wl=r("path",{d:"M208,112H48a16,16,0,0,0-16,16v24a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V128A16,16,0,0,0,208,112Zm0,40H48V128H208v24Zm0-112H48A16,16,0,0,0,32,56V80A16,16,0,0,0,48,96H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40Zm0,40H48V56H208V80ZM160,216a8,8,0,0,1-8,8H136v16a8,8,0,0,1-16,0V224H104a8,8,0,0,1,0-16h16V192a8,8,0,0,1,16,0v16h16A8,8,0,0,1,160,216Z"},null,-1),Gl=[Wl],Ql={key:5},Jl=r("path",{d:"M208,116H48a12,12,0,0,0-12,12v24a12,12,0,0,0,12,12H208a12,12,0,0,0,12-12V128A12,12,0,0,0,208,116Zm4,36a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V128a4,4,0,0,1,4-4H208a4,4,0,0,1,4,4ZM208,44H48A12,12,0,0,0,36,56V80A12,12,0,0,0,48,92H208a12,12,0,0,0,12-12V56A12,12,0,0,0,208,44Zm4,36a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V56a4,4,0,0,1,4-4H208a4,4,0,0,1,4,4ZM156,216a4,4,0,0,1-4,4H132v20a4,4,0,0,1-8,0V220H104a4,4,0,0,1,0-8h20V192a4,4,0,0,1,8,0v20h20A4,4,0,0,1,156,216Z"},null,-1),Yl=[Jl],Xl={name:"PhRowsPlusBottom"},Ge=Q({...Xl,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(n){const d=n,o=T("weight","regular"),m=T("size","1em"),h=T("color","currentColor"),u=T("mirrored",!1),i=g(()=>d.weight??o),H=g(()=>d.size??m),I=g(()=>d.color??h),c=g(()=>d.mirrored!==void 0?d.mirrored?"scale(-1, 1)":void 0:u?"scale(-1, 1)":void 0);return($,A)=>(a(),s("svg",ce({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:H.value,height:H.value,fill:I.value,transform:c.value},$.$attrs),[de($.$slots,"default"),i.value==="bold"?(a(),s("g",zl,Tl)):i.value==="duotone"?(a(),s("g",ql,jl)):i.value==="fill"?(a(),s("g",Fl,Ul)):i.value==="light"?(a(),s("g",Kl,Rl)):i.value==="regular"?(a(),s("g",Ol,Gl)):i.value==="thin"?(a(),s("g",Ql,Yl)):L("",!0)],16,xl))}}),e1={class:"related-tables"},a1={class:"related-section"},t1={class:"relation-info"},l1={class:"related-tables"},n1={class:"related-section"},o1={class:"relation-info"},r1=Q({__name:"RelatedTables",props:{table:{}},setup(n){const d=n,o=pe(),m=Ie(),h=o.params.projectId,{tables:u,loading:i}=La(h),H=g(()=>d.table.getColumns().find(x=>x.primaryKey)?.name||"id"),I=g(()=>{if(!u.value.length)return{referencingTables:[],referencedTables:[]};const A=u.value.filter(w=>w.id!==d.table.id),x=[];for(const w of A){const C=w.getColumns().filter(S=>S.foreignKey);for(const S of C){if(!S.foreignKey)continue;let O;for(const J of u.value)if(O=J.getColumns().find(ee=>ee.id===S.foreignKey?.columnId),O)break;O?.tableId===d.table.id&&x.push({table:w,column:S})}}const v=[],z=d.table.getColumns().filter(w=>w.foreignKey);for(const w of z){if(!w.foreignKey)continue;let C,S;for(const O of u.value)if(S=O.getColumns().find(J=>J.id===w.foreignKey?.columnId),S){C=O;break}C&&S&&v.push({table:C,sourceColumn:w,targetColumn:S})}return{referencingTables:x,referencedTables:v}}),c=g(()=>{const A=new Map;for(const x of I.value.referencingTables)A.has(x.table.id)||A.set(x.table.id,{tableId:x.table.id,tableName:x.table.name,description:`${x.column.name} → ${H.value}`});for(const x of I.value.referencedTables)A.has(x.table.id)||A.set(x.table.id,{tableId:x.table.id,tableName:x.table.name,description:`${x.sourceColumn.name} → ${x.targetColumn.name}`});return Array.from(A.values())}),$=A=>{m.push({name:"tableEditor",params:{projectId:h,tableId:A}})};return(A,x)=>e(i)?(a(),_(Me,{key:0,"full-width":""},{default:t(()=>[r("div",e1,[r("div",a1,[l(e(fa),null,{default:t(()=>[R(B(e(p).translate("i18n_relatedtables_related_tables")),1)]),_:1}),l(e(W),{gap:"middle",wrap:"wrap"},{default:t(()=>[(a(),s(te,null,le(3,v=>l(e(Re),{key:v,class:"related-table-card loading-card"},{title:t(()=>[l(e(W),{justify:"space-between",align:"center"},{default:t(()=>[l(e(Oe),{active:!0,paragraph:!1,title:{width:"120px"}}),l(e(Ia),{size:16,style:{opacity:"0.3"}})]),_:1})]),default:t(()=>[r("p",t1,[l(e(We),{size:16,style:{opacity:"0.3"}}),l(e(Oe),{active:!0,paragraph:!1,title:{width:"150px"}})])]),_:1})),64))]),_:1})])])]),_:1})):c.value.length>0?(a(),_(Me,{key:1,"full-width":""},{default:t(()=>[r("div",l1,[r("div",n1,[r("h3",null,B(e(p).translate("i18n_relatedtables_related_tables_count",null,c.value.length)),1),l(e(W),{gap:"middle",wrap:"wrap"},{default:t(()=>[(a(!0),s(te,null,le(c.value,v=>(a(),_(e(Re),{key:v.tableId,title:v.tableName,class:"related-table-card",hoverable:"",onClick:z=>$(v.tableId)},{default:t(()=>[r("p",o1,[l(e(We),{size:16}),r("span",null,B(v.description),1)])]),_:2},1032,["title","onClick"]))),128))]),_:1})])])]),_:1})):L("",!0)}}),u1=Le(r1,[["__scopeId","data-v-55a3ad92"]]),i1=Q({__name:"AddData",props:{open:{type:Boolean},editableItem:{},table:{},loading:{type:Boolean}},emits:["save","close","update-nullable","record-change"],setup(n,{emit:d}){const o=d;return(m,h)=>(a(),_(e(Be),{title:e(p).translate("i18n_adddata_title"),width:720,open:n.open,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:h[2]||(h[2]=u=>o("close"))},{extra:t(()=>[l(e(qe),null,{default:t(()=>[l(e(ae),{onClick:h[0]||(h[0]=u=>o("close"))},{default:t(()=>[R(B(e(p).translate("i18n_adddata_cancel")),1)]),_:1}),l(e(ae),{type:"primary",loading:n.loading,onClick:h[1]||(h[1]=u=>o("save"))},{default:t(()=>[R(B(e(p).translate("i18n_adddata_save")),1)]),_:1},8,["loading"])]),_:1})]),default:t(()=>[l(e(xe),{model:n.editableItem,layout:"vertical"},{default:t(()=>[(a(!0),s(te,null,le(n.table.getUnprotectedColumns(),u=>(a(),_(e(Y),{key:u.id,label:u.name,required:!u.nullable},{default:t(()=>[n.editableItem?(a(),_(e(se),{key:0,placeholder:u.type,value:n.editableItem[u.name],disabled:n.editableItem[u.name]===null,"onUpdate:value":i=>o("record-change",u.name,i)},va({_:2},[u.nullable?{name:"addonAfter",fn:t(()=>[l(e(pa),{checked:n.editableItem[u.name]===null,"onUpdate:checked":i=>o("update-nullable",u.name,i)},{default:t(()=>[R(B(e(p).translate("i18n_adddata_null")),1)]),_:1},8,["checked","onUpdate:checked"])]),key:"0"}:void 0]),1032,["placeholder","value","disabled","onUpdate:value"])):L("",!0)]),_:2},1032,["label","required"]))),128))]),_:1},8,["model"])]),_:1},8,["title","open"]))}}),la=(n,d)=>d.includes(n)?{status:"error",help:"There already is a column with this name in the table"}:{status:""},s1=Q({__name:"NewColumn",props:{open:{type:Boolean},table:{}},emits:["created","cancel"],setup(n,{emit:d}){const o=d,m=n,u=pe().params.projectId,i=g(()=>m.table?.getColumns().map(Z=>Z.name)||[]),H=g(()=>la(c.value.name,i.value)),I={name:"",type:null,default:"",nullable:!0,unique:!1},c=E(I),$=()=>{c.value={...I}},A=E([{value:"reference",label:"reference",isLeaf:!1},...ea.map(Z=>({value:Z,label:Z,isLeaf:!0}))]),x=Z=>{if(!Z)return;const f=Z[Z.length-1];switch(Z.length){case 0:return;case 1:f.loading=!0,ne.list(u).then(U=>{f.children=U.map(X=>({value:X.id,label:X.name,isLeaf:!1})),f.loading=!1});return;case 2:f.loading=!0,ne.get(u,f.value).then(U=>{f.children=U.getColumns().map(X=>({type:X.type,value:X.id,label:X.name,isLeaf:!0})),f.loading=!1});return}},v=(Z,f)=>{if(Z){if(Z.length===1){c.value.type=Z[0],c.value.foreignKey=void 0;return}if(Z.length===3){const U=f[f.length-1];c.value.type=U.type,c.value.foreignKey={columnId:U.value}}}},z=Z=>{const f=Z.selectedOptions;return f?f.length===1?f[0].label:f.length===3?p.translate("i18n_newcolumn_reference_to",null,{tableName:f[1].label,columnName:f[2].label}):"":p.translate("i18n_newcolumn_select_type")},C=E({...{status:"success",message:"",fakeLoading:!1}}),S=()=>{C.value.fakeLoading=!0,J()};ye(()=>c.value.type,()=>{c.value.type&&(c.value.default=Aa[c.value.type]||"",S())});const J=_e.debounce(async()=>{if(!c.value.default){C.value.status="success",C.value.message="",C.value.fakeLoading=!1;return}const Z=`select (${c.value.default})::${c.value.type} `;Te.executeQuery(u,Z,[]).then(f=>{C.value.status=f.errors.length>0?"error":"success",C.value.message=f.errors[0]||"",C.value.fakeLoading=!1})},500);function ee(){o("cancel")}async function q(){if(m.table&&!(!c.value.name||!c.value.type))try{await m.table.addColumn(c.value),$(),o("created")}catch(Z){Z instanceof Error&&$e("Database error",Z.message)}}return(Z,f)=>(a(),_(e(Be),{title:e(p).translate("i18n_newcolumn_new_column"),width:720,open:m.open,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:ee},{extra:t(()=>[l(e(qe),null,{default:t(()=>[l(e(ae),{onClick:ee},{default:t(()=>[R(B(e(p).translate("i18n_newcolumn_cancel")),1)]),_:1}),l(e(ae),{type:"primary",onClick:q},{default:t(()=>[R(B(e(p).translate("i18n_newcolumn_save")),1)]),_:1})]),_:1})]),default:t(()=>[l(e(xe),{model:c.value,layout:"vertical"},{default:t(()=>[l(e(Y),{key:"name",label:e(p).translate("i18n_newcolumn_name"),required:"","validate-status":H.value.status,help:H.value.help},{default:t(()=>[l(e(se),{value:c.value.name,"onUpdate:value":f[0]||(f[0]=U=>c.value.name=U)},null,8,["value"])]),_:1},8,["label","validate-status","help"]),l(e(Y),{key:"type",label:e(p).translate("i18n_newcolumn_type"),required:""},{default:t(()=>[l(e(ta),{options:A.value,"load-data":x,"display-render":z,"allow-clear":!1,onChange:v},null,8,["options"])]),_:1},8,["label"]),l(e(Y),{key:"default-value",label:e(p).translate("i18n_newcolumn_default_value"),"validate-status":C.value.status,help:C.value.message},{default:t(()=>[l(e(se),{value:c.value.default,"onUpdate:value":f[1]||(f[1]=U=>c.value.default=U),placeholder:e(p).translate("i18n_newcolumn_null_placeholder"),onInput:S},{suffix:t(()=>[C.value.fakeLoading?(a(),_(e(He),{key:0})):L("",!0),!C.value.fakeLoading&&C.value.status==="success"?(a(),_(e(Ye),{key:1,size:"18"})):L("",!0),!C.value.fakeLoading&&C.value.status==="error"?(a(),_(e(aa),{key:2,size:"18"})):L("",!0)]),_:1},8,["value","placeholder"])]),_:1},8,["label","validate-status","help"]),l(e(Y),{key:"nullable",label:e(p).translate("i18n_newcolumn_nullable")},{default:t(()=>[l(e(he),{checked:c.value.nullable,"onUpdate:checked":f[2]||(f[2]=U=>c.value.nullable=U)},null,8,["checked"])]),_:1},8,["label"]),l(e(Y),{key:"unique",label:e(p).translate("i18n_newcolumn_unique")},{default:t(()=>[l(e(he),{checked:c.value.unique,"onUpdate:checked":f[3]||(f[3]=U=>c.value.unique=U)},null,8,["checked"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","open"]))}}),d1={class:"icon"},c1=Q({__name:"OrderByIcon",props:{column:{},orderBy:{}},emits:["reorder"],setup(n,{emit:d}){const o=d;return(m,h)=>(a(),s("div",d1,[n.orderBy?.column!==String(n.column.title)?(a(),_(e(Ta),{key:0,size:"16",onClick:h[0]||(h[0]=u=>o("reorder",String(n.column.title)))})):L("",!0),n.orderBy?.column===String(n.column.title)&&n.orderBy.direction==="asc"?(a(),_(e(Na),{key:1,size:"16",onClick:h[1]||(h[1]=u=>o("reorder",String(n.column.title)))})):L("",!0),n.orderBy?.column===String(n.column.title)&&n.orderBy.direction==="desc"?(a(),_(e(qa),{key:2,size:"16",onClick:h[2]||(h[2]=u=>o("reorder",String(n.column.title)))})):L("",!0)]))}}),Qe=Le(c1,[["__scopeId","data-v-6ae5cef6"]]);function Je(n){return`"${n.replace(/"/g,'""')}"`}function m1(n){return n==null?"NULL":`'${String(n).replace(/'/g,"''")}'`}function f1(n,d){if(n.type==="search")return!n.q||n.q.trim()==="","";if(n.type==="and"){const o=n.conditions.filter(u=>u.value!==""&&u.value!==null);if(o.length===0)return"";const m=o.map(u=>{const i=Je(u.field),H=m1(u.value);return`${i} = ${H}`});return`SELECT * FROM ${Je(d)} WHERE ${m.join(" AND ")}`}return""}function v1(n,d){const o=E(d||{type:"search",q:""}),m=g(()=>n.value.getColumns().filter(v=>o.value.type==="and"&&!o.value.conditions.some(z=>z.field===v.name))),h=g(()=>n.value.getColumns().filter(v=>o.value.type==="and"&&!o.value.conditions.some(z=>z.field===v.name)));function u(){o.value={type:"and",conditions:[{type:"eq",field:"id",value:""}]}}function i(v){v==="search"?o.value={type:"search",q:""}:u()}function H(v){o.value.type==="and"&&o.value.conditions.push({type:"eq",field:String(v),value:""})}function I(v){o.value.type==="and"&&(o.value.conditions=o.value.conditions.filter(z=>z.field!==v))}function c(v){o.value.type==="search"&&(o.value={type:"search",q:v})}function $(v){if(o.value.type!=="and")return;const z=o.value.conditions.find(w=>w.field===v);z&&(z.field=v)}function A(v,z){if(o.value.type!=="and")return;const w=o.value.conditions.find(C=>C.field===v);w&&(w.value=z)}function x(){return f1(o.value,n.value.name)}return{searchValue:o,filteredColumns:m,nonFilteredColumns:h,changeSearchType:i,addCondition:H,removeCondition:I,updateSearch:c,updateConditionField:$,updateConditionValue:A,getSqlQuery:x}}const p1=Q({__name:"TableFilter",props:{search:{},table:{},data:{}},emits:["update:search"],setup(n,{emit:d}){const o=n,m=pe(),h=g(()=>o.table),{searchValue:u,filteredColumns:i,nonFilteredColumns:H,changeSearchType:I,addCondition:c,removeCondition:$,updateSearch:A,updateConditionField:x,updateConditionValue:v,getSqlQuery:z}=v1(h,o.search),w=[{label:p.translate("i18n_tablefilter_search"),value:"search"},{label:p.translate("i18n_tablefilter_advanced"),value:"and"}],C=d;function S(f){I(f),C("update:search",u.value)}function O(f){c(String(f)),C("update:search",u.value)}function J(f){$(f),C("update:search",u.value)}function ee(f){A(f),C("update:search",u.value)}function q(f){x(f),C("update:search",u.value)}const Z=(f,U)=>{v(f,U),C("update:search",u.value)};return ye(()=>o.search,f=>{u.value=f},{deep:!0}),(f,U)=>{const X=ze("RouterLink");return a(),_(e(W),{vertical:"",align:"start",gap:"small"},{default:t(()=>[l(e(W),{align:"center",justify:"space-between",style:{width:"100%"}},{default:t(()=>[l(e(Ca),{options:w,value:e(u).type,"onUpdate:value":S},null,8,["value"]),e(u).type==="and"?(a(),_(X,{key:0,to:{name:"sql",params:{projectId:e(m).params.projectId},query:{filter:e(z)()}}},{default:t(()=>[l(ie,{type:"text",underline:""},{default:t(()=>[R(B(e(p).translate("i18n_tablefilter_edit_as_sql")),1)]),_:1})]),_:1},8,["to"])):L("",!0)]),_:1}),e(u).type==="search"?(a(),_(e(W),{key:0},{default:t(()=>[l(e(ga),{value:e(u).q,"onUpdate:value":ee},null,8,["value"])]),_:1})):e(u).type==="and"?(a(),_(e(W),{key:1,vertical:"",gap:"small"},{default:t(()=>[(a(!0),s(te,null,le(e(u).conditions,K=>(a(),_(e(W),{key:K.field,gap:"large",align:"center"},{default:t(()=>[l(e(Ae),{value:K.field,"onUpdate:value":[G=>K.field=G,G=>q(K.field)],style:{width:"120px"}},{default:t(()=>[(a(!0),s(te,null,le(e(i),G=>(a(),_(e(Fe),{key:G.id,value:G.name},{default:t(()=>[R(B(G.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","onUpdate:value"]),l(e(Ht)),l(e(se),{value:K.value,"onUpdate:value":[G=>K.value=G,G=>Z(K.field,G)],style:{width:"120px"}},null,8,["value","onUpdate:value"]),l(e(ha),{style:{cursor:"pointer"},onClick:G=>J(K.field)},null,8,["onClick"])]),_:2},1024))),128)),e(H)[0]?(a(),_(e(W),{key:0,justify:"space-between"},{default:t(()=>[l(e(Ae),{style:{width:"120px"},value:"","onUpdate:value":O},{default:t(()=>[(a(!0),s(te,null,le(e(H),K=>(a(),_(e(Fe),{key:K.id,value:K.name},{default:t(()=>[R(B(K.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})):L("",!0)]),_:1})):L("",!0)]),_:1})}}}),g1={class:"twin-container"},h1={class:"fullwidth-input"},y1={class:"fullwidth-input"},b1={class:"using-container"},_1={class:"fullwidth-input"},H1=Q({__name:"UpdateColumn",props:{open:{type:Boolean},table:{},column:{}},emits:["updated","cancel"],setup(n,{emit:d}){const o=d,m=n,u=pe().params.projectId,i=E(m.column.type);Xe(async()=>{if(!m.column.foreignKey)return;i.value=p.translate("i18n_updatecolumn_loading");const k=await ne.fromColumnId(u,m.column.foreignKey.columnId),y=k.getColumn(m.column.foreignKey.columnId);i.value=p.translate("i18n_updatecolumn_reference_to",null,{tableName:k.name,columnName:y.name})});const H=g(()=>m.table?.getColumns().map(k=>k.record.initialState.name)||[]),I=g(()=>m.column.name===m.column.record.initialState.name?{status:"",help:""}:la(m.column.name,H.value)),{result:c,loading:$}=Se(async()=>m.table.select({},10,0).then(({total:k})=>k));function A(){m.column.record.resetChanges(),o("cancel")}const v=E({status:"success",message:"",fakeLoading:!1}),z=()=>{v.value.fakeLoading=!0,w()},w=_e.debounce(async()=>{if(!m.column.default){v.value.status="success",v.value.message="",v.value.fakeLoading=!1;return}const k=`select (${m.column.default})::${m.column.type} `,y=await Te.executeQuery(u,k,[]);v.value.status=y.errors.length>0?"error":"success",v.value.message=y.errors[0]||"",v.value.fakeLoading=!1},500),C=E([{value:"reference",label:"reference",isLeaf:!1},...ea.filter(k=>k!==m.column.type).map(k=>({value:k,label:k,isLeaf:!0}))]),S=k=>{if(!k)return;const y=k[k.length-1];switch(k.length){case 0:return;case 1:y.loading=!0,ne.list(u).then(j=>{y.children=j.map(ue=>({value:ue.id,label:ue.name,isLeaf:!1})),y.loading=!1});return;case 2:y.loading=!0,ne.get(u,y.value).then(j=>{y.children=j.getColumns().map(ue=>({type:ue.type,value:ue.id,label:ue.name,isLeaf:!0})),y.loading=!1});return}},O=k=>{const y=k.selectedOptions;return y?y.length===1?y[0].label:y.length===3?p.translate("i18n_updatecolumn_reference_to",null,{tableName:y[1].label,columnName:y[2].label}):"":p.translate("i18n_updatecolumn_select_type")},J=(k,y)=>{if(k){if(k.length===1){m.column.type=k[0],m.column.foreignKey=null;return}if(k.length===3){if(m.column.foreignKey&&m.column.foreignKey.columnId===k[2])return;const j=y[y.length-1];m.column.type=j.type,m.column.foreignKey={columnId:j.value}}}};async function ee(k){await ja(p.translate("i18n_updatecolumn_confirm_delete"))&&await q(k)}async function q(k){await m.table?.getColumn(k)?.delete(),o("updated")}const Z=()=>c.value===0||$.value?!1:m.column.record.hasChangesDeep("type"),f=E({type:"default"}),U=()=>{m.column.type=m.column.record.initialState.type,f.value={type:"default"}};function X(k,y){return y==="varchar"||k==="int"&&y==="boolean"||k==="boolean"&&y==="int"}ye(()=>m.column.type,()=>{z(),G.value||(f.value={type:"user-defined",using:me.value,mandatory:!0})});const G=g(()=>f.value.type==="default"&&X(m.column.record.initialState.type,m.column.type)),be=g(()=>!X(m.column.record.initialState.type,m.column.type));function oe(k){k?f.value={type:"default"}:f.value={type:"user-defined",using:me.value,mandatory:!1}}function ke(k){if(f.value.type==="default")throw new Error("Can't change using when using default casting");f.value.using=k??""}const re=()=>be.value?!0:Z()&&f.value.type==="user-defined",me=g(()=>`${m.column.record.initialState.name}::${m.column.type}`);async function Ve(){if(!m.column)return;let k=f.value.type==="default"?me.value:f.value.using;c.value===0&&(k=`${m.column.record.initialState.name}::text::${m.column.type}`);try{await m.column.update(k),o("updated")}catch(y){y instanceof Error&&$e("Database error",y.message)}}return(k,y)=>(a(),_(e(Be),{title:e(p).translate("i18n_updatecolumn_edit_column"),width:720,open:n.open,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:A},{extra:t(()=>[l(e(qe),null,{default:t(()=>[l(e(ae),{onClick:A},{default:t(()=>[R(B(e(p).translate("i18n_updatecolumn_cancel")),1)]),_:1}),l(e(ae),{type:"primary",onClick:Ve},{default:t(()=>[R(B(e(p).translate("i18n_updatecolumn_save")),1)]),_:1})]),_:1})]),footer:t(()=>[l(ie,{danger:"",onClick:y[7]||(y[7]=j=>ee(String(n.column.id)))},{default:t(()=>[R(B(e(p).translate("i18n_updatecolumn_delete")),1)]),_:1})]),default:t(()=>[l(e(xe),{model:n.column,layout:"vertical"},{default:t(()=>[l(e(Y),{key:"name",label:e(p).translate("i18n_updatecolumn_name"),"validate-status":I.value.status,help:I.value.help},{default:t(()=>[l(e(se),{value:n.column.name,"onUpdate:value":y[0]||(y[0]=j=>n.column.name=j)},null,8,["value"])]),_:1},8,["label","validate-status","help"]),r("div",g1,[r("span",h1,[l(e(Y),{key:"type",label:e(p).translate("i18n_updatecolumn_current_type")},{default:t(()=>[l(e(Ae),{value:i.value,"onUpdate:value":y[1]||(y[1]=j=>i.value=j),"default-active-first-option":"",disabled:""},null,8,["value"])]),_:1},8,["label"])]),l(e(Da),{class:"right-arrow"}),r("span",y1,[l(e(Y),{key:"new-type",label:e(p).translate("i18n_updatecolumn_new_type")},{default:t(()=>[l(e(ta),{options:C.value,"load-data":S,"display-render":O,"allow-clear":!0,onClear:U,onChange:J},null,8,["options"])]),_:1},8,["label"])])]),l(e(Y),{key:"default-value",label:e(p).translate("i18n_updatecolumn_default_value"),"validate-status":v.value.status,help:v.value.message},{default:t(()=>[l(e(se),{value:n.column.default,"onUpdate:value":y[2]||(y[2]=j=>n.column.default=j),placeholder:e(p).translate("i18n_updatecolumn_null_placeholder"),onInput:z},{suffix:t(()=>[v.value.fakeLoading?(a(),_(e(He),{key:0,size:"small"})):L("",!0),!v.value.fakeLoading&&v.value.status==="success"?(a(),_(e(Ye),{key:1,size:18})):L("",!0),!v.value.fakeLoading&&v.value.status==="error"?(a(),_(e(aa),{key:2,size:18})):L("",!0)]),_:1},8,["value","placeholder"])]),_:1},8,["label","validate-status","help"]),r("div",b1,[Z()?(a(),_(e(Y),{key:"default-casting",label:e(p).translate("i18n_updatecolumn_use_default_casting")},{default:t(()=>[l(e(he),{checked:G.value,disabled:be.value,"onUpdate:checked":y[3]||(y[3]=j=>oe(!!j))},null,8,["checked","disabled"])]),_:1},8,["label"])):L("",!0),r("span",_1,[Z()?(a(),_(e(Y),{key:"using",label:e(p).translate("i18n_updatecolumn_using")},{default:t(()=>[l(e(se),{value:f.value.type==="user-defined"?f.value.using:me.value,disabled:!re(),onInput:y[4]||(y[4]=j=>ke(j.target.value))},null,8,["value","disabled"])]),_:1},8,["label"])):L("",!0)])]),l(e(W),null,{default:t(()=>[l(e(Y),{key:"nullable",label:e(p).translate("i18n_updatecolumn_nullable")},{default:t(()=>[l(e(he),{checked:n.column.nullable,"onUpdate:checked":y[5]||(y[5]=j=>n.column.nullable=j)},null,8,["checked"])]),_:1},8,["label"]),l(e(Y),{key:"unique",label:e(p).translate("i18n_updatecolumn_unique")},{default:t(()=>[l(e(he),{checked:n.column.unique,"onUpdate:checked":y[6]||(y[6]=j=>n.column.unique=j)},null,8,["checked"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","open"]))}}),$1=Le(H1,[["__scopeId","data-v-f24d9ba7"]]),k1={style:{overflow:"hidden","white-space":"wrap"}},V1={key:1},w1={key:0,class:"table-row null"},C1={class:"foreign-key-popover"},Z1={key:0,class:"popover-loading"},A1={class:"field-label"},M1={class:"foreign-key-popover"},S1={key:0,class:"popover-loading"},I1={class:"field-label"},L1={class:"field-value"},x1={key:2,class:"foreign-key-error"},z1={key:1,class:"field-value"},B1={key:2,class:"foreign-key-error"},T1={class:"button-container"},q1={class:"button-container"},D1={class:"button-container"},N1={class:"button-container"},j1=Q({__name:"TableData",props:{table:{},loading:{type:Boolean}},emits:["refresh"],setup(n,{emit:d}){const o=n,m=d,h=E(1),u=E(10),i=g(()=>({total:oe.value?.total??0,current:h.value,pageSize:u.value,totalBoundaryShowSizeChanger:10,showSizeChanger:!0,pageSizeOptions:["10","25","50","100"],onChange:async(b,M)=>{h.value=b,u.value=M,await re()}})),H=E([]),I=E(!1),c=E(null),$=E(null),A=E(!1),x=E(null),v=pe(),z=Ie(),w=E(typeof v.query.q=="string"?v.query.q:""),C=g(()=>{try{return JSON.parse(v.query.where)}catch{return{}}}),S=E(Object.keys(C.value).length>0?{type:"and",conditions:Object.entries(C.value).reduce((b,[M,N])=>[...b,{type:"eq",field:M,value:N}],[])}:{type:"search",q:w.value}),O=g(()=>S.value.type==="search"?S.value.q:""),J=g(()=>S.value.type==="search"?{}:S.value.conditions.reduce((b,M)=>({...b,[M.field]:M.value}),{}));function ee(b){b.type==="search"?z.replace({query:{q:b.q}}):z.replace({query:{where:JSON.stringify(J.value)}}),h.value=1,re()}const q=E({type:"idle"});function Z(){q.value={type:"idle"}}async function f(){Z(),m("refresh")}ye(()=>o.table,()=>{oa(),re()});function U(){q.value={type:"creating"}}const X=b=>{if(!o.table)throw new Error("Table not found");q.value={type:"editing",column:o.table.getColumn(b)}},K=E(null),G=b=>{K.value?.column===b?K.value={column:b,direction:K.value.direction==="asc"?"desc":"asc"}:K.value={column:b,direction:"asc"},re()},be=g(()=>oe.value?.rows.length===1),{result:oe,loading:ke,refetch:re}=Se(async()=>{const[{rows:b,total:M},N]=await Promise.all([o.table.select(J.value,(h.value-1)*u.value,u.value,O.value,K.value||void 0),Promise.all(o.table.getColumns().filter(V=>V.foreignKey).map(V=>ne.fromColumnId(v.params.projectId,V.foreignKey.columnId).then(P=>[V.name,P])))]);return{rows:b,total:M,columns:N.reduce((V,[P,F])=>({...V,[P]:F}),{})}}),me=(b,M)=>{const N=o.table?.getColumns().find(F=>F.name===b);if(!N)return"";const V=oe.value?.columns[N.name],P=V?.getColumns().find(F=>F.id===N.foreignKey?.columnId);return!V||!P?"":{name:"tableEditor",params:{projectId:v.params.projectId,tableId:V.id},query:{where:JSON.stringify({[P.name]:M})}}},Ve=async(b,M)=>{I.value=!0,c.value=null,$.value=null;try{const N=o.table?.getColumns().find(D=>D.name===b);if(!N||!N.foreignKey)return;const V=await Pe.fromID(v.params.projectId,N.foreignKey.columnId),P=await ne.get(v.params.projectId,V.tableId),F=await P.select({[V.name]:M},0,1,"");F.rows.length>0&&(c.value=F.rows[0],$.value=P)}catch(N){console.error("Error loading foreign key data:",N)}finally{I.value=!1}},k=b=>$.value?!!$.value.getColumns().find(N=>N.name===b)?.foreignKey:!1,y=async(b,M)=>{if($.value){A.value=!0,x.value=null;try{const N=$.value.getColumns().find(D=>D.name===b);if(!N||!N.foreignKey)return;const V=await Pe.fromID(v.params.projectId,N.foreignKey.columnId),F=await(await ne.get(v.params.projectId,V.tableId)).select({[V.name]:M},0,1,"");F.rows.length>0&&(x.value=F.rows[0])}catch(N){console.error("Error loading nested foreign key data:",N)}finally{A.value=!1}}},j=(b,M)=>{q.value.type==="adding"&&(q.value.editableItem[b]=M)},ue=(b,M)=>{q.value.type==="adding"&&(q.value.editableItem[b]=M?null:"")},De=()=>[...o.table.getColumns().map(b=>({key:b.id??"",title:b.name,dataIndex:b.name,width:220,resizable:!0,ellipsis:!1})),{key:"action",title:"",fixed:"right",width:100,align:"center",resizable:!1,ellipsis:!1}],na=De(),fe=E(na),oa=()=>fe.value=De();function ra(b,M){const N=M;if(!N?.key)return;const V=fe.value.findIndex(P=>P.key===N.key);V!==-1&&(fe.value[V].width=b)}const we=g(()=>oe.value?.rows.map(b=>({key:b.id,...b}))||[]);let ua=ya(o.table?.getUnprotectedColumns().reduce((b,M)=>({...b,[M.name]:""}),{}));const Ce=E(!1);async function ia(){if(!(!o.table||!ua||q.value.type!=="adding")){Ce.value=!0;try{q.value.editableItem.id&&(typeof q.value.editableItem.id=="string"||typeof q.value.editableItem.id=="number")?await o.table.updateRow(q.value.editableItem.id.toString(),q.value.editableItem):await o.table.insertRow(q.value.editableItem),re(),Z()}catch(b){b instanceof Error&&$e("Database error",b.message)}finally{Ce.value=!1}}}const sa=async b=>{if(!(!oe.value||!oe.value.rows.find(M=>M.id===b)))try{await o.table.deleteRow(b),be.value&&(h.value=Math.max(1,h.value-1)),re()}catch(M){M instanceof Error&&$e("Database error",M.message)}},da=b=>{const M=we.value?.filter(D=>b===D.key)[0],N=o.table.getColumns(),V=N.map(D=>D.name),P=N.filter(D=>D.type==="json").map(D=>D.name),F=_e.pick(_e.cloneDeep(M),V);P.forEach(D=>{F[D]&&(F[D]=JSON.stringify(F[D]))}),q.value={type:"adding",editableItem:F}};return(b,M)=>{const N=ze("RouterLink");return a(),_(Me,{"full-width":""},{default:t(()=>[l(e(W),{justify:"space-between",style:{"margin-bottom":"16px"},gap:"middle"},{default:t(()=>[l(p1,{search:S.value,"onUpdate:search":[M[0]||(M[0]=V=>S.value=V),ee],table:n.table,data:we.value},null,8,["search","table","data"]),l(e(W),{justify:"flex-end",gap:"middle"},{default:t(()=>[l(ie,{type:"primary",onClick:U},{default:t(()=>[l(e(s0)),R(B(e(p).translate("i18n_tabledata_create_column")),1)]),_:1}),fe.value.length===3?(a(),_(e(ge),{key:0,title:e(p).translate("i18n_tabledata_create_column_first")},{default:t(()=>[l(ie,{disabled:!0,onClick:M[1]||(M[1]=V=>q.value={type:"adding",editableItem:{}})},{default:t(()=>[l(e(Ge)),R(B(e(p).translate("i18n_tabledata_add_data")),1)]),_:1})]),_:1},8,["title"])):(a(),_(ie,{key:1,onClick:M[2]||(M[2]=V=>q.value={type:"adding",editableItem:{}})},{default:t(()=>[l(e(Ge)),R(B(e(p).translate("i18n_tabledata_add_data")),1)]),_:1}))]),_:1})]),_:1}),l(e($a),{columns:fe.value,"data-source":we.value,pagination:i.value,bordered:"",loading:e(ke)||n.loading,scroll:{x:1e3,y:720},size:"small",onResizeColumn:ra},{headerCell:t(({column:V})=>[V.title!=="id"&&V.title!=="created_at"&&V.key!=="action"?(a(),_(e(W),{key:0,align:"center",justify:"space-between",gap:"small"},{default:t(()=>[l(e(W),{style:{overflow:"hidden","white-space":"wrap"},align:"center",gap:"small"},{default:t(()=>[r("span",k1,B(V.title),1),l(e(W),null,{default:t(()=>[l(Qe,{column:V,"order-by":K.value,onReorder:G},null,8,["column","order-by"])]),_:2},1024)]),_:2},1024),l(ie,{type:"text",onClick:P=>X(String(V.key))},{default:t(()=>[l(e(xa),{size:"18"})]),_:1},8,["onClick"])]),_:2},1024)):(a(),s("span",V1,[l(e(W),{align:"center",gap:"small"},{default:t(()=>[R(B(V.title)+" ",1),V.key!=="action"?(a(),_(Qe,{key:0,column:V,"order-by":K.value,onReorder:G},null,8,["column","order-by"])):L("",!0)]),_:2},1024)]))]),bodyCell:t(({column:V,text:P,record:F})=>[fe.value.map(D=>D.title).includes(V.dataIndex)?(a(),s(te,{key:0},[P===null?(a(),s("div",w1,B(e(p).translate("i18n_tabledata_null")),1)):n.table.getColumns().find(D=>D.name===V.dataIndex)?.foreignKey?(a(),_(e(Ee),{key:1,trigger:["hover"],placement:"right",onMouseenter:D=>Ve(V.dataIndex,P)},{content:t(()=>[r("div",C1,[I.value?(a(),s("div",Z1,[l(e(He),{size:"small"})])):c.value&&$.value?(a(!0),s(te,{key:1},le(c.value,(D,ve)=>(a(),s("div",{key:ve,class:"foreign-key-field"},[r("div",A1,B(ve),1),k(ve)&&D!==null?(a(),_(e(Ee),{key:0,trigger:["hover"],placement:"right",onMouseenter:Ze=>y(ve,D)},{content:t(()=>[r("div",M1,[A.value?(a(),s("div",S1,[l(e(He),{size:"small"})])):x.value?(a(!0),s(te,{key:1},le(x.value,(Ze,Ne)=>(a(),s("div",{key:Ne,class:"foreign-key-field"},[r("div",I1,B(Ne),1),r("div",L1,B(Ze!==null?Ze:""),1)]))),128)):(a(),s("div",x1,B(e(p).translate("i18n_tabledata_failed_to_load")),1))])]),default:t(()=>[l(e(Ue),{class:"nested-fk-tag",color:"blue"},{default:t(()=>[R(B(D),1)]),_:2},1024)]),_:2},1032,["onMouseenter"])):(a(),s("div",z1,B(D!==null?D:""),1))]))),128)):(a(),s("div",B1,B(e(p).translate("i18n_tabledata_failed_to_load")),1))])]),default:t(()=>[l(e(Ue),{color:"blue",class:"foreign-key-tag"},{default:t(()=>[l(N,{to:me(V.dataIndex,P),target:"_blank",class:"foreign-key-link"},{default:t(()=>[R(B(P),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2},1032,["onMouseenter"])):(a(),s("div",{key:2,class:ba(["table-row",{expanded:H.value.includes(F.id)}])},B(P),3))],64)):L("",!0),V.key==="action"?(a(),_(e(W),{key:1,gap:"small",justify:"center"},{default:t(()=>[H.value.includes(F.id)?(a(),_(e(ae),{key:0,class:"icons",onClick:D=>H.value=H.value.filter(ve=>ve!==F.id)},{icon:t(()=>[l(e(ge),{title:e(p).translate("i18n_tabledata_collapse")},{default:t(()=>[r("div",T1,[l(e(I0),{size:15})])]),_:1},8,["title"])]),_:1},8,["onClick"])):(a(),_(e(ae),{key:1,onClick:D=>H.value.push(F.id)},{icon:t(()=>[l(e(ge),{title:e(p).translate("i18n_tabledata_expand")},{default:t(()=>[r("div",q1,[l(e(X0),{size:15})])]),_:1},8,["title"])]),_:1},8,["onClick"])),l(e(ae),{onClick:D=>da(F.id)},{icon:t(()=>[l(e(ge),{title:e(p).translate("i18n_tabledata_edit")},{default:t(()=>[r("div",D1,[l(e(Ll),{size:15})])]),_:1},8,["title"])]),_:1},8,["onClick"]),l(e(_a),{title:e(p).translate("i18n_tabledata_sure_to_delete"),onConfirm:D=>sa(F.id)},{default:t(()=>[l(e(ae),null,{icon:t(()=>[l(e(ge),{title:e(p).translate("i18n_tabledata_delete")},{default:t(()=>[r("div",N1,[l(e(Ha),{size:15})])]),_:1},8,["title"])]),_:1})]),_:1},8,["title","onConfirm"])]),_:2},1024)):L("",!0)]),_:1},8,["columns","data-source","pagination","loading"]),q.value.type==="adding"?(a(),_(i1,{key:0,open:q.value.type==="adding",table:o.table,"editable-item":q.value.editableItem,loading:Ce.value,onUpdateNullable:ue,onRecordChange:j,onClose:Z,onCancel:Z,onSave:ia},null,8,["open","table","editable-item","loading"])):L("",!0),q.value.type==="creating"?(a(),_(s1,{key:1,open:q.value.type==="creating",table:o.table,onClose:Z,onCancel:Z,onCreated:f},null,8,["open","table"])):L("",!0),q.value.type==="editing"?(a(),_($1,{key:2,open:q.value.type==="editing",column:q.value.column,table:n.table,onUpdated:f,onClose:Z,onCancel:Z},null,8,["open","column","table"])):L("",!0)]),_:1})}}}),F1={style:{"font-size":"16px"}},Cn=Q({__name:"TableEditor",setup(n){const d=Ie(),o=pe(),m=Ke(()=>{if(typeof o.params.tableId=="string")return o.params.tableId;throw new Error("tableId is not a string")}),h=Ke(()=>{if(typeof o.params.projectId=="string")return o.params.projectId;throw new Error("projectId is not a string")}),u=E(!1),i=ma(),H=()=>{u.value=!1,c.value?.table.save(),A()},I=g(()=>c.value?c.value.table.name:p.translate("i18n_tableeditor_loading")),{result:c,loading:$,refetch:A}=Se(()=>Promise.all([Te.get(h.value).then(async z=>{const w=await Za.get(z.organizationId),O=(await new Ma().list(w.id)).find(J=>J.id===z.folderId);if(!O)throw new Error("Folder not found");return{project:z,organization:w,folder:O}}),ne.get(h.value,m.value)]).then(([{project:z,organization:w,folder:C},S])=>({project:z,organization:w,table:S,folder:C})));ye([m,h],()=>{A()});const x=g(()=>!$.value&&c.value?[{label:p.translate("i18n_tableeditor_my_organizations"),path:"/organizations"},{label:c.value.organization.name,path:`/organizations/${c.value.organization.id}`},{label:c.value.folder.name,path:`/organizations/${c.value.organization.id}#${c.value.folder.id}`},{label:c.value.project.name,path:`/projects/${c.value.project.id}/tables`}]:void 0);function v(){d.push({name:"tables",params:{projectId:h.value}})}return Xe(()=>{const z=je.subscribe("columnCreated",({tableId:w})=>{w===m.value&&A()});ka(()=>{je.unsubscribe(z)})}),(z,w)=>{const C=ze("RouterLink");return a(),_(ca,{key:m.value},{navbar:t(()=>[l(e(Fa),{style:{padding:"5px 25px",border:"1px solid #f0f0f0"},onBack:v},{title:t(()=>[l(e(W),{align:"center",gap:"small"},{default:t(()=>[r("span",F1,B(I.value),1),l(ie,{type:"text",onClick:w[0]||(w[0]=S=>u.value=!0)},{default:t(()=>[l(e(dl),{size:"16"})]),_:1})]),_:1}),l(e(Va),{title:e(p).translate("i18n_tableeditor_change_table_name"),open:u.value,onCancel:w[2]||(w[2]=S=>u.value=!1),onOk:H},{default:t(()=>[e(c)?(a(),_(e(se),{key:0,value:e(c).table.name,"onUpdate:value":w[1]||(w[1]=S=>e(c).table.name=S)},null,8,["value"])):L("",!0)]),_:1},8,["title","open"])]),subTitle:t(()=>[x.value?(a(),_(e(za),{key:0,style:{margin:"0px 20px"}},{default:t(()=>[(a(!0),s(te,null,le(x.value,(S,O)=>(a(),_(e(Ba),{key:O},{default:t(()=>[l(C,{to:S.path},{default:t(()=>[R(B(S.label),1)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1})):L("",!0)]),extra:t(()=>[l(ie,{type:"link",onClick:w[3]||(w[3]=S=>e(i).toggle())},{default:t(()=>[l(e(wa)),R(" "+B(e(p).translate("i18n_tableeditor_ai_assistant")),1)]),_:1})]),_:1})]),content:t(()=>[e(c)?(a(),_(j1,{key:0,loading:e($),table:e(c).table,onRefresh:w[4]||(w[4]=S=>e(A)())},null,8,["loading","table"])):L("",!0),e(c)?(a(),_(u1,{key:1,table:e(c).table},null,8,["table"])):L("",!0)]),chat:t(()=>[l(Sa)]),_:1})}}});export{Cn as default};
//# sourceMappingURL=TableEditor-DCj3uTAX.js.map
