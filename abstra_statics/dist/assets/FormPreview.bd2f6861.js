import{u as C}from"./index.2bb2136b.js";import{d as E,J as U,b as u,ew as f,e as o,eH as g,eC as W,eD as q,x as S,eK as M,eE as P,r as v,u as t,c as A,f as R,eN as B}from"./outputWidgets.7250f034.js";import{b as N,c as V,d as $,r as L}from"./FormRunner.cbac97d4.js";import{a as H}from"./asyncComputed.03680468.js";import{L as O}from"./CircularLoading.b7418fab.js";import{F as T}from"./forms.5dea9efe.js";import{W as j}from"./workspaces.f43e4445.js";import"./envVars.7c660267.js";import"./fetch.eac5680a.js";import"./pubsub.a65a175e.js";import"./url.1ce119bf.js";import"./Login.vue_vue_type_script_setup_true_lang.8168d482.js";import"./Link.b82926be.js";import"./Base.a1fd4e38.js";import"./index.daf89439.js";import"./PlayerNavbar.ceff0b62.js";import"./PhKanban.vue.ed64f82b.js";import"./PhSignOut.vue.5a7c6d2c.js";import"./Text.c39e2b03.js";import"./index.d88452f7.js";import"./Paragraph.1b5db281.js";import"./Title.2df51250.js";import"./index.847e0bed.js";import"./WidgetsFrame.92e278b4.js";import"./Steps.f70a08b6.js";import"./PhInfo.vue.aafdb494.js";import"./Card.1c1db27c.js";import"./TabPane.3cee1682.js";import"./hasIn.042d0c87.js";import"./record.5d048f41.js";import"./runnerData.f81eee1f.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},a=new Error().stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="6acabb27-0a28-4598-a483-9cc878686940",e._sentryDebugIdIdentifier="sentry-dbid-6acabb27-0a28-4598-a483-9cc878686940")}catch{}})();const F=e=>(W("data-v-3e46b76c"),e=e(),q(),e),J={class:"error"},K=F(()=>o("h1",{class:"error-header"},"Error",-1)),z={class:"error-body"},G={class:"error-message"},Q={class:"error-details"},X=F(()=>o("span",null,"Reload",-1)),Y=[X],Z=E({__name:"Error",props:{error:{type:Object,required:!0},repeated:{type:Boolean,required:!1}},emits:["reload"],setup(e,{emit:a}){const s=e,n=U(()=>s.repeated?"Ooops. The same error occured, please try again later.":"An error occurred while loading.");function l(){a("reload")}return(h,m)=>(u(),f("div",J,[K,o("div",z,[o("div",G,[o("p",null,g(n.value),1),o("p",Q,g(e.error.name)+": "+g(e.error.message),1)]),o("div",{class:"error-actions"},[o("button",{class:"btn btn-primary",onClick:l},Y)])])]))}});const ee=S(Z,[["__scopeId","data-v-3e46b76c"]]),re={class:"page"},oe={key:1,class:"error"},te={key:2,style:{width:"100%",height:"100%",display:"flex"}},ae={style:{width:"100%",height:"100%",display:"flex"}},se=E({__name:"FormPreview",setup(e){const a=M(),s=P(),n=v(null),l=v(null),h=s.query,m=v(null);function I(r,i){L("preview",a,r,i)}const{result:_,loading:x,refetch:y,error:w}=H(async()=>{const[r,i]=await Promise.all([T.get(s.params.id),j.get()]),d=new V({formRunnerData:r.makeRunnerData(i),queryParams:h,userManager:C,connectionManager:new $(r.id),onFormStart:()=>{},onFormEnd:()=>{},onRedirect:I,onAuthUpdate:c=>m.value=c,onStateUpdate:c=>n.value=c,logService:null,onStackTraceUpdate:null});l.value=r.makeRunnerData(i);const p=d.getState();return n.value=p.formState,m.value=p.passwordlessUser,B({form:r,workspace:i,controller:d})}),D=async({id:r})=>{await a.push({params:{id:r},name:"formPreview",query:s.query}),y()};return(r,i)=>{var d,p,c,b,k;return u(),f("div",re,[t(x)||!n.value||!l.value?(u(),A(O,{key:0})):t(w)?(u(),f("div",oe,[R(ee,{error:t(w),onReload:t(y)},null,8,["error","onReload"])])):(u(),f("main",te,[o("div",ae,[R(N,{style:{height:"unset",flex:1,overflow:"hidden"},"is-preview":!1,"form-runner-data":l.value,"form-state":n.value,"user-email":(d=m.value)==null?void 0:d.claims.email,onUpdateWidgetErrors:(p=t(_))==null?void 0:p.controller.updateWidgetFrontendErrors,onUpdateWidgetValue:(c=t(_))==null?void 0:c.controller.updateWidgetValue,onActionClicked:(b=t(_))==null?void 0:b.controller.handleActionClick,onNavigate:D,onLogout:(k=t(_))==null?void 0:k.controller.logout},null,8,["form-runner-data","form-state","user-email","onUpdateWidgetErrors","onUpdateWidgetValue","onActionClicked","onLogout"])])]))])}}});const Be=S(se,[["__scopeId","data-v-a7c36a64"]]);export{Be as default};
//# sourceMappingURL=FormPreview.bd2f6861.js.map
