import{C as q}from"./CrudView.574d257b.js";import{a as U}from"./asyncComputed.d2f65d62.js";import{d as P,B as z,f as M,o as n,X as g,Z as O,R as V,e8 as X,a as v,W as Y,aq as J,u as e,aR as K,eb as Q,c as x,w as t,b as a,aF as o,e9 as S,da as _,cN as e1,bx as t1,$ as W,ea as a1,bS as I,dg as j,db as N,d9 as T,d4 as l1,dc as B,em as o1,en as s1,cG as r1}from"./vue-router.d93c72db.js";import"./gateway.0306d327.js";import{g as i1,B as n1,a as d1}from"./datetime.bb5ad11f.js";import{O as c1}from"./organization.f08e73b1.js";import{P as u1}from"./project.cdada735.js";import"./tables.fd84686b.js";import{C as F,r as R}from"./router.10d9d8b6.js";import{u as p1}from"./polling.be8756ca.js";import{_ as m1,E as h1}from"./ExecutionStatusIcon.vue_vue_type_script_setup_true_lang.0af37bda.js";import{G as f1}from"./PhArrowCounterClockwise.vue.b00021df.js";import{F as E}from"./PhArrowSquareOut.vue.ba2ca743.js";import{G as H}from"./PhChats.vue.860dd615.js";import{I as g1}from"./PhCopySimple.vue.393b6f24.js";import"./DocsButton.vue_vue_type_script_setup_true_lang.f4fbca1c.js";import"./BookOutlined.1dc76168.js";import"./url.8e8c3899.js";import"./PhDotsThreeVertical.vue.1a5d5231.js";import"./Badge.819cb645.js";import"./index.090b2bf1.js";import"./popupNotifcation.fcd4681e.js";import"./record.a553a696.js";import"./string.d10c3089.js";import"./LoadingOutlined.e222117b.js";(function(){try{var m=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new Error().stack;s&&(m._sentryDebugIds=m._sentryDebugIds||{},m._sentryDebugIds[s]="110a5396-88ea-4a14-b8d8-67a35c61df9a",m._sentryDebugIdIdentifier="sentry-dbid-110a5396-88ea-4a14-b8d8-67a35c61df9a")}catch{}})();const y1=["width","height","fill","transform"],_1={key:0},v1=v("path",{d:"M227.85,46.89a20,20,0,0,0-18.74-18.74c-13.13-.77-46.65.42-74.48,28.24L131,60H74.36a19.83,19.83,0,0,0-14.14,5.86L25.87,100.19a20,20,0,0,0,11.35,33.95l37.14,5.18,42.32,42.32,5.19,37.18A19.88,19.88,0,0,0,135.34,235a20.13,20.13,0,0,0,6.37,1,19.9,19.9,0,0,0,14.1-5.87l34.34-34.35A19.85,19.85,0,0,0,196,181.64V125l3.6-3.59C227.43,93.54,228.62,60,227.85,46.89ZM76,84h31L75.75,115.28l-27.23-3.8ZM151.6,73.37A72.27,72.27,0,0,1,204,52a72.17,72.17,0,0,1-21.38,52.41L128,159,97,128ZM172,180l-27.49,27.49-3.8-27.23L172,149Zm-72,22c-8.71,11.85-26.19,26-60,26a12,12,0,0,1-12-12c0-33.84,14.12-51.32,26-60A12,12,0,1,1,68.18,175.3C62.3,179.63,55.51,187.8,53,203c15.21-2.51,23.37-9.3,27.7-15.18A12,12,0,1,1,100,202Z"},null,-1),w1=[v1],b1={key:1},k1=v("path",{d:"M184,120v61.65a8,8,0,0,1-2.34,5.65l-34.35,34.35a8,8,0,0,1-13.57-4.53L128,176ZM136,72H74.35a8,8,0,0,0-5.65,2.34L34.35,108.69a8,8,0,0,0,4.53,13.57L80,128ZM40,216c37.65,0,50.69-19.69,54.56-28.18L68.18,161.44C59.69,165.31,40,178.35,40,216Z",opacity:"0.2"},null,-1),L1=v("path",{d:"M223.85,47.12a16,16,0,0,0-15-15c-12.58-.75-44.73.4-71.41,27.07L132.69,64H74.36A15.91,15.91,0,0,0,63,68.68L28.7,103a16,16,0,0,0,9.07,27.16l38.47,5.37,44.21,44.21,5.37,38.49a15.94,15.94,0,0,0,10.78,12.92,16.11,16.11,0,0,0,5.1.83A15.91,15.91,0,0,0,153,227.3L187.32,193A15.91,15.91,0,0,0,192,181.64V123.31l4.77-4.77C223.45,91.86,224.6,59.71,223.85,47.12ZM74.36,80h42.33L77.16,119.52,40,114.34Zm74.41-9.45a76.65,76.65,0,0,1,59.11-22.47,76.46,76.46,0,0,1-22.42,59.16L128,164.68,91.32,128ZM176,181.64,141.67,216l-5.19-37.17L176,139.31Zm-74.16,9.5C97.34,201,82.29,224,40,224a8,8,0,0,1-8-8c0-42.29,23-57.34,32.86-61.85a8,8,0,0,1,6.64,14.56c-6.43,2.93-20.62,12.36-23.12,38.91,26.55-2.5,36-16.69,38.91-23.12a8,8,0,1,1,14.56,6.64Z"},null,-1),C1=[k1,L1],A1={key:2},Z1=v("path",{d:"M101.85,191.14C97.34,201,82.29,224,40,224a8,8,0,0,1-8-8c0-42.29,23-57.34,32.86-61.85a8,8,0,0,1,6.64,14.56c-6.43,2.93-20.62,12.36-23.12,38.91,26.55-2.5,36-16.69,38.91-23.12a8,8,0,1,1,14.56,6.64Zm122-144a16,16,0,0,0-15-15c-12.58-.75-44.73.4-71.4,27.07h0L88,108.7A8,8,0,0,1,76.67,97.39l26.56-26.57A4,4,0,0,0,100.41,64H74.35A15.9,15.9,0,0,0,63,68.68L28.7,103a16,16,0,0,0,9.07,27.16l38.47,5.37,44.21,44.21,5.37,38.49a15.94,15.94,0,0,0,10.78,12.92,16.11,16.11,0,0,0,5.1.83A15.91,15.91,0,0,0,153,227.3L187.32,193A16,16,0,0,0,192,181.65V155.59a4,4,0,0,0-6.83-2.82l-26.57,26.56a8,8,0,0,1-11.71-.42,8.2,8.2,0,0,1,.6-11.1l49.27-49.27h0C223.45,91.86,224.6,59.71,223.85,47.12Z"},null,-1),j1=[Z1],x1={key:3},I1=v("path",{d:"M221.86,47.24a14,14,0,0,0-13.11-13.1c-12.31-.73-43.77.39-69.88,26.5L133.52,66H74.35a13.9,13.9,0,0,0-9.89,4.1L30.11,104.44a14,14,0,0,0,7.94,23.76l39.13,5.46,45.16,45.16L127.8,218a14,14,0,0,0,23.76,7.92l34.35-34.35a13.91,13.91,0,0,0,4.1-9.89V122.48l5.35-5.35h0C221.46,91,222.59,59.56,221.86,47.24ZM38.11,115a2,2,0,0,1,.49-2L72.94,78.58A2,2,0,0,1,74.35,78h47.17L77.87,121.64l-38.14-5.32A1.93,1.93,0,0,1,38.11,115ZM178,181.65a2,2,0,0,1-.59,1.41L143.08,217.4a2,2,0,0,1-3.4-1.11l-5.32-38.16L178,134.48Zm8.87-73h0L128,167.51,88.49,128l58.87-58.88a78.47,78.47,0,0,1,60.69-23A2,2,0,0,1,209.88,48,78.47,78.47,0,0,1,186.88,108.64ZM100,190.31C95.68,199.84,81.13,222,40,222a6,6,0,0,1-6-6c0-41.13,22.16-55.68,31.69-60a6,6,0,1,1,5,10.92c-7,3.17-22.53,13.52-24.47,42.91,29.39-1.94,39.74-17.52,42.91-24.47a6,6,0,1,1,10.92,5Z"},null,-1),M1=[I1],S1={key:4},$1=v("path",{d:"M223.85,47.12a16,16,0,0,0-15-15c-12.58-.75-44.73.4-71.41,27.07L132.69,64H74.36A15.91,15.91,0,0,0,63,68.68L28.7,103a16,16,0,0,0,9.07,27.16l38.47,5.37,44.21,44.21,5.37,38.49a15.94,15.94,0,0,0,10.78,12.92,16.11,16.11,0,0,0,5.1.83A15.91,15.91,0,0,0,153,227.3L187.32,193A15.91,15.91,0,0,0,192,181.64V123.31l4.77-4.77C223.45,91.86,224.6,59.71,223.85,47.12ZM74.36,80h42.33L77.16,119.52,40,114.34Zm74.41-9.45a76.65,76.65,0,0,1,59.11-22.47,76.46,76.46,0,0,1-22.42,59.16L128,164.68,91.32,128ZM176,181.64,141.67,216l-5.19-37.17L176,139.31Zm-74.16,9.5C97.34,201,82.29,224,40,224a8,8,0,0,1-8-8c0-42.29,23-57.34,32.86-61.85a8,8,0,0,1,6.64,14.56c-6.43,2.93-20.62,12.36-23.12,38.91,26.55-2.5,36-16.69,38.91-23.12a8,8,0,1,1,14.56,6.64Z"},null,-1),N1=[$1],z1={key:5},B1=v("path",{d:"M219.86,47.36a12,12,0,0,0-11.22-11.22c-12-.71-42.82.38-68.35,25.91L134.35,68h-60a11.9,11.9,0,0,0-8.48,3.52L31.52,105.85a12,12,0,0,0,6.81,20.37l39.79,5.55,46.11,46.11,5.55,39.81a12,12,0,0,0,20.37,6.79l34.34-34.35a11.9,11.9,0,0,0,3.52-8.48v-60l5.94-5.94C219.48,90.18,220.57,59.41,219.86,47.36ZM36.21,115.6a3.94,3.94,0,0,1,1-4.09L71.53,77.17A4,4,0,0,1,74.35,76h52L78.58,123.76,39.44,118.3A3.94,3.94,0,0,1,36.21,115.6ZM180,181.65a4,4,0,0,1-1.17,2.83l-34.35,34.34a4,4,0,0,1-6.79-2.25l-5.46-39.15L180,129.65Zm-52-11.31L85.66,128l60.28-60.29c23.24-23.24,51.25-24.23,62.22-23.58a3.93,3.93,0,0,1,3.71,3.71c.65,11-.35,39-23.58,62.22ZM98.21,189.48C94,198.66,80,220,40,220a4,4,0,0,1-4-4c0-40,21.34-54,30.52-58.21a4,4,0,0,1,3.32,7.28c-7.46,3.41-24.43,14.66-25.76,46.85,32.19-1.33,43.44-18.3,46.85-25.76a4,4,0,1,1,7.28,3.32Z"},null,-1),E1=[B1],T1={name:"PhRocketLaunch"},R1=P({...T1,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(m){const s=m,c=z("weight","regular"),y=z("size","1em"),w=z("color","currentColor"),b=z("mirrored",!1),h=M(()=>{var u;return(u=s.weight)!=null?u:c}),k=M(()=>{var u;return(u=s.size)!=null?u:y}),L=M(()=>{var u;return(u=s.color)!=null?u:w}),d=M(()=>s.mirrored!==void 0?s.mirrored?"scale(-1, 1)":void 0:b?"scale(-1, 1)":void 0);return(u,C)=>(n(),g("svg",X({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:k.value,height:k.value,fill:L.value,transform:d.value},u.$attrs),[O(u.$slots,"default"),h.value==="bold"?(n(),g("g",_1,w1)):h.value==="duotone"?(n(),g("g",b1,C1)):h.value==="fill"?(n(),g("g",A1,j1)):h.value==="light"?(n(),g("g",x1,M1)):h.value==="regular"?(n(),g("g",S1,N1)):h.value==="thin"?(n(),g("g",z1,E1)):V("",!0)],16,y1))}});class A{constructor(s,c,y,w){this.major=s,this.minor=c,this.patch=y,this.dev=w}static from(s){if(s===null)return new A(0,0,0);const c=/^(\d+\.\d+\.\d+)(.dev(\d+))?$/,y=s.match(c);if(!y)return new A(0,0,0);const[,w,,b]=y,[h,k,L]=w.split(".").map(Number),d=b?Number(b):void 0;return isNaN(h)||isNaN(k)||isNaN(L)?new A(0,0,0):d&&isNaN(d)?new A(0,0,0):new A(h,k,L,d)}gte(s){return this.major!==s.major?this.major>=s.major:this.minor!==s.minor?this.minor>=s.minor:this.patch>=s.patch}get version(){const s=this.dev?`.dev${this.dev}`:"";return`${this.major}.${this.minor}.${this.patch}${s}`}}const V1=A.from("2.16.10"),P1={key:0,class:"flex-row"},D1={key:1,class:"flex-row"},F1={key:2,class:"flex-row"},H1=P({__name:"ExecutionsShort",props:{stageId:{},projectId:{}},emits:["select"],setup(m,{emit:s}){const c=m,y=new h1,{result:w,refetch:b,loading:h}=U(async()=>{const{executions:C}=await y.list({projectId:c.projectId,stageId:c.stageId,limit:6});return C}),k=C=>{s("select",C)},L=C=>i1(C,{weekday:void 0}),{startPolling:d,endPolling:u}=p1({task:b,interval:15e3});return Y(()=>d()),J(()=>u()),(C,D)=>e(w)?(n(),g("div",P1,[(n(!0),g(K,null,Q(e(w),l=>(n(),x(e(e1),{key:l.id,title:L(l.createdAt),onClick:r=>k(l)},{content:t(()=>[a(e(_),null,{default:t(()=>[o("Status: "+S(l.status),1)]),_:2},1024),a(e(_),null,{default:t(()=>[o("Duration: "+S(l.duration_seconds),1)]),_:2},1024),a(e(_),null,{default:t(()=>[o("Build: "+S(l.buildId.slice(0,6)),1)]),_:2},1024)]),default:t(()=>[a(m1,{status:l.status},null,8,["status"])]),_:2},1032,["title","onClick"]))),128))])):e(h)?(n(),g("div",D1,[a(e(t1))])):(n(),g("div",F1,"None"))}});const U1=W(H1,[["__scopeId","data-v-9d19fd00"]]),G=m=>(o1("data-v-95c83e66"),m=m(),s1(),m),W1={style:{"max-width":"250px",overflow:"hidden","text-overflow":"ellipsis ellipsis","white-space":"nowrap"}},G1={key:1},q1=G(()=>v("div",{class:"flex-container",style:{width:"10%"}},[v("p",null,"OR")],-1)),O1=G(()=>v("br",null,null,-1)),X1=P({__name:"Live",setup(m){const c=a1().params.projectId,y=()=>{R.push({name:"web-editor",params:{projectId:c}})},w=()=>{var r;const l=(r=d.value)==null?void 0:r.project.getUrl();l&&window.open(l,"_blank")},b=M(()=>{var l;return(l=d==null?void 0:d.value)==null?void 0:l.organization.featureFlags.WEB_EDITOR}),h=()=>{var Z,p,$;const l=(p=(Z=d.value)==null?void 0:Z.buildSpec)==null?void 0:p.abstraVersion;if(!l)return;let r="threads";A.from(l).gte(V1)||(r="_player/"+r);const i=(($=d.value)==null?void 0:$.project.getUrl())+r;window.open(i,"_blank")},k=l=>{R.push({name:"logs",params:{projectId:c},query:{stageId:l.stageId,executionId:l.id}})},{loading:L,result:d}=U(async()=>{const[l,r]=await Promise.all([u1.get(c),n1.list(c)]),f=r.find(p=>p.latest),[i,Z]=await Promise.all([f&&d1.get(f.id),c1.get(l.organizationId)]);return{buildSpec:i,project:l,organization:Z}}),u=l=>{var i;if(!("path"in l)||!l.path)return;const r=l.type==="form"?`/${l.path}`:`/_hooks/${l.path}`,f=(i=d.value)==null?void 0:i.project.getUrl(r);!f||(navigator.clipboard.writeText(f),r1.success("Copied URL to clipboard"))},C=l=>l.type=="form"?`/${l.path}`:l.type=="hook"?`/_hooks/${l.path}`:l.type=="job"?`${l.schedule}`:"",D=M(()=>{var f;const l=[{name:"Type",align:"left"},{name:"Title",align:"left"},{name:"Trigger",align:"left"},{name:"Last Runs"},{name:"",align:"right"}],r=(f=d.value)==null?void 0:f.buildSpec;return r?{columns:l,rows:r.runtimes.map(i=>({key:i.id,cells:[{type:"tag",text:i.type.charAt(0).toUpperCase()+i.type.slice(1),tagColor:"default"},{type:"slot",key:"title",payload:{runtime:i}},{type:"slot",key:"trigger",payload:{runtime:i}},{type:"slot",key:"last-runs",payload:{runtime:i}},{type:"actions",actions:[{icon:f1,label:"View script logs",onClick:()=>R.push({name:"logs",params:{projectId:c},query:{stageId:i.id}})},{icon:g1,label:"Copy URL",onClick:()=>u(i),hide:!["form","hook"].includes(i.type)}]}]}))}:{columns:l,rows:[]}});return(l,r)=>{var f,i,Z;return e(L)||((Z=(i=(f=e(d))==null?void 0:f.buildSpec)==null?void 0:i.runtimes.length)!=null?Z:0)>0?(n(),x(q,{key:0,"empty-title":"","entity-name":"build",description:"Access and monitor your project's current scripts here.",table:D.value,loading:e(L),title:"Live View"},{description:t(()=>[a(e(j),{gap:"middle",style:{"margin-top":"12px"}},{default:t(()=>[a(e(I),{onClick:w},{default:t(()=>[o(" Home"),a(e(E),{class:"icon",size:16})]),_:1}),a(e(I),{onClick:h},{default:t(()=>[o(" Threads"),a(e(E),{class:"icon",size:16})]),_:1}),b.value?(n(),x(e(I),{key:0,type:"primary",onClick:y},{default:t(()=>[o(" Web Editor"),a(e(E),{class:"icon",size:16})]),_:1})):V("",!0)]),_:1})]),title:t(({payload:p})=>{var $;return[v("div",W1,[p.runtime.type!="form"?(n(),x(e(N),{key:0},{default:t(()=>[o(S(p.runtime.title),1)]),_:2},1024)):p.runtime.type=="form"?(n(),x(e(T),{key:1,href:($=e(d))==null?void 0:$.project.getUrl(p.runtime.path),target:"_blank"},{default:t(()=>[o(S(p.runtime.title),1)]),_:2},1032,["href"])):V("",!0)])]}),"last-runs":t(({payload:p})=>[a(U1,{"stage-id":p.runtime.id,"project-id":e(c),onSelect:k},null,8,["stage-id","project-id"])]),trigger:t(({payload:p})=>[a(e(l1),{color:"default",class:"ellipsis"},{default:t(()=>[o(S(C(p.runtime)),1)]),_:2},1024)]),_:1},8,["table","loading"])):(n(),g("section",G1,[a(e(j),{gap:"middle",align:"center",justify:"center",vertical:!0,style:{height:"100%"}},{default:t(()=>[a(e(B),{style:{display:"flex","align-items":"center",gap:"5px"},level:2},{default:t(()=>[a(e(R1),{size:"42",color:"#d14056"}),o(" Waiting for your first deploy! ")]),_:1}),a(e(_),null,{default:t(()=>[o(" Your live stages will appear here once you make your first deploy ")]),_:1})]),_:1}),b.value?(n(),x(e(j),{key:0,gap:"middle",align:"center",justify:"center",vertical:!0,style:{height:"100%"}},{default:t(()=>[a(e(j),{gap:"small",style:{width:"80%"}},{default:t(()=>[a(e(j),{vertical:"",align:"end",style:{width:"45%"}},{default:t(()=>[a(e(B),{level:5},{default:t(()=>[o(" Start with our cloud environment ")]),_:1}),a(e(I),{type:"primary",onClick:y},{default:t(()=>[o(" Go to Web Editor"),a(e(E),{class:"icon",size:16})]),_:1})]),_:1}),q1,a(e(j),{vertical:"",align:"start",style:{width:"45%"}},{default:t(()=>[a(e(B),{level:5},{default:t(()=>[o(" Set up your local one ")]),_:1}),a(e(_),null,{default:t(()=>[o(" Install the editor using pip: "),a(e(N),{code:"",copyable:""},{default:t(()=>[o("pip install abstra")]),_:1})]),_:1}),a(e(_),null,{default:t(()=>[o(" Run the editor: "),a(e(N),{code:"",copyable:""},{default:t(()=>[o("abstra editor my-new-project")]),_:1})]),_:1})]),_:1})]),_:1}),a(e(_),null,{default:t(()=>[o(" Check out the documentation: "),a(e(T),{href:"https://docs.abstra.io",target:"_blank"},{default:t(()=>[o("Abstra Docs")]),_:1})]),_:1}),a(e(_),null,{default:t(()=>[o(" Feeling lost? "),a(e(I),{target:"_blank",type:"default",size:"small",onClick:r[0]||(r[0]=()=>e(F).showNewMessage("I need help getting started with Abstra"))},{default:t(()=>[a(e(H))]),_:1})]),_:1})]),_:1})):(n(),x(e(j),{key:1,gap:"middle",align:"center",justify:"center",vertical:!0,style:{height:"100%"}},{default:t(()=>[a(e(B),{style:{display:"flex","align-items":"center",gap:"5px"},level:4},{default:t(()=>[o(" Set up your local environment ")]),_:1}),a(e(_),null,{default:t(()=>[o(" Install the editor using pip: "),a(e(N),{code:"",copyable:""},{default:t(()=>[o("pip install abstra")]),_:1}),O1,o(" Run the editor: "),a(e(N),{code:"",copyable:""},{default:t(()=>[o("abstra editor my-new-project")]),_:1})]),_:1}),a(e(_),null,{default:t(()=>[o(" Check out the documentation: "),a(e(T),{href:"https://docs.abstra.io",target:"_blank"},{default:t(()=>[o("Abstra Docs")]),_:1})]),_:1}),a(e(_),null,{default:t(()=>[o(" Feeling lost? "),a(e(I),{target:"_blank",type:"default",size:"small",onClick:r[1]||(r[1]=()=>e(F).showNewMessage("I need help getting started with Abstra"))},{default:t(()=>[a(e(H))]),_:1})]),_:1})]),_:1}))]))}}});const be=W(X1,[["__scopeId","data-v-95c83e66"]]);export{be as default};
//# sourceMappingURL=Live.2e2d1bca.js.map
