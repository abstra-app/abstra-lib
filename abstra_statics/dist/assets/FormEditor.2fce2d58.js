import{u as Ce}from"./index.248469b1.js";import{d as L,Z as C,J as $,b as u,ew as h,dj as q,ey as x,eB as Q,e as _,o as Fe,I as Te,c as A,w as t,f as a,u as e,x as D,r as S,as as g,bz as T,aE as ue,eC as ie,eD as de,bA as oe,bG as H,eF as He,cC as Ie,eK as Ze,eE as Le,ax as Ue,K as re,L as Ee,z as Re,eM as Be,eH as Ne,bh as De,cy as Pe,aI as E}from"./outputWidgets.edf91cb2.js";import{B as ze}from"./BaseLayout.2549806f.js";import{R as We,E as je,S as Oe,a as qe,L as Qe}from"./SourceCode.ca135b6f.js";import{F as R,a as Ge,b as Je,c as Ke,d as Ye,r as ne}from"./FormRunner.48ebeff7.js";import{A as j}from"./api.b2b81803.js";import{a as Xe}from"./asyncComputed.bb94a960.js";import{L as ea}from"./CircularLoading.03ff7bd0.js";import{W as aa}from"./WidgetsFrame.963428fe.js";import{F as ta}from"./PhArrowSquareOut.vue.1c3238a7.js";import{G as la}from"./PhFlowArrow.vue.ff22f711.js";import{F as oa}from"./metadata.d231dc56.js";import{F as ra}from"./forms.1afee373.js";import{W as O}from"./workspaces.73e88ba6.js";import"./envVars.217da56f.js";import{S as na}from"./SaveButton.2e9a67c2.js";import{T as sa}from"./ThreadSelector.4e43b836.js";import{M as pe}from"./Modal.aeaf72f8.js";import{A as me}from"./index.fba68bcf.js";import{A as U}from"./Title.32109917.js";import{a as B}from"./Base.bb0f5df6.js";import{A as V,F as ve}from"./Form.d2e47ca3.js";import{A as se}from"./index.8194be56.js";import{A as N}from"./index.7dff3d17.js";import{N as ua}from"./NavbarControls.ffc07a86.js";import{b as ia}from"./index.f2a0d8d0.js";import{A as W,T as da}from"./TabPane.d7caf019.js";import{A as pa}from"./Text.b858a33c.js";import{B as ma}from"./Badge.00e665cf.js";import{A as va}from"./index.9e5fc940.js";import{A as ca}from"./Link.b6db433b.js";import"./fetch.45bcfc11.js";import"./pubsub.0a29fd15.js";import"./uuid.a0517662.js";import"./PhCaretRight.vue.086b6bf4.js";import"./login.4f28fe9a.js";import"./jobs.3850ed5c.js";import"./record.026663a3.js";import"./scripts.a4cd958d.js";import"./validations.f280c671.js";import"./string.71a3833b.js";import"./PhPencil.vue.4c3a60b9.js";import"./toggleHighContrast.0127b6d7.js";import"./Card.1907067e.js";import"./url.2a521bdf.js";import"./Login.vue_vue_type_script_setup_true_lang.77be8f47.js";import"./PhArrowClockwise.vue.6d853a42.js";import"./Steps.6100c997.js";import"./PhInfo.vue.1b4ebf50.js";import"./PhCheckCircle.vue.8b820cf4.js";import"./PhScroll.vue.b6dffe56.js";import"./PhWebhooksLogo.vue.633c34a0.js";import"./runnerData.8e2c781a.js";import"./UnsavedChangesHandler.d0a9b4f4.js";import"./ExclamationCircleOutlined.a9fc4eca.js";import"./index.38c2409d.js";import"./hasIn.16824822.js";import"./popupNotifcation.fdcdcec9.js";import"./CloseCircleOutlined.5ce776eb.js";import"./DocsButton.vue_vue_type_script_setup_true_lang.a0271691.js";import"./BookOutlined.1fcbf965.js";import"./index.51790991.js";import"./isNumeric.75337b1e.js";(function(){try{var f=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},p=new Error().stack;p&&(f._sentryDebugIds=f._sentryDebugIds||{},f._sentryDebugIds[p]="35aaadaf-484e-4842-b2f1-b1f06de5ffd1",f._sentryDebugIdIdentifier="sentry-dbid-35aaadaf-484e-4842-b2f1-b1f06de5ffd1")}catch{}})();const fa=["width","height","fill","transform"],ga={key:0},ha=_("path",{d:"M228,48V96a12,12,0,0,1-12,12H168a12,12,0,0,1,0-24h19l-7.8-7.8a75.55,75.55,0,0,0-53.32-22.26h-.43A75.49,75.49,0,0,0,72.39,75.57,12,12,0,1,1,55.61,58.41a99.38,99.38,0,0,1,69.87-28.47H126A99.42,99.42,0,0,1,196.2,59.23L204,67V48a12,12,0,0,1,24,0ZM183.61,180.43a75.49,75.49,0,0,1-53.09,21.63h-.43A75.55,75.55,0,0,1,76.77,179.8L69,172H88a12,12,0,0,0,0-24H40a12,12,0,0,0-12,12v48a12,12,0,0,0,24,0V189l7.8,7.8A99.42,99.42,0,0,0,130,226.06h.56a99.38,99.38,0,0,0,69.87-28.47,12,12,0,0,0-16.78-17.16Z"},null,-1),ya=[ha],_a={key:1},ka=_("path",{d:"M216,128a88,88,0,1,1-88-88A88,88,0,0,1,216,128Z",opacity:"0.2"},null,-1),wa=_("path",{d:"M224,48V96a8,8,0,0,1-8,8H168a8,8,0,0,1,0-16h28.69L182.06,73.37a79.56,79.56,0,0,0-56.13-23.43h-.45A79.52,79.52,0,0,0,69.59,72.71,8,8,0,0,1,58.41,61.27a96,96,0,0,1,135,.79L208,76.69V48a8,8,0,0,1,16,0ZM186.41,183.29a80,80,0,0,1-112.47-.66L59.31,168H88a8,8,0,0,0,0-16H40a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V179.31l14.63,14.63A95.43,95.43,0,0,0,130,222.06h.53a95.36,95.36,0,0,0,67.07-27.33,8,8,0,0,0-11.18-11.44Z"},null,-1),ba=[ka,wa],Aa={key:2},Sa=_("path",{d:"M224,48V96a8,8,0,0,1-8,8H168a8,8,0,0,1-5.66-13.66L180.65,72a79.48,79.48,0,0,0-54.72-22.09h-.45A79.52,79.52,0,0,0,69.59,72.71,8,8,0,0,1,58.41,61.27,96,96,0,0,1,192,60.7l18.36-18.36A8,8,0,0,1,224,48ZM186.41,183.29A80,80,0,0,1,75.35,184l18.31-18.31A8,8,0,0,0,88,152H40a8,8,0,0,0-8,8v48a8,8,0,0,0,13.66,5.66L64,195.3a95.42,95.42,0,0,0,66,26.76h.53a95.36,95.36,0,0,0,67.07-27.33,8,8,0,0,0-11.18-11.44Z"},null,-1),$a=[Sa],xa={key:3},Ma=_("path",{d:"M222,48V96a6,6,0,0,1-6,6H168a6,6,0,0,1,0-12h33.52L183.47,72a81.51,81.51,0,0,0-57.53-24h-.46A81.5,81.5,0,0,0,68.19,71.28a6,6,0,1,1-8.38-8.58,93.38,93.38,0,0,1,65.67-26.76H126a93.45,93.45,0,0,1,66,27.53l18,18V48a6,6,0,0,1,12,0ZM187.81,184.72a81.5,81.5,0,0,1-57.29,23.34h-.46a81.51,81.51,0,0,1-57.53-24L54.48,166H88a6,6,0,0,0,0-12H40a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V174.48l18,18.05a93.45,93.45,0,0,0,66,27.53h.52a93.38,93.38,0,0,0,65.67-26.76,6,6,0,1,0-8.38-8.58Z"},null,-1),Va=[Ma],Ca={key:4},Fa=_("path",{d:"M224,48V96a8,8,0,0,1-8,8H168a8,8,0,0,1,0-16h28.69L182.06,73.37a79.56,79.56,0,0,0-56.13-23.43h-.45A79.52,79.52,0,0,0,69.59,72.71,8,8,0,0,1,58.41,61.27a96,96,0,0,1,135,.79L208,76.69V48a8,8,0,0,1,16,0ZM186.41,183.29a80,80,0,0,1-112.47-.66L59.31,168H88a8,8,0,0,0,0-16H40a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V179.31l14.63,14.63A95.43,95.43,0,0,0,130,222.06h.53a95.36,95.36,0,0,0,67.07-27.33,8,8,0,0,0-11.18-11.44Z"},null,-1),Ta=[Fa],Ha={key:5},Ia=_("path",{d:"M220,48V96a4,4,0,0,1-4,4H168a4,4,0,0,1,0-8h38.34L184.89,70.54A84,84,0,0,0,66.8,69.85a4,4,0,1,1-5.6-5.72,92,92,0,0,1,129.34.76L212,86.34V48a4,4,0,0,1,8,0ZM189.2,186.15a83.44,83.44,0,0,1-58.68,23.91h-.47a83.52,83.52,0,0,1-58.94-24.6L49.66,164H88a4,4,0,0,0,0-8H40a4,4,0,0,0-4,4v48a4,4,0,0,0,8,0V169.66l21.46,21.45A91.43,91.43,0,0,0,130,218.06h.51a91.45,91.45,0,0,0,64.28-26.19,4,4,0,1,0-5.6-5.72Z"},null,-1),Za=[Ia],La={name:"PhArrowsClockwise"},Ua=L({...La,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(f){const p=f,n=C("weight","regular"),y=C("size","1em"),s=C("color","currentColor"),l=C("mirrored",!1),o=$(()=>{var r;return(r=p.weight)!=null?r:n}),k=$(()=>{var r;return(r=p.size)!=null?r:y}),F=$(()=>{var r;return(r=p.color)!=null?r:s}),c=$(()=>p.mirrored!==void 0?p.mirrored?"scale(-1, 1)":void 0:l?"scale(-1, 1)":void 0);return(r,b)=>(u(),h("svg",Q({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:k.value,height:k.value,fill:F.value,transform:c.value},r.$attrs),[q(r.$slots,"default"),o.value==="bold"?(u(),h("g",ga,ya)):o.value==="duotone"?(u(),h("g",_a,ba)):o.value==="fill"?(u(),h("g",Aa,$a)):o.value==="light"?(u(),h("g",xa,Va)):o.value==="regular"?(u(),h("g",Ca,Ta)):o.value==="thin"?(u(),h("g",Ha,Za)):x("",!0)],16,fa))}}),Ea=["width","height","fill","transform"],Ra={key:0},Ba=_("path",{d:"M234.49,111.07,90.41,22.94A20,20,0,0,0,60,39.87V216.13a20,20,0,0,0,30.41,16.93l144.08-88.13a19.82,19.82,0,0,0,0-33.86ZM84,208.85V47.15L216.16,128Z"},null,-1),Na=[Ba],Da={key:1},Pa=_("path",{d:"M228.23,134.69,84.15,222.81A8,8,0,0,1,72,216.12V39.88a8,8,0,0,1,12.15-6.69l144.08,88.12A7.82,7.82,0,0,1,228.23,134.69Z",opacity:"0.2"},null,-1),za=_("path",{d:"M232.4,114.49,88.32,26.35a16,16,0,0,0-16.2-.3A15.86,15.86,0,0,0,64,39.87V216.13A15.94,15.94,0,0,0,80,232a16.07,16.07,0,0,0,8.36-2.35L232.4,141.51a15.81,15.81,0,0,0,0-27ZM80,215.94V40l143.83,88Z"},null,-1),Wa=[Pa,za],ja={key:2},Oa=_("path",{d:"M240,128a15.74,15.74,0,0,1-7.6,13.51L88.32,229.65a16,16,0,0,1-16.2.3A15.86,15.86,0,0,1,64,216.13V39.87a15.86,15.86,0,0,1,8.12-13.82,16,16,0,0,1,16.2.3L232.4,114.49A15.74,15.74,0,0,1,240,128Z"},null,-1),qa=[Oa],Qa={key:3},Ga=_("path",{d:"M231.36,116.19,87.28,28.06a14,14,0,0,0-14.18-.27A13.69,13.69,0,0,0,66,39.87V216.13a13.69,13.69,0,0,0,7.1,12.08,14,14,0,0,0,14.18-.27l144.08-88.13a13.82,13.82,0,0,0,0-23.62Zm-6.26,13.38L81,217.7a2,2,0,0,1-2.06,0,1.78,1.78,0,0,1-1-1.61V39.87a1.78,1.78,0,0,1,1-1.61A2.06,2.06,0,0,1,80,38a2,2,0,0,1,1,.31L225.1,126.43a1.82,1.82,0,0,1,0,3.14Z"},null,-1),Ja=[Ga],Ka={key:4},Ya=_("path",{d:"M232.4,114.49,88.32,26.35a16,16,0,0,0-16.2-.3A15.86,15.86,0,0,0,64,39.87V216.13A15.94,15.94,0,0,0,80,232a16.07,16.07,0,0,0,8.36-2.35L232.4,141.51a15.81,15.81,0,0,0,0-27ZM80,215.94V40l143.83,88Z"},null,-1),Xa=[Ya],et={key:5},at=_("path",{d:"M230.32,117.9,86.24,29.79a11.91,11.91,0,0,0-12.17-.23A11.71,11.71,0,0,0,68,39.89V216.11a11.71,11.71,0,0,0,6.07,10.33,11.91,11.91,0,0,0,12.17-.23L230.32,138.1a11.82,11.82,0,0,0,0-20.2Zm-4.18,13.37L82.06,219.39a4,4,0,0,1-4.07.07,3.77,3.77,0,0,1-2-3.35V39.89a3.77,3.77,0,0,1,2-3.35,4,4,0,0,1,4.07.07l144.08,88.12a3.8,3.8,0,0,1,0,6.54Z"},null,-1),tt=[at],lt={name:"PhPlay"},ot=L({...lt,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(f){const p=f,n=C("weight","regular"),y=C("size","1em"),s=C("color","currentColor"),l=C("mirrored",!1),o=$(()=>{var r;return(r=p.weight)!=null?r:n}),k=$(()=>{var r;return(r=p.size)!=null?r:y}),F=$(()=>{var r;return(r=p.color)!=null?r:s}),c=$(()=>p.mirrored!==void 0?p.mirrored?"scale(-1, 1)":void 0:l?"scale(-1, 1)":void 0);return(r,b)=>(u(),h("svg",Q({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:k.value,height:k.value,fill:F.value,transform:c.value},r.$attrs),[q(r.$slots,"default"),o.value==="bold"?(u(),h("g",Ra,Na)):o.value==="duotone"?(u(),h("g",Da,Wa)):o.value==="fill"?(u(),h("g",ja,qa)):o.value==="light"?(u(),h("g",Qa,Ja)):o.value==="regular"?(u(),h("g",Ka,Xa)):o.value==="thin"?(u(),h("g",et,tt)):x("",!0)],16,Ea))}}),rt=["width","height","fill","transform"],nt={key:0},st=_("path",{d:"M200,36H56A20,20,0,0,0,36,56V200a20,20,0,0,0,20,20H200a20,20,0,0,0,20-20V56A20,20,0,0,0,200,36Zm-4,160H60V60H196Z"},null,-1),ut=[st],it={key:1},dt=_("path",{d:"M208,56V200a8,8,0,0,1-8,8H56a8,8,0,0,1-8-8V56a8,8,0,0,1,8-8H200A8,8,0,0,1,208,56Z",opacity:"0.2"},null,-1),pt=_("path",{d:"M200,40H56A16,16,0,0,0,40,56V200a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V56A16,16,0,0,0,200,40Zm0,160H56V56H200V200Z"},null,-1),mt=[dt,pt],vt={key:2},ct=_("path",{d:"M216,56V200a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V56A16,16,0,0,1,56,40H200A16,16,0,0,1,216,56Z"},null,-1),ft=[ct],gt={key:3},ht=_("path",{d:"M200,42H56A14,14,0,0,0,42,56V200a14,14,0,0,0,14,14H200a14,14,0,0,0,14-14V56A14,14,0,0,0,200,42Zm2,158a2,2,0,0,1-2,2H56a2,2,0,0,1-2-2V56a2,2,0,0,1,2-2H200a2,2,0,0,1,2,2Z"},null,-1),yt=[ht],_t={key:4},kt=_("path",{d:"M200,40H56A16,16,0,0,0,40,56V200a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V56A16,16,0,0,0,200,40Zm0,160H56V56H200V200Z"},null,-1),wt=[kt],bt={key:5},At=_("path",{d:"M200,44H56A12,12,0,0,0,44,56V200a12,12,0,0,0,12,12H200a12,12,0,0,0,12-12V56A12,12,0,0,0,200,44Zm4,156a4,4,0,0,1-4,4H56a4,4,0,0,1-4-4V56a4,4,0,0,1,4-4H200a4,4,0,0,1,4,4Z"},null,-1),St=[At],$t={name:"PhStop"},xt=L({...$t,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(f){const p=f,n=C("weight","regular"),y=C("size","1em"),s=C("color","currentColor"),l=C("mirrored",!1),o=$(()=>{var r;return(r=p.weight)!=null?r:n}),k=$(()=>{var r;return(r=p.size)!=null?r:y}),F=$(()=>{var r;return(r=p.color)!=null?r:s}),c=$(()=>p.mirrored!==void 0?p.mirrored?"scale(-1, 1)":void 0:l?"scale(-1, 1)":void 0);return(r,b)=>(u(),h("svg",Q({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:k.value,height:k.value,fill:F.value,transform:c.value},r.$attrs),[q(r.$slots,"default"),o.value==="bold"?(u(),h("g",nt,ut)):o.value==="duotone"?(u(),h("g",it,mt)):o.value==="fill"?(u(),h("g",vt,ft)):o.value==="light"?(u(),h("g",gt,yt)):o.value==="regular"?(u(),h("g",_t,wt)):o.value==="thin"?(u(),h("g",bt,St)):x("",!0)],16,rt))}}),Mt=L({__name:"ThreadSelectorModal",props:{showThreadModal:{type:Boolean},stage:{},executionConfig:{}},emits:["fix-invalid-json","update:execution-config","update:show-thread-modal"],setup(f,{emit:p}){const n=()=>{p("update:show-thread-modal",!1),O.writeTestData(y.threadData)};Fe(async()=>y.threadData=await O.readTestData());const y=Te({threadData:"{}"});return(s,l)=>(u(),A(e(pe),{open:s.showThreadModal,footer:null,onCancel:n},{default:t(()=>[a(sa,{stage:s.stage,"execution-config":s.executionConfig,"onUpdate:executionConfig":l[0]||(l[0]=o=>p("update:execution-config",o)),"onUpdate:showThreadModal":l[1]||(l[1]=o=>p("update:show-thread-modal",o)),onFixInvalidJson:l[2]||(l[2]=o=>p("fix-invalid-json",o,o))},null,8,["stage","execution-config"])]),_:1},8,["open"]))}});const Vt=D(Mt,[["__scopeId","data-v-541d30a8"]]),ce=f=>(ie("data-v-a8ca44f6"),f=f(),de(),f),Ct=ce(()=>_("i",null,"string",-1)),Ft=ce(()=>_("i",null,"string list",-1)),Tt=L({__name:"FormNotificationSettings",props:{form:{}},setup(f){const n=S(f.form);return(y,s)=>(u(),h(ue,null,[a(e(ve),{layout:"vertical"},{default:t(()=>[a(e(U),{level:4,width:"100%",height:"30px",style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0px"}},{default:t(()=>[g(" Thread waiting "),a(e(me),{checked:n.value.notificationTrigger.enabled,"onUpdate:checked":s[0]||(s[0]=l=>n.value.notificationTrigger.enabled=l)},{default:t(()=>[g(" Enabled ")]),_:1},8,["checked"])]),_:1}),a(e(B),{class:"description",style:{fontStyle:"italic",marginBottom:"20px"}},{default:t(()=>[g(" Send emails when the thread is waiting for the form to be filled ")]),_:1}),a(e(V),{label:"Variable name"},{default:t(()=>[a(e(T),{value:n.value.notificationTrigger.variable_name,"onUpdate:value":s[1]||(s[1]=l=>n.value.notificationTrigger.variable_name=l),disabled:!n.value.notificationTrigger.enabled,type:"text",placeholder:"variable_name"},null,8,["value","disabled"])]),_:1})]),_:1}),a(e(se),{type:"info"},{message:t(()=>[a(e(B),null,{default:t(()=>[g(" Notifications are sent to the emails specified in the thread variables set here. The variables should contain a "),Ct,g(" or a "),Ft,g(". ")]),_:1})]),_:1}),a(e(se),{style:{"margin-top":"20px"}},{message:t(()=>[a(e(B),null,{default:t(()=>[g(" Notifications are a paid feature. Talk to your account manager to enable them. ")]),_:1})]),_:1})],64))}});const Ht=D(Tt,[["__scopeId","data-v-a8ca44f6"]]),It=L({__name:"FormSettings",props:{form:{}},setup(f){const n=S(f.form);return(y,s)=>(u(),A(e(ve),{layout:"vertical",class:"form-settings"},{default:t(()=>[a(We,{runtime:n.value},null,8,["runtime"]),a(e(V),{label:"Form name"},{default:t(()=>[a(e(T),{value:n.value.title,"onUpdate:value":s[0]||(s[0]=l=>n.value.title=l),type:"text",onChange:s[1]||(s[1]=l=>{var o;return n.value.title=(o=l.target.value)!=null?o:""})},null,8,["value"])]),_:1}),a(e(U),{level:3},{default:t(()=>[g(" Texts ")]),_:1}),a(e(U),{level:4},{default:t(()=>[g(" Welcome Screen ")]),_:1}),a(e(V),{label:"Title"},{default:t(()=>[a(e(T),{value:n.value.welcomeTitle,"onUpdate:value":s[2]||(s[2]=l=>n.value.welcomeTitle=l),type:"text",placeholder:n.value.title,disabled:n.value.autoStart},null,8,["value","placeholder","disabled"])]),_:1}),a(e(V),{label:"Description"},{default:t(()=>[a(e(T),{value:n.value.startMessage,"onUpdate:value":s[3]||(s[3]=l=>n.value.startMessage=l),type:"text",disabled:n.value.autoStart},null,8,["value","disabled"])]),_:1}),a(e(V),{label:"Start button label"},{default:t(()=>[a(e(T),{value:n.value.startButtonText,"onUpdate:value":s[4]||(s[4]=l=>n.value.startButtonText=l),type:"text",placeholder:"Start",disabled:n.value.autoStart},null,8,["value","disabled"])]),_:1}),a(e(V),null,{default:t(()=>[a(e(oe),{checked:n.value.autoStart,"onUpdate:checked":s[5]||(s[5]=l=>n.value.autoStart=l)},{default:t(()=>[g("Skip welcome screen")]),_:1},8,["checked"])]),_:1}),a(e(U),{level:4},{default:t(()=>[g(" End Screen ")]),_:1}),a(e(V),{label:"End text"},{default:t(()=>[a(e(T),{value:n.value.endMessage,"onUpdate:value":s[6]||(s[6]=l=>n.value.endMessage=l),type:"text",placeholder:"Thank you"},null,8,["value"])]),_:1}),a(e(V),{label:"Restart button label"},{default:t(()=>[a(e(T),{value:n.value.restartButtonText,"onUpdate:value":s[7]||(s[7]=l=>n.value.restartButtonText=l),placeholder:"Restart",type:"text",disabled:!n.value.allowRestart},null,8,["value","disabled"])]),_:1}),a(e(V),{help:!n.value.isInitial&&"Only initial forms can be restarted"},{default:t(()=>[a(e(oe),{checked:n.value.allowRestart,"onUpdate:checked":s[8]||(s[8]=l=>n.value.allowRestart=l),disabled:!n.value.isInitial},{default:t(()=>[g("Show restart button at the end")]),_:1},8,["checked","disabled"])]),_:1},8,["help"]),a(e(U),{level:4},{default:t(()=>[g(" Alert Messages ")]),_:1}),a(e(V),{label:"Error message"},{default:t(()=>[a(e(T),{value:n.value.errorMessage,"onUpdate:value":s[9]||(s[9]=l=>n.value.errorMessage=l),type:"text",placeholder:"Something went wrong"},null,8,["value"])]),_:1})]),_:1}))}});const Zt=D(It,[["__scopeId","data-v-596854dc"]]),Lt=L({__name:"QueryParamsModal",props:{open:{type:Boolean},close:{type:Function},queryParams:{}},emits:["update:query-params"],setup(f,{emit:p}){const y=S(s(f.queryParams));function s(c){return Object.entries(c).map(([r,b])=>({key:r,value:b,id:Math.random().toString()}))}function l(){const c={};return y.value.forEach(({key:r,value:b})=>{c[r]=b}),c}const o=(c,r,b)=>{y.value[c]={key:r,value:b},p("update:query-params",l())},k=()=>{const c=y.value.length;y.value.push({key:`param-${c}`,value:"value"}),p("update:query-params",l())},F=c=>{y.value.splice(c,1),p("update:query-params",l())};return(c,r)=>(u(),A(e(pe),{open:c.open,onCancel:c.close},{footer:t(()=>[a(e(H),{type:"primary",onClick:c.close},{default:t(()=>[g("OK")]),_:1},8,["onClick"])]),default:t(()=>[a(e(N),{vertical:"",gap:"20"},{default:t(()=>[a(e(B),null,{default:t(()=>[g("Query params")]),_:1}),(u(!0),h(ue,null,He(y.value,(b,v)=>(u(),A(e(V),{key:v},{default:t(()=>[a(e(Ie),null,{default:t(()=>[a(e(T),{value:b.key,"onUpdate:value":I=>b.key=I,type:"text",placeholder:"name",onChange:()=>o(v,b.key,b.value)},null,8,["value","onUpdate:value","onChange"]),a(e(T),{value:b.value,"onUpdate:value":I=>b.value=I,type:"text",placeholder:"value",disabled:b.key===e(j),onChange:()=>o(v,b.key,b.value)},null,8,["value","onUpdate:value","disabled","onChange"]),a(e(H),{danger:"",onClick:I=>F(v)},{default:t(()=>[g("remove")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),a(e(V),null,{default:t(()=>[a(e(H),{type:"dashed",style:{width:"100%"},onClick:k},{default:t(()=>[g(" Add Query Param ")]),_:1})]),_:1})]),_:1})]),_:1},8,["open","onCancel"]))}}),Ut=f=>(ie("data-v-71559d36"),f=f(),de(),f),Et={key:0},Rt={key:1},Bt=Ut(()=>_("br",null,null,-1)),Nt=L({__name:"FormEditor",setup(f){var ee;const p=Ze(),n=Le(),y=S(null),s=S("source-code"),l=S(null),o=S(null),k=S(null),F=S(null),c=S({}),r=S(!1),b=m=>v.value={...v.value,attached:!!m},v=S({attached:!1,stageRunId:null,pendingFork:!1,isInitial:!1}),I=$(()=>{var m;return(m=w.value)!=null&&m.form.hasChanges()?{title:"Unsaved changes",message:"Save the form before running the workflow"}:v.value.attached&&v.value.pendingFork?{title:"Past thread selected",message:"Fork the selected thread to run the workflow"}:!v.value.isInitial&&v.value.attached&&!v.value.stageRunId?{title:"No thread selected",message:"Select a thread to run the workflow"}:null}),fe=(m,i)=>{var d;(d=y.value)==null||d.setHighlight(m,i)},ge=()=>{var m,i;(m=y.value)==null||m.restartEditor(),(i=y.value)==null||i.startPreviewMode()},he=$(()=>!v.value.isInitial&&v.value.attached&&!!(v.value.pendingFork||!v.value.stageRunId));Ue(()=>v.value.stageRunId?c.value={...c.value,[j]:v.value.stageRunId}:null);const{result:w,loading:ye,refetch:_e}=Xe(async()=>{const[m,i]=await Promise.all([ra.get(n.params.id),O.get()]);return v.value.isInitial=m.isInitial,Be({form:m,workspace:i})});re([()=>v.value.attached,c,w],()=>{G()});function G(){if(!w.value)return;const m=!v.value.attached;k.value=w.value.form.makeRunnerData(w.value.workspace),l.value&&l.value.clearListeners(),l.value=new Ke({formRunnerData:k.value,queryParams:c.value,userManager:Ce,logService:Y,connectionManager:new Ye(w.value.form.id,"editor",m),onFormStart:ge,onFormEnd:ke,onRedirect:$e,onAuthUpdate:d=>F.value=d,onStateUpdate:d=>o.value=d,onStackTraceUpdate:fe});const i=l.value.getState();o.value=i.formState,F.value=i.passwordlessUser}const ke=()=>{var m,i,d;v.value={attached:!1,stageRunId:null,pendingFork:!1,isInitial:(i=(m=w.value)==null?void 0:m.form.isInitial)!=null?i:!1},(d=y.value)==null||d.restartEditor()};function we(){var m;(m=l.value)==null||m.start()}function J(){var m,i;(m=y.value)==null||m.restartEditor(),(i=l.value)==null||i.reset()}const be=m=>{ne("editor",p,m.path)};function Ae(){p.push({name:"stages"})}const K=S(null),Se=m=>{!w.value||(w.value.form.file=m)},Y=Qe.create();function $e(m,i){ne("editor",p,m,i)}const xe=()=>{var d;let m=`/${(d=w.value)==null?void 0:d.form.path}`;const i=new URLSearchParams(c.value);v.value.attached&&v.value.stageRunId&&i.set(j,v.value.stageRunId),window.open(`${m}?${i.toString()}`,"_blank")},P=S(!1),Me=$(()=>{if(!k.value)return"";const m=Object.entries(c.value),i="?"+m.map(([M,Z])=>`${M}=${Z}`).join("&"),d=m.length?i:"";return`/${k.value.path}${d}`}),X=new Ee(Re.boolean(),"dontShowReloadHelper"),z=S((ee=X.get())!=null?ee:!1),Ve=()=>{X.set(!0),z.value=!0};return re(()=>n.params.id,()=>{_e()}),(m,i)=>(u(),A(ze,null,{navbar:t(()=>[e(w)?(u(),A(e(ia),{key:0,title:e(w).form.title,style:{padding:"5px 25px",border:"1px solid #f6f6f6"},onBack:Ae},{extra:t(()=>[a(ua,{"docs-path":"concepts/forms","show-save-button":!1,"editing-model":e(w).form},null,8,["editing-model"])]),_:1},8,["title"])):x("",!0)]),content:t(()=>[e(w)?(u(),A(je,{key:0},{left:t(()=>[a(e(da),{"active-key":s.value,"onUpdate:activeKey":i[0]||(i[0]=d=>s.value=d)},{rightExtra:t(()=>[a(na,{model:e(w).form,onSave:G},null,8,["model"])]),default:t(()=>[a(e(W),{key:"source-code",tab:"Source code"}),a(e(W),{key:"settings",tab:"Settings"}),a(e(W),{key:"notifications",tab:"Notifications"})]),_:1},8,["active-key"]),s.value==="source-code"?(u(),A(Oe,{key:0,ref_key:"code",ref:y,script:e(w).form,workspace:e(w).workspace,onUpdateFile:Se},null,8,["script","workspace"])):x("",!0),s.value==="settings"?(u(),A(Zt,{key:1,form:e(w).form},null,8,["form"])):x("",!0),s.value==="notifications"?(u(),A(Ht,{key:2,form:e(w).form},null,8,["form"])):x("",!0),r.value?(u(),A(Vt,{key:3,"execution-config":v.value,"onUpdate:executionConfig":i[1]||(i[1]=d=>v.value=d),"show-thread-modal":r.value,"onUpdate:showThreadModal":i[2]||(i[2]=d=>r.value=d),stage:e(w).form,onFixInvalidJson:i[3]||(i[3]=(d,M)=>{var Z;return(Z=K.value)==null?void 0:Z.fixJson(d,M)})},null,8,["execution-config","show-thread-modal","stage"])):x("",!0)]),right:t(()=>[a(e(N),{gap:"10",align:"center",justify:"right",style:{"margin-top":"6px"}},{default:t(()=>{var d;return[a(e(pa),null,{default:t(()=>[g(Ne(v.value.attached?"Workflow ON":"Workflow OFF"),1)]),_:1}),a(e(me),{disabled:!!o.value&&e(R).includes((d=o.value)==null?void 0:d.type),checked:v.value.attached,"onUpdate:checked":b},null,8,["disabled","checked"]),a(e(ma),{dot:he.value},{default:t(()=>{var M;return[a(e(H),{disabled:!!o.value&&e(R).includes((M=o.value)==null?void 0:M.type),style:{display:"flex",gap:"5px"},onClick:i[4]||(i[4]=Z=>r.value=!0)},{icon:t(()=>[a(e(la),{size:"20"})]),default:t(()=>[g("Thread")]),_:1},8,["disabled"])]}),_:1},8,["dot"])]}),_:1}),a(e(va),{style:{margin:"7px 0px 16px"}}),e(ye)||!k.value||!o.value?(u(),A(e(De),{key:0})):x("",!0),o.value&&k.value?(u(),A(e(N),{key:1,vertical:"",gap:"10",style:{height:"100%",overflow:"hidden"}},{default:t(()=>[a(e(N),{gap:"small"},{default:t(()=>[o.value.type&&e(Ge).includes(o.value.type)?(u(),A(e(Pe),{key:0,placement:"bottom",open:z.value?void 0:!0},{content:t(()=>[z.value?(u(),h("span",Et,"Reload form")):(u(),h("span",Rt,[g(" You can reload the form here"),Bt,a(e(ca),{onClick:Ve},{default:t(()=>[g("Don't show this again")]),_:1})]))]),default:t(()=>[a(e(H),{disabled:!!I.value,onClick:J},{default:t(()=>[a(e(Ua),{size:"20"})]),_:1},8,["disabled"])]),_:1},8,["open"])):x("",!0),e(R).includes(o.value.type)?(u(),A(e(E),{key:1,placement:"bottom"},{title:t(()=>[g("Stop form")]),default:t(()=>[a(e(H),{onClick:J},{default:t(()=>[a(e(xt),{size:"20"})]),_:1})]),_:1})):x("",!0),o.value.type==="waiting"?(u(),A(e(E),{key:2,placement:"bottom"},{title:t(()=>[g("Start form")]),default:t(()=>[a(e(H),{disabled:!!I.value,onClick:we},{default:t(()=>[a(e(ot),{size:"20"})]),_:1},8,["disabled"])]),_:1})):x("",!0),a(e(T),{disabled:"",value:Me.value},null,8,["value"]),a(e(E),{placement:"bottom"},{title:t(()=>[g("Edit query params")]),default:t(()=>{var d;return[a(e(H),{disabled:!!o.value&&e(R).includes((d=o.value)==null?void 0:d.type),onClick:i[5]||(i[5]=M=>P.value=!0)},{default:t(()=>[a(e(oa),{size:"20"})]),_:1},8,["disabled"])]}),_:1}),a(e(E),{placement:"bottom"},{title:t(()=>[g("Open in Full Screen")]),default:t(()=>[a(e(H),{target:"_blank","aria-label":"Open in Full Screen","aria-describedby":"sss",disabled:!v.value.attached,onClick:xe},{default:t(()=>[a(e(ta),{size:"20"})]),_:1},8,["disabled"])]),_:1})]),_:1}),k.value?(u(),A(aa,{key:0,"main-color":k.value.mainColor,theme:k.value.theme,"font-family":k.value.fontFamily,style:{overflow:"hidden"}},{default:t(()=>{var d,M,Z,ae,te,le;return[a(Je,{"is-preview":"","form-runner-data":k.value,disabled:I.value,"form-state":o.value,"user-email":(d=F.value)==null?void 0:d.claims.email,onUpdateWidgetErrors:(M=l.value)==null?void 0:M.updateWidgetFrontendErrors,onUpdateWidgetValue:(Z=l.value)==null?void 0:Z.updateWidgetValue,onActionClicked:(ae=l.value)==null?void 0:ae.handleActionClick,onNavigate:be,onLogout:(te=l.value)==null?void 0:te.logout,onAutoFillClicked:(le=l.value)==null?void 0:le.handleAutofillClick},null,8,["form-runner-data","disabled","form-state","user-email","onUpdateWidgetErrors","onUpdateWidgetValue","onActionClicked","onLogout","onAutoFillClicked"])]}),_:1},8,["main-color","theme","font-family"])):(u(),A(ea,{key:1}))]),_:1})):x("",!0),a(Lt,{"query-params":c.value,"onUpdate:queryParams":i[6]||(i[6]=d=>c.value=d),open:P.value,close:()=>P.value=!1},null,8,["query-params","open","close"])]),_:1})):x("",!0)]),footer:t(()=>{var d,M;return[a(qe,{ref_key:"smartConsole",ref:K,runtime:"forms","log-service":e(Y),stage:(d=e(w))==null?void 0:d.form,workspace:(M=e(w))==null?void 0:M.workspace},null,8,["log-service","stage","workspace"])]}),_:1}))}});const Jl=D(Nt,[["__scopeId","data-v-71559d36"]]);export{Jl as default};
//# sourceMappingURL=FormEditor.2fce2d58.js.map
