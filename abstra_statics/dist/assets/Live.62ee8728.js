import{d as k,eB as w,G as I,b as d,eu as m,f as o,w as i,u as e,c as f,a_ as j,aq as l,bu as A,I as y,ew as $,cF as b,eD as _,cn as T}from"./outputWidgets.7cbc6f77.js";import{a as g}from"./router.f8ad7078.js";import{C as v}from"./gateway.1ce3e4cc.js";import"./index.8db6553b.js";import{a as D}from"./asyncComputed.39c1f5df.js";import{f as L,h as C,j as V,y as x}from"./icons.b2f60bf4.js";import{A as E}from"./Title.7e604992.js";import{b as N,c as p}from"./Text.11171602.js";import{a as S,A as B}from"./index.58609ca0.js";import"./Base.d6cb1d5c.js";import"./transButton.f72eee0f.js";import"./index.ace558e0.js";import"./record.c15c1b24.js";import"./pubsub.df72d2b0.js";(function(){try{var u=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new Error().stack;t&&(u._sentryDebugIds=u._sentryDebugIds||{},u._sentryDebugIds[t]="63319abd-8354-4aca-9033-d732227cae62",u._sentryDebugIdIdentifier="sentry-dbid-63319abd-8354-4aca-9033-d732227cae62")}catch{}})();class h{constructor(t,a,s){this.subdomain=t,this.buildId=a,this.project=s}static fromV0(t,a,s){const r={version:"1.0",hooks:s.hooks.map(n=>({id:n.path,...n})),forms:s.forms.map(n=>({id:n.path,...n})),jobs:s.jobs.map(n=>({id:n.identifier,...n}))};return new h(t,a,r)}static fromV1(t,a,s){return new h(t,a,s)}static from(t,a,s){if(s.version==="0.1")return this.fromV0(t,a,s);if(s.version==="1.0")return this.fromV1(t,a,s);throw new Error(`Unsupported project version: ${s.version}`)}get hooks(){return this.project.hooks.map(t=>({...t,url:`https://${this.subdomain}.abstra.app/_hooks/${t.path}`}))}get forms(){return this.project.forms.map(t=>({...t,url:`https://${this.subdomain}.abstra.app/${t.path}`}))}get jobs(){return this.project.jobs}}const O=async u=>{try{const t=await v.get(`projects/${u}/latest-build`),a=await v.get(`projects/${u}`);if(!t||!a)return null;const{subdomain:s}=a,{id:r,abstraJson:n}=t,c=JSON.parse(n);if(!c.version)throw new Error("version is invalid");return h.from(s,r,c)}catch(t){return console.log(`Latest build is invalid: ${t.message}`),null}},q={key:0},z={key:1},F={key:1},G={key:2},at=k({__name:"Live",setup(u){const t=w(),a=D(()=>O(t.params.projectId)),s=I(()=>a.result.value?[...a.result.value.forms.map(r=>({id:r.id,title:r.title,icon:L,description:`/${r.path}`,url:r.url,link:r.url})),...a.result.value.hooks.map(r=>({id:r.id,title:r.title,icon:C,description:`/${r.path}`,url:r.url})),...a.result.value.jobs.map(r=>({id:r.id,title:r.title,icon:V,description:r.schedule}))]:[]);return(r,n)=>(d(),m(j,null,[o(e(E),null,{default:i(()=>[l("Live build")]),_:1}),o(e(N),null,{default:i(()=>[l(" This is where you can view your current active build. On this page, you can see the parts that make up your project and access the links to each form within it. ")]),_:1}),e(a).loading.value?(d(),m("div",q,[o(e(A))])):e(a).result.value?(d(),m("div",z,[s.value.length>0?(d(),f(e(B),{key:0,"item-layout":"horizontal","data-source":s.value},{renderItem:i(({item:c})=>[o(e(S),null,{actions:i(()=>[c.link?(d(),f(e(g),{key:0,href:c.link,target:"_blank"},{default:i(()=>[o(y,{path:e(x)},null,8,["path"])]),_:2},1032,["href"])):$("",!0)]),default:i(()=>[o(e(b),{align:"top",size:"large"},{default:i(()=>[o(y,{path:c.icon},null,8,["path"]),o(e(p),{strong:""},{default:i(()=>[l(_(c.title),1)]),_:2},1024),o(e(p),{type:"secondary",code:""},{default:i(()=>[l(_(c.description),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["data-source"])):(d(),m("div",F,[o(e(T),{description:"No runtimes found. Make sure your project has forms, hooks or jobs before deploying it"})]))])):(d(),m("div",G,[o(e(b),{direction:"vertical"},{default:i(()=>[o(e(p),null,{default:i(()=>[l("Install abstra using pip:")]),_:1}),o(e(p),{code:"",copyable:""},{default:i(()=>[l("pip install abstra")]),_:1}),o(e(p),null,{default:i(()=>[l("Start a new project using our CLI")]),_:1}),o(e(p),{code:"",copyable:""},{default:i(()=>[l("abstra serve my-new-project")]),_:1}),o(e(p),null,{default:i(()=>[l(" If you have any questions, please reach out to our "),o(e(g),{href:"https://discord.gg/abstra",target:"_blank"},{default:i(()=>[l(" discord channel ")]),_:1})]),_:1})]),_:1})]))],64))}});export{at as default};
//# sourceMappingURL=Live.62ee8728.js.map
