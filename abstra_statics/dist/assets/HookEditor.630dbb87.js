import{d as x,b as o,c as s,e as n,q as C,r as E,R as f,H as v,v as t,F as H,J as B,u as U,a as I,t as $,y as u,V as g,W as T,Y as q,B as w,N as D,O,w as k,L as J}from"./registerWidgets.fff064a1.js";import{R as N,T as A,S as G,B as M,a as R}from"./SmartConsole.2dca9a38.js";import{L as P,a as L}from"./CircularLoading.59d7fd3d.js";import{H as Q}from"./hooks.944007d1.js";import{C as F,D as j,e as W}from"./icons.5214a3f5.js";import{l as V}from"./log.7bdc5c83.js";import{S as Y}from"./SaveButton.0f1a1078.js";import"./forms.7bc6baea.js";import"./utils.3371dfe5.js";import"./dashes.f5f65b41.js";import"./runnerData.81f4c073.js";import"./jobs.987450d7.js";import"./workspaces.32af92db.js";const z={class:"hook-settings"},K=x({__name:"HookSettings",props:{hook:null},setup(i){return(p,_)=>(o(),s("div",z,[n(N,{runtime:i.hook},null,8,["runtime"])]))}});const X=C(K,[["__scopeId","data-v-6e8accf0"]]),Z={class:"options-wrapper"},ee=["onClick"],oe=x({__name:"ADropdown",props:{options:null,value:null},emits:["select"],setup(i,{emit:p}){const _=E(null),e=h=>{var d;p("select",h),(d=_.value)==null||d.blur()};return(h,d)=>(o(),s("div",{ref_key:"dropdown",ref:_,class:"dropdown",tabindex:"1"},[f(v(i.value)+" ",1),t("div",Z,[(o(!0),s(H,null,B(i.options,m=>(o(),s("div",{key:m.value,class:"option",onClick:y=>e(m.value)},v(m.label),9,ee))),128))])],512))}});const te=C(oe,[["__scopeId","data-v-cac46a2e"]]),S=i=>(D("data-v-55f3fd4a"),i=i(),O(),i),se={class:"hook-runner"},ae={class:"title"},ne={class:"section"},le=S(()=>t("div",{class:"section-header"},"Request configuration",-1)),ie=S(()=>t("div",{class:"subsection-label"},"Method",-1)),de={class:"subsection-label"},re=["onUpdate:modelValue"],ce=["onUpdate:modelValue"],ue={key:0,class:"subsection-label"},_e={class:"property"},pe=S(()=>t("div",{class:"property-label"},"Body is JSON",-1)),he={class:"section"},me=S(()=>t("div",{class:"section-header"},"Response",-1)),ve={key:0,class:"section"},ye={class:"no-execution-message"},ke={key:1,class:"section"},fe=x({__name:"HookRunner",props:{hook:null},setup(i){const p=i,_=[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"PUT",value:"PUT"},{label:"PATCH",value:"PATCH"}],e=U({queryParams:[{name:"",value:""}],method:"GET",body:"",loading:!1,isBodyJson:!0}),h=async()=>{const y={"Content-Type":e.isBodyJson?"application/json":"text/plain"},l=await p.hook.test({method:e.method,query:e.queryParams.reduce((r,{name:a,value:c})=>(a&&c&&(r[a]=c),r),{}),body:e.body,headers:{...y}});e.response=l,l.stderr&&V.log({type:"stderr",log:l.stderr}),l.stdout&&V.log({type:"stdout",log:l.stdout})},d=()=>{e.queryParams.push({name:"",value:""})},m=y=>{e.queryParams=e.queryParams.filter((l,r)=>r!==y)};return(y,l)=>{const r=I("icon");return o(),s("div",se,[t("div",ae,[f(" Test your hook here "),e.loading?(o(),$(P,{key:0})):(o(),s("button",{key:1,class:"execution-button",onClick:h},[n(r,{path:u(F),width:"14",height:"14",fill:"#ffffff"},null,8,["path"]),f(" Run ")]))]),t("div",ne,[le,ie,n(te,{value:e.method,options:_,onSelect:l[0]||(l[0]=a=>e.method=a)},null,8,["value"]),t("div",de,[f(" Query Params "),n(r,{class:"action-icon",path:u(j),width:"16",height:"16","fill-hover":"#777777",onClick:d},null,8,["path"])]),(o(!0),s(H,null,B(e.queryParams,(a,c)=>(o(),s("div",{key:c,class:"params-input"},[g(t("input",{"onUpdate:modelValue":b=>a.name=b,type:"text",placeholder:"name"},null,8,re),[[T,a.name]]),g(t("input",{"onUpdate:modelValue":b=>a.value=b,type:"text",placeholder:"value"},null,8,ce),[[T,a.value]]),n(r,{class:"delete-icon",path:u(W),"fill-hover":"#777777",onClick:b=>m(c)},null,8,["path","onClick"])]))),128)),e.method!=="GET"?(o(),s("div",ue,[f(" Request Body "),t("div",_e,[g(t("input",{"onUpdate:modelValue":l[1]||(l[1]=a=>e.isBodyJson=a),class:"checkbox-input",type:"checkbox"},null,512),[[q,e.isBodyJson]]),pe])])):w("",!0),e.method!=="GET"?g((o(),s("textarea",{key:1,"onUpdate:modelValue":l[2]||(l[2]=a=>e.body=a)},null,512)),[[T,e.body]]):w("",!0)]),t("div",he,[me,e.loading?(o(),s("div",ve,[t("div",ye,[n(P)])])):e.response?(o(),s("div",ke,[t("pre",null,"Status: "+v(e.response.status),1),(o(!0),s(H,null,B(e.response.headers,(a,c)=>(o(),s("pre",{key:c},v(c)+": "+v(a),1))),128)),t("pre",null,v(e.response.body),1)])):w("",!0)])])}}});const be=C(fe,[["__scopeId","data-v-55f3fd4a"]]),ge={class:"page"},xe={key:0,class:"loading"},Ce=x({__name:"HookEditor",setup(i){const p=J(),{loading:_,result:e}=L(async()=>await Q.get(p.params.hookPath)),h=async d=>{e.value&&(e.value.path=d,await e.value.save())};return(d,m)=>(o(),s("div",ge,[u(_)||!u(e)?(o(),s("div",xe,[n(P)])):(o(),$(A,{key:1,class:"editor"},{left:k(()=>[n(M,{link:"/_editor/hooks"})]),right:k(()=>[n(Y,{runtime:u(e)},null,8,["runtime"])]),default:k(()=>[n(R,{title:"Debug"},{default:k(()=>[n(be,{hook:u(e)},null,8,["hook"])]),_:1}),n(R,{title:"Settings"},{default:k(()=>[n(X,{hook:u(e),onUpdatePath:h},null,8,["hook"])]),_:1})]),_:1})),n(G,{runtime:"hooks"})]))}});const De=C(Ce,[["__scopeId","data-v-a25bf527"]]);export{De as default};
//# sourceMappingURL=HookEditor.630dbb87.js.map
