import{d as M,X as I,H as R,b as i,eu as p,dj as Y,ew as L,ez as ee,e as f,f as c,eG as te,eR as xe,r as ae,F as je,c as h,w as s,eB as F,aq as v,eD as w,u as a,cK as De,aC as U,cC as Z,v as B,bf as Ze,eJ as Se,eC as ne,aG as Q,ck as ye,eE as ze,eF as Te,eS as Ve,bE as W,eI as Fe,I as Ue,o as Ne,K as qe,ad as Be,dh as He,cB as Ke}from"./outputWidgets.1b294f5f.js";import{a as Ae}from"./asyncComputed.a34a8d45.js";import"./workspaces.d302eaf6.js";import{S as We}from"./scripts.f01c752c.js";import"./envVars.279f6d9f.js";import{A as Je}from"./api.e01c2c15.js";import{z as e}from"./index.cf4c23b9.js";import{t as Ge}from"./ant-design.4374084a.js";import{A as V}from"./Text.c9fbd748.js";import{A as P}from"./index.3227182d.js";import{s as oe}from"./metadata.2ce5e701.js";import{A as J}from"./index.e0804fb0.js";import{f as Qe}from"./index.8334854b.js";import{A as de}from"./Paragraph.3e0e130e.js";import"./index.b6203cb7.js";import{A as K}from"./Title.4066d750.js";import{T as Xe,A as Ye}from"./index.32d4eb3d.js";import{A as fe,C as Ce}from"./CollapsePanel.f5e9243e.js";import{A as et}from"./Link.496a8851.js";import{A as tt}from"./index.f3022e06.js";import{A as at}from"./index.e1858b54.js";import{C as nt}from"./Card.9b324419.js";import{d as ot}from"./vuedraggable.umd.143f339e.js";import"./index.bc9e12bb.js";import{F as st,A as it}from"./Form.123996ac.js";import{l as ve}from"./fetch.d300a950.js";(function(){try{var o=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new Error().stack;t&&(o._sentryDebugIds=o._sentryDebugIds||{},o._sentryDebugIds[t]="d07f2b98-0d38-4480-936e-721c5b8d9e95",o._sentryDebugIdIdentifier="sentry-dbid-d07f2b98-0d38-4480-936e-721c5b8d9e95")}catch{}})();var rt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM641.7 520.8L442.3 677.6c-7.4 5.8-18.3.6-18.3-8.8V355.3c0-9.4 10.9-14.7 18.3-8.8l199.4 156.7a11.2 11.2 0 010 17.6z"}}]},name:"play-square",theme:"filled"};const lt=rt;var ct={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"};const ut=ct,mt=["width","height","fill","transform"],dt={key:0},pt=f("path",{d:"M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm0,192a84,84,0,1,1,84-84A84.09,84.09,0,0,1,128,212Zm68-84a12,12,0,0,1-12,12H128a12,12,0,0,1-12-12V72a12,12,0,0,1,24,0v44h44A12,12,0,0,1,196,128Z"},null,-1),gt=[pt],ht={key:1},bt=f("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"},null,-1),St=f("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm64-88a8,8,0,0,1-8,8H128a8,8,0,0,1-8-8V72a8,8,0,0,1,16,0v48h48A8,8,0,0,1,192,128Z"},null,-1),yt=[bt,St],At={key:2},ft=f("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm56,112H128a8,8,0,0,1-8-8V72a8,8,0,0,1,16,0v48h48a8,8,0,0,1,0,16Z"},null,-1),Ct=[ft],vt={key:3},_t=f("path",{d:"M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm0,192a90,90,0,1,1,90-90A90.1,90.1,0,0,1,128,218Zm62-90a6,6,0,0,1-6,6H128a6,6,0,0,1-6-6V72a6,6,0,0,1,12,0v50h50A6,6,0,0,1,190,128Z"},null,-1),Rt=[_t],Lt={key:4},wt=f("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm64-88a8,8,0,0,1-8,8H128a8,8,0,0,1-8-8V72a8,8,0,0,1,16,0v48h48A8,8,0,0,1,192,128Z"},null,-1),Pt=[wt],Et={key:5},Ot=f("path",{d:"M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm0,192a92,92,0,1,1,92-92A92.1,92.1,0,0,1,128,220Zm60-92a4,4,0,0,1-4,4H128a4,4,0,0,1-4-4V72a4,4,0,0,1,8,0v52h52A4,4,0,0,1,188,128Z"},null,-1),kt=[Ot],It={name:"PhClock"},$t=M({...It,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(o){const t=o,n=I("weight","regular"),l=I("size","1em"),r=I("color","currentColor"),g=I("mirrored",!1),u=R(()=>{var m;return(m=t.weight)!=null?m:n}),d=R(()=>{var m;return(m=t.size)!=null?m:l}),C=R(()=>{var m;return(m=t.color)!=null?m:r}),S=R(()=>t.mirrored!==void 0?t.mirrored?"scale(-1, 1)":void 0:g?"scale(-1, 1)":void 0);return(m,x)=>(i(),p("svg",ee({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:d.value,height:d.value,fill:C.value,transform:S.value},m.$attrs),[Y(m.$slots,"default"),u.value==="bold"?(i(),p("g",dt,gt)):u.value==="duotone"?(i(),p("g",ht,yt)):u.value==="fill"?(i(),p("g",At,Ct)):u.value==="light"?(i(),p("g",vt,Rt)):u.value==="regular"?(i(),p("g",Lt,Pt)):u.value==="thin"?(i(),p("g",Et,kt)):L("",!0)],16,mt))}}),Mt=["width","height","fill","transform"],xt={key:0},jt=f("path",{d:"M228,64a36,36,0,1,0-48,33.94V104a12,12,0,0,1-12,12H88a12,12,0,0,1-12-12V97.94a36,36,0,1,0-24,0V104a36,36,0,0,0,36,36h28v18.06a36,36,0,1,0,24,0V140h28a36,36,0,0,0,36-36V97.94A36.07,36.07,0,0,0,228,64ZM64,52A12,12,0,1,1,52,64,12,12,0,0,1,64,52Zm64,152a12,12,0,1,1,12-12A12,12,0,0,1,128,204ZM192,76a12,12,0,1,1,12-12A12,12,0,0,1,192,76Z"},null,-1),Dt=[jt],Zt={key:1},zt=f("path",{d:"M88,64A24,24,0,1,1,64,40,24,24,0,0,1,88,64ZM192,40a24,24,0,1,0,24,24A24,24,0,0,0,192,40Z",opacity:"0.2"},null,-1),Tt=f("path",{d:"M224,64a32,32,0,1,0-40,31v9a16,16,0,0,1-16,16H88a16,16,0,0,1-16-16V95a32,32,0,1,0-16,0v9a32,32,0,0,0,32,32h32v25a32,32,0,1,0,16,0V136h32a32,32,0,0,0,32-32V95A32.06,32.06,0,0,0,224,64ZM48,64A16,16,0,1,1,64,80,16,16,0,0,1,48,64Zm96,128a16,16,0,1,1-16-16A16,16,0,0,1,144,192ZM192,80a16,16,0,1,1,16-16A16,16,0,0,1,192,80Z"},null,-1),Vt=[zt,Tt],Ft={key:2},Ut=f("path",{d:"M224,64a32,32,0,1,0-40,31v9a16,16,0,0,1-16,16H88a16,16,0,0,1-16-16V95a32,32,0,1,0-16,0v9a32,32,0,0,0,32,32h32v25a32,32,0,1,0,16,0V136h32a32,32,0,0,0,32-32V95A32.06,32.06,0,0,0,224,64ZM144,192a16,16,0,1,1-16-16A16,16,0,0,1,144,192Z"},null,-1),Nt=[Ut],qt={key:3},Bt=f("path",{d:"M222,64a30,30,0,1,0-36,29.4V104a18,18,0,0,1-18,18H88a18,18,0,0,1-18-18V93.4a30,30,0,1,0-12,0V104a30,30,0,0,0,30,30h34v28.6a30,30,0,1,0,12,0V134h34a30,30,0,0,0,30-30V93.4A30.05,30.05,0,0,0,222,64ZM46,64A18,18,0,1,1,64,82,18,18,0,0,1,46,64ZM146,192a18,18,0,1,1-18-18A18,18,0,0,1,146,192ZM192,82a18,18,0,1,1,18-18A18,18,0,0,1,192,82Z"},null,-1),Ht=[Bt],Kt={key:4},Wt=f("path",{d:"M224,64a32,32,0,1,0-40,31v9a16,16,0,0,1-16,16H88a16,16,0,0,1-16-16V95a32,32,0,1,0-16,0v9a32,32,0,0,0,32,32h32v25a32,32,0,1,0,16,0V136h32a32,32,0,0,0,32-32V95A32.06,32.06,0,0,0,224,64ZM48,64A16,16,0,1,1,64,80,16,16,0,0,1,48,64Zm96,128a16,16,0,1,1-16-16A16,16,0,0,1,144,192ZM192,80a16,16,0,1,1,16-16A16,16,0,0,1,192,80Z"},null,-1),Jt=[Wt],Gt={key:5},Qt=f("path",{d:"M220,64a28,28,0,1,0-32,27.71V104a20,20,0,0,1-20,20H88a20,20,0,0,1-20-20V91.71a28,28,0,1,0-8,0V104a28,28,0,0,0,28,28h36v32.29a28,28,0,1,0,8,0V132h36a28,28,0,0,0,28-28V91.71A28,28,0,0,0,220,64ZM44,64A20,20,0,1,1,64,84,20,20,0,0,1,44,64ZM148,192a20,20,0,1,1-20-20A20,20,0,0,1,148,192ZM192,84a20,20,0,1,1,20-20A20,20,0,0,1,192,84Z"},null,-1),Xt=[Qt],Yt={name:"PhGitFork"},ea=M({...Yt,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(o){const t=o,n=I("weight","regular"),l=I("size","1em"),r=I("color","currentColor"),g=I("mirrored",!1),u=R(()=>{var m;return(m=t.weight)!=null?m:n}),d=R(()=>{var m;return(m=t.size)!=null?m:l}),C=R(()=>{var m;return(m=t.color)!=null?m:r}),S=R(()=>t.mirrored!==void 0?t.mirrored?"scale(-1, 1)":void 0:g?"scale(-1, 1)":void 0);return(m,x)=>(i(),p("svg",ee({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:d.value,height:d.value,fill:C.value,transform:S.value},m.$attrs),[Y(m.$slots,"default"),u.value==="bold"?(i(),p("g",xt,Dt)):u.value==="duotone"?(i(),p("g",Zt,Vt)):u.value==="fill"?(i(),p("g",Ft,Nt)):u.value==="light"?(i(),p("g",qt,Ht)):u.value==="regular"?(i(),p("g",Kt,Jt)):u.value==="thin"?(i(),p("g",Gt,Xt)):L("",!0)],16,Mt))}}),ta=["width","height","fill","transform"],aa={key:0},na=f("path",{d:"M144,180a16,16,0,1,1-16-16A16,16,0,0,1,144,180Zm92-52A108,108,0,1,1,128,20,108.12,108.12,0,0,1,236,128Zm-24,0a84,84,0,1,0-84,84A84.09,84.09,0,0,0,212,128ZM128,64c-24.26,0-44,17.94-44,40v4a12,12,0,0,0,24,0v-4c0-8.82,9-16,20-16s20,7.18,20,16-9,16-20,16a12,12,0,0,0-12,12v8a12,12,0,0,0,23.73,2.56C158.31,137.88,172,122.37,172,104,172,81.94,152.26,64,128,64Z"},null,-1),oa=[na],sa={key:1},ia=f("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"},null,-1),ra=f("path",{d:"M140,180a12,12,0,1,1-12-12A12,12,0,0,1,140,180ZM128,72c-22.06,0-40,16.15-40,36v4a8,8,0,0,0,16,0v-4c0-11,10.77-20,24-20s24,9,24,20-10.77,20-24,20a8,8,0,0,0-8,8v8a8,8,0,0,0,16,0v-.72c18.24-3.35,32-17.9,32-35.28C168,88.15,150.06,72,128,72Zm104,56A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"},null,-1),la=[ia,ra],ca={key:2},ua=f("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,168a12,12,0,1,1,12-12A12,12,0,0,1,128,192Zm8-48.72V144a8,8,0,0,1-16,0v-8a8,8,0,0,1,8-8c13.23,0,24-9,24-20s-10.77-20-24-20-24,9-24,20v4a8,8,0,0,1-16,0v-4c0-19.85,17.94-36,40-36s40,16.15,40,36C168,125.38,154.24,139.93,136,143.28Z"},null,-1),ma=[ua],da={key:3},pa=f("path",{d:"M138,180a10,10,0,1,1-10-10A10,10,0,0,1,138,180ZM128,74c-21,0-38,15.25-38,34v4a6,6,0,0,0,12,0v-4c0-12.13,11.66-22,26-22s26,9.87,26,22-11.66,22-26,22a6,6,0,0,0-6,6v8a6,6,0,0,0,12,0v-2.42c18.11-2.58,32-16.66,32-33.58C166,89.25,149,74,128,74Zm102,54A102,102,0,1,1,128,26,102.12,102.12,0,0,1,230,128Zm-12,0a90,90,0,1,0-90,90A90.1,90.1,0,0,0,218,128Z"},null,-1),ga=[pa],ha={key:4},ba=f("path",{d:"M140,180a12,12,0,1,1-12-12A12,12,0,0,1,140,180ZM128,72c-22.06,0-40,16.15-40,36v4a8,8,0,0,0,16,0v-4c0-11,10.77-20,24-20s24,9,24,20-10.77,20-24,20a8,8,0,0,0-8,8v8a8,8,0,0,0,16,0v-.72c18.24-3.35,32-17.9,32-35.28C168,88.15,150.06,72,128,72Zm104,56A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"},null,-1),Sa=[ba],ya={key:5},Aa=f("path",{d:"M136,180a8,8,0,1,1-8-8A8,8,0,0,1,136,180ZM128,76c-19.85,0-36,14.36-36,32v4a4,4,0,0,0,8,0v-4c0-13.23,12.56-24,28-24s28,10.77,28,24-12.56,24-28,24a4,4,0,0,0-4,4v8a4,4,0,0,0,8,0v-4.2c18-1.77,32-15.36,32-31.8C164,90.36,147.85,76,128,76Zm100,52A100,100,0,1,1,128,28,100.11,100.11,0,0,1,228,128Zm-8,0a92,92,0,1,0-92,92A92.1,92.1,0,0,0,220,128Z"},null,-1),fa=[Aa],Ca={name:"PhQuestion"},va=M({...Ca,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(o){const t=o,n=I("weight","regular"),l=I("size","1em"),r=I("color","currentColor"),g=I("mirrored",!1),u=R(()=>{var m;return(m=t.weight)!=null?m:n}),d=R(()=>{var m;return(m=t.size)!=null?m:l}),C=R(()=>{var m;return(m=t.color)!=null?m:r}),S=R(()=>t.mirrored!==void 0?t.mirrored?"scale(-1, 1)":void 0:g?"scale(-1, 1)":void 0);return(m,x)=>(i(),p("svg",ee({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:d.value,height:d.value,fill:C.value,transform:S.value},m.$attrs),[Y(m.$slots,"default"),u.value==="bold"?(i(),p("g",aa,oa)):u.value==="duotone"?(i(),p("g",sa,la)):u.value==="fill"?(i(),p("g",ca,ma)):u.value==="light"?(i(),p("g",da,ga)):u.value==="regular"?(i(),p("g",ha,Sa)):u.value==="thin"?(i(),p("g",ya,fa)):L("",!0)],16,ta))}});function pe(o){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},l=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(n).filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable}))),l.forEach(function(r){_a(o,r,n[r])})}return o}function _a(o,t,n){return t in o?Object.defineProperty(o,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[t]=n,o}var se=function(t,n){var l=pe({},t,n.attrs);return c(te,pe({},l,{icon:xe}),null)};se.displayName="EyeInvisibleOutlined";se.inheritAttrs=!1;const Ra=se;function ge(o){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},l=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(n).filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable}))),l.forEach(function(r){La(o,r,n[r])})}return o}function La(o,t,n){return t in o?Object.defineProperty(o,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[t]=n,o}var ie=function(t,n){var l=ge({},t,n.attrs);return c(te,ge({},l,{icon:lt}),null)};ie.displayName="PlaySquareFilled";ie.inheritAttrs=!1;const wa=ie;function he(o){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},l=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(n).filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable}))),l.forEach(function(r){Pa(o,r,n[r])})}return o}function Pa(o,t,n){return t in o?Object.defineProperty(o,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[t]=n,o}var re=function(t,n){var l=he({},t,n.attrs);return c(te,he({},l,{icon:ut}),null)};re.displayName="SyncOutlined";re.inheritAttrs=!1;const Ea=re;function Oa(){const o=ae({state:"closed"});function t(){o.value={state:"closed"}}function n(){o.value={state:"visualizations"}}function l(g,u){o.value={state:"stage-run",stageRun:u}}const r=R(()=>"stageRun"in o.value?o.value.stageRun:null);return{closeDrawer:t,openVisualizationEditor:n,inspectStageRun:l,drawerState:o,selectedStageRunForDrawer:r}}const T="kanban-selected-stage-ids",N=10,ka=({kanbanRepository:o,storage:t,filterFactory:n,router:l})=>{const r=je([]),g=Ae(async()=>{try{const b=await o.getData({selection:r.value,filter:n()}),y=await t.get(T)||[];for(const A of b.not_found_stages)t.set(T,y.filter(_=>_!==A)),r.value=r.value.filter(_=>_.stage_id!==A);return b}catch{return r.value=[],await t.set(T,[]),{columns:[],next_stage_options:[]}}});function u(b){const y=b.selected_stage.id,A=r.value.find(_=>_.stage_id===y);return A!=null&&A.limit?A.limit<b.total_count:!1}async function d(b){var A;const y=r.value.find(_=>_.stage_id===b.selected_stage.id);y&&(y.limit=((A=y.limit)!=null?A:0)+N,await g.refetch())}async function C(b){const y=r.value.find(A=>A.stage_id===b);y&&y.limit&&y.limit>N&&(y.limit-=N,await g.refetch())}async function S(){const b=await t.get(T)||[];r.value=b.map(y=>({stage_id:y,limit:N,offset:0}))}async function m(b,y){b?r.value=[...r.value.slice(0,y),{stage_id:b.id,limit:N,offset:0},...r.value.slice(y+1)]:r.value=[...r.value.slice(0,y),...r.value.slice(y+1)],await t.set(T,r.value.map(A=>A.stage_id)),await g.refetch()}async function x(b){await m(b,r.value.length)}async function E(b){const y=r.value[b.moved.oldIndex];m(null,b.moved.oldIndex),r.value=[...r.value.slice(0,b.moved.newIndex),y,...r.value.slice(b.moved.newIndex)],await t.set(T,r.value.map(A=>A.stage_id)),await g.refetch()}let O=null;return{kanbanAsyncComputed:g,selection:r,increasePagination:d,hasPagination:u,seeLess:C,setStage:m,addStage:x,cardActionHandler:async(b,y)=>{const A=b.selected_stage,_=y.id;if(A.type==="script"){const $=await We.get(A.id);if(!$)return;await $.run(_)}if(A.type==="form"){const $=l.resolve({path:`/${A.path}`,query:_?{[Je]:_}:{}});window.open($.href,_)}},setup:async()=>{await S(),g.refetch(),O=setInterval(()=>{g.refetch()},1e3)},tearDown:()=>{O&&clearInterval(O)},reorderStages:E}},Ia=e.boolean(),$a=e.boolean(),Ma=e.boolean(),xa=e.boolean();e.object({PROJECT_LIVE:Ia.optional(),ALLOW_RELEASE:$a.optional(),CONNECTORS_CONSOLE:Ma.optional(),DUPLICATE_PROJECTS:xa.optional()});const ja=e.string(),Da=e.string(),Za=e.string(),za=e.string(),Ta=e.string();e.object({plan:ja.optional(),expires:Da.optional(),message:Za.optional(),messageLink:za.optional(),messageCTA:Ta.optional()});const Va=e.string(),_e=e.string(),le=e.string(),Fa=e.string(),Ua=e.string(),Na=e.object({id:Va,name:_e,description:le.optional(),projectId:Fa,createdAt:Ua}),qa=e.string(),Ba=e.string(),Ha=e.string(),Ka=e.string(),Wa=e.string().regex(new RegExp("^[0-9]+m$")),Ja=e.string().regex(new RegExp("^[0-9]+m$")),Ga=e.string().regex(new RegExp("^[0-9]+Mi$")),Qa=e.string().regex(new RegExp("^[0-9]+Mi$")),Xa=e.string().regex(new RegExp("^[0-9]+$")),Ya=e.string().regex(new RegExp("^[0-9]+$")),en=e.enum(["shared","clickbus","test"]),tn=e.object({requestsCPU:Wa.optional(),limitsCPU:Ja.optional(),requestsMemory:Ga.optional(),limitsMemory:Qa.optional(),minReplicas:Xa.optional(),timeoutSeconds:Ya.optional(),workerType:en.optional()});e.object({id:qa,name:Ba,subdomain:Ha,organizationId:Ka,deploymentResources:tn.optional()});const an=e.string(),nn=e.string(),Re=e.array(nn),Le=e.string(),on=e.string();e.object({id:an,emailPatterns:Re,projectId:Le,createdAt:on});const sn=e.string().regex(new RegExp("^[0-9]+m$")),rn=e.string().regex(new RegExp("^[0-9]+m$")),ln=e.string().regex(new RegExp("^[0-9]+Mi$")),cn=e.string().regex(new RegExp("^[0-9]+Mi$")),un=e.string().regex(new RegExp("^[0-9]+$")),mn=e.string().regex(new RegExp("^[0-9]+$")),dn=e.enum(["shared","clickbus","test"]);e.object({requestsCPU:sn.optional(),limitsCPU:rn.optional(),requestsMemory:ln.optional(),limitsMemory:cn.optional(),minReplicas:un.optional(),timeoutSeconds:mn.optional(),workerType:dn.optional()});const pn=e.string(),G=e.string().email(),gn=e.string(),ce=e.array(gn),hn=e.string(),bn=e.string(),Sn=e.object({id:pn,email:G,roles:ce,projectId:hn,createdAt:bn}),we=e.string(),Pe=e.string(),yn=e.boolean(),An=e.boolean(),fn=e.boolean(),Cn=e.boolean(),Ee=e.object({PROJECT_LIVE:yn,ALLOW_RELEASE:An,CONNECTORS_CONSOLE:fn,DUPLICATE_PROJECTS:Cn}),vn=e.string(),_n=e.string(),Rn=e.string(),Ln=e.string(),wn=e.string(),Oe=e.object({plan:vn.optional(),expires:_n.optional(),message:Rn.optional(),messageLink:Ln.optional(),messageCTA:wn.optional()}),Pn=e.string().regex(new RegExp("^[0-9]+m$")),En=e.string().regex(new RegExp("^[0-9]+m$")),On=e.string().regex(new RegExp("^[0-9]+Mi$")),kn=e.string().regex(new RegExp("^[0-9]+Mi$")),In=e.string().regex(new RegExp("^[0-9]+$")),$n=e.string().regex(new RegExp("^[0-9]+$")),Mn=e.enum(["shared","clickbus","test"]),xn=e.object({requestsCPU:Pn.optional(),limitsCPU:En.optional(),requestsMemory:On.optional(),limitsMemory:kn.optional(),minReplicas:In.optional(),timeoutSeconds:$n.optional(),workerType:Mn.optional()}),jn=e.string(),Dn=e.array(jn),Zn=e.object({whitelistPatterns:Dn.optional()});e.object({id:we,name:Pe,featureFlags:Ee,billingMetadata:Oe,deploymentResources:xn.optional(),membershipsMetadata:Zn.optional()});const zn=e.string(),Tn=e.array(zn);e.object({whitelistPatterns:Tn.optional()});const Vn=we,Fn=Pe,Un=Ee,Nn=Oe;e.object({id:Vn,name:Fn,featureFlags:Un,billingMetadata:Nn});const qn=le;e.object({description:qn});const Bn=e.number(),Hn=e.number();e.object({offset:Bn.optional(),limit:Hn.optional()});const Kn=Na;e.array(Kn);const Wn=_e,Jn=le;e.object({name:Wn,description:Jn.optional()});const Gn=G,Qn=ce;e.object({email:Gn.optional(),roles:Qn.optional()});const Xn=e.number(),Yn=e.number();e.object({offset:Xn.optional(),limit:Yn.optional()});const eo=Sn;e.array(eo);const to=G,ao=ce;e.object({email:to,roles:ao});const no=Re;e.object({emailPatterns:no});const oo=Le;e.object({projectId:oo});const so=e.boolean();e.object({shouldBeOnboarded:so.optional()});const io=e.string(),ro=e.string(),lo=e.string(),co=e.string();e.object({name:io.optional(),companyName:ro.optional(),source:lo.optional(),authorEmail:co.optional()});const uo=e.string(),mo=e.record(e.any()),po=e.string(),go=e.object({key:uo,value:mo,type:po}),ho=go,bo=e.array(ho),So=e.string(),yo=e.enum(["text","image","table","progress-bar"]),Ao=e.object({name:So,type:yo}),fo=e.string(),Co=e.string(),vo=e.record(e.any()),ke=e.enum(["waiting","running","processing","finished","failed","abandoned"]),_o=["waiting","running","processing","finished","failed","abandoned"],Ro=e.string(),Lo=e.string(),wo=e.string(),Po=e.string();e.object({id:fo,stage:Co,data:vo,status:ke,created_at:Ro,updated_at:Lo,parent_id:wo.optional(),execution_id:Po.optional()});const Eo=e.string(),Oo=e.string(),ko=e.string(),Io=e.string(),$o=ke,Mo=bo,xo=e.object({id:Eo,created_at:Oo,updated_at:ko.optional(),assignee:Io.optional(),status:$o,content:Mo}),jo=xo,Do=e.array(jo),Zo=e.string(),zo=e.enum(["form","hook","job","script","iterator","condition"]),To=e.string(),Vo=e.string(),Fo=e.boolean(),Ie=e.object({id:Zo,type:zo,title:To,path:Vo.optional(),can_be_started:Fo}),Uo=Ie,No=Do,qo=Ie,$e=e.array(qo),Bo=$e,Ho=e.number(),Ko=e.object({selected_stage:Uo,stage_run_cards:No,stages:Bo,total_count:Ho}),Wo=Ko,Jo=e.array(Wo),Go=Jo,Qo=$e,Xo=e.string(),Yo=e.array(Xo);e.object({columns:Go,next_stage_options:Qo,not_found_stages:Yo});const es=Ao;e.array(es);const ts=e.string(),as=e.string(),ns=e.literal("bug"),os=e.string(),ss=e.string(),is=e.string(),rs=e.object({name:ss,label:is}),ls=rs,cs=e.array(ls),us=e.object({label:os,fixes:cs}),ms=us,ds=e.array(ms),ps=e.object({name:ts,label:as,type:ns,issues:ds}),gs=e.boolean();e.object({success:gs});const hs=ps;e.array(hs);const bs=e.string(),Ss=e.string(),ys=e.object({key:bs,value:Ss}),As=ys;e.array(As);const fs=G;e.object({email:fs});const Cs=e.enum(["ALLOWED","UNAUTHORIZED","FORBIDEN"]);e.object({status:Cs});function ue(o){switch(o.status){case"waiting":return{color:"blue",text:"Waiting"};case"running":case"processing":return{color:"processing",text:"Running"};case"finished":return{color:"success",text:"Success"};case"failed":return{color:"error",text:"Failed"};case"abandoned":return{color:"warning",text:"Abandoned"}}}const q="Show All",vs=[q,..._o];function _s(){const o=ae(q);return{filterStatus:o,filterFactory:()=>o.value==q?{}:{status:o.value},labelOption:l=>l==q?q:ue({status:l}).text}}const X=M({__name:"StageRunData",props:{data:{}},setup(o){return(t,n)=>(i(),h(a(Z),{direction:"vertical",style:{overflow:"hidden"}},{default:s(()=>[(i(!0),p(U,null,F(t.data,l=>(i(),p("div",{key:l.key},[c(a(V),{strong:""},{default:s(()=>[v(w(l.key),1)]),_:2},1024),c(a(De),{"tree-data":a(Ge)(l.value),selectable:!1},null,8,["tree-data"])]))),128))]),_:1}))}}),Rs={key:0},Ls={key:1,class:"terminal"},ws=M({__name:"ExecutionInspector",props:{logs:{}},setup(o){return(t,n)=>t.logs.length===0?(i(),p("span",Rs)):(i(),p("div",Ls,[c(a(P),{vertical:""},{default:s(()=>[(i(!0),p(U,null,F(t.logs,l=>(i(),p("pre",{key:l.executionId,class:"log-text"},w(l.payload.text),1))),128))]),_:1})]))}});const Ps=B(ws,[["__scopeId","data-v-4e71a195"]]),Es=o=>(ze("data-v-b7151dd7"),o=o(),Te(),o),Os={key:1},ks={key:1},Is=Es(()=>f("span",null,"[Deleted Stage]",-1)),$s=["onClick"],Ms=M({__name:"StageRunInspector",props:{stageRun:{},kanbanRepository:{},stageRunRepository:{}},emits:["close"],setup(o,{emit:t}){const n=o;function l(d){return Object.entries(d).map(([C,S])=>({key:C,value:S,type:typeof S}))}const{result:r,loading:g}=Ae(()=>{var d;return n.kanbanRepository.getLogs((d=n.stageRun)==null?void 0:d.id)}),u=(d,C)=>{var S;d.stopPropagation(),(S=n.stageRunRepository)==null||S.fork(C),t("close")};return(d,C)=>(i(),h(a(at),{open:"",title:"Thread details",size:"large",onClose:C[0]||(C[0]=S=>t("close"))},{extra:s(()=>[c(a(de),null,{default:s(()=>[c(a(J),{style:{"font-weight":"600"}},{default:s(()=>{var S;return[v(w(a(ue)({status:(S=d.stageRun)==null?void 0:S.status}).text),1)]}),_:1}),v(" "+w(a(Qe)(new Date(d.stageRun.created_at),{addSuffix:!0})),1)]),_:1})]),default:s(()=>{var S,m,x;return[(S=d.stageRun)!=null&&S.assignee?(i(),h(a(de),{key:0},{default:s(()=>{var E;return[v(" Assignee: "+w((E=d.stageRun)==null?void 0:E.assignee),1)]}),_:1})):L("",!0),((m=d.stageRun)==null?void 0:m.content)&&((x=d.stageRun)==null?void 0:x.content.length)>0?(i(),p("div",Os,[c(a(K),{level:4},{default:s(()=>[v("Current data")]),_:1}),c(X,{data:d.stageRun.content},null,8,["data"])])):L("",!0),c(a(K),{level:4,style:{"margin-bottom":"30px"}},{default:s(()=>[v(" Timeline ")]),_:1}),a(g)?(i(),h(a(Ze),{key:2})):a(r)?(i(),h(a(Xe),{key:3},{default:s(()=>[(i(!0),p(U,null,F(a(r),({stage:E,stage_run:O,logs:j})=>(i(),h(a(Ye),{key:O.id},{default:s(()=>[c(a(Ce),{ghost:"","expand-icon-position":"end"},{default:s(()=>[c(a(fe),{class:"panel"},Se({header:s(()=>[E?(i(),h(a(P),{key:0,align:"center",gap:15},{default:s(()=>[(i(),h(ne(a(oe)(E.type)))),j.length?(i(),p("span",ks,w(E.title),1)):(i(),h(a(Q),{key:0,placement:"right",title:"No logs"},{default:s(()=>[v(w(E.title),1)]),_:2},1024))]),_:2},1024)):(i(),h(a(P),{key:1,align:"center",gap:15},{default:s(()=>[c(a(va)),Is]),_:1}))]),default:s(()=>[l(O.data).length||j.length?(i(),h(a(P),{key:0,vertical:""},{default:s(()=>[l(O.data).length?(i(),h(a(P),{key:0,gap:0,vertical:""},{default:s(()=>[c(a(K),{level:5},{default:s(()=>[v(" Output data ")]),_:1}),c(X,{data:l(O.data)},null,8,["data"])]),_:2},1024)):L("",!0),j.length?(i(),h(a(P),{key:1,vertical:"",gap:0},{default:s(()=>[c(a(tt)),c(a(K),{level:5},{default:s(()=>[v(" Logs ")]),_:1}),c(Ps,{logs:j},null,8,["logs"])]),_:2},1024)):L("",!0)]),_:2},1024)):(i(),h(a(ye),{key:1,description:"No logs"}))]),_:2},[d.stageRunRepository&&E?{name:"extra",fn:s(()=>[f("span",{onClick:H=>u(H,O.id)},[c(a(P),{gap:"small"},{default:s(()=>[c(a(ea),{size:"22"}),c(a(et),null,{default:s(()=>[v("Fork")]),_:1})]),_:1})],8,$s)]),key:"0"}:void 0]),1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):L("",!0)]}),_:1}))}});const xs=B(Ms,[["__scopeId","data-v-b7151dd7"]]),be="_thread_title",js=M({__name:"Card",props:{stage:{},card:{}},emits:["inspect","action"],setup(o){const t=o,n=R(()=>{const u=t.card.content.find(C=>C.key===be);return u?u.value:new Date(String(t.card.updated_at)).toLocaleString()}),l=R(()=>t.card.content.filter(u=>u.key!==be)),r=R(()=>ue({status:t.card.status}).text),g=R(()=>Ve(new Date(String(t.card.updated_at))));return(u,d)=>{var C,S;return i(),h(a(nt),{size:"small",style:{cursor:"pointer"},"head-style":{"border-bottom":((C=u.card.content)==null?void 0:C.length)>0?"":"none"},"body-style":{display:((S=u.card.content)==null?void 0:S.length)>0?"block":"none"},onClick:d[1]||(d[1]=m=>u.$emit("inspect"))},Se({title:s(()=>[c(a(Q),{title:n.value.length>24?n.value:void 0},{default:s(()=>[v(w(n.value),1)]),_:1},8,["title"])]),default:s(()=>[c(a(Z),{direction:"vertical",style:{"max-height":"300px",width:"100%",overflow:"hidden"}},{default:s(()=>[c(X,{data:l.value,disabled:!0},null,8,["data"]),u.card.assignee?(i(),h(a(J),{key:0},{default:s(()=>[v(w(u.card.assignee),1)]),_:1})):L("",!0)]),_:1}),c(a(P),{gap:"10",style:{"margin-top":"8px"}},{default:s(()=>[c(a(Q),null,{title:s(()=>[v(w(u.card.updated_at),1)]),default:s(()=>[c(a(V),{type:"secondary",style:{"font-size":"12px",display:"flex","align-items":"center",gap:"4px"}},{default:s(()=>[c(a($t),{size:14}),v(" Updated at: "+w(g.value),1)]),_:1})]),_:1})]),_:1})]),extra:s(()=>[c(a(J),null,{default:s(()=>[v(w(r.value)+" ",1),r.value==="Running"?(i(),h(a(Ea),{key:0,spin:!0,style:{"margin-left":"4px"}})):L("",!0)]),_:1})]),_:2},[u.card.status==="waiting"?{name:"actions",fn:s(()=>[c(a(W),{onClick:d[0]||(d[0]=m=>u.$emit("action"))},{default:s(()=>[c(a(wa)),v(" Continue this thread ")]),_:1})]),key:"0"}:void 0]),1032,["head-style","body-style"])}}});class Ds{constructor(t,n,l){this.router=t,this.column=n,this.kanbanRepository=l}get stage(){return this.column.selected_stage}get canStart(){return this.stage.can_be_started}get launchLink(){return!this.stage.can_be_started||this.stage.type!=="form"||!this.stage.path?null:this.router.resolve({path:`/${this.stage.path}`}).href}click(){if(this.launchLink)return window.open(this.launchLink,"_blank");if(this.stage.type==="job")return this.kanbanRepository.startJob(this.stage.id).catch(console.error)}}const Zs=M({__name:"Column",props:{router:{},hasPagination:{type:Boolean},column:{},kanbanRepository:{}},emits:["increasePagination","cardAction","stageUpdate","cardInspection"],setup(o,{emit:t}){const n=o,l=R(()=>new Ds(n.router,n.column,n.kanbanRepository));return(r,g)=>(i(),h(a(Z),{direction:"vertical",class:"stage-column"},{default:s(()=>[c(a(Z),{direction:"horizontal",style:{width:"100%","justify-content":"space-between"}},{default:s(()=>[c(a(P),{gap:"8",style:{"max-width":"200px","padding-left":"10px"}},{default:s(()=>[c(a(P),null,{default:s(()=>[(i(),h(ne(a(oe)(r.column.selected_stage.type)),{size:"20"}))]),_:1}),c(a(V),{ellipsis:"",content:r.column.selected_stage.title},null,8,["content"])]),_:1}),c(a(Z),null,{default:s(()=>[c(a(V),{type:"secondary",style:{"font-size":"small","margin-right":"2px"}},{default:s(()=>[v(w(r.column.total_count),1)]),_:1}),c(a(W),{type:"text",style:{padding:"4px"},onClick:g[0]||(g[0]=u=>t("stageUpdate",null))},{default:s(()=>[c(a(V),{type:"secondary",style:{"font-size":"small","margin-right":"2px"}},{default:s(()=>[c(a(Ra))]),_:1})]),_:1})]),_:1})]),_:1}),c(a(Z),{direction:"vertical",style:{width:"100%"}},{default:s(()=>[r.column.stage_run_cards.length===0?(i(),h(a(ye),{key:0})):L("",!0),(i(!0),p(U,null,F(r.column.stage_run_cards,u=>(i(),h(js,{key:u.id,stage:r.column.selected_stage,card:u,onInspect:d=>t("cardInspection",u),onAction:d=>t("cardAction",u)},null,8,["stage","card","onInspect","onAction"]))),128)),r.hasPagination?(i(),h(a(W),{key:1,style:{width:"100%"},onClick:g[1]||(g[1]=u=>t("increasePagination"))},{default:s(()=>[v("See more")]),_:1})):L("",!0),l.value.canStart?(i(),h(a(W),{key:2,style:{width:"100%"},onClick:g[2]||(g[2]=()=>l.value.click())},{default:s(()=>[v(" Start new thread ")]),_:1})):L("",!0)]),_:1})]),_:1}))}});const zs=B(Zs,[["__scopeId","data-v-2f0be4e2"]]),Ts=M({__name:"EmptyColumn",props:{stages:{}},emits:["stageUpdate"],setup(o,{emit:t}){const n=l=>{t("stageUpdate",l)};return(l,r)=>(i(),h(a(Z),{direction:"vertical"},{default:s(()=>[(i(!0),p(U,null,F(l.stages,g=>(i(),h(a(J),{key:g.id,class:"tag",onClick:u=>n(g)},{default:s(()=>[c(a(P),{gap:"8",style:{"max-width":"200px","justify-content":"center","align-items":"center"}},{default:s(()=>[c(a(P),null,{default:s(()=>[(i(),h(ne(a(oe)(g.type)),{size:"20"}))]),_:2},1024),c(a(V),{ellipsis:"",content:g.title},null,8,["content"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1}))}});const Vs=B(Ts,[["__scopeId","data-v-08e39e62"]]),Fs={style:{"padding-top":"20px","flex-grow":"1"}},Us={class:"stages-container"},Ns={class:"stages-content"},qs=M({__name:"Kanban",props:{storage:{},kanbanRepository:{},stageRunRepository:{}},setup(o){const t=o,n=Fe(),{closeDrawer:l,inspectStageRun:r,drawerState:g,selectedStageRunForDrawer:u}=Oa(),{filterFactory:d,filterStatus:C,labelOption:S}=_s(),{kanbanAsyncComputed:m,setStage:x,addStage:E,setup:O,tearDown:j,cardActionHandler:H,increasePagination:me,hasPagination:b,reorderStages:y}=ka({kanbanRepository:t.kanbanRepository,storage:t.storage,filterFactory:d,router:n}),A=ae([]);return Ue(()=>{var _;return(_=m.result.value)==null?void 0:_.columns},_=>{_!==void 0&&(A.value=_)}),Ne(O),qe(j),(_,$)=>(i(),p("div",Fs,[c(a(P),{vertical:"",style:{height:"100%"}},{default:s(()=>[c(a(Ce),{ghost:""},{default:s(()=>[c(a(fe),{header:"Filters"},{default:s(()=>[c(a(st),null,{default:s(()=>[c(a(it),{label:"Status"},{default:s(()=>[c(a(Be),{value:a(C),"onUpdate:value":$[0]||($[0]=D=>He(C)?C.value=D:null),style:{width:"325px"}},{default:s(()=>[(i(!0),p(U,null,F(a(vs),D=>(i(),h(a(Ke),{key:D,value:D},{default:s(()=>[v(w(a(S)(D)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),f("div",Us,[f("div",Ns,[c(a(Z),{align:"start"},{default:s(()=>{var D;return[c(a(ot),{modelValue:A.value,"onUpdate:modelValue":$[1]||($[1]=k=>A.value=k),class:"draggable","item-key":k=>k.selected_stage.id,"ghost-class":"ghost",onStart:a(j),onEnd:a(O),onChange:a(y)},{item:s(({element:k,index:Me})=>[(i(),h(a(zs),{key:k.selected_stage.id,column:k,router:a(n),"has-pagination":a(b)(k),"kanban-repository":t.kanbanRepository,class:"stages-content-column",onIncreasePagination:z=>a(me)(k),onCardInspection:z=>a(r)(k,z),onCardAction:z=>a(H)(k,z),onStageUpdate:z=>a(x)(z,Me)},null,8,["column","router","has-pagination","kanban-repository","onIncreasePagination","onCardInspection","onCardAction","onStageUpdate"]))]),_:1},8,["modelValue","item-key","onStart","onEnd","onChange"]),c(a(Vs),{stages:((D=a(m).result.value)==null?void 0:D.next_stage_options)||[],onStageUpdate:$[2]||($[2]=k=>a(E)(k))},null,8,["stages"])]}),_:1})])])]),_:1}),a(g).state==="stage-run"&&a(u)?(i(),h(a(xs),{key:0,"kanban-repository":t.kanbanRepository,"stage-run":a(u),"stage-run-repository":t.stageRunRepository,onClose:a(l)},null,8,["kanban-repository","stage-run","stage-run-repository","onClose"])):L("",!0)]))}});const Si=B(qs,[["__scopeId","data-v-477592ea"]]);class yi{constructor(t,n=localStorage){this.contextKey=t,this.storage=n}makeKey(t){return`${this.contextKey}:${t}`}async get(t){const n=this.storage.getItem(this.makeKey(t));return n?JSON.parse(n):null}async set(t,n){this.storage.setItem(this.makeKey(t),JSON.stringify(n))}}class Ai{constructor(t=ve){this.fetch=t}async getData(t){return(await this.fetch("/_editor/api/kanban",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})).json()}async getLogs(t){return(await this.fetch(`/_editor/api/kanban/logs/${t}`)).json()}async startJob(t){await this.fetch(`/_editor/api/kanban/jobs/${t}/start`,{method:"POST"})}}class fi{constructor(t,n=ve){this.authProvider=t,this.fetch=n}get headers(){return{"Content-Type":"application/json",...this.authProvider.authHeaders()}}async getData(t){return(await this.fetch("/_kanban/",{method:"POST",body:JSON.stringify(t),headers:this.headers})).json()}async getLogs(t){return(await this.fetch(`/_kanban/logs/${t}`,{headers:this.headers})).json()}async startJob(t){await this.fetch(`/_kanban/jobs/${t}/start`,{method:"POST",headers:this.headers})}}export{Ai as E,Si as K,yi as L,fi as P};
//# sourceMappingURL=repository.16d398ee.js.map
