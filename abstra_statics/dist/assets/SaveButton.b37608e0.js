import{d as C,at as w,c as V,o as d,ac as c,ae as y,h as L,ew as E,e as u,i as r,fp as x,w as D,U as P,R as $,a as U,b as f,u as l,k as I,M as z,f as m,_ as B,a0 as N,Z as T,r as S,T as j,g as b,t as A,dd as F,bY as K,cS as O,cQ as R}from"./jwt-decode.esm.fbcfeaec.js";import{E as G}from"./ExclamationCircleOutlined.a1b3bc81.js";(function(){try{var a=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new Error().stack;t&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[t]="a7ec1d28-ba63-48cf-8b64-755d9b1037a8",a._sentryDebugIdIdentifier="sentry-dbid-a7ec1d28-ba63-48cf-8b64-755d9b1037a8")}catch{}})();const Q=["width","height","fill","transform"],W={key:0},Y=u("path",{d:"M222.14,69.17,186.83,33.86A19.86,19.86,0,0,0,172.69,28H48A20,20,0,0,0,28,48V208a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V83.31A19.86,19.86,0,0,0,222.14,69.17ZM164,204H92V160h72Zm40,0H188V156a20,20,0,0,0-20-20H88a20,20,0,0,0-20,20v48H52V52H171l33,33ZM164,84a12,12,0,0,1-12,12H96a12,12,0,0,1,0-24h56A12,12,0,0,1,164,84Z"},null,-1),q=[Y],J={key:1},X=u("path",{d:"M216,83.31V208a8,8,0,0,1-8,8H176V152a8,8,0,0,0-8-8H88a8,8,0,0,0-8,8v64H48a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8H172.69a8,8,0,0,1,5.65,2.34l35.32,35.32A8,8,0,0,1,216,83.31Z",opacity:"0.2"},null,-1),ee=u("path",{d:"M219.31,72,184,36.69A15.86,15.86,0,0,0,172.69,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V83.31A15.86,15.86,0,0,0,219.31,72ZM168,208H88V152h80Zm40,0H184V152a16,16,0,0,0-16-16H88a16,16,0,0,0-16,16v56H48V48H172.69L208,83.31ZM160,72a8,8,0,0,1-8,8H96a8,8,0,0,1,0-16h56A8,8,0,0,1,160,72Z"},null,-1),ae=[X,ee],ne={key:2},te=u("path",{d:"M219.31,72,184,36.69A15.86,15.86,0,0,0,172.69,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V83.31A15.86,15.86,0,0,0,219.31,72ZM208,208H184V152a16,16,0,0,0-16-16H88a16,16,0,0,0-16,16v56H48V48H172.69L208,83.31ZM160,72a8,8,0,0,1-8,8H96a8,8,0,0,1,0-16h56A8,8,0,0,1,160,72Z"},null,-1),se=[te],oe={key:3},le=u("path",{d:"M217.9,73.42,182.58,38.1a13.9,13.9,0,0,0-9.89-4.1H48A14,14,0,0,0,34,48V208a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V83.31A13.9,13.9,0,0,0,217.9,73.42ZM170,210H86V152a2,2,0,0,1,2-2h80a2,2,0,0,1,2,2Zm40-2a2,2,0,0,1-2,2H182V152a14,14,0,0,0-14-14H88a14,14,0,0,0-14,14v58H48a2,2,0,0,1-2-2V48a2,2,0,0,1,2-2H172.69a2,2,0,0,1,1.41.58L209.42,81.9a2,2,0,0,1,.58,1.41ZM158,72a6,6,0,0,1-6,6H96a6,6,0,0,1,0-12h56A6,6,0,0,1,158,72Z"},null,-1),re=[le],de={key:4},ie=u("path",{d:"M219.31,72,184,36.69A15.86,15.86,0,0,0,172.69,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V83.31A15.86,15.86,0,0,0,219.31,72ZM168,208H88V152h80Zm40,0H184V152a16,16,0,0,0-16-16H88a16,16,0,0,0-16,16v56H48V48H172.69L208,83.31ZM160,72a8,8,0,0,1-8,8H96a8,8,0,0,1,0-16h56A8,8,0,0,1,160,72Z"},null,-1),ce=[ie],ue={key:5},he=u("path",{d:"M216.49,74.83,181.17,39.51A11.93,11.93,0,0,0,172.69,36H48A12,12,0,0,0,36,48V208a12,12,0,0,0,12,12H208a12,12,0,0,0,12-12V83.31A11.93,11.93,0,0,0,216.49,74.83ZM172,212H84V152a4,4,0,0,1,4-4h80a4,4,0,0,1,4,4Zm40-4a4,4,0,0,1-4,4H180V152a12,12,0,0,0-12-12H88a12,12,0,0,0-12,12v60H48a4,4,0,0,1-4-4V48a4,4,0,0,1,4-4H172.69a4,4,0,0,1,2.82,1.17l35.32,35.32A4,4,0,0,1,212,83.31ZM156,72a4,4,0,0,1-4,4H96a4,4,0,0,1,0-8h56A4,4,0,0,1,156,72Z"},null,-1),ve=[he],ge={name:"PhFloppyDisk"},pe=C({...ge,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(a){const t=a,h=w("weight","regular"),v=w("size","1em"),_=w("color","currentColor"),g=w("mirrored",!1),o=V(()=>{var n;return(n=t.weight)!=null?n:h}),s=V(()=>{var n;return(n=t.size)!=null?n:v}),p=V(()=>{var n;return(n=t.color)!=null?n:_}),i=V(()=>t.mirrored!==void 0?t.mirrored?"scale(-1, 1)":void 0:g?"scale(-1, 1)":void 0);return(n,e)=>(d(),c("svg",E({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:s.value,height:s.value,fill:p.value,transform:i.value},n.$attrs),[y(n.$slots,"default"),o.value==="bold"?(d(),c("g",W,q)):o.value==="duotone"?(d(),c("g",J,ae)):o.value==="fill"?(d(),c("g",ne,se)):o.value==="light"?(d(),c("g",oe,re)):o.value==="regular"?(d(),c("g",de,ce)):o.value==="thin"?(d(),c("g",ue,ve)):L("",!0)],16,Q))}}),fe=C({__name:"UnsavedChangesHandler",props:{hasChanges:{type:Boolean}},setup(a){const t=a,h=r.translate("i18n_unsavedchanges_message"),v=s=>(s=s||window.event,s&&(s.returnValue=h),h),_=()=>{window.addEventListener("beforeunload",v)};x(async(s,p,i)=>{if(!t.hasChanges)return i();await new Promise(e=>{z.confirm({title:r.translate("i18n_unsavedchanges_title"),icon:m(G),content:r.translate("i18n_unsavedchanges_confirm_message"),okText:r.translate("i18n_unsavedchanges_discard"),okType:"danger",cancelText:r.translate("i18n_unsavedchanges_cancel"),onOk(){e(!0)},onCancel(){e(!1)}})})?i():i(!1)});const g=()=>window.removeEventListener("beforeunload",v),o=s=>s?_():g();return D(()=>t.hasChanges,o),P(()=>o(t.hasChanges)),$(g),(s,p)=>(d(),U(l(I),{theme:{token:{colorPrimary:"#d14056"}}},{default:f(()=>[y(s.$slots,"default",{},void 0,!0)]),_:3}))}});const me=B(fe,[["__scopeId","data-v-763066ea"]]),_e={class:"popup-container"},He={style:{padding:"0px 4px"}},ye=C({__name:"SaveButton",props:{model:{},neverShowPopover:{type:Boolean},disabled:{type:Boolean}},emits:["save"],setup(a,{emit:t}){var n;const h=t,v=a,_=e=>{var H;return(H=e.parentElement)!=null?H:document.body},g=new N(T.boolean(),"dontShowUnsavedChanges"),o=S((n=g.get())!=null?n:!1),s=()=>{g.set(!0),o.value=!0},p=S(!1);async function i(){p.value=!0;try{await v.model.save(),h("save")}catch(e){console.error(e),R.error({message:r.translate("i18n_savebutton_error_saving")})}finally{p.value=!1}}return addEventListener("keydown",e=>{(e.metaKey||e.ctrlKey)&&e.key==="s"&&(e.preventDefault(),i())}),addEventListener("beforeunload",e=>{v.model.hasChanges()&&(e.preventDefault(),e.returnValue="")}),(e,H)=>{var Z;return d(),c("div",_e,[m(l(O),{placement:"left",open:a.model.hasChanges()&&!o.value&&!a.neverShowPopover,"get-popup-container":_},{content:f(()=>[u("div",He,[m(l(j),null,{default:f(()=>[b(A(l(r).translate("i18n_savebutton_unsaved_changes")),1)]),_:1}),m(l(F),{onClick:s},{default:f(()=>[b(A(l(r).translate("i18n_savebutton_dont_show_again")),1)]),_:1})])]),default:f(()=>{var M;return[m(l(K),{class:"save-button",loading:p.value,disabled:!((M=a.model)!=null&&M.hasChanges())||a.disabled,onClick:H[0]||(H[0]=k=>i())},{icon:f(()=>[y(e.$slots,"icon",{},()=>[m(l(pe),{size:"18"})],!0)]),default:f(()=>{var k;return[(k=a.model)!=null&&k.hasChanges()?y(e.$slots,"with-changes",{key:0},()=>[b(A(l(r).translate("i18n_savebutton_save")),1)],!0):y(e.$slots,"without-changes",{key:1},()=>[b(A(l(r).translate("i18n_savebutton_saved")),1)],!0)]}),_:3},8,["loading","disabled"])]}),_:3},8,["open"]),m(me,{"has-changes":(Z=a.model)==null?void 0:Z.hasChanges()},null,8,["has-changes"])])}}});const be=B(ye,[["__scopeId","data-v-7d32f3c9"]]);export{be as S,me as U};
//# sourceMappingURL=SaveButton.b37608e0.js.map
