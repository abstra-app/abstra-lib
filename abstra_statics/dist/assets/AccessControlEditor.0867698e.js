var fe=Object.defineProperty;var ge=(l,e,s)=>e in l?fe(l,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[e]=s;var B=(l,e,s)=>(ge(l,typeof e!="symbol"?e+"":e,s),s);import{C as ye}from"./ContentLayout.081ded6d.js";import{l as ae}from"./fetch.9493b87c.js";import{E as le}from"./record.e5cfb835.js";import{f as o,eI as ve,d as C,b as v,c as h,w as n,u as t,bG as T,as as g,ey as O,ew as E,eF as te,cB as he,eH as I,aE as N,af as z,eG as be,r as U,K as _e,J as R,e as V,x as Ce,cC as j,cz as Q,ak as we,eS as Pe,I as ke,bz as ie,dh as ne}from"./outputWidgets.c7d11ead.js";import{E as Oe,a as Ue}from"./repository.e8a8e014.js";import{a as G}from"./asyncComputed.0d9bf0ef.js";import{d as X}from"./vuedraggable.umd.09215b20.js";import"./workspaces.56466063.js";import{l as $}from"./login.25bc5298.js";import"./envVars.76285d02.js";import{P as Ae,A as Z,T as Ie}from"./TabPane.4688ff0a.js";import{A as Re}from"./index.bcace449.js";import{s as Se}from"./metadata.bf7ff1b3.js";import{I as xe,F as Te}from"./PhKey.vue.500110f0.js";import{G as De}from"./PhIdentificationBadge.vue.a59e1225.js";import{G as je}from"./PhKanban.vue.a22767a3.js";import{A as S}from"./Text.eba38ee8.js";import{A as k}from"./index.8343729f.js";import{A as $e}from"./Item.4cc2b8d8.js";import{A as x}from"./Paragraph.a2d4bb5b.js";import{A as ue}from"./index.e53fe664.js";import{A as ce}from"./index.1f925116.js";import{_ as qe}from"./SaveButton.vue_vue_type_script_setup_true_lang.9810d90c.js";import{C as Ee}from"./CrudView.a5d66c2b.js";import{G as Ne}from"./PhPencil.vue.3769c6aa.js";import{A as F,F as de}from"./Form.894c92e7.js";import{A as pe}from"./index.064a4841.js";import{A as Be}from"./Title.fdf5c01d.js";import"./pubsub.a91a3d3f.js";import"./router.95851ad5.js";import"./popupNotifcation.ba1f83dd.js";import"./runnerData.0f2179f9.js";import"./url.20f0444a.js";import"./hasIn.dd565870.js";import"./PhCheckCircle.vue.ea26645b.js";import"./PhScroll.vue.81407758.js";import"./PhWebhooksLogo.vue.29eac025.js";import"./Base.984b27ce.js";import"./UnsavedChangesHandler.97f6b632.js";import"./ExclamationCircleOutlined.276cec24.js";import"./Modal.7ab5d69d.js";import"./Link.38c2ac16.js";import"./DocsButton.vue_vue_type_script_setup_true_lang.47e2aae4.js";import"./BookOutlined.e29593a7.js";import"./isNumeric.75337b1e.js";(function(){try{var l=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(l._sentryDebugIds=l._sentryDebugIds||{},l._sentryDebugIds[e]="ab48ef53-f7a1-4a79-9328-7682c77149c0",l._sentryDebugIdIdentifier="sentry-dbid-ab48ef53-f7a1-4a79-9328-7682c77149c0")}catch{}})();function re(l){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?Object(arguments[e]):{},c=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(c=c.concat(Object.getOwnPropertySymbols(s).filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable}))),c.forEach(function(i){Ge(l,i,s[i])})}return l}function Ge(l,e,s){return e in l?Object.defineProperty(l,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):l[e]=s,l}var se=function(e,s){var c=re({},e,s.attrs);return o(ve,re({},c,{icon:Ae}),null)};se.displayName="PlusOutlined";se.inheritAttrs=!1;const Ve=se;class oe{constructor(e){B(this,"record");this.record=le.from(e)}get id(){return this.record.get("id")}get type(){return this.record.get("type")}get title(){return this.record.get("title")}get isPublic(){return this.record.get("is_public")}set isPublic(e){e&&this.record.set("required_roles",[]),this.record.set("is_public",e)}get requiredRoles(){return this.record.get("required_roles")}set requiredRoles(e){e.length!==0&&this.record.set("is_public",!1),this.record.set("required_roles",e)}makePublic(){this.isPublic=!0}makeProtected(){this.isPublic=!1,this.requiredRoles=[]}require(e){e.length!==0&&(this.isPublic=!1),this.requiredRoles=e}get visibility(){return this.isPublic?"public":this.requiredRoles.length===0?"protected":"private"}hasChanges(){return this.record.hasChanges("is_public")||this.record.hasChangesDeep("required_roles")}get changes(){return this.record.changes}get initialState(){return this.record.initialState}toUpdateDTO(){return{id:this.id,is_public:this.isPublic,required_roles:this.requiredRoles}}commit(){this.record.commit()}static from(e){return new oe(e)}}class Fe{constructor(e=ae){this.fetch=e}async list(){return(await(await this.fetch("/_editor/api/access-control",{method:"GET",headers:{"Content-Type":"application/json"}})).json()).map(oe.from)}async update(e){const s=e.reduce((i,a)=>(a.hasChanges()&&i.push({id:a.id,...a.changes}),i),[]);return await(await fetch("/_editor/api/access-control",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json()}}const L=class{constructor(e){B(this,"record");this.dto=e,this.record=le.from(e)}static from(e){return new L(e)}toDTO(){return this.record.toDTO()}get id(){return this.record.get("id")}get projectId(){return this.record.get("projectId")}get emailPatterns(){return this.record.get("emailPatterns")}set emailPatterns(e){this.record.set("emailPatterns",e)}get hasChanges(){return this.record.hasChangesDeep("emailPatterns")}get strategy(){return this.dto.emailPatterns.length===0?"inviteOnly":this.dto.emailPatterns.length==1&&this.dto.emailPatterns[0]=="*"?"anyone":"patternOnly"}get changes(){return this.record.changes}allowAnyone(){this.record.set("emailPatterns",["*"])}allowOnlyInvited(){this.record.set("emailPatterns",[])}static validate(e){let s="";return e.startsWith("@")&&(s=e.slice(1)),e.startsWith("*@")&&(s=e.slice(2)),s.match(L.pattern)!==null}};let q=L;B(q,"pattern",/^[a-z0-9.-]+\.[a-z]{2,}$/);class Le{constructor(e=ae){this.fetch=e}async update(e){const{emailPatterns:s}=e.changes;return s?(await this.fetch("/_editor/api/users/signup-policy",{method:"PUT",body:JSON.stringify({email_patterns:s}),headers:{"Content-Type":"application/json"}}),q.from({...e.toDTO(),emailPatterns:s})):e}async get(){const s=await(await this.fetch("/_editor/api/users/signup-policy")).json();return q.from({emailPatterns:s.email_patterns,id:s.id,projectId:s.project_id,createdAt:s.created_at})}}const ze=C({__name:"RoleSelector",props:{value:{},roleOptions:{}},emits:["update:value"],setup(l,{emit:e}){const s=()=>{var f,p;if(!((f=$.asyncComputed.result.value)!=null&&f.logged))return;const a=(p=$.asyncComputed.result.value)==null?void 0:p.project_id;window.open(`https://cloud.abstra.io/projects/${a}/access-control?selected-panel=roles`,"__roles")},c=a=>{e("update:value",a)},i=C({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}});return(a,f)=>(v(),h(t(z),{value:a.value,mode:"multiple","onUpdate:value":c},{dropdownRender:n(({menuNode:p})=>{var u;return[o(t(i),{vnodes:p},null,8,["vnodes"]),o(t(Re),{style:{margin:"4px 0"}}),(u=t($).asyncComputed.result.value)!=null&&u.logged?(v(),h(t(T),{key:0,type:"default",style:{width:"100%"},onClick:s},{icon:n(()=>[o(t(Ve))]),default:n(()=>[g(" Create a new role ")]),_:1})):O("",!0)]}),default:n(()=>[(v(!0),E(N,null,te(a.roleOptions,p=>(v(),h(t(he),{key:p,value:p},{default:n(()=>[g(I(p),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"]))}}),He=l=>l==="internal"?je:Se(l),Je=xe,Ye="Public",Me="Pages that are accessible to anyone with the link. No sign-up required.",We=De,Ke="Requires Identification",Qe=Te,Xe="Requires Role",ee=C({__name:"DraggeableItem",props:{item:{},roleOptions:{}},emits:["update:roles"],setup(l,{emit:e}){const s=l,c=typeof s.roleOptions<"u",i=a=>{e("update:roles",a)};return(a,f)=>(v(),h(t($e),{style:{"list-style":"none"},class:"item"},{default:n(()=>[o(t(k),{align:"center"},{default:n(()=>[(v(),h(be(t(He)(s.item.type)),{style:{"flex-shrink":"0",width:"24px"}})),o(t(S),{ellipsis:"",content:a.item.title,style:{"max-width":"90%",margin:"10px"}},null,8,["content"])]),_:1}),c?(v(),h(ze,{key:0,style:{width:"100%"},value:a.item.requiredRoles||[],"role-options":a.roleOptions||[],"onUpdate:value":i},null,8,["value","role-options"])):O("",!0)]),_:1}))}});const Ze=["href"],et=C({__name:"DraggeableSelector",props:{accessControls:{},roles:{}},emits:["update:accessControls","see-signup-policy","see-console-access-control","see-editor-test-users"],setup(l,{emit:e}){const s=l,c=y=>y.reduce((r,d)=>{switch(d.visibility){case"public":r.public.push(d);break;case"protected":r.protected.push(d);break;case"private":r.private.push(d);break;default:throw new Error("Invalid visibility")}return r},{public:[],protected:[],private:[]}),i=c(s.accessControls),a=U(i.public),f=U(i.protected),p=U(i.private);_e(()=>s.accessControls,y=>{const r=c(y);a.value=r.public,f.value=r.protected,p.value=r.private},{immediate:!0});const u=R(()=>s.roles.map(y=>y.name)),m=new Map,_=y=>{if("added"in y){const r=s.accessControls.findIndex(d=>d.id===y.added.element.id);if(r===-1)return!0;s.accessControls[r].makePublic(),e("update:accessControls",[...s.accessControls])}return!0},H=y=>{if("added"in y){const r=s.accessControls.findIndex(d=>d.id===y.added.element.id);if(r===-1)return!0;s.accessControls[r].makeProtected(),e("update:accessControls",[...s.accessControls])}return!0},D=y=>{if("added"in y){const r=y.added.element.id,d=m.get(r);if(d){const w=s.accessControls.findIndex(W=>W.id===y.added.element.id);if(w===-1)return!0;s.accessControls[w].require(d),e("update:accessControls",[...s.accessControls])}}return!0},J=y=>{const r=p.value[y];r&&m.set(r.id,r.requiredRoles)},Y=(y,r)=>{const d=s.accessControls.findIndex(w=>w.id===y.id);d!==-1&&(s.accessControls[d].require(r),r.length===0?(p.value=p.value.filter(w=>w.id!==y.id),f.value=[y,...f.value]):s.accessControls[d].isPublic=!1,e("update:accessControls",[...s.accessControls]))},M=()=>{var r,d;return(r=$.asyncComputed.result.value)!=null&&r.logged?`https://cloud.abstra.io/projects/${(d=$.asyncComputed.result.value)==null?void 0:d.project_id}/access-control?selected-panel=roles`:"https://cloud.abstra.io"};return(y,r)=>(v(),h(t(k),{justify:"space-between",gap:"middle"},{default:n(()=>[o(t(k),{vertical:"",class:"container"},{default:n(()=>[o(t(k),{class:"container-title"},{default:n(()=>[o(t(Je)),o(t(S),{strong:""},{default:n(()=>[g(I(t(Ye)),1)]),_:1})]),_:1}),o(t(x),null,{default:n(()=>[g(I(t(Me)),1)]),_:1}),o(t(X),{list:a.value,"onUpdate:list":r[0]||(r[0]=d=>a.value=d),class:"content","item-key":"id",group:"drag","ghost-class":"ghost",onChange:_},{item:n(({element:d})=>[o(ee,{class:"item",item:d},null,8,["item"])]),_:1},8,["list"])]),_:1}),o(t(k),{vertical:"",class:"container"},{default:n(()=>[o(t(k),{class:"container-title"},{default:n(()=>[o(t(We)),o(t(S),{strong:""},{default:n(()=>[g(I(t(Ke)),1)]),_:1})]),_:1}),o(t(x),null,{default:n(()=>[g(" Pages that are accessible to signed in users, according to the "),V("a",{onClick:r[1]||(r[1]=d=>e("see-signup-policy"))},"signup policy"),g(". ")]),_:1}),o(t(X),{list:f.value,"onUpdate:list":r[2]||(r[2]=d=>f.value=d),class:"content","item-key":"id",group:"drag","ghost-class":"ghost",onChange:H},{item:n(({element:d})=>[o(ee,{class:"item",item:d},null,8,["item"])]),_:1},8,["list"])]),_:1}),o(t(k),{vertical:"",class:"container"},{default:n(()=>[o(t(k),{class:"container-title"},{default:n(()=>[o(t(Qe)),o(t(S),{strong:""},{default:n(()=>[g(I(t(Xe)),1)]),_:1})]),_:1}),o(t(x),null,{default:n(()=>[g(" Pages that are accessible to users with specific roles. Those roles can be assigned in the "),V("a",{target:"_blank",href:M()},"console (production)",8,Ze),g(" or in the "),V("a",{onClick:r[3]||(r[3]=d=>e("see-editor-test-users"))},'"Test users" tab (local environment)'),g(". ")]),_:1}),o(t(X),{list:p.value,"onUpdate:list":r[4]||(r[4]=d=>p.value=d),class:"content","item-key":"id",group:"drag","ghost-class":"ghost",onChange:D,onStart:r[5]||(r[5]=d=>J(d.oldIndex))},{item:n(({element:d})=>[o(ee,{class:"item",item:d,"role-options":u.value,"onUpdate:roles":w=>Y(d,w)},null,8,["item","role-options","onUpdate:roles"])]),_:1},8,["list"])]),_:1})]),_:1}))}});const tt=Ce(et,[["__scopeId","data-v-554b096f"]]),st=C({__name:"DanglingRolesAlert",props:{danglingRoles:{}},setup(l){return(e,s)=>(v(),h(t(ce),{type:"warning","show-icon":"",closable:""},{description:n(()=>[o(t(S),null,{default:n(()=>[g("The following roles are not defined in the Cloud Console:")]),_:1}),(v(!0),E(N,null,te(e.danglingRoles,c=>(v(),h(t(ue),{key:c,style:{margin:"2px"},color:"red"},{default:n(()=>[g(I(c),1)]),_:2},1024))),128))]),_:1}))}}),ot=C({__name:"View",props:{accessControls:{},roles:{},loading:{type:Boolean}},emits:["update:access-controls","save","see-signup-policy","see-console-access-control","see-editor-test-users"],setup(l,{emit:e}){const s=l,c=R(()=>{var u;return((u=s.accessControls)==null?void 0:u.filter(m=>m.hasChanges()))||[]}),i=R(()=>c.value.length>0),f={save:async()=>{e("save")},hasChanges:()=>i.value},p=R(()=>{const u=s.accessControls.flatMap(_=>_.requiredRoles)||[],m=s.roles.map(_=>_.name)||[];return(u==null?void 0:u.filter(_=>!m.includes(_)))||[]});return(u,m)=>(v(),E(N,null,[o(t(k),{justify:"flex-end"},{default:n(()=>[o(qe,{model:f})]),_:1}),!u.loading&&p.value.length>0?(v(),h(st,{key:0,"dangling-roles":p.value},null,8,["dangling-roles"])):O("",!0),o(tt,{"access-controls":u.accessControls,roles:u.roles||[],"onUpdate:accessControls":m[0]||(m[0]=_=>e("update:access-controls",_)),onSeeConsoleAccessControl:m[1]||(m[1]=_=>e("see-console-access-control")),onSeeEditorTestUsers:m[2]||(m[2]=_=>e("see-editor-test-users")),onSeeSignupPolicy:m[3]||(m[3]=_=>e("see-signup-policy"))},null,8,["access-controls","roles"])],64))}}),nt={style:{padding:"30px"}},rt=C({__name:"View",props:{signupPolicy:{}},emits:["update:signup-policy","save"],setup(l,{emit:e}){const s=l,c=U(s.signupPolicy.strategy),i=U(s.signupPolicy.strategy==="patternOnly"?s.signupPolicy.emailPatterns:[]),a=U(s.signupPolicy.strategy==="patternOnly"?s.signupPolicy.emailPatterns.map(u=>({label:u})):[]),f=u=>{const m=u;if(i.value=m,m.length===0){p("inviteOnly");return}a.value=m.map(_=>({label:_})),s.signupPolicy.emailPatterns=u,e("update:signup-policy",s.signupPolicy)},p=u=>{c.value=u,u!=="patternOnly"&&(u==="anyone"&&s.signupPolicy.allowAnyone(),u==="inviteOnly"&&s.signupPolicy.allowOnlyInvited(),e("update:signup-policy",s.signupPolicy))};return(u,m)=>(v(),h(t(j),{direction:"vertical",style:{"padding-top":"8px"}},{default:n(()=>[o(t(x),null,{default:n(()=>[g(" Control which end users may sign-up to your app. ")]),_:1}),o(t(T),{disabled:!u.signupPolicy.hasChanges,type:"primary",onClick:m[0]||(m[0]=_=>e("save"))},{default:n(()=>[g(" Save changes ")]),_:1},8,["disabled"]),V("div",nt,[o(t(x),{strong:""},{default:n(()=>[g(" Allow self sign-up? ")]),_:1}),o(t(we),{value:c.value,"onUpdate:value":p},{default:n(()=>[o(t(j),{direction:"vertical"},{default:n(()=>[o(t(Q),{value:"inviteOnly"},{default:n(()=>[g("No, users must be added by me.")]),_:1}),o(t(j),null,{default:n(()=>[o(t(Q),{value:"patternOnly"},{default:n(()=>[g("Yes, but only for users in")]),_:1}),o(t(z),{mode:"tags",value:i.value,style:{"min-width":"250px"},placeholder:"@domain.com or sub.domain.com",disabled:c.value!=="patternOnly",options:a.value,"dropdown-match-select-width":"",open:!1,"onUpdate:value":f},null,8,["value","disabled","options"])]),_:1}),o(t(Q),{value:"anyone"},{default:n(()=>[g("Yes, for anyone")]),_:1})]),_:1})]),_:1},8,["value"])])]),_:1}))}}),at=C({__name:"View",props:{loading:{type:Boolean},users:{}},emits:["create","edit","delete"],setup(l,{emit:e}){const s=l,c=R(()=>{var i;return{columns:[{name:"Email"},{name:"Roles"},{name:"",align:"right"}],rows:(i=s.users.map(a=>({key:a.email,cells:[{type:"text",text:a.email},{type:"slot",key:"roles",payload:{roles:a.roles}},{type:"actions",actions:[{icon:Ne,label:"Edit",onClick:()=>e("edit",a)},{icon:Pe,label:"Delete",onClick:()=>e("delete",a)}]}]})))!=null?i:[]}});return(i,a)=>(v(),E(N,null,[o(Ee,{"entity-name":"users",title:"",loading:i.loading,description:"List all user profiles to be used for testing purposes.","empty-title":"No users yet",table:c.value,"create-button-text":"Add users",onCreate:a[0]||(a[0]=f=>e("create",f))},{roles:n(({payload:f})=>[(v(!0),E(N,null,te(f.roles,p=>(v(),h(t(ue),{key:p,bordered:""},{default:n(()=>[g(I(p),1)]),_:2},1024))),128))]),_:1},8,["loading","table"]),o(t(ce),{type:"info","show-icon":"",closable:""},{description:n(()=>[o(t(S),null,{default:n(()=>[g("Configurations made here only affect your local environment. To manage real users, please access the Cloud Console.")]),_:1})]),_:1})],64))}}),lt=C({__name:"NewUser",props:{roleOptions:{}},emits:["created","cancel"],setup(l,{emit:e}){const c=l.roleOptions.map(p=>({label:p.name,value:p.name})),i=ke({email:"",roles:[]});function a(){e("cancel")}function f(){!i.email||e("created",i)}return(p,u)=>(v(),h(t(pe),{open:"",title:"New user",width:720,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:a},{extra:n(()=>[o(t(j),null,{default:n(()=>[o(t(T),{onClick:a},{default:n(()=>[g("Cancel")]),_:1}),o(t(T),{type:"primary",onClick:f},{default:n(()=>[g("Submit")]),_:1})]),_:1})]),default:n(()=>[o(t(de),{model:i,layout:"vertical"},{default:n(()=>[o(t(F),{key:"email",label:"Email",required:!0},{default:n(()=>[o(t(ie),{value:i.email,"onUpdate:value":u[0]||(u[0]=m=>i.email=m)},null,8,["value"])]),_:1}),o(t(F),{key:"role",label:"Role"},{default:n(()=>[o(t(z),{value:i.roles,"onUpdate:value":u[1]||(u[1]=m=>i.roles=m),mode:"multiple",options:t(c)},null,8,["value","options"])]),_:1})]),_:1},8,["model"])]),_:1}))}}),it=C({__name:"UpdateUser",props:{roleOptions:{},value:{}},emits:["updated","cancel"],setup(l,{emit:e}){const s=l,c=s.roleOptions.map(f=>({label:f.name,value:f.name}));function i(){e("cancel")}function a(){e("updated",s.value)}return(f,p)=>(v(),h(t(pe),{open:"",title:"Update user",width:720,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:i},{extra:n(()=>[o(t(j),null,{default:n(()=>[o(t(T),{onClick:i},{default:n(()=>[g("Cancel")]),_:1}),o(t(T),{type:"primary",onClick:a},{default:n(()=>[g("Submit")]),_:1})]),_:1})]),default:n(()=>[o(t(de),{layout:"vertical"},{default:n(()=>[o(t(F),{key:"email",label:"Email"},{default:n(()=>[o(t(ie),{value:f.value.email,"onUpdate:value":p[0]||(p[0]=u=>f.value.email=u),disabled:""},null,8,["value"])]),_:1}),o(t(F),{key:"role",label:"Role"},{default:n(()=>[o(t(z),{value:f.value.roles,"onUpdate:value":p[1]||(p[1]=u=>f.value.roles=u),mode:"multiple",options:t(c)},null,8,["value","options"])]),_:1})]),_:1})]),_:1}))}}),ts=C({__name:"AccessControlEditor",setup(l){const e=()=>{s.value={type:"initial"}},s=U({type:"initial"}),c=U("enforcement"),i=new Fe,{result:a,refetch:f}=G(async()=>await i.list()),p=R(()=>{var P;return((P=a.value)==null?void 0:P.filter(b=>b.hasChanges()))||[]}),u=async()=>{await i.update(p.value),await f()},m=new Oe,{result:_,loading:H,refetch:D}=G(()=>m.list()),J=async P=>{await m.create(P),await D(),e()},Y=async P=>{await m.update(P.id,P.changes),await D(),e()},M=async P=>{await m.delete(P.id),await D(),e()},y=new Le,{result:r,refetch:d}=G(()=>y.get()),w=async()=>{!r.value||(await y.update(r.value),await d())},W=new Ue,{result:K,loading:me}=G(()=>W.list(100,0));return(P,b)=>(v(),h(ye,null,{default:n(()=>[o(t(Be),null,{default:n(()=>[g("Access Control")]),_:1}),o(t(x),null,{default:n(()=>[g(" Configure the security level of your application. You can define which pages are accessible to signed-in users, which pages are accessible to users with specific roles, and which pages are accessible to everyone. ")]),_:1}),o(t(Ie),{"active-key":c.value,"onUpdate:activeKey":b[0]||(b[0]=A=>c.value=A)},{default:n(()=>[o(t(Z),{key:"enforcement",tab:"Security Level"}),o(t(Z),{key:"signup-policy",tab:"Sign-Up Policy"}),o(t(Z),{key:"users",tab:"Test Users"})]),_:1},8,["active-key"]),c.value==="enforcement"&&t(a)?(v(),h(ot,{key:0,"access-controls":t(a),"onUpdate:accessControls":b[1]||(b[1]=A=>ne(a)?a.value=A:null),roles:t(K)||[],loading:t(me),onSave:u,onSeeConsoleAccessControl:b[2]||(b[2]=()=>c.value="roles"),onSeeEditorTestUsers:b[3]||(b[3]=()=>c.value="users"),onSeeSignupPolicy:b[4]||(b[4]=()=>c.value="signup-policy")},null,8,["access-controls","roles","loading"])):O("",!0),c.value==="users"?(v(),h(t(at),{key:1,loading:t(H),users:t(_)||[],onDelete:M,onCreate:b[5]||(b[5]=()=>s.value={type:"user-create"}),onEdit:b[6]||(b[6]=A=>s.value={type:"user-update",user:A})},null,8,["loading","users"])):O("",!0),c.value==="signup-policy"&&t(r)?(v(),h(rt,{key:2,"signup-policy":t(r),"onUpdate:signupPolicy":b[7]||(b[7]=A=>ne(r)?r.value=A:null),onSave:w},null,8,["signup-policy"])):O("",!0),s.value.type==="user-create"?(v(),h(t(lt),{key:3,"role-options":t(K)||[],onCreated:J,onCancel:e},null,8,["role-options"])):O("",!0),s.value.type==="user-update"?(v(),h(t(it),{key:4,value:s.value.user,"role-options":t(K)||[],onUpdated:Y,onCancel:e},null,8,["value","role-options"])):O("",!0)]),_:1}))}});export{ts as default};
//# sourceMappingURL=AccessControlEditor.0867698e.js.map
