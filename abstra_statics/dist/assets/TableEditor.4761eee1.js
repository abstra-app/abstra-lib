import{_ as ie}from"./AbstraButton.vue_vue_type_script_setup_true_lang.9503ef94.js";import{B as pa}from"./BaseLayout.65984bcc.js";import{H as Xe,u as va,o as Ue}from"./omniChatStore.a8e7ce93.js";import{a as Se}from"./asyncComputed.d231d8c0.js";import{d as G,at as T,c as b,o as t,ac as s,ae as de,h as I,ed as ce,e as u,ei as fe,ec as Ie,u as e,a as _,b as n,f as o,g as R,df as fa,ej as le,dj as P,aY as ae,t as W,_ as Le,bY as ee,cE as J,bQ as se,eo as ma,bT as ga,cD as ze,r as N,w as he,en as $e,S as He,c$ as ge,j as Te,cI as ha,cY as Fe,aI as Ze,ez as ya,U as ea,al as ba,b0 as me,cS as Ee,d9 as Re,eh as $a,cR as Ha,er as ka,d0 as Va,bG as Ke,ax as wa,M as _a,i as be}from"./jwt-decode.esm.9d191a76.js";import{G as Ca}from"./PhSparkle.vue.7d400157.js";import{d as Be,p as ke,j as Aa}from"./router.61b1ce1a.js";import{a as Za}from"./organization.f8ad23f8.js";import{a as De}from"./project.14436039.js";import{p as aa,T as ne,d as Ma,C as Pe}from"./tables.9609b3e4.js";import{F as Sa}from"./folder.9f895827.js";import{_ as Ia}from"./ConsoleOmniChat.vue_vue_type_script_setup_true_lang.cca3421b.js";import{C as Me}from"./ContentLayout.3906561b.js";import{F as La}from"./PhArrowSquareOut.vue.5929e76a.js";import{u as za}from"./useTables.b154659b.js";import{C as Oe,S as We}from"./Card.86497ce4.js";import{F as Ta}from"./PhGear.vue.4a054de7.js";import{I as ta,F as Ba,a as Da,G as xa,b as qa}from"./PhWarningCircle.vue.a7cdaf64.js";import{A as xe}from"./index.566bf3c3.js";import{A as la}from"./index.d18e7158.js";import{a as Na}from"./ant-design.3bcd02e9.js";import{B as ja,A as Ua}from"./Breadcrumb.d1adb2c3.js";import{A as Fa}from"./index.977fff84.js";import"./record.f2c2316a.js";import"./uuid.9fd77426.js";import"./PhCopySimple.vue.ebf2fbd1.js";import"./index.b5277efa.js";import"./string.6bea0aa7.js";import"./OmniChat.a2096108.js";import"./AbstraLogo.vue_vue_type_script_setup_true_lang.02e5a265.js";import"./Logo.007e6e34.js";import"./files.edd8194f.js";import"./PhClockCounterClockwise.vue.695f1147.js";import"./LoadingOutlined.400f78e4.js";import"./PhDatabase.vue.7512819b.js";import"./index.060677ed.js";import"./index.a3f12062.js";(function(){try{var H=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new Error().stack;r&&(H._sentryDebugIds=H._sentryDebugIds||{},H._sentryDebugIds[r]="6f8c4c50-a566-4532-9773-5388e036fce7",H._sentryDebugIdIdentifier="sentry-dbid-6f8c4c50-a566-4532-9773-5388e036fce7")}catch{}})();const Ea=["width","height","fill","transform"],Ra={key:0},Ka=u("path",{d:"M208.49,120.49a12,12,0,0,1-17,0L140,69V216a12,12,0,0,1-24,0V69L64.49,120.49a12,12,0,0,1-17-17l72-72a12,12,0,0,1,17,0l72,72A12,12,0,0,1,208.49,120.49Z"},null,-1),Pa=[Ka],Oa={key:1},Wa=u("path",{d:"M200,112H56l72-72Z",opacity:"0.2"},null,-1),Ga=u("path",{d:"M205.66,106.34l-72-72a8,8,0,0,0-11.32,0l-72,72A8,8,0,0,0,56,120h64v96a8,8,0,0,0,16,0V120h64a8,8,0,0,0,5.66-13.66ZM75.31,104,128,51.31,180.69,104Z"},null,-1),Qa=[Wa,Ga],Ja={key:2},Ya=u("path",{d:"M207.39,115.06A8,8,0,0,1,200,120H136v96a8,8,0,0,1-16,0V120H56a8,8,0,0,1-5.66-13.66l72-72a8,8,0,0,1,11.32,0l72,72A8,8,0,0,1,207.39,115.06Z"},null,-1),Xa=[Ya],e0={key:3},a0=u("path",{d:"M204.24,116.24a6,6,0,0,1-8.48,0L134,54.49V216a6,6,0,0,1-12,0V54.49L60.24,116.24a6,6,0,0,1-8.48-8.48l72-72a6,6,0,0,1,8.48,0l72,72A6,6,0,0,1,204.24,116.24Z"},null,-1),t0=[a0],l0={key:4},n0=u("path",{d:"M205.66,117.66a8,8,0,0,1-11.32,0L136,59.31V216a8,8,0,0,1-16,0V59.31L61.66,117.66a8,8,0,0,1-11.32-11.32l72-72a8,8,0,0,1,11.32,0l72,72A8,8,0,0,1,205.66,117.66Z"},null,-1),o0=[n0],r0={key:5},u0=u("path",{d:"M202.83,114.83a4,4,0,0,1-5.66,0L132,49.66V216a4,4,0,0,1-8,0V49.66L58.83,114.83a4,4,0,0,1-5.66-5.66l72-72a4,4,0,0,1,5.66,0l72,72A4,4,0,0,1,202.83,114.83Z"},null,-1),i0=[u0],s0={name:"PhArrowUp"},d0=G({...s0,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(H){const r=H,a=T("weight","regular"),k=T("size","1em"),p=T("color","currentColor"),d=T("mirrored",!1),i=b(()=>{var l;return(l=r.weight)!=null?l:a}),w=b(()=>{var l;return(l=r.size)!=null?l:k}),v=b(()=>{var l;return(l=r.color)!=null?l:p}),h=b(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:d?"scale(-1, 1)":void 0);return(l,Z)=>(t(),s("svg",ce({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:w.value,height:w.value,fill:v.value,transform:h.value},l.$attrs),[de(l.$slots,"default"),i.value==="bold"?(t(),s("g",Ra,Pa)):i.value==="duotone"?(t(),s("g",Oa,Qa)):i.value==="fill"?(t(),s("g",Ja,Xa)):i.value==="light"?(t(),s("g",e0,t0)):i.value==="regular"?(t(),s("g",l0,o0)):i.value==="thin"?(t(),s("g",r0,i0)):I("",!0)],16,Ea))}}),c0=["width","height","fill","transform"],p0={key:0},v0=u("path",{d:"M80,28H56A20,20,0,0,0,36,48V208a20,20,0,0,0,20,20H80a20,20,0,0,0,20-20V48A20,20,0,0,0,80,28ZM76,204H60V52H76ZM156,28H132a20,20,0,0,0-20,20V208a20,20,0,0,0,20,20h24a20,20,0,0,0,20-20V48A20,20,0,0,0,156,28Zm-4,176H136V52h16Zm100-76a12,12,0,0,1-12,12h-8v8a12,12,0,0,1-24,0v-8h-8a12,12,0,0,1,0-24h8v-8a12,12,0,0,1,24,0v8h8A12,12,0,0,1,252,128Z"},null,-1),f0=[v0],m0={key:1},g0=u("path",{d:"M88,48V208a8,8,0,0,1-8,8H56a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8H80A8,8,0,0,1,88,48Zm64-8H128a8,8,0,0,0-8,8V208a8,8,0,0,0,8,8h24a8,8,0,0,0,8-8V48A8,8,0,0,0,152,40Z",opacity:"0.2"},null,-1),h0=u("path",{d:"M80,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H80a16,16,0,0,0,16-16V48A16,16,0,0,0,80,32Zm0,176H56V48H80ZM152,32H128a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V48A16,16,0,0,0,152,32Zm0,176H128V48h24Zm96-80a8,8,0,0,1-8,8H224v16a8,8,0,0,1-16,0V136H192a8,8,0,0,1,0-16h16V104a8,8,0,0,1,16,0v16h16A8,8,0,0,1,248,128Z"},null,-1),y0=[g0,h0],b0={key:2},$0=u("path",{d:"M96,48V208a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V48A16,16,0,0,1,56,32H80A16,16,0,0,1,96,48Zm56-16H128a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V48A16,16,0,0,0,152,32Zm88,88H224V104a8,8,0,0,0-16,0v16H192a8,8,0,0,0,0,16h16v16a8,8,0,0,0,16,0V136h16a8,8,0,0,0,0-16Z"},null,-1),H0=[$0],k0={key:3},V0=u("path",{d:"M80,34H56A14,14,0,0,0,42,48V208a14,14,0,0,0,14,14H80a14,14,0,0,0,14-14V48A14,14,0,0,0,80,34Zm2,174a2,2,0,0,1-2,2H56a2,2,0,0,1-2-2V48a2,2,0,0,1,2-2H80a2,2,0,0,1,2,2ZM152,34H128a14,14,0,0,0-14,14V208a14,14,0,0,0,14,14h24a14,14,0,0,0,14-14V48A14,14,0,0,0,152,34Zm2,174a2,2,0,0,1-2,2H128a2,2,0,0,1-2-2V48a2,2,0,0,1,2-2h24a2,2,0,0,1,2,2Zm92-80a6,6,0,0,1-6,6H222v18a6,6,0,0,1-12,0V134H192a6,6,0,0,1,0-12h18V104a6,6,0,0,1,12,0v18h18A6,6,0,0,1,246,128Z"},null,-1),w0=[V0],_0={key:4},C0=u("path",{d:"M80,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H80a16,16,0,0,0,16-16V48A16,16,0,0,0,80,32Zm0,176H56V48H80ZM152,32H128a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V48A16,16,0,0,0,152,32Zm0,176H128V48h24Zm96-80a8,8,0,0,1-8,8H224v16a8,8,0,0,1-16,0V136H192a8,8,0,0,1,0-16h16V104a8,8,0,0,1,16,0v16h16A8,8,0,0,1,248,128Z"},null,-1),A0=[C0],Z0={key:5},M0=u("path",{d:"M80,36H56A12,12,0,0,0,44,48V208a12,12,0,0,0,12,12H80a12,12,0,0,0,12-12V48A12,12,0,0,0,80,36Zm4,172a4,4,0,0,1-4,4H56a4,4,0,0,1-4-4V48a4,4,0,0,1,4-4H80a4,4,0,0,1,4,4ZM152,36H128a12,12,0,0,0-12,12V208a12,12,0,0,0,12,12h24a12,12,0,0,0,12-12V48A12,12,0,0,0,152,36Zm4,172a4,4,0,0,1-4,4H128a4,4,0,0,1-4-4V48a4,4,0,0,1,4-4h24a4,4,0,0,1,4,4Zm88-80a4,4,0,0,1-4,4H220v20a4,4,0,0,1-8,0V132H192a4,4,0,0,1,0-8h20V104a4,4,0,0,1,8,0v20h20A4,4,0,0,1,244,128Z"},null,-1),S0=[M0],I0={name:"PhColumnsPlusRight"},L0=G({...I0,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(H){const r=H,a=T("weight","regular"),k=T("size","1em"),p=T("color","currentColor"),d=T("mirrored",!1),i=b(()=>{var l;return(l=r.weight)!=null?l:a}),w=b(()=>{var l;return(l=r.size)!=null?l:k}),v=b(()=>{var l;return(l=r.color)!=null?l:p}),h=b(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:d?"scale(-1, 1)":void 0);return(l,Z)=>(t(),s("svg",ce({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:w.value,height:w.value,fill:v.value,transform:h.value},l.$attrs),[de(l.$slots,"default"),i.value==="bold"?(t(),s("g",p0,f0)):i.value==="duotone"?(t(),s("g",m0,y0)):i.value==="fill"?(t(),s("g",b0,H0)):i.value==="light"?(t(),s("g",k0,w0)):i.value==="regular"?(t(),s("g",_0,A0)):i.value==="thin"?(t(),s("g",Z0,S0)):I("",!0)],16,c0))}}),z0=["width","height","fill","transform"],T0={key:0},B0=u("path",{d:"M148,96V48a12,12,0,0,1,24,0V84h36a12,12,0,0,1,0,24H160A12,12,0,0,1,148,96ZM96,148H48a12,12,0,0,0,0,24H84v36a12,12,0,0,0,24,0V160A12,12,0,0,0,96,148Zm112,0H160a12,12,0,0,0-12,12v48a12,12,0,0,0,24,0V172h36a12,12,0,0,0,0-24ZM96,36A12,12,0,0,0,84,48V84H48a12,12,0,0,0,0,24H96a12,12,0,0,0,12-12V48A12,12,0,0,0,96,36Z"},null,-1),D0=[B0],x0={key:1},q0=u("path",{d:"M208,64V192a16,16,0,0,1-16,16H64a16,16,0,0,1-16-16V64A16,16,0,0,1,64,48H192A16,16,0,0,1,208,64Z",opacity:"0.2"},null,-1),N0=u("path",{d:"M152,96V48a8,8,0,0,1,16,0V88h40a8,8,0,0,1,0,16H160A8,8,0,0,1,152,96ZM96,152H48a8,8,0,0,0,0,16H88v40a8,8,0,0,0,16,0V160A8,8,0,0,0,96,152Zm112,0H160a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V168h40a8,8,0,0,0,0-16ZM96,40a8,8,0,0,0-8,8V88H48a8,8,0,0,0,0,16H96a8,8,0,0,0,8-8V48A8,8,0,0,0,96,40Z"},null,-1),j0=[q0,N0],U0={key:2},F0=u("path",{d:"M152,96V48a8,8,0,0,1,13.66-5.66l48,48A8,8,0,0,1,208,104H160A8,8,0,0,1,152,96ZM96,152H48a8,8,0,0,0-5.66,13.66l48,48A8,8,0,0,0,104,208V160A8,8,0,0,0,96,152ZM99.06,40.61a8,8,0,0,0-8.72,1.73l-48,48A8,8,0,0,0,48,104H96a8,8,0,0,0,8-8V48A8,8,0,0,0,99.06,40.61ZM208,152H160a8,8,0,0,0-8,8v48a8,8,0,0,0,13.66,5.66l48-48A8,8,0,0,0,208,152Z"},null,-1),E0=[F0],R0={key:3},K0=u("path",{d:"M154,96V48a6,6,0,0,1,12,0V90h42a6,6,0,0,1,0,12H160A6,6,0,0,1,154,96ZM96,154H48a6,6,0,0,0,0,12H90v42a6,6,0,0,0,12,0V160A6,6,0,0,0,96,154Zm112,0H160a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V166h42a6,6,0,0,0,0-12ZM96,42a6,6,0,0,0-6,6V90H48a6,6,0,0,0,0,12H96a6,6,0,0,0,6-6V48A6,6,0,0,0,96,42Z"},null,-1),P0=[K0],O0={key:4},W0=u("path",{d:"M152,96V48a8,8,0,0,1,16,0V88h40a8,8,0,0,1,0,16H160A8,8,0,0,1,152,96ZM96,152H48a8,8,0,0,0,0,16H88v40a8,8,0,0,0,16,0V160A8,8,0,0,0,96,152Zm112,0H160a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V168h40a8,8,0,0,0,0-16ZM96,40a8,8,0,0,0-8,8V88H48a8,8,0,0,0,0,16H96a8,8,0,0,0,8-8V48A8,8,0,0,0,96,40Z"},null,-1),G0=[W0],Q0={key:5},J0=u("path",{d:"M156,96V48a4,4,0,0,1,8,0V92h44a4,4,0,0,1,0,8H160A4,4,0,0,1,156,96ZM96,156H48a4,4,0,0,0,0,8H92v44a4,4,0,0,0,8,0V160A4,4,0,0,0,96,156Zm112,0H160a4,4,0,0,0-4,4v48a4,4,0,0,0,8,0V164h44a4,4,0,0,0,0-8ZM96,44a4,4,0,0,0-4,4V92H48a4,4,0,0,0,0,8H96a4,4,0,0,0,4-4V48A4,4,0,0,0,96,44Z"},null,-1),Y0=[J0],X0={name:"PhCornersIn"},et=G({...X0,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(H){const r=H,a=T("weight","regular"),k=T("size","1em"),p=T("color","currentColor"),d=T("mirrored",!1),i=b(()=>{var l;return(l=r.weight)!=null?l:a}),w=b(()=>{var l;return(l=r.size)!=null?l:k}),v=b(()=>{var l;return(l=r.color)!=null?l:p}),h=b(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:d?"scale(-1, 1)":void 0);return(l,Z)=>(t(),s("svg",ce({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:w.value,height:w.value,fill:v.value,transform:h.value},l.$attrs),[de(l.$slots,"default"),i.value==="bold"?(t(),s("g",T0,D0)):i.value==="duotone"?(t(),s("g",x0,j0)):i.value==="fill"?(t(),s("g",U0,E0)):i.value==="light"?(t(),s("g",R0,P0)):i.value==="regular"?(t(),s("g",O0,G0)):i.value==="thin"?(t(),s("g",Q0,Y0)):I("",!0)],16,z0))}}),at=["width","height","fill","transform"],tt={key:0},lt=u("path",{d:"M220,48V88a12,12,0,0,1-24,0V60H168a12,12,0,0,1,0-24h40A12,12,0,0,1,220,48ZM88,196H60V168a12,12,0,0,0-24,0v40a12,12,0,0,0,12,12H88a12,12,0,0,0,0-24Zm120-40a12,12,0,0,0-12,12v28H168a12,12,0,0,0,0,24h40a12,12,0,0,0,12-12V168A12,12,0,0,0,208,156ZM88,36H48A12,12,0,0,0,36,48V88a12,12,0,0,0,24,0V60H88a12,12,0,0,0,0-24Z"},null,-1),nt=[lt],ot={key:1},rt=u("path",{d:"M208,48V208H48V48Z",opacity:"0.2"},null,-1),ut=u("path",{d:"M216,48V88a8,8,0,0,1-16,0V56H168a8,8,0,0,1,0-16h40A8,8,0,0,1,216,48ZM88,200H56V168a8,8,0,0,0-16,0v40a8,8,0,0,0,8,8H88a8,8,0,0,0,0-16Zm120-40a8,8,0,0,0-8,8v32H168a8,8,0,0,0,0,16h40a8,8,0,0,0,8-8V168A8,8,0,0,0,208,160ZM88,40H48a8,8,0,0,0-8,8V88a8,8,0,0,0,16,0V56H88a8,8,0,0,0,0-16Z"},null,-1),it=[rt,ut],st={key:2},dt=u("path",{d:"M93.66,202.34A8,8,0,0,1,88,216H48a8,8,0,0,1-8-8V168a8,8,0,0,1,13.66-5.66ZM88,40H48a8,8,0,0,0-8,8V88a8,8,0,0,0,13.66,5.66l40-40A8,8,0,0,0,88,40ZM211.06,160.61a8,8,0,0,0-8.72,1.73l-40,40A8,8,0,0,0,168,216h40a8,8,0,0,0,8-8V168A8,8,0,0,0,211.06,160.61ZM208,40H168a8,8,0,0,0-5.66,13.66l40,40A8,8,0,0,0,216,88V48A8,8,0,0,0,208,40Z"},null,-1),ct=[dt],pt={key:3},vt=u("path",{d:"M214,48V88a6,6,0,0,1-12,0V54H168a6,6,0,0,1,0-12h40A6,6,0,0,1,214,48ZM88,202H54V168a6,6,0,0,0-12,0v40a6,6,0,0,0,6,6H88a6,6,0,0,0,0-12Zm120-40a6,6,0,0,0-6,6v34H168a6,6,0,0,0,0,12h40a6,6,0,0,0,6-6V168A6,6,0,0,0,208,162ZM88,42H48a6,6,0,0,0-6,6V88a6,6,0,0,0,12,0V54H88a6,6,0,0,0,0-12Z"},null,-1),ft=[vt],mt={key:4},gt=u("path",{d:"M216,48V88a8,8,0,0,1-16,0V56H168a8,8,0,0,1,0-16h40A8,8,0,0,1,216,48ZM88,200H56V168a8,8,0,0,0-16,0v40a8,8,0,0,0,8,8H88a8,8,0,0,0,0-16Zm120-40a8,8,0,0,0-8,8v32H168a8,8,0,0,0,0,16h40a8,8,0,0,0,8-8V168A8,8,0,0,0,208,160ZM88,40H48a8,8,0,0,0-8,8V88a8,8,0,0,0,16,0V56H88a8,8,0,0,0,0-16Z"},null,-1),ht=[gt],yt={key:5},bt=u("path",{d:"M212,48V88a4,4,0,0,1-8,0V52H168a4,4,0,0,1,0-8h40A4,4,0,0,1,212,48ZM88,204H52V168a4,4,0,0,0-8,0v40a4,4,0,0,0,4,4H88a4,4,0,0,0,0-8Zm120-40a4,4,0,0,0-4,4v36H168a4,4,0,0,0,0,8h40a4,4,0,0,0,4-4V168A4,4,0,0,0,208,164ZM88,44H48a4,4,0,0,0-4,4V88a4,4,0,0,0,8,0V52H88a4,4,0,0,0,0-8Z"},null,-1),$t=[bt],Ht={name:"PhCornersOut"},kt=G({...Ht,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(H){const r=H,a=T("weight","regular"),k=T("size","1em"),p=T("color","currentColor"),d=T("mirrored",!1),i=b(()=>{var l;return(l=r.weight)!=null?l:a}),w=b(()=>{var l;return(l=r.size)!=null?l:k}),v=b(()=>{var l;return(l=r.color)!=null?l:p}),h=b(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:d?"scale(-1, 1)":void 0);return(l,Z)=>(t(),s("svg",ce({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:w.value,height:w.value,fill:v.value,transform:h.value},l.$attrs),[de(l.$slots,"default"),i.value==="bold"?(t(),s("g",tt,nt)):i.value==="duotone"?(t(),s("g",ot,it)):i.value==="fill"?(t(),s("g",st,ct)):i.value==="light"?(t(),s("g",pt,ft)):i.value==="regular"?(t(),s("g",mt,ht)):i.value==="thin"?(t(),s("g",yt,$t)):I("",!0)],16,at))}}),Vt=["width","height","fill","transform"],wt={key:0},_t=u("path",{d:"M228,160a12,12,0,0,1-12,12H40a12,12,0,0,1,0-24H216A12,12,0,0,1,228,160ZM40,108H216a12,12,0,0,0,0-24H40a12,12,0,0,0,0,24Z"},null,-1),Ct=[_t],At={key:1},Zt=u("path",{d:"M216,56V200a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V56A16,16,0,0,1,56,40H200A16,16,0,0,1,216,56Z",opacity:"0.2"},null,-1),Mt=u("path",{d:"M224,160a8,8,0,0,1-8,8H40a8,8,0,0,1,0-16H216A8,8,0,0,1,224,160ZM40,104H216a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16Z"},null,-1),St=[Zt,Mt],It={key:2},Lt=u("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM184,160H72a8,8,0,0,1,0-16H184a8,8,0,0,1,0,16Zm0-48H72a8,8,0,0,1,0-16H184a8,8,0,0,1,0,16Z"},null,-1),zt=[Lt],Tt={key:3},Bt=u("path",{d:"M222,160a6,6,0,0,1-6,6H40a6,6,0,0,1,0-12H216A6,6,0,0,1,222,160ZM40,102H216a6,6,0,0,0,0-12H40a6,6,0,0,0,0,12Z"},null,-1),Dt=[Bt],xt={key:4},qt=u("path",{d:"M224,160a8,8,0,0,1-8,8H40a8,8,0,0,1,0-16H216A8,8,0,0,1,224,160ZM40,104H216a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16Z"},null,-1),Nt=[qt],jt={key:5},Ut=u("path",{d:"M220,160a4,4,0,0,1-4,4H40a4,4,0,0,1,0-8H216A4,4,0,0,1,220,160ZM40,100H216a4,4,0,0,0,0-8H40a4,4,0,0,0,0,8Z"},null,-1),Ft=[Ut],Et={name:"PhEquals"},Rt=G({...Et,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(H){const r=H,a=T("weight","regular"),k=T("size","1em"),p=T("color","currentColor"),d=T("mirrored",!1),i=b(()=>{var l;return(l=r.weight)!=null?l:a}),w=b(()=>{var l;return(l=r.size)!=null?l:k}),v=b(()=>{var l;return(l=r.color)!=null?l:p}),h=b(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:d?"scale(-1, 1)":void 0);return(l,Z)=>(t(),s("svg",ce({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:w.value,height:w.value,fill:v.value,transform:h.value},l.$attrs),[de(l.$slots,"default"),i.value==="bold"?(t(),s("g",wt,Ct)):i.value==="duotone"?(t(),s("g",At,St)):i.value==="fill"?(t(),s("g",It,zt)):i.value==="light"?(t(),s("g",Tt,Dt)):i.value==="regular"?(t(),s("g",xt,Nt)):i.value==="thin"?(t(),s("g",jt,Ft)):I("",!0)],16,Vt))}}),Kt=["width","height","fill","transform"],Pt={key:0},Ot=u("path",{d:"M87.5,151.52l64-64a12,12,0,0,1,17,17l-64,64a12,12,0,0,1-17-17Zm131-114a60.08,60.08,0,0,0-84.87,0L103.51,67.61a12,12,0,0,0,17,17l30.07-30.06a36,36,0,0,1,50.93,50.92L171.4,135.52a12,12,0,1,0,17,17l30.08-30.06A60.09,60.09,0,0,0,218.45,37.55ZM135.52,171.4l-30.07,30.08a36,36,0,0,1-50.92-50.93l30.06-30.07a12,12,0,0,0-17-17L37.55,133.58a60,60,0,0,0,84.88,84.87l30.06-30.07a12,12,0,0,0-17-17Z"},null,-1),Wt=[Ot],Gt={key:1},Qt=u("path",{d:"M209.94,113.94l-96,96a48,48,0,0,1-67.88-67.88l96-96a48,48,0,0,1,67.88,67.88Z",opacity:"0.2"},null,-1),Jt=u("path",{d:"M165.66,90.34a8,8,0,0,1,0,11.32l-64,64a8,8,0,0,1-11.32-11.32l64-64A8,8,0,0,1,165.66,90.34ZM215.6,40.4a56,56,0,0,0-79.2,0L106.34,70.45a8,8,0,0,0,11.32,11.32l30.06-30a40,40,0,0,1,56.57,56.56l-30.07,30.06a8,8,0,0,0,11.31,11.32L215.6,119.6a56,56,0,0,0,0-79.2ZM138.34,174.22l-30.06,30.06a40,40,0,1,1-56.56-56.57l30.05-30.05a8,8,0,0,0-11.32-11.32L40.4,136.4a56,56,0,0,0,79.2,79.2l30.06-30.07a8,8,0,0,0-11.32-11.31Z"},null,-1),Yt=[Qt,Jt],Xt={key:2},el=u("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM144.56,173.66l-21.45,21.45a44,44,0,0,1-62.22-62.22l21.45-21.46a8,8,0,0,1,11.32,11.31L72.2,144.2a28,28,0,0,0,39.6,39.6l21.45-21.46a8,8,0,0,1,11.31,11.32Zm-34.9-16a8,8,0,0,1-11.32-11.32l48-48a8,8,0,0,1,11.32,11.32Zm85.45-34.55-21.45,21.45a8,8,0,0,1-11.32-11.31L183.8,111.8a28,28,0,0,0-39.6-39.6L122.74,93.66a8,8,0,0,1-11.31-11.32l21.46-21.45a44,44,0,0,1,62.22,62.22Z"},null,-1),al=[el],tl={key:3},ll=u("path",{d:"M164.25,91.75a6,6,0,0,1,0,8.49l-64,64a6,6,0,0,1-8.49-8.48l64-64A6,6,0,0,1,164.25,91.75ZM214.2,41.8a54.07,54.07,0,0,0-76.38,0L107.75,71.85a6,6,0,0,0,8.49,8.49l30.07-30.06a42,42,0,0,1,59.41,59.41l-30.08,30.07a6,6,0,1,0,8.49,8.49l30.07-30.07A54,54,0,0,0,214.2,41.8ZM139.76,175.64l-30.07,30.08a42,42,0,0,1-59.41-59.41l30.06-30.07a6,6,0,0,0-8.49-8.49l-30,30.07a54,54,0,0,0,76.38,76.39l30.07-30.08a6,6,0,0,0-8.49-8.49Z"},null,-1),nl=[ll],ol={key:4},rl=u("path",{d:"M165.66,90.34a8,8,0,0,1,0,11.32l-64,64a8,8,0,0,1-11.32-11.32l64-64A8,8,0,0,1,165.66,90.34ZM215.6,40.4a56,56,0,0,0-79.2,0L106.34,70.45a8,8,0,0,0,11.32,11.32l30.06-30a40,40,0,0,1,56.57,56.56l-30.07,30.06a8,8,0,0,0,11.31,11.32L215.6,119.6a56,56,0,0,0,0-79.2ZM138.34,174.22l-30.06,30.06a40,40,0,1,1-56.56-56.57l30.05-30.05a8,8,0,0,0-11.32-11.32L40.4,136.4a56,56,0,0,0,79.2,79.2l30.06-30.07a8,8,0,0,0-11.32-11.31Z"},null,-1),ul=[rl],il={key:5},sl=u("path",{d:"M162.84,93.16a4,4,0,0,1,0,5.66l-64,64a4,4,0,0,1-5.66-5.66l64-64A4,4,0,0,1,162.84,93.16Zm49.95-49.95a52.07,52.07,0,0,0-73.56,0L109.17,73.27a4,4,0,0,0,5.65,5.66l30.07-30.06a44,44,0,0,1,62.24,62.24l-30.07,30.06a4,4,0,0,0,5.66,5.66l30.07-30.06A52.07,52.07,0,0,0,212.79,43.21ZM141.17,177.06l-30.06,30.07a44,44,0,0,1-62.24-62.24l30.06-30.06a4,4,0,0,0-5.66-5.66L43.21,139.23a52,52,0,0,0,73.56,73.56l30.06-30.07a4,4,0,1,0-5.66-5.66Z"},null,-1),dl=[sl],cl={name:"PhLinkSimple"},Ge=G({...cl,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(H){const r=H,a=T("weight","regular"),k=T("size","1em"),p=T("color","currentColor"),d=T("mirrored",!1),i=b(()=>{var l;return(l=r.weight)!=null?l:a}),w=b(()=>{var l;return(l=r.size)!=null?l:k}),v=b(()=>{var l;return(l=r.color)!=null?l:p}),h=b(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:d?"scale(-1, 1)":void 0);return(l,Z)=>(t(),s("svg",ce({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:w.value,height:w.value,fill:v.value,transform:h.value},l.$attrs),[de(l.$slots,"default"),i.value==="bold"?(t(),s("g",Pt,Wt)):i.value==="duotone"?(t(),s("g",Gt,Yt)):i.value==="fill"?(t(),s("g",Xt,al)):i.value==="light"?(t(),s("g",tl,nl)):i.value==="regular"?(t(),s("g",ol,ul)):i.value==="thin"?(t(),s("g",il,dl)):I("",!0)],16,Kt))}}),pl=["width","height","fill","transform"],vl={key:0},fl=u("path",{d:"M232.49,55.51l-32-32a12,12,0,0,0-17,0l-96,96A12,12,0,0,0,84,128v32a12,12,0,0,0,12,12h32a12,12,0,0,0,8.49-3.51l96-96A12,12,0,0,0,232.49,55.51ZM192,49l15,15L196,75,181,60Zm-69,99H108V133l56-56,15,15Zm105-7.43V208a20,20,0,0,1-20,20H48a20,20,0,0,1-20-20V48A20,20,0,0,1,48,28h67.43a12,12,0,0,1,0,24H52V204H204V140.57a12,12,0,0,1,24,0Z"},null,-1),ml=[fl],gl={key:1},hl=u("path",{d:"M200,88l-72,72H96V128l72-72Z",opacity:"0.2"},null,-1),yl=u("path",{d:"M229.66,58.34l-32-32a8,8,0,0,0-11.32,0l-96,96A8,8,0,0,0,88,128v32a8,8,0,0,0,8,8h32a8,8,0,0,0,5.66-2.34l96-96A8,8,0,0,0,229.66,58.34ZM124.69,152H104V131.31l64-64L188.69,88ZM200,76.69,179.31,56,192,43.31,212.69,64ZM224,128v80a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32h80a8,8,0,0,1,0,16H48V208H208V128a8,8,0,0,1,16,0Z"},null,-1),bl=[hl,yl],$l={key:2},Hl=u("path",{d:"M224,128v80a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32h80a8,8,0,0,1,0,16H48V208H208V128a8,8,0,0,1,16,0Zm5.66-58.34-96,96A8,8,0,0,1,128,168H96a8,8,0,0,1-8-8V128a8,8,0,0,1,2.34-5.66l96-96a8,8,0,0,1,11.32,0l32,32A8,8,0,0,1,229.66,69.66Zm-17-5.66L192,43.31,179.31,56,200,76.69Z"},null,-1),kl=[Hl],Vl={key:3},wl=u("path",{d:"M228.24,59.76l-32-32a6,6,0,0,0-8.48,0l-96,96A6,6,0,0,0,90,128v32a6,6,0,0,0,6,6h32a6,6,0,0,0,4.24-1.76l96-96A6,6,0,0,0,228.24,59.76ZM125.51,154H102V130.49l66-66L191.51,88ZM200,79.51,176.49,56,192,40.49,215.51,64ZM222,128v80a14,14,0,0,1-14,14H48a14,14,0,0,1-14-14V48A14,14,0,0,1,48,34h80a6,6,0,0,1,0,12H48a2,2,0,0,0-2,2V208a2,2,0,0,0,2,2H208a2,2,0,0,0,2-2V128a6,6,0,0,1,12,0Z"},null,-1),_l=[wl],Cl={key:4},Al=u("path",{d:"M229.66,58.34l-32-32a8,8,0,0,0-11.32,0l-96,96A8,8,0,0,0,88,128v32a8,8,0,0,0,8,8h32a8,8,0,0,0,5.66-2.34l96-96A8,8,0,0,0,229.66,58.34ZM124.69,152H104V131.31l64-64L188.69,88ZM200,76.69,179.31,56,192,43.31,212.69,64ZM224,128v80a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32h80a8,8,0,0,1,0,16H48V208H208V128a8,8,0,0,1,16,0Z"},null,-1),Zl=[Al],Ml={key:5},Sl=u("path",{d:"M226.83,61.17l-32-32a4,4,0,0,0-5.66,0l-96,96A4,4,0,0,0,92,128v32a4,4,0,0,0,4,4h32a4,4,0,0,0,2.83-1.17l96-96A4,4,0,0,0,226.83,61.17ZM126.34,156H100V129.66l68-68L194.34,88ZM200,82.34,173.66,56,192,37.66,218.34,64ZM220,128v80a12,12,0,0,1-12,12H48a12,12,0,0,1-12-12V48A12,12,0,0,1,48,36h80a4,4,0,0,1,0,8H48a4,4,0,0,0-4,4V208a4,4,0,0,0,4,4H208a4,4,0,0,0,4-4V128a4,4,0,0,1,8,0Z"},null,-1),Il=[Sl],Ll={name:"PhNotePencil"},zl=G({...Ll,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(H){const r=H,a=T("weight","regular"),k=T("size","1em"),p=T("color","currentColor"),d=T("mirrored",!1),i=b(()=>{var l;return(l=r.weight)!=null?l:a}),w=b(()=>{var l;return(l=r.size)!=null?l:k}),v=b(()=>{var l;return(l=r.color)!=null?l:p}),h=b(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:d?"scale(-1, 1)":void 0);return(l,Z)=>(t(),s("svg",ce({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:w.value,height:w.value,fill:v.value,transform:h.value},l.$attrs),[de(l.$slots,"default"),i.value==="bold"?(t(),s("g",vl,ml)):i.value==="duotone"?(t(),s("g",gl,bl)):i.value==="fill"?(t(),s("g",$l,kl)):i.value==="light"?(t(),s("g",Vl,_l)):i.value==="regular"?(t(),s("g",Cl,Zl)):i.value==="thin"?(t(),s("g",Ml,Il)):I("",!0)],16,pl))}}),Tl=["width","height","fill","transform"],Bl={key:0},Dl=u("path",{d:"M208,112H48a20,20,0,0,0-20,20v24a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V132A20,20,0,0,0,208,112Zm-4,40H52V136H204Zm4-116H48A20,20,0,0,0,28,56V80a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V56A20,20,0,0,0,208,36Zm-4,40H52V60H204ZM160,220a12,12,0,0,1-12,12h-8v8a12,12,0,0,1-24,0v-8h-8a12,12,0,0,1,0-24h8v-8a12,12,0,0,1,24,0v8h8A12,12,0,0,1,160,220Z"},null,-1),xl=[Dl],ql={key:1},Nl=u("path",{d:"M216,128v24a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V128a8,8,0,0,1,8-8H208A8,8,0,0,1,216,128Zm-8-80H48a8,8,0,0,0-8,8V80a8,8,0,0,0,8,8H208a8,8,0,0,0,8-8V56A8,8,0,0,0,208,48Z",opacity:"0.2"},null,-1),jl=u("path",{d:"M208,112H48a16,16,0,0,0-16,16v24a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V128A16,16,0,0,0,208,112Zm0,40H48V128H208v24Zm0-112H48A16,16,0,0,0,32,56V80A16,16,0,0,0,48,96H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40Zm0,40H48V56H208V80ZM160,216a8,8,0,0,1-8,8H136v16a8,8,0,0,1-16,0V224H104a8,8,0,0,1,0-16h16V192a8,8,0,0,1,16,0v16h16A8,8,0,0,1,160,216Z"},null,-1),Ul=[Nl,jl],Fl={key:2},El=u("path",{d:"M224,128v24a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V128a16,16,0,0,1,16-16H208A16,16,0,0,1,224,128ZM208,40H48A16,16,0,0,0,32,56V80A16,16,0,0,0,48,96H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40ZM152,208H136V192a8,8,0,0,0-16,0v16H104a8,8,0,0,0,0,16h16v16a8,8,0,0,0,16,0V224h16a8,8,0,0,0,0-16Z"},null,-1),Rl=[El],Kl={key:3},Pl=u("path",{d:"M208,114H48a14,14,0,0,0-14,14v24a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V128A14,14,0,0,0,208,114Zm2,38a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V128a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2ZM208,42H48A14,14,0,0,0,34,56V80A14,14,0,0,0,48,94H208a14,14,0,0,0,14-14V56A14,14,0,0,0,208,42Zm2,38a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V56a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2ZM158,216a6,6,0,0,1-6,6H134v18a6,6,0,0,1-12,0V222H104a6,6,0,0,1,0-12h18V192a6,6,0,0,1,12,0v18h18A6,6,0,0,1,158,216Z"},null,-1),Ol=[Pl],Wl={key:4},Gl=u("path",{d:"M208,112H48a16,16,0,0,0-16,16v24a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V128A16,16,0,0,0,208,112Zm0,40H48V128H208v24Zm0-112H48A16,16,0,0,0,32,56V80A16,16,0,0,0,48,96H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40Zm0,40H48V56H208V80ZM160,216a8,8,0,0,1-8,8H136v16a8,8,0,0,1-16,0V224H104a8,8,0,0,1,0-16h16V192a8,8,0,0,1,16,0v16h16A8,8,0,0,1,160,216Z"},null,-1),Ql=[Gl],Jl={key:5},Yl=u("path",{d:"M208,116H48a12,12,0,0,0-12,12v24a12,12,0,0,0,12,12H208a12,12,0,0,0,12-12V128A12,12,0,0,0,208,116Zm4,36a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V128a4,4,0,0,1,4-4H208a4,4,0,0,1,4,4ZM208,44H48A12,12,0,0,0,36,56V80A12,12,0,0,0,48,92H208a12,12,0,0,0,12-12V56A12,12,0,0,0,208,44Zm4,36a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V56a4,4,0,0,1,4-4H208a4,4,0,0,1,4,4ZM156,216a4,4,0,0,1-4,4H132v20a4,4,0,0,1-8,0V220H104a4,4,0,0,1,0-8h20V192a4,4,0,0,1,8,0v20h20A4,4,0,0,1,156,216Z"},null,-1),Xl=[Yl],e1={name:"PhRowsPlusBottom"},Qe=G({...e1,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(H){const r=H,a=T("weight","regular"),k=T("size","1em"),p=T("color","currentColor"),d=T("mirrored",!1),i=b(()=>{var l;return(l=r.weight)!=null?l:a}),w=b(()=>{var l;return(l=r.size)!=null?l:k}),v=b(()=>{var l;return(l=r.color)!=null?l:p}),h=b(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:d?"scale(-1, 1)":void 0);return(l,Z)=>(t(),s("svg",ce({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:w.value,height:w.value,fill:v.value,transform:h.value},l.$attrs),[de(l.$slots,"default"),i.value==="bold"?(t(),s("g",Bl,xl)):i.value==="duotone"?(t(),s("g",ql,Ul)):i.value==="fill"?(t(),s("g",Fl,Rl)):i.value==="light"?(t(),s("g",Kl,Ol)):i.value==="regular"?(t(),s("g",Wl,Ql)):i.value==="thin"?(t(),s("g",Jl,Xl)):I("",!0)],16,Tl))}}),a1={class:"related-tables"},t1={class:"related-section"},l1={class:"relation-info"},n1={class:"related-tables"},o1={class:"related-section"},r1={class:"relation-info"},u1=G({__name:"RelatedTables",props:{table:{}},setup(H){const r=H,a=fe(),k=Ie(),p=a.params.projectId,{tables:d,loading:i}=za(p),w=b(()=>{const Z=r.table.getColumns().find($=>$.primaryKey);return(Z==null?void 0:Z.name)||"id"}),v=b(()=>{if(!d.value.length)return{referencingTables:[],referencedTables:[]};const Z=d.value.filter(g=>g.id!==r.table.id),$=[];for(const g of Z){const x=g.getColumns().filter(B=>B.foreignKey);for(const B of x){if(!B.foreignKey)continue;let j;for(const Q of d.value)if(j=Q.getColumns().find(S=>{var A;return S.id===((A=B.foreignKey)==null?void 0:A.columnId)}),j)break;(j==null?void 0:j.tableId)===r.table.id&&$.push({table:g,column:B})}}const M=[],L=r.table.getColumns().filter(g=>g.foreignKey);for(const g of L){if(!g.foreignKey)continue;let x,B;for(const j of d.value)if(B=j.getColumns().find(Q=>{var S;return Q.id===((S=g.foreignKey)==null?void 0:S.columnId)}),B){x=j;break}x&&B&&M.push({table:x,sourceColumn:g,targetColumn:B})}return{referencingTables:$,referencedTables:M}}),h=b(()=>{const Z=new Map;for(const $ of v.value.referencingTables)Z.has($.table.id)||Z.set($.table.id,{tableId:$.table.id,tableName:$.table.name,description:`${$.column.name} \u2192 ${w.value}`});for(const $ of v.value.referencedTables)Z.has($.table.id)||Z.set($.table.id,{tableId:$.table.id,tableName:$.table.name,description:`${$.sourceColumn.name} \u2192 ${$.targetColumn.name}`});return Array.from(Z.values())}),l=Z=>{k.push({name:"tableEditor",params:{projectId:p,tableId:Z}})};return(Z,$)=>e(i)?(t(),_(Me,{key:0,"full-width":""},{default:n(()=>[u("div",a1,[u("div",t1,[o(e(fa),null,{default:n(()=>[R("Related tables")]),_:1}),o(e(P),{gap:"middle",wrap:"wrap"},{default:n(()=>[(t(),s(ae,null,le(3,M=>o(e(Oe),{key:M,class:"related-table-card loading-card"},{title:n(()=>[o(e(P),{justify:"space-between",align:"center"},{default:n(()=>[o(e(We),{active:!0,paragraph:!1,title:{width:"120px"}}),o(e(La),{size:16,style:{opacity:"0.3"}})]),_:1})]),default:n(()=>[u("p",l1,[o(e(Ge),{size:16,style:{opacity:"0.3"}}),o(e(We),{active:!0,paragraph:!1,title:{width:"150px"}})])]),_:2},1024)),64))]),_:1})])])]),_:1})):h.value.length>0?(t(),_(Me,{key:1,"full-width":""},{default:n(()=>[u("div",n1,[u("div",o1,[u("h3",null,"Related tables ("+W(h.value.length)+")",1),o(e(P),{gap:"middle",wrap:"wrap"},{default:n(()=>[(t(!0),s(ae,null,le(h.value,M=>(t(),_(e(Oe),{key:M.tableId,title:M.tableName,class:"related-table-card",hoverable:"",onClick:L=>l(M.tableId)},{default:n(()=>[u("p",r1,[o(e(Ge),{size:16}),u("span",null,W(M.description),1)])]),_:2},1032,["title","onClick"]))),128))]),_:1})])])]),_:1})):I("",!0)}});const i1=Le(u1,[["__scopeId","data-v-d16c88ca"]]),s1=G({__name:"AddData",props:{open:{type:Boolean},editableItem:{},table:{},loading:{type:Boolean}},emits:["save","close","update-nullable","record-change"],setup(H,{emit:r}){return(a,k)=>(t(),_(e(Be),{title:"Data",width:720,open:a.open,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:k[2]||(k[2]=p=>r("close"))},{extra:n(()=>[o(e(xe),null,{default:n(()=>[o(e(ee),{onClick:k[0]||(k[0]=p=>r("close"))},{default:n(()=>[R("Cancel")]),_:1}),o(e(ee),{type:"primary",loading:a.loading,onClick:k[1]||(k[1]=p=>r("save"))},{default:n(()=>[R("Save")]),_:1},8,["loading"])]),_:1})]),default:n(()=>[o(e(ze),{model:a.editableItem,layout:"vertical"},{default:n(()=>[(t(!0),s(ae,null,le(a.table.getUnprotectedColumns(),p=>(t(),_(e(J),{key:p.id,label:p.name,required:!p.nullable},{default:n(()=>[a.editableItem?(t(),_(e(se),{key:0,placeholder:p.type,value:a.editableItem[p.name],disabled:a.editableItem[p.name]===null,"onUpdate:value":d=>r("record-change",p.name,d)},ma({_:2},[p.nullable?{name:"addonAfter",fn:n(()=>[o(e(ga),{checked:a.editableItem[p.name]===null,"onUpdate:checked":d=>r("update-nullable",p.name,d)},{default:n(()=>[R(" NULL ")]),_:2},1032,["checked","onUpdate:checked"])]),key:"0"}:void 0]),1032,["placeholder","value","disabled","onUpdate:value"])):I("",!0)]),_:2},1032,["label","required"]))),128))]),_:1},8,["model"])]),_:1},8,["open"]))}}),na=(H,r)=>r.includes(H)?{status:"error",help:"There already is a column with this name in the table"}:{status:""},d1=G({__name:"NewColumn",props:{open:{type:Boolean},table:{}},emits:["created","cancel"],setup(H,{emit:r}){const a=H,p=fe().params.projectId,d=b(()=>{var A;return((A=a.table)==null?void 0:A.getColumns().map(c=>c.name))||[]}),i=b(()=>na(v.value.name,d.value)),w={name:"",type:null,default:"",nullable:!0,unique:!1},v=N(w),h=()=>{v.value={...w}},l=N([{value:"reference",label:"reference",isLeaf:!1},...aa.map(A=>({value:A,label:A,isLeaf:!0}))]),Z=A=>{if(!A)return;const c=A[A.length-1];switch(A.length){case 0:return;case 1:c.loading=!0,ne.list(p).then(F=>{c.children=F.map(Y=>({value:Y.id,label:Y.name,isLeaf:!1})),c.loading=!1});return;case 2:c.loading=!0,ne.get(p,c.value).then(F=>{c.children=F.getColumns().map(Y=>({type:Y.type,value:Y.id,label:Y.name,isLeaf:!0})),c.loading=!1});return}},$=(A,c)=>{if(!!A){if(A.length===1){v.value.type=A[0],v.value.foreignKey=void 0;return}if(A.length===3){const F=c[c.length-1];v.value.type=F.type,v.value.foreignKey={columnId:F.value}}}},M=A=>{const c=A.selectedOptions;return c?c.length===1?c[0].label:c.length===3?`reference to ${c[1].label}(${c[2].label})`:"":"Select type"},g=N({...{status:"success",message:"",fakeLoading:!1}}),x=()=>{g.value.fakeLoading=!0,j()};he(()=>v.value.type,()=>{!v.value.type||(v.value.default=Ma[v.value.type]||"",x())});const j=$e.exports.debounce(async()=>{if(!v.value.default){g.value.status="success",g.value.message="",g.value.fakeLoading=!1;return}const A=`select (${v.value.default})::${v.value.type} `;De.executeQuery(p,A,[]).then(c=>{g.value.status=c.errors.length>0?"error":"success",g.value.message=c.errors[0]||"",g.value.fakeLoading=!1})},500);function Q(){r("cancel")}async function S(){if(!!a.table&&!(!v.value.name||!v.value.type))try{await a.table.addColumn(v.value),h(),r("created")}catch(A){A instanceof Error&&ke("Database error",A.message)}}return(A,c)=>(t(),_(e(Be),{title:"New column",width:720,open:a.open,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:Q},{extra:n(()=>[o(e(xe),null,{default:n(()=>[o(e(ee),{onClick:Q},{default:n(()=>[R("Cancel")]),_:1}),o(e(ee),{type:"primary",onClick:S},{default:n(()=>[R("Save")]),_:1})]),_:1})]),default:n(()=>[o(e(ze),{model:v.value,layout:"vertical"},{default:n(()=>[o(e(J),{key:"name",label:"Name",required:"","validate-status":i.value.status,help:i.value.help},{default:n(()=>[o(e(se),{value:v.value.name,"onUpdate:value":c[0]||(c[0]=F=>v.value.name=F)},null,8,["value"])]),_:1},8,["validate-status","help"]),o(e(J),{key:"type",label:"Type",required:""},{default:n(()=>[o(e(la),{options:l.value,"load-data":Z,"display-render":M,"allow-clear":!1,onChange:$},null,8,["options"])]),_:1}),o(e(J),{key:"default-value",label:"Default value","validate-status":g.value.status,help:g.value.message},{default:n(()=>[o(e(se),{value:v.value.default,"onUpdate:value":c[1]||(c[1]=F=>v.value.default=F),placeholder:"NULL",onInput:x},{suffix:n(()=>[g.value.fakeLoading?(t(),_(e(He),{key:0})):I("",!0),!g.value.fakeLoading&&g.value.status==="success"?(t(),_(e(Xe),{key:1,size:"18"})):I("",!0),!g.value.fakeLoading&&g.value.status==="error"?(t(),_(e(ta),{key:2,size:"18"})):I("",!0)]),_:1},8,["value"])]),_:1},8,["validate-status","help"]),o(e(J),{key:"nullable",label:"Nullable"},{default:n(()=>[o(e(ge),{checked:v.value.nullable,"onUpdate:checked":c[2]||(c[2]=F=>v.value.nullable=F)},null,8,["checked"])]),_:1}),o(e(J),{key:"unique",label:"Unique"},{default:n(()=>[o(e(ge),{checked:v.value.unique,"onUpdate:checked":c[3]||(c[3]=F=>v.value.unique=F)},null,8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]))}}),c1={class:"icon"},p1=G({__name:"OrderByIcon",props:{column:{},orderBy:{}},emits:["reorder"],setup(H,{emit:r}){return(a,k)=>{var p,d,i;return t(),s("div",c1,[((p=a.orderBy)==null?void 0:p.column)!==String(a.column.title)?(t(),_(e(Ba),{key:0,size:"16",onClick:k[0]||(k[0]=w=>r("reorder",String(a.column.title)))})):I("",!0),((d=a.orderBy)==null?void 0:d.column)===String(a.column.title)&&a.orderBy.direction==="asc"?(t(),_(e(d0),{key:1,size:"16",onClick:k[1]||(k[1]=w=>r("reorder",String(a.column.title)))})):I("",!0),((i=a.orderBy)==null?void 0:i.column)===String(a.column.title)&&a.orderBy.direction==="desc"?(t(),_(e(Da),{key:2,size:"16",onClick:k[2]||(k[2]=w=>r("reorder",String(a.column.title)))})):I("",!0)])}}});const Je=Le(p1,[["__scopeId","data-v-6ae5cef6"]]);function Ye(H){return`"${H.replace(/"/g,'""')}"`}function v1(H){return H==null?"NULL":`'${String(H).replace(/'/g,"''")}'`}function f1(H,r){if(H.type==="search")return!H.q||H.q.trim()==="","";if(H.type==="and"){const a=H.conditions.filter(d=>d.value!==""&&d.value!==null);if(a.length===0)return"";const k=a.map(d=>{const i=Ye(d.field),w=v1(d.value);return`${i} = ${w}`});return`SELECT * FROM ${Ye(r)} WHERE ${k.join(" AND ")}`}return""}function m1(H,r){const a=N(r||{type:"search",q:""}),k=b(()=>H.value.getColumns().filter(M=>a.value.type==="and"&&!a.value.conditions.some(L=>L.field===M.name))),p=b(()=>H.value.getColumns().filter(M=>a.value.type==="and"&&!a.value.conditions.some(L=>L.field===M.name)));function d(){a.value={type:"and",conditions:[{type:"eq",field:"id",value:""}]}}function i(M){M==="search"?a.value={type:"search",q:""}:d()}function w(M){a.value.type==="and"&&a.value.conditions.push({type:"eq",field:String(M),value:""})}function v(M){a.value.type==="and"&&(a.value.conditions=a.value.conditions.filter(L=>L.field!==M))}function h(M){a.value.type==="search"&&(a.value={type:"search",q:M})}function l(M){if(a.value.type!=="and")return;const L=a.value.conditions.find(g=>g.field===M);L&&(L.field=M)}function Z(M,L){if(a.value.type!=="and")return;const g=a.value.conditions.find(x=>x.field===M);g&&(g.value=L)}function $(){return f1(a.value,H.value.name)}return{searchValue:a,filteredColumns:k,nonFilteredColumns:p,changeSearchType:i,addCondition:w,removeCondition:v,updateSearch:h,updateConditionField:l,updateConditionValue:Z,getSqlQuery:$}}const g1=G({__name:"TableFilter",props:{search:{},table:{},data:{}},emits:["update:search"],setup(H,{emit:r}){const a=H,k=fe(),p=b(()=>a.table),{searchValue:d,filteredColumns:i,nonFilteredColumns:w,changeSearchType:v,addCondition:h,removeCondition:l,updateSearch:Z,updateConditionField:$,updateConditionValue:M,getSqlQuery:L}=m1(p,a.search),g=[{label:"Search",value:"search"},{label:"Advanced",value:"and"}];function x(c){v(c),r("update:search",d.value)}function B(c){h(String(c)),r("update:search",d.value)}function j(c){l(c),r("update:search",d.value)}function Q(c){Z(c),r("update:search",d.value)}function S(c){$(c),r("update:search",d.value)}const A=(c,F)=>{M(c,F),r("update:search",d.value)};return he(()=>a.search,c=>{d.value=c},{deep:!0}),(c,F)=>{const Y=Te("RouterLink");return t(),_(e(P),{vertical:"",align:"start",gap:"small"},{default:n(()=>[o(e(P),{align:"center",justify:"space-between",style:{width:"100%"}},{default:n(()=>[o(e(Aa),{options:g,value:e(d).type,"onUpdate:value":x},null,8,["value"]),e(d).type==="and"?(t(),_(Y,{key:0,to:{name:"sql",params:{projectId:e(k).params.projectId},query:{filter:e(L)()}}},{default:n(()=>[o(ie,{type:"text",underline:""},{default:n(()=>[R("Edit as SQL")]),_:1})]),_:1},8,["to"])):I("",!0)]),_:1}),e(d).type==="search"?(t(),_(e(P),{key:0},{default:n(()=>[o(e(ha),{value:e(d).q,"onUpdate:value":Q},null,8,["value"])]),_:1})):e(d).type==="and"?(t(),_(e(P),{key:1,vertical:"",gap:"small"},{default:n(()=>[(t(!0),s(ae,null,le(e(d).conditions,E=>(t(),_(e(P),{key:E.field,gap:"large",align:"center"},{default:n(()=>[o(e(Ze),{value:E.field,"onUpdate:value":[O=>E.field=O,O=>S(E.field)],style:{width:"120px"}},{default:n(()=>[(t(!0),s(ae,null,le(e(i),O=>(t(),_(e(Fe),{key:O.id,value:O.name},{default:n(()=>[R(W(O.name),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["value","onUpdate:value"]),o(e(Rt)),o(e(se),{value:E.value,"onUpdate:value":[O=>E.value=O,O=>A(E.field,O)],style:{width:"120px"}},null,8,["value","onUpdate:value"]),o(e(ya),{style:{cursor:"pointer"},onClick:O=>j(E.field)},null,8,["onClick"])]),_:2},1024))),128)),e(w)[0]?(t(),_(e(P),{key:0,justify:"space-between"},{default:n(()=>[o(e(Ze),{style:{width:"120px"},value:"","onUpdate:value":B},{default:n(()=>[(t(!0),s(ae,null,le(e(w),E=>(t(),_(e(Fe),{key:E.id,value:E.name},{default:n(()=>[R(W(E.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})):I("",!0)]),_:1})):I("",!0)]),_:1})}}}),h1={class:"twin-container"},y1={class:"fullwidth-input"},b1={class:"fullwidth-input"},$1={class:"using-container"},H1={class:"fullwidth-input"},k1=G({__name:"UpdateColumn",props:{open:{type:Boolean},table:{},column:{}},emits:["updated","cancel"],setup(H,{emit:r}){const a=H,p=fe().params.projectId,d=N(a.column.type);ea(async()=>{if(!a.column.foreignKey)return;d.value="loading...";const f=await ne.fromColumnId(p,a.column.foreignKey.columnId),y=f.getColumn(a.column.foreignKey.columnId);d.value=`reference to ${f.name}(${y.name})`});const i=b(()=>{var f;return((f=a.table)==null?void 0:f.getColumns().map(y=>y.record.initialState.name))||[]}),w=b(()=>a.column.name===a.column.record.initialState.name?{status:"",help:""}:na(a.column.name,i.value)),{result:v,loading:h}=Se(async()=>a.table.select({},10,0).then(({total:f})=>f));function l(){a.column.record.resetChanges(),r("cancel")}const $=N({status:"success",message:"",fakeLoading:!1}),M=()=>{$.value.fakeLoading=!0,L()},L=$e.exports.debounce(async()=>{if(!a.column.default){$.value.status="success",$.value.message="",$.value.fakeLoading=!1;return}const f=`select (${a.column.default})::${a.column.type} `,y=await De.executeQuery(p,f,[]);$.value.status=y.errors.length>0?"error":"success",$.value.message=y.errors[0]||"",$.value.fakeLoading=!1},500),g=N([{value:"reference",label:"reference",isLeaf:!1},...aa.filter(f=>f!==a.column.type).map(f=>({value:f,label:f,isLeaf:!0}))]),x=f=>{if(!f)return;const y=f[f.length-1];switch(f.length){case 0:return;case 1:y.loading=!0,ne.list(p).then(q=>{y.children=q.map(ue=>({value:ue.id,label:ue.name,isLeaf:!1})),y.loading=!1});return;case 2:y.loading=!0,ne.get(p,y.value).then(q=>{y.children=q.getColumns().map(ue=>({type:ue.type,value:ue.id,label:ue.name,isLeaf:!0})),y.loading=!1});return}},B=f=>{const y=f.selectedOptions;return y?y.length===1?y[0].label:y.length===3?`reference to ${y[1].label}(${y[2].label})`:"":"Select type"},j=(f,y)=>{if(!!f){if(f.length===1){a.column.type=f[0],a.column.foreignKey=null;return}if(f.length===3){if(a.column.foreignKey&&a.column.foreignKey.columnId===f[2])return;const q=y[y.length-1];a.column.type=q.type,a.column.foreignKey={columnId:q.value}}}};async function Q(f){await Na("Are you sure you want to delete this column and all its data?")&&await S(f)}async function S(f){var y,q;await((q=(y=a.table)==null?void 0:y.getColumn(f))==null?void 0:q.delete()),r("updated")}const A=()=>v.value===0||h.value?!1:a.column.record.hasChangesDeep("type"),c=N({type:"default"}),F=()=>{a.column.type=a.column.record.initialState.type,c.value={type:"default"}};function Y(f,y){return y==="varchar"||f==="int"&&y==="boolean"||f==="boolean"&&y==="int"}he(()=>a.column.type,()=>{M(),O.value||(c.value={type:"user-defined",using:pe.value,mandatory:!0})});const O=b(()=>c.value.type==="default"&&Y(a.column.record.initialState.type,a.column.type)),ye=b(()=>!Y(a.column.record.initialState.type,a.column.type));function oe(f){f?c.value={type:"default"}:c.value={type:"user-defined",using:pe.value,mandatory:!1}}function Ve(f){if(c.value.type==="default")throw new Error("Can't change using when using default casting");c.value.using=f!=null?f:""}const re=()=>ye.value?!0:A()&&c.value.type==="user-defined",pe=b(()=>`${a.column.record.initialState.name}::${a.column.type}`);async function we(){if(!a.column)return;let f=c.value.type==="default"?pe.value:c.value.using;v.value===0&&(f=`${a.column.record.initialState.name}::text::${a.column.type}`);try{await a.column.update(f),r("updated")}catch(y){y instanceof Error&&ke("Database error",y.message)}}return(f,y)=>(t(),_(e(Be),{title:"Edit column",width:720,open:f.open,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:l},{extra:n(()=>[o(e(xe),null,{default:n(()=>[o(e(ee),{onClick:l},{default:n(()=>[R("Cancel")]),_:1}),o(e(ee),{type:"primary",onClick:we},{default:n(()=>[R("Save")]),_:1})]),_:1})]),footer:n(()=>[o(ie,{danger:"",onClick:y[7]||(y[7]=q=>Q(String(f.column.id)))},{default:n(()=>[R("Delete")]),_:1})]),default:n(()=>[o(e(ze),{model:f.column,layout:"vertical"},{default:n(()=>[o(e(J),{key:"name",label:"Name","validate-status":w.value.status,help:w.value.help},{default:n(()=>[o(e(se),{value:f.column.name,"onUpdate:value":y[0]||(y[0]=q=>f.column.name=q)},null,8,["value"])]),_:1},8,["validate-status","help"]),u("div",h1,[u("span",y1,[o(e(J),{key:"type",label:"Current Type"},{default:n(()=>[o(e(Ze),{value:d.value,"onUpdate:value":y[1]||(y[1]=q=>d.value=q),"default-active-first-option":"",disabled:""},null,8,["value"])]),_:1})]),o(e(xa),{class:"right-arrow"}),u("span",b1,[o(e(J),{key:"new-type",label:"New Type"},{default:n(()=>[o(e(la),{options:g.value,"load-data":x,"display-render":B,"allow-clear":!0,onClear:F,onChange:j},null,8,["options"])]),_:1})])]),o(e(J),{key:"default-value",label:"Default value","validate-status":$.value.status,help:$.value.message},{default:n(()=>[o(e(se),{value:f.column.default,"onUpdate:value":y[2]||(y[2]=q=>f.column.default=q),placeholder:"NULL",onInput:M},{suffix:n(()=>[$.value.fakeLoading?(t(),_(e(He),{key:0,size:"small"})):I("",!0),!$.value.fakeLoading&&$.value.status==="success"?(t(),_(e(Xe),{key:1,size:18})):I("",!0),!$.value.fakeLoading&&$.value.status==="error"?(t(),_(e(ta),{key:2,size:18})):I("",!0)]),_:1},8,["value"])]),_:1},8,["validate-status","help"]),u("div",$1,[A()?(t(),_(e(J),{key:"default-casting",label:"Use default casting"},{default:n(()=>[o(e(ge),{checked:O.value,disabled:ye.value,"onUpdate:checked":y[3]||(y[3]=q=>oe(!!q))},null,8,["checked","disabled"])]),_:1})):I("",!0),u("span",H1,[A()?(t(),_(e(J),{key:"using",label:"Using"},{default:n(()=>[o(e(se),{value:c.value.type==="user-defined"?c.value.using:pe.value,disabled:!re(),onInput:y[4]||(y[4]=q=>Ve(q.target.value))},null,8,["value","disabled"])]),_:1})):I("",!0)])]),o(e(P),null,{default:n(()=>[o(e(J),{key:"nullable",label:"Nullable"},{default:n(()=>[o(e(ge),{checked:f.column.nullable,"onUpdate:checked":y[5]||(y[5]=q=>f.column.nullable=q)},null,8,["checked"])]),_:1}),o(e(J),{key:"unique",label:"Unique"},{default:n(()=>[o(e(ge),{checked:f.column.unique,"onUpdate:checked":y[6]||(y[6]=q=>f.column.unique=q)},null,8,["checked"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]))}});const V1=Le(k1,[["__scopeId","data-v-5f7e2cd2"]]),w1={style:{overflow:"hidden","white-space":"wrap"}},_1={key:1},C1={key:0,class:"table-row null"},A1={class:"foreign-key-popover"},Z1={key:0,class:"popover-loading"},M1={class:"field-label"},S1={class:"foreign-key-popover"},I1={key:0,class:"popover-loading"},L1={class:"field-label"},z1={class:"field-value"},T1={key:2,class:"foreign-key-error"},B1={key:1,class:"field-value"},D1={key:2,class:"foreign-key-error"},x1={class:"button-container"},q1={class:"button-container"},N1={class:"button-container"},j1={class:"button-container"},U1=G({__name:"TableData",props:{table:{},loading:{type:Boolean}},emits:["refresh"],setup(H,{emit:r}){var Ne;const a=H,k=N(1),p=N(10),d=b(()=>{var m,V;return{total:(V=(m=oe.value)==null?void 0:m.total)!=null?V:0,current:k.value,pageSize:p.value,totalBoundaryShowSizeChanger:10,showSizeChanger:!0,pageSizeOptions:["10","25","50","100"],onChange:async(D,C)=>{k.value=D,p.value=C,await re()}}}),i=N([]),w=N(!1),v=N(null),h=N(null),l=N(!1),Z=N(null),$=fe(),M=Ie(),L=N(typeof $.query.q=="string"?$.query.q:""),g=b(()=>{try{return JSON.parse($.query.where)}catch{return{}}}),x=N(Object.keys(g.value).length>0?{type:"and",conditions:Object.entries(g.value).reduce((m,[V,D])=>[...m,{type:"eq",field:V,value:D}],[])}:{type:"search",q:L.value}),B=b(()=>x.value.type==="search"?x.value.q:""),j=b(()=>x.value.type==="search"?{}:x.value.conditions.reduce((m,V)=>({...m,[V.field]:V.value}),{}));function Q(m){m.type==="search"?M.replace({query:{q:m.q}}):M.replace({query:{where:JSON.stringify(j.value)}}),k.value=1,re()}const S=N({type:"idle"});function A(){S.value={type:"idle"}}async function c(){A(),r("refresh")}he(()=>a.table,()=>{ra(),re()});function F(){S.value={type:"creating"}}const Y=m=>{if(!a.table)throw new Error("Table not found");S.value={type:"editing",column:a.table.getColumn(m)}},E=N(null),O=m=>{var V;((V=E.value)==null?void 0:V.column)===m?E.value={column:m,direction:E.value.direction==="asc"?"desc":"asc"}:E.value={column:m,direction:"asc"},re()},ye=b(()=>{var m;return((m=oe.value)==null?void 0:m.rows.length)===1}),{result:oe,loading:Ve,refetch:re}=Se(async()=>{const[{rows:m,total:V},D]=await Promise.all([a.table.select(j.value,(k.value-1)*p.value,p.value,B.value,E.value||void 0),Promise.all(a.table.getColumns().filter(C=>C.foreignKey).map(C=>ne.fromColumnId($.params.projectId,C.foreignKey.columnId).then(K=>[C.name,K])))]);return{rows:m,total:V,columns:D.reduce((C,[K,U])=>({...C,[K]:U}),{})}}),pe=(m,V)=>{var U,X;const D=(U=a.table)==null?void 0:U.getColumns().find(z=>z.name===m);if(!D)return"";const C=(X=oe.value)==null?void 0:X.columns[D.name],K=C==null?void 0:C.getColumns().find(z=>{var te;return z.id===((te=D.foreignKey)==null?void 0:te.columnId)});return!C||!K?"":{name:"tableEditor",params:{projectId:$.params.projectId,tableId:C.id},query:{where:JSON.stringify({[K.name]:V})}}},we=async(m,V)=>{var D;w.value=!0,v.value=null,h.value=null;try{const C=(D=a.table)==null?void 0:D.getColumns().find(z=>z.name===m);if(!C||!C.foreignKey)return;const K=await Pe.fromID($.params.projectId,C.foreignKey.columnId),U=await ne.get($.params.projectId,K.tableId),X=await U.select({[K.name]:V},0,1,"");X.rows.length>0&&(v.value=X.rows[0],h.value=U)}catch(C){console.error("Error loading foreign key data:",C)}finally{w.value=!1}},f=m=>{if(!h.value)return!1;const V=h.value.getColumns().find(D=>D.name===m);return!!(V!=null&&V.foreignKey)},y=async(m,V)=>{if(!!h.value){l.value=!0,Z.value=null;try{const D=h.value.getColumns().find(X=>X.name===m);if(!D||!D.foreignKey)return;const C=await Pe.fromID($.params.projectId,D.foreignKey.columnId),U=await(await ne.get($.params.projectId,C.tableId)).select({[C.name]:V},0,1,"");U.rows.length>0&&(Z.value=U.rows[0])}catch(D){console.error("Error loading nested foreign key data:",D)}finally{l.value=!1}}},q=(m,V)=>{S.value.type==="adding"&&(S.value.editableItem[m]=V)},ue=(m,V)=>{S.value.type==="adding"&&(S.value.editableItem[m]=V?null:"")},qe=()=>[...a.table.getColumns().map(m=>{var V;return{key:(V=m.id)!=null?V:"",title:m.name,dataIndex:m.name,width:220,resizable:!0,ellipsis:!1}}),{key:"action",title:"",fixed:"right",width:100,align:"center",resizable:!1,ellipsis:!1}],oa=qe(),ve=N(oa),ra=()=>ve.value=qe();function ua(m,V){ve.value=ve.value.map(D=>D.key===V.key?{...D,width:m}:D)}const _e=b(()=>{var m;return((m=oe.value)==null?void 0:m.rows.map(V=>({key:V.id,...V})))||[]});let ia=ba((Ne=a.table)==null?void 0:Ne.getUnprotectedColumns().reduce((m,V)=>({...m,[V.name]:""}),{}));const Ce=N(!1);async function sa(){if(!(!a.table||!ia||S.value.type!=="adding")){Ce.value=!0;try{S.value.editableItem.id&&(typeof S.value.editableItem.id=="string"||typeof S.value.editableItem.id=="number")?await a.table.updateRow(S.value.editableItem.id.toString(),S.value.editableItem):await a.table.insertRow(S.value.editableItem),re(),A()}catch(m){m instanceof Error&&ke("Database error",m.message)}finally{Ce.value=!1}}}const da=async m=>{if(!(!oe.value||!oe.value.rows.find(V=>V.id===m)))try{await a.table.deleteRow(m),ye.value&&(k.value=Math.max(1,k.value-1)),re()}catch(V){V instanceof Error&&ke("Database error",V.message)}},ca=m=>{var X;const V=(X=_e.value)==null?void 0:X.filter(z=>m===z.key)[0],D=a.table.getColumns(),C=D.map(z=>z.name),K=D.filter(z=>z.type==="json").map(z=>z.name),U=$e.exports.pick($e.exports.cloneDeep(V),C);K.forEach(z=>{U[z]&&(U[z]=JSON.stringify(U[z]))}),S.value={type:"adding",editableItem:U}};return(m,V)=>{const D=Te("RouterLink");return t(),_(Me,{"full-width":""},{default:n(()=>[o(e(P),{justify:"space-between",style:{"margin-bottom":"16px"},gap:"middle"},{default:n(()=>[o(g1,{search:x.value,"onUpdate:search":[V[0]||(V[0]=C=>x.value=C),Q],table:m.table,data:_e.value},null,8,["search","table","data"]),o(e(P),{justify:"flex-end",gap:"middle"},{default:n(()=>[o(ie,{type:"primary",onClick:F},{default:n(()=>[o(e(L0)),R("Create column ")]),_:1}),ve.value.length===3?(t(),_(e(me),{key:0,title:"Create your first column before adding data"},{default:n(()=>[o(ie,{disabled:!0,onClick:V[1]||(V[1]=C=>S.value={type:"adding",editableItem:{}})},{default:n(()=>[o(e(Qe)),R("Add data ")]),_:1})]),_:1})):(t(),_(ie,{key:1,onClick:V[2]||(V[2]=C=>S.value={type:"adding",editableItem:{}})},{default:n(()=>[o(e(Qe)),R("Add data ")]),_:1}))]),_:1})]),_:1}),o(e(Va),{columns:ve.value,"data-source":_e.value,pagination:d.value,bordered:"",loading:e(Ve)||m.loading,scroll:{x:1e3,y:720},size:"small",onResizeColumn:ua},{headerCell:n(({column:C})=>[C.title!=="id"&&C.title!=="created_at"&&C.key!=="action"?(t(),_(e(P),{key:0,align:"center",justify:"space-between",gap:"small"},{default:n(()=>[o(e(P),{style:{overflow:"hidden","white-space":"wrap"},align:"center",gap:"small"},{default:n(()=>[u("span",w1,W(C.title),1),o(e(P),null,{default:n(()=>[o(Je,{column:C,"order-by":E.value,onReorder:O},null,8,["column","order-by"])]),_:2},1024)]),_:2},1024),o(ie,{type:"text",onClick:K=>Y(String(C.key))},{default:n(()=>[o(e(Ta),{size:"18"})]),_:2},1032,["onClick"])]),_:2},1024)):(t(),s("span",_1,[o(e(P),{align:"center",gap:"small"},{default:n(()=>[R(W(C.title)+" ",1),C.key!=="action"?(t(),_(Je,{key:0,column:C,"order-by":E.value,onReorder:O},null,8,["column","order-by"])):I("",!0)]),_:2},1024)]))]),bodyCell:n(({column:C,text:K,record:U})=>{var X;return[ve.value.map(z=>z.title).includes(C.dataIndex)?(t(),s(ae,{key:0},[K===null?(t(),s("div",C1,"NULL")):(X=m.table.getColumns().find(z=>z.name===C.dataIndex))!=null&&X.foreignKey?(t(),_(e(Ee),{key:1,trigger:["hover"],placement:"right",onMouseenter:z=>we(C.dataIndex,K)},{content:n(()=>[u("div",A1,[w.value?(t(),s("div",Z1,[o(e(He),{size:"small"})])):v.value&&h.value?(t(!0),s(ae,{key:1},le(v.value,(z,te)=>(t(),s("div",{key:te,class:"foreign-key-field"},[u("div",M1,W(te),1),f(te)&&z!==null?(t(),_(e(Ee),{key:0,trigger:["hover"],placement:"right",onMouseenter:Ae=>y(te,z)},{content:n(()=>[u("div",S1,[l.value?(t(),s("div",I1,[o(e(He),{size:"small"})])):Z.value?(t(!0),s(ae,{key:1},le(Z.value,(Ae,je)=>(t(),s("div",{key:je,class:"foreign-key-field"},[u("div",L1,W(je),1),u("div",z1,W(Ae!==null?Ae:""),1)]))),128)):(t(),s("div",T1,"Failed to load data"))])]),default:n(()=>[o(e(Re),{class:"nested-fk-tag",color:"blue"},{default:n(()=>[R(W(z),1)]),_:2},1024)]),_:2},1032,["onMouseenter"])):(t(),s("div",B1,W(z!==null?z:""),1))]))),128)):(t(),s("div",D1,"Failed to load data"))])]),default:n(()=>[o(e(Re),{color:"blue",class:"foreign-key-tag"},{default:n(()=>[o(D,{to:pe(C.dataIndex,K),target:"_blank",class:"foreign-key-link"},{default:n(()=>[R(W(K),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2},1032,["onMouseenter"])):(t(),s("div",{key:2,class:$a(["table-row",{expanded:i.value.includes(U.id)}])},W(K),3))],64)):I("",!0),C.key==="action"?(t(),_(e(P),{key:1,gap:"small",justify:"center"},{default:n(()=>[i.value.includes(U.id)?(t(),_(e(ee),{key:0,class:"icons",onClick:z=>i.value=i.value.filter(te=>te!==U.id)},{icon:n(()=>[o(e(me),{title:"Collapse"},{default:n(()=>[u("div",x1,[o(e(et),{size:15})])]),_:1})]),_:2},1032,["onClick"])):(t(),_(e(ee),{key:1,onClick:z=>i.value.push(U.id)},{icon:n(()=>[o(e(me),{title:"Expand"},{default:n(()=>[u("div",q1,[o(e(kt),{size:15})])]),_:1})]),_:2},1032,["onClick"])),o(e(ee),{onClick:z=>ca(U.id)},{icon:n(()=>[o(e(me),{title:"Edit"},{default:n(()=>[u("div",N1,[o(e(qa),{size:15})])]),_:1})]),_:2},1032,["onClick"]),o(e(Ha),{title:"Sure to delete?",onConfirm:z=>da(U.id)},{default:n(()=>[o(e(ee),null,{icon:n(()=>[o(e(me),{title:"Delete"},{default:n(()=>[u("div",j1,[o(e(ka),{size:15})])]),_:1})]),_:1})]),_:2},1032,["onConfirm"])]),_:2},1024)):I("",!0)]}),_:1},8,["columns","data-source","pagination","loading"]),S.value.type==="adding"?(t(),_(s1,{key:0,open:S.value.type==="adding",table:a.table,"editable-item":S.value.editableItem,loading:Ce.value,onUpdateNullable:ue,onRecordChange:q,onClose:A,onCancel:A,onSave:sa},null,8,["open","table","editable-item","loading"])):I("",!0),S.value.type==="creating"?(t(),_(d1,{key:1,open:S.value.type==="creating",table:a.table,onClose:A,onCancel:A,onCreated:c},null,8,["open","table"])):I("",!0),S.value.type==="editing"?(t(),_(V1,{key:2,open:S.value.type==="editing",column:S.value.column,table:m.table,onUpdated:c,onClose:A,onCancel:A},null,8,["open","column","table"])):I("",!0)]),_:1})}}});const F1={style:{"font-size":"16px"}},An=G({__name:"TableEditor",setup(H){const r=Ie(),a=fe(),k=Ke(()=>{if(typeof a.params.tableId=="string")return a.params.tableId;throw new Error("tableId is not a string")}),p=Ke(()=>{if(typeof a.params.projectId=="string")return a.params.projectId;throw new Error("projectId is not a string")}),d=N(!1),i=va(),w=()=>{var L;d.value=!1,(L=h.value)==null||L.table.save(),Z()},v=b(()=>h.value?h.value.table.name:be.translate("i18n_tableeditor_loading")),{result:h,loading:l,refetch:Z}=Se(()=>Promise.all([De.get(p.value).then(async L=>{const g=await Za.get(L.organizationId),j=(await new Sa().list(g.id)).find(Q=>Q.id===L.folderId);if(!j)throw new Error("Folder not found");return{project:L,organization:g,folder:j}}),ne.get(p.value,k.value)]).then(([{project:L,organization:g,folder:x},B])=>({project:L,organization:g,table:B,folder:x})));he([k,p],()=>{Z()});const $=b(()=>!l.value&&h.value?[{label:be.translate("i18n_tableeditor_my_organizations"),path:"/organizations"},{label:h.value.organization.name,path:`/organizations/${h.value.organization.id}`},{label:h.value.folder.name,path:`/organizations/${h.value.organization.id}#${h.value.folder.id}`},{label:h.value.project.name,path:`/projects/${h.value.project.id}/tables`}]:void 0);function M(){r.push({name:"tables",params:{projectId:p.value}})}return ea(()=>{const L=Ue.subscribe("columnCreated",({tableId:g})=>{g===k.value&&Z()});wa(()=>{Ue.unsubscribe(L)})}),(L,g)=>{const x=Te("RouterLink");return t(),_(pa,{key:k.value},{navbar:n(()=>[o(e(Fa),{style:{padding:"5px 25px",border:"1px solid #f0f0f0"},onBack:M},{title:n(()=>[o(e(P),{align:"center",gap:"small"},{default:n(()=>[u("span",F1,W(v.value),1),o(ie,{type:"text",onClick:g[0]||(g[0]=B=>d.value=!0)},{default:n(()=>[o(e(zl),{size:"16"})]),_:1})]),_:1}),o(e(_a),{title:e(be).translate("i18n_tableeditor_change_table_name"),open:d.value,onCancel:g[2]||(g[2]=B=>d.value=!1),onOk:w},{default:n(()=>[e(h)?(t(),_(e(se),{key:0,value:e(h).table.name,"onUpdate:value":g[1]||(g[1]=B=>e(h).table.name=B)},null,8,["value"])):I("",!0)]),_:1},8,["title","open"])]),subTitle:n(()=>[$.value?(t(),_(e(ja),{key:0,style:{margin:"0px 20px"}},{default:n(()=>[(t(!0),s(ae,null,le($.value,(B,j)=>(t(),_(e(Ua),{key:j},{default:n(()=>[o(x,{to:B.path},{default:n(()=>[R(W(B.label),1)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1})):I("",!0)]),extra:n(()=>[o(ie,{type:"link",onClick:g[3]||(g[3]=B=>e(i).toggle())},{default:n(()=>[o(e(Ca)),R(" "+W(e(be).translate("i18n_tableeditor_ai_assistant")),1)]),_:1})]),_:1})]),content:n(()=>[e(h)?(t(),_(U1,{key:0,loading:e(l),table:e(h).table,onRefresh:g[4]||(g[4]=B=>e(Z)())},null,8,["loading","table"])):I("",!0),e(h)?(t(),_(i1,{key:1,table:e(h).table},null,8,["table"])):I("",!0)]),chat:n(()=>[o(Ia)]),_:1})}}});export{An as default};
//# sourceMappingURL=TableEditor.4761eee1.js.map
