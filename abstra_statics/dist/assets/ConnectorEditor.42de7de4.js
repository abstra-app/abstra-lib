import{d as h,b as e,c as s,E as q,bw as y,ez as I,er as d,eA as $,e as f,t as M,F as S,eu as m,u as j,eV as O,eG as P,ey as A,bu as k,eq as C,aS as T,eE as N,eB as V,eC as G}from"./registerWidgets.482ec09a.js";import{b as D}from"./index.ddf88090.js";import{T as L,a as E}from"./Tab.f4169846.js";import"./gateway.354c6af2.js";import{C as F}from"./connector.7a9b7f65.js";import{a as U}from"./asyncComputed.e7d9687c.js";import{B as z}from"./BackButton.aa86592c.js";import{S as J}from"./SaveButton.9c95c8b3.js";import{L as H}from"./CircularLoading.ea0747a9.js";import"./passwordlessManager.687773fc.js";import"./pubsub.4545c70e.js";import"./activeRecord.287bc390.js";import"./icons.cba459d5.js";import"./lottie.44c9fd08.js";(function(){try{var u=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},o=new Error().stack;o&&(u._sentryDebugIds=u._sentryDebugIds||{},u._sentryDebugIds[o]="f9a74668-57b2-4d5b-9f4e-4e45ffa4a3b0",u._sentryDebugIdIdentifier="sentry-dbid-f9a74668-57b2-4d5b-9f4e-4e45ffa4a3b0")}catch{}})();const Q=["value"],W=h({__name:"TextInput",props:{value:{},schema:{}},emits:["change"],setup(u,{emit:o}){return(r,n)=>(e(),s("input",{value:r.value,onChange:n[0]||(n[0]=t=>o("change",t.target.value))},null,40,Q))}}),X=["value"],Y=h({__name:"NumberInput",props:{value:{},schema:{}},emits:["change"],setup(u,{emit:o}){return(r,n)=>(e(),s("input",{value:r.value,type:"number",onChange:n[0]||(n[0]=t=>o("change",t.target.value))},null,40,X))}}),Z=["value"],x=h({__name:"BooleanInput",props:{value:{type:Boolean},schema:{}},emits:["change"],setup(u,{emit:o}){return(r,n)=>(e(),s("input",{value:r.value,type:"checkbox",onChange:n[0]||(n[0]=t=>o("change",t.target.checked))},null,40,Z))}}),K={class:"oi"},ee={class:"oi-item-label"},te=h({__name:"ObjectInput",props:{value:{},schema:{}},emits:["change"],setup(u,{emit:o}){var g;const r=u,n=q({value:(g=r.value)!=null?g:{}}),t=(b,a)=>{n.value[b]=a,l()},l=()=>{o("change",n.value)};return(b,a)=>(e(),s("div",K,[(e(!0),s(y,null,I(r.schema.values,(v,i)=>(e(),s("div",{key:i,class:"oi-item"},[d("div",ee,$(i),1),f(B,{class:"oi-item-input",schema:v,value:n.value[i],onChange:_=>t(i,_)},null,8,["schema","value","onChange"])]))),128))]))}});const se=M(te,[["__scopeId","data-v-bd751ecc"]]),ne={class:"ai"},ae=["onClick"],oe=h({__name:"ArrayInput",props:{value:{},schema:{}},emits:["change"],setup(u,{emit:o}){var a;const n=q({value:(a=u.value)!=null?a:[]}),t=()=>{n.value.push(void 0)},l=v=>{n.value.splice(v,1),b()},g=(v,i)=>{n.value[v]=i,b()},b=()=>{o("change",n.value)};return(v,i)=>(e(),s("div",ne,[(e(!0),s(y,null,I(n.value,(_,c)=>(e(),s("div",{key:c,class:"ai-item"},[f(B,{schema:v.schema.items,value:_,onChange:p=>g(c,p)},null,8,["schema","value","onChange"]),d("button",{class:"ai-item-remove",onClick:p=>l(c)},"x",8,ae)]))),128)),d("button",{class:"ai-item-add",onClick:i[0]||(i[0]=_=>t())},"Add")]))}});const re=M(oe,[["__scopeId","data-v-a6c8b9fb"]]),ue=["value"],le=["value"],ce=h({__name:"OptionsInput",props:{value:{},schema:{}},emits:["change"],setup(u,{emit:o}){return(r,n)=>(e(),s("select",{value:r.value,onChange:n[0]||(n[0]=t=>o("change",t.target.value))},[(e(!0),s(y,null,I(r.schema.values,t=>(e(),s("option",{key:t,value:t},$(t),9,le))),128))],40,ue))}}),ie=["value"],de=h({__name:"UnionInput",props:{value:{},schema:{}},emits:["change"],setup(u,{emit:o}){return(r,n)=>(e(),s("input",{value:r.value,onChange:n[0]||(n[0]=t=>o("change",t.target.value))},null,40,ie))}}),pe=["value"],_e=h({__name:"AnyInput",props:{value:{},schema:{}},emits:["change"],setup(u,{emit:o}){return(r,n)=>(e(),s("input",{value:r.value,onChange:n[0]||(n[0]=t=>o("change",t.target.value))},null,40,pe))}}),me={string:W,number:Y,boolean:x,object:se,array:re,options:ce,any:_e,union:de},he={class:"gi"},ve={key:0,class:"gi-header"},ge={key:0,class:"gi-label"},be={key:1,class:"gi-tags"},fe={key:0,class:"gi-required"},ye={key:1,class:"gi-required"},Ie={key:1,class:"gi-description"},$e=h({__name:"GenericInput",props:{value:{},schema:{}},emits:["change"],setup(u,{emit:o}){const r=u,n=S(()=>({component:me[r.schema.type],props:{value:r.value,schema:r.schema}}));return(t,l)=>(e(),s("div",he,["label"in t.schema?(e(),s("div",ve,["label"in t.schema?(e(),s("label",ge,$(t.schema.label),1)):m("",!0),"required"in t.schema||"secret"in t.schema?(e(),s("div",be,["required"in t.schema&&t.schema.required?(e(),s("span",fe,"[Required]")):m("",!0),"secret"in t.schema&&t.schema.secret?(e(),s("span",ye,"[Secret]")):m("",!0)])):m("",!0)])):m("",!0),"description"in t.schema?(e(),s("div",Ie,$(t.schema.description),1)):m("",!0),(e(),j(P(n.value.component),O({class:"gi-input"},n.value.props,{onChange:l[0]||(l[0]=g=>o("change",g))}),null,16))]))}});const B=M($e,[["__scopeId","data-v-dd33d764"]]),R=u=>(V("data-v-63dce332"),u=u(),G(),u),ke={class:"page settings"},Ce={class:"page test"},Se={class:"test-method-selector"},Be=R(()=>d("label",{class:"test-method-selector-label"},"Method",-1)),Me=R(()=>d("option",{value:null,disabled:"",selected:"",hidden:""},"Select a method",-1)),Re=["value"],we={key:0,class:"test-method-parameters"},je=R(()=>d("label",{class:"test-method-parameters-label"},"Params",-1)),qe={key:1,class:"test-method-response"},De=R(()=>d("label",{class:"test-method-response-label"},"Response",-1)),Ee={key:0,class:"test-method-response-errors"},Oe={key:1,class:"test-method-response-returns"},Pe={class:"test-method-response-returns-value"},Ae=h({__name:"ConnectorEditor",setup(u){const o=S(()=>{var i;return`/projects/${(i=l.value)==null?void 0:i.projectId}/connectors`}),n=A().params.connectorId,{loading:t,result:l}=U(()=>F.get(n)),g=S(()=>{var i;return(i=l.value)!=null&&i.schema.methods?Object.keys(l.value.schema.methods).reduce((_,c)=>{const p=l.value.schema.methods[c];return[..._,{key:c,...p}]},[]):[]}),b=S(()=>!l.value||!(l.value.type in D.schema)?null:D.schema[l.value.type]),a=q({testMethod:null,testParams:{},testResponse:null}),v=async()=>{!l.value||!a.testMethod||!a.testParams||(a.testResponse=await l.value.test(a.testMethod,a.testParams))};return(i,_)=>k(t)||!k(l)||!b.value?(e(),j(H,{key:0})):(e(),j(L,{key:1,class:"connector-editor"},{left:C(()=>[f(z,{link:o.value},null,8,["link"])]),right:C(()=>[f(J,{model:k(l)},null,8,["model"])]),default:C(()=>[f(E,{title:"Settings"},{default:C(()=>[d("div",ke,[(e(!0),s(y,null,I(b.value.settings,(c,p)=>(e(),s("div",{key:p},[f(B,{schema:c,value:k(l).settings[p],onChange:w=>k(l).settings[p]=w},null,8,["schema","value","onChange"])]))),128))])]),_:1}),f(E,{title:"Test"},{default:C(()=>[d("div",Ce,[d("div",Se,[Be,T(d("select",{"onUpdate:modelValue":_[0]||(_[0]=c=>a.testMethod=c),class:"test-method-selector-selector"},[Me,(e(!0),s(y,null,I(g.value,c=>(e(),s("option",{key:c.key,value:c.key},$(c.label),9,Re))),128))],512),[[N,a.testMethod]])]),a.testMethod?(e(),s("div",we,[je,(e(!0),s(y,null,I(k(l).schema.methods[a.testMethod].params,(c,p)=>(e(),s("div",{key:p,class:"test-field"},[f(B,{schema:c,value:a.testParams[p],onChange:w=>a.testParams[p]=w},null,8,["schema","value","onChange"])]))),128)),d("button",{class:"test-method-run",onClick:_[1]||(_[1]=c=>v())},"Test")])):m("",!0),a.testResponse?(e(),s("div",qe,[De,a.testResponse.errors.length>0?(e(),s("div",Ee,[(e(!0),s(y,null,I(a.testResponse.errors,c=>(e(),s("div",{key:c},$(c),1))),128))])):m("",!0),a.testResponse.returns&&Object.keys(a.testResponse.returns).length>0?(e(),s("div",Oe,[d("span",Pe,[d("pre",null,$(JSON.stringify(a.testResponse.returns,null,2)),1)])])):m("",!0)])):m("",!0)])]),_:1})]),_:1}))}});const Ze=M(Ae,[["__scopeId","data-v-63dce332"]]);export{Ze as default};
//# sourceMappingURL=ConnectorEditor.42de7de4.js.map
