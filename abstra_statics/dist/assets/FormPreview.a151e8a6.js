import{d as g,u as x,r as F,J as R,b as a,c as n,y as e,q as B,e as i,v as b,G as q,H as E,p as L}from"./registerWidgets.4cc86716.js";import{L as C}from"./CircularLoading.249aa989.js";import{E as I}from"./Error.17ff00a9.js";import{F as N,R as H}from"./broker.03e14785.js";import{B as M}from"./BackButton.6841f96b.js";import{a as f}from"./asyncComputed.f9d446a7.js";import{F as V}from"./forms.cc593bbd.js";import{W}from"./workspaces.741b6616.js";import"./passwordlessManager.d432fb48.js";import"./icons.d4e872e2.js";import"./ActionButton.vue_vue_type_script_setup_true_lang.a22e4194.js";import"./Passwordless.42b443a5.js";import"./executeJs.725cb8c2.js";import"./PlayerNavbar.62e8a14d.js";import"./index.a6f97cb6.js";import"./WidgetsFrame.8a984b59.js";import"./colors.267ec6f7.js";import"./Modal.7d907bdb.js";import"./log.30671484.js";import"./activeRecord.57c6bf02.js";const D={class:"page"},G={key:1,class:"error"},J={key:2,style:{width:"100%",height:"100%",display:"flex"}},S={style:{width:"100%",height:"100%",display:"flex"}},U=g({__name:"FormPreview",setup($){const s=q(),r=E(),t=x({started:!1}),m=F(null),{loading:_,result:c,error:p,refetch:u}=f(()=>V.get(r.params.formPath)),{result:d}=f(()=>W.get()),h=R(()=>H.create({isLocal:!1,formPath:r.params.formPath,isPreview:!0})),v=async()=>{var o;if(!t.started){(o=m.value)==null||o.run();return}t.started=!1},y=({path:o,type:l})=>{l==="dash"?s.push({name:"dashPreview",params:{dashPath:o},query:r.query}):(s.push({name:"form-preview",params:{formPath:o},query:r.query}),u())},k=()=>{s.push(`/_editor/form/${encodeURIComponent(r.params.formPath)}`)},w=()=>{t.started=!0},P=()=>{t.started=!1};return(o,l)=>(a(),n("div",D,[e(_)||!e(c)||!e(d)?(a(),B(C,{key:0})):e(p)?(a(),n("div",G,[i(I,{error:e(p),onReload:e(u)},null,8,["error","onReload"])])):(a(),n("main",J,[b("div",S,[i(N,{ref_key:"runner",ref:m,form:e(c).makeRunnerData(e(d)),params:e(r).query,"is-preview":!0,"enable-auto-focus":!0,broker:e(h),style:{height:"unset",flex:1,overflow:"hidden"},onNavigate:y,onLogout:v,onExit:P,onStart:w},null,8,["form","params","broker"]),i(M,{onExitFullscreenPreview:k})])]))]))}});const pe=L(U,[["__scopeId","data-v-f7c2ba13"]]);export{pe as default};
//# sourceMappingURL=FormPreview.a151e8a6.js.map
