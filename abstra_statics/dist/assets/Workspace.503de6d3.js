import{B as ae}from"./BaseLayout.16b4e4b3.js";import{d as z,e as m,f as w,g as H,X as oe,ah as se,r as F,o as s,Y as f,b as t,w as a,u as e,dh as d,bL as re,e8 as P,aS as S,e9 as E,a as q,dc as c,aG as n,ea as b,c as _,S as y,db as ne,by as le,bT as K,eb as ie,K as U,a0 as ue,ec as ce}from"./index.82b3148c.js";import{S as de,L as pe,N as me}from"./log.2c3efe32.js";import{A as j}from"./index.f441bd75.js";import{A as fe}from"./Avatar.c076649d.js";import{L as ye}from"./LoadingOutlined.5a8eb0fc.js";import"./AbstraLogo.vue_vue_type_script_setup_true_lang.a20fd51d.js";import"./Logo.0be2686c.js";import"./AbstraButton.vue_vue_type_script_setup_true_lang.36fca7f4.js";import"./PhArrowCounterClockwise.vue.003e83ba.js";import"./PhFilePy.vue.e92995ae.js";import"./PhChats.vue.ed7527c2.js";import"./PhRocket.vue.0a08dd71.js";import"./PhPackage.vue.30468725.js";import"./linters.38c38cf1.js";import"./asyncComputed.b31540a4.js";import"./workspaces.114e35d6.js";import"./workspaceStore.d9227179.js";import"./url.3209a6f7.js";import"./colorHelpers.d4cbfb24.js";import"./record.cb9a902e.js";import"./polling.e4e328fc.js";import"./PhArrowSquareOut.vue.1aeb60d7.js";import"./PhSignOut.vue.9498f732.js";import"./editor.5a271fd3.js";import"./index.867114ba.js";import"./CloseCircleOutlined.c85cdfbf.js";import"./CheckCircleFilled.34cd2c52.js";import"./index.4f532519.js";import"./popupNotifcation.e1bf1f8c.js";import"./ai.41f52600.js";import"./uuid.e4fb3756.js";import"./PhCheckCircle.vue.bd40faf8.js";import"./PhCopySimple.vue.138ef969.js";import"./scripts.10d6bd7a.js";import"./controller.9c067ab9.js";import"./vue-flow-core.63b4f0fe.js";import"./validations.7e1d00d3.js";import"./string.ab0c206a.js";import"./metadata.79e5a077.js";import"./PhRobot.vue.6eecdc74.js";import"./PhWebhooksLogo.vue.359fbd65.js";import"./controller.68d805d6.js";import"./gateway.8733a5f3.js";import"./fetch.4e9ad82b.js";import"./PhPencil.vue.fb0b2f4b.js";(function(){try{var v=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},u=new Error().stack;u&&(v._sentryDebugIds=v._sentryDebugIds||{},v._sentryDebugIds[u]="d693af8f-d190-4020-8782-555f315aaa9c",v._sentryDebugIdIdentifier="sentry-dbid-d693af8f-d190-4020-8782-555f315aaa9c")}catch{}})();const _e=["onKeydown"],ve={key:0,class:"entry"},ge={class:"entry-owner"},we={key:1,class:"entry"},be={class:"entry-owner"},ke="Smart Chat",Y="You",he=.98,Ce=z({__name:"OmniChat",setup(v){const u=pe.create(),l=new de(u,null),p=m(!1),k=m(null),C=m(""),$=w(()=>l.getVisibleActions()),M=w(()=>l.isLoadingActions()),B=w(()=>l.isAnswering()),D=w(()=>l.isProcessing()),G=w(()=>!D.value&&!B.value);H(()=>M.value,()=>{setTimeout(()=>{W()},100)});const i=m(null),L=m(!0),I=m(!1),A=m(!1),W=()=>{L.value=!0,i.value&&(i.value.scrollTop=i.value.scrollHeight)},N=()=>{if(!i.value)return;const{scrollTop:o,scrollHeight:g,clientHeight:T}=i.value;o+T>=g*he?(L.value=!0,I.value=!1):(L.value=!1,I.value=!0)},X=w(()=>B.value?"Answering...":D.value?"Processing...":"Type your question and press Enter"),J=()=>{p.value=!0,U(()=>O())},h=()=>{p.value=!1},O=()=>{k.value&&k.value.focus()},Q=o=>{o.target===o.currentTarget&&h()},R=o=>{if((o.metaKey||o.ctrlKey)&&o.key==="k"){o.preventDefault(),A.value=!0;return}A.value&&o.key==="i"&&(o.preventDefault(),p.value?h():J(),A.value=!1),o.metaKey||o.ctrlKey||(A.value=!1),o.key==="Escape"&&p.value&&h()};H(p,o=>{o&&U(()=>{O()})});const Z=async()=>{await l.setupThread(),l.clearActions(),u.clear()},ee=async()=>{l.setInput(C.value),C.value="",await l.send(null)};return oe(()=>{l.setupThread(),window.addEventListener("keydown",R),i.value&&i.value.addEventListener("scroll",N)}),se(()=>{window.removeEventListener("keydown",R),i.value&&i.value.removeEventListener("scroll",N)}),(o,g)=>{const T=F("Markdown");return p.value?(s(),f("div",{key:0,class:"container",justify:"center",align:"center",onKeydown:P(h,["esc"]),onClick:Q},[t(e(d),{class:"modal",vertical:"",onClick:g[1]||(g[1]=ie(()=>{},["stop"]))},{default:a(()=>[t(e(d),{class:"upper"},{default:a(()=>[t(e(re),{ref_key:"inputRef",ref:k,value:C.value,"onUpdate:value":g[0]||(g[0]=r=>C.value=r),bordered:!1,placeholder:"Ask a question",size:"large",onKeydown:P(ee,["enter"])},null,8,["value","onKeydown"])]),_:1}),t(e(d),{ref_key:"entriesContainer",ref:i,class:"content"},{default:a(()=>[(s(!0),f(S,null,E(e(u).logs,(r,V)=>(s(),f("div",{key:V},[r.type==="ai-output"?(s(),f("div",ve,[q("div",ge,[t(e(c),{strong:""},{default:a(()=>[n(b(ke))]),_:1})]),r.type==="ai-output"?(s(),_(T,{key:0,source:r.log,class:"entry-text"},null,8,["source"])):y("",!0)])):y("",!0),r.type==="ai-input"?(s(),f("div",we,[q("div",be,[t(e(fe),{size:24,shape:"square"},{default:a(()=>{var x;return[n(b((x=Y[0])!=null?x:"Y"),1)]}),_:1}),t(e(c),{strong:""},{default:a(()=>[n(b(Y))]),_:1})]),(s(!0),f(S,null,E(r.log.split(`
`),(x,te)=>(s(),_(e(ne),{key:te},{default:a(()=>[n(b(x),1)]),_:2},1024))),128))])):y("",!0)]))),128)),e(u).hasAiLogs()?y("",!0):(s(),_(e(d),{key:0,vertical:"",justify:"center",align:"center",class:"empty-container"},{default:a(()=>[t(e(c),null,{default:a(()=>[n("Ask anything!")]),_:1}),t(e(c),{type:"secondary"},{default:a(()=>[n("No messages yet")]),_:1})]),_:1})),t(e(d),{gap:"small",style:{"margin-bottom":"20px"},wrap:"wrap"},{default:a(()=>[M.value?(s(),_(e(le),{key:0,style:{"margin-bottom":"20px"}})):y("",!0),(s(!0),f(S,null,E($.value,r=>(s(),_(e(K),{key:r.label,type:"primary",disabled:r.disabled,loading:r.loading,onClick:V=>r.execute()},{default:a(()=>[n(b(r.label),1)]),_:2},1032,["disabled","loading","onClick"]))),128))]),_:1})]),_:1},512),t(e(d),{class:"lower",align:"center",justify:"space-between"},{default:a(()=>[t(e(d),{align:"center",gap:"small"},{default:a(()=>[t(e(c),{type:"secondary"},{default:a(()=>[n("Omni Chat")]),_:1}),t(e(j),{type:"vertical"}),t(e(c),{type:"secondary"},{default:a(()=>[n(b(X.value),1)]),_:1}),G.value?y("",!0):(s(),_(e(ye),{key:0,style:{"margin-left":"6px",color:"rgba(0, 0, 0, 0.45)"}}))]),_:1}),t(e(d),{align:"center",gap:"small"},{default:a(()=>[t(e(K),{class:"close-button",type:"text",onClick:Z},{default:a(()=>[t(e(c),{type:"secondary"},{default:a(()=>[n("Clear messages")]),_:1})]),_:1}),t(e(j),{type:"vertical"}),t(e(K),{class:"close-button",type:"text",onClick:h},{default:a(()=>[t(e(c),{type:"secondary"},{default:a(()=>[n("Close")]),_:1}),t(e(c),{keyboard:""},{default:a(()=>[n("Esc")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],40,_e)):y("",!0)}}});const Ae=ue(Ce,[["__scopeId","data-v-e4dbb5dc"]]),vt=z({__name:"Workspace",setup(v){const u=ce();return(l,p)=>{const k=F("RouterView");return s(),_(ae,null,{navbar:a(()=>[t(me,{"page-title":e(u).meta.title},null,8,["page-title"])]),content:a(()=>[t(Ae),n(),t(k)]),_:1})}}});export{vt as default};
//# sourceMappingURL=Workspace.503de6d3.js.map
