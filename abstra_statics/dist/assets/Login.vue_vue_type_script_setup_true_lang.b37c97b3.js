import{d as g,Z as w,J as f,b as s,ew as i,dj as K,ey as k,eB as V,e as t,o as S,f as y,u as c,as as A,w as E,eC as x,eD as Z,x as $,f3 as p,I as L,eH as v,c as b,aL as C,f0 as M,f2 as B}from"./outputWidgets.dba3bb2c.js";import{O as D,S as I,A as N}from"./index.0d56c0e2.js";import{A as O}from"./Link.f60e1e7d.js";import{A as H}from"./index.63ca3778.js";import{G as z,L as T}from"./CircularLoading.f6fe54c4.js";(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},o=new Error().stack;o&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[o]="4c2c1ab1-8bce-49e4-ab5a-9792698d610c",n._sentryDebugIdIdentifier="sentry-dbid-4c2c1ab1-8bce-49e4-ab5a-9792698d610c")}catch{}})();const U=["width","height","fill","transform"],j={key:0},R=t("path",{d:"M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm0,192a84,84,0,1,1,84-84A84.09,84.09,0,0,1,128,212Zm0-144a44,44,0,0,0-33.61,72.41l-9.86,32.06A12,12,0,0,0,96,188h64a12,12,0,0,0,11.47-15.53l-9.86-32.06A44,44,0,0,0,128,68Zm8.53,72.51L143.75,164h-31.5l7.22-23.49a12,12,0,0,0-4-12.89,20,20,0,1,1,25,0A12,12,0,0,0,136.53,140.51Z"},null,-1),q=[R],F={key:1},G=t("path",{d:"M144,139.72,160,176H96l16-36.28a32,32,0,1,1,32,0Z",opacity:"0.2"},null,-1),J=t("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm40-104a40,40,0,1,0-65.94,30.44L88.68,172.77A8,8,0,0,0,96,184h64a8,8,0,0,0,7.32-11.23l-13.38-30.33A40.14,40.14,0,0,0,168,112ZM136.68,143l11,25.05H108.27l11-25.05A8,8,0,0,0,116,132.79a24,24,0,1,1,24,0A8,8,0,0,0,136.68,143Z"},null,-1),W=[G,J],Q={key:2},X=t("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm29.52,146.39a4,4,0,0,1-3.66,5.61H102.14a4,4,0,0,1-3.66-5.61L112,139.72a32,32,0,1,1,32,0Z"},null,-1),Y=[X],ee={key:3},te=t("path",{d:"M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm0,192a90,90,0,1,1,90-90A90.1,90.1,0,0,1,128,218Zm38-106a38,38,0,1,0-61.5,29.86l-14,31.72A6,6,0,0,0,96,182h64a6,6,0,0,0,5.49-8.42l-14-31.72A38.16,38.16,0,0,0,166,112Zm-25,22.53a6,6,0,0,0-2.49,7.61L150.8,170H105.2l12.29-27.86a6,6,0,0,0-2.49-7.61,26,26,0,1,1,26,0Z"},null,-1),ne=[te],se={key:4},oe=t("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm40-104a40,40,0,1,0-65.94,30.44L88.68,172.77A8,8,0,0,0,96,184h64a8,8,0,0,0,7.32-11.23l-13.38-30.33A40.14,40.14,0,0,0,168,112ZM136.68,143l11,25.05H108.27l11-25.05A8,8,0,0,0,116,132.79a24,24,0,1,1,24,0A8,8,0,0,0,136.68,143Z"},null,-1),ae=[oe],ie={key:5},le=t("path",{d:"M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm0,192a92,92,0,1,1,92-92A92.1,92.1,0,0,1,128,220Zm36-108a36,36,0,1,0-57,29.22L92.34,174.39A4,4,0,0,0,96,180h64a4,4,0,0,0,3.66-5.61L149,141.22A36.15,36.15,0,0,0,164,112Zm-23.66,29.33L153.86,172H102.14l13.52-30.67a4,4,0,0,0-1.66-5.07,28,28,0,1,1,28,0A4,4,0,0,0,140.34,141.33Z"},null,-1),re=[le],de={name:"PhKeyhole"},ce=g({...de,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(n){const o=n,e=w("weight","regular"),l=w("size","1em"),h=w("color","currentColor"),m=w("mirrored",!1),_=f(()=>{var d;return(d=o.weight)!=null?d:e}),a=f(()=>{var d;return(d=o.size)!=null?d:l}),u=f(()=>{var d;return(d=o.color)!=null?d:h}),r=f(()=>o.mirrored!==void 0?o.mirrored?"scale(-1, 1)":void 0:m?"scale(-1, 1)":void 0);return(d,P)=>(s(),i("svg",V({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:a.value,height:a.value,fill:u.value,transform:r.value},d.$attrs),[K(d.$slots,"default"),_.value==="bold"?(s(),i("g",j,q)):_.value==="duotone"?(s(),i("g",F,W)):_.value==="fill"?(s(),i("g",Q,Y)):_.value==="light"?(s(),i("g",ee,ne)):_.value==="regular"?(s(),i("g",se,ae)):_.value==="thin"?(s(),i("g",ie,re)):k("",!0)],16,U))}}),_e=n=>(x("data-v-db341736"),n=n(),Z(),n),ue={class:"oidc-container"},pe=_e(()=>t("p",{class:"centered"},"Please complete the login process in the popup window.",-1)),he={class:"centered"},ve=g({__name:"Oidc",emits:["done"],setup(n,{emit:o}){const e=async()=>{if(!await new D().login())throw new Error("[OIDC] Login did not return an user");o("done")};return S(()=>e()),(l,h)=>(s(),i("div",ue,[y(c(ce),{size:60,style:{"margin-bottom":"50px"}}),pe,t("p",he,[A(" If it has not appear automatically, please "),y(c(O),{onClick:e},{default:E(()=>[A("click here")]),_:1}),A(". ")])]))}});const me=$(ve,[["__scopeId","data-v-db341736"]]),fe=n=>(x("data-v-2f442942"),n=n(),Z(),n),ye={class:"auth-info"},ge={class:"auth-header"},ke={class:"auth-label"},we={key:1,class:"description"},Ae=["onKeyup"],be={key:0,class:"span-error"},$e=fe(()=>t("div",{class:"spacer"},null,-1)),Ie=g({__name:"AuthInfo",props:{invalid:{type:Boolean}},emits:["sendAuthInfo"],setup(n,{emit:o}){const e=n,l={description:p.translate("i18n_local_auth_info_description"),button:p.translate("i18n_local_auth_info_authenticate")},h={description:p.translate("i18n_auth_info_description"),button:p.translate("i18n_auth_info_send_code")},m=f(()=>{var r;return(r=I.instance)==null?void 0:r.isLocal}),_=f(()=>{var r;return(r=I.instance)!=null&&r.isLocal?l:h}),a=L({email:""}),u=()=>{o("sendAuthInfo",a)};return(r,d)=>(s(),i("div",ye,[t("div",ge,[t("div",ke,v(c(p).translate("i18n_auth_validate_your_email")),1),m.value?(s(),b(c(H),{key:0,message:_.value.description,type:"warning","show-icon":"",style:{width:"100%","text-align":"left"}},null,8,["message"])):(s(),i("div",we,v(_.value.description),1))]),C(t("input",{"onUpdate:modelValue":d[0]||(d[0]=P=>a.email=P),type:"email",placeholder:"Email address",class:"input email-input",onKeyup:B(u,["enter"])},null,40,Ae),[[M,a.email]]),e.invalid?(s(),i("span",be,v(c(p).translate("i18n_auth_info_invalid_email")),1)):k("",!0),$e,t("button",{class:"next-button",onClick:u},v(_.value.button),1)]))}});const xe=$(Ie,[["__scopeId","data-v-2f442942"]]),Ze=n=>(x("data-v-e737f7da"),n=n(),Z(),n),Le={class:"auth-token"},Pe={class:"auth-label"},Te=["onKeyup"],Se={key:1,class:"span-error"},Ce={key:2,class:"span-error"},Me=Ze(()=>t("div",{class:"spacer"},null,-1)),Be={class:"footer"},De=g({__name:"AuthToken",props:{email:{},invalid:{type:Boolean},expired:{type:Boolean}},emits:["sendToken","restartAuth","resendToken"],setup(n,{emit:o}){const e=f(()=>{var a;return(a=I.instance)==null?void 0:a.isLocal}),l=L({token:""}),h=()=>{o("restartAuth")},m=()=>{o("resendToken")},_=()=>{o("sendToken",l.token)};return(a,u)=>(s(),i("div",Le,[t("div",Pe,v(c(p).translate("i18n_auth_token_label",{email:a.email})),1),e.value?(s(),b(c(H),{key:0,message:c(p).translate("i18n_auth_token_development_warning"),type:"warning","show-icon":"",style:{width:"100%","text-align":"left","margin-bottom":"20px"}},null,8,["message"])):k("",!0),C(t("input",{"onUpdate:modelValue":u[0]||(u[0]=r=>l.token=r),type:"text",placeholder:"Type your verification code",class:"input",onKeyup:B(_,["enter"])},null,40,Te),[[M,l.token]]),a.expired?(s(),i("span",Se,v(c(p).translate("i18n_auth_token_expired")),1)):k("",!0),a.invalid?(s(),i("span",Ce,v(c(p).translate("i18n_auth_token_invalid")),1)):k("",!0),Me,t("button",{class:"next-button",onClick:_},v(c(p).translate("i18n_auth_token_verify_email")),1),t("button",{class:"secondary-button back",onClick:h},[y(c(z)),A(" "+v(c(p).translate("i18n_auth_token_try_again")),1)]),t("button",{class:"secondary-button back",onClick:m},v(c(p).translate("i18n_auth_token_resend_email")),1),t("div",Be,v(c(p).translate("i18n_auth_token_footer_alternative_email")),1)]))}});const He=$(De,[["__scopeId","data-v-e737f7da"]]),Ke={key:0,class:"form"},Ve={class:"form-wrapper"},Ee={class:"loading"},Ne={key:1,class:"form"},Oe={class:"form-wrapper"},ze={class:"widget"},Ue={key:2,class:"form"},je={class:"form-wrapper"},Re={class:"widget"},qe={key:3,class:"form"},Fe={class:"form-wrapper"},Ge={class:"loading"},Je=g({__name:"Passwordless",emits:["done"],setup(n,{emit:o}){const e=L({stage:"collect-info",userProvider:null,invalid:!1,token:null,info:null});S(()=>{e.userProvider=new N});const l=async a=>{if(!e.userProvider)return;e.info=a,e.stage="loading";const u=await e.userProvider.authenticate(a.email);e.invalid=!!u,u?e.stage="collect-info":e.stage="collect-token"},h=async a=>{var u;if(!(!e.userProvider||!((u=e.info)!=null&&u.email))){e.token=a,e.stage="loading";try{const r=await e.userProvider.verify(e.info.email,e.token);if(!r)throw new Error("no user");o("done",r),e.stage="done"}catch{e.invalid=!0,e.stage="collect-token"}}},m=()=>{e.info&&l(e.info)},_=()=>{e.stage="collect-info",e.info=null,e.token=null,e.invalid=!1};return(a,u)=>{var r,d;return e.userProvider?e.stage==="collect-info"?(s(),i("div",Ne,[t("div",Oe,[t("div",ze,[y(xe,{invalid:e.invalid,onSendAuthInfo:l},null,8,["invalid"])])])])):e.stage==="collect-token"?(s(),i("div",Ue,[t("div",je,[t("div",Re,[y(He,{invalid:e.invalid,email:(d=(r=e.info)==null?void 0:r.email)!=null?d:"",onSendToken:h,onResendToken:m,onRestartAuth:_},null,8,["invalid","email"])])])])):(s(),i("div",qe,[t("div",Fe,[t("div",Ge,[y(T)])])])):(s(),i("div",Ke,[t("div",Ve,[t("div",Ee,[y(T)])])]))}}});const We=$(Je,[["__scopeId","data-v-d468d037"]]),nt=g({__name:"Login",emits:["done"],setup(n,{emit:o}){return(e,l)=>c(D).isConfigured()?(s(),b(me,{key:0,onDone:l[0]||(l[0]=h=>o("done"))})):(s(),b(We,{key:1,onDone:l[1]||(l[1]=h=>o("done"))}))}});export{nt as _};
//# sourceMappingURL=Login.vue_vue_type_script_setup_true_lang.b37c97b3.js.map
