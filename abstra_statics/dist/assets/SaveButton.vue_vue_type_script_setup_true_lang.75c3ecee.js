import{a as D}from"./ant-design.f8dd6064.js";import{f as d,eH as E,d as S,eK as B,I as L,o as A,K as I,b as O,eu as V,v as P,r as _,S as w,w as i,e as U,u as c,aq as h,bF as k,ey as z,eE as H,cz as $,aC as j,cx as M}from"./outputWidgets.f017b1ba.js";import{T as N}from"./Typography.5dfc411f.js";import{A as x}from"./Link.d1ea88f0.js";(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[e]="ccedafad-8908-48eb-a7d8-b9352d6d44a1",n._sentryDebugIdIdentifier="sentry-dbid-ccedafad-8908-48eb-a7d8-b9352d6d44a1")}catch{}})();var F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};const T=F;function C(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),o.forEach(function(r){K(n,r,t[r])})}return n}function K(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var p=function(e,t){var o=C({},e,t.attrs);return d(E,C({},o,{icon:T}),null)};p.displayName="SaveOutlined";p.inheritAttrs=!1;const Y=p,q={class:"unsaved-changes-handler"},g="You have unsaved changes. Are you sure you want to leave?",R=S({__name:"UnsavedChangesHandler",props:{hasChanges:{type:Boolean}},setup(n){const e=n,t=s=>(s=s||window.event,s&&(s.returnValue=g),g),o=()=>{window.addEventListener("beforeunload",t)};B(async(s,u,a)=>{if(!e.hasChanges)return a();await D(g)?a():a(!1)});const r=()=>window.removeEventListener("beforeunload",t),l=s=>s?o():r();return L(()=>e.hasChanges,l),A(()=>l(e.hasChanges)),I(r),(s,u)=>(O(),V("div",q))}});const G=P(R,[["__scopeId","data-v-fa94acdd"]]),J={style:{padding:"0px 4px"}},ee=S({__name:"SaveButton",props:{model:{},neverShowPopover:{type:Boolean}},emits:["save"],setup(n,{emit:e}){var u;const t=n,o=_((u=w.get("dontShowUnsavedChanges"))!=null?u:!1),r=()=>{w.set("dontShowUnsavedChanges",!0),o.value=!0},l=_(!1);async function s(){l.value=!0;try{await t.model.save(),e("save")}catch{M.error({message:"Error saving"})}finally{l.value=!1}}return addEventListener("keydown",a=>{(a.metaKey||a.ctrlKey)&&a.key==="s"&&(a.preventDefault(),s())}),addEventListener("beforeunload",a=>{t.model.hasChanges()&&(a.preventDefault(),a.returnValue="")}),(a,v)=>{var m;return O(),V(j,null,[d(c($),{placement:"left",visible:a.model.hasChanges()&&!o.value&&!a.neverShowPopover},{content:i(()=>[U("div",J,[d(c(N),null,{default:i(()=>[h("You have unsaved changes")]),_:1}),d(c(x),{onClick:r},{default:i(()=>[h("Don't show this again")]),_:1})])]),default:i(()=>{var b,y;return[d(c(k),{class:z(["save-button",{changes:(b=a.model)==null?void 0:b.hasChanges()}]),loading:l.value,disabled:!((y=a.model)!=null&&y.hasChanges()),onClick:v[0]||(v[0]=f=>s())},{icon:i(()=>[d(c(Y))]),default:i(()=>{var f;return[h(H((f=a.model)!=null&&f.hasChanges()?"Save":"Saved")+" ",1)]}),_:1},8,["class","loading","disabled"])]}),_:1},8,["visible"]),d(G,{"has-changes":(m=a.model)==null?void 0:m.hasChanges()},null,8,["has-changes"])],64)}}});export{ee as _};
//# sourceMappingURL=SaveButton.vue_vue_type_script_setup_true_lang.75c3ecee.js.map
