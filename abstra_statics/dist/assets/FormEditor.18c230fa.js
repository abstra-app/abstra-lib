import{u as Oe}from"./index.d59ef797.js";import{f as a,eG as ie,d as $,r as k,H as E,b as v,c as b,w as o,ar as f,eD as Ce,u as e,bV as C,cB as M,ev as I,bO as O,a$ as B,eE as de,eF as pe,e as U,v as ce,bP as K,eC as Pe,cF as Re,S as ee,a as Ee,ex as T,eA as Ue,eB as $e,aw as Fe,J as te,eM as De,bv as Ie}from"./outputWidgets.6bfc0239.js";import{B as Le}from"./BaseLayout.b05ffc6b.js";import{F as Me,a as me,b as Ne,c as qe,d as Be,r as ae}from"./FormRunner.dc1c5b09.js";import{R as je,S as Ve,a as We,L as He}from"./SourceCode.9489bd8d.js";import{a as Qe}from"./asyncComputed.21831dee.js";import{F as ze}from"./forms.9e600492.js";import{W as oe}from"./workspaces.aee677ed.js";import"./envVars.75d5e3af.js";import{l as re,N as Ge}from"./NavbarControls.dfb9a068.js";import{_ as Je}from"./SaveButton.vue_vue_type_script_setup_true_lang.b3ad499f.js";import{S as Ye}from"./StageRunSelector.38b2458d.js";import{A as Xe}from"./index.a4bbf07e.js";import{A as D}from"./Title.84d6428e.js";import{T as N}from"./Typography.7fe49268.js";import{A as S,F as j}from"./Form.7d1a8597.js";import{A as ne}from"./index.eba2f742.js";import{z as Ze,A as Ke,B as et}from"./icons.5f4f8713.js";import{A as fe}from"./api.301ca4a6.js";import{A as q}from"./index.60dad040.js";import{M as tt}from"./Modal.9595e4e0.js";import{A as at}from"./Link.c1cadb68.js";import{A as F,T as le}from"./TabPane.e27b42bc.js";import"./Card.77a4a6f5.js";import{c as ot}from"./index.a0291250.js";import{A as rt}from"./index.ecc37a00.js";import{E as nt}from"./ExpandOutlined.3c2528f9.js";import"./pubsub.56f48661.js";import"./url.c2408bab.js";import"./Passwordless.43cdb0c3.js";import"./CircularLoading.c1d47ee0.js";import"./PlayerNavbar.b0828f3f.js";import"./WidgetsFrame.f3e18a8a.js";import"./Steps.cdfeb83b.js";import"./uuid.d35cd994.js";import"./jobs.5640f59f.js";import"./record.dbb754fe.js";import"./scripts.cd1bef2a.js";import"./validations.d22fa8c3.js";import"./string.2eb5a2c9.js";import"./toggleHighContrast.bb37b70a.js";import"./runnerData.218d57bf.js";import"./popupNotifcation.9ba9d802.js";import"./Text.3be64ce1.js";import"./Base.3f4f4c87.js";import"./DocsButton.vue_vue_type_script_setup_true_lang.77240f7b.js";import"./Paragraph.100fbd75.js";import"./ant-design.bf757549.js";import"./index.71301f31.js";import"./index.8802c5fa.js";import"./index.81e0c92a.js";import"./hasIn.42df2c7d.js";import"./index.cf4c23b9.js";import"./ArrowRightOutlined.08fa31dd.js";(function(){try{var l=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new Error().stack;r&&(l._sentryDebugIds=l._sentryDebugIds||{},l._sentryDebugIds[r]="3d2445ad-8a71-4392-908c-b7155918888b",l._sentryDebugIdIdentifier="sentry-dbid-3d2445ad-8a71-4392-908c-b7155918888b")}catch{}})();var lt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888.3 757.4h-53.8c-4.2 0-7.7 3.5-7.7 7.7v61.8H197.1V197.1h629.8v61.8c0 4.2 3.5 7.7 7.7 7.7h53.8c4.2 0 7.7-3.4 7.7-7.7V158.7c0-17-13.7-30.7-30.7-30.7H158.7c-17 0-30.7 13.7-30.7 30.7v706.6c0 17 13.7 30.7 30.7 30.7h706.6c17 0 30.7-13.7 30.7-30.7V765.1c0-4.3-3.5-7.7-7.7-7.7zm18.6-251.7L765 393.7c-5.3-4.2-13-.4-13 6.3v76H438c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z"}}]},name:"export",theme:"outlined"};const st=lt;var ut={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"};const it=ut;function se(l){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?Object(arguments[r]):{},m=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(m=m.concat(Object.getOwnPropertySymbols(t).filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),m.forEach(function(n){dt(l,n,t[n])})}return l}function dt(l,r,t){return r in l?Object.defineProperty(l,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):l[r]=t,l}var V=function(r,t){var m=se({},r,t.attrs);return a(ie,se({},m,{icon:st}),null)};V.displayName="ExportOutlined";V.inheritAttrs=!1;const pt=V;function ue(l){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?Object(arguments[r]):{},m=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(m=m.concat(Object.getOwnPropertySymbols(t).filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),m.forEach(function(n){ct(l,n,t[n])})}return l}function ct(l,r,t){return r in l?Object.defineProperty(l,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):l[r]=t,l}var W=function(r,t){var m=ue({},r,t.attrs);return a(ie,ue({},m,{icon:it}),null)};W.displayName="LinkOutlined";W.inheritAttrs=!1;const mt=W,ft=$({__name:"LaunchButton",props:{path:{}},setup(l){const r=l,t=k({state:"loading"}),m=E(()=>t.value.state!=="found"),n=E(()=>t.value.state==="loading"),s=E(()=>t.value.state==="found"?t.value.url:void 0),g=E(()=>{switch(t.value.state){case"error":return"Error";case"loading":return"Loading";case"not-deployed":return"No deploy";case"not-logged":return"Not logged";case"not-found":return"Page not found";case"found":return"Launch";default:throw new Error(`Invalid state ${t.value}`)}}),y=E(()=>{switch(t.value.state){case"error":return"Something went wrong when trying to get your deployed URL.";case"loading":return"Getting deployed url info...";case"not-deployed":return"You have no deployed url yet.";case"not-logged":return"You are not logged.";case"not-found":return"This page is not on the deployed application.";case"found":return"Launch the deployed version of this application in another tab.";default:throw new Error(`Invalid state ${t.value}`)}});async function w(i){const u=`https://${i}.abstra.app/_version`;return(await fetch(u)).ok}async function P(i){const u=`https://${i}.abstra.app/_pages/${r.path}`;return(await fetch(u)).ok}async function A(){var L;const{result:i}=re.asyncComputed;if(!((L=i.value)!=null&&L.logged)){t.value={state:"not-logged"};return}const u=await re.getProjectInfo().catch(()=>null);if(!u){t.value={state:"error"};return}if(!await w(u.subdomain).catch(()=>null)){t.value={state:"not-deployed"};return}if(!await P(u.subdomain).catch(()=>null)){t.value={state:"not-found"};return}const c=`https://${u.subdomain}.abstra.app/${r.path}`;t.value={state:"found",url:c}}return A(),(i,u)=>(v(),b(e(M),{title:g.value},{content:o(()=>[f(Ce(y.value),1)]),default:o(()=>[a(e(C),{href:s.value,target:"_blank",disabled:m.value,loading:n.value,size:"small",type:"link"},{icon:o(()=>[a(e(mt))]),default:o(()=>[f(" Open Deployed ")]),_:1},8,["href","disabled","loading"])]),_:1},8,["title"]))}}),ve=l=>(de("data-v-a8ca44f6"),l=l(),pe(),l),vt=ve(()=>U("i",null,"string",-1)),gt=ve(()=>U("i",null,"string list",-1)),yt=$({__name:"FormNotificationSettings",props:{form:{}},setup(l){const t=k(l.form);return(m,n)=>(v(),I(B,null,[a(e(j),{layout:"vertical"},{default:o(()=>[a(e(D),{level:4,width:"100%",height:"30px",style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0px"}},{default:o(()=>[f(" Thread waiting "),a(e(Xe),{checked:t.value.notificationTrigger.enabled,"onUpdate:checked":n[0]||(n[0]=s=>t.value.notificationTrigger.enabled=s)},{default:o(()=>[f(" Enabled ")]),_:1},8,["checked"])]),_:1}),a(e(N),{class:"description",style:{fontStyle:"italic",marginBottom:"20px"}},{default:o(()=>[f(" Send emails when the thread is waiting for the form to be filled ")]),_:1}),a(e(S),{label:"Variable name"},{default:o(()=>[a(e(O),{value:t.value.notificationTrigger.variable_name,"onUpdate:value":n[1]||(n[1]=s=>t.value.notificationTrigger.variable_name=s),disabled:!t.value.notificationTrigger.enabled,type:"text",placeholder:"variable_name"},null,8,["value","disabled"])]),_:1})]),_:1}),a(e(ne),{type:"info"},{message:o(()=>[a(e(N),null,{default:o(()=>[f(" Notifications are sent to the emails specified in the thread variables set here. The variables should contain a "),vt,f(" or a "),gt,f(". ")]),_:1})]),_:1}),a(e(ne),{style:{"margin-top":"20px"}},{message:o(()=>[a(e(N),null,{default:o(()=>[f(" Notifications are a paid feature. Talk to your account manager to enable them. ")]),_:1})]),_:1})],64))}});const bt=ce(yt,[["__scopeId","data-v-a8ca44f6"]]),ht=$({__name:"FormSettings",props:{form:{}},setup(l){const t=k(l.form);return(m,n)=>(v(),b(e(j),{layout:"vertical",style:{"padding-bottom":"50px"}},{default:o(()=>[a(je,{runtime:t.value},null,8,["runtime"]),a(e(S),{label:"Form name"},{default:o(()=>[a(e(O),{value:t.value.title,"onUpdate:value":n[0]||(n[0]=s=>t.value.title=s),type:"text",onChange:n[1]||(n[1]=s=>{var g;return t.value.title=(g=s.target.value)!=null?g:""})},null,8,["value"])]),_:1}),a(e(D),{level:3},{default:o(()=>[f(" Texts ")]),_:1}),a(e(D),{level:4},{default:o(()=>[f(" Welcome Screen ")]),_:1}),a(e(S),{label:"Title"},{default:o(()=>[a(e(O),{value:t.value.welcomeTitle,"onUpdate:value":n[2]||(n[2]=s=>t.value.welcomeTitle=s),type:"text",placeholder:t.value.title,disabled:t.value.autoStart},null,8,["value","placeholder","disabled"])]),_:1}),a(e(S),{label:"Description"},{default:o(()=>[a(e(O),{value:t.value.startMessage,"onUpdate:value":n[3]||(n[3]=s=>t.value.startMessage=s),type:"text",disabled:t.value.autoStart},null,8,["value","disabled"])]),_:1}),a(e(S),{label:"Start button label"},{default:o(()=>[a(e(O),{value:t.value.startButtonText,"onUpdate:value":n[4]||(n[4]=s=>t.value.startButtonText=s),type:"text",placeholder:"Start",disabled:t.value.autoStart},null,8,["value","disabled"])]),_:1}),a(e(S),null,{default:o(()=>[a(e(K),{checked:t.value.autoStart,"onUpdate:checked":n[5]||(n[5]=s=>t.value.autoStart=s)},{default:o(()=>[f("Skip welcome screen")]),_:1},8,["checked"])]),_:1}),a(e(D),{level:4},{default:o(()=>[f(" End Screen ")]),_:1}),a(e(S),{label:"End text"},{default:o(()=>[a(e(O),{value:t.value.endMessage,"onUpdate:value":n[6]||(n[6]=s=>t.value.endMessage=s),type:"text",placeholder:"Thank you"},null,8,["value"])]),_:1}),a(e(S),{label:"Restart button label"},{default:o(()=>[a(e(O),{value:t.value.restartButtonText,"onUpdate:value":n[7]||(n[7]=s=>t.value.restartButtonText=s),placeholder:"Restart",type:"text",disabled:!t.value.allowRestart},null,8,["value","disabled"])]),_:1}),a(e(S),{help:!t.value.isInitial&&"Only initial forms can be restarted"},{default:o(()=>[a(e(K),{checked:t.value.allowRestart,"onUpdate:checked":n[8]||(n[8]=s=>t.value.allowRestart=s),disabled:!t.value.isInitial},{default:o(()=>[f("Show restart button at the end")]),_:1},8,["checked","disabled"])]),_:1},8,["help"]),a(e(D),{level:4},{default:o(()=>[f(" Alert Messages ")]),_:1}),a(e(S),{label:"Error message"},{default:o(()=>[a(e(O),{value:t.value.errorMessage,"onUpdate:value":n[9]||(n[9]=s=>t.value.errorMessage=s),type:"text",placeholder:"Something went wrong"},null,8,["value"])]),_:1})]),_:1}))}}),kt=$({__name:"QueryParamsModal",props:{open:{type:Boolean},close:{type:Function},queryParams:{}},emits:["update:query-params"],setup(l,{emit:r}){const t=l,m=()=>{const s=Object.keys(t.queryParams).length+1;r("update:query-params",{...t.queryParams,[`param-${s}`]:"value"})},n=s=>{const g={...t.queryParams};delete g[s],r("update:query-params",g)};return(s,g)=>(v(),b(e(tt),{open:s.open,onCancel:s.close},{footer:o(()=>[a(e(C),{type:"primary",onClick:s.close},{default:o(()=>[f("OK")]),_:1},8,["onClick"])]),default:o(()=>[a(e(q),{vertical:"",gap:"20"},{default:o(()=>[a(e(N),null,{default:o(()=>[f("Query params")]),_:1}),(v(!0),I(B,null,Pe(Object.entries(s.queryParams),y=>(v(),b(e(S),{key:y[0]},{default:o(()=>[a(e(Re),null,{default:o(()=>[a(e(O),{value:y[0],"onUpdate:value":w=>y[0]=w,type:"text",placeholder:"name"},null,8,["value","onUpdate:value"]),a(e(O),{value:y[1],"onUpdate:value":w=>y[1]=w,type:"text",placeholder:"value",disabled:y[0]===e(fe)},null,8,["value","onUpdate:value","disabled"]),a(e(C),{danger:"",onClick:w=>n(y[0])},{default:o(()=>[f("remove")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),a(e(S),null,{default:o(()=>[a(e(C),{type:"dashed",style:{width:"100%"},onClick:m},{default:o(()=>[f(" Add Query Param ")]),_:1})]),_:1})]),_:1})]),_:1},8,["open","onCancel"]))}}),_t=l=>(de("data-v-d2213ae3"),l=l(),pe(),l),wt={key:0},St={key:1},At=_t(()=>U("br",null,null,-1)),xt={class:"form-preview-container"},Tt=$({__name:"FormTester",props:{formRunnerData:{},formState:{},userEmail:{},disabled:{type:Boolean},queryParams:{},stageRunId:{}},emits:["start","reset","navigate","logout","auto-fill-clicked","action-clicked","update-widget-errors","update-widget-value","update:query-params"],setup(l,{emit:r}){var A;const t=l,m=k(!1),n=()=>{m.value=!0},s=()=>{m.value=!1},g=E(()=>{const i=P.value.query?`?${P.value.query}`:"";return`/${t.formRunnerData.path}${i}`}),y=k((A=ee.get("dontShowReloadHelper"))!=null?A:!1),w=()=>{ee.set("dontShowReloadHelper",!0),y.value=!0},P=E(()=>{const i=new URLSearchParams(t.queryParams).toString();return{subdomain:"[your-subdomain]",path:t.formRunnerData.path,query:i}});return(i,u)=>{const R=Ee("icon");return v(),I(B,null,[a(e(j),{layout:"vertical"},{default:o(()=>[a(e(q),{gap:"small"},{default:o(()=>[i.formState.type&&e(Me).includes(i.formState.type)?(v(),b(e(M),{key:0,placement:"bottom",visible:y.value?void 0:!0},{content:o(()=>[y.value?(v(),I("span",wt,"Reload form")):(v(),I("span",St,[f(" You can reload the form here"),At,a(e(at),{onClick:w},{default:o(()=>[f("Don't show this again")]),_:1})]))]),default:o(()=>[a(e(C),{disabled:i.disabled,onClick:u[0]||(u[0]=h=>r("reset"))},{default:o(()=>[a(R,{path:e(Ze),width:"20"},null,8,["path"])]),_:1},8,["disabled"])]),_:1},8,["visible"])):T("",!0),e(me).includes(i.formState.type)?(v(),b(e(M),{key:1,placement:"bottom"},{content:o(()=>[f("Stop form")]),default:o(()=>[a(e(C),{onClick:u[1]||(u[1]=h=>r("reset"))},{default:o(()=>[a(R,{path:e(Ke),width:"20"},null,8,["path"])]),_:1})]),_:1})):T("",!0),i.formState.type==="waiting"?(v(),b(e(M),{key:2,placement:"bottom"},{content:o(()=>[f("Start form")]),default:o(()=>[a(e(C),{disabled:i.disabled,onClick:u[2]||(u[2]=h=>r("start"))},{default:o(()=>[a(R,{path:e(et),width:"20"},null,8,["path"])]),_:1},8,["disabled"])]),_:1})):T("",!0),a(e(O),{value:g.value,class:"url-preview",onClick:n},null,8,["value"])]),_:1}),U("div",xt,[a(Ne,{"is-preview":"","form-runner-data":i.formRunnerData,disabled:i.disabled,"form-state":i.formState,"user-email":i.userEmail,onUpdateWidgetErrors:u[3]||(u[3]=(h,c)=>r("update-widget-errors",h,c)),onUpdateWidgetValue:u[4]||(u[4]=(h,c)=>r("update-widget-value",h,c)),onActionClicked:u[5]||(u[5]=h=>r("action-clicked",h)),onNavigate:u[6]||(u[6]=h=>r("navigate",h)),onLogout:u[7]||(u[7]=h=>r("logout")),onAutofillClicked:u[8]||(u[8]=h=>r("auto-fill-clicked"))},null,8,["form-runner-data","disabled","form-state","user-email"])])]),_:1}),a(kt,{"query-params":i.queryParams,open:m.value,close:s,"onUpdate:queryParams":u[9]||(u[9]=h=>r("update:query-params",h))},null,8,["query-params","open"])],64)}}});const Ot=ce(Tt,[["__scopeId","data-v-d2213ae3"]]),Ct={style:{width:"50%"}},Pt={style:{width:"50%"}},Ra=$({__name:"FormEditor",setup(l){const r=Ue(),t=$e(),m=k(null),n=k("source-code"),s=k("preview"),g=k(null),y=k(null),w=k(null),P=k(null),A=k({}),i=k(null),u=k(!1),R=(d,p)=>{var x;(x=m.value)==null||x.setHighlight(d,p)},h=()=>{var d,p;(d=m.value)==null||d.restartEditor(),(p=m.value)==null||p.startPreviewMode()};Fe(()=>i.value?A.value={...A.value,[fe]:i.value}:null);const{result:c,loading:L,refetch:ge}=Qe(async()=>{const[d,p,x]=await Promise.all([ze.get(t.params.id),oe.get(),oe.readTestData()]);return d.updateInitialState("test_data",x),w.value=d.makeRunnerData(p),De({form:d,workspace:p})});te([A,u,c],()=>{if(!c.value)return;const d=c.value.form.isInitial&&!u.value||!c.value.form.isInitial&&!i.value;g.value=new qe({formRunnerData:c.value.form.makeRunnerData(c.value.workspace),queryParams:A.value,userManager:Oe,logService:Q,connectionManager:new Be(c.value.form.id,d),onFormStart:h,onFormEnd:ye,onRedirect:Se,onAuthUpdate:x=>P.value=x,onStateUpdate:x=>y.value=x,onStackTraceUpdate:R});const p=g.value.getState();y.value=p.formState,P.value=p.passwordlessUser});const ye=()=>{var d;i.value=null,(d=m.value)==null||d.restartEditor()};function be(){var d;(d=g.value)==null||d.start()}function he(){var d,p;(d=m.value)==null||d.restartEditor(),(p=g.value)==null||p.reset()}const ke=d=>{ae("editor",r,d.path)};function _e(){r.push({name:"stages"})}const H=k(null),we=d=>{!c.value||(c.value.form.file=d)},Q=He.create();function Se(d,p){ae("editor",r,d,p)}const Ae=()=>{var d;r.push({name:"formPreview",query:t.query,params:{id:(d=c.value)==null?void 0:d.form.id}})},xe=()=>{var p;let d=`/${(p=c.value)==null?void 0:p.form.path}`;i.value&&(d+=`?abstra-run-id=${i.value}`),window.open(d,"_blank")};return te(()=>t.params.id,()=>{ge()}),(d,p)=>(v(),b(Le,{"no-margins":""},{navbar:o(()=>[e(c)?(v(),b(e(ot),{key:0,title:e(c).form.title,style:{padding:"5px 25px","margin-bottom":"15px"},onBack:_e},{extra:o(()=>[a(Ge,{"docs-path":"forms/overview","show-v-s-code-button":"","show-save-button":!1,"editing-model":e(c).form},null,8,["editing-model"])]),_:1},8,["title"])):T("",!0)]),content:o(()=>[e(c)?(v(),b(e(q),{key:0,gap:"40",style:{width:"calc(100% - 80px)"}},{default:o(()=>{var x,z,G,J,Y,X;return[U("div",Ct,[a(e(le),{"active-key":n.value,"onUpdate:activeKey":p[0]||(p[0]=_=>n.value=_)},{rightExtra:o(()=>[a(Je,{model:e(c).form},null,8,["model"])]),default:o(()=>[a(e(F),{key:"source-code",tab:"Source code"}),a(e(F),{key:"settings",tab:"Settings"}),a(e(F),{key:"notifications",tab:"Notifications"}),a(e(F),{key:"test-data",tab:"Thread data"})]),_:1},8,["active-key"]),n.value==="source-code"?(v(),b(Ve,{key:0,ref_key:"code",ref:m,script:e(c).form,workspace:e(c).workspace,onUpdateFile:we},null,8,["script","workspace"])):T("",!0),n.value==="settings"?(v(),b(ht,{key:1,form:e(c).form},null,8,["form"])):T("",!0),n.value==="notifications"?(v(),b(bt,{key:2,form:e(c).form},null,8,["form"])):T("",!0),n.value==="test-data"?(v(),b(Ye,{key:3,"enable-start-thread":u.value,"onUpdate:enableStartThread":p[1]||(p[1]=_=>u.value=_),"stage-run-id":i.value,"onUpdate:stageRunId":p[2]||(p[2]=_=>i.value=_),stage:e(c).form,onFixInvalidJson:p[3]||(p[3]=(_,Te)=>{var Z;return(Z=H.value)==null?void 0:Z.fixJson(_,Te)})},null,8,["enable-start-thread","stage-run-id","stage"])):T("",!0)]),U("div",Pt,[a(e(le),{"active-key":s.value,"onUpdate:activeKey":p[4]||(p[4]=_=>s.value=_)},{rightExtra:o(()=>[a(e(q),{gap:"8",align:"center"},{default:o(()=>{var _;return[y.value&&e(me).includes((_=y.value)==null?void 0:_.type)?(v(),b(e(rt),{key:0,color:"green",style:{"margin-right":"20px"}},{default:o(()=>[f(" Running ")]),_:1})):T("",!0),a(ft,{path:e(c).form.path},null,8,["path"]),i.value||e(c).form.isInitial&&u.value?(v(),b(e(C),{key:1,target:"_blank",onClick:xe},{icon:o(()=>[a(e(pt))]),default:o(()=>[f(" Open ")]),_:1})):(v(),b(e(C),{key:2,target:"_blank",onClick:Ae},{icon:o(()=>[a(e(nt))]),default:o(()=>[f(" Preview ")]),_:1}))]}),_:1})]),default:o(()=>[a(e(F),{key:"preview",tab:"Preview"})]),_:1},8,["active-key"]),e(L)||!w.value||!y.value?(v(),b(e(Ie),{key:0})):s.value==="preview"?(v(),b(Ot,{key:1,"query-params":A.value,"onUpdate:queryParams":p[5]||(p[5]=_=>A.value=_),"form-state":y.value,"form-runner-data":w.value,"user-email":(x=P.value)==null?void 0:x.claims.email,disabled:e(c).form.hasChanges(),"stage-run-id":i.value,onStart:be,onReset:he,onLogout:(z=g.value)==null?void 0:z.logout,onActionClicked:(G=g.value)==null?void 0:G.handleActionClick,onNavigate:ke,onUpdateWidgetErrors:(J=g.value)==null?void 0:J.updateWidgetFrontendErrors,onUpdateWidgetValue:(Y=g.value)==null?void 0:Y.updateWidgetValue,onAutoFillClicked:(X=g.value)==null?void 0:X.handleAutofillClick},null,8,["query-params","form-state","form-runner-data","user-email","disabled","stage-run-id","onLogout","onActionClicked","onUpdateWidgetErrors","onUpdateWidgetValue","onAutoFillClicked"])):T("",!0)])]}),_:1})):T("",!0)]),footer:o(()=>[a(We,{ref_key:"smartConsole",ref:H,runtime:"forms","log-service":e(Q)},null,8,["log-service"])]),_:1}))}});export{Ra as default};
//# sourceMappingURL=FormEditor.18c230fa.js.map
