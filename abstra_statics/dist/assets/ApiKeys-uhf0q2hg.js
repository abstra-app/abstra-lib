import{C as g}from"./CrudView-C4zy7xq5.js";import{a as x,r as I,af as e,ac as C,c as A,aO as P,aP as D,b as M,e as h,j as s,u as a,w as l,aQ as j,S as _,U as u,ak as T,a8 as V,M as B}from"./jwt-decode.esm-80SDDt3I.js";import{a as E}from"./asyncComputed-wor2sbCB.js";import{A as c}from"./apiKey-n0bRHwdH.js";import"./router-VfVnjNVu.js";import{M as N}from"./member-D_NKJpsL.js";import{P as S}from"./project-mfvn_X73.js";import"./tables-BxyOn-O0.js";import"./DocsButton.vue_vue_type_script_setup_true_lang-C2gUgk0p.js";import"./constants-8A1W-RsA.js";import"./url-BlpgKQeZ.js";import"./PhDotsThreeVertical.vue-D6FjmJ3v.js";import"./index-C6VGghbh.js";import"./ts.worker-Bz6Nlnfa.js";import"./record-CfiewpO8.js";import"./string-BMCZhm8A.js";(function(){try{var o=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},i=new Error().stack;i&&(o._sentryDebugIds=o._sentryDebugIds||{},o._sentryDebugIds[i]="54f253cc-64c7-4929-a046-61e9c4a3e41b",o._sentryDebugIdIdentifier="sentry-dbid-54f253cc-64c7-4929-a046-61e9c4a3e41b")}catch{}})();const ee=x({__name:"ApiKeys",setup(o){const i=I(null),m=[{key:"name",label:e.translate("i18n_apikeysview_field_name")}],r=C().params.projectId,y=new N,{loading:f,result:w,refetch:d}=E(async()=>Promise.all([c.list(r),S.get(r).then(t=>y.list(t.organizationId))]).then(([t,n])=>t.map(p=>({apiKey:p,member:n.find(k=>k.authorId===p.ownerId)})))),v=async t=>{const n=await c.create({projectId:r,name:t.name});d(),i.value=n.value},b=A(()=>({columns:[{title:e.translate("i18n_apikeysview_column_name")},{title:e.translate("i18n_apikeysview_column_creation_date")},{title:e.translate("i18n_apikeysview_column_owner")},{title:"",align:"right"}],rows:w.value?.map(({apiKey:t,member:n})=>({key:t.id,cells:[{type:"text",text:t.name},{type:"text",text:P(t.createdAt)},{type:"text",text:n?.email??e.translate("i18n_apikeysview_owner_unknown")},{type:"actions",actions:[{label:e.translate("i18n_apikeysview_action_delete"),icon:D,dangerous:!0,onClick:async()=>{await c.delete(r,t.id),d()}}]}]}))??[]}));return(t,n)=>(h(),M(B,null,[s(g,{"entity-name":a(e).translate("i18n_apikeysview_entity_name"),"create-button-text":a(e).translate("i18n_apikeysview_create_button"),loading:a(f),title:a(e).translate("i18n_apikeysview_title"),description:a(e).translate("i18n_apikeysview_description"),"empty-title":a(e).translate("i18n_apikeysview_empty_title"),table:b.value,fields:m,create:v},null,8,["entity-name","create-button-text","loading","title","description","empty-title","table"]),s(a(V),{open:!!i.value,title:a(e).translate("i18n_apikeysview_modal_title"),onCancel:n[0]||(n[0]=p=>i.value=null)},{footer:l(()=>[...n[1]||(n[1]=[])]),default:l(()=>[s(a(j),null,{default:l(()=>[_(u(a(e).translate("i18n_apikeysview_modal_description")),1)]),_:1}),s(a(T),{code:"",copyable:""},{default:l(()=>[_(u(i.value),1)]),_:1})]),_:1},8,["open","title"])],64))}});export{ee as default};
//# sourceMappingURL=ApiKeys-uhf0q2hg.js.map
