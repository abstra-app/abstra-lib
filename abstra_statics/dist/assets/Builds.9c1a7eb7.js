import{r as W}from"./router.ef5c7692.js";import{d as S,X as b,H as y,b as n,eu as g,dj as z,ew as $,ez as I,e as f,f as p,eG as V,f9 as Q,fa as X,eI as Y,c as h,w as m,u as l,bC as J,bg as K,be as ee,aq as w,cC as j,eD as k,ck as te,eA as ae,o as re,K as le,r as ne,aC as oe,eR as ie,aG as ue,cy as se,ev as ce,bf as de,v as pe}from"./outputWidgets.3681a2a5.js";import{a as G}from"./asyncComputed.317e87c5.js";import{B as me,a as ge}from"./build.8aa6ae83.js";import"./index.63f126f8.js";import{P as fe}from"./project.8bd8a1e2.js";import{C as ve}from"./CrudView.b5e99bd9.js";import{G as he}from"./PhArrowCounterClockwise.vue.7fbb1265.js";import{H as ye}from"./PhCube.vue.837408e0.js";import{F as be,a as Ae,G as Ce}from"./PhWebhooksLogo.vue.e9e0d5c5.js";import{A as Z}from"./Text.1bf2a6e4.js";import{A as we}from"./Item.a2995b75.js";import{A as $e}from"./index.83a3206f.js";import{g as ke}from"./datetime.7a6150d0.js";import{A as _e}from"./Paragraph.326f3875.js";import{C as Oe}from"./CloseCircleOutlined.354428c8.js";import{L as H}from"./LoadingOutlined.4643c534.js";import{A as Ze}from"./index.f44ff305.js";import{M as xe}from"./Modal.7229d3ef.js";import"./Form.c15ea82d.js";import"./hasIn.127ddf2a.js";import"./popupNotifcation.d8032226.js";import"./index.cf4c23b9.js";import"./record.220fa006.js";import"./pubsub.916b1e4d.js";import"./DocsButton.vue_vue_type_script_setup_true_lang.b3245b51.js";import"./BookOutlined.2d246e57.js";import"./url.ec571b6b.js";import"./index.4f6b4519.js";import"./Title.142e78f1.js";(function(){try{var a=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[e]="7ce6bb52-b196-4406-a112-c7d17e0b319c",a._sentryDebugIdIdentifier="sentry-dbid-7ce6bb52-b196-4406-a112-c7d17e0b319c")}catch{}})();var Se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"};const Me=Se;var Ve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm-88-532h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8zm224 0h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8z"}}]},name:"pause-circle",theme:"outlined"};const Pe=Ve,je=["width","height","fill","transform"],He={key:0},ze=f("path",{d:"M140,80v41.21l34.17,20.5a12,12,0,1,1-12.34,20.58l-40-24A12,12,0,0,1,116,128V80a12,12,0,0,1,24,0ZM128,28A99.38,99.38,0,0,0,57.24,57.34c-4.69,4.74-9,9.37-13.24,14V64a12,12,0,0,0-24,0v40a12,12,0,0,0,12,12H72a12,12,0,0,0,0-24H57.77C63,86,68.37,80.22,74.26,74.26a76,76,0,1,1,1.58,109,12,12,0,0,0-16.48,17.46A100,100,0,1,0,128,28Z"},null,-1),Ie=[ze],Be={key:1},Le=f("path",{d:"M216,128a88,88,0,1,1-88-88A88,88,0,0,1,216,128Z",opacity:"0.2"},null,-1),De=f("path",{d:"M136,80v43.47l36.12,21.67a8,8,0,0,1-8.24,13.72l-40-24A8,8,0,0,1,120,128V80a8,8,0,0,1,16,0Zm-8-48A95.44,95.44,0,0,0,60.08,60.15C52.81,67.51,46.35,74.59,40,82V64a8,8,0,0,0-16,0v40a8,8,0,0,0,8,8H72a8,8,0,0,0,0-16H49c7.15-8.42,14.27-16.35,22.39-24.57a80,80,0,1,1,1.66,114.75,8,8,0,1,0-11,11.64A96,96,0,1,0,128,32Z"},null,-1),Ee=[Le,De],Ne={key:2},Ge=f("path",{d:"M224,128A96,96,0,0,1,62.11,197.82a8,8,0,1,1,11-11.64A80,80,0,1,0,71.43,71.43C67.9,75,64.58,78.51,61.35,82L77.66,98.34A8,8,0,0,1,72,112H32a8,8,0,0,1-8-8V64a8,8,0,0,1,13.66-5.66L50,70.7c3.22-3.49,6.54-7,10.06-10.55A96,96,0,0,1,224,128ZM128,72a8,8,0,0,0-8,8v48a8,8,0,0,0,3.88,6.86l40,24a8,8,0,1,0,8.24-13.72L136,123.47V80A8,8,0,0,0,128,72Z"},null,-1),Te=[Ge],Fe={key:3},qe=f("path",{d:"M134,80v44.6l37.09,22.25a6,6,0,0,1-6.18,10.3l-40-24A6,6,0,0,1,122,128V80a6,6,0,0,1,12,0Zm-6-46A93.4,93.4,0,0,0,61.51,61.56c-8.58,8.68-16,17-23.51,25.8V64a6,6,0,0,0-12,0v40a6,6,0,0,0,6,6H72a6,6,0,0,0,0-12H44.73C52.86,88.29,60.79,79.35,70,70a82,82,0,1,1,1.7,117.62,6,6,0,1,0-8.24,8.72A94,94,0,1,0,128,34Z"},null,-1),Re=[qe],Ue={key:4},We=f("path",{d:"M136,80v43.47l36.12,21.67a8,8,0,0,1-8.24,13.72l-40-24A8,8,0,0,1,120,128V80a8,8,0,0,1,16,0Zm-8-48A95.44,95.44,0,0,0,60.08,60.15C52.81,67.51,46.35,74.59,40,82V64a8,8,0,0,0-16,0v40a8,8,0,0,0,8,8H72a8,8,0,0,0,0-16H49c7.15-8.42,14.27-16.35,22.39-24.57a80,80,0,1,1,1.66,114.75,8,8,0,1,0-11,11.64A96,96,0,1,0,128,32Z"},null,-1),Qe=[We],Xe={key:5},Ye=f("path",{d:"M132,80v45.74l38.06,22.83a4,4,0,0,1-4.12,6.86l-40-24A4,4,0,0,1,124,128V80a4,4,0,0,1,8,0Zm-4-44A91.42,91.42,0,0,0,62.93,63C53.05,73,44.66,82.47,36,92.86V64a4,4,0,0,0-8,0v40a4,4,0,0,0,4,4H72a4,4,0,0,0,0-8H40.47C49.61,89,58.3,79,68.6,68.6a84,84,0,1,1,1.75,120.49,4,4,0,1,0-5.5,5.82A92,92,0,1,0,128,36Z"},null,-1),Je=[Ye],Ke={name:"PhClockCounterClockwise"},e1=S({...Ke,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(a){const e=a,t=b("weight","regular"),s=b("size","1em"),i=b("color","currentColor"),_=b("mirrored",!1),u=y(()=>{var o;return(o=e.weight)!=null?o:t}),v=y(()=>{var o;return(o=e.size)!=null?o:s}),A=y(()=>{var o;return(o=e.color)!=null?o:i}),O=y(()=>e.mirrored!==void 0?e.mirrored?"scale(-1, 1)":void 0:_?"scale(-1, 1)":void 0);return(o,M)=>(n(),g("svg",I({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:v.value,height:v.value,fill:A.value,transform:O.value},o.$attrs),[z(o.$slots,"default"),u.value==="bold"?(n(),g("g",He,Ie)):u.value==="duotone"?(n(),g("g",Be,Ee)):u.value==="fill"?(n(),g("g",Ne,Te)):u.value==="light"?(n(),g("g",Fe,Re)):u.value==="regular"?(n(),g("g",Ue,Qe)):u.value==="thin"?(n(),g("g",Xe,Je)):$("",!0)],16,je))}}),t1=["width","height","fill","transform"],a1={key:0},r1=f("path",{d:"M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm0,192a84,84,0,1,1,84-84A84.09,84.09,0,0,1,128,212Zm-16-84a16,16,0,1,1-16-16A16,16,0,0,1,112,128Zm64,0a16,16,0,1,1-16-16A16,16,0,0,1,176,128Z"},null,-1),l1=[r1],n1={key:1},o1=f("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"},null,-1),i1=f("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm56-88a12,12,0,1,1-12-12A12,12,0,0,1,184,128Zm-44,0a12,12,0,1,1-12-12A12,12,0,0,1,140,128Zm-44,0a12,12,0,1,1-12-12A12,12,0,0,1,96,128Z"},null,-1),u1=[o1,i1],s1={key:2},c1=f("path",{d:"M128,24A104,104,0,1,0,232,128,104.13,104.13,0,0,0,128,24ZM84,140a12,12,0,1,1,12-12A12,12,0,0,1,84,140Zm44,0a12,12,0,1,1,12-12A12,12,0,0,1,128,140Zm44,0a12,12,0,1,1,12-12A12,12,0,0,1,172,140Z"},null,-1),d1=[c1],p1={key:3},m1=f("path",{d:"M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm0,192a90,90,0,1,1,90-90A90.1,90.1,0,0,1,128,218Zm10-90a10,10,0,1,1-10-10A10,10,0,0,1,138,128Zm-44,0a10,10,0,1,1-10-10A10,10,0,0,1,94,128Zm88,0a10,10,0,1,1-10-10A10,10,0,0,1,182,128Z"},null,-1),g1=[m1],f1={key:4},v1=f("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm12-88a12,12,0,1,1-12-12A12,12,0,0,1,140,128Zm44,0a12,12,0,1,1-12-12A12,12,0,0,1,184,128Zm-88,0a12,12,0,1,1-12-12A12,12,0,0,1,96,128Z"},null,-1),h1=[v1],y1={key:5},b1=f("path",{d:"M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm0,192a92,92,0,1,1,92-92A92.1,92.1,0,0,1,128,220Zm8-92a8,8,0,1,1-8-8A8,8,0,0,1,136,128Zm-44,0a8,8,0,1,1-8-8A8,8,0,0,1,92,128Zm88,0a8,8,0,1,1-8-8A8,8,0,0,1,180,128Z"},null,-1),A1=[b1],C1={name:"PhDotsThreeCircle"},w1=S({...C1,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(a){const e=a,t=b("weight","regular"),s=b("size","1em"),i=b("color","currentColor"),_=b("mirrored",!1),u=y(()=>{var o;return(o=e.weight)!=null?o:t}),v=y(()=>{var o;return(o=e.size)!=null?o:s}),A=y(()=>{var o;return(o=e.color)!=null?o:i}),O=y(()=>e.mirrored!==void 0?e.mirrored?"scale(-1, 1)":void 0:_?"scale(-1, 1)":void 0);return(o,M)=>(n(),g("svg",I({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:v.value,height:v.value,fill:A.value,transform:O.value},o.$attrs),[z(o.$slots,"default"),u.value==="bold"?(n(),g("g",a1,l1)):u.value==="duotone"?(n(),g("g",n1,u1)):u.value==="fill"?(n(),g("g",s1,d1)):u.value==="light"?(n(),g("g",p1,g1)):u.value==="regular"?(n(),g("g",f1,h1)):u.value==="thin"?(n(),g("g",y1,A1)):$("",!0)],16,t1))}}),$1=["width","height","fill","transform"],k1={key:0},_1=f("path",{d:"M228,152v56a20,20,0,0,1-20,20H48a20,20,0,0,1-20-20V152a12,12,0,0,1,24,0v52H204V152a12,12,0,0,1,24,0Zm-108.49,8.49a12,12,0,0,0,17,0l40-40a12,12,0,0,0-17-17L140,123V40a12,12,0,0,0-24,0v83L96.49,103.51a12,12,0,0,0-17,17Z"},null,-1),O1=[_1],Z1={key:1},x1=f("path",{d:"M168,112l-40,40L88,112Z",opacity:"0.2"},null,-1),S1=f("path",{d:"M224,152v56a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V152a8,8,0,0,1,16,0v56H208V152a8,8,0,0,1,16,0ZM82.34,117.66A8,8,0,0,1,88,104h32V40a8,8,0,0,1,16,0v64h32a8,8,0,0,1,5.66,13.66l-40,40a8,8,0,0,1-11.32,0Zm25,2.34L128,140.69,148.69,120Z"},null,-1),M1=[x1,S1],V1={key:2},P1=f("path",{d:"M82.34,117.66A8,8,0,0,1,88,104h32V40a8,8,0,0,1,16,0v64h32a8,8,0,0,1,5.66,13.66l-40,40a8,8,0,0,1-11.32,0ZM216,144a8,8,0,0,0-8,8v56H48V152a8,8,0,0,0-16,0v56a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V152A8,8,0,0,0,216,144Z"},null,-1),j1=[P1],H1={key:3},z1=f("path",{d:"M222,152v56a14,14,0,0,1-14,14H48a14,14,0,0,1-14-14V152a6,6,0,0,1,12,0v56a2,2,0,0,0,2,2H208a2,2,0,0,0,2-2V152a6,6,0,0,1,12,0Zm-98.24,4.24a6,6,0,0,0,8.48,0l40-40a6,6,0,0,0-8.48-8.48L134,137.51V40a6,6,0,0,0-12,0v97.51L92.24,107.76a6,6,0,0,0-8.48,8.48Z"},null,-1),I1=[z1],B1={key:4},L1=f("path",{d:"M224,152v56a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V152a8,8,0,0,1,16,0v56H208V152a8,8,0,0,1,16,0Zm-101.66,5.66a8,8,0,0,0,11.32,0l40-40a8,8,0,0,0-11.32-11.32L136,132.69V40a8,8,0,0,0-16,0v92.69L93.66,106.34a8,8,0,0,0-11.32,11.32Z"},null,-1),D1=[L1],E1={key:5},N1=f("path",{d:"M220,152v56a12,12,0,0,1-12,12H48a12,12,0,0,1-12-12V152a4,4,0,0,1,8,0v56a4,4,0,0,0,4,4H208a4,4,0,0,0,4-4V152a4,4,0,0,1,8,0Zm-94.83,2.83a4,4,0,0,0,5.66,0l40-40a4,4,0,1,0-5.66-5.66L132,142.34V40a4,4,0,0,0-8,0V142.34L90.83,109.17a4,4,0,0,0-5.66,5.66Z"},null,-1),G1=[N1],T1={name:"PhDownloadSimple"},F1=S({...T1,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(a){const e=a,t=b("weight","regular"),s=b("size","1em"),i=b("color","currentColor"),_=b("mirrored",!1),u=y(()=>{var o;return(o=e.weight)!=null?o:t}),v=y(()=>{var o;return(o=e.size)!=null?o:s}),A=y(()=>{var o;return(o=e.color)!=null?o:i}),O=y(()=>e.mirrored!==void 0?e.mirrored?"scale(-1, 1)":void 0:_?"scale(-1, 1)":void 0);return(o,M)=>(n(),g("svg",I({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:v.value,height:v.value,fill:A.value,transform:O.value},o.$attrs),[z(o.$slots,"default"),u.value==="bold"?(n(),g("g",k1,O1)):u.value==="duotone"?(n(),g("g",Z1,M1)):u.value==="fill"?(n(),g("g",V1,j1)):u.value==="light"?(n(),g("g",H1,I1)):u.value==="regular"?(n(),g("g",B1,D1)):u.value==="thin"?(n(),g("g",E1,G1)):$("",!0)],16,$1))}});function T(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},s=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),s.forEach(function(i){q1(a,i,t[i])})}return a}function q1(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}var B=function(e,t){var s=T({},e,t.attrs);return p(V,T({},s,{icon:Q}),null)};B.displayName="CheckCircleOutlined";B.inheritAttrs=!1;const R1=B;function F(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},s=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),s.forEach(function(i){U1(a,i,t[i])})}return a}function U1(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}var L=function(e,t){var s=F({},e,t.attrs);return p(V,F({},s,{icon:X}),null)};L.displayName="ExclamationCircleOutlined";L.inheritAttrs=!1;const W1=L;function q(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},s=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),s.forEach(function(i){Q1(a,i,t[i])})}return a}function Q1(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}var D=function(e,t){var s=q({},e,t.attrs);return p(V,q({},s,{icon:Me}),null)};D.displayName="MinusCircleOutlined";D.inheritAttrs=!1;const X1=D;function R(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},s=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),s.forEach(function(i){Y1(a,i,t[i])})}return a}function Y1(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}var E=function(e,t){var s=R({},e,t.attrs);return p(V,R({},s,{icon:Pe}),null)};E.displayName="PauseCircleOutlined";E.inheritAttrs=!1;const J1=E,K1={style:{display:"flex","align-items":"center",gap:"5px"}},et={key:1},tt=S({__name:"BuildInspector",props:{buildSpec:{}},setup(a){const e=a,t=Y(),s=i=>{t.push({name:"logs",params:{projectId:e.buildSpec.projectId},query:i.logQuery})};return(i,_)=>i.buildSpec.runtimes.length>0?(n(),h(l($e),{key:0,"item-layout":"horizontal","data-source":i.buildSpec.runtimes},{renderItem:m(({item:u})=>[p(l(we),null,{actions:m(()=>[p(l(J),null,{overlay:m(()=>[p(l(K),null,{default:m(()=>[p(l(ee),{onClick:v=>s(u)},{default:m(()=>[f("div",K1,[p(l(e1)),p(l(Z),null,{default:m(()=>[w(" View Logs")]),_:1})])]),_:2},1032,["onClick"])]),_:2},1024)]),default:m(()=>[p(l(w1),{style:{cursor:"pointer"}})]),_:2},1024)]),default:m(()=>[u.type=="form"?(n(),h(l(j),{key:0,size:"large"},{default:m(()=>[p(l(be)),p(l(Z),{strong:""},{default:m(()=>[w(k(u.title),1)]),_:2},1024),p(l(Z),{type:"secondary",code:""},{default:m(()=>[w("/"+k(u.path),1)]),_:2},1024)]),_:2},1024)):$("",!0),u.type=="job"?(n(),h(l(j),{key:1,size:"large"},{default:m(()=>[p(l(Ae)),p(l(Z),{strong:""},{default:m(()=>[w(k(u.title),1)]),_:2},1024),p(l(Z),{type:"secondary",code:""},{default:m(()=>[w(k(u.schedule),1)]),_:2},1024)]),_:2},1024)):$("",!0),u.type=="hook"?(n(),h(l(j),{key:2,size:"large"},{default:m(()=>[p(l(Ce)),p(l(Z),{strong:""},{default:m(()=>[w(k(u.title),1)]),_:2},1024),p(l(Z),{type:"secondary",code:""},{default:m(()=>[w("/_hooks/"+k(u.path),1)]),_:2},1024)]),_:2},1024)):$("",!0)]),_:2},1024)]),_:1},8,["data-source"])):(n(),g("div",et,[p(l(te),{description:"No runtimes found. Make sure your project has forms, hooks or jobs before deploying it"})]))}}),at=S({__name:"Builds",setup(a){const t=ae().params.projectId,{loading:s,result:i,refetch:_}=G(async()=>{const[r,d]=await Promise.all([me.list(t),fe.getStatus(t)]);return{b:r.map(C=>({build:C,status:d.filter(x=>x.buildId==C.id).map(x=>x.status)})),status:d}});let u;re(()=>{u=setInterval(_,1e4)}),le(()=>{clearInterval(u)});const v=ne(null),A=G(async()=>v.value?await ge.get(v.value):null),O=()=>{var c;const r=(c=i.value)==null?void 0:c.b.find(C=>C.build.id===v.value);return`Build ${r==null?void 0:r.build.id.slice(0,8)} - ${r==null?void 0:r.build.createdAt.toLocaleString()}`},o=[{text:"Deploying",tagColor:"blue",check:r=>{var d,c;return(c=r.build.latest&&r.status.some(C=>C=="Running")&&((d=i.value)==null?void 0:d.status.some(C=>C.buildId!==r.build.id)))!=null?c:!1},loading:!0},{text:"Deactivating",tagColor:"orange",check:r=>r.build.status==="success"&&!r.build.latest&&r.status.some(d=>d=="Running"),loading:!0},{text:"Live",tagColor:"green",check:r=>r.build.latest&&r.status.some(d=>d=="Running")},{text:"Sleeping",tagColor:"cyan",check:r=>r.build.latest&&r.status.length===0},{text:"Failed",tagColor:"red",check:r=>r.build.latest&&r.status.some(d=>d=="Failed")},{text:"Inactive",tagColor:"default",check:r=>r.build.status==="success"},{text:"Aborted",tagColor:"default",check:r=>r.build.status==="aborted"||r.build.status==="aborted-by-user"},{text:"Failed",tagColor:"orange",check:r=>r.build.status==="failure"},{text:"Deploying",tagColor:"blue",check:r=>r.build.status==="in-progress",loading:!0},{text:"Uploading",tagColor:"yellow",check:r=>r.build.status==="pending"}];function M(r){var d,c,C,x,N;return{text:(c=(d=o.find(P=>P.check(r)))==null?void 0:d.text)!=null?c:"unknown",tagColor:(x=(C=o.find(P=>P.check(r)))==null?void 0:C.tagColor)!=null?x:"default",hover:(N=r.build.log)!=null?N:void 0}}const U=y(()=>{const r=[{name:"Id"},{name:"Date"},{name:"Abstra Version"},{name:"Status"},{name:"",align:"right"}];return i.value?{columns:r,rows:i.value.b.map(d=>{var c;return{key:d.build.id,cells:[{type:"text",text:d.build.id.slice(0,8)},{key:"date",type:"slot",payload:{date:ke(d.build.createdAt,{weekday:void 0}),distance:ie(d.build.createdAt)}},{type:"text",text:(c=d.build.abstraVersion)!=null?c:"-"},{key:"status",type:"slot",payload:M(d)},{type:"actions",actions:[{icon:ye,label:"Inspect build",onClick:async()=>{v.value=d.build.id,A.refetch()}},{icon:he,label:"View application logs",onClick:()=>W.push({name:"logs",params:{projectId:t},query:{buildId:d.build.id}})},{icon:F1,label:"Download files",onClick:()=>d.build.download()}]}]}})}:{columns:r,rows:[]}});return(r,d)=>(n(),g(oe,null,[p(ve,{"entity-name":"build",loading:l(s),title:"Builds",description:"Each build is a version of your project. You can create a new build by deploying your project from the local editor.","empty-title":"No builds here yet",table:U.value,live:""},{date:m(({payload:c})=>[p(l(ue),null,{title:m(()=>[w(k(c.distance),1)]),default:m(()=>[w(k(c.date)+" ",1)]),_:2},1024)]),status:m(({payload:c})=>[p(l(se),{open:c.hover?void 0:!1},{content:m(()=>[p(l(_e),{style:{width:"300px",overflow:"auto","font-family":"monospace"},content:c.hover,copyable:""},null,8,["content"])]),default:m(()=>[c.text!=="unknown"?(n(),h(l(Ze),{key:0,color:c.tagColor,style:ce({cursor:c.hover?"pointer":"default"})},{default:m(()=>[c.text==="Live"?(n(),h(l(R1),{key:0})):c.text==="Inactive"?(n(),h(l(X1),{key:1})):c.text==="Failed"?(n(),h(l(W1),{key:2})):c.text==="Aborted"?(n(),h(l(Oe),{key:3})):c.text==="Sleeping"?(n(),h(l(J1),{key:4})):c.text==="Uploading"?(n(),h(l(H),{key:5})):c.text==="Deploying"?(n(),h(l(H),{key:6})):c.text==="Deactivating"?(n(),h(l(H),{key:7})):$("",!0),w(" "+k(c.text),1)]),_:2},1032,["color","style"])):$("",!0)]),_:2},1032,["open"])]),_:1},8,["loading","table"]),v.value?(n(),h(l(xe),{key:0,footer:null,open:!!v.value,size:"large",width:"80%",title:O(),onCancel:d[0]||(d[0]=c=>v.value=null)},{default:m(()=>[!l(A).result.value||l(A).loading.value?(n(),h(l(de),{key:0})):l(A).result.value?(n(),h(tt,{key:1,"build-spec":l(A).result.value},null,8,["build-spec"])):$("",!0)]),_:1},8,["open","title"])):$("",!0)],64))}});const jt=pe(at,[["__scopeId","data-v-a07c796d"]]);export{jt as default};
//# sourceMappingURL=Builds.9c1a7eb7.js.map
