var K=Object.defineProperty;var ee=(a,e,t)=>e in a?K(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var d=(a,e,t)=>(ee(a,typeof e!="symbol"?e+"":e,t),t);import{f as l,ez as F,d as x,eA as q,eB as Y,r as A,G as J,b as i,eu as _,a_ as P,eC as $,e as O,eD as j,ey as z,I as W,ew as w,c as m,w as s,u as r,t as B,eE as te,eF as ae,aq as v,bU as y,cz as ne,cj as re,o as oe,K as se,cE as M,cA as le,a as ie}from"./outputWidgets.91878a00.js";import{f as ce,h as ue,j as de,c as pe,m as fe,p as _e,w as me}from"./icons.842bb077.js";import{T as he}from"./Tooltip.c00de598.js";import{_ as be}from"./logo.084e5d7c.js";import{W as ge}from"./workspaces.3263af3b.js";import{l as I,_ as ye}from"./DocsButton.vue_vue_type_script_setup_true_lang.6d618672.js";import{p as ve}from"./popupNotifcation.ab8393ee.js";import{a as Q}from"./asyncComputed.6ced1d7b.js";import{S as we}from"./index.4f542cbf.js";import{B as ke}from"./index.97ead4e8.js";import{M as U}from"./transButton.c9ea1045.js";import{A as Oe}from"./index.43a9b125.js";import{B as xe}from"./BaseLayout.7377c126.js";import{c as Se}from"./index.2b74a3c8.js";import"./record.8ded570d.js";import"./pubsub.862a9619.js";import"./url.dddb8fdb.js";import"./isNumeric.75337b1e.js";(function(){try{var a=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[e]="7a31e4f2-7a89-4e47-83d7-96ebdab8424c",a._sentryDebugIdIdentifier="sentry-dbid-7a31e4f2-7a89-4e47-83d7-96ebdab8424c")}catch{}})();var Ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0138.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"}}]},name:"github",theme:"filled"};const Pe=Ae;var $e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M865.3 244.7c-.3-.3-61.1 59.8-182.1 180.6l-84.9-84.9 180.9-180.9c-95.2-57.3-217.5-42.6-296.8 36.7A244.42 244.42 0 00419 432l1.8 6.7-283.5 283.4c-6.2 6.2-6.2 16.4 0 22.6l141.4 141.4c6.2 6.2 16.4 6.2 22.6 0l283.3-283.3 6.7 1.8c83.7 22.3 173.6-.9 236-63.3 79.4-79.3 94.1-201.6 38-296.6z"}}]},name:"tool",theme:"filled"};const je=$e;var Le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"};const Ce=Le;function R(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),n.forEach(function(o){Ie(a,o,t[o])})}return a}function Ie(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}var D=function(e,t){var n=R({},e,t.attrs);return l(F,R({},n,{icon:Pe}),null)};D.displayName="GithubFilled";D.inheritAttrs=!1;const Fe=D;function V(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),n.forEach(function(o){Be(a,o,t[o])})}return a}function Be(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}var T=function(e,t){var n=V({},e,t.attrs);return l(F,V({},n,{icon:je}),null)};T.displayName="ToolFilled";T.inheritAttrs=!1;const De=T;function H(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),n.forEach(function(o){Te(a,o,t[o])})}return a}function Te(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}var E=function(e,t){var n=H({},e,t.attrs);return l(F,H({},n,{icon:Ce}),null)};E.displayName="WarningOutlined";E.inheritAttrs=!1;const Ee=E,Ge={class:"sidebar"},Ne={class:"section-name"},ze=["onClick"],We={class:"item-name"},Me={key:0,class:"tag soon"},Ue={key:1,class:"tag beta"},Re={key:2,class:"tag cloud"},Ve=x({__name:"Sidebar",setup(a){var h;const e=q(),t=Y(),n=A((h=t.name)!=null?h:"forms"),o=J(()=>[{name:"Runtime",items:[{name:"Forms",icon:ce,path:"forms"},{name:"Hooks",icon:ue,path:"hooks"},{name:"Jobs",icon:de,path:"jobs",cloud:!0}]},{name:"Settings",items:[{name:"Style",icon:pe,path:"style"},{name:"Sidebar",icon:fe,path:"sidebar"},{name:"Packages",icon:_e,path:"requirements"}]}]),p=b=>{b.unavailable||(e.push(b.path),n.value=b.path)};return(b,S)=>(i(),_("div",Ge,[(i(!0),_(P,null,$(o.value,u=>(i(),_("div",{key:u.name,class:"section"},[O("span",Ne,j(u.name),1),(i(!0),_(P,null,$(u.items,c=>(i(),_("div",{key:c.name,role:"button",class:z(["item",{active:n.value===c.path,disabled:c.unavailable||u.cloud}]),tabindex:"0",onClick:f=>p(c)},[l(W,{class:z(["icon",{disabled:c.unavailable,active:n.value===c.path}]),path:c.icon,width:"20",height:"20"},null,8,["class","path"]),O("span",We,j(c.name),1),c.unavailable?(i(),_("span",Me,"SOON")):w("",!0),c.beta?(i(),_("span",Ue,"BETA")):w("",!0),c.cloud?(i(),_("span",Re,"CLOUD")):w("",!0),c.warning?(i(),m(he,{key:3,class:"warning",text:c.warning,fixed:!0,top:18,left:18},{default:s(()=>[l(W,{path:r(me),fill:"#D35249",width:"20",height:"20"},null,8,["path"])]),_:2},1032,["text"])):w("",!0)],10,ze))),128))]))),128))]))}});const He=B(Ve,[["__scopeId","data-v-fe2ede96"]]);const qe={},X=a=>(te("data-v-81cd596e"),a=a(),ae(),a),Ye={class:"logo"},Je=X(()=>O("img",{src:be,alt:"Abstra cloud logo"},null,-1)),Qe=X(()=>O("span",null," Abstra ",-1)),Xe=[Je,Qe];function Ze(a,e){return i(),_("div",Ye,Xe)}const Ke=B(qe,[["render",Ze],["__scopeId","data-v-81cd596e"]]);class et{async check(){return(await fetch("/_editor/api/linters/check")).json()}async fix(e,t){if(!(await fetch(`/_editor/api/linters/fix/${e}/${t}`,{method:"POST"})).ok)throw new Error("Failed to fix")}}const Z=new et;class tt{constructor(e,t){d(this,"name");d(this,"label");d(this,"ruleName");this.name=e.name,this.label=e.label,this.ruleName=t}async fix(){await Z.fix(this.ruleName,this.name)}}class at{constructor(e,t){d(this,"label");d(this,"fixes");d(this,"rule");this.label=e.label,this.rule=t,this.fixes=e.fixes.map(n=>new tt(n,t.name))}}class G{constructor(e){d(this,"name");d(this,"label");d(this,"type");d(this,"issues");d(this,"valid");this.name=e.name,this.label=e.label,this.type=e.type,this.issues=e.issues.map(t=>new at(t,this)),this.valid=e.valid}static async check(){return(await Z.check()).map(t=>new G(t))}}const nt=x({__name:"LoginBlock",setup(a){var C;const e="https://cloud.abstra.io/api-key?"+new URLSearchParams({redirect:location.href}),t=A(!1),n=(C=we.instance)==null?void 0:C.deployEnabled,{loading:o,result:p,refetch:h}=Q(()=>I.get()),b=Y(),S=q();function u(){const g=new URL(location.href);g.searchParams.delete("api-key"),S.replace(g.pathname+g.search)}function c(){var g;(g=p.value)!=null&&g.logged?U.success({title:"You're logged in!",content:"You can now deploy your project to Abstra Cloud."}):U.error({title:"Login failed",content:"Please try again. If the problem persists, contact help@abstra.io."})}const f=b.query["api-key"];typeof f=="string"&&I.create(f).then(h).then(u).then(c);async function L(){!p.value||(await I.delete(),h())}async function k(){if(!!p.value){t.value=!0;try{await ge.deploy(),window.open(`https://cloud.abstra.io/projects/${p.value.logged&&p.value.project_id}/builds`,"_blank")}catch(g){ve("Deploy failed",String(g))}t.value=!1}}return(g,lt)=>{var N;return(N=r(p))!=null&&N.logged?(i(),m(r(re),{key:0},{default:s(()=>[l(r(y),{href:`https://cloud.abstra.io/projects/${r(p).project_id}`,target:"_blank"},{default:s(()=>[v(" Go to console ")]),_:1},8,["href"]),!t.value&&r(n)?(i(),m(r(ne),{key:0,title:"Are you sure you want to deploy this project to Abstra Cloud?",onConfirm:k},{default:s(()=>[l(r(y),null,{default:s(()=>[v("Deploy")]),_:1})]),_:1})):r(n)?(i(),m(r(y),{key:1,loading:""},{default:s(()=>[v("Deploying")]),_:1})):w("",!0),l(r(y),{onClick:L},{default:s(()=>[v("Logout")]),_:1})]),_:1})):(i(),m(r(y),{key:1,href:e,loading:r(o),disabled:r(o)},{default:s(()=>[v(" Login to deploy ")]),_:1},8,["loading","disabled"]))}}});const rt=B(nt,[["__scopeId","data-v-7b8037ee"]]),ot=x({__name:"Linter",setup(a){const{result:e,refetch:t}=Q(()=>G.check()),n=J(()=>{var u,c;return(c=(u=e.value)==null?void 0:u.flatMap(f=>f.issues))!=null?c:[]}),o=A(!1);async function p(u){o.value=!0;try{await u.fix(),t()}finally{o.value=!1}}const h=A(!1);function b(){setTimeout(async()=>{await t(),h.value&&b()},1e3)}oe(()=>{h.value=!0,b()}),se(()=>{h.value=!1});function S(u){return u.type==="bug"?"warning":u.type==="security"?"error":"info"}return(u,c)=>n.value.length>0?(i(),m(r(le),{key:0},{content:s(()=>[l(r(M),{direction:"vertical"},{default:s(()=>[(i(!0),_(P,null,$(n.value,(f,L)=>(i(),m(r(Oe),{key:L+f.rule.name,type:S(f.rule),style:{width:"400px"},message:f.rule.label},{description:s(()=>[l(r(M),{direction:"vertical"},{default:s(()=>[O("div",null,j(f.label),1),(i(!0),_(P,null,$(f.fixes,k=>(i(),m(r(y),{key:k.name,loading:o.value,disabled:o.value,onClick:C=>p(k)},{icon:s(()=>[l(r(De))]),default:s(()=>[v(" "+j(k.label),1)]),_:2},1032,["loading","disabled","onClick"]))),128))]),_:2},1024)]),_:2},1032,["type","message"]))),128))]),_:1})]),default:s(()=>[l(r(ke),{count:n.value.length},{default:s(()=>[l(r(y),null,{default:s(()=>[l(r(Ee))]),_:1})]),_:1},8,["count"])]),_:1})):w("",!0)}}),st=x({__name:"GithubStars",setup(a){return(e,t)=>(i(),m(r(y),{href:"https://github.com/abstra-app/abstra-lib",target:"_blank"},{default:s(()=>[l(r(Fe)),v(" GitHub ")]),_:1}))}}),Pt=x({__name:"Workspace",setup(a){return(e,t)=>{const n=ie("router-view");return i(),m(xe,null,{navbar:s(()=>[l(r(Se),{style:{padding:"5px 10px"}},{title:s(()=>[l(Ke)]),extra:s(()=>[l(st),l(ot),l(ye),l(rt)]),_:1})]),sidebar:s(()=>[l(He,{class:"sidebar"})]),content:s(()=>[l(n)]),_:1})}}});export{Pt as default};
//# sourceMappingURL=Workspace.7756b22b.js.map
