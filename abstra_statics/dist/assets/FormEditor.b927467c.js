import{u as Ie}from"./index.c7780fa0.js";import{d as I,X as T,H as M,b as p,eu as w,dj as z,ew as x,ez as W,e as y,f as t,eG as ve,o as Re,G as Ze,c as S,w as o,u as e,v as j,r as $,aq as b,bx as E,aC as Q,eE as fe,eF as ge,by as ne,bE as F,eB as Ue,cC as Pe,S as ue,cy as D,eI as Oe,eA as Be,av as Le,I as ie,eK as Ne,bf as De}from"./outputWidgets.858eea56.js";import{B as qe}from"./BaseLayout.b3193c8d.js";import{F as ze,a as N,b as We,c as je,d as Qe,r as se}from"./FormRunner.d33bded0.js";import{R as Ge,S as Je,a as Xe,L as Ye}from"./SourceCode.63354462.js";import{a as Ke}from"./asyncComputed.70931a32.js";import{F as et}from"./forms.ff893063.js";import{W as q}from"./workspaces.36c86de8.js";import"./envVars.1ac2f252.js";import{_ as tt}from"./SaveButton.vue_vue_type_script_setup_true_lang.d8171786.js";import{T as at}from"./ThreadSelector.6047d0dd.js";import{M as he}from"./Modal.39b49774.js";import{A as ye}from"./index.507816f9.js";import{A as U}from"./Title.74d15771.js";import{a as L,A as lt}from"./Text.a93df176.js";import{A as H,F as G}from"./Form.aa96588a.js";import{A as de}from"./index.9a59066b.js";import{A as we}from"./api.21e9fc5c.js";import{A as P}from"./index.d59eec09.js";import{A as ot}from"./Link.24b85989.js";import{B as rt}from"./Badge.fa5c382b.js";import{N as nt}from"./NavbarControls.f7b1c6f6.js";import{b as ut}from"./index.9b72b1c0.js";import{A as B,T as pe}from"./TabPane.6e4429b0.js";import{A as it}from"./index.0a615130.js";import"./pubsub.798be8d6.js";import"./fetch.c05ae51d.js";import"./url.2222ff52.js";import"./Passwordless.c45a42e1.js";import"./PhArrowClockwise.vue.24d3d74d.js";import"./CircularLoading.4d25715f.js";import"./PlayerNavbar.1071b21e.js";import"./PhKanban.vue.8b7d9ae2.js";import"./PhSignOut.vue.4a7b869f.js";import"./index.992df385.js";import"./Paragraph.7812deec.js";import"./index.57068d56.js";import"./WidgetsFrame.312406ab.js";import"./Steps.d7c4914a.js";import"./PhInfo.vue.e6f0a39e.js";import"./Card.706f2a33.js";import"./index.6bb6a793.js";import"./uuid.297f9e3a.js";import"./PhCaretRight.vue.1a1fdf66.js";import"./login.fcd2656f.js";import"./jobs.bd5b3b68.js";import"./record.466d46f5.js";import"./scripts.5c45fd60.js";import"./validations.a13884f3.js";import"./string.ddf463a6.js";import"./toggleHighContrast.e52b85f2.js";import"./PhPencil.vue.9919c1df.js";import"./runnerData.b6d14fa3.js";import"./UnsavedChangesHandler.f7f45a38.js";import"./ExclamationCircleOutlined.a2b58b9d.js";import"./index.59265b06.js";import"./index.8956ca9f.js";import"./hasIn.e31f565a.js";import"./index.cf4c23b9.js";import"./metadata.df1d507a.js";import"./PhCheckCircle.vue.ebf24b07.js";import"./PhScroll.vue.a5abda16.js";import"./PhWebhooksLogo.vue.663f57fb.js";import"./isNumeric.75337b1e.js";import"./popupNotifcation.b564dd0f.js";import"./PhArrowSquareOut.vue.92b1d54f.js";import"./CloseCircleOutlined.38307a7f.js";import"./DocsButton.vue_vue_type_script_setup_true_lang.be63453d.js";import"./BookOutlined.e457d154.js";(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},l=new Error().stack;l&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[l]="e29ed350-9a91-46be-a1b3-f9b885f65748",s._sentryDebugIdIdentifier="sentry-dbid-e29ed350-9a91-46be-a1b3-f9b885f65748")}catch{}})();var st={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M342 88H120c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V168h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zm578 576h-48c-8.8 0-16 7.2-16 16v176H682c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V680c0-8.8-7.2-16-16-16zM342 856H168V680c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zM904 88H682c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V120c0-17.7-14.3-32-32-32z"}}]},name:"expand",theme:"outlined"};const dt=st;var pt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888.3 757.4h-53.8c-4.2 0-7.7 3.5-7.7 7.7v61.8H197.1V197.1h629.8v61.8c0 4.2 3.5 7.7 7.7 7.7h53.8c4.2 0 7.7-3.4 7.7-7.7V158.7c0-17-13.7-30.7-30.7-30.7H158.7c-17 0-30.7 13.7-30.7 30.7v706.6c0 17 13.7 30.7 30.7 30.7h706.6c17 0 30.7-13.7 30.7-30.7V765.1c0-4.3-3.5-7.7-7.7-7.7zm18.6-251.7L765 393.7c-5.3-4.2-13-.4-13 6.3v76H438c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z"}}]},name:"export",theme:"outlined"};const ct=pt,mt=["width","height","fill","transform"],vt={key:0},ft=y("path",{d:"M200.49,183.51a12,12,0,0,1,0,17c-1.13,1.12-28,27.51-72.49,27.51-33.71,0-59.35-17.46-76-33.86V208a12,12,0,0,1-24,0V160a12,12,0,0,1,12-12H88a12,12,0,0,1,0,24H64.12c13.1,14.32,35.08,32,63.88,32,34.63,0,55.31-20.28,55.51-20.49A12,12,0,0,1,200.49,183.51ZM216,36a12,12,0,0,0-12,12V61.86C187.35,45.46,161.71,28,128,28,83.54,28,56.64,54.39,55.51,55.51a12,12,0,0,0,17,17C72.69,72.28,93.37,52,128,52c28.8,0,50.78,17.68,63.88,32H168a12,12,0,0,0,0,24h48a12,12,0,0,0,12-12V48A12,12,0,0,0,216,36Z"},null,-1),gt=[ft],ht={key:1},yt=y("path",{d:"M216,48V96H168ZM40,208l48-48H40Z",opacity:"0.2"},null,-1),wt=y("path",{d:"M219.06,40.61a8,8,0,0,0-8.72,1.73L194.28,58.41C174.13,41.1,151.36,32,128,32,85.18,32,59.42,57.27,58.34,58.34A8,8,0,0,0,69.66,69.66C69.87,69.44,91.73,48,128,48c23.17,0,41.92,10.85,54.92,21.76L162.34,90.34A8,8,0,0,0,168,104h48a8,8,0,0,0,8-8V48A8,8,0,0,0,219.06,40.61ZM208,88H187.31L208,67.31Zm-21.66,98.34c-.21.22-22.07,21.66-58.34,21.66-23.17,0-41.92-10.85-54.92-21.76l20.58-20.58A8,8,0,0,0,88,152H40a8,8,0,0,0-8,8v48a8,8,0,0,0,13.66,5.66l16.06-16.07C81.87,214.9,104.64,224,128,224c42.82,0,68.58-25.27,69.66-26.34a8,8,0,0,0-11.32-11.32ZM48,168H68.69L48,188.69Z"},null,-1),bt=[yt,wt],kt={key:2},At=y("path",{d:"M197.66,186.34a8,8,0,0,1,0,11.32C196.58,198.73,170.82,224,128,224c-23.36,0-46.13-9.1-66.28-26.41L45.66,213.66A8,8,0,0,1,32,208V160a8,8,0,0,1,8-8H88a8,8,0,0,1,5.66,13.66L73.08,186.24C86.08,197.15,104.83,208,128,208c36.27,0,58.13-21.44,58.34-21.66A8,8,0,0,1,197.66,186.34Zm21.4-145.73a8,8,0,0,0-8.72,1.73L194.28,58.41C174.13,41.1,151.36,32,128,32,85.18,32,59.42,57.27,58.34,58.34A8,8,0,0,0,69.66,69.66C69.87,69.44,91.73,48,128,48c23.17,0,41.92,10.85,54.92,21.76L162.34,90.34A8,8,0,0,0,168,104h48a8,8,0,0,0,8-8V48A8,8,0,0,0,219.06,40.61Z"},null,-1),St=[At],_t={key:3},$t=y("path",{d:"M196.24,187.76a6,6,0,0,1,0,8.48C195.19,197.29,170,222,128,222c-39.66,0-67.59-25.75-82-43.26V208a6,6,0,0,1-12,0V160a6,6,0,0,1,6-6H88a6,6,0,0,1,0,12H51.35c11.41,15.11,38.23,44,76.65,44,37.09,0,59.54-22,59.76-22.24A6,6,0,0,1,196.24,187.76ZM216,42a6,6,0,0,0-6,6V77.26C195.59,59.75,167.66,34,128,34,86,34,60.81,58.71,59.76,59.76a6,6,0,0,0,8.48,8.48C68.46,68,90.91,46,128,46c38.42,0,65.24,28.89,76.65,44H168a6,6,0,0,0,0,12h48a6,6,0,0,0,6-6V48A6,6,0,0,0,216,42Z"},null,-1),Ct=[$t],Mt={key:4},Vt=y("path",{d:"M197.67,186.37a8,8,0,0,1,0,11.29C196.58,198.73,170.82,224,128,224c-37.39,0-64.53-22.4-80-39.85V208a8,8,0,0,1-16,0V160a8,8,0,0,1,8-8H88a8,8,0,0,1,0,16H55.44C67.76,183.35,93,208,128,208c36,0,58.14-21.46,58.36-21.68A8,8,0,0,1,197.67,186.37ZM216,40a8,8,0,0,0-8,8V71.85C192.53,54.4,165.39,32,128,32,85.18,32,59.42,57.27,58.34,58.34a8,8,0,0,0,11.3,11.34C69.86,69.46,92,48,128,48c35,0,60.24,24.65,72.56,40H168a8,8,0,0,0,0,16h48a8,8,0,0,0,8-8V48A8,8,0,0,0,216,40Z"},null,-1),xt=[Vt],Ht={key:5},Tt=y("path",{d:"M194.83,189.18a4,4,0,0,1,0,5.65c-1,1-25.65,25.17-66.83,25.17-23.93,0-47.35-10.05-67.73-29.08a146.39,146.39,0,0,1-16.27-18V208a4,4,0,0,1-8,0V160a4,4,0,0,1,4-4H88a4,4,0,0,1,0,8H47.41c10,14.06,38.39,48,80.59,48,37.75,0,60.95-22.6,61.18-22.83A4,4,0,0,1,194.83,189.18ZM216,44a4,4,0,0,0-4,4V83.07a146.39,146.39,0,0,0-16.27-18C175.35,46.05,151.93,36,128,36,86.82,36,62.2,60.14,61.17,61.17a4,4,0,0,0,5.65,5.66C67.05,66.6,90.25,44,128,44c42.2,0,70.63,33.94,80.59,48H168a4,4,0,0,0,0,8h48a4,4,0,0,0,4-4V48A4,4,0,0,0,216,44Z"},null,-1),Et=[Tt],Ft={name:"PhArrowsClockwise"},It=I({...Ft,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(s){const l=s,a=T("weight","regular"),m=T("size","1em"),r=T("color","currentColor"),d=T("mirrored",!1),i=M(()=>{var n;return(n=l.weight)!=null?n:a}),k=M(()=>{var n;return(n=l.size)!=null?n:m}),V=M(()=>{var n;return(n=l.color)!=null?n:r}),h=M(()=>l.mirrored!==void 0?l.mirrored?"scale(-1, 1)":void 0:d?"scale(-1, 1)":void 0);return(n,c)=>(p(),w("svg",W({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:k.value,height:k.value,fill:V.value,transform:h.value},n.$attrs),[z(n.$slots,"default"),i.value==="bold"?(p(),w("g",vt,gt)):i.value==="duotone"?(p(),w("g",ht,bt)):i.value==="fill"?(p(),w("g",kt,St)):i.value==="light"?(p(),w("g",_t,Ct)):i.value==="regular"?(p(),w("g",Mt,xt)):i.value==="thin"?(p(),w("g",Ht,Et)):x("",!0)],16,mt))}}),Rt=["width","height","fill","transform"],Zt={key:0},Ut=y("path",{d:"M234.49,111.07,90.41,22.94A20,20,0,0,0,60,39.87V216.13a20,20,0,0,0,30.41,16.93l144.08-88.13a19.82,19.82,0,0,0,0-33.86ZM84,208.85V47.15L216.16,128Z"},null,-1),Pt=[Ut],Ot={key:1},Bt=y("path",{d:"M228.23,134.69,84.15,222.81A8,8,0,0,1,72,216.12V39.88a8,8,0,0,1,12.15-6.69l144.08,88.12A7.82,7.82,0,0,1,228.23,134.69Z",opacity:"0.2"},null,-1),Lt=y("path",{d:"M232.4,114.49,88.32,26.35a16,16,0,0,0-16.2-.3A15.86,15.86,0,0,0,64,39.87V216.13A15.94,15.94,0,0,0,80,232a16.07,16.07,0,0,0,8.36-2.35L232.4,141.51a15.81,15.81,0,0,0,0-27ZM80,215.94V40l143.83,88Z"},null,-1),Nt=[Bt,Lt],Dt={key:2},qt=y("path",{d:"M240,128a15.74,15.74,0,0,1-7.6,13.51L88.32,229.65a16,16,0,0,1-16.2.3A15.86,15.86,0,0,1,64,216.13V39.87a15.86,15.86,0,0,1,8.12-13.82,16,16,0,0,1,16.2.3L232.4,114.49A15.74,15.74,0,0,1,240,128Z"},null,-1),zt=[qt],Wt={key:3},jt=y("path",{d:"M231.36,116.19,87.28,28.06a14,14,0,0,0-14.18-.27A13.69,13.69,0,0,0,66,39.87V216.13a13.69,13.69,0,0,0,7.1,12.08,14,14,0,0,0,14.18-.27l144.08-88.13a13.82,13.82,0,0,0,0-23.62Zm-6.26,13.38L81,217.7a2,2,0,0,1-2.06,0,1.78,1.78,0,0,1-1-1.61V39.87a1.78,1.78,0,0,1,1-1.61A2.06,2.06,0,0,1,80,38a2,2,0,0,1,1,.31L225.1,126.43a1.82,1.82,0,0,1,0,3.14Z"},null,-1),Qt=[jt],Gt={key:4},Jt=y("path",{d:"M232.4,114.49,88.32,26.35a16,16,0,0,0-16.2-.3A15.86,15.86,0,0,0,64,39.87V216.13A15.94,15.94,0,0,0,80,232a16.07,16.07,0,0,0,8.36-2.35L232.4,141.51a15.81,15.81,0,0,0,0-27ZM80,215.94V40l143.83,88Z"},null,-1),Xt=[Jt],Yt={key:5},Kt=y("path",{d:"M230.32,117.9,86.24,29.79a11.91,11.91,0,0,0-12.17-.23A11.71,11.71,0,0,0,68,39.89V216.11a11.71,11.71,0,0,0,6.07,10.33,11.91,11.91,0,0,0,12.17-.23L230.32,138.1a11.82,11.82,0,0,0,0-20.2Zm-4.18,13.37L82.06,219.39a4,4,0,0,1-4.07.07,3.77,3.77,0,0,1-2-3.35V39.89a3.77,3.77,0,0,1,2-3.35,4,4,0,0,1,4.07.07l144.08,88.12a3.8,3.8,0,0,1,0,6.54Z"},null,-1),ea=[Kt],ta={name:"PhPlay"},aa=I({...ta,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(s){const l=s,a=T("weight","regular"),m=T("size","1em"),r=T("color","currentColor"),d=T("mirrored",!1),i=M(()=>{var n;return(n=l.weight)!=null?n:a}),k=M(()=>{var n;return(n=l.size)!=null?n:m}),V=M(()=>{var n;return(n=l.color)!=null?n:r}),h=M(()=>l.mirrored!==void 0?l.mirrored?"scale(-1, 1)":void 0:d?"scale(-1, 1)":void 0);return(n,c)=>(p(),w("svg",W({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:k.value,height:k.value,fill:V.value,transform:h.value},n.$attrs),[z(n.$slots,"default"),i.value==="bold"?(p(),w("g",Zt,Pt)):i.value==="duotone"?(p(),w("g",Ot,Nt)):i.value==="fill"?(p(),w("g",Dt,zt)):i.value==="light"?(p(),w("g",Wt,Qt)):i.value==="regular"?(p(),w("g",Gt,Xt)):i.value==="thin"?(p(),w("g",Yt,ea)):x("",!0)],16,Rt))}}),la=["width","height","fill","transform"],oa={key:0},ra=y("path",{d:"M200.73,36H55.27A19.3,19.3,0,0,0,36,55.27V200.73A19.3,19.3,0,0,0,55.27,220H200.73A19.3,19.3,0,0,0,220,200.73V55.27A19.3,19.3,0,0,0,200.73,36ZM196,196H60V60H196Z"},null,-1),na=[ra],ua={key:1},ia=y("path",{d:"M208,55.27V200.73a7.28,7.28,0,0,1-7.27,7.27H55.27A7.28,7.28,0,0,1,48,200.73V55.27A7.28,7.28,0,0,1,55.27,48H200.73A7.28,7.28,0,0,1,208,55.27Z",opacity:"0.2"},null,-1),sa=y("path",{d:"M200.73,40H55.27A15.29,15.29,0,0,0,40,55.27V200.73A15.29,15.29,0,0,0,55.27,216H200.73A15.29,15.29,0,0,0,216,200.73V55.27A15.29,15.29,0,0,0,200.73,40ZM200,200H56V56H200Z"},null,-1),da=[ia,sa],pa={key:2},ca=y("path",{d:"M216,55.27V200.73A15.29,15.29,0,0,1,200.73,216H55.27A15.29,15.29,0,0,1,40,200.73V55.27A15.29,15.29,0,0,1,55.27,40H200.73A15.29,15.29,0,0,1,216,55.27Z"},null,-1),ma=[ca],va={key:3},fa=y("path",{d:"M200.73,42H55.27A13.28,13.28,0,0,0,42,55.27V200.73A13.28,13.28,0,0,0,55.27,214H200.73A13.28,13.28,0,0,0,214,200.73V55.27A13.28,13.28,0,0,0,200.73,42ZM202,200.73a1.27,1.27,0,0,1-1.27,1.27H55.27A1.27,1.27,0,0,1,54,200.73V55.27A1.27,1.27,0,0,1,55.27,54H200.73A1.27,1.27,0,0,1,202,55.27Z"},null,-1),ga=[fa],ha={key:4},ya=y("path",{d:"M200.73,40H55.27A15.29,15.29,0,0,0,40,55.27V200.73A15.29,15.29,0,0,0,55.27,216H200.73A15.29,15.29,0,0,0,216,200.73V55.27A15.29,15.29,0,0,0,200.73,40ZM200,200H56V56H200Z"},null,-1),wa=[ya],ba={key:5},ka=y("path",{d:"M200.73,44H55.27A11.29,11.29,0,0,0,44,55.27V200.73A11.29,11.29,0,0,0,55.27,212H200.73A11.29,11.29,0,0,0,212,200.73V55.27A11.29,11.29,0,0,0,200.73,44ZM204,200.73a3.28,3.28,0,0,1-3.27,3.27H55.27A3.28,3.28,0,0,1,52,200.73V55.27A3.28,3.28,0,0,1,55.27,52H200.73A3.28,3.28,0,0,1,204,55.27Z"},null,-1),Aa=[ka],Sa={name:"PhStop"},_a=I({...Sa,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(s){const l=s,a=T("weight","regular"),m=T("size","1em"),r=T("color","currentColor"),d=T("mirrored",!1),i=M(()=>{var n;return(n=l.weight)!=null?n:a}),k=M(()=>{var n;return(n=l.size)!=null?n:m}),V=M(()=>{var n;return(n=l.color)!=null?n:r}),h=M(()=>l.mirrored!==void 0?l.mirrored?"scale(-1, 1)":void 0:d?"scale(-1, 1)":void 0);return(n,c)=>(p(),w("svg",W({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:k.value,height:k.value,fill:V.value,transform:h.value},n.$attrs),[z(n.$slots,"default"),i.value==="bold"?(p(),w("g",oa,na)):i.value==="duotone"?(p(),w("g",ua,da)):i.value==="fill"?(p(),w("g",pa,ma)):i.value==="light"?(p(),w("g",va,ga)):i.value==="regular"?(p(),w("g",ha,wa)):i.value==="thin"?(p(),w("g",ba,Aa)):x("",!0)],16,la))}});function ce(s){for(var l=1;l<arguments.length;l++){var a=arguments[l]!=null?Object(arguments[l]):{},m=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(m=m.concat(Object.getOwnPropertySymbols(a).filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable}))),m.forEach(function(r){$a(s,r,a[r])})}return s}function $a(s,l,a){return l in s?Object.defineProperty(s,l,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[l]=a,s}var J=function(l,a){var m=ce({},l,a.attrs);return t(ve,ce({},m,{icon:dt}),null)};J.displayName="ExpandOutlined";J.inheritAttrs=!1;const Ca=J;function me(s){for(var l=1;l<arguments.length;l++){var a=arguments[l]!=null?Object(arguments[l]):{},m=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(m=m.concat(Object.getOwnPropertySymbols(a).filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable}))),m.forEach(function(r){Ma(s,r,a[r])})}return s}function Ma(s,l,a){return l in s?Object.defineProperty(s,l,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[l]=a,s}var X=function(l,a){var m=me({},l,a.attrs);return t(ve,me({},m,{icon:ct}),null)};X.displayName="ExportOutlined";X.inheritAttrs=!1;const Va=X,xa=I({__name:"ThreadSelectorModal",props:{showThreadModal:{type:Boolean},stage:{},executionConfig:{}},emits:["fix-invalid-json","update:execution-config","update:show-thread-modal"],setup(s,{emit:l}){const a=()=>{l("update:show-thread-modal",!1),q.writeTestData(m.threadData)};Re(async()=>m.threadData=await q.readTestData());const m=Ze({threadData:"{}"});return(r,d)=>(p(),S(e(he),{open:r.showThreadModal,footer:null,onCancel:a},{default:o(()=>[t(at,{stage:r.stage,"execution-config":r.executionConfig,"onUpdate:executionConfig":d[0]||(d[0]=i=>l("update:execution-config",i)),"onUpdate:showThreadModal":d[1]||(d[1]=i=>l("update:show-thread-modal",i)),onFixInvalidJson:d[2]||(d[2]=i=>l("fix-invalid-json",i,i))},null,8,["stage","execution-config"])]),_:1},8,["open"]))}});const Ha=j(xa,[["__scopeId","data-v-541d30a8"]]),be=s=>(fe("data-v-a8ca44f6"),s=s(),ge(),s),Ta=be(()=>y("i",null,"string",-1)),Ea=be(()=>y("i",null,"string list",-1)),Fa=I({__name:"FormNotificationSettings",props:{form:{}},setup(s){const a=$(s.form);return(m,r)=>(p(),w(Q,null,[t(e(G),{layout:"vertical"},{default:o(()=>[t(e(U),{level:4,width:"100%",height:"30px",style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0px"}},{default:o(()=>[b(" Thread waiting "),t(e(ye),{checked:a.value.notificationTrigger.enabled,"onUpdate:checked":r[0]||(r[0]=d=>a.value.notificationTrigger.enabled=d)},{default:o(()=>[b(" Enabled ")]),_:1},8,["checked"])]),_:1}),t(e(L),{class:"description",style:{fontStyle:"italic",marginBottom:"20px"}},{default:o(()=>[b(" Send emails when the thread is waiting for the form to be filled ")]),_:1}),t(e(H),{label:"Variable name"},{default:o(()=>[t(e(E),{value:a.value.notificationTrigger.variable_name,"onUpdate:value":r[1]||(r[1]=d=>a.value.notificationTrigger.variable_name=d),disabled:!a.value.notificationTrigger.enabled,type:"text",placeholder:"variable_name"},null,8,["value","disabled"])]),_:1})]),_:1}),t(e(de),{type:"info"},{message:o(()=>[t(e(L),null,{default:o(()=>[b(" Notifications are sent to the emails specified in the thread variables set here. The variables should contain a "),Ta,b(" or a "),Ea,b(". ")]),_:1})]),_:1}),t(e(de),{style:{"margin-top":"20px"}},{message:o(()=>[t(e(L),null,{default:o(()=>[b(" Notifications are a paid feature. Talk to your account manager to enable them. ")]),_:1})]),_:1})],64))}});const Ia=j(Fa,[["__scopeId","data-v-a8ca44f6"]]),Ra=I({__name:"FormSettings",props:{form:{}},setup(s){const a=$(s.form);return(m,r)=>(p(),S(e(G),{layout:"vertical",style:{"padding-bottom":"50px"}},{default:o(()=>[t(Ge,{runtime:a.value},null,8,["runtime"]),t(e(H),{label:"Form name"},{default:o(()=>[t(e(E),{value:a.value.title,"onUpdate:value":r[0]||(r[0]=d=>a.value.title=d),type:"text",onChange:r[1]||(r[1]=d=>{var i;return a.value.title=(i=d.target.value)!=null?i:""})},null,8,["value"])]),_:1}),t(e(U),{level:3},{default:o(()=>[b(" Texts ")]),_:1}),t(e(U),{level:4},{default:o(()=>[b(" Welcome Screen ")]),_:1}),t(e(H),{label:"Title"},{default:o(()=>[t(e(E),{value:a.value.welcomeTitle,"onUpdate:value":r[2]||(r[2]=d=>a.value.welcomeTitle=d),type:"text",placeholder:a.value.title,disabled:a.value.autoStart},null,8,["value","placeholder","disabled"])]),_:1}),t(e(H),{label:"Description"},{default:o(()=>[t(e(E),{value:a.value.startMessage,"onUpdate:value":r[3]||(r[3]=d=>a.value.startMessage=d),type:"text",disabled:a.value.autoStart},null,8,["value","disabled"])]),_:1}),t(e(H),{label:"Start button label"},{default:o(()=>[t(e(E),{value:a.value.startButtonText,"onUpdate:value":r[4]||(r[4]=d=>a.value.startButtonText=d),type:"text",placeholder:"Start",disabled:a.value.autoStart},null,8,["value","disabled"])]),_:1}),t(e(H),null,{default:o(()=>[t(e(ne),{checked:a.value.autoStart,"onUpdate:checked":r[5]||(r[5]=d=>a.value.autoStart=d)},{default:o(()=>[b("Skip welcome screen")]),_:1},8,["checked"])]),_:1}),t(e(U),{level:4},{default:o(()=>[b(" End Screen ")]),_:1}),t(e(H),{label:"End text"},{default:o(()=>[t(e(E),{value:a.value.endMessage,"onUpdate:value":r[6]||(r[6]=d=>a.value.endMessage=d),type:"text",placeholder:"Thank you"},null,8,["value"])]),_:1}),t(e(H),{label:"Restart button label"},{default:o(()=>[t(e(E),{value:a.value.restartButtonText,"onUpdate:value":r[7]||(r[7]=d=>a.value.restartButtonText=d),placeholder:"Restart",type:"text",disabled:!a.value.allowRestart},null,8,["value","disabled"])]),_:1}),t(e(H),{help:!a.value.isInitial&&"Only initial forms can be restarted"},{default:o(()=>[t(e(ne),{checked:a.value.allowRestart,"onUpdate:checked":r[8]||(r[8]=d=>a.value.allowRestart=d),disabled:!a.value.isInitial},{default:o(()=>[b("Show restart button at the end")]),_:1},8,["checked","disabled"])]),_:1},8,["help"]),t(e(U),{level:4},{default:o(()=>[b(" Alert Messages ")]),_:1}),t(e(H),{label:"Error message"},{default:o(()=>[t(e(E),{value:a.value.errorMessage,"onUpdate:value":r[9]||(r[9]=d=>a.value.errorMessage=d),type:"text",placeholder:"Something went wrong"},null,8,["value"])]),_:1})]),_:1}))}}),Za=I({__name:"QueryParamsModal",props:{open:{type:Boolean},close:{type:Function},queryParams:{}},emits:["update:query-params"],setup(s,{emit:l}){const m=$(r(s.queryParams));function r(h){return Object.entries(h).map(([n,c])=>({key:n,value:c,id:Math.random().toString()}))}function d(){const h={};return m.value.forEach(({key:n,value:c})=>{h[n]=c}),h}const i=(h,n,c)=>{m.value[h]={key:n,value:c},l("update:query-params",d())},k=()=>{const h=m.value.length;m.value.push({key:`param-${h}`,value:"value"}),l("update:query-params",d())},V=h=>{m.value.splice(h,1),l("update:query-params",d())};return(h,n)=>(p(),S(e(he),{open:h.open,onCancel:h.close},{footer:o(()=>[t(e(F),{type:"primary",onClick:h.close},{default:o(()=>[b("OK")]),_:1},8,["onClick"])]),default:o(()=>[t(e(P),{vertical:"",gap:"20"},{default:o(()=>[t(e(L),null,{default:o(()=>[b("Query params")]),_:1}),(p(!0),w(Q,null,Ue(m.value,(c,g)=>(p(),S(e(H),{key:g},{default:o(()=>[t(e(Pe),null,{default:o(()=>[t(e(E),{value:c.key,"onUpdate:value":u=>c.key=u,type:"text",placeholder:"name",onChange:()=>i(g,c.key,c.value)},null,8,["value","onUpdate:value","onChange"]),t(e(E),{value:c.value,"onUpdate:value":u=>c.value=u,type:"text",placeholder:"value",disabled:c.key===e(we),onChange:()=>i(g,c.key,c.value)},null,8,["value","onUpdate:value","disabled","onChange"]),t(e(F),{danger:"",onClick:u=>V(g)},{default:o(()=>[b("remove")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),t(e(H),null,{default:o(()=>[t(e(F),{type:"dashed",style:{width:"100%"},onClick:k},{default:o(()=>[b(" Add Query Param ")]),_:1})]),_:1})]),_:1})]),_:1},8,["open","onCancel"]))}}),Ua=s=>(fe("data-v-ccc198f0"),s=s(),ge(),s),Pa={key:0},Oa={key:1},Ba=Ua(()=>y("br",null,null,-1)),La={class:"form-preview-container"},Na=I({__name:"FormTester",props:{formRunnerData:{},formState:{},userEmail:{},disabledWarning:{},queryParams:{},stageRunId:{},needsThread:{type:Boolean}},emits:["start","reset","navigate","logout","auto-fill-clicked","action-clicked","update-widget-errors","update-widget-value","update:query-params","update:show-thread-modal"],setup(s,{emit:l}){var n;const a=s,m=$(!1),r=()=>{m.value=!0},d=()=>{m.value=!1},i=M(()=>{const c=h.value.query?`?${h.value.query}`:"";return`/${a.formRunnerData.path}${c}`}),k=$((n=ue.get("dontShowReloadHelper"))!=null?n:!1),V=()=>{ue.set("dontShowReloadHelper",!0),k.value=!0},h=M(()=>{const c=new URLSearchParams(a.queryParams).toString();return{subdomain:"[your-subdomain]",path:a.formRunnerData.path,query:c}});return(c,g)=>(p(),w(Q,null,[t(e(G),{layout:"vertical"},{default:o(()=>[t(e(P),{gap:"small"},{default:o(()=>[c.formState.type&&e(ze).includes(c.formState.type)?(p(),S(e(D),{key:0,placement:"bottom",open:k.value?void 0:!0},{content:o(()=>[k.value?(p(),w("span",Pa,"Reload form")):(p(),w("span",Oa,[b(" You can reload the form here"),Ba,t(e(ot),{onClick:V},{default:o(()=>[b("Don't show this again")]),_:1})]))]),default:o(()=>[t(e(F),{disabled:!!c.disabledWarning,onClick:g[0]||(g[0]=u=>l("reset"))},{default:o(()=>[t(e(It),{size:"20"})]),_:1},8,["disabled"])]),_:1},8,["open"])):x("",!0),e(N).includes(c.formState.type)?(p(),S(e(D),{key:1,placement:"bottom"},{content:o(()=>[b("Stop form")]),default:o(()=>[t(e(F),{onClick:g[1]||(g[1]=u=>l("reset"))},{default:o(()=>[t(e(_a),{size:"20"})]),_:1})]),_:1})):x("",!0),c.formState.type==="waiting"?(p(),S(e(D),{key:2,placement:"bottom"},{content:o(()=>[b("Start form")]),default:o(()=>[t(e(F),{disabled:!!c.disabledWarning,onClick:g[2]||(g[2]=u=>l("start"))},{default:o(()=>[t(e(aa),{size:"20"})]),_:1},8,["disabled"])]),_:1})):x("",!0),t(e(E),{value:i.value,class:"url-preview",onClick:r},null,8,["value"]),t(e(rt),{dot:c.needsThread},{default:o(()=>{var u;return[t(e(F),{disabled:c.formState&&e(N).includes((u=c.formState)==null?void 0:u.type),onClick:g[3]||(g[3]=R=>l("update:show-thread-modal",!0))},{default:o(()=>[b("Thread")]),_:1},8,["disabled"])]}),_:1},8,["dot"])]),_:1}),y("div",La,[t(We,{"is-preview":"","form-runner-data":c.formRunnerData,disabled:c.disabledWarning,"form-state":c.formState,"user-email":c.userEmail,onUpdateWidgetErrors:g[4]||(g[4]=(u,R)=>l("update-widget-errors",u,R)),onUpdateWidgetValue:g[5]||(g[5]=(u,R)=>l("update-widget-value",u,R)),onActionClicked:g[6]||(g[6]=u=>l("action-clicked",u)),onNavigate:g[7]||(g[7]=u=>l("navigate",u)),onLogout:g[8]||(g[8]=u=>l("logout")),onAutoFillClicked:g[9]||(g[9]=u=>l("auto-fill-clicked"))},null,8,["form-runner-data","disabled","form-state","user-email"])])]),_:1}),t(Za,{"query-params":c.queryParams,open:m.value,close:d,"onUpdate:queryParams":g[10]||(g[10]=u=>l("update:query-params",u))},null,8,["query-params","open"])],64))}});const Da=j(Na,[["__scopeId","data-v-ccc198f0"]]),qa={style:{width:"50%"}},za={style:{width:"50%"}},uo=I({__name:"FormEditor",setup(s){const l=Oe(),a=Be(),m=$(null),r=$("source-code"),d=$("preview"),i=$(null),k=$(null),V=$(null),h=$(null),n=$({}),c=$(!1),g=v=>u.value={...u.value,attached:!!v},u=$({attached:!1,stageRunId:null,pendingFork:!1,isInitial:!1}),R=M(()=>{var v;return(v=A.value)!=null&&v.form.hasChanges()?{title:"Unsaved changes",message:"Save the form before running the workflow"}:u.value.attached&&u.value.pendingFork?{title:"Past thread selected",message:"Fork the selected thread to run the workflow"}:!u.value.isInitial&&u.value.attached&&!u.value.stageRunId?{title:"No thread selected",message:"Select a thread to run the workflow"}:null}),ke=(v,f)=>{var C;(C=m.value)==null||C.setHighlight(v,f)},Ae=()=>{var v,f;(v=m.value)==null||v.restartEditor(),(f=m.value)==null||f.startPreviewMode()};Le(()=>u.value.stageRunId?n.value={...n.value,[we]:u.value.stageRunId}:null);const{result:A,loading:Se,refetch:_e}=Ke(async()=>{const[v,f]=await Promise.all([et.get(a.params.id),q.get()]);return u.value.isInitial=v.isInitial,Ne({form:v,workspace:f})});ie([()=>u.value.attached,n,A],()=>{Y()});function Y(){if(!A.value)return;const v=!u.value.attached;V.value=A.value.form.makeRunnerData(A.value.workspace),i.value&&i.value.clearListeners(),i.value=new je({formRunnerData:V.value,queryParams:n.value,userManager:Ie,logService:ee,connectionManager:new Qe(A.value.form.id,v),onFormStart:Ae,onFormEnd:$e,onRedirect:Te,onAuthUpdate:C=>h.value=C,onStateUpdate:C=>k.value=C,onStackTraceUpdate:ke});const f=i.value.getState();k.value=f.formState,h.value=f.passwordlessUser}const $e=()=>{var v,f,C;u.value={attached:!1,stageRunId:null,pendingFork:!1,isInitial:(f=(v=A.value)==null?void 0:v.form.isInitial)!=null?f:!1},(C=m.value)==null||C.restartEditor()};function Ce(){var v;(v=i.value)==null||v.start()}function Me(){var v,f;(v=m.value)==null||v.restartEditor(),(f=i.value)==null||f.reset()}const Ve=v=>{se("editor",l,v.path)};function xe(){l.push({name:"stages"})}const K=$(null),He=v=>{!A.value||(A.value.form.file=v)},ee=Ye.create();function Te(v,f){se("editor",l,v,f)}const Ee=()=>{var v;l.push({name:"formPreview",query:a.query,params:{id:(v=A.value)==null?void 0:v.form.id}})},Fe=()=>{var f;let v=`/${(f=A.value)==null?void 0:f.form.path}`;u.value.attached&&u.value.stageRunId&&(v+=`?abstra-run-id=${u.value.stageRunId}`),window.open(v,"_blank")};return ie(()=>a.params.id,()=>{_e()}),(v,f)=>(p(),S(qe,{"no-margins":""},{navbar:o(()=>[e(A)?(p(),S(e(ut),{key:0,title:e(A).form.title,style:{padding:"5px 25px","margin-bottom":"15px"},onBack:xe},{extra:o(()=>[t(nt,{"docs-path":"forms/overview","show-save-button":!1,"editing-model":e(A).form},null,8,["editing-model"])]),_:1},8,["title"])):x("",!0)]),content:o(()=>[e(A)?(p(),S(e(P),{key:0,gap:"40",style:{width:"calc(100% - 80px)"}},{default:o(()=>{var C,Z,te,ae,le,oe;return[y("div",qa,[t(e(pe),{"active-key":r.value,"onUpdate:activeKey":f[0]||(f[0]=_=>r.value=_)},{rightExtra:o(()=>[t(tt,{model:e(A).form,onSave:Y},null,8,["model"])]),default:o(()=>[t(e(B),{key:"source-code",tab:"Source code"}),t(e(B),{key:"settings",tab:"Settings"}),t(e(B),{key:"notifications",tab:"Notifications"})]),_:1},8,["active-key"]),r.value==="source-code"?(p(),S(Je,{key:0,ref_key:"code",ref:m,script:e(A).form,workspace:e(A).workspace,onUpdateFile:He},null,8,["script","workspace"])):x("",!0),r.value==="settings"?(p(),S(Ra,{key:1,form:e(A).form},null,8,["form"])):x("",!0),r.value==="notifications"?(p(),S(Ia,{key:2,form:e(A).form},null,8,["form"])):x("",!0),c.value?(p(),S(Ha,{key:3,"execution-config":u.value,"onUpdate:executionConfig":f[1]||(f[1]=_=>u.value=_),"show-thread-modal":c.value,"onUpdate:showThreadModal":f[2]||(f[2]=_=>c.value=_),stage:e(A).form,onFixInvalidJson:f[3]||(f[3]=(_,O)=>{var re;return(re=K.value)==null?void 0:re.fixJson(_,O)})},null,8,["execution-config","show-thread-modal","stage"])):x("",!0)]),y("div",za,[t(e(pe),{"active-key":d.value,"onUpdate:activeKey":f[4]||(f[4]=_=>d.value=_)},{rightExtra:o(()=>[t(e(P),{gap:"large",align:"center"},{default:o(()=>{var _;return[k.value&&e(N).includes((_=k.value)==null?void 0:_.type)?(p(),S(e(it),{key:0,color:"green"},{default:o(()=>[b(" Running ")]),_:1})):x("",!0),t(e(P),{gap:"small"},{default:o(()=>{var O;return[t(e(lt),null,{default:o(()=>[b("Continue workflow")]),_:1}),t(e(ye),{disabled:!!k.value&&e(N).includes((O=k.value)==null?void 0:O.type),checked:u.value.attached,"onUpdate:checked":g},null,8,["disabled","checked"])]}),_:1}),u.value.attached?(p(),S(e(F),{key:1,target:"_blank",onClick:Fe},{icon:o(()=>[t(e(Va))]),default:o(()=>[b(" Open ")]),_:1})):(p(),S(e(F),{key:2,target:"_blank",onClick:Ee},{icon:o(()=>[t(e(Ca))]),default:o(()=>[b(" Preview ")]),_:1}))]}),_:1})]),default:o(()=>[t(e(B),{key:"preview",tab:"Preview"})]),_:1},8,["active-key"]),e(Se)||!V.value||!k.value?(p(),S(e(De),{key:0})):d.value==="preview"?(p(),S(Da,{key:1,"query-params":n.value,"onUpdate:queryParams":f[5]||(f[5]=_=>n.value=_),"form-state":k.value,"form-runner-data":V.value,"user-email":(C=h.value)==null?void 0:C.claims.email,"disabled-warning":R.value,"stage-run-id":u.value.stageRunId,"needs-thread":!u.value.isInitial&&u.value.attached&&!!(u.value.pendingFork||!u.value.stageRunId),"onUpdate:showThreadModal":f[6]||(f[6]=_=>c.value=_),onStart:Ce,onReset:Me,onLogout:(Z=i.value)==null?void 0:Z.logout,onActionClicked:(te=i.value)==null?void 0:te.handleActionClick,onNavigate:Ve,onUpdateWidgetErrors:(ae=i.value)==null?void 0:ae.updateWidgetFrontendErrors,onUpdateWidgetValue:(le=i.value)==null?void 0:le.updateWidgetValue,onAutoFillClicked:(oe=i.value)==null?void 0:oe.handleAutofillClick},null,8,["query-params","form-state","form-runner-data","user-email","disabled-warning","stage-run-id","needs-thread","onLogout","onActionClicked","onUpdateWidgetErrors","onUpdateWidgetValue","onAutoFillClicked"])):x("",!0)])]}),_:1})):x("",!0)]),footer:o(()=>{var C,Z;return[t(Xe,{ref_key:"smartConsole",ref:K,runtime:"forms","log-service":e(ee),stage:(C=e(A))==null?void 0:C.form,workspace:(Z=e(A))==null?void 0:Z.workspace},null,8,["log-service","stage","workspace"])]}),_:1}))}});export{uo as default};
//# sourceMappingURL=FormEditor.b927467c.js.map
