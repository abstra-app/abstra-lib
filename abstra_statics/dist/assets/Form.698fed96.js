import{dv as Ve,a7 as Ie,dw as Te,dx as je,dy as de,dz as qe,dA as Ce,dp as We,r as Oe,u as U,E as _e,D as xe,G as re,Q as _,ar as Ne,a1 as De,bN as ce,dB as Ee,d as $e,Y as He,K as Re,F as S,dC as ze,dD as Ye,dE as Ke,L as Ue,f as Ge,O as fe,a3 as he,bc as Qe,a0 as te,av as J,au as ge,a_ as ve,$ as Xe,aw as X,a9 as le}from"./outputWidgets.c7dcc302.js";import{c as Ze,g as Je,a as Be,d as ae,v as et,e as Me,A as tt,u as nt,f as rt,h as me,t as ie,i as be,j as it}from"./FormItem.e17f5a0a.js";import{s as lt,o as at,i as st,a as ue,b as ot,c as ke,t as ut,f as dt}from"./hasIn.84086a40.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="14c84c10-b2d1-4d0d-8896-ee67e487be78",e._sentryDebugIdIdentifier="sentry-dbid-14c84c10-b2d1-4d0d-8896-ee67e487be78")}catch{}})();function we(e){return typeof e=="object"&&e!=null&&e.nodeType===1}function pe(e,t){return(!t||e!=="hidden")&&e!=="visible"&&e!=="clip"}function se(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return pe(n.overflowY,t)||pe(n.overflowX,t)||function(s){var r=function(i){if(!i.ownerDocument||!i.ownerDocument.defaultView)return null;try{return i.ownerDocument.defaultView.frameElement}catch{return null}}(s);return!!r&&(r.clientHeight<s.scrollHeight||r.clientWidth<s.scrollWidth)}(e)}return!1}function ne(e,t,n,s,r,i,u,F){return i<e&&u>t||i>e&&u<t?0:i<=e&&F<=n||u>=t&&F>=n?i-e-s:u>t&&F<n||i<e&&F>n?u-t+r:0}var ye=function(e,t){var n=window,s=t.scrollMode,r=t.block,i=t.inline,u=t.boundary,F=t.skipOverflowHiddenElements,P=typeof u=="function"?u:function(Se){return Se!==u};if(!we(e))throw new TypeError("Invalid target");for(var V,M,q=document.scrollingElement||document.documentElement,A=[],b=e;we(b)&&P(b);){if((b=(M=(V=b).parentElement)==null?V.getRootNode().host||null:M)===q){A.push(b);break}b!=null&&b===document.body&&se(b)&&!se(document.documentElement)||b!=null&&se(b,F)&&A.push(b)}for(var O=n.visualViewport?n.visualViewport.width:innerWidth,L=n.visualViewport?n.visualViewport.height:innerHeight,D=window.scrollX||pageXOffset,C=window.scrollY||pageYOffset,x=e.getBoundingClientRect(),o=x.height,l=x.width,f=x.top,w=x.right,m=x.bottom,c=x.left,p=r==="start"||r==="nearest"?f:r==="end"?m:f+o/2,h=i==="center"?c+l/2:i==="end"?w:c,y=[],I=0;I<A.length;I++){var g=A[I],T=g.getBoundingClientRect(),N=T.height,$=T.width,a=T.top,d=T.right,v=T.bottom,E=T.left;if(s==="if-needed"&&f>=0&&c>=0&&m<=L&&w<=O&&f>=a&&m<=v&&c>=E&&w<=d)return y;var W=getComputedStyle(g),R=parseInt(W.borderLeftWidth,10),K=parseInt(W.borderTopWidth,10),j=parseInt(W.borderRightWidth,10),H=parseInt(W.borderBottomWidth,10),k=0,z=0,G="offsetWidth"in g?g.offsetWidth-g.clientWidth-R-j:0,Y="offsetHeight"in g?g.offsetHeight-g.clientHeight-K-H:0,Q="offsetWidth"in g?g.offsetWidth===0?0:$/g.offsetWidth:0,B="offsetHeight"in g?g.offsetHeight===0?0:N/g.offsetHeight:0;if(q===g)k=r==="start"?p:r==="end"?p-L:r==="nearest"?ne(C,C+L,L,K,H,C+p,C+p+o,o):p-L/2,z=i==="start"?h:i==="center"?h-O/2:i==="end"?h-O:ne(D,D+O,O,R,j,D+h,D+h+l,l),k=Math.max(0,k+C),z=Math.max(0,z+D);else{k=r==="start"?p-a-K:r==="end"?p-v+H+Y:r==="nearest"?ne(a,v,N,K,H+Y,p,p+o,o):p-(a+N/2)+Y/2,z=i==="start"?h-E-R:i==="center"?h-(E+$/2)+G/2:i==="end"?h-d+j+G:ne(E,d,$,R,j+G,h,h+l,l);var ee=g.scrollLeft,Z=g.scrollTop;p+=Z-(k=Math.max(0,Math.min(Z+k/B,g.scrollHeight-N/B+Y))),h+=ee-(z=Math.max(0,Math.min(ee+z/Q,g.scrollWidth-$/Q+G)))}y.push({el:g,top:k,left:z})}return y};function Ae(e){return e===Object(e)&&Object.keys(e).length!==0}function ct(e,t){t===void 0&&(t="auto");var n="scrollBehavior"in document.body.style;e.forEach(function(s){var r=s.el,i=s.top,u=s.left;r.scroll&&n?r.scroll({top:i,left:u,behavior:t}):(r.scrollTop=i,r.scrollLeft=u)})}function ft(e){return e===!1?{block:"end",inline:"nearest"}:Ae(e)?e:{block:"start",inline:"nearest"}}function ht(e,t){var n=e.isConnected||e.ownerDocument.documentElement.contains(e);if(Ae(t)&&typeof t.behavior=="function")return t.behavior(n?ye(e,t):[]);if(!!n){var s=ft(t);return ct(ye(e,s),s.behavior)}}function gt(e,t){return lt(at(e,t,st),e+"")}function vt(e,t,n){var s=-1,r=e.length;t<0&&(t=-t>r?0:r+t),n=n>r?r:n,n<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(r);++s<r;)i[s]=e[s+t];return i}function mt(e){return Ve(e)&&Ie(e)}function bt(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var wt=Math.min;function pt(e,t,n){for(var s=n?qe:Ce,r=e[0].length,i=e.length,u=i,F=Array(i),P=1/0,V=[];u--;){var M=e[u];u&&t&&(M=ue(M,Te(t))),P=wt(M.length,P),F[u]=!n&&(t||r>=120&&M.length>=120)?new je(u&&M):void 0}M=e[0];var q=-1,A=F[0];e:for(;++q<r&&V.length<P;){var b=M[q],O=t?t(b):b;if(b=n||b!==0?b:0,!(A?de(A,O):s(V,O,n))){for(u=i;--u;){var L=F[u];if(!(L?de(L,O):s(e[u],O,n)))continue e}A&&A.push(O),V.push(b)}}return V}function yt(e){return mt(e)?e:[]}var Ft=gt(function(e){var t=ue(e,yt);return t.length&&t[0]===e[0]?pt(t):[]});const Pt=Ft;function Ot(e,t){return t.length<2?e:ot(e,vt(t,0,-1))}function Et(e,t){return t=ke(t,e),e=Ot(e,t),e==null||delete e[ut(bt(t))]}function Mt(e){return We(e)?void 0:e}var kt=1,At=2,Lt=4,St=dt(function(e,t){var n={};if(e==null)return n;var s=!1;t=ue(t,function(i){return i=ke(i,e),s||(s=i.length>1),i}),Ze(e,Je(e),n),s&&(n=Be(n,kt|At|Lt,Mt));for(var r=t.length;r--;)Et(n,t[r]);return n});const Vt=St;function Le(e){let t=!1,n=e.length;const s=[];return e.length?new Promise((r,i)=>{e.forEach((u,F)=>{u.catch(P=>(t=!0,P)).then(P=>{n-=1,s[F]=P,!(n>0)&&(t&&i(s),r(s))})})}):Promise.resolve([])}function Fe(e){let t=!1;return e&&e.length&&e.every(n=>n.required?(t=!0,!1):!0),t}function Pe(e){return e==null?[]:Array.isArray(e)?e:[e]}function oe(e,t,n){let s=e;t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");const r=t.split(".");let i=0;for(let u=r.length;i<u-1&&!(!s&&!n);++i){const F=r[i];if(F in s)s=s[F];else{if(n)throw new Error("please transfer a valid name path to validate!");break}}return{o:s,k:r[i],v:s?s[r[i]]:null,isValid:s&&r[i]in s}}function It(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Oe({}),n=arguments.length>2?arguments[2]:void 0;const s=ae(U(e)),r=_e({}),i=xe([]),u=o=>{_(U(e),_(_({},ae(s)),o)),De(()=>{Object.keys(r).forEach(l=>{r[l]={autoLink:!1,required:Fe(U(t)[l])}})})},F=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],l=arguments.length>1?arguments[1]:void 0;return l.length?o.filter(f=>{const w=Pe(f.trigger||"change");return Pt(w,l).length}):o};let P=null;const V=function(o){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=arguments.length>2?arguments[2]:void 0;const w=[],m={};for(let h=0;h<o.length;h++){const y=o[h],I=oe(U(e),y,f);if(!I.isValid)continue;m[y]=I.v;const g=F(U(t)[y],Pe(l&&l.trigger));g.length&&w.push(M(y,I.v,g,l||{}).then(()=>({name:y,errors:[],warnings:[]})).catch(T=>{const N=[],$=[];return T.forEach(a=>{let{rule:{warningOnly:d},errors:v}=a;d?$.push(...v):N.push(...v)}),N.length?Promise.reject({name:y,errors:N,warnings:$}):{name:y,errors:N,warnings:$}}))}const c=Le(w);P=c;const p=c.then(()=>P===c?Promise.resolve(m):Promise.reject([])).catch(h=>{const y=h.filter(I=>I&&I.errors.length);return Promise.reject({values:m,errorFields:y,outOfDate:P!==c})});return p.catch(h=>h),p},M=function(o,l,f){let w=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const m=et([o],l,f,_({validateMessages:Me},w),!!w.validateFirst);return r[o]?(r[o].validateStatus="validating",m.catch(c=>c).then(function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];var p;if(r[o].validateStatus==="validating"){const h=c.filter(y=>y&&y.errors.length);r[o].validateStatus=h.length?"error":"success",r[o].help=h.length?h.map(y=>y.errors):null,(p=n==null?void 0:n.onValidate)===null||p===void 0||p.call(n,o,!h.length,h.length?ce(r[o].help[0]):null)}}),m):m.catch(c=>c)},q=(o,l)=>{let f=[],w=!0;o?Array.isArray(o)?f=o:f=[o]:(w=!1,f=i.value);const m=V(f,l||{},w);return m.catch(c=>c),m},A=o=>{let l=[];o?Array.isArray(o)?l=o:l=[o]:l=i.value,l.forEach(f=>{r[f]&&_(r[f],{validateStatus:"",help:null})})},b=o=>{const l={autoLink:!1},f=[],w=Array.isArray(o)?o:[o];for(let m=0;m<w.length;m++){const c=w[m];(c==null?void 0:c.validateStatus)==="error"&&(l.validateStatus="error",c.help&&f.push(c.help)),l.required=l.required||(c==null?void 0:c.required)}return l.help=f,l};let O=s,L=!0;const D=o=>{const l=[];i.value.forEach(f=>{const w=oe(o,f,!1),m=oe(O,f,!1);(L&&(n==null?void 0:n.immediate)&&w.isValid||!Ee(w.v,m.v))&&l.push(f)}),q(l,{trigger:"change"}),L=!1,O=ae(ce(o))},C=n==null?void 0:n.debounce;let x=!0;return re(t,()=>{i.value=t?Object.keys(U(t)):[],!x&&n&&n.validateOnRuleChange&&q(),x=!1},{deep:!0,immediate:!0}),re(i,()=>{const o={};i.value.forEach(l=>{o[l]=_({},r[l],{autoLink:!1,required:Fe(U(t)[l])}),delete r[l]});for(const l in r)Object.prototype.hasOwnProperty.call(r,l)&&delete r[l];_(r,o)},{immediate:!0}),re(e,C&&C.wait?Ne(D,C.wait,Vt(C,["wait"])):D,{immediate:n&&!!n.immediate,deep:!0}),{modelRef:e,rulesRef:t,initialModel:s,validateInfos:r,resetFields:u,validate:q,validateField:M,mergeValidateInfo:b,clearValidate:A}}const Tt=()=>({layout:he.oneOf(Qe("horizontal","inline","vertical")),labelCol:te(),wrapperCol:te(),colon:J(),labelAlign:ge(),labelWrap:J(),prefixCls:String,requiredMark:ve([String,Boolean]),hideRequiredMark:J(),model:he.object,rules:te(),validateMessages:te(),validateOnRuleChange:J(),scrollToFirstError:Xe(),onSubmit:X(),name:String,validateTrigger:ve([String,Array]),size:ge(),disabled:J(),onValuesChange:X(),onFieldsChange:X(),onFinish:X(),onFinishFailed:X(),onValidate:X()});function jt(e,t){return Ee(ie(e),ie(t))}const qt=$e({compatConfig:{MODE:3},name:"AForm",inheritAttrs:!1,props:He(Tt(),{layout:"horizontal",hideRequiredMark:!1,colon:!0}),Item:tt,useForm:It,setup(e,t){let{emit:n,slots:s,expose:r,attrs:i}=t;const{prefixCls:u,direction:F,form:P,size:V,disabled:M}=Re("form",e),q=S(()=>e.requiredMark===""||e.requiredMark),A=S(()=>{var a;return q.value!==void 0?q.value:P&&((a=P.value)===null||a===void 0?void 0:a.requiredMark)!==void 0?P.value.requiredMark:!e.hideRequiredMark});ze(V),Ye(M);const b=S(()=>{var a,d;return(a=e.colon)!==null&&a!==void 0?a:(d=P.value)===null||d===void 0?void 0:d.colon}),{validateMessages:O}=Ke(),L=S(()=>_(_(_({},Me),O.value),e.validateMessages)),[D,C]=nt(u),x=S(()=>Ue(u.value,{[`${u.value}-${e.layout}`]:!0,[`${u.value}-hide-required-mark`]:A.value===!1,[`${u.value}-rtl`]:F.value==="rtl",[`${u.value}-${V.value}`]:V.value},C.value)),o=Oe(),l={},f=(a,d)=>{l[a]=d},w=a=>{delete l[a]},m=a=>{const d=!!a,v=d?ie(a).map(be):[];return d?Object.values(l).filter(E=>v.findIndex(W=>jt(W,E.fieldName.value))>-1):Object.values(l)},c=a=>{if(!e.model){le();return}m(a).forEach(d=>{d.resetField()})},p=a=>{m(a).forEach(d=>{d.clearValidate()})},h=a=>{const{scrollToFirstError:d}=e;if(n("finishFailed",a),d&&a.errorFields.length){let v={};typeof d=="object"&&(v=d),I(a.errorFields[0].name,v)}},y=function(){return N(...arguments)},I=function(a){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const v=m(a?[a]:void 0);if(v.length){const E=v[0].fieldId.value,W=E?document.getElementById(E):null;W&&ht(W,_({scrollMode:"if-needed",block:"nearest"},d))}},g=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(a===!0){const d=[];return Object.values(l).forEach(v=>{let{namePath:E}=v;d.push(E.value)}),me(e.model,d)}else return me(e.model,a)},T=(a,d)=>{if(le(),!e.model)return le(),Promise.reject("Form `model` is required for validateFields to work.");const v=!!a,E=v?ie(a).map(be):[],W=[];Object.values(l).forEach(j=>{var H;if(v||E.push(j.namePath.value),!(!((H=j.rules)===null||H===void 0)&&H.value.length))return;const k=j.namePath.value;if(!v||it(E,k)){const z=j.validateRules(_({validateMessages:L.value},d));W.push(z.then(()=>({name:k,errors:[],warnings:[]})).catch(G=>{const Y=[],Q=[];return G.forEach(B=>{let{rule:{warningOnly:ee},errors:Z}=B;ee?Q.push(...Z):Y.push(...Z)}),Y.length?Promise.reject({name:k,errors:Y,warnings:Q}):{name:k,errors:Y,warnings:Q}}))}});const R=Le(W);o.value=R;const K=R.then(()=>o.value===R?Promise.resolve(g(E)):Promise.reject([])).catch(j=>{const H=j.filter(k=>k&&k.errors.length);return Promise.reject({values:g(E),errorFields:H,outOfDate:o.value!==R})});return K.catch(j=>j),K},N=function(){return T(...arguments)},$=a=>{a.preventDefault(),a.stopPropagation(),n("submit",a),e.model&&T().then(v=>{n("finish",v)}).catch(v=>{h(v)})};return r({resetFields:c,clearValidate:p,validateFields:T,getFieldsValue:g,validate:y,scrollToField:I}),rt({model:S(()=>e.model),name:S(()=>e.name),labelAlign:S(()=>e.labelAlign),labelCol:S(()=>e.labelCol),labelWrap:S(()=>e.labelWrap),wrapperCol:S(()=>e.wrapperCol),vertical:S(()=>e.layout==="vertical"),colon:b,requiredMark:A,validateTrigger:S(()=>e.validateTrigger),rules:S(()=>e.rules),addField:f,removeField:w,onValidate:(a,d,v)=>{n("validate",a,d,v)},validateMessages:L}),re(()=>e.rules,()=>{e.validateOnRuleChange&&T()}),()=>{var a;return D(Ge("form",fe(fe({},i),{},{onSubmit:$,class:[x.value,i.class]}),[(a=s.default)===null||a===void 0?void 0:a.call(s)]))}}}),xt=qt;export{xt as F,ht as s};
//# sourceMappingURL=Form.698fed96.js.map
