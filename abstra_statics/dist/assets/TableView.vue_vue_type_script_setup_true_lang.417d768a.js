var ze=Object.defineProperty;var Ve=(o,t,n)=>t in o?ze(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n;var se=(o,t,n)=>(Ve(o,typeof t!="symbol"?t+"":t,n),n);import{l as Y}from"./fetch.07a0d872.js";import{d as z,Z,J as I,b as r,ew as b,dn as ee,ey as O,eB as te,e as C,f as u,eI as be,eT as Ne,z as e,r as j,v as Fe,c as v,w as i,eF as J,as as $,eH as D,u as a,cM as Ue,aE as K,cE as U,x as Q,bh as Be,eL as qe,eG as ae,aI as re,cm as ve,eC as He,eD as We,eU as Je,bG as q,eK as Ke,K as Ge,o as Ae,O as Ce,af as Qe,cD as Xe,eN as Ye,bz as et,eV as tt,cG as pe}from"./outputWidgets.28c0c3b5.js";import{d as at,F as nt}from"./vuedraggable.umd.e74e634a.js";import"./workspaces.cac2ceef.js";import{S as ot}from"./scripts.19f19639.js";import"./envVars.af0020e7.js";import{A as st}from"./api.11171e11.js";import{s as ne}from"./metadata.8f88b99a.js";import{a as _e}from"./asyncComputed.402c6983.js";import{t as rt}from"./ant-design.602840de.js";import{A as H}from"./Text.d10ee3ab.js";import{A as M}from"./index.59141b39.js";import{A as G}from"./index.8bcb837d.js";import{f as it}from"./index.a248d0ba.js";import{A as ge}from"./Paragraph.17d381da.js";import"./index.07b4db86.js";import{T as lt,A as ct}from"./index.e29b3e10.js";import{A as Re,C as we}from"./CollapsePanel.eac27677.js";import{A as ut}from"./Link.f4d086e6.js";import{A as dt}from"./index.23585bec.js";import{A as mt}from"./index.3e41de68.js";import{A as X}from"./Title.1f709414.js";import{G as pt}from"./PhArrowCounterClockwise.vue.0a43ccb2.js";import{C as gt,A as ht}from"./Card.4412b671.js";import{L as Le}from"./LoadingOutlined.9463bd13.js";import"./index.03d7761c.js";import{F as St,A as yt}from"./Form.e9cb5ccc.js";import{c as ft}from"./string.9ee7d9e4.js";(function(){try{var o=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new Error().stack;t&&(o._sentryDebugIds=o._sentryDebugIds||{},o._sentryDebugIds[t]="5abfc74b-2f45-4dad-8d06-9fe7f36b7e6d",o._sentryDebugIdIdentifier="sentry-dbid-5abfc74b-2f45-4dad-8d06-9fe7f36b7e6d")}catch{}})();var bt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"};const vt=bt,At=["width","height","fill","transform"],Ct={key:0},_t=C("path",{d:"M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm0,192a84,84,0,1,1,84-84A84.09,84.09,0,0,1,128,212Zm68-84a12,12,0,0,1-12,12H128a12,12,0,0,1-12-12V72a12,12,0,0,1,24,0v44h44A12,12,0,0,1,196,128Z"},null,-1),Rt=[_t],wt={key:1},Lt=C("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"},null,-1),kt=C("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm64-88a8,8,0,0,1-8,8H128a8,8,0,0,1-8-8V72a8,8,0,0,1,16,0v48h48A8,8,0,0,1,192,128Z"},null,-1),Et=[Lt,kt],Pt={key:2},$t=C("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm56,112H128a8,8,0,0,1-8-8V72a8,8,0,0,1,16,0v48h48a8,8,0,0,1,0,16Z"},null,-1),It=[$t],Ot={key:3},xt=C("path",{d:"M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm0,192a90,90,0,1,1,90-90A90.1,90.1,0,0,1,128,218Zm62-90a6,6,0,0,1-6,6H128a6,6,0,0,1-6-6V72a6,6,0,0,1,12,0v50h50A6,6,0,0,1,190,128Z"},null,-1),Mt=[xt],jt={key:4},Dt=C("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm64-88a8,8,0,0,1-8,8H128a8,8,0,0,1-8-8V72a8,8,0,0,1,16,0v48h48A8,8,0,0,1,192,128Z"},null,-1),Zt=[Dt],Tt={key:5},zt=C("path",{d:"M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm0,192a92,92,0,1,1,92-92A92.1,92.1,0,0,1,128,220Zm60-92a4,4,0,0,1-4,4H128a4,4,0,0,1-4-4V72a4,4,0,0,1,8,0v52h52A4,4,0,0,1,188,128Z"},null,-1),Vt=[zt],Nt={name:"PhClock"},Ft=z({...Nt,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(o){const t=o,n=Z("weight","regular"),s=Z("size","1em"),l=Z("color","currentColor"),p=Z("mirrored",!1),d=I(()=>{var c;return(c=t.weight)!=null?c:n}),h=I(()=>{var c;return(c=t.size)!=null?c:s}),L=I(()=>{var c;return(c=t.color)!=null?c:l}),m=I(()=>t.mirrored!==void 0?t.mirrored?"scale(-1, 1)":void 0:p?"scale(-1, 1)":void 0);return(c,f)=>(r(),b("svg",te({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:h.value,height:h.value,fill:L.value,transform:m.value},c.$attrs),[ee(c.$slots,"default"),d.value==="bold"?(r(),b("g",Ct,Rt)):d.value==="duotone"?(r(),b("g",wt,Et)):d.value==="fill"?(r(),b("g",Pt,It)):d.value==="light"?(r(),b("g",Ot,Mt)):d.value==="regular"?(r(),b("g",jt,Zt)):d.value==="thin"?(r(),b("g",Tt,Vt)):O("",!0)],16,At))}}),Ut=["width","height","fill","transform"],Bt={key:0},qt=C("path",{d:"M228,64a36,36,0,1,0-48,33.94V112a4,4,0,0,1-4,4H80a4,4,0,0,1-4-4V97.94a36,36,0,1,0-24,0V112a28,28,0,0,0,28,28h36v18.06a36,36,0,1,0,24,0V140h36a28,28,0,0,0,28-28V97.94A36.07,36.07,0,0,0,228,64ZM64,52A12,12,0,1,1,52,64,12,12,0,0,1,64,52Zm64,152a12,12,0,1,1,12-12A12,12,0,0,1,128,204ZM192,76a12,12,0,1,1,12-12A12,12,0,0,1,192,76Z"},null,-1),Ht=[qt],Wt={key:1},Jt=C("path",{d:"M88,64A24,24,0,1,1,64,40,24,24,0,0,1,88,64ZM192,40a24,24,0,1,0,24,24A24,24,0,0,0,192,40Z",opacity:"0.2"},null,-1),Kt=C("path",{d:"M224,64a32,32,0,1,0-40,31v17a8,8,0,0,1-8,8H80a8,8,0,0,1-8-8V95a32,32,0,1,0-16,0v17a24,24,0,0,0,24,24h40v25a32,32,0,1,0,16,0V136h40a24,24,0,0,0,24-24V95A32.06,32.06,0,0,0,224,64ZM48,64A16,16,0,1,1,64,80,16,16,0,0,1,48,64Zm96,128a16,16,0,1,1-16-16A16,16,0,0,1,144,192ZM192,80a16,16,0,1,1,16-16A16,16,0,0,1,192,80Z"},null,-1),Gt=[Jt,Kt],Qt={key:2},Xt=C("path",{d:"M224,64a32,32,0,1,0-40,31v17a8,8,0,0,1-8,8H80a8,8,0,0,1-8-8V95a32,32,0,1,0-16,0v17a24,24,0,0,0,24,24h40v25a32,32,0,1,0,16,0V136h40a24,24,0,0,0,24-24V95A32.06,32.06,0,0,0,224,64ZM144,192a16,16,0,1,1-16-16A16,16,0,0,1,144,192Z"},null,-1),Yt=[Xt],ea={key:3},ta=C("path",{d:"M222,64a30,30,0,1,0-36,29.4V112a10,10,0,0,1-10,10H80a10,10,0,0,1-10-10V93.4a30,30,0,1,0-12,0V112a22,22,0,0,0,22,22h42v28.6a30,30,0,1,0,12,0V134h42a22,22,0,0,0,22-22V93.4A30.05,30.05,0,0,0,222,64ZM46,64A18,18,0,1,1,64,82,18,18,0,0,1,46,64ZM146,192a18,18,0,1,1-18-18A18,18,0,0,1,146,192ZM192,82a18,18,0,1,1,18-18A18,18,0,0,1,192,82Z"},null,-1),aa=[ta],na={key:4},oa=C("path",{d:"M224,64a32,32,0,1,0-40,31v17a8,8,0,0,1-8,8H80a8,8,0,0,1-8-8V95a32,32,0,1,0-16,0v17a24,24,0,0,0,24,24h40v25a32,32,0,1,0,16,0V136h40a24,24,0,0,0,24-24V95A32.06,32.06,0,0,0,224,64ZM48,64A16,16,0,1,1,64,80,16,16,0,0,1,48,64Zm96,128a16,16,0,1,1-16-16A16,16,0,0,1,144,192ZM192,80a16,16,0,1,1,16-16A16,16,0,0,1,192,80Z"},null,-1),sa=[oa],ra={key:5},ia=C("path",{d:"M220,64a28,28,0,1,0-32,27.71V112a12,12,0,0,1-12,12H80a12,12,0,0,1-12-12V91.71a28,28,0,1,0-8,0V112a20,20,0,0,0,20,20h44v32.29a28,28,0,1,0,8,0V132h44a20,20,0,0,0,20-20V91.71A28,28,0,0,0,220,64ZM44,64A20,20,0,1,1,64,84,20,20,0,0,1,44,64ZM148,192a20,20,0,1,1-20-20A20,20,0,0,1,148,192ZM192,84a20,20,0,1,1,20-20A20,20,0,0,1,192,84Z"},null,-1),la=[ia],ca={name:"PhGitFork"},ua=z({...ca,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(o){const t=o,n=Z("weight","regular"),s=Z("size","1em"),l=Z("color","currentColor"),p=Z("mirrored",!1),d=I(()=>{var c;return(c=t.weight)!=null?c:n}),h=I(()=>{var c;return(c=t.size)!=null?c:s}),L=I(()=>{var c;return(c=t.color)!=null?c:l}),m=I(()=>t.mirrored!==void 0?t.mirrored?"scale(-1, 1)":void 0:p?"scale(-1, 1)":void 0);return(c,f)=>(r(),b("svg",te({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:h.value,height:h.value,fill:L.value,transform:m.value},c.$attrs),[ee(c.$slots,"default"),d.value==="bold"?(r(),b("g",Bt,Ht)):d.value==="duotone"?(r(),b("g",Wt,Gt)):d.value==="fill"?(r(),b("g",Qt,Yt)):d.value==="light"?(r(),b("g",ea,aa)):d.value==="regular"?(r(),b("g",na,sa)):d.value==="thin"?(r(),b("g",ra,la)):O("",!0)],16,Ut))}}),da=["width","height","fill","transform"],ma={key:0},pa=C("path",{d:"M176,128a12,12,0,0,1-5.17,9.87l-52,36A12,12,0,0,1,100,164V92a12,12,0,0,1,18.83-9.87l52,36A12,12,0,0,1,176,128Zm60,0A108,108,0,1,1,128,20,108.12,108.12,0,0,1,236,128Zm-24,0a84,84,0,1,0-84,84A84.09,84.09,0,0,0,212,128Z"},null,-1),ga=[pa],ha={key:1},Sa=C("path",{d:"M128,32a96,96,0,1,0,96,96A96,96,0,0,0,128,32ZM108,168V88l64,40Z",opacity:"0.2"},null,-1),ya=C("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm48.24-94.78-64-40A8,8,0,0,0,100,88v80a8,8,0,0,0,12.24,6.78l64-40a8,8,0,0,0,0-13.56ZM116,153.57V102.43L156.91,128Z"},null,-1),fa=[Sa,ya],ba={key:2},va=C("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm40.55,110.58-52,36A8,8,0,0,1,104,164V92a8,8,0,0,1,12.55-6.58l52,36a8,8,0,0,1,0,13.16Z"},null,-1),Aa=[va],Ca={key:3},_a=C("path",{d:"M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm0,192a90,90,0,1,1,90-90A90.1,90.1,0,0,1,128,218Zm47.18-95.09-64-40A6,6,0,0,0,102,88v80a6,6,0,0,0,9.18,5.09l64-40a6,6,0,0,0,0-10.18ZM114,157.17V98.83L160.68,128Z"},null,-1),Ra=[_a],wa={key:4},La=C("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm48.24-94.78-64-40A8,8,0,0,0,100,88v80a8,8,0,0,0,12.24,6.78l64-40a8,8,0,0,0,0-13.56ZM116,153.57V102.43L156.91,128Z"},null,-1),ka=[La],Ea={key:5},Pa=C("path",{d:"M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm0,192a92,92,0,1,1,92-92A92.1,92.1,0,0,1,128,220Zm46.12-95.39-64-40A4,4,0,0,0,104,88v80a4,4,0,0,0,2.06,3.5,4.06,4.06,0,0,0,1.94.5,4,4,0,0,0,2.12-.61l64-40a4,4,0,0,0,0-6.78ZM112,160.78V95.22L164.45,128Z"},null,-1),$a=[Pa],Ia={name:"PhPlayCircle"},Oa=z({...Ia,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(o){const t=o,n=Z("weight","regular"),s=Z("size","1em"),l=Z("color","currentColor"),p=Z("mirrored",!1),d=I(()=>{var c;return(c=t.weight)!=null?c:n}),h=I(()=>{var c;return(c=t.size)!=null?c:s}),L=I(()=>{var c;return(c=t.color)!=null?c:l}),m=I(()=>t.mirrored!==void 0?t.mirrored?"scale(-1, 1)":void 0:p?"scale(-1, 1)":void 0);return(c,f)=>(r(),b("svg",te({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:h.value,height:h.value,fill:L.value,transform:m.value},c.$attrs),[ee(c.$slots,"default"),d.value==="bold"?(r(),b("g",ma,ga)):d.value==="duotone"?(r(),b("g",ha,fa)):d.value==="fill"?(r(),b("g",ba,Aa)):d.value==="light"?(r(),b("g",Ca,Ra)):d.value==="regular"?(r(),b("g",wa,ka)):d.value==="thin"?(r(),b("g",Ea,$a)):O("",!0)],16,da))}}),xa=["width","height","fill","transform"],Ma={key:0},ja=C("path",{d:"M144,180a16,16,0,1,1-16-16A16,16,0,0,1,144,180Zm92-52A108,108,0,1,1,128,20,108.12,108.12,0,0,1,236,128Zm-24,0a84,84,0,1,0-84,84A84.09,84.09,0,0,0,212,128ZM128,64c-24.26,0-44,17.94-44,40v4a12,12,0,0,0,24,0v-4c0-8.82,9-16,20-16s20,7.18,20,16-9,16-20,16a12,12,0,0,0-12,12v8a12,12,0,0,0,23.73,2.56C158.31,137.88,172,122.37,172,104,172,81.94,152.26,64,128,64Z"},null,-1),Da=[ja],Za={key:1},Ta=C("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"},null,-1),za=C("path",{d:"M140,180a12,12,0,1,1-12-12A12,12,0,0,1,140,180ZM128,72c-22.06,0-40,16.15-40,36v4a8,8,0,0,0,16,0v-4c0-11,10.77-20,24-20s24,9,24,20-10.77,20-24,20a8,8,0,0,0-8,8v8a8,8,0,0,0,16,0v-.72c18.24-3.35,32-17.9,32-35.28C168,88.15,150.06,72,128,72Zm104,56A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"},null,-1),Va=[Ta,za],Na={key:2},Fa=C("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,168a12,12,0,1,1,12-12A12,12,0,0,1,128,192Zm8-48.72V144a8,8,0,0,1-16,0v-8a8,8,0,0,1,8-8c13.23,0,24-9,24-20s-10.77-20-24-20-24,9-24,20v4a8,8,0,0,1-16,0v-4c0-19.85,17.94-36,40-36s40,16.15,40,36C168,125.38,154.24,139.93,136,143.28Z"},null,-1),Ua=[Fa],Ba={key:3},qa=C("path",{d:"M138,180a10,10,0,1,1-10-10A10,10,0,0,1,138,180ZM128,74c-21,0-38,15.25-38,34v4a6,6,0,0,0,12,0v-4c0-12.13,11.66-22,26-22s26,9.87,26,22-11.66,22-26,22a6,6,0,0,0-6,6v8a6,6,0,0,0,12,0v-2.42c18.11-2.58,32-16.66,32-33.58C166,89.25,149,74,128,74Zm102,54A102,102,0,1,1,128,26,102.12,102.12,0,0,1,230,128Zm-12,0a90,90,0,1,0-90,90A90.1,90.1,0,0,0,218,128Z"},null,-1),Ha=[qa],Wa={key:4},Ja=C("path",{d:"M140,180a12,12,0,1,1-12-12A12,12,0,0,1,140,180ZM128,72c-22.06,0-40,16.15-40,36v4a8,8,0,0,0,16,0v-4c0-11,10.77-20,24-20s24,9,24,20-10.77,20-24,20a8,8,0,0,0-8,8v8a8,8,0,0,0,16,0v-.72c18.24-3.35,32-17.9,32-35.28C168,88.15,150.06,72,128,72Zm104,56A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"},null,-1),Ka=[Ja],Ga={key:5},Qa=C("path",{d:"M136,180a8,8,0,1,1-8-8A8,8,0,0,1,136,180ZM128,76c-19.85,0-36,14.36-36,32v4a4,4,0,0,0,8,0v-4c0-13.23,12.56-24,28-24s28,10.77,28,24-12.56,24-28,24a4,4,0,0,0-4,4v8a4,4,0,0,0,8,0v-4.2c18-1.77,32-15.36,32-31.8C164,90.36,147.85,76,128,76Zm100,52A100,100,0,1,1,128,28,100.11,100.11,0,0,1,228,128Zm-8,0a92,92,0,1,0-92,92A92.1,92.1,0,0,0,220,128Z"},null,-1),Xa=[Qa],Ya={name:"PhQuestion"},en=z({...Ya,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(o){const t=o,n=Z("weight","regular"),s=Z("size","1em"),l=Z("color","currentColor"),p=Z("mirrored",!1),d=I(()=>{var c;return(c=t.weight)!=null?c:n}),h=I(()=>{var c;return(c=t.size)!=null?c:s}),L=I(()=>{var c;return(c=t.color)!=null?c:l}),m=I(()=>t.mirrored!==void 0?t.mirrored?"scale(-1, 1)":void 0:p?"scale(-1, 1)":void 0);return(c,f)=>(r(),b("svg",te({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:h.value,height:h.value,fill:L.value,transform:m.value},c.$attrs),[ee(c.$slots,"default"),d.value==="bold"?(r(),b("g",Ma,Da)):d.value==="duotone"?(r(),b("g",Za,Va)):d.value==="fill"?(r(),b("g",Na,Ua)):d.value==="light"?(r(),b("g",Ba,Ha)):d.value==="regular"?(r(),b("g",Wa,Ka)):d.value==="thin"?(r(),b("g",Ga,Xa)):O("",!0)],16,xa))}});function he(o){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},s=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable}))),s.forEach(function(l){tn(o,l,n[l])})}return o}function tn(o,t,n){return t in o?Object.defineProperty(o,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[t]=n,o}var le=function(t,n){var s=he({},t,n.attrs);return u(be,he({},s,{icon:Ne}),null)};le.displayName="EyeInvisibleOutlined";le.inheritAttrs=!1;const an=le;function Se(o){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},s=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable}))),s.forEach(function(l){nn(o,l,n[l])})}return o}function nn(o,t,n){return t in o?Object.defineProperty(o,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[t]=n,o}var ce=function(t,n){var s=Se({},t,n.attrs);return u(be,Se({},s,{icon:vt}),null)};ce.displayName="SyncOutlined";ce.inheritAttrs=!1;const ke=ce;class ui{constructor(t=Y){this.fetch=t}async getStages(){return(await this.fetch("/_editor/api/kanban/stages")).json()}async getData(t){return(await this.fetch("/_editor/api/kanban",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})).json()}async getPath(t){return(await this.fetch(`/_editor/api/kanban/path?n=${t}`)).json()}async getLogs(t){return(await this.fetch(`/_editor/api/kanban/logs/${t}`)).json()}async startJob(t){await this.fetch(`/_editor/api/kanban/jobs/${t}/start`,{method:"POST"})}}class di{constructor(t,n=Y){this.authProvider=t,this.fetch=n}get headers(){return{"Content-Type":"application/json",...this.authProvider.authHeaders()}}async getStages(){return(await this.fetch("/_kanban/stages",{headers:this.headers})).json()}async getData(t){return(await this.fetch("/_kanban/",{method:"POST",body:JSON.stringify(t),headers:this.headers})).json()}async getPath(t){return(await this.fetch(`/_kanban/path?n=${t}`,{headers:this.headers})).json()}async getLogs(t){return(await this.fetch(`/_kanban/logs/${t}`,{headers:this.headers})).json()}async startJob(t){await this.fetch(`/_kanban/jobs/${t}/start`,{method:"POST",headers:this.headers})}}class mi{constructor(t=Y){se(this,"forkEnabled",!0);this.fetch=t}async fork(t){return(await this.fetch("/_editor/api/stage_runs/fork",{method:"POST",body:JSON.stringify({stage_run_id:t}),headers:{"Content-Type":"application/json"}})).json()}async retry(t){return(await this.fetch("/_editor/api/stage_runs/retry",{method:"POST",body:JSON.stringify({stage_run_id:t}),headers:{"Content-Type":"application/json"}})).json()}}class pi{constructor(t=Y){se(this,"forkEnabled",!1);this.fetch=t}async fork(){throw new Error("Not implemented")}async retry(t){return(await this.fetch("/_stage-runs/retry",{method:"POST",body:JSON.stringify({stage_run_id:t}),headers:{"Content-Type":"application/json"}})).json()}}const on=e.boolean(),sn=e.boolean(),rn=e.boolean(),ln=e.boolean();e.object({PROJECT_LIVE:on.optional(),ALLOW_RELEASE:sn.optional(),CONNECTORS_CONSOLE:rn.optional(),DUPLICATE_PROJECTS:ln.optional()});const cn=e.string(),un=e.string(),dn=e.string(),mn=e.string(),pn=e.string();e.object({plan:cn.optional(),expires:un.optional(),message:dn.optional(),messageLink:mn.optional(),messageCTA:pn.optional()});const gn=e.string(),Ee=e.string(),ue=e.string(),hn=e.string(),Sn=e.string(),yn=e.object({id:gn,name:Ee,description:ue.optional(),projectId:hn,createdAt:Sn}),fn=e.string(),bn=e.string(),vn=e.string(),An=e.string(),Cn=e.enum(["true","false"]),_n=e.enum(["true","false"]),Rn=e.string().regex(new RegExp("^[0-9]+m$")),wn=e.string().regex(new RegExp("^[0-9]+m$")),Ln=e.string().regex(new RegExp("^[0-9]+Mi$")),kn=e.string().regex(new RegExp("^[0-9]+Mi$")),En=e.string().regex(new RegExp("^[0-9]+$")),Pn=e.string().regex(new RegExp("^[0-9]+$")),$n=e.enum(["shared","clickbus","test"]),In=e.object({watermarkEnabled:Cn.optional(),notificationsEnabled:_n.optional(),requestsCPU:Rn.optional(),limitsCPU:wn.optional(),requestsMemory:Ln.optional(),limitsMemory:kn.optional(),minReplicas:En.optional(),timeoutSeconds:Pn.optional(),workerType:$n.optional()});e.object({id:fn,name:bn,subdomain:vn,organizationId:An,deploymentResources:In.optional()});const On=e.string(),xn=e.string(),Pe=e.array(xn),$e=e.string(),Mn=e.string();e.object({id:On,emailPatterns:Pe,projectId:$e,createdAt:Mn});const jn=e.enum(["true","false"]),Dn=e.enum(["true","false"]),Zn=e.string().regex(new RegExp("^[0-9]+m$")),Tn=e.string().regex(new RegExp("^[0-9]+m$")),zn=e.string().regex(new RegExp("^[0-9]+Mi$")),Vn=e.string().regex(new RegExp("^[0-9]+Mi$")),Nn=e.string().regex(new RegExp("^[0-9]+$")),Fn=e.string().regex(new RegExp("^[0-9]+$")),Un=e.enum(["shared","clickbus","test"]);e.object({watermarkEnabled:jn.optional(),notificationsEnabled:Dn.optional(),requestsCPU:Zn.optional(),limitsCPU:Tn.optional(),requestsMemory:zn.optional(),limitsMemory:Vn.optional(),minReplicas:Nn.optional(),timeoutSeconds:Fn.optional(),workerType:Un.optional()});const Bn=e.string(),oe=e.string().email(),qn=e.string(),de=e.array(qn),Hn=e.string(),Wn=e.string(),Jn=e.object({id:Bn,email:oe,roles:de,projectId:Hn,createdAt:Wn}),Ie=e.string(),Oe=e.string(),Kn=e.boolean(),Gn=e.boolean(),Qn=e.boolean(),Xn=e.boolean(),xe=e.object({PROJECT_LIVE:Kn,ALLOW_RELEASE:Gn,CONNECTORS_CONSOLE:Qn,DUPLICATE_PROJECTS:Xn}),Yn=e.string(),eo=e.string(),to=e.string(),ao=e.string(),no=e.string(),Me=e.object({plan:Yn.optional(),expires:eo.optional(),message:to.optional(),messageLink:ao.optional(),messageCTA:no.optional()}),oo=e.enum(["true","false"]),so=e.enum(["true","false"]),ro=e.string().regex(new RegExp("^[0-9]+m$")),io=e.string().regex(new RegExp("^[0-9]+m$")),lo=e.string().regex(new RegExp("^[0-9]+Mi$")),co=e.string().regex(new RegExp("^[0-9]+Mi$")),uo=e.string().regex(new RegExp("^[0-9]+$")),mo=e.string().regex(new RegExp("^[0-9]+$")),po=e.enum(["shared","clickbus","test"]),go=e.object({watermarkEnabled:oo.optional(),notificationsEnabled:so.optional(),requestsCPU:ro.optional(),limitsCPU:io.optional(),requestsMemory:lo.optional(),limitsMemory:co.optional(),minReplicas:uo.optional(),timeoutSeconds:mo.optional(),workerType:po.optional()}),ho=e.string(),So=e.array(ho),yo=e.object({whitelistPatterns:So.optional()});e.object({id:Ie,name:Oe,featureFlags:xe,billingMetadata:Me,deploymentResources:go.optional(),membershipsMetadata:yo.optional()});const fo=e.string(),bo=e.array(fo);e.object({whitelistPatterns:bo.optional()});const vo=Ie,Ao=Oe,Co=xe,_o=Me;e.object({id:vo,name:Ao,featureFlags:Co,billingMetadata:_o});const Ro=ue;e.object({description:Ro});const wo=e.number(),Lo=e.number();e.object({offset:wo.optional(),limit:Lo.optional()});const ko=yn;e.array(ko);const Eo=Ee,Po=ue;e.object({name:Eo,description:Po.optional()});const $o=oe,Io=de;e.object({email:$o.optional(),roles:Io.optional()});const Oo=e.number(),xo=e.number();e.object({offset:Oo.optional(),limit:xo.optional()});const Mo=Jn;e.array(Mo);const jo=oe,Do=de;e.object({email:jo,roles:Do});const Zo=Pe;e.object({emailPatterns:Zo});const To=$e;e.object({projectId:To});const zo=e.boolean();e.object({shouldBeOnboarded:zo.optional()});const Vo=e.string(),No=e.string(),Fo=e.string(),Uo=e.string();e.object({name:Vo.optional(),companyName:No.optional(),source:Fo.optional(),authorEmail:Uo.optional()});const Bo=e.string(),qo=e.record(e.any()),Ho=e.string(),Wo=e.object({key:Bo,value:qo,type:Ho}),Jo=Wo,Ko=e.array(Jo),Go=e.string(),Qo=e.enum(["text","image","table","progress-bar"]),Xo=e.object({name:Go,type:Qo}),Yo=e.string(),es=e.string(),ts=e.record(e.any()),je=e.enum(["waiting","running","processing","finished","failed","abandoned"]),as=["waiting","running","processing","finished","failed","abandoned"],ns=e.string(),os=e.string(),ss=e.string(),rs=e.string();e.object({id:Yo,stage:es,data:ts,status:je,created_at:ns,updated_at:os,parent_id:ss.optional(),execution_id:rs.optional()});const is=e.string(),ls=e.string(),cs=e.string(),us=e.string(),ds=je,ms=Ko,ps=e.string(),gs=e.object({id:is,created_at:ls,updated_at:cs.optional(),assignee:us.optional(),status:ds,content:ms,stage:ps.optional()}),hs=gs,De=e.array(hs),Ss=e.string(),ys=e.enum(["form","hook","job","script","iterator","condition"]),fs=e.string(),bs=e.string(),vs=e.boolean(),Ze=e.object({id:Ss,type:ys,title:fs,path:bs.optional(),can_be_started:vs}),As=Ze,Cs=De,_s=e.number(),Rs=e.boolean(),ws=e.object({selected_stage:As,stage_run_cards:Cs,total_count:_s,loading:Rs.optional()}),Ls=ws,ks=e.array(Ls),Es=ks;e.object({columns:Es});const Ps=De,$s=e.string(),Is=e.array($s),Os=e.number();e.object({stage_run_cards:Ps,not_found_stages:Is,total_count:Os});const xs=Xo;e.array(xs);const Ms=Ze;e.array(Ms);const js=e.string(),Ds=e.string(),Zs=e.literal("bug"),Ts=e.string(),zs=e.string(),Vs=e.string(),Ns=e.object({name:zs,label:Vs}),Fs=Ns,Us=e.array(Fs),Bs=e.object({label:Ts,fixes:Us}),qs=Bs,Hs=e.array(qs),Ws=e.object({name:js,label:Ds,type:Zs,issues:Hs}),Js=e.boolean();e.object({success:Js});const Ks=Ws;e.array(Ks);const Gs=e.string(),Qs=e.string(),Xs=e.object({key:Gs,value:Qs}),Ys=Xs;e.array(Ys);const er=oe;e.object({email:er});const tr=e.enum(["ALLOWED","UNAUTHORIZED","FORBIDEN","NOT_FOUND"]);e.object({status:tr});function me(o){switch(o.status){case"waiting":return{color:"blue",text:"Waiting"};case"running":case"processing":return{color:"processing",text:"Running"};case"finished":return{color:"success",text:"Success"};case"failed":return{color:"error",text:"Failed"};case"abandoned":return{color:"warning",text:"Abandoned"}}}const ar=10,nr=[...as].filter(o=>o!=="processing"),Te=()=>{const o=j([]),t=j({}),n=j(""),s=j([]),l=j(ar),p=j(0),d=()=>({status:o.value,data:t.value,search:n.value,stage:s.value});return{stageIds:s,filterStatus:o,filterData:t,filterSearch:n,limit:l,offset:p,filterFactory:d,labelOption:m=>me({status:m}).text,requestDataFactory:()=>({filter:d(),limit:l.value,offset:p.value})}},or=3,sr=({kanbanStagesStorage:o,kanbanRepository:t})=>{const n=j([]),s=j([]),l=I(()=>n.value.filter(f=>!s.value.map(g=>g.stage.id).includes(f.id))),p=async()=>{s.value=[]},d=f=>{s.value=s.value.filter(g=>g.stage.id!==f),o.set(s.value.map(g=>g.stage.id).filter(g=>g!==f))},h=async(f,g)=>{if(f)s.value=[...s.value.slice(0,g),{stage:f,limit:W,offset:0},...s.value.slice(g+1)];else{const R=s.value[g].stage;return s.value=[...s.value.slice(0,g),...s.value.slice(g+1)],R}return o.set(s.value.map(R=>R.stage.id)),f},L=async f=>{const g=s.value[f.moved.oldIndex];h(null,f.moved.oldIndex),s.value=[...s.value.slice(0,f.moved.newIndex),g,...s.value.slice(f.moved.newIndex)],o.set(s.value.map(R=>R.stage.id))},m=f=>{s.value=f.reduce((g,R)=>{const x=n.value.find(T=>T.id===R);return x&&g.push({stage:x,limit:W,offset:0}),g},[])};return{setup:async()=>{var g;n.value=await t.getStages();const f=(g=o.get())!=null?g:[];if(f.length===0){const R=await t.getPath(or);o.set(R),m(R)}else s.value=f.map(R=>{const x=n.value.find(T=>T.id===R);return x?{stage:x,limit:W,offset:0}:null}).filter(Boolean)},allStages:n,selectedStages:s,nonSelectedStages:l,clearSelection:p,unselect:d,setStage:h,reorderStages:L,initSelection:m}},W=10,rr=1e3,ir=({kanbanRepository:o,kanbanStagesStorage:t,router:n})=>{const s=Te(),l=sr({kanbanStagesStorage:t,kanbanRepository:o}),p=j({columns:[],next_stage_options:[]}),d=async()=>{try{const A=l.selectedStages.value,w=A.map(E=>(s.stageIds.value=[E.stage.id],o.getData(s.requestDataFactory()))),_={columns:[]},k=new Set,y=(await Promise.all(w)).map((E,N)=>({...E,stage:A[N].stage})),S=l.selectedStages.value;for(const E of S){const N=y.find(F=>F.stage.id===E.stage.id);if(!N){_.columns.push({stage_run_cards:[],selected_stage:E.stage,total_count:0,loading:!1});continue}_.columns.push({stage_run_cards:N.stage_run_cards,selected_stage:E.stage,total_count:N.total_count,loading:!1});for(const F of N.not_found_stages)k.add(F)}const V=Array.from(k);for(const E of V)l.unselect(E);return{columns:_.columns,next_stage_options:l.nonSelectedStages.value}}catch(A){return Fe(A),console.error(A),p.value}};function h(A){const w=A.selected_stage.id,_=l.selectedStages.value.find(k=>k.stage.id===w);return _!=null&&_.limit?_.limit<A.total_count:!1}async function L(A){var _;const w=l.selectedStages.value.find(k=>k.stage.id===A.selected_stage.id);w&&(w.limit=((_=w.limit)!=null?_:0)+W,p.value=await d())}async function m(A){const w=l.selectedStages.value.find(_=>_.stage.id===A);w&&w.limit&&w.limit>W&&(w.limit-=W,p.value=await d())}async function c(A,w){const _=await l.setStage(A,w);if(A===null){l.unselect(_.id),p.value.columns=p.value.columns.filter(S=>S.selected_stage.id!==_.id);const k=l.allStages.value,P=k.findIndex(S=>S.id===_.id);let y=0;for(const S of p.value.next_stage_options)k.findIndex(E=>E.id===S.id)<P&&y++;p.value.next_stage_options=[...p.value.next_stage_options.slice(0,y),_,...p.value.next_stage_options.slice(y)]}}async function f(A){await l.setStage(A,l.selectedStages.value.length),A&&(p.value.columns.push({stage_run_cards:[],selected_stage:A,total_count:0,loading:!0}),s.stageIds.value=[A.id],p.value.next_stage_options=l.nonSelectedStages.value)}async function g(A){await l.reorderStages(A)}let R=null;return{kanbanState:p,increasePagination:L,hasPagination:h,seeLess:m,setStage:c,addStage:f,cardRunHandler:async(A,w)=>{const _=A.selected_stage,k=w.id;if(_.type==="script"){const P=await ot.get(_.id);if(!P)return;await P.run(k)}if(_.type==="form"){const P=n.resolve({path:`/${_.path}`,query:k?{[st]:k}:{}});window.open(P.href,k)}},setup:async()=>{await l.setup(),p.value={columns:l.selectedStages.value.map(w=>({stage_run_cards:[],selected_stage:w.stage,total_count:0,loading:!0})),next_stage_options:l.nonSelectedStages.value};let A=!1;p.value=await d(),R=setInterval(async()=>{A||(A=!0,p.value=await d(),A=!1)},rr)},tearDown:()=>{R&&clearInterval(R)},reorderStages:g,filterController:s}},ie=z({__name:"StageRunData",props:{data:{}},setup(o){return(t,n)=>(r(),v(a(U),{direction:"vertical",style:{overflow:"hidden"}},{default:i(()=>[(r(!0),b(K,null,J(t.data,s=>(r(),b("div",{key:s.key},[u(a(H),{strong:""},{default:i(()=>[$(D(s.key),1)]),_:2},1024),u(a(Ue),{"tree-data":a(rt)(s.value),selectable:!1},null,8,["tree-data"])]))),128))]),_:1}))}}),lr={key:0},cr={key:1,class:"terminal"},ur=z({__name:"ExecutionInspector",props:{logs:{}},setup(o){return(t,n)=>t.logs.length===0?(r(),b("span",lr)):(r(),b("div",cr,[u(a(M),{vertical:""},{default:i(()=>[(r(!0),b(K,null,J(t.logs,s=>(r(),b("pre",{key:s.executionId,class:"log-text"},D(s.payload.text),1))),128))]),_:1})]))}});const dr=Q(ur,[["__scopeId","data-v-4e71a195"]]),mr=o=>(He("data-v-57f98d44"),o=o(),We(),o),pr={key:1},gr={key:1},hr=mr(()=>C("span",null,"[Deleted Stage]",-1)),Sr=["onClick"],yr=z({__name:"StageRunInspector",props:{stageRun:{},kanbanRepository:{},stageRunRepository:{}},emits:["close"],setup(o,{emit:t}){const n=o;function s(h){return Object.entries(h).map(([L,m])=>({key:L,value:m,type:typeof m}))}const{result:l,loading:p}=_e(()=>{var h;return n.kanbanRepository.getLogs((h=n.stageRun)==null?void 0:h.id)}),d=(h,L)=>{var m;h.stopPropagation(),(m=n.stageRunRepository)==null||m.fork(L),t("close")};return(h,L)=>(r(),v(a(mt),{open:"",title:"Thread details",size:"large",onClose:L[0]||(L[0]=m=>t("close"))},{extra:i(()=>[u(a(ge),null,{default:i(()=>[u(a(G),{style:{"font-weight":"600"}},{default:i(()=>{var m;return[$(D(a(me)({status:(m=h.stageRun)==null?void 0:m.status}).text),1)]}),_:1}),$(" "+D(a(it)(new Date(h.stageRun.created_at),{addSuffix:!0})),1)]),_:1})]),default:i(()=>{var m,c,f;return[(m=h.stageRun)!=null&&m.assignee?(r(),v(a(ge),{key:0},{default:i(()=>{var g;return[$(" Assignee: "+D((g=h.stageRun)==null?void 0:g.assignee),1)]}),_:1})):O("",!0),((c=h.stageRun)==null?void 0:c.content)&&((f=h.stageRun)==null?void 0:f.content.length)>0?(r(),b("div",pr,[u(a(X),{level:4},{default:i(()=>[$("Current data")]),_:1}),u(ie,{data:h.stageRun.content},null,8,["data"])])):O("",!0),u(a(X),{level:4,style:{"margin-bottom":"30px"}},{default:i(()=>[$(" Timeline ")]),_:1}),a(p)?(r(),v(a(Be),{key:2})):a(l)?(r(),v(a(lt),{key:3},{default:i(()=>[(r(!0),b(K,null,J(a(l),({stage:g,stage_run:R,logs:x})=>(r(),v(a(ct),{key:R.id},{default:i(()=>[u(a(we),{ghost:"","expand-icon-position":"end"},{default:i(()=>[u(a(Re),{class:"panel"},qe({header:i(()=>[g?(r(),v(a(M),{key:0,align:"center",gap:15},{default:i(()=>[(r(),v(ae(a(ne)(g.type)))),x.length?(r(),b("span",gr,D(g.title),1)):(r(),v(a(re),{key:0,placement:"right",title:"No logs"},{default:i(()=>[$(D(g.title),1)]),_:2},1024))]),_:2},1024)):(r(),v(a(M),{key:1,align:"center",gap:15},{default:i(()=>[u(a(en)),hr]),_:1}))]),default:i(()=>[s(R.data).length||x.length?(r(),v(a(M),{key:0,vertical:""},{default:i(()=>[s(R.data).length?(r(),v(a(M),{key:0,gap:0,vertical:""},{default:i(()=>[u(a(X),{level:5},{default:i(()=>[$(" Output data ")]),_:1}),u(ie,{data:s(R.data)},null,8,["data"])]),_:2},1024)):O("",!0),x.length?(r(),v(a(M),{key:1,vertical:"",gap:0},{default:i(()=>[u(a(dt)),u(a(X),{level:5},{default:i(()=>[$(" Logs ")]),_:1}),u(dr,{logs:x},null,8,["logs"])]),_:2},1024)):O("",!0)]),_:2},1024)):(r(),v(a(ve),{key:1,description:"No logs"}))]),_:2},[h.stageRunRepository.forkEnabled&&g?{name:"extra",fn:i(()=>[C("span",{onClick:T=>d(T,R.id)},[u(a(M),{gap:"small"},{default:i(()=>[u(a(ua),{size:"22"}),u(a(ut),null,{default:i(()=>[$("Fork")]),_:1})]),_:1})],8,Sr)]),key:"0"}:void 0]),1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):O("",!0)]}),_:1}))}});const fr=Q(yr,[["__scopeId","data-v-57f98d44"]]),ye="_thread_title",br=z({__name:"Card",props:{stage:{},card:{}},emits:["inspect","run","retry"],setup(o,{emit:t}){const n=o,s=I(()=>{const m=n.card.content.find(f=>f.key===ye);return m?m.value:new Date(String(n.card.updated_at)).toLocaleString()}),l=I(()=>n.card.content.filter(m=>m.key!==ye)),p=m=>{m.stopPropagation(),t("run")},d=m=>{m.stopPropagation(),t("retry")},h=I(()=>me({status:n.card.status}).text),L=I(()=>Je(new Date(String(n.card.updated_at))));return(m,c)=>{var f,g;return r(),v(a(gt),{size:"small",style:{cursor:"pointer"},"head-style":{"border-bottom":((f=m.card.content)==null?void 0:f.length)>0?"":"none"},"body-style":{display:((g=m.card.content)==null?void 0:g.length)>0?"block":"none"},onClick:c[0]||(c[0]=R=>m.$emit("inspect"))},{title:i(()=>[u(a(re),{title:s.value.length>24?s.value:void 0},{default:i(()=>[$(D(s.value),1)]),_:1},8,["title"])]),default:i(()=>[u(a(U),{direction:"vertical",style:{"max-height":"300px",width:"100%",overflow:"hidden"}},{default:i(()=>[u(ie,{data:l.value,disabled:!0},null,8,["data"]),m.card.assignee?(r(),v(a(G),{key:0},{default:i(()=>[$(D(m.card.assignee),1)]),_:1})):O("",!0)]),_:1}),u(a(M),{gap:"10",style:{"margin-top":"8px"}},{default:i(()=>[u(a(re),null,{title:i(()=>[$(D(m.card.updated_at),1)]),default:i(()=>[u(a(H),{type:"secondary",style:{"font-size":"12px",display:"flex","align-items":"center",gap:"4px"}},{default:i(()=>[u(a(Ft),{size:14}),$(" Updated at: "+D(L.value),1)]),_:1})]),_:1})]),_:1})]),actions:i(()=>[m.card.status==="waiting"?(r(),v(a(q),{key:0,onClick:p},{default:i(()=>[u(a(M),{align:"center",gap:"6"},{default:i(()=>[u(a(Oa),{size:"16"}),$(" Continue this thread ")]),_:1})]),_:1})):O("",!0),m.card.status==="failed"?(r(),v(a(q),{key:1,onClick:d},{default:i(()=>[u(a(M),{align:"center",gap:"6"},{default:i(()=>[u(a(pt),{size:"14"}),$(" Retry ")]),_:1})]),_:1})):O("",!0)]),extra:i(()=>[u(a(G),null,{default:i(()=>[$(D(h.value)+" ",1),h.value==="Running"?(r(),v(a(ke),{key:0,spin:!0,style:{"margin-left":"4px"}})):O("",!0)]),_:1})]),_:1},8,["head-style","body-style"])}}});class vr{constructor(t,n,s){this.router=t,this.column=n,this.kanbanRepository=s}get stage(){return this.column.selected_stage}get canStart(){return this.stage.can_be_started}get launchLink(){return!this.stage.can_be_started||this.stage.type!=="form"||!this.stage.path?null:this.router.resolve({path:`/${this.stage.path}`}).href}click(){if(this.launchLink)return window.open(this.launchLink,"_blank");if(this.stage.type==="job")return this.kanbanRepository.startJob(this.stage.id).catch(console.error)}}const Ar={class:"draggable-handler"},Cr=z({__name:"Column",props:{router:{},hasPagination:{type:Boolean},column:{},kanbanRepository:{}},emits:["increasePagination","cardRun","stageUpdate","cardInspection","cardRetry"],setup(o,{emit:t}){const n=o,s=I(()=>new vr(n.router,n.column,n.kanbanRepository));return(l,p)=>(r(),v(a(U),{direction:"vertical",class:"stage-column"},{default:i(()=>[C("div",Ar,[u(a(U),{direction:"horizontal",style:{width:"100%","justify-content":"space-between"}},{default:i(()=>[u(a(M),{gap:"8",style:{"max-width":"200px","padding-left":"10px"}},{default:i(()=>[u(a(M),null,{default:i(()=>[(r(),v(ae(a(ne)(l.column.selected_stage.type)),{size:"20"}))]),_:1}),u(a(H),{ellipsis:"",content:l.column.selected_stage.title},null,8,["content"])]),_:1}),u(a(U),null,{default:i(()=>[l.column.loading?O("",!0):(r(),v(a(H),{key:0,type:"secondary",style:{"font-size":"small","margin-right":"2px"}},{default:i(()=>[$(D(l.column.total_count),1)]),_:1})),l.column.loading?(r(),v(a(Le),{key:1})):O("",!0),u(a(q),{type:"text",style:{padding:"4px"},onClick:p[0]||(p[0]=d=>t("stageUpdate",null))},{default:i(()=>[u(a(H),{type:"secondary",style:{"font-size":"small","margin-right":"2px"}},{default:i(()=>[u(a(an))]),_:1})]),_:1})]),_:1})]),_:1})]),u(a(U),{direction:"vertical",style:{width:"100%"}},{default:i(()=>[u(a(M),{justify:"center",align:"center"},{default:i(()=>[l.column.loading?(r(),v(a(ht),{key:0,active:"",block:"",size:"large",class:"skeleton"})):O("",!0)]),_:1}),!l.column.loading&&l.column.stage_run_cards.length===0?(r(),v(a(ve),{key:0})):O("",!0),(r(!0),b(K,null,J(l.column.stage_run_cards,d=>(r(),v(br,{key:d.id,stage:l.column.selected_stage,card:d,onInspect:h=>t("cardInspection",d),onRun:h=>t("cardRun",d),onRetry:h=>t("cardRetry",d)},null,8,["stage","card","onInspect","onRun","onRetry"]))),128)),l.hasPagination?(r(),v(a(q),{key:1,style:{width:"100%"},onClick:p[1]||(p[1]=d=>t("increasePagination"))},{default:i(()=>[$("See more")]),_:1})):O("",!0),s.value.canStart?(r(),v(a(q),{key:2,style:{width:"100%"},onClick:p[2]||(p[2]=()=>s.value.click())},{default:i(()=>[$(" Start new thread ")]),_:1})):O("",!0)]),_:1})]),_:1}))}});const _r=Q(Cr,[["__scopeId","data-v-6a0f1fd2"]]),Rr=z({__name:"EmptyColumn",props:{stages:{}},emits:["stageUpdate"],setup(o,{emit:t}){const n=s=>{t("stageUpdate",s)};return(s,l)=>(r(),v(a(U),{direction:"vertical"},{default:i(()=>[(r(!0),b(K,null,J(s.stages,p=>(r(),v(a(G),{key:p.id,class:"tag",onClick:d=>n(p)},{default:i(()=>[u(a(M),{gap:"8",style:{"max-width":"200px","justify-content":"center","align-items":"center"}},{default:i(()=>[u(a(M),null,{default:i(()=>[(r(),v(ae(a(ne)(p.type)),{size:"20"}))]),_:2},1024),u(a(H),{ellipsis:"",content:p.title},null,8,["content"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1}))}});const wr=Q(Rr,[["__scopeId","data-v-08e39e62"]]);function Lr(){const o=j({state:"closed"});function t(){o.value={state:"closed"}}function n(){o.value={state:"visualizations"}}function s(p,d){o.value={state:"stage-run",stageRun:d}}const l=I(()=>"stageRun"in o.value?o.value.stageRun:null);return{closeDrawer:t,openVisualizationEditor:n,inspectStageRun:s,drawerState:o,selectedStageRunForDrawer:l}}const kr={class:"stages-container"},Er={class:"stages-content"},Pr=z({__name:"Kanban",props:{kanbanStagesStorage:{},kanbanRepository:{},stageRunRepository:{}},setup(o){const t=o,n=Ke(),{closeDrawer:s,inspectStageRun:l,drawerState:p,selectedStageRunForDrawer:d}=Lr(),h=P=>{w.value=P},L=P=>{var y;(y=t.stageRunRepository)==null||y.retry(P.id)},{kanbanState:m,setStage:c,addStage:f,setup:g,tearDown:R,cardRunHandler:x,increasePagination:T,hasPagination:B,reorderStages:A,filterController:{filterStatus:w,labelOption:_}}=ir({kanbanRepository:t.kanbanRepository,kanbanStagesStorage:t.kanbanStagesStorage,router:n}),k=j([]);return Ge(()=>{var P;return(P=m.value)==null?void 0:P.columns},P=>{P!==void 0&&(k.value=P)}),Ae(g),Ce(R),(P,y)=>(r(),b("div",null,[u(a(M),{vertical:"",style:{height:"100%"}},{default:i(()=>[u(a(we),{ghost:""},{default:i(()=>[u(a(Re),{header:"Filters"},{default:i(()=>[u(a(St),null,{default:i(()=>[u(a(yt),{label:"Status",colon:!1},{default:i(()=>[u(a(Qe),{value:a(w),style:{width:"325px"},mode:"multiple","onUpdate:value":y[0]||(y[0]=S=>h(S))},{default:i(()=>[(r(!0),b(K,null,J(a(nr),S=>(r(),v(a(Xe),{key:S,value:S},{default:i(()=>[$(D(a(_)(S)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),C("div",kr,[C("div",Er,[u(a(U),{align:"start"},{default:i(()=>[u(a(at),{modelValue:k.value,"onUpdate:modelValue":y[2]||(y[2]=S=>k.value=S),class:"draggable","item-key":S=>S.selected_stage.id,"ghost-class":"ghost","force-fallback":a(nt),handle:".draggable-handler",onStart:a(R),onEnd:a(g),onChange:a(A)},{item:i(({element:S,index:V})=>[(r(),v(a(_r),{key:S.selected_stage.id,column:S,router:a(n),"has-pagination":a(B)(S),"kanban-repository":t.kanbanRepository,onIncreasePagination:E=>a(T)(S),onCardInspection:E=>a(l)(S,E),onCardRun:E=>a(x)(S,E),onCardRetry:y[1]||(y[1]=E=>L(E)),onStageUpdate:E=>a(c)(E,V)},null,8,["column","router","has-pagination","kanban-repository","onIncreasePagination","onCardInspection","onCardRun","onStageUpdate"]))]),_:1},8,["modelValue","item-key","force-fallback","onStart","onEnd","onChange"]),u(a(wr),{stages:a(m).next_stage_options||[],onStageUpdate:y[3]||(y[3]=S=>a(f)(S))},null,8,["stages"])]),_:1})])])]),_:1}),a(p).state==="stage-run"&&a(d)?(r(),v(a(fr),{key:0,"kanban-repository":t.kanbanRepository,"stage-run":a(d),"stage-run-repository":t.stageRunRepository,onClose:a(s)},null,8,["kanban-repository","stage-run","stage-run-repository","onClose"])):O("",!0)]))}});const gi=Q(Pr,[["__scopeId","data-v-c84d7864"]]),$r=2e3,fe=[{title:"Thread",dataIndex:"thread",align:"center"},{title:"Stage",dataIndex:"stage",align:"center"},{title:"Status",dataIndex:"status",align:"center"},{title:"Updated at",dataIndex:"updated_at",align:"center"}],Ir=({kanbanRepository:o})=>{const t=Te(),n=j(0),s=j(1),l=j(10),p=async()=>{t.limit.value=l.value*s.value,t.offset.value=(s.value-1)*l.value;const f=t.requestDataFactory(),g=await o.getData(f);return n.value=g.total_count,g},d=async()=>{var k,P;const f=await p(),R=(await o.getStages()).reduce((y,S)=>(y[S.id]=S,y),{}),x=(k=f.stage_run_cards)==null?void 0:k.map(y=>y.content.map(S=>S.key)).flat(),T=Array.from(new Set(x)),A=[...fe.map(y=>y.title),...T],w=(P=f.stage_run_cards)==null?void 0:P.map(y=>{var E,N;const S=y.stage?R[y.stage]:void 0,V={};for(const F of y.content)V[F.key]=JSON.stringify(F.value);return[y.id,(E=S==null?void 0:S.title)!=null?E:"",y.status,(N=y.updated_at)!=null?N:"",...T.map(F=>V[F]||"")]}),_=new Date;return{columns:A,rows:w!=null?w:[],fileName:`threads-${_.toISOString()}`}},h=_e(async()=>{var f,g,R;try{const x=await p(),B=(await o.getStages()).reduce((y,S)=>(y[S.id]=S,y),{}),A=(g=(f=x.stage_run_cards)==null?void 0:f.map(y=>y.content.map(S=>S.key)).flat())!=null?g:[],w=Array.from(new Set(A)),_=(R=x.stage_run_cards)==null?void 0:R.map(y=>{const S=y.stage?B[y.stage]:void 0,V={thread:y.id,type:(S==null?void 0:S.type)||"",stage:(S==null?void 0:S.title)||"",status:y.status,updated_at:y.updated_at||""};for(const E of y.content)V[`data.${E.key}`]=JSON.stringify(E.value)||"";return V}),k=w.map(y=>({title:y,dataIndex:`data.${y}`,align:"center",width:200}));return{tableColumns:[...fe,{title:"Data",children:k}],tableRows:_}}catch{return{tableColumns:[],tableRows:[]}}});let L=null;return{setup:async()=>{h.refetch(),L=setInterval(()=>{h.refetch()},$r)},tearDown:()=>{L&&clearInterval(L)},tableAsyncComputed:h,totalCount:n,current:s,pageSize:l,filterController:t,getDataAsCsv:d}},Or=o=>{let t=o.columns.join(",")+`
`;o.rows.forEach(s=>{t+=s.join(","),t+=`
`});const n=document.createElement("a");n.href="data:text/csv;charset=utf-8,"+encodeURIComponent(t),n.target="_blank",n.download=`${o.fileName}.csv`,n.click()},xr={style:{"text-align":"center"}},Mr=C("div",{style:{height:"50px"}},null,-1),hi=z({__name:"TableView",props:{kanbanRepository:{}},setup(o){const t=o,n=j(""),s=j(!1),l=j(!1),p=()=>{s.value=!0,R.filterSearch.value=n.value,d()},d=Ye.exports.debounce(()=>{m.refetch(),s.value=!1},500),{setup:h,tearDown:L,tableAsyncComputed:m,totalCount:c,current:f,pageSize:g,filterController:R,getDataAsCsv:x}=Ir({kanbanRepository:t.kanbanRepository}),T=I(()=>({total:c.value,current:f.value,pageSize:g.value,totalBoundaryShowSizeChanger:10,showSizeChanger:!0,pageSizeOptions:["10","25","50","100"],onChange:async(A,w)=>{f.value=A,g.value=w,await m.refetch()}})),B=async()=>{if(l.value=!0,!m.result.value)return;const A=await x();Or(A),l.value=!1};return Ae(h),Ce(L),(A,w)=>(r(),b("div",null,[u(a(M),{justify:"space-between",style:{"margin-bottom":"12px"}},{default:i(()=>[u(a(et),{value:n.value,placeholder:"Search data or status",style:{width:"400px"},"allow-clear":"","onUpdate:value":p},{prefix:i(()=>[u(a(tt))]),suffix:i(()=>[s.value?(r(),v(a(Le),{key:0})):O("",!0)]),_:1},8,["value"]),u(a(q),{loading:l.value,onClick:B},{default:i(()=>[$("Export to CSV")]),_:1},8,["loading"])]),_:1}),a(m).result.value?(r(),v(a(pe),{key:0,columns:a(m).result.value.tableColumns,"data-source":a(m).result.value.tableRows,loading:s.value,pagination:T.value,scroll:{x:"max-content",y:700},bordered:"",size:"small"},{headerCell:i(({column:_})=>[C("p",xr,D(_.title),1)]),bodyCell:i(({column:_,text:k,record:P})=>[_.dataIndex==="stage"?(r(),v(a(M),{key:0,gap:"small",justify:"center"},{default:i(()=>[(r(),v(ae(a(ne)(P.type)),{size:"20"})),$(" "+D(k),1)]),_:2},1024)):_.dataIndex==="status"?(r(),v(a(M),{key:1,gap:"small",justify:"center"},{default:i(()=>[u(a(G),null,{default:i(()=>[$(D(a(ft)(String(k)))+" ",1),k==="running"?(r(),v(a(ke),{key:0,spin:!0,style:{"margin-left":"4px"}})):O("",!0)]),_:2},1024)]),_:2},1024)):O("",!0)]),_:1},8,["columns","data-source","loading","pagination"])):(r(),v(a(pe),{key:1,loading:"",columns:[{title:"Thread"},{title:"Stage"},{title:"Status"}],bordered:""},{emptyText:i(()=>[Mr]),_:1}))]))}});export{ui as E,gi as K,di as P,hi as _,mi as a,pi as b};
//# sourceMappingURL=TableView.vue_vue_type_script_setup_true_lang.417d768a.js.map
