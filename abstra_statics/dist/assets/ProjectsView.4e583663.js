var K=Object.defineProperty;var X=(m,t,o)=>t in m?K(m,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):m[t]=o;var f=(m,t,o)=>(X(m,typeof t!="symbol"?t+"":t,o),o);import{d as k,af as A,g,o as r,K as u,O as S,F as P,e5 as N,a as h,f as Z,h as Y,ej as ee,e4 as te,e3 as ae,b as d,w as i,u as e,c as F,aL as x,az as M,d6 as le,cw as re,da as b,ea as B,eb as L,eM as C,d3 as oe,br as de,cq as ie,es as D,cs as _,bE as T,au as U,cr as Q,cE as R,eP as se,eQ as ne,Q as ue}from"./index.e58852ef.js";import{_ as j}from"./AbstraButton.vue_vue_type_script_setup_true_lang.5f323e98.js";import{H as q}from"./PhCube.vue.480ada35.js";import{G as ce}from"./PhFolder.vue.e33841d6.js";import{F as he}from"./PhGear.vue.697bf7c3.js";import{F as fe}from"./PhUsersThree.vue.bf83132f.js";import{a as ve}from"./gateway.b7d3c19b.js";import{M as me}from"./member.78d0d2a7.js";import{a as pe,P as ge}from"./project.10ebb781.js";import"./columns.d5f48803.js";import{F as He}from"./folder.8cbea0ad.js";import{a as G}from"./ant-design.52d06a11.js";import{a as we}from"./organization.37c16fad.js";import{A as ye,C as Ve}from"./CollapsePanel.c66c4392.js";import{A as Ae,a as Me}from"./index.d9320b79.js";import"./popupNotifcation.e1a13287.js";import"./record.46ea3b16.js";import"./string.0ca9260c.js";(function(){try{var m=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new Error().stack;t&&(m._sentryDebugIds=m._sentryDebugIds||{},m._sentryDebugIds[t]="5a30fa45-b5d3-4915-9ef5-d681cd65a36c",m._sentryDebugIdIdentifier="sentry-dbid-5a30fa45-b5d3-4915-9ef5-d681cd65a36c")}catch{}})();const Fe=["width","height","fill","transform"],je={key:0},be=h("path",{d:"M216.49,79.51l-56-56A12,12,0,0,0,152,20H56A20,20,0,0,0,36,40V216a20,20,0,0,0,20,20H200a20,20,0,0,0,20-20V88A12,12,0,0,0,216.49,79.51ZM160,57l23,23H160ZM60,212V44h76V92a12,12,0,0,0,12,12h48V212Zm104-60a12,12,0,0,1-12,12H140v12a12,12,0,0,1-24,0V164H104a12,12,0,0,1,0-24h12V128a12,12,0,0,1,24,0v12h12A12,12,0,0,1,164,152Z"},null,-1),Pe=[be],$e={key:1},Ze=h("path",{d:"M208,88H152V32Z",opacity:"0.2"},null,-1),Ie=h("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM200,216H56V40h88V88a8,8,0,0,0,8,8h48V216Zm-40-64a8,8,0,0,1-8,8H136v16a8,8,0,0,1-16,0V160H104a8,8,0,0,1,0-16h16V128a8,8,0,0,1,16,0v16h16A8,8,0,0,1,160,152Z"},null,-1),ke=[Ze,Ie],Le={key:2},Ce=h("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM152,160H136v16a8,8,0,0,1-16,0V160H104a8,8,0,0,1,0-16h16V128a8,8,0,0,1,16,0v16h16a8,8,0,0,1,0,16Zm0-72V43.31L196.69,88Z"},null,-1),_e=[Ce],Se={key:3},Ne=h("path",{d:"M212.24,83.76l-56-56A6,6,0,0,0,152,26H56A14,14,0,0,0,42,40V216a14,14,0,0,0,14,14H200a14,14,0,0,0,14-14V88A6,6,0,0,0,212.24,83.76ZM158,46.48,193.52,82H158ZM200,218H56a2,2,0,0,1-2-2V40a2,2,0,0,1,2-2h90V88a6,6,0,0,0,6,6h50V216A2,2,0,0,1,200,218Zm-42-66a6,6,0,0,1-6,6H134v18a6,6,0,0,1-12,0V158H104a6,6,0,0,1,0-12h18V128a6,6,0,0,1,12,0v18h18A6,6,0,0,1,158,152Z"},null,-1),ze=[Ne],xe={key:4},Ee=h("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM200,216H56V40h88V88a8,8,0,0,0,8,8h48V216Zm-40-64a8,8,0,0,1-8,8H136v16a8,8,0,0,1-16,0V160H104a8,8,0,0,1,0-16h16V128a8,8,0,0,1,16,0v16h16A8,8,0,0,1,160,152Z"},null,-1),Oe=[Ee],Be={key:5},De=h("path",{d:"M210.83,85.17l-56-56A4,4,0,0,0,152,28H56A12,12,0,0,0,44,40V216a12,12,0,0,0,12,12H200a12,12,0,0,0,12-12V88A4,4,0,0,0,210.83,85.17ZM156,41.65,198.34,84H156ZM200,220H56a4,4,0,0,1-4-4V40a4,4,0,0,1,4-4h92V88a4,4,0,0,0,4,4h52V216A4,4,0,0,1,200,220Zm-44-68a4,4,0,0,1-4,4H132v20a4,4,0,0,1-8,0V156H104a4,4,0,0,1,0-8h20V128a4,4,0,0,1,8,0v20h20A4,4,0,0,1,156,152Z"},null,-1),Te=[De],Ue={name:"PhFilePlus"},W=k({...Ue,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(m){const t=m,o=A("weight","regular"),n=A("size","1em"),c=A("color","currentColor"),H=A("mirrored",!1),s=g(()=>{var l;return(l=t.weight)!=null?l:o}),y=g(()=>{var l;return(l=t.size)!=null?l:n}),a=g(()=>{var l;return(l=t.color)!=null?l:c}),V=g(()=>t.mirrored!==void 0?t.mirrored?"scale(-1, 1)":void 0:H?"scale(-1, 1)":void 0);return(l,p)=>(r(),u("svg",N({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:y.value,height:y.value,fill:a.value,transform:V.value},l.$attrs),[S(l.$slots,"default"),s.value==="bold"?(r(),u("g",je,Pe)):s.value==="duotone"?(r(),u("g",$e,ke)):s.value==="fill"?(r(),u("g",Le,_e)):s.value==="light"?(r(),u("g",Se,ze)):s.value==="regular"?(r(),u("g",xe,Oe)):s.value==="thin"?(r(),u("g",Be,Te)):P("",!0)],16,Fe))}}),Qe=["width","height","fill","transform"],Re={key:0},qe=h("path",{d:"M248.23,112.31A20,20,0,0,0,232,104H220V88a20,20,0,0,0-20-20H132L105.34,48a20.12,20.12,0,0,0-12-4H40A20,20,0,0,0,20,64V208a12,12,0,0,0,12,12H211.1a12,12,0,0,0,11.33-8l28.49-81.47.06-.17A20,20,0,0,0,248.23,112.31ZM92,68l28.8,21.6A12,12,0,0,0,128,92h68v12H69.77a20,20,0,0,0-18.94,13.58L44,137.15V68ZM202.59,196H48.89l23.72-68H226.37Z"},null,-1),Ge=[qe],We={key:1},Je=h("path",{d:"M208,88v24H69.77a8,8,0,0,0-7.59,5.47L32,208V64a8,8,0,0,1,8-8H93.33a8,8,0,0,1,4.8,1.6L128,80h72A8,8,0,0,1,208,88Z",opacity:"0.2"},null,-1),Ke=h("path",{d:"M245,110.64A16,16,0,0,0,232,104H216V88a16,16,0,0,0-16-16H130.67L102.94,51.2a16.14,16.14,0,0,0-9.6-3.2H40A16,16,0,0,0,24,64V208a8,8,0,0,0,8,8H211.1a8,8,0,0,0,7.59-5.47l28.49-85.47A16.05,16.05,0,0,0,245,110.64ZM93.34,64,123.2,86.4A8,8,0,0,0,128,88h72v16H69.77a16,16,0,0,0-15.18,10.94L40,158.7V64Zm112,136H43.1l26.67-80H232Z"},null,-1),Xe=[Je,Ke],Ye={key:2},e1=h("path",{d:"M245,110.64A16,16,0,0,0,232,104H216V88a16,16,0,0,0-16-16H130.67L102.94,51.2a16.14,16.14,0,0,0-9.6-3.2H40A16,16,0,0,0,24,64V208h0a8,8,0,0,0,8,8H211.1a8,8,0,0,0,7.59-5.47l28.49-85.47A16.05,16.05,0,0,0,245,110.64ZM93.34,64,123.2,86.4A8,8,0,0,0,128,88h72v16H69.77a16,16,0,0,0-15.18,10.94L40,158.7V64Z"},null,-1),t1=[e1],a1={key:3},l1=h("path",{d:"M243.36,111.81A14,14,0,0,0,232,106H214V88a14,14,0,0,0-14-14H130L101.74,52.8a14.06,14.06,0,0,0-8.4-2.8H40A14,14,0,0,0,26,64V208a6,6,0,0,0,6,6H211.1a6,6,0,0,0,5.69-4.1l28.49-85.47A14,14,0,0,0,243.36,111.81ZM40,62H93.34a2,2,0,0,1,1.2.4L124.4,84.8A6,6,0,0,0,128,86h72a2,2,0,0,1,2,2v18H69.77a14,14,0,0,0-13.28,9.57L38,171V64A2,2,0,0,1,40,62Zm193.9,58.63L206.78,202H40.33l27.54-82.63a2,2,0,0,1,1.9-1.37H232a2,2,0,0,1,1.9,2.63Z"},null,-1),r1=[l1],o1={key:4},d1=h("path",{d:"M245,110.64A16,16,0,0,0,232,104H216V88a16,16,0,0,0-16-16H130.67L102.94,51.2a16.14,16.14,0,0,0-9.6-3.2H40A16,16,0,0,0,24,64V208h0a8,8,0,0,0,8,8H211.1a8,8,0,0,0,7.59-5.47l28.49-85.47A16.05,16.05,0,0,0,245,110.64ZM93.34,64,123.2,86.4A8,8,0,0,0,128,88h72v16H69.77a16,16,0,0,0-15.18,10.94L40,158.7V64Zm112,136H43.1l26.67-80H232Z"},null,-1),i1=[d1],s1={key:5},n1=h("path",{d:"M241.72,113a11.88,11.88,0,0,0-9.73-5H212V88a12,12,0,0,0-12-12H129.33l-28.8-21.6a12.05,12.05,0,0,0-7.2-2.4H40A12,12,0,0,0,28,64V208a4,4,0,0,0,4,4H211.09a4,4,0,0,0,3.79-2.74l28.49-85.47A11.86,11.86,0,0,0,241.72,113ZM40,60H93.33a4,4,0,0,1,2.4.8L125.6,83.2a4,4,0,0,0,2.4.8h72a4,4,0,0,1,4,4v20H69.76a12,12,0,0,0-11.38,8.21L36,183.35V64A4,4,0,0,1,40,60Zm195.78,61.26L208.2,204H37.55L66,118.74A4,4,0,0,1,69.76,116H232a4,4,0,0,1,3.79,5.26Z"},null,-1),u1=[n1],c1={name:"PhFolderOpen"},h1=k({...c1,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(m){const t=m,o=A("weight","regular"),n=A("size","1em"),c=A("color","currentColor"),H=A("mirrored",!1),s=g(()=>{var l;return(l=t.weight)!=null?l:o}),y=g(()=>{var l;return(l=t.size)!=null?l:n}),a=g(()=>{var l;return(l=t.color)!=null?l:c}),V=g(()=>t.mirrored!==void 0?t.mirrored?"scale(-1, 1)":void 0:H?"scale(-1, 1)":void 0);return(l,p)=>(r(),u("svg",N({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:y.value,height:y.value,fill:a.value,transform:V.value},l.$attrs),[S(l.$slots,"default"),s.value==="bold"?(r(),u("g",Re,Ge)):s.value==="duotone"?(r(),u("g",We,Xe)):s.value==="fill"?(r(),u("g",Ye,t1)):s.value==="light"?(r(),u("g",a1,r1)):s.value==="regular"?(r(),u("g",o1,i1)):s.value==="thin"?(r(),u("g",s1,u1)):P("",!0)],16,Qe))}}),f1=["width","height","fill","transform"],v1={key:0},m1=h("path",{d:"M216,68H133.39l-26-29.29a20,20,0,0,0-15-6.71H40A20,20,0,0,0,20,52V200.62A19.41,19.41,0,0,0,39.38,220H216.89A19.13,19.13,0,0,0,236,200.89V88A20,20,0,0,0,216,68ZM90.61,56l10.67,12H44V56ZM212,196H44V92H212Zm-72-76v12h12a12,12,0,0,1,0,24H140v12a12,12,0,0,1-24,0V156H104a12,12,0,0,1,0-24h12V120a12,12,0,0,1,24,0Z"},null,-1),p1=[m1],g1={key:1},H1=h("path",{d:"M128,80H32V56a8,8,0,0,1,8-8H92.69a8,8,0,0,1,5.65,2.34Z",opacity:"0.2"},null,-1),w1=h("path",{d:"M216,72H131.31L104,44.69A15.86,15.86,0,0,0,92.69,40H40A16,16,0,0,0,24,56V200.62A15.4,15.4,0,0,0,39.38,216H216.89A15.13,15.13,0,0,0,232,200.89V88A16,16,0,0,0,216,72ZM92.69,56l16,16H40V56ZM216,200H40V88H216Zm-88-88a8,8,0,0,1,8,8v16h16a8,8,0,0,1,0,16H136v16a8,8,0,0,1-16,0V152H104a8,8,0,0,1,0-16h16V120A8,8,0,0,1,128,112Z"},null,-1),y1=[H1,w1],V1={key:2},A1=h("path",{d:"M216,72H131.31L104,44.69A15.88,15.88,0,0,0,92.69,40H40A16,16,0,0,0,24,56V200.62A15.41,15.41,0,0,0,39.39,216h177.5A15.13,15.13,0,0,0,232,200.89V88A16,16,0,0,0,216,72ZM40,56H92.69l16,16H40Zm112,96H136v16a8,8,0,0,1-16,0V152H104a8,8,0,0,1,0-16h16V120a8,8,0,0,1,16,0v16h16a8,8,0,0,1,0,16Z"},null,-1),M1=[A1],F1={key:3},j1=h("path",{d:"M216,74H130.49l-27.9-27.9a13.94,13.94,0,0,0-9.9-4.1H40A14,14,0,0,0,26,56V200.62A13.39,13.39,0,0,0,39.38,214H216.89A13.12,13.12,0,0,0,230,200.89V88A14,14,0,0,0,216,74ZM40,54H92.69a2,2,0,0,1,1.41.59L113.51,74H38V56A2,2,0,0,1,40,54ZM218,200.89a1.11,1.11,0,0,1-1.11,1.11H39.38A1.4,1.4,0,0,1,38,200.62V86H216a2,2,0,0,1,2,2ZM158,144a6,6,0,0,1-6,6H134v18a6,6,0,0,1-12,0V150H104a6,6,0,0,1,0-12h18V120a6,6,0,0,1,12,0v18h18A6,6,0,0,1,158,144Z"},null,-1),b1=[j1],P1={key:4},$1=h("path",{d:"M216,72H131.31L104,44.69A15.86,15.86,0,0,0,92.69,40H40A16,16,0,0,0,24,56V200.62A15.4,15.4,0,0,0,39.38,216H216.89A15.13,15.13,0,0,0,232,200.89V88A16,16,0,0,0,216,72ZM92.69,56l16,16H40V56ZM216,200H40V88H216Zm-88-88a8,8,0,0,1,8,8v16h16a8,8,0,0,1,0,16H136v16a8,8,0,0,1-16,0V152H104a8,8,0,0,1,0-16h16V120A8,8,0,0,1,128,112Z"},null,-1),Z1=[$1],I1={key:5},k1=h("path",{d:"M216,76H129.66L101.17,47.52A11.9,11.9,0,0,0,92.69,44H40A12,12,0,0,0,28,56V200.62A11.4,11.4,0,0,0,39.38,212H216.89A11.12,11.12,0,0,0,228,200.89V88A12,12,0,0,0,216,76ZM40,52H92.69a4,4,0,0,1,2.82,1.17L118.34,76H36V56A4,4,0,0,1,40,52ZM220,200.89a3.12,3.12,0,0,1-3.11,3.11H39.38A3.39,3.39,0,0,1,36,200.62V84H216a4,4,0,0,1,4,4ZM156,144a4,4,0,0,1-4,4H132v20a4,4,0,0,1-8,0V148H104a4,4,0,0,1,0-8h20V120a4,4,0,0,1,8,0v20h20A4,4,0,0,1,156,144Z"},null,-1),L1=[k1],C1={name:"PhFolderPlus"},J=k({...C1,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(m){const t=m,o=A("weight","regular"),n=A("size","1em"),c=A("color","currentColor"),H=A("mirrored",!1),s=g(()=>{var l;return(l=t.weight)!=null?l:o}),y=g(()=>{var l;return(l=t.size)!=null?l:n}),a=g(()=>{var l;return(l=t.color)!=null?l:c}),V=g(()=>t.mirrored!==void 0?t.mirrored?"scale(-1, 1)":void 0:H?"scale(-1, 1)":void 0);return(l,p)=>(r(),u("svg",N({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:y.value,height:y.value,fill:a.value,transform:V.value},l.$attrs),[S(l.$slots,"default"),s.value==="bold"?(r(),u("g",v1,p1)):s.value==="duotone"?(r(),u("g",g1,y1)):s.value==="fill"?(r(),u("g",V1,M1)):s.value==="light"?(r(),u("g",F1,b1)):s.value==="regular"?(r(),u("g",P1,Z1)):s.value==="thin"?(r(),u("g",I1,L1)):P("",!0)],16,f1))}}),_1=["width","height","fill","transform"],S1={key:0},N1=h("path",{d:"M230.14,70.54,185.46,25.85a20,20,0,0,0-28.29,0L33.86,149.17A19.85,19.85,0,0,0,28,163.31V208a20,20,0,0,0,20,20H92.69a19.86,19.86,0,0,0,14.14-5.86L230.14,98.82a20,20,0,0,0,0-28.28ZM91,204H52V165l84-84,39,39ZM192,103,153,64l18.34-18.34,39,39Z"},null,-1),z1=[N1],x1={key:1},E1=h("path",{d:"M221.66,90.34,192,120,136,64l29.66-29.66a8,8,0,0,1,11.31,0L221.66,79A8,8,0,0,1,221.66,90.34Z",opacity:"0.2"},null,-1),O1=h("path",{d:"M227.31,73.37,182.63,28.68a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31L227.31,96a16,16,0,0,0,0-22.63ZM92.69,208H48V163.31l88-88L180.69,120ZM192,108.68,147.31,64l24-24L216,84.68Z"},null,-1),B1=[E1,O1],D1={key:2},T1=h("path",{d:"M227.31,73.37,182.63,28.68a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31L227.31,96a16,16,0,0,0,0-22.63ZM192,108.68,147.31,64l24-24L216,84.68Z"},null,-1),U1=[T1],Q1={key:3},R1=h("path",{d:"M225.9,74.78,181.21,30.09a14,14,0,0,0-19.8,0L38.1,153.41a13.94,13.94,0,0,0-4.1,9.9V208a14,14,0,0,0,14,14H92.69a13.94,13.94,0,0,0,9.9-4.1L225.9,94.58a14,14,0,0,0,0-19.8ZM94.1,209.41a2,2,0,0,1-1.41.59H48a2,2,0,0,1-2-2V163.31a2,2,0,0,1,.59-1.41L136,72.48,183.51,120ZM217.41,86.1,192,111.51,144.49,64,169.9,38.58a2,2,0,0,1,2.83,0l44.68,44.69a2,2,0,0,1,0,2.83Z"},null,-1),q1=[R1],G1={key:4},W1=h("path",{d:"M227.31,73.37,182.63,28.68a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31L227.31,96a16,16,0,0,0,0-22.63ZM92.69,208H48V163.31l88-88L180.69,120ZM192,108.68,147.31,64l24-24L216,84.68Z"},null,-1),J1=[W1],K1={key:5},X1=h("path",{d:"M224.49,76.2,179.8,31.51a12,12,0,0,0-17,0L133.17,61.17h0L39.52,154.83A11.9,11.9,0,0,0,36,163.31V208a12,12,0,0,0,12,12H92.69a12,12,0,0,0,8.48-3.51L224.48,93.17a12,12,0,0,0,0-17Zm-129,134.63A4,4,0,0,1,92.69,212H48a4,4,0,0,1-4-4V163.31a4,4,0,0,1,1.17-2.83L136,69.65,186.34,120ZM218.83,87.51,192,114.34,141.66,64l26.82-26.83a4,4,0,0,1,5.66,0l44.69,44.68a4,4,0,0,1,0,5.66Z"},null,-1),Y1=[X1],e0={name:"PhPencilSimple"},t0=k({...e0,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(m){const t=m,o=A("weight","regular"),n=A("size","1em"),c=A("color","currentColor"),H=A("mirrored",!1),s=g(()=>{var l;return(l=t.weight)!=null?l:o}),y=g(()=>{var l;return(l=t.size)!=null?l:n}),a=g(()=>{var l;return(l=t.color)!=null?l:c}),V=g(()=>t.mirrored!==void 0?t.mirrored?"scale(-1, 1)":void 0:H?"scale(-1, 1)":void 0);return(l,p)=>(r(),u("svg",N({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:y.value,height:y.value,fill:a.value,transform:V.value},l.$attrs),[S(l.$slots,"default"),s.value==="bold"?(r(),u("g",S1,z1)):s.value==="duotone"?(r(),u("g",x1,B1)):s.value==="fill"?(r(),u("g",D1,U1)):s.value==="light"?(r(),u("g",Q1,q1)):s.value==="regular"?(r(),u("g",G1,J1)):s.value==="thin"?(r(),u("g",K1,Y1)):P("",!0)],16,_1))}});class a0{constructor(t){f(this,"fetchedState",Z(null));f(this,"activeFolderIds");f(this,"draftFolder",Z(null));f(this,"draftProject",Z(null));f(this,"searchQuery",Z(""));f(this,"isDraftProjectValid",g(()=>this.validateDraftProject()));f(this,"isDraftFolderValid",g(()=>this.validateDraftFolder()));f(this,"memberOptions",g(()=>this.getMemberOptions()));f(this,"folderOptions",g(()=>this.getFolderOptions()));f(this,"organizationId");f(this,"currentUserEmail");f(this,"handlers");f(this,"apis");f(this,"deleteProject",async()=>{!this.draftProject.value||this.draftProject.value.mode!=="edit"||!await G("Are you sure you want to delete this project? All data will be lost.")||(this.draftProject.value={...this.draftProject.value,buttonLoading:"delete"},await this.apis.project.delete(this.draftProject.value.id),await this.refetchState())});f(this,"deleteFolder",async()=>{if(!this.draftFolder.value||this.draftFolder.value.mode!=="edit")throw new Error("[PROJECTS_CONTROLLER] Invalid state deleting folder");this.getFolderProjects(this.draftFolder.value.id).length>0||!await G("Are you sure you want to delete this empty folder?",{okText:"Delete",cancelText:"Cancel"})||(this.draftFolder.value={...this.draftFolder.value,buttonLoading:"delete"},await this.apis.folder.delete(this.organizationId,this.draftFolder.value.id),await this.refetchState())});f(this,"duplicateProject",async({key:t})=>{var n;const o=(n=this.fetchedState.value)==null?void 0:n.projects.find(c=>c.id===t);if(o){const c=await o.duplicate();this.handlers.navigateToProject(c.id)}});f(this,"openEditFolderModal",t=>{var n;!((n=this.fetchedState.value)!=null&&n.projects.filter(c=>c.folderId===t.id).map(c=>c.id))||(this.draftFolder.value={currentName:t.name,modalTitle:`${t.name} - Settings`,id:t.id,mode:"edit",newName:t.name,newMemberIds:[...t.memberIds],currentMemberIds:t.memberIds,buttonLoading:null})});f(this,"openCreateFolderModal",()=>{var t;if(!this.fetchedState.value)throw new Error("[PROJECTS_CONTROLLER] Invalid state opening create folder modal");this.draftFolder.value={currentName:"",mode:"create",currentMemberIds:[],modalTitle:"Create Folder",newName:"",newMemberIds:[(t=this.fetchedState.value.currentMember)==null?void 0:t.id].filter(Boolean),buttonLoading:null}});f(this,"openCreateProjectModal",(t="")=>{this.draftProject.value={currentName:"",mode:"create",currentFolderId:"",modalTitle:"Create Project",newName:"",newFolderId:t,buttonLoading:null}});f(this,"openEditProjectModal",t=>{this.draftProject.value={id:t.id,mode:"edit",currentName:t.name,currentFolderId:t.folderId,modalTitle:`Edit Project: ${t.name}`,newName:t.name,newFolderId:t.folderId,buttonLoading:null}});f(this,"saveFolder",async()=>{!this.draftFolder.value||(this.draftFolder.value={...this.draftFolder.value,buttonLoading:"save"},this.draftFolder.value.mode==="edit"?await this.apis.folder.update(this.organizationId,{id:this.draftFolder.value.id,name:this.draftFolder.value.newName,memberIds:this.draftFolder.value.newMemberIds,organizationId:this.organizationId}):this.draftFolder.value.mode==="create"&&await this.apis.folder.create({organizationId:this.organizationId,name:this.draftFolder.value.newName,memberIds:this.draftFolder.value.newMemberIds}),await this.refetchState())});f(this,"saveProject",async()=>{!this.draftProject.value||(this.draftProject.value={...this.draftProject.value,buttonLoading:"save"},this.draftProject.value.mode==="edit"?await this.apis.project.update(this.draftProject.value.id,{name:this.draftProject.value.newName,folderId:this.draftProject.value.newFolderId}):this.draftProject.value.mode==="create"&&await this.apis.project.create({name:this.draftProject.value.newName,folderId:this.draftProject.value.newFolderId,organizationId:this.organizationId}),await this.refetchState())});f(this,"closeModals",()=>{this.draftFolder.value=null,this.draftProject.value=null,this.activeFolderIds.value=[]});f(this,"validateDraftFolder",()=>{var s;if(!this.draftFolder.value)return!1;const t=this.draftFolder.value.newName!==this.draftFolder.value.currentName,o=this.draftFolder.value.newName.trim().length>0,n=!((s=this.fetchedState.value)!=null&&s.folders.some(y=>{var a;return y.name===((a=this.draftFolder.value)==null?void 0:a.newName)})),c=!ee.exports.isEqual(this.draftFolder.value.newMemberIds,this.draftFolder.value.currentMemberIds),H=this.draftFolder.value.newMemberIds.length>0;return this.draftFolder.value.mode==="edit"?t&&o&&n||c&&H:o&&n&&H});f(this,"validateDraftProject",()=>{if(!this.draftProject.value)return!1;const t=!!this.draftProject.value.newFolderId,o=this.draftProject.value.newName.trim().length>0,n=this.draftProject.value.newName!==this.draftProject.value.currentName,c=this.draftProject.value.newFolderId!==this.draftProject.value.currentFolderId;return this.draftProject.value.mode==="edit"?n&&o||c:t&&o});f(this,"getMemberOptions",()=>{var t;return(t=this.fetchedState.value)==null?void 0:t.members.map(o=>{var n,c;return{label:o.email,value:o.id,disabled:o.id===((c=(n=this.fetchedState.value)==null?void 0:n.currentMember)==null?void 0:c.id)}}).sort((o,n)=>o.label.localeCompare(n.label))});f(this,"getFolderOptions",()=>{var t;return(t=this.fetchedState.value)==null?void 0:t.folders.map(o=>({label:o.name,value:o.id}))});f(this,"getFolderProjects",t=>{var o;return(o=this.fetchedState.value)==null?void 0:o.projects.filter(n=>n.folderId===t&&(!this.searchQuery.value.trim()||n.name.toLowerCase().includes(this.searchQuery.value.toLowerCase())))});this.organizationId=t.organizationId,this.currentUserEmail=t.currentUserEmail,this.handlers=t.handlers,this.apis=t.apis,t.routeHash.startsWith("#")?this.activeFolderIds=Z([t.routeHash.slice(1)]):this.activeFolderIds=Z([])}async refetchState(t=!0){var y,a;t&&this.closeModals(),this.fetchedState.value=null;const[o,n,c,H]=await Promise.all([pe.list(this.organizationId),we.get(this.organizationId),this.apis.member.list(this.organizationId),this.apis.folder.list(this.organizationId)]),s=(y=c.find(V=>V.email===this.currentUserEmail))!=null?y:null;H.length===1&&((a=this.activeFolderIds.value)==null||a.includes(H[0].id)),this.fetchedState.value={projects:o.sort((V,l)=>V.name.localeCompare(l.name)),organization:n,members:c,folders:H.sort((V,l)=>V.name.localeCompare(l.name)),currentMember:s},Y(this.searchQuery,V=>{V.trim()?this.activeFolderIds.value=this.listFolders().map(l=>l.id):this.activeFolderIds.value=[]})}listFolders(){var t,o,n,c;return this.searchQuery.value.trim()?(o=(t=this.fetchedState.value)==null?void 0:t.folders.filter(H=>this.getFolderProjects(H.id).length>0))!=null?o:[]:(c=(n=this.fetchedState.value)==null?void 0:n.folders)!=null?c:[]}}const l0=m=>(se("data-v-9523e5c0"),m=m(),ne(),m),r0={key:0},o0={key:1},d0=l0(()=>h("p",null,"Click the button below to create a new folder",-1)),i0=k({__name:"ProjectsView",setup(m){var V;const o=te().params.organizationId,n=ae(),c={navigateToProject:l=>n.push({name:"project",params:{organizationId:o,projectId:l}})},H=(V=ve.getAuthor())==null?void 0:V.claims.email;if(!H)throw new Error("User not logged in");const s=(l,p)=>p.label.toLowerCase().includes(l.toLowerCase()),y={member:new me,project:new ge,folder:new He},a=new a0({organizationId:o,currentUserEmail:H,handlers:c,apis:y,routeHash:location.hash});return a.refetchState(!1),(l,p)=>{var E,O;return r(),u(x,null,[d(e(le),null,{default:i(()=>[M("Projects")]),_:1}),d(e(b),{style:{display:"flex","align-items":"center","justify-content":"space-between",gap:"5px",margin:"0px 0px 50px"}},{default:i(()=>[d(e(re),{value:e(a).searchQuery.value,"onUpdate:value":p[0]||(p[0]=v=>e(a).searchQuery.value=v),placeholder:"Search projects",style:{width:"300px"}},null,8,["value"]),d(j,{onClick:e(a).openCreateFolderModal},{default:i(()=>[d(e(J)),M(" Create folder ")]),_:1},8,["onClick"])]),_:1}),d(e(b),{vertical:"",gap:"middle",style:{"padding-bottom":"50px"}},{default:i(()=>[(r(!0),u(x,null,B(e(a).listFolders(),v=>(r(),F(e(Ve),{key:v.id,"active-key":e(a).activeFolderIds.value,"onUpdate:activeKey":p[1]||(p[1]=w=>e(a).activeFolderIds.value=w)},{expandIcon:i(({isActive:w})=>[w?(r(),F(e(h1),{key:0,size:"20"})):(r(),F(e(ce),{key:1,size:"20"}))]),default:i(()=>[(r(),F(e(ye),{key:v.id,header:v.name},{extra:i(()=>[d(e(b),{gap:"10"},{default:i(()=>[d(e(b),{gap:"5",align:"flex-start"},{default:i(()=>{var w;return[d(e(q),{size:"20"}),M(" "+L(`${(w=e(a).getFolderProjects(v.id))==null?void 0:w.length} projects`),1)]}),_:2},1024),d(e(b),{gap:"5"},{default:i(()=>[d(e(fe),{size:"20"}),M(" "+L(`${v.memberIds.length} editors`),1)]),_:2},1024),d(j,{size:"small",onClick:C(w=>e(a).openCreateProjectModal(v.id),["stop"])},{default:i(()=>[d(e(W)),M(" New project ")]),_:2},1032,["onClick"]),d(j,{size:"small",onClick:C(w=>e(a).openEditFolderModal(v),["stop"])},{default:i(()=>[d(e(he))]),_:2},1032,["onClick"])]),_:2},1024)]),default:i(()=>[d(e(Ae),{locale:{emptyText:"Empty folder"}},{default:i(()=>[(r(!0),u(x,null,B(e(a).getFolderProjects(v.id),w=>(r(),F(e(Me),{key:w.id,type:"link",class:"project-list-item"},{default:i(()=>[d(e(q)),d(e(oe),{href:`/projects/${w.id}`},{default:i(()=>[M(L(w.name),1)]),_:2},1032,["href"]),d(j,{size:"small",style:{position:"absolute",right:"10px"},onClick:C($=>e(a).openEditProjectModal(w),["stop"])},{default:i(()=>[d(e(t0))]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["header"]))]),_:2},1032,["active-key"]))),128))]),_:1}),e(a).fetchedState.value?e(a).listFolders().length===0?(r(),F(e(ie),{key:1},{description:i(()=>[h("div",null,[e(a).searchQuery.value.trim()?(r(),u("p",r0,' No projects found for the search query "'+L(e(a).searchQuery.value)+'" ',1)):(r(),u("p",o0,"No folders found")),d0])]),default:i(()=>[e(a).searchQuery.value.trim()?(r(),F(j,{key:0,type:"primary",onClick:p[2]||(p[2]=v=>e(a).openCreateProjectModal())},{default:i(()=>[d(e(W)),M(" Create project ")]),_:1})):(r(),F(j,{key:1,type:"primary",onClick:e(a).openCreateFolderModal},{default:i(()=>[d(e(J)),M(" Create folder ")]),_:1},8,["onClick"]))]),_:1})):P("",!0):(r(),F(e(de),{key:0,style:{width:"100%"}})),d(e(R),{open:!!e(a).draftFolder.value,title:(E=e(a).draftFolder.value)==null?void 0:E.modalTitle,onCancel:e(a).closeModals},{footer:i(()=>{var v;return[d(e(b),{justify:((v=e(a).draftFolder.value)==null?void 0:v.mode)==="edit"?"space-between":"flex-end"},{default:i(()=>{var w,$,I;return[((w=e(a).draftFolder.value)==null?void 0:w.mode)==="edit"?(r(),F(j,{key:0,danger:"","disabled-tooltip":"Cannot delete folder with projects",disabled:e(a).getFolderProjects(($=e(a).draftFolder.value)==null?void 0:$.id).length>0,loading:((I=e(a).draftFolder.value)==null?void 0:I.buttonLoading)==="delete",onClick:p[5]||(p[5]=C(z=>e(a).deleteFolder(),["stop"]))},{default:i(()=>[d(e(D)),M(" Delete folder ")]),_:1},8,["disabled","loading"])):P("",!0),d(e(b),{justify:"flex-end"},{default:i(()=>{var z;return[d(j,{onClick:e(a).closeModals},{default:i(()=>[M(" Cancel ")]),_:1},8,["onClick"]),d(j,{type:"primary",disabled:!e(a).isDraftFolderValid.value,loading:((z=e(a).draftFolder.value)==null?void 0:z.buttonLoading)==="save",onClick:e(a).saveFolder},{default:i(()=>[M(" Save ")]),_:1},8,["disabled","loading","onClick"])]}),_:1})]}),_:1},8,["justify"])]}),default:i(()=>[e(a).draftFolder.value?(r(),F(e(Q),{key:0,layout:"vertical"},{default:i(()=>[d(e(_),{label:"Name"},{default:i(()=>[d(e(T),{value:e(a).draftFolder.value.newName,"onUpdate:value":p[3]||(p[3]=v=>e(a).draftFolder.value.newName=v)},null,8,["value"])]),_:1}),d(e(_),{label:"Editors",tooltip:"Only selected people will be able to see this folder"},{default:i(()=>[d(e(U),{value:e(a).draftFolder.value.newMemberIds,"onUpdate:value":p[4]||(p[4]=v=>e(a).draftFolder.value.newMemberIds=v),mode:"multiple",options:e(a).memberOptions.value,"filter-option":s,placeholder:"Choose who can see this folder"},null,8,["value","options"])]),_:1})]),_:1})):P("",!0)]),_:1},8,["open","title","onCancel"]),d(e(R),{open:!!e(a).draftProject.value,title:(O=e(a).draftProject.value)==null?void 0:O.modalTitle,onCancel:e(a).closeModals},{footer:i(()=>{var v;return[d(e(b),{justify:((v=e(a).draftProject.value)==null?void 0:v.mode)==="edit"?"space-between":"flex-end"},{default:i(()=>{var w,$;return[((w=e(a).draftProject.value)==null?void 0:w.mode)==="edit"?(r(),F(j,{key:0,danger:"",loading:(($=e(a).draftProject.value)==null?void 0:$.buttonLoading)==="delete",onClick:e(a).deleteProject},{default:i(()=>[d(e(D)),M(" Delete project ")]),_:1},8,["loading","onClick"])):P("",!0),d(e(b),{justify:"flex-end"},{default:i(()=>{var I;return[d(j,{onClick:e(a).closeModals},{default:i(()=>[M(" Cancel ")]),_:1},8,["onClick"]),d(j,{disabled:!e(a).isDraftProjectValid.value,type:"primary",loading:((I=e(a).draftProject.value)==null?void 0:I.buttonLoading)==="save",onClick:e(a).saveProject},{default:i(()=>[M(" Save ")]),_:1},8,["disabled","loading","onClick"])]}),_:1})]}),_:1},8,["justify"])]}),default:i(()=>[e(a).draftProject.value?(r(),F(e(Q),{key:0,layout:"vertical"},{default:i(()=>[d(e(_),{label:"Name"},{default:i(()=>[d(e(T),{value:e(a).draftProject.value.newName,"onUpdate:value":p[6]||(p[6]=v=>e(a).draftProject.value.newName=v)},null,8,["value"])]),_:1}),d(e(_),{label:"Folder"},{default:i(()=>[d(e(U),{value:e(a).draftProject.value.newFolderId,"onUpdate:value":p[7]||(p[7]=v=>e(a).draftProject.value.newFolderId=v),options:e(a).folderOptions.value,placeholder:"Choose a folder"},null,8,["value","options"])]),_:1})]),_:1})):P("",!0)]),_:1},8,["open","title","onCancel"])],64)}}});const P0=ue(i0,[["__scopeId","data-v-9523e5c0"]]);export{P0 as default};
//# sourceMappingURL=ProjectsView.4e583663.js.map
