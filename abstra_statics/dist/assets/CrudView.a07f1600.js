import{g as F}from"./icons.a554ebda.js";import{d as U,H as $,r as D,b as s,c as u,w as t,u as l,f as r,aJ as i,eC as p,et as k,eB as V,bZ as E,af as O,bg as g,cL as R,ew as m,J as x,a as z,c4 as J,cN as L,ev as j,bG as G,bE as H,e as B,I as N,c2 as P,bF as Y,x as Z}from"./outputWidgets.ec044eb8.js";import{A as M,a as T}from"./index.cdce8068.js";import{A as q,M as K,c as Q}from"./Title.85fa9137.js";import{F as W}from"./Form.316ac787.js";import{A as S,r as X}from"./router.8cea9830.js";import{i as ee}from"./url.a1da359b.js";import{A as te}from"./index.67245513.js";import{A as ae}from"./index.d97f12e1.js";import{A as le}from"./index.cd569242.js";import{A as ne}from"./index.185a1704.js";(function(){try{var d=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c=new Error().stack;c&&(d._sentryDebugIds=d._sentryDebugIds||{},d._sentryDebugIds[c]="56082f0b-aea6-4a34-ad1a-d798bee44ef3",d._sentryDebugIdIdentifier="sentry-dbid-56082f0b-aea6-4a34-ad1a-d798bee44ef3")}catch{}})();const se=U({__name:"CreationModal",props:{entityName:{},fields:{}},emits:["create"],setup(d,{expose:c,emit:_}){const h=`Create a new ${d.entityName}`,f=$({inputValue:{}}),v=D(!1),w=()=>v.value=!0,e=()=>v.value=!1,b=()=>{_("create",f.inputValue),e()};return c({open:w,close:e}),(y,A)=>(s(),u(l(K),{open:v.value,title:h,onCancel:e,onOk:b},{default:t(()=>[r(l(M),null,{default:t(()=>[i(" You may edit the "+p(y.entityName)+" name afterwards at Settings. ",1)]),_:1}),r(l(W),{layout:"vertical"},{default:t(()=>[(s(!0),k(g,null,V(y.fields,a=>(s(),u(l(q),{key:a.key,label:a.label},{default:t(()=>{var o;return[!a.type||typeof a.type=="string"?(s(),u(l(E),{key:0,value:f.inputValue[a.key],"onUpdate:value":n=>f.inputValue[a.key]=n,type:(o=a.type)!=null?o:"text"},null,8,["value","onUpdate:value","type"])):Array.isArray(a.type)?(s(),u(l(O),{key:1,value:f.inputValue[a.key],"onUpdate:value":n=>f.inputValue[a.key]=n},{default:t(()=>[(s(!0),k(g,null,V(a.type,n=>(s(),u(l(R),{key:typeof n=="string"?n:n.value,value:typeof n=="string"?n:n.value},{default:t(()=>[i(p(typeof n=="string"?n:n.label),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["value","onUpdate:value"])):m("",!0)]}),_:2},1032,["label"]))),128))]),_:1})]),_:1},8,["open"]))}}),oe={class:"action-item"},re={key:1},ue=["src"],ie=U({__name:"CrudView",props:{loading:{type:Boolean},title:{},description:{},createButtonText:{},live:{type:Boolean},emptyTitle:{},entityName:{},fields:{},table:{},videoUrl:{}},emits:["create"],setup(d,{emit:c}){const _=d,C=D(null),h=()=>{var e;_.fields?(e=C.value)==null||e.open():c("create",{})};function f(e,b){var y;"onClick"in e?(y=e.onClick)==null||y.call(e,{key:b.key}):"link"in e&&(typeof e.link=="string"&&ee(e.link)?open(e.link,"_blank"):X.push(e.link))}async function v(e){c("create",e)}const w=x(()=>({"--columnCount":`${_.table.columns.length}`}));return(e,b)=>{const y=z("router-link");return s(),k(g,null,[r(l(ne),{direction:"vertical"},{default:t(()=>{var A;return[r(l(Q),null,{default:t(()=>[i(p(e.title),1)]),_:1}),r(l(M),null,{default:t(()=>[i(p(e.description),1)]),_:1}),e.createButtonText?(s(),u(l(J),{key:0,type:"primary",onClick:h},{default:t(()=>[i(p(e.createButtonText),1)]),_:1})):m("",!0),r(l(L),{style:j(w.value),"data-source":e.table.rows,loading:e.loading&&!e.live,columns:(A=e.table.columns)==null?void 0:A.map(({name:a,align:o},n,I)=>({title:a,key:n,align:o!=null?o:"center"}))},{emptyText:t(()=>[i(p(e.emptyTitle),1)]),headerCell:t(a=>[i(p(a.title),1)]),bodyCell:t(({column:{key:a},record:o})=>[o.cells[a].tagColor?(s(),u(l(te),{key:0,color:o.cells[a].tagColor},{default:t(()=>[i(p(o.cells[a].text),1)]),_:2},1032,["color"])):o.cells[a].link?(s(),u(y,{key:1,to:o.cells[a].link},{default:t(()=>[i(p(o.cells[a].text),1)]),_:2},1032,["to"])):o.cells[a].actions?(s(),u(l(P),{key:2},{overlay:t(()=>[r(l(G),null,{default:t(()=>[(s(!0),k(g,null,V(o.cells[a].actions,(n,I)=>(s(),u(l(H),{key:I,danger:n.dangerous,onClick:pe=>f(n,o)},{default:t(()=>[B("div",oe,[n.icon?(s(),u(N,{key:0,path:n.icon},null,8,["path"])):m("",!0),r(l(T),null,{default:t(()=>[i(p(n.label),1)]),_:2},1024)])]),_:2},1032,["danger","onClick"]))),128))]),_:2},1024)]),default:t(()=>[r(N,{path:l(F),style:{cursor:"pointer"}},null,8,["path"])]),_:2},1024)):(s(),u(l(T),{key:3},{default:t(()=>[i(p(o.cells[a].text),1)]),_:2},1024))]),footer:t(()=>[e.live?(s(),u(l(ae),{key:0,justify:"end",gutter:10},{default:t(()=>[r(l(S),null,{default:t(()=>[r(l(Y),{size:"small"})]),_:1}),r(l(S),null,{default:t(()=>[r(l(T),null,{default:t(()=>[i(" auto updating ")]),_:1})]),_:1})]),_:1})):m("",!0)]),_:1},8,["style","data-source","loading","columns"]),e.videoUrl?(s(),k("section",re,[r(l(le),{orientation:"left"},{default:t(()=>[i("See it in action")]),_:1}),B("iframe",{style:{width:"100%","aspect-ratio":"16/9"},src:e.videoUrl,title:"runtimes example",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:""},null,8,ue)])):m("",!0)]}),_:1}),e.fields?(s(),u(se,{key:0,ref_key:"modalRef",ref:C,fields:e.fields,"entity-name":e.entityName,onCreate:v},null,8,["fields","entity-name"])):m("",!0)],64)}}});const he=Z(ie,[["__scopeId","data-v-eae261a3"]]);export{he as C};
//# sourceMappingURL=CrudView.a07f1600.js.map
