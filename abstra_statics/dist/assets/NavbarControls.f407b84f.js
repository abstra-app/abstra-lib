var we=Object.defineProperty;var Se=(n,e,t)=>e in n?we(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var g=(n,e,t)=>(Se(n,typeof e!="symbol"?e+"":e,t),t);import{f as i,eF as m,d as C,b as s,c as f,w as l,u as o,az as u,bX as h,r as j,eu as J,eB as q,cG as S,e as Ce,eC as $,b6 as X,cC as fe,ew as _,o as pe,K as ge,G as Q,eA as Pe,ez as je,de as $e,b9 as Ae,eG as Z,cB as ke,cl as Be,t as Le}from"./outputWidgets.6d6b4a37.js";import{W as xe}from"./workspaces.ed4248fb.js";import{p as ze}from"./popupNotifcation.fbd53de0.js";import{a as K}from"./asyncComputed.17a6198d.js";import{S as Ee}from"./index.ec217461.js";import{_ as Me}from"./SaveButton.vue_vue_type_script_setup_true_lang.18978e4d.js";import{A as De,b as Fe,c as ee}from"./index.0e216cc8.js";import{M as te}from"./Title.b41b4f96.js";(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[e]="e4638ac3-9191-4c23-85d0-203d1ae2c157",n._sentryDebugIdIdentifier="sentry-dbid-e4638ac3-9191-4c23-85d0-203d1ae2c157")}catch{}})();var Ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-260 72h96v209.9L621.5 312 572 347.4V136zm220 752H232V136h280v296.9c0 3.3 1 6.6 3 9.3a15.9 15.9 0 0022.3 3.7l83.8-59.9 81.4 59.4c2.7 2 6 3.1 9.4 3.1 8.8 0 16-7.2 16-16V136h64v752z"}}]},name:"book",theme:"outlined"};const Te=Ne;var Ve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M304 280h56c4.4 0 8-3.6 8-8 0-28.3 5.9-53.2 17.1-73.5 10.6-19.4 26-34.8 45.4-45.4C450.9 142 475.7 136 504 136h16c28.3 0 53.2 5.9 73.5 17.1 19.4 10.6 34.8 26 45.4 45.4C650 218.9 656 243.7 656 272c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-40-8.8-76.7-25.9-108.1a184.31 184.31 0 00-74-74C596.7 72.8 560 64 520 64h-16c-40 0-76.7 8.8-108.1 25.9a184.31 184.31 0 00-74 74C304.8 195.3 296 232 296 272c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M940 512H792V412c76.8 0 139-62.2 139-139 0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8a63 63 0 01-63 63H232a63 63 0 01-63-63c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 76.8 62.2 139 139 139v100H84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h148v96c0 6.5.2 13 .7 19.3C164.1 728.6 116 796.7 116 876c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-44.2 23.9-82.9 59.6-103.7a273 273 0 0022.7 49c24.3 41.5 59 76.2 100.5 100.5S460.5 960 512 960s99.8-13.9 141.3-38.2a281.38 281.38 0 00123.2-149.5A120 120 0 01836 876c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-79.3-48.1-147.4-116.7-176.7.4-6.4.7-12.8.7-19.3v-96h148c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM716 680c0 36.8-9.7 72-27.8 102.9-17.7 30.3-43 55.6-73.3 73.3C584 874.3 548.8 884 512 884s-72-9.7-102.9-27.8c-30.3-17.7-55.6-43-73.3-73.3A202.75 202.75 0 01308 680V412h408v268z"}}]},name:"bug",theme:"outlined"};const Ge=Ve;var He={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M811.4 418.7C765.6 297.9 648.9 212 512.2 212S258.8 297.8 213 418.6C127.3 441.1 64 519.1 64 612c0 110.5 89.5 200 199.9 200h496.2C870.5 812 960 722.5 960 612c0-92.7-63.1-170.7-148.6-193.3zm36.3 281a123.07 123.07 0 01-87.6 36.3H263.9c-33.1 0-64.2-12.9-87.6-36.3A123.3 123.3 0 01140 612c0-28 9.1-54.3 26.2-76.3a125.7 125.7 0 0166.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10c54.3 14.5 92.1 63.8 92.1 120 0 33.1-12.9 64.3-36.3 87.7z"}}]},name:"cloud",theme:"outlined"};const Ie=He;var Ue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.3 459a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V856c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V613.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 459z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-upload",theme:"outlined"};const Re=Ue;var We={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0138.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"}}]},name:"github",theme:"filled"};const Ye=We;var Je={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M521.7 82c-152.5-.4-286.7 78.5-363.4 197.7-3.4 5.3.4 12.3 6.7 12.3h70.3c4.8 0 9.3-2.1 12.3-5.8 7-8.5 14.5-16.7 22.4-24.5 32.6-32.5 70.5-58.1 112.7-75.9 43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 32.6 32.5 58.1 70.4 76 112.5C865.7 417.8 875 464.1 875 512c0 47.9-9.4 94.2-27.8 137.8-17.8 42.1-43.4 80-76 112.5s-70.5 58.1-112.7 75.9A352.8 352.8 0 01520.6 866c-47.9 0-94.3-9.4-137.9-27.8A353.84 353.84 0 01270 762.3c-7.9-7.9-15.3-16.1-22.4-24.5-3-3.7-7.6-5.8-12.3-5.8H165c-6.3 0-10.2 7-6.7 12.3C234.9 863.2 368.5 942 520.6 942c236.2 0 428-190.1 430.4-425.6C953.4 277.1 761.3 82.6 521.7 82zM395.02 624v-76h-314c-4.4 0-8-3.6-8-8v-56c0-4.4 3.6-8 8-8h314v-76c0-6.7 7.8-10.5 13-6.3l141.9 112a8 8 0 010 12.6l-141.9 112c-5.2 4.1-13 .4-13-6.3z"}}]},name:"login",theme:"outlined"};const qe=Je;var Xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 732h-70.3c-4.8 0-9.3 2.1-12.3 5.8-7 8.5-14.5 16.7-22.4 24.5a353.84 353.84 0 01-112.7 75.9A352.8 352.8 0 01512.4 866c-47.9 0-94.3-9.4-137.9-27.8a353.84 353.84 0 01-112.7-75.9 353.28 353.28 0 01-76-112.5C167.3 606.2 158 559.9 158 512s9.4-94.2 27.8-137.8c17.8-42.1 43.4-80 76-112.5s70.5-58.1 112.7-75.9c43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 7.9 7.9 15.3 16.1 22.4 24.5 3 3.7 7.6 5.8 12.3 5.8H868c6.3 0 10.2-7 6.7-12.3C798 160.5 663.8 81.6 511.3 82 271.7 82.6 79.6 277.1 82 516.4 84.4 751.9 276.2 942 512.4 942c152.1 0 285.7-78.8 362.3-197.7 3.4-5.3-.4-12.3-6.7-12.3zm88.9-226.3L815 393.7c-5.3-4.2-13-.4-13 6.3v76H488c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z"}}]},name:"logout",theme:"outlined"};const Qe=Xe;var Ze={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M865.3 244.7c-.3-.3-61.1 59.8-182.1 180.6l-84.9-84.9 180.9-180.9c-95.2-57.3-217.5-42.6-296.8 36.7A244.42 244.42 0 00419 432l1.8 6.7-283.5 283.4c-6.2 6.2-6.2 16.4 0 22.6l141.4 141.4c6.2 6.2 16.4 6.2 22.6 0l283.3-283.3 6.7 1.8c83.7 22.3 173.6-.9 236-63.3 79.4-79.3 94.1-201.6 38-296.6z"}}]},name:"tool",theme:"filled"};const Ke=Ze;var et={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"};const tt=et;function ne(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),r.forEach(function(a){nt(n,a,t[a])})}return n}function nt(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var x=function(e,t){var r=ne({},e,t.attrs);return i(m,ne({},r,{icon:Te}),null)};x.displayName="BookOutlined";x.inheritAttrs=!1;const rt=x;function re(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),r.forEach(function(a){at(n,a,t[a])})}return n}function at(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var z=function(e,t){var r=re({},e,t.attrs);return i(m,re({},r,{icon:Ge}),null)};z.displayName="BugOutlined";z.inheritAttrs=!1;const ae=z;function oe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),r.forEach(function(a){ot(n,a,t[a])})}return n}function ot(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var E=function(e,t){var r=oe({},e,t.attrs);return i(m,oe({},r,{icon:Ie}),null)};E.displayName="CloudOutlined";E.inheritAttrs=!1;const lt=E;function le(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),r.forEach(function(a){it(n,a,t[a])})}return n}function it(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var M=function(e,t){var r=le({},e,t.attrs);return i(m,le({},r,{icon:Re}),null)};M.displayName="CloudUploadOutlined";M.inheritAttrs=!1;const st=M;function ie(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),r.forEach(function(a){ct(n,a,t[a])})}return n}function ct(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var D=function(e,t){var r=ie({},e,t.attrs);return i(m,ie({},r,{icon:Ye}),null)};D.displayName="GithubFilled";D.inheritAttrs=!1;const ut=D;function se(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),r.forEach(function(a){dt(n,a,t[a])})}return n}function dt(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var F=function(e,t){var r=se({},e,t.attrs);return i(m,se({},r,{icon:qe}),null)};F.displayName="LoginOutlined";F.inheritAttrs=!1;const ft=F;function ce(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),r.forEach(function(a){pt(n,a,t[a])})}return n}function pt(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var N=function(e,t){var r=ce({},e,t.attrs);return i(m,ce({},r,{icon:Qe}),null)};N.displayName="LogoutOutlined";N.inheritAttrs=!1;const gt=N;function ue(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),r.forEach(function(a){ht(n,a,t[a])})}return n}function ht(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var T=function(e,t){var r=ue({},e,t.attrs);return i(m,ue({},r,{icon:Ke}),null)};T.displayName="ToolFilled";T.inheritAttrs=!1;const bt=T;function de(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),r.forEach(function(a){mt(n,a,t[a])})}return n}function mt(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var V=function(e,t){var r=de({},e,t.attrs);return i(m,de({},r,{icon:tt}),null)};V.displayName="WarningOutlined";V.inheritAttrs=!1;const vt=V;class yt{async get(){return(await fetch("/_editor/api/login")).json()}async create(e){return(await fetch("/_editor/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})})).json()}async delete(){await fetch("/_editor/api/login",{method:"DELETE"})}async getProjectInfo(){return(await fetch("/_editor/api/login/info")).json()}}const L=new yt;class Ot{async check(){return(await fetch("/_editor/api/linters/check")).json()}async fix(e,t){if(!(await fetch(`/_editor/api/linters/fix/${e}/${t}`,{method:"POST"})).ok)throw new Error("Failed to fix")}}const he=new Ot;class _t{constructor(e,t){g(this,"name");g(this,"label");g(this,"ruleName");this.name=e.name,this.label=e.label,this.ruleName=t}async fix(){await he.fix(this.ruleName,this.name)}}class wt{constructor(e,t){g(this,"label");g(this,"fixes");g(this,"rule");this.label=e.label,this.rule=t,this.fixes=e.fixes.map(r=>new _t(r,t.name))}}class G{constructor(e){g(this,"name");g(this,"label");g(this,"type");g(this,"issues");g(this,"valid");this.name=e.name,this.label=e.label,this.type=e.type,this.issues=e.issues.map(t=>new wt(t,this)),this.valid=e.valid}static async check(){return(await he.check()).map(t=>new G(t))}}const St=C({__name:"GithubStars",setup(n){return(e,t)=>(s(),f(o(h),{href:"https://github.com/abstra-app/abstra-lib",target:"_blank",type:"link",size:"small"},{default:l(()=>[i(o(ut)),u(" GitHub ")]),_:1}))}}),Ct=C({__name:"DocsButton",props:{path:{}},setup(n){return(e,t)=>{var r;return s(),f(o(h),{class:"docs-button",href:`https://docs.abstra.io/${(r=e.path)!=null?r:""}`,target:"_blank",type:"link",size:"small"},{icon:l(()=>[i(o(rt))]),default:l(()=>[u(" Docs ")]),_:1},8,["href"])}}}),Pt=C({__name:"Linter",props:{issues:{}},emits:["issueFixed"],setup(n,{emit:e}){const t=j(!1);async function r(p){t.value=!0;try{await p.fix(),e("issueFixed",p)}finally{t.value=!1}}function a(p){return p.type==="bug"?"warning":p.type==="security"?"error":"info"}return(p,d)=>p.issues.length>0?(s(),f(o(fe),{key:0},{content:l(()=>[i(o(S),{direction:"vertical"},{default:l(()=>[(s(!0),J(X,null,q(p.issues,(b,A)=>(s(),f(o(De),{key:A+b.rule.name,type:a(b.rule),style:{width:"400px"},message:b.rule.label},{description:l(()=>[i(o(S),{direction:"vertical"},{default:l(()=>[Ce("div",null,$(b.label),1),(s(!0),J(X,null,q(b.fixes,w=>(s(),f(o(h),{key:w.name,loading:t.value,disabled:t.value,onClick:k=>r(w)},{icon:l(()=>[i(o(bt))]),default:l(()=>[u(" "+$(w.label),1)]),_:2},1032,["loading","disabled","onClick"]))),128))]),_:2},1024)]),_:2},1032,["type","message"]))),128))]),_:1})]),default:l(()=>[i(o(h),{danger:!!p.issues.length},{default:l(()=>[i(o(vt))]),_:1},8,["danger"])]),_:1})):_("",!0)}}),jt=C({__name:"VSCodeButton",setup(n){async function e(){const d=await fetch("/_editor/api/debugger",{method:"GET"});if(!d.ok)throw new Error("Failed to check debugger connection");return await d.json()}async function t(){await fetch("/_editor/api/debugger/vscode-launch",{method:"POST"}),a()}const r=j({connected:!1,port:0,is_launch_json_configured:!1});async function a(){r.value=await e()}let p=null;return pe(()=>{p=setInterval(a,1e3)}),ge(()=>{p&&clearInterval(p)}),(d,b)=>r.value.connected?(s(),f(o(h),{key:0,disabled:"",type:"text",size:"small"},{icon:l(()=>[i(o(ae))]),default:l(()=>[u(" VSCode Connected")]),_:1})):(s(),f(o(fe),{key:1},{content:l(()=>[i(o(S),{direction:"vertical"},{default:l(()=>[i(o(Fe),null,{default:l(()=>[u(" Abstra allows you to connect to your VSCode debugger ")]),_:1}),i(o(ee),null,{default:l(()=>[u(" You're not connected ")]),_:1}),r.value.is_launch_json_configured?(s(),f(o(S),{key:0,direction:"vertical"},{default:l(()=>[i(o(ee),{style:{"font-size":"24px"},copyable:"",code:""},{default:l(()=>[u($(r.value.port),1)]),_:1})]),_:1})):(s(),f(o(h),{key:1,onClick:t},{default:l(()=>[u("Configure launch.json")]),_:1})),i(o(h),{href:"https://docs.abstra.io/debug/vscode",target:"_blank",type:"link",size:"small"},{default:l(()=>[u(" Learn how to connect to vscode ")]),_:1})]),_:1})]),default:l(()=>[i(o(h),{type:"text",size:"small"},{icon:l(()=>[i(o(ae))]),default:l(()=>[u(" Connect to VSCode ")]),_:1})]),_:1}))}}),$t=C({__name:"NavbarControls",props:{showGithubStars:{type:Boolean},showVSCodeButton:{type:Boolean},showWorkflowEditor:{type:Boolean},showSaveButton:{type:Boolean},docsPath:{},editingModel:{}},setup(n){var U;const e=n,t="https://cloud.abstra.io/api-key?"+new URLSearchParams({redirect:location.href}),r=j(!1),a=(U=Ee.instance)==null?void 0:U.isStagingRelease,{loading:p,result:d,refetch:b}=K(()=>L.get()),{result:A,refetch:w}=K(()=>G.check()),k=Q(()=>{var c,v;return(v=(c=A.value)==null?void 0:c.flatMap(P=>P.issues))!=null?v:[]}),B=j(!1);function H(){setTimeout(async()=>{await w(),B.value&&H()},1e3)}pe(()=>{B.value=!0,H()}),ge(()=>{B.value=!1});const be=Pe(),me=je();console.log({}.VITE_ABSTRA_RELEASE);const y=Q(()=>{var c,v;return(c=d.value)!=null&&c.logged?r.value?"deploying":k.value.length>0?"issues-found":(v=e.editingModel)!=null&&v.hasChanges()?"unsaved":a?"is-staging":"ready":"missing-login"});function ve(){const c=new URL(location.href);c.searchParams.delete("api-key"),me.replace(c.pathname+c.search)}function ye(){var c;(c=d.value)!=null&&c.logged?te.success({title:"You're logged in!",content:"You can now deploy your project to Abstra Cloud."}):te.error({title:"Login failed",content:"Please try again. If the problem persists, contact help@abstra.io."})}const I=be.query["api-key"];typeof I=="string"&&L.create(I).then(b).then(ve).then(ye);async function Oe(){!d.value||(await L.delete(),b())}async function _e(){if(!!d.value){r.value=!0;try{await xe.deploy(),window.open(`https://cloud.abstra.io/projects/${d.value.logged&&d.value.project_id}/builds`,"_blank")}catch(c){ze("Deploy failed",String(c))}r.value=!1}}return(c,v)=>(s(),f(o(S),null,{default:l(()=>{var P,R,W;return[e.showGithubStars?(s(),f(St,{key:0})):_("",!0),i(Ct,{path:e.docsPath},null,8,["path"]),(P=o(d))!=null&&P.logged?(s(),f(o(h),{key:1,href:`https://cloud.abstra.io/projects/${o(d).project_id}`,target:"_blank",type:"link",size:"small"},{icon:l(()=>[i(o(lt))]),default:l(()=>[u(" Project Console ")]),_:1},8,["href"])):_("",!0),c.showVSCodeButton?(s(),f(jt,{key:2})):_("",!0),$e(c.$slots,"default",{},void 0,!0),i(o(Be),null,{default:l(()=>{var O;return[e.editingModel&&e.showSaveButton?(s(),f(Me,{key:0,model:e.editingModel},null,8,["model"])):_("",!0),i(o(Ae),null,Z({default:l(()=>[y.value==="deploying"?(s(),f(o(h),{key:0,loading:""},{default:l(()=>[u("Deploying")]),_:1})):(s(),f(o(ke),{key:1,title:"Are you sure you want to deploy this project to Abstra Cloud?",disabled:y.value!=="ready",onConfirm:_e},{default:l(()=>[i(o(h),{disabled:y.value!=="ready"},{icon:l(()=>[i(o(st))]),default:l(()=>[u(" Deploy ")]),_:1},8,["disabled"])]),_:1},8,["disabled"]))]),_:2},[y.value==="unsaved"?{name:"title",fn:l(()=>[u(" Save your project before deploying ")]),key:"0"}:y.value==="missing-login"?{name:"title",fn:l(()=>[u(" Login to Abstra Cloud to deploy ")]),key:"1"}:y.value==="issues-found"?{name:"title",fn:l(()=>[u(" There are errors on your project. Please fix them before deploying. ")]),key:"2"}:y.value==="is-staging"?{name:"title",fn:l(()=>[u(" This is a staging release. You can't deploy it to Abstra Cloud. ")]),key:"3"}:void 0]),1024),(O=c.editingModel)!=null&&O.hasChanges()?_("",!0):(s(),f(Pt,{key:1,issues:k.value},null,8,["issues"]))]}),_:1}),i(o(h),{href:(R=o(d))!=null&&R.logged?void 0:t,loading:o(p),disabled:o(p),onClick:v[0]||(v[0]=O=>{var Y;return(Y=o(d))!=null&&Y.logged?Oe():void 0})},Z({default:l(()=>{var O;return[u($((O=o(d))!=null&&O.logged?"Logout":"Login")+" ",1)]}),_:2},[(W=o(d))!=null&&W.logged?{name:"icon",fn:l(()=>[i(o(gt))]),key:"0"}:{name:"icon",fn:l(()=>[i(o(ft))]),key:"1"}]),1032,["href","loading","disabled"])]}),_:3}))}});const Ft=Le($t,[["__scopeId","data-v-fe9b7e70"]]);export{Ft as N,L as l};
//# sourceMappingURL=NavbarControls.f407b84f.js.map
