import{a as A,i as V,c as _,b as i,e as l,f as y,g as Z,h as u,m as M,ae as r,c1 as B,H as S,D as L,k as D,p as E,u as o,c2 as P,w as f,a8 as $,j as p,aN as C,L as x,z as U,r as k,bd as z,B as I,S as b,U as w,b1 as N,b2 as T,bk as j}from"./jwt-decode.esm-X_JHyrHe.js";import{E as F}from"./ExclamationCircleOutlined-BxtQtvFx.js";(function(){try{var a=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},n=new Error().stack;n&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[n]="a63145a6-b65f-4be9-9f93-b8ce03217818",a._sentryDebugIdIdentifier="sentry-dbid-a63145a6-b65f-4be9-9f93-b8ce03217818")}catch{}})();const K=["width","height","fill","transform"],O={key:0},G=u("path",{d:"M222.14,69.17,186.83,33.86A19.86,19.86,0,0,0,172.69,28H48A20,20,0,0,0,28,48V208a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V83.31A19.86,19.86,0,0,0,222.14,69.17ZM164,204H92V160h72Zm40,0H188V156a20,20,0,0,0-20-20H88a20,20,0,0,0-20,20v48H52V52H171l33,33ZM164,84a12,12,0,0,1-12,12H96a12,12,0,0,1,0-24h56A12,12,0,0,1,164,84Z"},null,-1),R=[G],W={key:1},q=u("path",{d:"M216,83.31V208a8,8,0,0,1-8,8H176V152a8,8,0,0,0-8-8H88a8,8,0,0,0-8,8v64H48a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8H172.69a8,8,0,0,1,5.65,2.34l35.32,35.32A8,8,0,0,1,216,83.31Z",opacity:"0.2"},null,-1),J=u("path",{d:"M219.31,72,184,36.69A15.86,15.86,0,0,0,172.69,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V83.31A15.86,15.86,0,0,0,219.31,72ZM168,208H88V152h80Zm40,0H184V152a16,16,0,0,0-16-16H88a16,16,0,0,0-16,16v56H48V48H172.69L208,83.31ZM160,72a8,8,0,0,1-8,8H96a8,8,0,0,1,0-16h56A8,8,0,0,1,160,72Z"},null,-1),Q=[q,J],X={key:2},Y=u("path",{d:"M219.31,72,184,36.69A15.86,15.86,0,0,0,172.69,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V83.31A15.86,15.86,0,0,0,219.31,72ZM208,208H184V152a16,16,0,0,0-16-16H88a16,16,0,0,0-16,16v56H48V48H172.69L208,83.31ZM160,72a8,8,0,0,1-8,8H96a8,8,0,0,1,0-16h56A8,8,0,0,1,160,72Z"},null,-1),ee=[Y],ae={key:3},ne=u("path",{d:"M217.9,73.42,182.58,38.1a13.9,13.9,0,0,0-9.89-4.1H48A14,14,0,0,0,34,48V208a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V83.31A13.9,13.9,0,0,0,217.9,73.42ZM170,210H86V152a2,2,0,0,1,2-2h80a2,2,0,0,1,2,2Zm40-2a2,2,0,0,1-2,2H182V152a14,14,0,0,0-14-14H88a14,14,0,0,0-14,14v58H48a2,2,0,0,1-2-2V48a2,2,0,0,1,2-2H172.69a2,2,0,0,1,1.41.58L209.42,81.9a2,2,0,0,1,.58,1.41ZM158,72a6,6,0,0,1-6,6H96a6,6,0,0,1,0-12h56A6,6,0,0,1,158,72Z"},null,-1),te=[ne],se={key:4},oe=u("path",{d:"M219.31,72,184,36.69A15.86,15.86,0,0,0,172.69,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V83.31A15.86,15.86,0,0,0,219.31,72ZM168,208H88V152h80Zm40,0H184V152a16,16,0,0,0-16-16H88a16,16,0,0,0-16,16v56H48V48H172.69L208,83.31ZM160,72a8,8,0,0,1-8,8H96a8,8,0,0,1,0-16h56A8,8,0,0,1,160,72Z"},null,-1),re=[oe],le={key:5},de=u("path",{d:"M216.49,74.83,181.17,39.51A11.93,11.93,0,0,0,172.69,36H48A12,12,0,0,0,36,48V208a12,12,0,0,0,12,12H208a12,12,0,0,0,12-12V83.31A11.93,11.93,0,0,0,216.49,74.83ZM172,212H84V152a4,4,0,0,1,4-4h80a4,4,0,0,1,4,4Zm40-4a4,4,0,0,1-4,4H180V152a12,12,0,0,0-12-12H88a12,12,0,0,0-12,12v60H48a4,4,0,0,1-4-4V48a4,4,0,0,1,4-4H172.69a4,4,0,0,1,2.82,1.17l35.32,35.32A4,4,0,0,1,212,83.31ZM156,72a4,4,0,0,1-4,4H96a4,4,0,0,1,0-8h56A4,4,0,0,1,156,72Z"},null,-1),ie=[de],ue={name:"PhFloppyDisk"},ce=A({...ue,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(a){const n=a,c=V("weight","regular"),h=V("size","1em"),H=V("color","currentColor"),v=V("mirrored",!1),s=_(()=>n.weight??c),t=_(()=>n.size??h),g=_(()=>n.color??H),d=_(()=>n.mirrored!==void 0?n.mirrored?"scale(-1, 1)":void 0:v?"scale(-1, 1)":void 0);return(e,m)=>(l(),i("svg",M({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:t.value,height:t.value,fill:g.value,transform:d.value},e.$attrs),[y(e.$slots,"default"),s.value==="bold"?(l(),i("g",O,R)):s.value==="duotone"?(l(),i("g",W,Q)):s.value==="fill"?(l(),i("g",X,ee)):s.value==="light"?(l(),i("g",ae,te)):s.value==="regular"?(l(),i("g",se,re)):s.value==="thin"?(l(),i("g",le,ie)):Z("",!0)],16,K))}}),he=A({__name:"UnsavedChangesHandler",props:{hasChanges:{type:Boolean}},setup(a){const n=a,c=r.translate("i18n_unsavedchanges_message"),h=t=>(t=t||window.event,t&&(t.returnValue=c),c),H=()=>{window.addEventListener("beforeunload",h)};B(async(t,g,d)=>{if(!n.hasChanges)return d();await new Promise(m=>{$.confirm({title:r.translate("i18n_unsavedchanges_title"),icon:p(F),content:r.translate("i18n_unsavedchanges_confirm_message"),okText:r.translate("i18n_unsavedchanges_discard"),okType:"danger",cancelText:r.translate("i18n_unsavedchanges_cancel"),onOk(){m(!0)},onCancel(){m(!1)}})})?d():d(!1)});const v=()=>window.removeEventListener("beforeunload",h),s=t=>t?H():v();return S(()=>n.hasChanges,s),L(()=>s(n.hasChanges)),D(v),(t,g)=>(l(),E(o(P),{theme:{token:{colorPrimary:"#d14056"}}},{default:f(()=>[y(t.$slots,"default",{},void 0,!0)]),_:3}))}}),ve=C(he,[["__scopeId","data-v-763066ea"]]),ge={class:"popup-container"},fe={style:{padding:"0px 4px"}},pe=A({__name:"SaveButton",props:{model:{},neverShowPopover:{type:Boolean},disabled:{type:Boolean}},emits:["save"],setup(a,{emit:n}){const c=n,h=a,H=e=>e.parentElement??document.body,v=new x(U.boolean(),"dontShowUnsavedChanges"),s=k(v.get()??!1),t=()=>{v.set(!0),s.value=!0},g=k(!1);async function d(){g.value=!0;try{await h.model.save(),c("save")}catch(e){console.error(e),j.error({message:r.translate("i18n_savebutton_error_saving")})}finally{g.value=!1}}return addEventListener("keydown",e=>{(e.metaKey||e.ctrlKey)&&e.key==="s"&&(e.preventDefault(),d())}),addEventListener("beforeunload",e=>{h.model.hasChanges()&&(e.preventDefault(),e.returnValue="")}),(e,m)=>(l(),i("div",ge,[p(o(z),{placement:"left",open:a.model.hasChanges()&&!s.value&&!a.neverShowPopover,"get-popup-container":H},{content:f(()=>[u("div",fe,[p(o(N),null,{default:f(()=>[b(w(o(r).translate("i18n_savebutton_unsaved_changes")),1)]),_:1}),p(o(T),{onClick:t},{default:f(()=>[b(w(o(r).translate("i18n_savebutton_dont_show_again")),1)]),_:1})])]),default:f(()=>[p(o(I),{class:"save-button",loading:g.value,disabled:!a.model?.hasChanges()||a.disabled,onClick:m[0]||(m[0]=me=>d())},{icon:f(()=>[y(e.$slots,"icon",{},()=>[p(o(ce),{size:"18"})],!0)]),default:f(()=>[a.model?.hasChanges()?y(e.$slots,"with-changes",{key:0},()=>[b(w(o(r).translate("i18n_savebutton_save")),1)],!0):y(e.$slots,"without-changes",{key:1},()=>[b(w(o(r).translate("i18n_savebutton_saved")),1)],!0)]),_:3},8,["loading","disabled"])]),_:3},8,["open"]),p(ve,{"has-changes":a.model?.hasChanges()},null,8,["has-changes"])]))}}),Ve=C(pe,[["__scopeId","data-v-7d32f3c9"]]);export{Ve as S,ve as U};
//# sourceMappingURL=SaveButton-SYNr5bdb.js.map
