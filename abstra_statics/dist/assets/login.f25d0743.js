var c=Object.defineProperty;var d=(n,e,t)=>e in n?c(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var r=(n,e,t)=>(d(n,typeof e!="symbol"?e+"":e,t),t);import{a as i}from"./asyncComputed.094a8dad.js";import"./outputWidgets.c72d6948.js";(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[e]="0c47d399-71db-4bec-bfdc-53ee7159d3c7",n._sentryDebugIdIdentifier="sentry-dbid-0c47d399-71db-4bec-bfdc-53ee7159d3c7")}catch{}})();const a=class{async refreshIfChanged(e){var t,s;e.logged!==((s=(t=this.asyncComputed.result.value)==null?void 0:t.logged)!=null?s:!1)&&await this.asyncComputed.refetch()}async get(){return await(await fetch("/_editor/api/login")).json()}async create(e){const s=await(await fetch("/_editor/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})})).json();return await this.refreshIfChanged(s),s}async delete(){await fetch("/_editor/api/login",{method:"DELETE"}),this.asyncComputed.refetch()}async getProjectInfo(){return(await fetch("/_editor/api/login/info")).json()}get asyncComputed(){return a._asyncComputed===null&&(a._asyncComputed=i(()=>l.get())),a._asyncComputed}get loginUrl(){return"https://cloud.abstra.io/api-key?"+new URLSearchParams({redirect:location.href})}};let o=a;r(o,"_asyncComputed",null);const l=new o;export{l};
//# sourceMappingURL=login.f25d0743.js.map
