import{_ as ie}from"./AbstraButton.vue_vue_type_script_setup_true_lang.eba6379c.js";import{B as c0}from"./BaseLayout.5c432674.js";import{H as Xe,u as p0,o as Ue}from"./omniChatStore.e35b7c87.js";import{a as Me}from"./asyncComputed.ed75fd06.js";import{d as W,am as B,c as b,o as t,a5 as s,a7 as de,h as I,e6 as ce,e as u,eb as fe,e5 as Se,u as e,a as C,b as n,f as o,g as E,d8 as v0,ec as le,dc as P,aR as ae,ed as G,_ as Ie,bR as ee,cx as J,bJ as se,ek as f0,bM as m0,cw as Le,r as N,w as he,ej as be,S as $e,cU as ge,i as ze,cB as g0,cR as je,aB as Ae,et as h0,J as Ye,ae as y0,aV as me,cL as Fe,d2 as Re,ea as b0,cK as $0,en as H0,cV as k0,bz as Ee,aq as V0,M as w0}from"./jwt-decode.esm.40cd188f.js";import{G as C0}from"./PhSparkle.vue.de732af0.js";import{d as Be,p as He,j as _0}from"./router.9b4cebde.js";import{a as A0}from"./organization.95e33efa.js";import{a as Te}from"./project.bb7e56ba.js";import{p as e0,T as ne,d as Z0,C as Ke}from"./tables.ef97e940.js";import{F as M0}from"./folder.da17e721.js";import{_ as S0}from"./ConsoleOmniChat.vue_vue_type_script_setup_true_lang.1ff72d28.js";import{C as Ze}from"./ContentLayout.1f29ed80.js";import{F as I0}from"./PhArrowSquareOut.vue.ac3b97bb.js";import{u as L0}from"./useTables.b955f066.js";import{C as Pe,S as Oe}from"./Card.c75c26b3.js";import{F as z0}from"./PhGear.vue.e6230d52.js";import{I as a0,F as B0,a as T0,G as D0,b as x0}from"./PhWarningCircle.vue.492a698f.js";import{A as De}from"./index.612dbac7.js";import{A as t0}from"./index.7a7aae35.js";import{a as q0}from"./ant-design.a823f33a.js";import{B as N0,A as U0}from"./Breadcrumb.2fe09212.js";import{A as j0}from"./index.1670fbb0.js";import"./record.8851b7e7.js";import"./uuid.1d94dbb9.js";import"./PhCopySimple.vue.1e657246.js";import"./index.64aa97f8.js";import"./string.31fe49c1.js";import"./OmniChat.7d06f008.js";import"./AbstraLogo.vue_vue_type_script_setup_true_lang.cdd5def5.js";import"./Logo.afeb3f7b.js";import"./PhClockCounterClockwise.vue.ee460862.js";import"./LoadingOutlined.05064bb8.js";import"./PhDatabase.vue.95d71da8.js";import"./index.565225e2.js";import"./index.8f26b7ac.js";(function(){try{var H=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new Error().stack;r&&(H._sentryDebugIds=H._sentryDebugIds||{},H._sentryDebugIds[r]="3fb72b3d-4020-418c-b2e0-31abb08822bf",H._sentryDebugIdIdentifier="sentry-dbid-3fb72b3d-4020-418c-b2e0-31abb08822bf")}catch{}})();const F0=["width","height","fill","transform"],R0={key:0},E0=u("path",{d:"M208.49,120.49a12,12,0,0,1-17,0L140,69V216a12,12,0,0,1-24,0V69L64.49,120.49a12,12,0,0,1-17-17l72-72a12,12,0,0,1,17,0l72,72A12,12,0,0,1,208.49,120.49Z"},null,-1),K0=[E0],P0={key:1},O0=u("path",{d:"M200,112H56l72-72Z",opacity:"0.2"},null,-1),W0=u("path",{d:"M205.66,106.34l-72-72a8,8,0,0,0-11.32,0l-72,72A8,8,0,0,0,56,120h64v96a8,8,0,0,0,16,0V120h64a8,8,0,0,0,5.66-13.66ZM75.31,104,128,51.31,180.69,104Z"},null,-1),G0=[O0,W0],Q0={key:2},J0=u("path",{d:"M207.39,115.06A8,8,0,0,1,200,120H136v96a8,8,0,0,1-16,0V120H56a8,8,0,0,1-5.66-13.66l72-72a8,8,0,0,1,11.32,0l72,72A8,8,0,0,1,207.39,115.06Z"},null,-1),X0=[J0],Y0={key:3},ea=u("path",{d:"M204.24,116.24a6,6,0,0,1-8.48,0L134,54.49V216a6,6,0,0,1-12,0V54.49L60.24,116.24a6,6,0,0,1-8.48-8.48l72-72a6,6,0,0,1,8.48,0l72,72A6,6,0,0,1,204.24,116.24Z"},null,-1),aa=[ea],ta={key:4},la=u("path",{d:"M205.66,117.66a8,8,0,0,1-11.32,0L136,59.31V216a8,8,0,0,1-16,0V59.31L61.66,117.66a8,8,0,0,1-11.32-11.32l72-72a8,8,0,0,1,11.32,0l72,72A8,8,0,0,1,205.66,117.66Z"},null,-1),na=[la],oa={key:5},ra=u("path",{d:"M202.83,114.83a4,4,0,0,1-5.66,0L132,49.66V216a4,4,0,0,1-8,0V49.66L58.83,114.83a4,4,0,0,1-5.66-5.66l72-72a4,4,0,0,1,5.66,0l72,72A4,4,0,0,1,202.83,114.83Z"},null,-1),ua=[ra],ia={name:"PhArrowUp"},sa=W({...ia,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(H){const r=H,a=B("weight","regular"),k=B("size","1em"),p=B("color","currentColor"),d=B("mirrored",!1),i=b(()=>{var l;return(l=r.weight)!=null?l:a}),w=b(()=>{var l;return(l=r.size)!=null?l:k}),v=b(()=>{var l;return(l=r.color)!=null?l:p}),h=b(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:d?"scale(-1, 1)":void 0);return(l,Z)=>(t(),s("svg",ce({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:w.value,height:w.value,fill:v.value,transform:h.value},l.$attrs),[de(l.$slots,"default"),i.value==="bold"?(t(),s("g",R0,K0)):i.value==="duotone"?(t(),s("g",P0,G0)):i.value==="fill"?(t(),s("g",Q0,X0)):i.value==="light"?(t(),s("g",Y0,aa)):i.value==="regular"?(t(),s("g",ta,na)):i.value==="thin"?(t(),s("g",oa,ua)):I("",!0)],16,F0))}}),da=["width","height","fill","transform"],ca={key:0},pa=u("path",{d:"M80,28H56A20,20,0,0,0,36,48V208a20,20,0,0,0,20,20H80a20,20,0,0,0,20-20V48A20,20,0,0,0,80,28ZM76,204H60V52H76ZM156,28H132a20,20,0,0,0-20,20V208a20,20,0,0,0,20,20h24a20,20,0,0,0,20-20V48A20,20,0,0,0,156,28Zm-4,176H136V52h16Zm100-76a12,12,0,0,1-12,12h-8v8a12,12,0,0,1-24,0v-8h-8a12,12,0,0,1,0-24h8v-8a12,12,0,0,1,24,0v8h8A12,12,0,0,1,252,128Z"},null,-1),va=[pa],fa={key:1},ma=u("path",{d:"M88,48V208a8,8,0,0,1-8,8H56a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8H80A8,8,0,0,1,88,48Zm64-8H128a8,8,0,0,0-8,8V208a8,8,0,0,0,8,8h24a8,8,0,0,0,8-8V48A8,8,0,0,0,152,40Z",opacity:"0.2"},null,-1),ga=u("path",{d:"M80,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H80a16,16,0,0,0,16-16V48A16,16,0,0,0,80,32Zm0,176H56V48H80ZM152,32H128a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V48A16,16,0,0,0,152,32Zm0,176H128V48h24Zm96-80a8,8,0,0,1-8,8H224v16a8,8,0,0,1-16,0V136H192a8,8,0,0,1,0-16h16V104a8,8,0,0,1,16,0v16h16A8,8,0,0,1,248,128Z"},null,-1),ha=[ma,ga],ya={key:2},ba=u("path",{d:"M96,48V208a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V48A16,16,0,0,1,56,32H80A16,16,0,0,1,96,48Zm56-16H128a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V48A16,16,0,0,0,152,32Zm88,88H224V104a8,8,0,0,0-16,0v16H192a8,8,0,0,0,0,16h16v16a8,8,0,0,0,16,0V136h16a8,8,0,0,0,0-16Z"},null,-1),$a=[ba],Ha={key:3},ka=u("path",{d:"M80,34H56A14,14,0,0,0,42,48V208a14,14,0,0,0,14,14H80a14,14,0,0,0,14-14V48A14,14,0,0,0,80,34Zm2,174a2,2,0,0,1-2,2H56a2,2,0,0,1-2-2V48a2,2,0,0,1,2-2H80a2,2,0,0,1,2,2ZM152,34H128a14,14,0,0,0-14,14V208a14,14,0,0,0,14,14h24a14,14,0,0,0,14-14V48A14,14,0,0,0,152,34Zm2,174a2,2,0,0,1-2,2H128a2,2,0,0,1-2-2V48a2,2,0,0,1,2-2h24a2,2,0,0,1,2,2Zm92-80a6,6,0,0,1-6,6H222v18a6,6,0,0,1-12,0V134H192a6,6,0,0,1,0-12h18V104a6,6,0,0,1,12,0v18h18A6,6,0,0,1,246,128Z"},null,-1),Va=[ka],wa={key:4},Ca=u("path",{d:"M80,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H80a16,16,0,0,0,16-16V48A16,16,0,0,0,80,32Zm0,176H56V48H80ZM152,32H128a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V48A16,16,0,0,0,152,32Zm0,176H128V48h24Zm96-80a8,8,0,0,1-8,8H224v16a8,8,0,0,1-16,0V136H192a8,8,0,0,1,0-16h16V104a8,8,0,0,1,16,0v16h16A8,8,0,0,1,248,128Z"},null,-1),_a=[Ca],Aa={key:5},Za=u("path",{d:"M80,36H56A12,12,0,0,0,44,48V208a12,12,0,0,0,12,12H80a12,12,0,0,0,12-12V48A12,12,0,0,0,80,36Zm4,172a4,4,0,0,1-4,4H56a4,4,0,0,1-4-4V48a4,4,0,0,1,4-4H80a4,4,0,0,1,4,4ZM152,36H128a12,12,0,0,0-12,12V208a12,12,0,0,0,12,12h24a12,12,0,0,0,12-12V48A12,12,0,0,0,152,36Zm4,172a4,4,0,0,1-4,4H128a4,4,0,0,1-4-4V48a4,4,0,0,1,4-4h24a4,4,0,0,1,4,4Zm88-80a4,4,0,0,1-4,4H220v20a4,4,0,0,1-8,0V132H192a4,4,0,0,1,0-8h20V104a4,4,0,0,1,8,0v20h20A4,4,0,0,1,244,128Z"},null,-1),Ma=[Za],Sa={name:"PhColumnsPlusRight"},Ia=W({...Sa,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(H){const r=H,a=B("weight","regular"),k=B("size","1em"),p=B("color","currentColor"),d=B("mirrored",!1),i=b(()=>{var l;return(l=r.weight)!=null?l:a}),w=b(()=>{var l;return(l=r.size)!=null?l:k}),v=b(()=>{var l;return(l=r.color)!=null?l:p}),h=b(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:d?"scale(-1, 1)":void 0);return(l,Z)=>(t(),s("svg",ce({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:w.value,height:w.value,fill:v.value,transform:h.value},l.$attrs),[de(l.$slots,"default"),i.value==="bold"?(t(),s("g",ca,va)):i.value==="duotone"?(t(),s("g",fa,ha)):i.value==="fill"?(t(),s("g",ya,$a)):i.value==="light"?(t(),s("g",Ha,Va)):i.value==="regular"?(t(),s("g",wa,_a)):i.value==="thin"?(t(),s("g",Aa,Ma)):I("",!0)],16,da))}}),La=["width","height","fill","transform"],za={key:0},Ba=u("path",{d:"M148,96V48a12,12,0,0,1,24,0V84h36a12,12,0,0,1,0,24H160A12,12,0,0,1,148,96ZM96,148H48a12,12,0,0,0,0,24H84v36a12,12,0,0,0,24,0V160A12,12,0,0,0,96,148Zm112,0H160a12,12,0,0,0-12,12v48a12,12,0,0,0,24,0V172h36a12,12,0,0,0,0-24ZM96,36A12,12,0,0,0,84,48V84H48a12,12,0,0,0,0,24H96a12,12,0,0,0,12-12V48A12,12,0,0,0,96,36Z"},null,-1),Ta=[Ba],Da={key:1},xa=u("path",{d:"M208,64V192a16,16,0,0,1-16,16H64a16,16,0,0,1-16-16V64A16,16,0,0,1,64,48H192A16,16,0,0,1,208,64Z",opacity:"0.2"},null,-1),qa=u("path",{d:"M152,96V48a8,8,0,0,1,16,0V88h40a8,8,0,0,1,0,16H160A8,8,0,0,1,152,96ZM96,152H48a8,8,0,0,0,0,16H88v40a8,8,0,0,0,16,0V160A8,8,0,0,0,96,152Zm112,0H160a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V168h40a8,8,0,0,0,0-16ZM96,40a8,8,0,0,0-8,8V88H48a8,8,0,0,0,0,16H96a8,8,0,0,0,8-8V48A8,8,0,0,0,96,40Z"},null,-1),Na=[xa,qa],Ua={key:2},ja=u("path",{d:"M152,96V48a8,8,0,0,1,13.66-5.66l48,48A8,8,0,0,1,208,104H160A8,8,0,0,1,152,96ZM96,152H48a8,8,0,0,0-5.66,13.66l48,48A8,8,0,0,0,104,208V160A8,8,0,0,0,96,152ZM99.06,40.61a8,8,0,0,0-8.72,1.73l-48,48A8,8,0,0,0,48,104H96a8,8,0,0,0,8-8V48A8,8,0,0,0,99.06,40.61ZM208,152H160a8,8,0,0,0-8,8v48a8,8,0,0,0,13.66,5.66l48-48A8,8,0,0,0,208,152Z"},null,-1),Fa=[ja],Ra={key:3},Ea=u("path",{d:"M154,96V48a6,6,0,0,1,12,0V90h42a6,6,0,0,1,0,12H160A6,6,0,0,1,154,96ZM96,154H48a6,6,0,0,0,0,12H90v42a6,6,0,0,0,12,0V160A6,6,0,0,0,96,154Zm112,0H160a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V166h42a6,6,0,0,0,0-12ZM96,42a6,6,0,0,0-6,6V90H48a6,6,0,0,0,0,12H96a6,6,0,0,0,6-6V48A6,6,0,0,0,96,42Z"},null,-1),Ka=[Ea],Pa={key:4},Oa=u("path",{d:"M152,96V48a8,8,0,0,1,16,0V88h40a8,8,0,0,1,0,16H160A8,8,0,0,1,152,96ZM96,152H48a8,8,0,0,0,0,16H88v40a8,8,0,0,0,16,0V160A8,8,0,0,0,96,152Zm112,0H160a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V168h40a8,8,0,0,0,0-16ZM96,40a8,8,0,0,0-8,8V88H48a8,8,0,0,0,0,16H96a8,8,0,0,0,8-8V48A8,8,0,0,0,96,40Z"},null,-1),Wa=[Oa],Ga={key:5},Qa=u("path",{d:"M156,96V48a4,4,0,0,1,8,0V92h44a4,4,0,0,1,0,8H160A4,4,0,0,1,156,96ZM96,156H48a4,4,0,0,0,0,8H92v44a4,4,0,0,0,8,0V160A4,4,0,0,0,96,156Zm112,0H160a4,4,0,0,0-4,4v48a4,4,0,0,0,8,0V164h44a4,4,0,0,0,0-8ZM96,44a4,4,0,0,0-4,4V92H48a4,4,0,0,0,0,8H96a4,4,0,0,0,4-4V48A4,4,0,0,0,96,44Z"},null,-1),Ja=[Qa],Xa={name:"PhCornersIn"},Ya=W({...Xa,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(H){const r=H,a=B("weight","regular"),k=B("size","1em"),p=B("color","currentColor"),d=B("mirrored",!1),i=b(()=>{var l;return(l=r.weight)!=null?l:a}),w=b(()=>{var l;return(l=r.size)!=null?l:k}),v=b(()=>{var l;return(l=r.color)!=null?l:p}),h=b(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:d?"scale(-1, 1)":void 0);return(l,Z)=>(t(),s("svg",ce({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:w.value,height:w.value,fill:v.value,transform:h.value},l.$attrs),[de(l.$slots,"default"),i.value==="bold"?(t(),s("g",za,Ta)):i.value==="duotone"?(t(),s("g",Da,Na)):i.value==="fill"?(t(),s("g",Ua,Fa)):i.value==="light"?(t(),s("g",Ra,Ka)):i.value==="regular"?(t(),s("g",Pa,Wa)):i.value==="thin"?(t(),s("g",Ga,Ja)):I("",!0)],16,La))}}),et=["width","height","fill","transform"],at={key:0},tt=u("path",{d:"M220,48V88a12,12,0,0,1-24,0V60H168a12,12,0,0,1,0-24h40A12,12,0,0,1,220,48ZM88,196H60V168a12,12,0,0,0-24,0v40a12,12,0,0,0,12,12H88a12,12,0,0,0,0-24Zm120-40a12,12,0,0,0-12,12v28H168a12,12,0,0,0,0,24h40a12,12,0,0,0,12-12V168A12,12,0,0,0,208,156ZM88,36H48A12,12,0,0,0,36,48V88a12,12,0,0,0,24,0V60H88a12,12,0,0,0,0-24Z"},null,-1),lt=[tt],nt={key:1},ot=u("path",{d:"M208,48V208H48V48Z",opacity:"0.2"},null,-1),rt=u("path",{d:"M216,48V88a8,8,0,0,1-16,0V56H168a8,8,0,0,1,0-16h40A8,8,0,0,1,216,48ZM88,200H56V168a8,8,0,0,0-16,0v40a8,8,0,0,0,8,8H88a8,8,0,0,0,0-16Zm120-40a8,8,0,0,0-8,8v32H168a8,8,0,0,0,0,16h40a8,8,0,0,0,8-8V168A8,8,0,0,0,208,160ZM88,40H48a8,8,0,0,0-8,8V88a8,8,0,0,0,16,0V56H88a8,8,0,0,0,0-16Z"},null,-1),ut=[ot,rt],it={key:2},st=u("path",{d:"M93.66,202.34A8,8,0,0,1,88,216H48a8,8,0,0,1-8-8V168a8,8,0,0,1,13.66-5.66ZM88,40H48a8,8,0,0,0-8,8V88a8,8,0,0,0,13.66,5.66l40-40A8,8,0,0,0,88,40ZM211.06,160.61a8,8,0,0,0-8.72,1.73l-40,40A8,8,0,0,0,168,216h40a8,8,0,0,0,8-8V168A8,8,0,0,0,211.06,160.61ZM208,40H168a8,8,0,0,0-5.66,13.66l40,40A8,8,0,0,0,216,88V48A8,8,0,0,0,208,40Z"},null,-1),dt=[st],ct={key:3},pt=u("path",{d:"M214,48V88a6,6,0,0,1-12,0V54H168a6,6,0,0,1,0-12h40A6,6,0,0,1,214,48ZM88,202H54V168a6,6,0,0,0-12,0v40a6,6,0,0,0,6,6H88a6,6,0,0,0,0-12Zm120-40a6,6,0,0,0-6,6v34H168a6,6,0,0,0,0,12h40a6,6,0,0,0,6-6V168A6,6,0,0,0,208,162ZM88,42H48a6,6,0,0,0-6,6V88a6,6,0,0,0,12,0V54H88a6,6,0,0,0,0-12Z"},null,-1),vt=[pt],ft={key:4},mt=u("path",{d:"M216,48V88a8,8,0,0,1-16,0V56H168a8,8,0,0,1,0-16h40A8,8,0,0,1,216,48ZM88,200H56V168a8,8,0,0,0-16,0v40a8,8,0,0,0,8,8H88a8,8,0,0,0,0-16Zm120-40a8,8,0,0,0-8,8v32H168a8,8,0,0,0,0,16h40a8,8,0,0,0,8-8V168A8,8,0,0,0,208,160ZM88,40H48a8,8,0,0,0-8,8V88a8,8,0,0,0,16,0V56H88a8,8,0,0,0,0-16Z"},null,-1),gt=[mt],ht={key:5},yt=u("path",{d:"M212,48V88a4,4,0,0,1-8,0V52H168a4,4,0,0,1,0-8h40A4,4,0,0,1,212,48ZM88,204H52V168a4,4,0,0,0-8,0v40a4,4,0,0,0,4,4H88a4,4,0,0,0,0-8Zm120-40a4,4,0,0,0-4,4v36H168a4,4,0,0,0,0,8h40a4,4,0,0,0,4-4V168A4,4,0,0,0,208,164ZM88,44H48a4,4,0,0,0-4,4V88a4,4,0,0,0,8,0V52H88a4,4,0,0,0,0-8Z"},null,-1),bt=[yt],$t={name:"PhCornersOut"},Ht=W({...$t,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(H){const r=H,a=B("weight","regular"),k=B("size","1em"),p=B("color","currentColor"),d=B("mirrored",!1),i=b(()=>{var l;return(l=r.weight)!=null?l:a}),w=b(()=>{var l;return(l=r.size)!=null?l:k}),v=b(()=>{var l;return(l=r.color)!=null?l:p}),h=b(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:d?"scale(-1, 1)":void 0);return(l,Z)=>(t(),s("svg",ce({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:w.value,height:w.value,fill:v.value,transform:h.value},l.$attrs),[de(l.$slots,"default"),i.value==="bold"?(t(),s("g",at,lt)):i.value==="duotone"?(t(),s("g",nt,ut)):i.value==="fill"?(t(),s("g",it,dt)):i.value==="light"?(t(),s("g",ct,vt)):i.value==="regular"?(t(),s("g",ft,gt)):i.value==="thin"?(t(),s("g",ht,bt)):I("",!0)],16,et))}}),kt=["width","height","fill","transform"],Vt={key:0},wt=u("path",{d:"M228,160a12,12,0,0,1-12,12H40a12,12,0,0,1,0-24H216A12,12,0,0,1,228,160ZM40,108H216a12,12,0,0,0,0-24H40a12,12,0,0,0,0,24Z"},null,-1),Ct=[wt],_t={key:1},At=u("path",{d:"M216,56V200a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V56A16,16,0,0,1,56,40H200A16,16,0,0,1,216,56Z",opacity:"0.2"},null,-1),Zt=u("path",{d:"M224,160a8,8,0,0,1-8,8H40a8,8,0,0,1,0-16H216A8,8,0,0,1,224,160ZM40,104H216a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16Z"},null,-1),Mt=[At,Zt],St={key:2},It=u("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM184,160H72a8,8,0,0,1,0-16H184a8,8,0,0,1,0,16Zm0-48H72a8,8,0,0,1,0-16H184a8,8,0,0,1,0,16Z"},null,-1),Lt=[It],zt={key:3},Bt=u("path",{d:"M222,160a6,6,0,0,1-6,6H40a6,6,0,0,1,0-12H216A6,6,0,0,1,222,160ZM40,102H216a6,6,0,0,0,0-12H40a6,6,0,0,0,0,12Z"},null,-1),Tt=[Bt],Dt={key:4},xt=u("path",{d:"M224,160a8,8,0,0,1-8,8H40a8,8,0,0,1,0-16H216A8,8,0,0,1,224,160ZM40,104H216a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16Z"},null,-1),qt=[xt],Nt={key:5},Ut=u("path",{d:"M220,160a4,4,0,0,1-4,4H40a4,4,0,0,1,0-8H216A4,4,0,0,1,220,160ZM40,100H216a4,4,0,0,0,0-8H40a4,4,0,0,0,0,8Z"},null,-1),jt=[Ut],Ft={name:"PhEquals"},Rt=W({...Ft,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(H){const r=H,a=B("weight","regular"),k=B("size","1em"),p=B("color","currentColor"),d=B("mirrored",!1),i=b(()=>{var l;return(l=r.weight)!=null?l:a}),w=b(()=>{var l;return(l=r.size)!=null?l:k}),v=b(()=>{var l;return(l=r.color)!=null?l:p}),h=b(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:d?"scale(-1, 1)":void 0);return(l,Z)=>(t(),s("svg",ce({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:w.value,height:w.value,fill:v.value,transform:h.value},l.$attrs),[de(l.$slots,"default"),i.value==="bold"?(t(),s("g",Vt,Ct)):i.value==="duotone"?(t(),s("g",_t,Mt)):i.value==="fill"?(t(),s("g",St,Lt)):i.value==="light"?(t(),s("g",zt,Tt)):i.value==="regular"?(t(),s("g",Dt,qt)):i.value==="thin"?(t(),s("g",Nt,jt)):I("",!0)],16,kt))}}),Et=["width","height","fill","transform"],Kt={key:0},Pt=u("path",{d:"M87.5,151.52l64-64a12,12,0,0,1,17,17l-64,64a12,12,0,0,1-17-17Zm131-114a60.08,60.08,0,0,0-84.87,0L103.51,67.61a12,12,0,0,0,17,17l30.07-30.06a36,36,0,0,1,50.93,50.92L171.4,135.52a12,12,0,1,0,17,17l30.08-30.06A60.09,60.09,0,0,0,218.45,37.55ZM135.52,171.4l-30.07,30.08a36,36,0,0,1-50.92-50.93l30.06-30.07a12,12,0,0,0-17-17L37.55,133.58a60,60,0,0,0,84.88,84.87l30.06-30.07a12,12,0,0,0-17-17Z"},null,-1),Ot=[Pt],Wt={key:1},Gt=u("path",{d:"M209.94,113.94l-96,96a48,48,0,0,1-67.88-67.88l96-96a48,48,0,0,1,67.88,67.88Z",opacity:"0.2"},null,-1),Qt=u("path",{d:"M165.66,90.34a8,8,0,0,1,0,11.32l-64,64a8,8,0,0,1-11.32-11.32l64-64A8,8,0,0,1,165.66,90.34ZM215.6,40.4a56,56,0,0,0-79.2,0L106.34,70.45a8,8,0,0,0,11.32,11.32l30.06-30a40,40,0,0,1,56.57,56.56l-30.07,30.06a8,8,0,0,0,11.31,11.32L215.6,119.6a56,56,0,0,0,0-79.2ZM138.34,174.22l-30.06,30.06a40,40,0,1,1-56.56-56.57l30.05-30.05a8,8,0,0,0-11.32-11.32L40.4,136.4a56,56,0,0,0,79.2,79.2l30.06-30.07a8,8,0,0,0-11.32-11.31Z"},null,-1),Jt=[Gt,Qt],Xt={key:2},Yt=u("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM144.56,173.66l-21.45,21.45a44,44,0,0,1-62.22-62.22l21.45-21.46a8,8,0,0,1,11.32,11.31L72.2,144.2a28,28,0,0,0,39.6,39.6l21.45-21.46a8,8,0,0,1,11.31,11.32Zm-34.9-16a8,8,0,0,1-11.32-11.32l48-48a8,8,0,0,1,11.32,11.32Zm85.45-34.55-21.45,21.45a8,8,0,0,1-11.32-11.31L183.8,111.8a28,28,0,0,0-39.6-39.6L122.74,93.66a8,8,0,0,1-11.31-11.32l21.46-21.45a44,44,0,0,1,62.22,62.22Z"},null,-1),el=[Yt],al={key:3},tl=u("path",{d:"M164.25,91.75a6,6,0,0,1,0,8.49l-64,64a6,6,0,0,1-8.49-8.48l64-64A6,6,0,0,1,164.25,91.75ZM214.2,41.8a54.07,54.07,0,0,0-76.38,0L107.75,71.85a6,6,0,0,0,8.49,8.49l30.07-30.06a42,42,0,0,1,59.41,59.41l-30.08,30.07a6,6,0,1,0,8.49,8.49l30.07-30.07A54,54,0,0,0,214.2,41.8ZM139.76,175.64l-30.07,30.08a42,42,0,0,1-59.41-59.41l30.06-30.07a6,6,0,0,0-8.49-8.49l-30,30.07a54,54,0,0,0,76.38,76.39l30.07-30.08a6,6,0,0,0-8.49-8.49Z"},null,-1),ll=[tl],nl={key:4},ol=u("path",{d:"M165.66,90.34a8,8,0,0,1,0,11.32l-64,64a8,8,0,0,1-11.32-11.32l64-64A8,8,0,0,1,165.66,90.34ZM215.6,40.4a56,56,0,0,0-79.2,0L106.34,70.45a8,8,0,0,0,11.32,11.32l30.06-30a40,40,0,0,1,56.57,56.56l-30.07,30.06a8,8,0,0,0,11.31,11.32L215.6,119.6a56,56,0,0,0,0-79.2ZM138.34,174.22l-30.06,30.06a40,40,0,1,1-56.56-56.57l30.05-30.05a8,8,0,0,0-11.32-11.32L40.4,136.4a56,56,0,0,0,79.2,79.2l30.06-30.07a8,8,0,0,0-11.32-11.31Z"},null,-1),rl=[ol],ul={key:5},il=u("path",{d:"M162.84,93.16a4,4,0,0,1,0,5.66l-64,64a4,4,0,0,1-5.66-5.66l64-64A4,4,0,0,1,162.84,93.16Zm49.95-49.95a52.07,52.07,0,0,0-73.56,0L109.17,73.27a4,4,0,0,0,5.65,5.66l30.07-30.06a44,44,0,0,1,62.24,62.24l-30.07,30.06a4,4,0,0,0,5.66,5.66l30.07-30.06A52.07,52.07,0,0,0,212.79,43.21ZM141.17,177.06l-30.06,30.07a44,44,0,0,1-62.24-62.24l30.06-30.06a4,4,0,0,0-5.66-5.66L43.21,139.23a52,52,0,0,0,73.56,73.56l30.06-30.07a4,4,0,1,0-5.66-5.66Z"},null,-1),sl=[il],dl={name:"PhLinkSimple"},We=W({...dl,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(H){const r=H,a=B("weight","regular"),k=B("size","1em"),p=B("color","currentColor"),d=B("mirrored",!1),i=b(()=>{var l;return(l=r.weight)!=null?l:a}),w=b(()=>{var l;return(l=r.size)!=null?l:k}),v=b(()=>{var l;return(l=r.color)!=null?l:p}),h=b(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:d?"scale(-1, 1)":void 0);return(l,Z)=>(t(),s("svg",ce({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:w.value,height:w.value,fill:v.value,transform:h.value},l.$attrs),[de(l.$slots,"default"),i.value==="bold"?(t(),s("g",Kt,Ot)):i.value==="duotone"?(t(),s("g",Wt,Jt)):i.value==="fill"?(t(),s("g",Xt,el)):i.value==="light"?(t(),s("g",al,ll)):i.value==="regular"?(t(),s("g",nl,rl)):i.value==="thin"?(t(),s("g",ul,sl)):I("",!0)],16,Et))}}),cl=["width","height","fill","transform"],pl={key:0},vl=u("path",{d:"M232.49,55.51l-32-32a12,12,0,0,0-17,0l-96,96A12,12,0,0,0,84,128v32a12,12,0,0,0,12,12h32a12,12,0,0,0,8.49-3.51l96-96A12,12,0,0,0,232.49,55.51ZM192,49l15,15L196,75,181,60Zm-69,99H108V133l56-56,15,15Zm105-7.43V208a20,20,0,0,1-20,20H48a20,20,0,0,1-20-20V48A20,20,0,0,1,48,28h67.43a12,12,0,0,1,0,24H52V204H204V140.57a12,12,0,0,1,24,0Z"},null,-1),fl=[vl],ml={key:1},gl=u("path",{d:"M200,88l-72,72H96V128l72-72Z",opacity:"0.2"},null,-1),hl=u("path",{d:"M229.66,58.34l-32-32a8,8,0,0,0-11.32,0l-96,96A8,8,0,0,0,88,128v32a8,8,0,0,0,8,8h32a8,8,0,0,0,5.66-2.34l96-96A8,8,0,0,0,229.66,58.34ZM124.69,152H104V131.31l64-64L188.69,88ZM200,76.69,179.31,56,192,43.31,212.69,64ZM224,128v80a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32h80a8,8,0,0,1,0,16H48V208H208V128a8,8,0,0,1,16,0Z"},null,-1),yl=[gl,hl],bl={key:2},$l=u("path",{d:"M224,128v80a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32h80a8,8,0,0,1,0,16H48V208H208V128a8,8,0,0,1,16,0Zm5.66-58.34-96,96A8,8,0,0,1,128,168H96a8,8,0,0,1-8-8V128a8,8,0,0,1,2.34-5.66l96-96a8,8,0,0,1,11.32,0l32,32A8,8,0,0,1,229.66,69.66Zm-17-5.66L192,43.31,179.31,56,200,76.69Z"},null,-1),Hl=[$l],kl={key:3},Vl=u("path",{d:"M228.24,59.76l-32-32a6,6,0,0,0-8.48,0l-96,96A6,6,0,0,0,90,128v32a6,6,0,0,0,6,6h32a6,6,0,0,0,4.24-1.76l96-96A6,6,0,0,0,228.24,59.76ZM125.51,154H102V130.49l66-66L191.51,88ZM200,79.51,176.49,56,192,40.49,215.51,64ZM222,128v80a14,14,0,0,1-14,14H48a14,14,0,0,1-14-14V48A14,14,0,0,1,48,34h80a6,6,0,0,1,0,12H48a2,2,0,0,0-2,2V208a2,2,0,0,0,2,2H208a2,2,0,0,0,2-2V128a6,6,0,0,1,12,0Z"},null,-1),wl=[Vl],Cl={key:4},_l=u("path",{d:"M229.66,58.34l-32-32a8,8,0,0,0-11.32,0l-96,96A8,8,0,0,0,88,128v32a8,8,0,0,0,8,8h32a8,8,0,0,0,5.66-2.34l96-96A8,8,0,0,0,229.66,58.34ZM124.69,152H104V131.31l64-64L188.69,88ZM200,76.69,179.31,56,192,43.31,212.69,64ZM224,128v80a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32h80a8,8,0,0,1,0,16H48V208H208V128a8,8,0,0,1,16,0Z"},null,-1),Al=[_l],Zl={key:5},Ml=u("path",{d:"M226.83,61.17l-32-32a4,4,0,0,0-5.66,0l-96,96A4,4,0,0,0,92,128v32a4,4,0,0,0,4,4h32a4,4,0,0,0,2.83-1.17l96-96A4,4,0,0,0,226.83,61.17ZM126.34,156H100V129.66l68-68L194.34,88ZM200,82.34,173.66,56,192,37.66,218.34,64ZM220,128v80a12,12,0,0,1-12,12H48a12,12,0,0,1-12-12V48A12,12,0,0,1,48,36h80a4,4,0,0,1,0,8H48a4,4,0,0,0-4,4V208a4,4,0,0,0,4,4H208a4,4,0,0,0,4-4V128a4,4,0,0,1,8,0Z"},null,-1),Sl=[Ml],Il={name:"PhNotePencil"},Ll=W({...Il,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(H){const r=H,a=B("weight","regular"),k=B("size","1em"),p=B("color","currentColor"),d=B("mirrored",!1),i=b(()=>{var l;return(l=r.weight)!=null?l:a}),w=b(()=>{var l;return(l=r.size)!=null?l:k}),v=b(()=>{var l;return(l=r.color)!=null?l:p}),h=b(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:d?"scale(-1, 1)":void 0);return(l,Z)=>(t(),s("svg",ce({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:w.value,height:w.value,fill:v.value,transform:h.value},l.$attrs),[de(l.$slots,"default"),i.value==="bold"?(t(),s("g",pl,fl)):i.value==="duotone"?(t(),s("g",ml,yl)):i.value==="fill"?(t(),s("g",bl,Hl)):i.value==="light"?(t(),s("g",kl,wl)):i.value==="regular"?(t(),s("g",Cl,Al)):i.value==="thin"?(t(),s("g",Zl,Sl)):I("",!0)],16,cl))}}),zl=["width","height","fill","transform"],Bl={key:0},Tl=u("path",{d:"M208,112H48a20,20,0,0,0-20,20v24a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V132A20,20,0,0,0,208,112Zm-4,40H52V136H204Zm4-116H48A20,20,0,0,0,28,56V80a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V56A20,20,0,0,0,208,36Zm-4,40H52V60H204ZM160,220a12,12,0,0,1-12,12h-8v8a12,12,0,0,1-24,0v-8h-8a12,12,0,0,1,0-24h8v-8a12,12,0,0,1,24,0v8h8A12,12,0,0,1,160,220Z"},null,-1),Dl=[Tl],xl={key:1},ql=u("path",{d:"M216,128v24a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V128a8,8,0,0,1,8-8H208A8,8,0,0,1,216,128Zm-8-80H48a8,8,0,0,0-8,8V80a8,8,0,0,0,8,8H208a8,8,0,0,0,8-8V56A8,8,0,0,0,208,48Z",opacity:"0.2"},null,-1),Nl=u("path",{d:"M208,112H48a16,16,0,0,0-16,16v24a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V128A16,16,0,0,0,208,112Zm0,40H48V128H208v24Zm0-112H48A16,16,0,0,0,32,56V80A16,16,0,0,0,48,96H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40Zm0,40H48V56H208V80ZM160,216a8,8,0,0,1-8,8H136v16a8,8,0,0,1-16,0V224H104a8,8,0,0,1,0-16h16V192a8,8,0,0,1,16,0v16h16A8,8,0,0,1,160,216Z"},null,-1),Ul=[ql,Nl],jl={key:2},Fl=u("path",{d:"M224,128v24a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V128a16,16,0,0,1,16-16H208A16,16,0,0,1,224,128ZM208,40H48A16,16,0,0,0,32,56V80A16,16,0,0,0,48,96H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40ZM152,208H136V192a8,8,0,0,0-16,0v16H104a8,8,0,0,0,0,16h16v16a8,8,0,0,0,16,0V224h16a8,8,0,0,0,0-16Z"},null,-1),Rl=[Fl],El={key:3},Kl=u("path",{d:"M208,114H48a14,14,0,0,0-14,14v24a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V128A14,14,0,0,0,208,114Zm2,38a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V128a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2ZM208,42H48A14,14,0,0,0,34,56V80A14,14,0,0,0,48,94H208a14,14,0,0,0,14-14V56A14,14,0,0,0,208,42Zm2,38a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V56a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2ZM158,216a6,6,0,0,1-6,6H134v18a6,6,0,0,1-12,0V222H104a6,6,0,0,1,0-12h18V192a6,6,0,0,1,12,0v18h18A6,6,0,0,1,158,216Z"},null,-1),Pl=[Kl],Ol={key:4},Wl=u("path",{d:"M208,112H48a16,16,0,0,0-16,16v24a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V128A16,16,0,0,0,208,112Zm0,40H48V128H208v24Zm0-112H48A16,16,0,0,0,32,56V80A16,16,0,0,0,48,96H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40Zm0,40H48V56H208V80ZM160,216a8,8,0,0,1-8,8H136v16a8,8,0,0,1-16,0V224H104a8,8,0,0,1,0-16h16V192a8,8,0,0,1,16,0v16h16A8,8,0,0,1,160,216Z"},null,-1),Gl=[Wl],Ql={key:5},Jl=u("path",{d:"M208,116H48a12,12,0,0,0-12,12v24a12,12,0,0,0,12,12H208a12,12,0,0,0,12-12V128A12,12,0,0,0,208,116Zm4,36a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V128a4,4,0,0,1,4-4H208a4,4,0,0,1,4,4ZM208,44H48A12,12,0,0,0,36,56V80A12,12,0,0,0,48,92H208a12,12,0,0,0,12-12V56A12,12,0,0,0,208,44Zm4,36a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V56a4,4,0,0,1,4-4H208a4,4,0,0,1,4,4ZM156,216a4,4,0,0,1-4,4H132v20a4,4,0,0,1-8,0V220H104a4,4,0,0,1,0-8h20V192a4,4,0,0,1,8,0v20h20A4,4,0,0,1,156,216Z"},null,-1),Xl=[Jl],Yl={name:"PhRowsPlusBottom"},Ge=W({...Yl,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(H){const r=H,a=B("weight","regular"),k=B("size","1em"),p=B("color","currentColor"),d=B("mirrored",!1),i=b(()=>{var l;return(l=r.weight)!=null?l:a}),w=b(()=>{var l;return(l=r.size)!=null?l:k}),v=b(()=>{var l;return(l=r.color)!=null?l:p}),h=b(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:d?"scale(-1, 1)":void 0);return(l,Z)=>(t(),s("svg",ce({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:w.value,height:w.value,fill:v.value,transform:h.value},l.$attrs),[de(l.$slots,"default"),i.value==="bold"?(t(),s("g",Bl,Dl)):i.value==="duotone"?(t(),s("g",xl,Ul)):i.value==="fill"?(t(),s("g",jl,Rl)):i.value==="light"?(t(),s("g",El,Pl)):i.value==="regular"?(t(),s("g",Ol,Gl)):i.value==="thin"?(t(),s("g",Ql,Xl)):I("",!0)],16,zl))}}),e1={class:"related-tables"},a1={class:"related-section"},t1={class:"relation-info"},l1={class:"related-tables"},n1={class:"related-section"},o1={class:"relation-info"},r1=W({__name:"RelatedTables",props:{table:{}},setup(H){const r=H,a=fe(),k=Se(),p=a.params.projectId,{tables:d,loading:i}=L0(p),w=b(()=>{const Z=r.table.getColumns().find($=>$.primaryKey);return(Z==null?void 0:Z.name)||"id"}),v=b(()=>{if(!d.value.length)return{referencingTables:[],referencedTables:[]};const Z=d.value.filter(g=>g.id!==r.table.id),$=[];for(const g of Z){const x=g.getColumns().filter(T=>T.foreignKey);for(const T of x){if(!T.foreignKey)continue;let U;for(const Q of d.value)if(U=Q.getColumns().find(S=>{var A;return S.id===((A=T.foreignKey)==null?void 0:A.columnId)}),U)break;(U==null?void 0:U.tableId)===r.table.id&&$.push({table:g,column:T})}}const M=[],L=r.table.getColumns().filter(g=>g.foreignKey);for(const g of L){if(!g.foreignKey)continue;let x,T;for(const U of d.value)if(T=U.getColumns().find(Q=>{var S;return Q.id===((S=g.foreignKey)==null?void 0:S.columnId)}),T){x=U;break}x&&T&&M.push({table:x,sourceColumn:g,targetColumn:T})}return{referencingTables:$,referencedTables:M}}),h=b(()=>{const Z=new Map;for(const $ of v.value.referencingTables)Z.has($.table.id)||Z.set($.table.id,{tableId:$.table.id,tableName:$.table.name,description:`${$.column.name} \u2192 ${w.value}`});for(const $ of v.value.referencedTables)Z.has($.table.id)||Z.set($.table.id,{tableId:$.table.id,tableName:$.table.name,description:`${$.sourceColumn.name} \u2192 ${$.targetColumn.name}`});return Array.from(Z.values())}),l=Z=>{k.push({name:"tableEditor",params:{projectId:p,tableId:Z}})};return(Z,$)=>e(i)?(t(),C(Ze,{key:0,"full-width":""},{default:n(()=>[u("div",e1,[u("div",a1,[o(e(v0),null,{default:n(()=>[E("Related tables")]),_:1}),o(e(P),{gap:"middle",wrap:"wrap"},{default:n(()=>[(t(),s(ae,null,le(3,M=>o(e(Pe),{key:M,class:"related-table-card loading-card"},{title:n(()=>[o(e(P),{justify:"space-between",align:"center"},{default:n(()=>[o(e(Oe),{active:!0,paragraph:!1,title:{width:"120px"}}),o(e(I0),{size:16,style:{opacity:"0.3"}})]),_:1})]),default:n(()=>[u("p",t1,[o(e(We),{size:16,style:{opacity:"0.3"}}),o(e(Oe),{active:!0,paragraph:!1,title:{width:"150px"}})])]),_:2},1024)),64))]),_:1})])])]),_:1})):h.value.length>0?(t(),C(Ze,{key:1,"full-width":""},{default:n(()=>[u("div",l1,[u("div",n1,[u("h3",null,"Related tables ("+G(h.value.length)+")",1),o(e(P),{gap:"middle",wrap:"wrap"},{default:n(()=>[(t(!0),s(ae,null,le(h.value,M=>(t(),C(e(Pe),{key:M.tableId,title:M.tableName,class:"related-table-card",hoverable:"",onClick:L=>l(M.tableId)},{default:n(()=>[u("p",o1,[o(e(We),{size:16}),u("span",null,G(M.description),1)])]),_:2},1032,["title","onClick"]))),128))]),_:1})])])]),_:1})):I("",!0)}});const u1=Ie(r1,[["__scopeId","data-v-d16c88ca"]]),i1=W({__name:"AddData",props:{open:{type:Boolean},editableItem:{},table:{},loading:{type:Boolean}},emits:["save","close","update-nullable","record-change"],setup(H,{emit:r}){return(a,k)=>(t(),C(e(Be),{title:"Data",width:720,open:a.open,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:k[2]||(k[2]=p=>r("close"))},{extra:n(()=>[o(e(De),null,{default:n(()=>[o(e(ee),{onClick:k[0]||(k[0]=p=>r("close"))},{default:n(()=>[E("Cancel")]),_:1}),o(e(ee),{type:"primary",loading:a.loading,onClick:k[1]||(k[1]=p=>r("save"))},{default:n(()=>[E("Save")]),_:1},8,["loading"])]),_:1})]),default:n(()=>[o(e(Le),{model:a.editableItem,layout:"vertical"},{default:n(()=>[(t(!0),s(ae,null,le(a.table.getUnprotectedColumns(),p=>(t(),C(e(J),{key:p.id,label:p.name,required:!p.nullable},{default:n(()=>[a.editableItem?(t(),C(e(se),{key:0,placeholder:p.type,value:a.editableItem[p.name],disabled:a.editableItem[p.name]===null,"onUpdate:value":d=>r("record-change",p.name,d)},f0({_:2},[p.nullable?{name:"addonAfter",fn:n(()=>[o(e(m0),{checked:a.editableItem[p.name]===null,"onUpdate:checked":d=>r("update-nullable",p.name,d)},{default:n(()=>[E(" NULL ")]),_:2},1032,["checked","onUpdate:checked"])]),key:"0"}:void 0]),1032,["placeholder","value","disabled","onUpdate:value"])):I("",!0)]),_:2},1032,["label","required"]))),128))]),_:1},8,["model"])]),_:1},8,["open"]))}}),l0=(H,r)=>r.includes(H)?{status:"error",help:"There already is a column with this name in the table"}:{status:""},s1=W({__name:"NewColumn",props:{open:{type:Boolean},table:{}},emits:["created","cancel"],setup(H,{emit:r}){const a=H,p=fe().params.projectId,d=b(()=>{var A;return((A=a.table)==null?void 0:A.getColumns().map(c=>c.name))||[]}),i=b(()=>l0(v.value.name,d.value)),w={name:"",type:null,default:"",nullable:!0,unique:!1},v=N(w),h=()=>{v.value={...w}},l=N([{value:"reference",label:"reference",isLeaf:!1},...e0.map(A=>({value:A,label:A,isLeaf:!0}))]),Z=A=>{if(!A)return;const c=A[A.length-1];switch(A.length){case 0:return;case 1:c.loading=!0,ne.list(p).then(F=>{c.children=F.map(X=>({value:X.id,label:X.name,isLeaf:!1})),c.loading=!1});return;case 2:c.loading=!0,ne.get(p,c.value).then(F=>{c.children=F.getColumns().map(X=>({type:X.type,value:X.id,label:X.name,isLeaf:!0})),c.loading=!1});return}},$=(A,c)=>{if(!!A){if(A.length===1){v.value.type=A[0],v.value.foreignKey=void 0;return}if(A.length===3){const F=c[c.length-1];v.value.type=F.type,v.value.foreignKey={columnId:F.value}}}},M=A=>{const c=A.selectedOptions;return c?c.length===1?c[0].label:c.length===3?`reference to ${c[1].label}(${c[2].label})`:"":"Select type"},g=N({...{status:"success",message:"",fakeLoading:!1}}),x=()=>{g.value.fakeLoading=!0,U()};he(()=>v.value.type,()=>{!v.value.type||(v.value.default=Z0[v.value.type]||"",x())});const U=be.exports.debounce(async()=>{if(!v.value.default){g.value.status="success",g.value.message="",g.value.fakeLoading=!1;return}const A=`select (${v.value.default})::${v.value.type} `;Te.executeQuery(p,A,[]).then(c=>{g.value.status=c.errors.length>0?"error":"success",g.value.message=c.errors[0]||"",g.value.fakeLoading=!1})},500);function Q(){r("cancel")}async function S(){if(!!a.table&&!(!v.value.name||!v.value.type))try{await a.table.addColumn(v.value),h(),r("created")}catch(A){A instanceof Error&&He("Database error",A.message)}}return(A,c)=>(t(),C(e(Be),{title:"New column",width:720,open:a.open,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:Q},{extra:n(()=>[o(e(De),null,{default:n(()=>[o(e(ee),{onClick:Q},{default:n(()=>[E("Cancel")]),_:1}),o(e(ee),{type:"primary",onClick:S},{default:n(()=>[E("Save")]),_:1})]),_:1})]),default:n(()=>[o(e(Le),{model:v.value,layout:"vertical"},{default:n(()=>[o(e(J),{key:"name",label:"Name",required:"","validate-status":i.value.status,help:i.value.help},{default:n(()=>[o(e(se),{value:v.value.name,"onUpdate:value":c[0]||(c[0]=F=>v.value.name=F)},null,8,["value"])]),_:1},8,["validate-status","help"]),o(e(J),{key:"type",label:"Type",required:""},{default:n(()=>[o(e(t0),{options:l.value,"load-data":Z,"display-render":M,"allow-clear":!1,onChange:$},null,8,["options"])]),_:1}),o(e(J),{key:"default-value",label:"Default value","validate-status":g.value.status,help:g.value.message},{default:n(()=>[o(e(se),{value:v.value.default,"onUpdate:value":c[1]||(c[1]=F=>v.value.default=F),placeholder:"NULL",onInput:x},{suffix:n(()=>[g.value.fakeLoading?(t(),C(e($e),{key:0})):I("",!0),!g.value.fakeLoading&&g.value.status==="success"?(t(),C(e(Xe),{key:1,size:"18"})):I("",!0),!g.value.fakeLoading&&g.value.status==="error"?(t(),C(e(a0),{key:2,size:"18"})):I("",!0)]),_:1},8,["value"])]),_:1},8,["validate-status","help"]),o(e(J),{key:"nullable",label:"Nullable"},{default:n(()=>[o(e(ge),{checked:v.value.nullable,"onUpdate:checked":c[2]||(c[2]=F=>v.value.nullable=F)},null,8,["checked"])]),_:1}),o(e(J),{key:"unique",label:"Unique"},{default:n(()=>[o(e(ge),{checked:v.value.unique,"onUpdate:checked":c[3]||(c[3]=F=>v.value.unique=F)},null,8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]))}}),d1={class:"icon"},c1=W({__name:"OrderByIcon",props:{column:{},orderBy:{}},emits:["reorder"],setup(H,{emit:r}){return(a,k)=>{var p,d,i;return t(),s("div",d1,[((p=a.orderBy)==null?void 0:p.column)!==String(a.column.title)?(t(),C(e(B0),{key:0,size:"16",onClick:k[0]||(k[0]=w=>r("reorder",String(a.column.title)))})):I("",!0),((d=a.orderBy)==null?void 0:d.column)===String(a.column.title)&&a.orderBy.direction==="asc"?(t(),C(e(sa),{key:1,size:"16",onClick:k[1]||(k[1]=w=>r("reorder",String(a.column.title)))})):I("",!0),((i=a.orderBy)==null?void 0:i.column)===String(a.column.title)&&a.orderBy.direction==="desc"?(t(),C(e(T0),{key:2,size:"16",onClick:k[2]||(k[2]=w=>r("reorder",String(a.column.title)))})):I("",!0)])}}});const Qe=Ie(c1,[["__scopeId","data-v-6ae5cef6"]]);function Je(H){return`"${H.replace(/"/g,'""')}"`}function p1(H){return H==null?"NULL":`'${String(H).replace(/'/g,"''")}'`}function v1(H,r){if(H.type==="search")return!H.q||H.q.trim()==="","";if(H.type==="and"){const a=H.conditions.filter(d=>d.value!==""&&d.value!==null);if(a.length===0)return"";const k=a.map(d=>{const i=Je(d.field),w=p1(d.value);return`${i} = ${w}`});return`SELECT * FROM ${Je(r)} WHERE ${k.join(" AND ")}`}return""}function f1(H,r){const a=N(r||{type:"search",q:""}),k=b(()=>H.value.getColumns().filter(M=>a.value.type==="and"&&!a.value.conditions.some(L=>L.field===M.name))),p=b(()=>H.value.getColumns().filter(M=>a.value.type==="and"&&!a.value.conditions.some(L=>L.field===M.name)));function d(){a.value={type:"and",conditions:[{type:"eq",field:"id",value:""}]}}function i(M){M==="search"?a.value={type:"search",q:""}:d()}function w(M){a.value.type==="and"&&a.value.conditions.push({type:"eq",field:String(M),value:""})}function v(M){a.value.type==="and"&&(a.value.conditions=a.value.conditions.filter(L=>L.field!==M))}function h(M){a.value.type==="search"&&(a.value={type:"search",q:M})}function l(M){if(a.value.type!=="and")return;const L=a.value.conditions.find(g=>g.field===M);L&&(L.field=M)}function Z(M,L){if(a.value.type!=="and")return;const g=a.value.conditions.find(x=>x.field===M);g&&(g.value=L)}function $(){return v1(a.value,H.value.name)}return{searchValue:a,filteredColumns:k,nonFilteredColumns:p,changeSearchType:i,addCondition:w,removeCondition:v,updateSearch:h,updateConditionField:l,updateConditionValue:Z,getSqlQuery:$}}const m1=W({__name:"TableFilter",props:{search:{},table:{},data:{}},emits:["update:search"],setup(H,{emit:r}){const a=H,k=fe(),p=b(()=>a.table),{searchValue:d,filteredColumns:i,nonFilteredColumns:w,changeSearchType:v,addCondition:h,removeCondition:l,updateSearch:Z,updateConditionField:$,updateConditionValue:M,getSqlQuery:L}=f1(p,a.search),g=[{label:"Search",value:"search"},{label:"Advanced",value:"and"}];function x(c){v(c),r("update:search",d.value)}function T(c){h(String(c)),r("update:search",d.value)}function U(c){l(c),r("update:search",d.value)}function Q(c){Z(c),r("update:search",d.value)}function S(c){$(c),r("update:search",d.value)}const A=(c,F)=>{M(c,F),r("update:search",d.value)};return he(()=>a.search,c=>{d.value=c},{deep:!0}),(c,F)=>{const X=ze("RouterLink");return t(),C(e(P),{vertical:"",align:"start",gap:"small"},{default:n(()=>[o(e(P),{align:"center",justify:"space-between",style:{width:"100%"}},{default:n(()=>[o(e(_0),{options:g,value:e(d).type,"onUpdate:value":x},null,8,["value"]),e(d).type==="and"?(t(),C(X,{key:0,to:{name:"sql",params:{projectId:e(k).params.projectId},query:{filter:e(L)()}}},{default:n(()=>[o(ie,{type:"text",underline:""},{default:n(()=>[E("Edit as SQL")]),_:1})]),_:1},8,["to"])):I("",!0)]),_:1}),e(d).type==="search"?(t(),C(e(P),{key:0},{default:n(()=>[o(e(g0),{value:e(d).q,"onUpdate:value":Q},null,8,["value"])]),_:1})):e(d).type==="and"?(t(),C(e(P),{key:1,vertical:"",gap:"small"},{default:n(()=>[(t(!0),s(ae,null,le(e(d).conditions,R=>(t(),C(e(P),{key:R.field,gap:"large",align:"center"},{default:n(()=>[o(e(Ae),{value:R.field,"onUpdate:value":[O=>R.field=O,O=>S(R.field)],style:{width:"120px"}},{default:n(()=>[(t(!0),s(ae,null,le(e(i),O=>(t(),C(e(je),{key:O.id,value:O.name},{default:n(()=>[E(G(O.name),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["value","onUpdate:value"]),o(e(Rt)),o(e(se),{value:R.value,"onUpdate:value":[O=>R.value=O,O=>A(R.field,O)],style:{width:"120px"}},null,8,["value","onUpdate:value"]),o(e(h0),{style:{cursor:"pointer"},onClick:O=>U(R.field)},null,8,["onClick"])]),_:2},1024))),128)),e(w)[0]?(t(),C(e(P),{key:0,justify:"space-between"},{default:n(()=>[o(e(Ae),{style:{width:"120px"},value:"","onUpdate:value":T},{default:n(()=>[(t(!0),s(ae,null,le(e(w),R=>(t(),C(e(je),{key:R.id,value:R.name},{default:n(()=>[E(G(R.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})):I("",!0)]),_:1})):I("",!0)]),_:1})}}}),g1={class:"twin-container"},h1={class:"fullwidth-input"},y1={class:"fullwidth-input"},b1={class:"using-container"},$1={class:"fullwidth-input"},H1=W({__name:"UpdateColumn",props:{open:{type:Boolean},table:{},column:{}},emits:["updated","cancel"],setup(H,{emit:r}){const a=H,p=fe().params.projectId,d=N(a.column.type);Ye(async()=>{if(!a.column.foreignKey)return;d.value="loading...";const f=await ne.fromColumnId(p,a.column.foreignKey.columnId),y=f.getColumn(a.column.foreignKey.columnId);d.value=`reference to ${f.name}(${y.name})`});const i=b(()=>{var f;return((f=a.table)==null?void 0:f.getColumns().map(y=>y.record.initialState.name))||[]}),w=b(()=>a.column.name===a.column.record.initialState.name?{status:"",help:""}:l0(a.column.name,i.value)),{result:v,loading:h}=Me(async()=>a.table.select({},10,0).then(({total:f})=>f));function l(){a.column.record.resetChanges(),r("cancel")}const $=N({status:"success",message:"",fakeLoading:!1}),M=()=>{$.value.fakeLoading=!0,L()},L=be.exports.debounce(async()=>{if(!a.column.default){$.value.status="success",$.value.message="",$.value.fakeLoading=!1;return}const f=`select (${a.column.default})::${a.column.type} `,y=await Te.executeQuery(p,f,[]);$.value.status=y.errors.length>0?"error":"success",$.value.message=y.errors[0]||"",$.value.fakeLoading=!1},500),g=N([{value:"reference",label:"reference",isLeaf:!1},...e0.filter(f=>f!==a.column.type).map(f=>({value:f,label:f,isLeaf:!0}))]),x=f=>{if(!f)return;const y=f[f.length-1];switch(f.length){case 0:return;case 1:y.loading=!0,ne.list(p).then(q=>{y.children=q.map(ue=>({value:ue.id,label:ue.name,isLeaf:!1})),y.loading=!1});return;case 2:y.loading=!0,ne.get(p,y.value).then(q=>{y.children=q.getColumns().map(ue=>({type:ue.type,value:ue.id,label:ue.name,isLeaf:!0})),y.loading=!1});return}},T=f=>{const y=f.selectedOptions;return y?y.length===1?y[0].label:y.length===3?`reference to ${y[1].label}(${y[2].label})`:"":"Select type"},U=(f,y)=>{if(!!f){if(f.length===1){a.column.type=f[0],a.column.foreignKey=null;return}if(f.length===3){if(a.column.foreignKey&&a.column.foreignKey.columnId===f[2])return;const q=y[y.length-1];a.column.type=q.type,a.column.foreignKey={columnId:q.value}}}};async function Q(f){await q0("Are you sure you want to delete this column and all its data?")&&await S(f)}async function S(f){var y,q;await((q=(y=a.table)==null?void 0:y.getColumn(f))==null?void 0:q.delete()),r("updated")}const A=()=>v.value===0||h.value?!1:a.column.record.hasChangesDeep("type"),c=N({type:"default"}),F=()=>{a.column.type=a.column.record.initialState.type,c.value={type:"default"}};function X(f,y){return y==="varchar"||f==="int"&&y==="boolean"||f==="boolean"&&y==="int"}he(()=>a.column.type,()=>{M(),O.value||(c.value={type:"user-defined",using:pe.value,mandatory:!0})});const O=b(()=>c.value.type==="default"&&X(a.column.record.initialState.type,a.column.type)),ye=b(()=>!X(a.column.record.initialState.type,a.column.type));function oe(f){f?c.value={type:"default"}:c.value={type:"user-defined",using:pe.value,mandatory:!1}}function ke(f){if(c.value.type==="default")throw new Error("Can't change using when using default casting");c.value.using=f!=null?f:""}const re=()=>ye.value?!0:A()&&c.value.type==="user-defined",pe=b(()=>`${a.column.record.initialState.name}::${a.column.type}`);async function Ve(){if(!a.column)return;let f=c.value.type==="default"?pe.value:c.value.using;v.value===0&&(f=`${a.column.record.initialState.name}::text::${a.column.type}`);try{await a.column.update(f),r("updated")}catch(y){y instanceof Error&&He("Database error",y.message)}}return(f,y)=>(t(),C(e(Be),{title:"Edit column",width:720,open:f.open,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:l},{extra:n(()=>[o(e(De),null,{default:n(()=>[o(e(ee),{onClick:l},{default:n(()=>[E("Cancel")]),_:1}),o(e(ee),{type:"primary",onClick:Ve},{default:n(()=>[E("Save")]),_:1})]),_:1})]),footer:n(()=>[o(ie,{danger:"",onClick:y[7]||(y[7]=q=>Q(String(f.column.id)))},{default:n(()=>[E("Delete")]),_:1})]),default:n(()=>[o(e(Le),{model:f.column,layout:"vertical"},{default:n(()=>[o(e(J),{key:"name",label:"Name","validate-status":w.value.status,help:w.value.help},{default:n(()=>[o(e(se),{value:f.column.name,"onUpdate:value":y[0]||(y[0]=q=>f.column.name=q)},null,8,["value"])]),_:1},8,["validate-status","help"]),u("div",g1,[u("span",h1,[o(e(J),{key:"type",label:"Current Type"},{default:n(()=>[o(e(Ae),{value:d.value,"onUpdate:value":y[1]||(y[1]=q=>d.value=q),"default-active-first-option":"",disabled:""},null,8,["value"])]),_:1})]),o(e(D0),{class:"right-arrow"}),u("span",y1,[o(e(J),{key:"new-type",label:"New Type"},{default:n(()=>[o(e(t0),{options:g.value,"load-data":x,"display-render":T,"allow-clear":!0,onClear:F,onChange:U},null,8,["options"])]),_:1})])]),o(e(J),{key:"default-value",label:"Default value","validate-status":$.value.status,help:$.value.message},{default:n(()=>[o(e(se),{value:f.column.default,"onUpdate:value":y[2]||(y[2]=q=>f.column.default=q),placeholder:"NULL",onInput:M},{suffix:n(()=>[$.value.fakeLoading?(t(),C(e($e),{key:0,size:"small"})):I("",!0),!$.value.fakeLoading&&$.value.status==="success"?(t(),C(e(Xe),{key:1,size:18})):I("",!0),!$.value.fakeLoading&&$.value.status==="error"?(t(),C(e(a0),{key:2,size:18})):I("",!0)]),_:1},8,["value"])]),_:1},8,["validate-status","help"]),u("div",b1,[A()?(t(),C(e(J),{key:"default-casting",label:"Use default casting"},{default:n(()=>[o(e(ge),{checked:O.value,disabled:ye.value,"onUpdate:checked":y[3]||(y[3]=q=>oe(!!q))},null,8,["checked","disabled"])]),_:1})):I("",!0),u("span",$1,[A()?(t(),C(e(J),{key:"using",label:"Using"},{default:n(()=>[o(e(se),{value:c.value.type==="user-defined"?c.value.using:pe.value,disabled:!re(),onInput:y[4]||(y[4]=q=>ke(q.target.value))},null,8,["value","disabled"])]),_:1})):I("",!0)])]),o(e(P),null,{default:n(()=>[o(e(J),{key:"nullable",label:"Nullable"},{default:n(()=>[o(e(ge),{checked:f.column.nullable,"onUpdate:checked":y[5]||(y[5]=q=>f.column.nullable=q)},null,8,["checked"])]),_:1}),o(e(J),{key:"unique",label:"Unique"},{default:n(()=>[o(e(ge),{checked:f.column.unique,"onUpdate:checked":y[6]||(y[6]=q=>f.column.unique=q)},null,8,["checked"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]))}});const k1=Ie(H1,[["__scopeId","data-v-5f7e2cd2"]]),V1={style:{overflow:"hidden","white-space":"wrap"}},w1={key:1},C1={key:0,class:"table-row null"},_1={class:"foreign-key-popover"},A1={key:0,class:"popover-loading"},Z1={class:"field-label"},M1={class:"foreign-key-popover"},S1={key:0,class:"popover-loading"},I1={class:"field-label"},L1={class:"field-value"},z1={key:2,class:"foreign-key-error"},B1={key:1,class:"field-value"},T1={key:2,class:"foreign-key-error"},D1={class:"button-container"},x1={class:"button-container"},q1={class:"button-container"},N1={class:"button-container"},U1=W({__name:"TableData",props:{table:{},loading:{type:Boolean}},emits:["refresh"],setup(H,{emit:r}){var qe;const a=H,k=N(1),p=N(10),d=b(()=>{var m,V;return{total:(V=(m=oe.value)==null?void 0:m.total)!=null?V:0,current:k.value,pageSize:p.value,totalBoundaryShowSizeChanger:10,showSizeChanger:!0,pageSizeOptions:["10","25","50","100"],onChange:async(D,_)=>{k.value=D,p.value=_,await re()}}}),i=N([]),w=N(!1),v=N(null),h=N(null),l=N(!1),Z=N(null),$=fe(),M=Se(),L=N(typeof $.query.q=="string"?$.query.q:""),g=b(()=>{try{return JSON.parse($.query.where)}catch{return{}}}),x=N(Object.keys(g.value).length>0?{type:"and",conditions:Object.entries(g.value).reduce((m,[V,D])=>[...m,{type:"eq",field:V,value:D}],[])}:{type:"search",q:L.value}),T=b(()=>x.value.type==="search"?x.value.q:""),U=b(()=>x.value.type==="search"?{}:x.value.conditions.reduce((m,V)=>({...m,[V.field]:V.value}),{}));function Q(m){m.type==="search"?M.replace({query:{q:m.q}}):M.replace({query:{where:JSON.stringify(U.value)}}),k.value=1,re()}const S=N({type:"idle"});function A(){S.value={type:"idle"}}async function c(){A(),r("refresh")}he(()=>a.table,()=>{o0(),re()});function F(){S.value={type:"creating"}}const X=m=>{if(!a.table)throw new Error("Table not found");S.value={type:"editing",column:a.table.getColumn(m)}},R=N(null),O=m=>{var V;((V=R.value)==null?void 0:V.column)===m?R.value={column:m,direction:R.value.direction==="asc"?"desc":"asc"}:R.value={column:m,direction:"asc"},re()},ye=b(()=>{var m;return((m=oe.value)==null?void 0:m.rows.length)===1}),{result:oe,loading:ke,refetch:re}=Me(async()=>{const[{rows:m,total:V},D]=await Promise.all([a.table.select(U.value,(k.value-1)*p.value,p.value,T.value,R.value||void 0),Promise.all(a.table.getColumns().filter(_=>_.foreignKey).map(_=>ne.fromColumnId($.params.projectId,_.foreignKey.columnId).then(K=>[_.name,K])))]);return{rows:m,total:V,columns:D.reduce((_,[K,j])=>({..._,[K]:j}),{})}}),pe=(m,V)=>{var j,Y;const D=(j=a.table)==null?void 0:j.getColumns().find(z=>z.name===m);if(!D)return"";const _=(Y=oe.value)==null?void 0:Y.columns[D.name],K=_==null?void 0:_.getColumns().find(z=>{var te;return z.id===((te=D.foreignKey)==null?void 0:te.columnId)});return!_||!K?"":{name:"tableEditor",params:{projectId:$.params.projectId,tableId:_.id},query:{where:JSON.stringify({[K.name]:V})}}},Ve=async(m,V)=>{var D;w.value=!0,v.value=null,h.value=null;try{const _=(D=a.table)==null?void 0:D.getColumns().find(z=>z.name===m);if(!_||!_.foreignKey)return;const K=await Ke.fromID($.params.projectId,_.foreignKey.columnId),j=await ne.get($.params.projectId,K.tableId),Y=await j.select({[K.name]:V},0,1,"");Y.rows.length>0&&(v.value=Y.rows[0],h.value=j)}catch(_){console.error("Error loading foreign key data:",_)}finally{w.value=!1}},f=m=>{if(!h.value)return!1;const V=h.value.getColumns().find(D=>D.name===m);return!!(V!=null&&V.foreignKey)},y=async(m,V)=>{if(!!h.value){l.value=!0,Z.value=null;try{const D=h.value.getColumns().find(Y=>Y.name===m);if(!D||!D.foreignKey)return;const _=await Ke.fromID($.params.projectId,D.foreignKey.columnId),j=await(await ne.get($.params.projectId,_.tableId)).select({[_.name]:V},0,1,"");j.rows.length>0&&(Z.value=j.rows[0])}catch(D){console.error("Error loading nested foreign key data:",D)}finally{l.value=!1}}},q=(m,V)=>{S.value.type==="adding"&&(S.value.editableItem[m]=V)},ue=(m,V)=>{S.value.type==="adding"&&(S.value.editableItem[m]=V?null:"")},xe=()=>[...a.table.getColumns().map(m=>{var V;return{key:(V=m.id)!=null?V:"",title:m.name,dataIndex:m.name,width:220,resizable:!0,ellipsis:!1}}),{key:"action",title:"",fixed:"right",width:100,align:"center",resizable:!1,ellipsis:!1}],n0=xe(),ve=N(n0),o0=()=>ve.value=xe();function r0(m,V){ve.value=ve.value.map(D=>D.key===V.key?{...D,width:m}:D)}const we=b(()=>{var m;return((m=oe.value)==null?void 0:m.rows.map(V=>({key:V.id,...V})))||[]});let u0=y0((qe=a.table)==null?void 0:qe.getUnprotectedColumns().reduce((m,V)=>({...m,[V.name]:""}),{}));const Ce=N(!1);async function i0(){if(!(!a.table||!u0||S.value.type!=="adding")){Ce.value=!0;try{S.value.editableItem.id&&(typeof S.value.editableItem.id=="string"||typeof S.value.editableItem.id=="number")?await a.table.updateRow(S.value.editableItem.id.toString(),S.value.editableItem):await a.table.insertRow(S.value.editableItem),re(),A()}catch(m){m instanceof Error&&He("Database error",m.message)}finally{Ce.value=!1}}}const s0=async m=>{if(!(!oe.value||!oe.value.rows.find(V=>V.id===m)))try{await a.table.deleteRow(m),ye.value&&(k.value=Math.max(1,k.value-1)),re()}catch(V){V instanceof Error&&He("Database error",V.message)}},d0=m=>{var Y;const V=(Y=we.value)==null?void 0:Y.filter(z=>m===z.key)[0],D=a.table.getColumns(),_=D.map(z=>z.name),K=D.filter(z=>z.type==="json").map(z=>z.name),j=be.exports.pick(be.exports.cloneDeep(V),_);K.forEach(z=>{j[z]&&(j[z]=JSON.stringify(j[z]))}),S.value={type:"adding",editableItem:j}};return(m,V)=>{const D=ze("RouterLink");return t(),C(Ze,{"full-width":""},{default:n(()=>[o(e(P),{justify:"space-between",style:{"margin-bottom":"16px"},gap:"middle"},{default:n(()=>[o(m1,{search:x.value,"onUpdate:search":[V[0]||(V[0]=_=>x.value=_),Q],table:m.table,data:we.value},null,8,["search","table","data"]),o(e(P),{justify:"flex-end",gap:"middle"},{default:n(()=>[o(ie,{type:"primary",onClick:F},{default:n(()=>[o(e(Ia)),E("Create column ")]),_:1}),ve.value.length===3?(t(),C(e(me),{key:0,title:"Create your first column before adding data"},{default:n(()=>[o(ie,{disabled:!0,onClick:V[1]||(V[1]=_=>S.value={type:"adding",editableItem:{}})},{default:n(()=>[o(e(Ge)),E("Add data ")]),_:1})]),_:1})):(t(),C(ie,{key:1,onClick:V[2]||(V[2]=_=>S.value={type:"adding",editableItem:{}})},{default:n(()=>[o(e(Ge)),E("Add data ")]),_:1}))]),_:1})]),_:1}),o(e(k0),{columns:ve.value,"data-source":we.value,pagination:d.value,bordered:"",loading:e(ke)||m.loading,scroll:{x:1e3,y:720},size:"small",onResizeColumn:r0},{headerCell:n(({column:_})=>[_.title!=="id"&&_.title!=="created_at"&&_.key!=="action"?(t(),C(e(P),{key:0,align:"center",justify:"space-between",gap:"small"},{default:n(()=>[o(e(P),{style:{overflow:"hidden","white-space":"wrap"},align:"center",gap:"small"},{default:n(()=>[u("span",V1,G(_.title),1),o(e(P),null,{default:n(()=>[o(Qe,{column:_,"order-by":R.value,onReorder:O},null,8,["column","order-by"])]),_:2},1024)]),_:2},1024),o(ie,{type:"text",onClick:K=>X(String(_.key))},{default:n(()=>[o(e(z0),{size:"18"})]),_:2},1032,["onClick"])]),_:2},1024)):(t(),s("span",w1,[o(e(P),{align:"center",gap:"small"},{default:n(()=>[E(G(_.title)+" ",1),_.key!=="action"?(t(),C(Qe,{key:0,column:_,"order-by":R.value,onReorder:O},null,8,["column","order-by"])):I("",!0)]),_:2},1024)]))]),bodyCell:n(({column:_,text:K,record:j})=>{var Y;return[ve.value.map(z=>z.title).includes(_.dataIndex)?(t(),s(ae,{key:0},[K===null?(t(),s("div",C1,"NULL")):(Y=m.table.getColumns().find(z=>z.name===_.dataIndex))!=null&&Y.foreignKey?(t(),C(e(Fe),{key:1,trigger:["hover"],placement:"right",onMouseenter:z=>Ve(_.dataIndex,K)},{content:n(()=>[u("div",_1,[w.value?(t(),s("div",A1,[o(e($e),{size:"small"})])):v.value&&h.value?(t(!0),s(ae,{key:1},le(v.value,(z,te)=>(t(),s("div",{key:te,class:"foreign-key-field"},[u("div",Z1,G(te),1),f(te)&&z!==null?(t(),C(e(Fe),{key:0,trigger:["hover"],placement:"right",onMouseenter:_e=>y(te,z)},{content:n(()=>[u("div",M1,[l.value?(t(),s("div",S1,[o(e($e),{size:"small"})])):Z.value?(t(!0),s(ae,{key:1},le(Z.value,(_e,Ne)=>(t(),s("div",{key:Ne,class:"foreign-key-field"},[u("div",I1,G(Ne),1),u("div",L1,G(_e!==null?_e:""),1)]))),128)):(t(),s("div",z1,"Failed to load data"))])]),default:n(()=>[o(e(Re),{class:"nested-fk-tag",color:"blue"},{default:n(()=>[E(G(z),1)]),_:2},1024)]),_:2},1032,["onMouseenter"])):(t(),s("div",B1,G(z!==null?z:""),1))]))),128)):(t(),s("div",T1,"Failed to load data"))])]),default:n(()=>[o(e(Re),{color:"blue",class:"foreign-key-tag"},{default:n(()=>[o(D,{to:pe(_.dataIndex,K),target:"_blank",class:"foreign-key-link"},{default:n(()=>[E(G(K),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2},1032,["onMouseenter"])):(t(),s("div",{key:2,class:b0(["table-row",{expanded:i.value.includes(j.id)}])},G(K),3))],64)):I("",!0),_.key==="action"?(t(),C(e(P),{key:1,gap:"small",justify:"center"},{default:n(()=>[i.value.includes(j.id)?(t(),C(e(ee),{key:0,class:"icons",onClick:z=>i.value=i.value.filter(te=>te!==j.id)},{icon:n(()=>[o(e(me),{title:"Collapse"},{default:n(()=>[u("div",D1,[o(e(Ya),{size:15})])]),_:1})]),_:2},1032,["onClick"])):(t(),C(e(ee),{key:1,onClick:z=>i.value.push(j.id)},{icon:n(()=>[o(e(me),{title:"Expand"},{default:n(()=>[u("div",x1,[o(e(Ht),{size:15})])]),_:1})]),_:2},1032,["onClick"])),o(e(ee),{onClick:z=>d0(j.id)},{icon:n(()=>[o(e(me),{title:"Edit"},{default:n(()=>[u("div",q1,[o(e(x0),{size:15})])]),_:1})]),_:2},1032,["onClick"]),o(e($0),{title:"Sure to delete?",onConfirm:z=>s0(j.id)},{default:n(()=>[o(e(ee),null,{icon:n(()=>[o(e(me),{title:"Delete"},{default:n(()=>[u("div",N1,[o(e(H0),{size:15})])]),_:1})]),_:1})]),_:2},1032,["onConfirm"])]),_:2},1024)):I("",!0)]}),_:1},8,["columns","data-source","pagination","loading"]),S.value.type==="adding"?(t(),C(i1,{key:0,open:S.value.type==="adding",table:a.table,"editable-item":S.value.editableItem,loading:Ce.value,onUpdateNullable:ue,onRecordChange:q,onClose:A,onCancel:A,onSave:i0},null,8,["open","table","editable-item","loading"])):I("",!0),S.value.type==="creating"?(t(),C(s1,{key:1,open:S.value.type==="creating",table:a.table,onClose:A,onCancel:A,onCreated:c},null,8,["open","table"])):I("",!0),S.value.type==="editing"?(t(),C(k1,{key:2,open:S.value.type==="editing",column:S.value.column,table:m.table,onUpdated:c,onClose:A,onCancel:A},null,8,["open","column","table"])):I("",!0)]),_:1})}}});const j1={style:{"font-size":"16px"}},Cn=W({__name:"TableEditor",setup(H){const r=Se(),a=fe(),k=Ee(()=>{if(typeof a.params.tableId=="string")return a.params.tableId;throw new Error("tableId is not a string")}),p=Ee(()=>{if(typeof a.params.projectId=="string")return a.params.projectId;throw new Error("projectId is not a string")}),d=N(!1),i=p0(),w=()=>{var L;d.value=!1,(L=h.value)==null||L.table.save(),Z()},v=b(()=>h.value?h.value.table.name:"Loading..."),{result:h,loading:l,refetch:Z}=Me(()=>Promise.all([Te.get(p.value).then(async L=>{const g=await A0.get(L.organizationId),U=(await new M0().list(g.id)).find(Q=>Q.id===L.folderId);if(!U)throw new Error("Folder not found");return{project:L,organization:g,folder:U}}),ne.get(p.value,k.value)]).then(([{project:L,organization:g,folder:x},T])=>({project:L,organization:g,table:T,folder:x})));he([k,p],()=>{Z()});const $=b(()=>!l.value&&h.value?[{label:"My organizations",path:"/organizations"},{label:h.value.organization.name,path:`/organizations/${h.value.organization.id}`},{label:h.value.folder.name,path:`/organizations/${h.value.organization.id}#${h.value.folder.id}`},{label:h.value.project.name,path:`/projects/${h.value.project.id}/tables`}]:void 0);function M(){r.push({name:"tables",params:{projectId:p.value}})}return Ye(()=>{const L=Ue.subscribe("columnCreated",({tableId:g})=>{g===k.value&&Z()});V0(()=>{Ue.unsubscribe(L)})}),(L,g)=>{const x=ze("RouterLink");return t(),C(c0,{key:k.value},{navbar:n(()=>[o(e(j0),{style:{padding:"5px 25px",border:"1px solid #f0f0f0"},onBack:M},{title:n(()=>[o(e(P),{align:"center",gap:"small"},{default:n(()=>[u("span",j1,G(v.value),1),o(ie,{type:"text",onClick:g[0]||(g[0]=T=>d.value=!0)},{default:n(()=>[o(e(Ll),{size:"16"})]),_:1})]),_:1}),o(e(w0),{title:"Change table name",open:d.value,onCancel:g[2]||(g[2]=T=>d.value=!1),onOk:w},{default:n(()=>[e(h)?(t(),C(e(se),{key:0,value:e(h).table.name,"onUpdate:value":g[1]||(g[1]=T=>e(h).table.name=T)},null,8,["value"])):I("",!0)]),_:1},8,["open"])]),subTitle:n(()=>[$.value?(t(),C(e(N0),{key:0,style:{margin:"0px 20px"}},{default:n(()=>[(t(!0),s(ae,null,le($.value,(T,U)=>(t(),C(e(U0),{key:U},{default:n(()=>[o(x,{to:T.path},{default:n(()=>[E(G(T.label),1)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1})):I("",!0)]),extra:n(()=>[o(ie,{type:"link",onClick:g[3]||(g[3]=T=>e(i).toggle())},{default:n(()=>[o(e(C0)),E(" AI Assistant ")]),_:1})]),_:1})]),content:n(()=>[e(h)?(t(),C(U1,{key:0,loading:e(l),table:e(h).table,onRefresh:g[4]||(g[4]=T=>e(Z)())},null,8,["loading","table"])):I("",!0),e(h)?(t(),C(u1,{key:1,table:e(h).table},null,8,["table"])):I("",!0)]),chat:n(()=>[o(S0)]),_:1})}}});export{Cn as default};
//# sourceMappingURL=TableEditor.1db58aec.js.map
