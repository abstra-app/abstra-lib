import{r as R}from"./index.7c7360ac.js";import{u as g}from"./uuid.56b3860f.js";import{F as q,R as x}from"./broker.8c4a45e8.js";import{d as S,v as B,a2 as b,K as m,z as o,b as s,c,e as K,t as k,J as E,H as N,O,Q as T,x as d,q as F}from"./registerWidgets.ec5f13bb.js";import{D as L,m as C}from"./DashPlayer.6d843c9a.js";import{a as V}from"./asyncComputed.a732fa95.js";import{r as j,n as z}from"./runnerData.a0628bbf.js";import{L as A}from"./CircularLoading.d1fca724.js";import"./passwordlessManager.63aead33.js";import"./pubsub.6797664d.js";import"./icons.14df9356.js";import"./ActionButton.vue_vue_type_script_setup_true_lang.c276d4dc.js";import"./Passwordless.4d01172a.js";import"./executeJs.11dad51b.js";import"./PlayerNavbar.a1a224b2.js";import"./WidgetsFrame.0c11afd6.js";import"./colors.402f8f6f.js";import"./Modal.b5e3728f.js";import"./lottie.dc9d0ea3.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="d0a421d6-03a4-4aaa-8811-d29b4a0e8057",t._sentryDebugIdIdentifier="sentry-dbid-d0a421d6-03a4-4aaa-8811-d29b4a0e8057")}catch{}})();async function H(t){const e=await fetch(`/_api/${t}`);if(e.status==404)return null;if(!e.ok)throw new Error(await e.text());const{form:n,dash:i}=await e.json();return{form:n&&j(n),dash:i&&z(i)}}const p=t=>(O("data-v-ee57bae4"),t=t(),T(),t),J={key:0,class:"loading"},Q={key:1,class:"error"},$=p(()=>d("h1",null,"Oops! Something went wrong",-1)),G=p(()=>d("p",null,"An unknown error ocurred. Please try again or contact support.",-1)),M=[$,G],U={key:2,class:"form"},W={key:3,class:"dash-wrapper"},X={key:4,class:"error not-found"},Y=p(()=>d("h1",null,"Page not found",-1)),Z=p(()=>d("p",null,"The page you requested could not be found.",-1)),ee=[Y,Z],ae=S({__name:"Player",setup(t){const e=E(),n=N(),i=B({playerKey:g()}),_=({path:a})=>{n.push({name:"player",query:e.query,params:{path:a.split("/")}})},f=async()=>{i.playerKey=g()};b([()=>e.path,()=>e.query],()=>f());const{loading:w,result:r,error:D}=V(()=>{var a;return H((a=e.path.slice(1))!=null?a:"")}),y=m(()=>l.value?x.create({formPath:l.value.path}):null),l=m(()=>{var a,u;return(u=(a=r.value)==null?void 0:a.form)!=null?u:null}),h=m(()=>{var u,v;if(!((u=r.value)!=null&&u.dash))return null;const a=C((v=r.value)==null?void 0:v.dash);return a.onRedirect(({url:I,queryParams:P})=>R(n,I,P)),a});return b(r,()=>{var a;!r.value||(r.value.form?document.title=(a=r.value.form.welcomeTitle)!=null?a:r.value.form.title:r.value.dash&&(document.title=r.value.dash.title))}),(a,u)=>o(w)?(s(),c("div",J,[K(A)])):o(D)?(s(),c("div",Q,M)):o(l)&&o(y)?(s(),c("div",U,[(s(),k(q,{key:i.playerKey,class:"player",form:o(l),params:o(e).query,broker:o(y),"enable-auto-focus":!0,onNavigate:_,onLogout:f},null,8,["form","params","broker"]))])):o(h)?(s(),c("div",W,[(s(),k(L,{key:i.playerKey,class:"player","is-preview":!1,params:o(e).query,"dash-player-service":o(h),onNavigate:_},null,8,["params","dash-player-service"]))])):(s(),c("div",X,ee))}});const ke=F(ae,[["__scopeId","data-v-ee57bae4"]]);export{ke as default};
//# sourceMappingURL=Player.a2faebb0.js.map
