import{d as V,D as C,f as P,o as c,Y as g,$ as re,S as h,e8 as ie,a as b,b as f,ee as S,eq as ue,er as se,es as ce,Z as G,e as T,u as s,cD as de,w as p,c as v,aG as w,e9 as q,db as fe,bT as B,ct as pe,dh as me,ec as he,bR as ye,el as ve,bz as ge,bx as D,d4 as be,cx as Oe,p as z,a0 as we}from"./index.606ceacb.js";import{p as Pe}from"./popupNotifcation.5be82e14.js";import{a as Fe}from"./ant-design.723b4187.js";import{f as W}from"./string.ca5d8451.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="1b1034d4-7d7f-42f5-9bb0-73daa3e972c4",t._sentryDebugIdIdentifier="sentry-dbid-1b1034d4-7d7f-42f5-9bb0-73daa3e972c4")}catch{}})();var Ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM544 472c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v108H372c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h108v108c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h108c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V472z"}}]},name:"file-add",theme:"outlined"};const Se=Ae;var ke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M484 443.1V528h-84.5c-4.1 0-7.5 3.1-7.5 7v42c0 3.8 3.4 7 7.5 7H484v84.9c0 3.9 3.2 7.1 7 7.1h42c3.9 0 7-3.2 7-7.1V584h84.5c4.1 0 7.5-3.2 7.5-7v-42c0-3.9-3.4-7-7.5-7H540v-84.9c0-3.9-3.1-7.1-7-7.1h-42c-3.8 0-7 3.2-7 7.1zm396-144.7H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder-add",theme:"outlined"};const _e=ke;var De={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};const je=De,Me=["width","height","fill","transform"],$e={key:0},Ce=b("path",{d:"M144,128a16,16,0,1,1-16-16A16,16,0,0,1,144,128ZM60,112a16,16,0,1,0,16,16A16,16,0,0,0,60,112Zm136,0a16,16,0,1,0,16,16A16,16,0,0,0,196,112Z"},null,-1),ze=[Ce],Be={key:1},Ee=b("path",{d:"M240,96v64a16,16,0,0,1-16,16H32a16,16,0,0,1-16-16V96A16,16,0,0,1,32,80H224A16,16,0,0,1,240,96Z",opacity:"0.2"},null,-1),Ve=b("path",{d:"M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128Zm56-12a12,12,0,1,0,12,12A12,12,0,0,0,196,116ZM60,116a12,12,0,1,0,12,12A12,12,0,0,0,60,116Z"},null,-1),Ne=[Ee,Ve],Ze={key:2},He=b("path",{d:"M224,80H32A16,16,0,0,0,16,96v64a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V96A16,16,0,0,0,224,80ZM60,140a12,12,0,1,1,12-12A12,12,0,0,1,60,140Zm68,0a12,12,0,1,1,12-12A12,12,0,0,1,128,140Zm68,0a12,12,0,1,1,12-12A12,12,0,0,1,196,140Z"},null,-1),Ue=[He],xe={key:3},Re=b("path",{d:"M138,128a10,10,0,1,1-10-10A10,10,0,0,1,138,128ZM60,118a10,10,0,1,0,10,10A10,10,0,0,0,60,118Zm136,0a10,10,0,1,0,10,10A10,10,0,0,0,196,118Z"},null,-1),Ie=[Re],Le={key:4},Ge=b("path",{d:"M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128Zm56-12a12,12,0,1,0,12,12A12,12,0,0,0,196,116ZM60,116a12,12,0,1,0,12,12A12,12,0,0,0,60,116Z"},null,-1),Te=[Ge],qe={key:5},We=b("path",{d:"M136,128a8,8,0,1,1-8-8A8,8,0,0,1,136,128Zm-76-8a8,8,0,1,0,8,8A8,8,0,0,0,60,120Zm136,0a8,8,0,1,0,8,8A8,8,0,0,0,196,120Z"},null,-1),Ye=[We],Je={name:"PhDotsThree"},Qe=V({...Je,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(t){const e=t,n=C("weight","regular"),l=C("size","1em"),i=C("color","currentColor"),y=C("mirrored",!1),O=P(()=>{var m;return(m=e.weight)!=null?m:n}),A=P(()=>{var m;return(m=e.size)!=null?m:l}),j=P(()=>{var m;return(m=e.color)!=null?m:i}),M=P(()=>e.mirrored!==void 0?e.mirrored?"scale(-1, 1)":void 0:y?"scale(-1, 1)":void 0);return(m,I)=>(c(),g("svg",ie({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:A.value,height:A.value,fill:j.value,transform:M.value},m.$attrs),[re(m.$slots,"default"),O.value==="bold"?(c(),g("g",$e,ze)):O.value==="duotone"?(c(),g("g",Be,Ne)):O.value==="fill"?(c(),g("g",Ze,Ue)):O.value==="light"?(c(),g("g",xe,Ie)):O.value==="regular"?(c(),g("g",Le,Te)):O.value==="thin"?(c(),g("g",qe,Ye)):h("",!0)],16,Me))}});function Y(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},l=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),l.forEach(function(i){Xe(t,i,n[i])})}return t}function Xe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var N=function(e,n){var l=Y({},e,n.attrs);return f(S,Y({},l,{icon:ue}),null)};N.displayName="DeleteOutlined";N.inheritAttrs=!1;const Ke=N;function J(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},l=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),l.forEach(function(i){et(t,i,n[i])})}return t}function et(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Z=function(e,n){var l=J({},e,n.attrs);return f(S,J({},l,{icon:se}),null)};Z.displayName="DownloadOutlined";Z.inheritAttrs=!1;const tt=Z;function Q(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},l=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),l.forEach(function(i){nt(t,i,n[i])})}return t}function nt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var H=function(e,n){var l=Q({},e,n.attrs);return f(S,Q({},l,{icon:ce}),null)};H.displayName="EditOutlined";H.inheritAttrs=!1;const rt=H;function X(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},l=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),l.forEach(function(i){at(t,i,n[i])})}return t}function at(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var U=function(e,n){var l=X({},e,n.attrs);return f(S,X({},l,{icon:Se}),null)};U.displayName="FileAddOutlined";U.inheritAttrs=!1;const K=U;function ee(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},l=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),l.forEach(function(i){lt(t,i,n[i])})}return t}function lt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var x=function(e,n){var l=ee({},e,n.attrs);return f(S,ee({},l,{icon:_e}),null)};x.displayName="FolderAddOutlined";x.inheritAttrs=!1;const ot=x;function te(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},l=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),l.forEach(function(i){it(t,i,n[i])})}return t}function it(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var R=function(e,n){var l=te({},e,n.attrs);return f(S,te({},l,{icon:je}),null)};R.displayName="UploadOutlined";R.inheritAttrs=!1;const ne=R;function bt(t){var e;return(e=t.split(/\/|\\/).pop())!=null?e:""}function E(t){return t.length===0?".":t[t.length-1]}function Ot(t){const e=["B","KB","MB","GB","TB"],n=t.match(/^(\d+(\.\d+)?)\s*(\w+)$/);if(!n)return 0;const l=parseFloat(n[1]),i=n[3],y=e.indexOf(i);return y===-1?0:l*Math.pow(1024,y)}const ut=V({__name:"ScrollArea",props:{outerStyle:{},innerStyle:{}},setup(t){const e=t,n=P(()=>e.outerStyle?{position:"relative",...e.outerStyle}:{position:"relative"}),l=P(()=>{var i;return{position:"absolute",inset:0,overflow:"auto",...(i=e.innerStyle)!=null?i:{}}});return(i,y)=>(c(),g("div",{style:G(n.value)},[b("div",{style:G(l.value)},[re(i.$slots,"default")],4)],4))}}),st={class:"files-navigator"},ct={key:0},dt={key:1},ft={key:0,class:"file-size"},pt=V({__name:"FilesNavigator",props:{files:{},loading:{type:Boolean},onCreate:{type:Function},onDownload:{type:Function},onDelete:{type:Function},onRefetch:{type:Function},onRename:{type:Function},onOpen:{type:Function},onMkdir:{type:Function},separator:{}},setup(t){const e=t,n=r=>a=>{var o,u;return{key:a.pathParts.join(e.separator),title:r.keepFullPath?a.pathParts.join(e.separator):E(a.pathParts),isLeaf:a.type==="file",file:a,children:r.keepFullPath?void 0:(u=(o=a.children)==null?void 0:o.map(d=>{var _;const k=(_=e.files)==null?void 0:_.find($=>$.pathParts.join(e.separator)===d.join(e.separator));if(!k)throw new Error("Child node not found");return n({keepFullPath:r.keepFullPath})(k)}))!=null?u:[]}},l=r=>{if(!F.value.trim())return z("span",r);const a=W(F.value,r);return a?z("span",r.split("").map((o,u)=>a.includes(u)?z("span",{class:"char-match"},o):o)):z("span",r)},i=r=>{if(r.type==="directory")return"";const a=r.size;if(a<1024)return`${a} B`;const o=a/1024;if(o<1024)return`${o.toFixed(2)} KB`;const u=o/1024;return u<1024?`${u.toFixed(2)} MB`:`${(u/1024).toFixed(2)} GB`},y=P(()=>{var r,a;return F.value.trim()?(r=e.files)==null?void 0:r.filter(o=>o.pathParts.length===1&&W(F.value,o.pathParts.join(e.separator))).map(n({keepFullPath:!0})):(a=e.files)==null?void 0:a.filter(o=>o.pathParts.length===1).map(n({keepFullPath:!1}))}),O=r=>{var a,o;return r.isLeaf?1:(o=(a=r.children)==null?void 0:a.reduce((u,d)=>u+O(d),0))!=null?o:0},A=P(()=>y.value?y==null?void 0:y.value.reduce((r,a)=>r+O(a),0):0),j=T(!1);function M(r){if(r&&r.type==="file")return;const a=document.createElement("input");a.type="file",a.onchange=async()=>{var d,k,_,$,L;const o=(d=a.files)==null?void 0:d[0],u=await(o==null?void 0:o.arrayBuffer());if(!!o)try{j.value=!0,await(($=e.onCreate)==null?void 0:$.call(e,[...(k=r==null?void 0:r.pathParts)!=null?k:[],(_=o.name)!=null?_:"Untitled file"],u?new Uint8Array(u):void 0)),await((L=e.onRefetch)==null?void 0:L.call(e))}catch{Pe("Failed to upload file","File already exists")}finally{j.value=!1}},a.click()}function m(r){var u;if(r&&r.type==="file")return;const a=prompt("Enter the name of the new file");if(!a)return;const o=r?[...r.pathParts,a]:[a];(u=e.onCreate)==null||u.call(e,o)}async function I(r){if(!r||!e.onDownload)return;const a=await e.onDownload(r.pathParts),o=document.createElement("a");o.href=URL.createObjectURL(a),o.download=E(r.pathParts),o.click()}async function ae(r){var o,u;if(!r)return;const a="Are you sure you want to delete this "+(r.type==="file"?"file":"directory and all its contents")+"?";await Fe(a)&&(await((o=e.onDelete)==null?void 0:o.call(e,r.pathParts)),await((u=e.onRefetch)==null?void 0:u.call(e)))}async function le(r){var u,d;if(!r)return;const a=prompt("Enter the new name of the file",E(r.pathParts));if(!a)return;const o=[...r.pathParts.slice(0,-1),a];await((u=e.onRename)==null?void 0:u.call(e,r.pathParts,o)),await((d=e.onRefetch)==null?void 0:d.call(e))}async function oe(r){var u;if(r&&r.type==="file")return;const a=prompt("Enter the name of the new folder");if(!a)return;const o=r?[...r.pathParts,a]:[a];(u=e.onMkdir)==null||u.call(e,o)}const F=T("");return(r,a)=>(c(),g("div",st,[f(s(de),{value:F.value,"onUpdate:value":a[0]||(a[0]=o=>F.value=o),loading:e.loading,placeholder:"Search files"},null,8,["value","loading"]),f(s(me),{justify:"space-between"},{default:p(()=>[A.value>0?(c(),v(s(fe),{key:0},{default:p(()=>[b("b",null,[w(q(A.value)+" File",1),A.value!==1?(c(),g("span",ct,"s")):h("",!0),F.value?(c(),g("span",dt," found ")):h("",!0)])]),_:1})):h("",!0),r.loading?h("",!0):(c(),v(s(pe),{key:1},{default:p(()=>[r.onCreate?(c(),v(s(B),{key:0,onClick:a[1]||(a[1]=()=>m())},{default:p(()=>[f(s(K)),w(" New File ")]),_:1})):h("",!0),r.onCreate?(c(),v(s(B),{key:1,onClick:a[2]||(a[2]=()=>M())},{default:p(()=>[f(s(ne)),w(" Upload ")]),_:1})):h("",!0),r.onMkdir?(c(),v(s(B),{key:2,onClick:a[3]||(a[3]=()=>oe())},{default:p(()=>[f(s(ot)),w(" New Folder ")]),_:1})):h("",!0)]),_:1}))]),_:1}),f(ut,{"outer-style":{flexGrow:"1"}},{default:p(()=>[y.value&&y.value.length>0?(c(),v(s(be),{key:0,class:"files-tree","tree-data":y.value,selectable:"",onSelect:a[5]||(a[5]=(o,{node:{file:u}})=>{var d;return(d=e.onOpen)==null?void 0:d.call(e,u.pathParts)})},{title:p(({title:o,isLeaf:u,file:d})=>[b("span",null,[(c(),v(he(l(o)))),u?(c(),g("span",ft,"("+q(i(d))+")",1)):h("",!0)]),f(s(ye),{onClick:a[4]||(a[4]=ve(()=>{},["stop"]))},{overlay:p(()=>[f(s(ge),{disabled:r.loading},{default:p(()=>[r.onDownload?(c(),v(s(D),{key:0,onClick:()=>I(d)},{default:p(()=>[f(s(tt)),w(" Download ")]),_:2},1032,["onClick"])):h("",!0),r.onRename?(c(),v(s(D),{key:1,onClick:()=>le(d)},{default:p(()=>[f(s(rt)),w(" Rename ")]),_:2},1032,["onClick"])):h("",!0),!u&&r.onCreate?(c(),v(s(D),{key:2,onClick:()=>m(d)},{default:p(()=>[f(s(K)),w(" New File ")]),_:2},1032,["onClick"])):h("",!0),r.onCreate?(c(),v(s(D),{key:3,loading:r.loading,onClick:()=>M(d)},{default:p(()=>[f(s(ne)),w(" Upload ")]),_:2},1032,["loading","onClick"])):h("",!0),r.onDelete?(c(),v(s(D),{key:4,danger:"",onClick:()=>ae(d)},{default:p(()=>[f(s(Ke)),w(" Delete ")]),_:2},1032,["onClick"])):h("",!0)]),_:2},1032,["disabled"])]),default:p(()=>[f(s(Qe),{style:{cursor:"pointer",float:"inline-end"},size:"25px"})]),_:2},1024)]),_:1},8,["tree-data"])):(c(),v(s(Oe),{key:1,description:r.loading?"Loading...":"No files"},null,8,["description"]))]),_:1})]))}});const wt=we(pt,[["__scopeId","data-v-a66b7046"]]);export{wt as F,ut as _,bt as f,Ot as s};
//# sourceMappingURL=FilesNavigator.02a10fdb.js.map
