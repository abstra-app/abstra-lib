import{a as me,i as K,c as R,b as D,e as v,f as Qe,g as F,h as x,m as Xe,c8 as N,ca as I,dJ as Ke,dK as Me,dL as Je,dM as et,dN as Oe,c9 as we,dI as Pe,dO as lt,dP as ut,r as V,H as se,j as l,M as de,W as fe,u as r,aL as he,af as u,w as c,aP as Ue,S as $,U as C,aN as Ne,D as tt,ak as B,p as W,b8 as le,aK as G,R as ct,v as z,d7 as Le,d as dt,P as ft,bk as pe,ac as mt,dQ as gt,k as pt,E as ke,aj as Te,aJ as vt,bj as ht,b6 as _t,bp as yt,be as wt,bf as bt,bg as ve,dG as xt,cG as kt,bm as Ae,aQ as Ce,dR as Tt,bt as Ct,a8 as Dt}from"./jwt-decode.esm-UjKTRfs6.js";import{_ as X}from"./AbstraButton.vue_vue_type_script_setup_true_lang-Bdg5zMM8.js";import{C as Mt}from"./contracts.generated-CWas1NeO.js";import{u as Ot}from"./omniChatStore-B33Fj2AU.js";import{I as at}from"./PhDatabase.vue-C8DTB33d.js";import{F as Lt}from"./PhKey.vue-DhlsjBuE.js";import{F as De}from"./PhRocketLaunch.vue-Fgph7N7y.js";import{G as St}from"./PhSparkle.vue-CVmHvZgF.js";import{I as $t}from"./PhStop.vue-Dg9rF868.js";import{C as Ye}from"./connectors-DlJoFM6n.js";import{T as Pt}from"./tables-DLshKErI.js";import{C as Se}from"./index-1nA9xDYP.js";import{C as ue,l as Ut,m as Re}from"./router-BFW3586H.js";import{t as H,s as _e,f as Nt,l as It}from"./index-CVZUkKjO.js";import{L as Et,a as At,A as Yt}from"./index-_FvtQnhZ.js";import{S as He}from"./index-C9NOoKCz.js";import{L as Rt}from"./LoadingOutlined-uzg4KDjL.js";import"./record-K7dlNI2v.js";import"./uuid-DZ0ePtnU.js";import"./PhCopySimple.vue-0u_OjQky.js";import"./string-ElVgGh9y.js";import"./ts.worker-Dpl7fFrH.js";(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new Error().stack;t&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[t]="25fc4f52-df7c-4a70-ba87-c8c7d8d9c665",s._sentryDebugIdIdentifier="sentry-dbid-25fc4f52-df7c-4a70-ba87-c8c7d8d9c665")}catch{}})();const Ht=["width","height","fill","transform"],Wt={key:0},Ft=x("path",{d:"M137,168l11.52-11.51a12,12,0,0,0-17-17L120,151l-15-15,11.52-11.51a12,12,0,0,0-17-17L88,119,72.49,103.51a12,12,0,0,0-17,17L59,124,38.54,144.49a36,36,0,0,0,0,50.91l2.55,2.54L15.51,223.51a12,12,0,0,0,17,17l25.57-25.58,2.54,2.55a36.06,36.06,0,0,0,50.91,0L132,197l3.51,3.52a12,12,0,0,0,17-17ZM94.54,200.49a12,12,0,0,1-17,0L55.51,178.43a12,12,0,0,1,0-17L76,141l39,39Zm146-185a12,12,0,0,0-17,0L197.94,41.09l-2.54-2.55a36.05,36.05,0,0,0-50.91,0L124,59l-3.51-3.52a12,12,0,0,0-17,17l80,80a12,12,0,0,0,17-17L197,132l20.49-20.49a36,36,0,0,0,0-50.91l-2.55-2.54,25.58-25.57A12,12,0,0,0,240.49,15.51Zm-40,79L180,115,141,76l20.49-20.49a12,12,0,0,1,17,0l22.06,22.06a12,12,0,0,1,0,17Z"},null,-1),Vt=[Ft],jt={key:1},zt=x("path",{d:"M76,124l56,56-29,29a24,24,0,0,1-33.94,0L47,186.91A24,24,0,0,1,47,153ZM209,69.09,186.91,47A24,24,0,0,0,153,47L124,76l56,56,29-29A24,24,0,0,0,209,69.09Z",opacity:"0.2"},null,-1),qt=x("path",{d:"M149.66,138.34a8,8,0,0,0-11.32,0L120,156.69,99.31,136l18.35-18.34a8,8,0,0,0-11.32-11.32L88,124.69,69.66,106.34a8,8,0,0,0-11.32,11.32L64.69,124,41.37,147.31a32,32,0,0,0,0,45.26l5.38,5.37-28.41,28.4a8,8,0,0,0,11.32,11.32l28.4-28.41,5.37,5.38a32,32,0,0,0,45.26,0L132,191.31l6.34,6.35a8,8,0,0,0,11.32-11.32L131.31,168l18.35-18.34A8,8,0,0,0,149.66,138.34Zm-52.29,65a16,16,0,0,1-22.62,0L52.69,181.25a16,16,0,0,1,0-22.62L76,135.31,120.69,180Zm140.29-185a8,8,0,0,0-11.32,0l-28.4,28.41-5.37-5.38a32.05,32.05,0,0,0-45.26,0L124,64.69l-6.34-6.35a8,8,0,0,0-11.32,11.32l80,80a8,8,0,0,0,11.32-11.32L191.31,132l23.32-23.31a32,32,0,0,0,0-45.26l-5.38-5.37,28.41-28.4A8,8,0,0,0,237.66,18.34Zm-34.35,79L180,120.69,135.31,76l23.32-23.31a16,16,0,0,1,22.62,0l22.06,22A16,16,0,0,1,203.31,97.37Z"},null,-1),Zt=[zt,qt],Bt={key:2},Gt=x("path",{d:"M149.66,149.66,131.31,168l18.35,18.34a8,8,0,0,1-11.32,11.32L132,191.31l-23.31,23.32a32.06,32.06,0,0,1-45.26,0l-5.37-5.38-28.4,28.41a8,8,0,0,1-11.32-11.32l28.41-28.4-5.38-5.37a32,32,0,0,1,0-45.26L64.69,124l-6.35-6.34a8,8,0,0,1,11.32-11.32L88,124.69l18.34-18.35a8,8,0,0,1,11.32,11.32L99.31,136,120,156.69l18.34-18.35a8,8,0,0,1,11.32,11.32Zm88-131.32a8,8,0,0,0-11.32,0l-28.4,28.41-5.37-5.38a32.05,32.05,0,0,0-45.26,0L124,64.69l-6.34-6.35a8,8,0,0,0-11.32,11.32l80,80a8,8,0,0,0,11.32-11.32L191.31,132l23.32-23.31a32,32,0,0,0,0-45.26l-5.38-5.37,28.41-28.4A8,8,0,0,0,237.66,18.34Z"},null,-1),Qt=[Gt],Xt={key:3},Kt=x("path",{d:"M148.24,139.76a6,6,0,0,0-8.48,0L120,159.51,96.49,136l19.75-19.76a6,6,0,0,0-8.48-8.48L88,127.51,68.24,107.76a6,6,0,0,0-8.48,8.48L67.51,124,42.79,148.73a30,30,0,0,0,0,42.42l6.78,6.79L19.76,227.76a6,6,0,1,0,8.48,8.48l29.82-29.81,6.79,6.78a30,30,0,0,0,42.42,0L132,188.49l7.76,7.75a6,6,0,0,0,8.48-8.48L128.49,168l19.75-19.76A6,6,0,0,0,148.24,139.76Zm-49.45,65a18,18,0,0,1-25.46,0L51.27,182.67a18,18,0,0,1,0-25.46L76,132.49,123.51,180Zm137.45-185a6,6,0,0,0-8.48,0L197.94,49.57l-6.79-6.78a30,30,0,0,0-42.42,0L124,67.51l-7.76-7.75a6,6,0,0,0-8.48,8.48l80,80a6,6,0,0,0,8.48-8.48L188.49,132l24.72-24.73a30,30,0,0,0,0-42.42l-6.78-6.79,29.81-29.82A6,6,0,0,0,236.24,19.76Zm-31.51,79L180,123.51,132.49,76l24.72-24.73a18,18,0,0,1,25.46,0l22.06,22.06a18,18,0,0,1,0,25.46Z"},null,-1),Jt=[Kt],ea={key:4},ta=x("path",{d:"M149.66,138.34a8,8,0,0,0-11.32,0L120,156.69,99.31,136l18.35-18.34a8,8,0,0,0-11.32-11.32L88,124.69,69.66,106.34a8,8,0,0,0-11.32,11.32L64.69,124,41.37,147.31a32,32,0,0,0,0,45.26l5.38,5.37-28.41,28.4a8,8,0,0,0,11.32,11.32l28.4-28.41,5.37,5.38a32,32,0,0,0,45.26,0L132,191.31l6.34,6.35a8,8,0,0,0,11.32-11.32L131.31,168l18.35-18.34A8,8,0,0,0,149.66,138.34Zm-52.29,65a16,16,0,0,1-22.62,0L52.69,181.25a16,16,0,0,1,0-22.62L76,135.31,120.69,180Zm140.29-185a8,8,0,0,0-11.32,0l-28.4,28.41-5.37-5.38a32.05,32.05,0,0,0-45.26,0L124,64.69l-6.34-6.35a8,8,0,0,0-11.32,11.32l80,80a8,8,0,0,0,11.32-11.32L191.31,132l23.32-23.31a32,32,0,0,0,0-45.26l-5.38-5.37,28.41-28.4A8,8,0,0,0,237.66,18.34Zm-34.35,79L180,120.69,135.31,76l23.32-23.31a16,16,0,0,1,22.62,0l22.06,22A16,16,0,0,1,203.31,97.37Z"},null,-1),aa=[ta],na={key:5},ra=x("path",{d:"M146.83,141.17a4,4,0,0,0-5.66,0L120,162.34,93.66,136l21.17-21.17a4,4,0,0,0-5.66-5.66L88,130.34,66.83,109.17a4,4,0,0,0-5.66,5.66L70.34,124,44.2,150.14a28,28,0,0,0,0,39.6l8.2,8.2L21.17,229.17a4,4,0,0,0,5.66,5.66L58.06,203.6l8.2,8.2a28,28,0,0,0,39.6,0L132,185.66l9.17,9.17a4,4,0,0,0,5.66-5.66L125.66,168l21.17-21.17A4,4,0,0,0,146.83,141.17Zm-46.63,65a20,20,0,0,1-28.28,0L49.86,184.08a20,20,0,0,1,0-28.28L76,129.66,126.34,180Zm134.63-185a4,4,0,0,0-5.66,0L197.94,52.4l-8.2-8.2a28,28,0,0,0-39.6,0L124,70.34l-9.17-9.17a4,4,0,0,0-5.66,5.66l80,80a4,4,0,0,0,5.66-5.66L185.66,132l26.14-26.14a28,28,0,0,0,0-39.6l-8.2-8.2,31.23-31.23A4,4,0,0,0,234.83,21.17ZM212,86.06a19.86,19.86,0,0,1-5.86,14.14L180,126.34,129.66,76,155.8,49.86a20,20,0,0,1,28.28,0l22.06,22.06A19.85,19.85,0,0,1,212,86.06Z"},null,-1),sa=[ra],oa={name:"PhPlugs"},nt=me({...oa,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(s){const t=s,e=K("weight","regular"),a=K("size","1em"),n=K("color","currentColor"),o=K("mirrored",!1),i=R(()=>t.weight??e),g=R(()=>t.size??a),h=R(()=>t.color??n),f=R(()=>t.mirrored!==void 0?t.mirrored?"scale(-1, 1)":void 0:o?"scale(-1, 1)":void 0);return(w,p)=>(v(),D("svg",Xe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:g.value,height:g.value,fill:h.value,transform:f.value},w.$attrs),[Qe(w.$slots,"default"),i.value==="bold"?(v(),D("g",Wt,Vt)):i.value==="duotone"?(v(),D("g",jt,Zt)):i.value==="fill"?(v(),D("g",Bt,Qt)):i.value==="light"?(v(),D("g",Xt,Jt)):i.value==="regular"?(v(),D("g",ea,aa)):i.value==="thin"?(v(),D("g",na,sa)):F("",!0)],16,Ht))}}),ia=["width","height","fill","transform"],la={key:0},ua=x("path",{d:"M228,128a12,12,0,0,1-12,12H140v76a12,12,0,0,1-24,0V140H40a12,12,0,0,1,0-24h76V40a12,12,0,0,1,24,0v76h76A12,12,0,0,1,228,128Z"},null,-1),ca=[ua],da={key:1},fa=x("path",{d:"M216,56V200a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V56A16,16,0,0,1,56,40H200A16,16,0,0,1,216,56Z",opacity:"0.2"},null,-1),ma=x("path",{d:"M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80A8,8,0,0,1,224,128Z"},null,-1),ga=[fa,ma],pa={key:2},va=x("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM184,136H136v48a8,8,0,0,1-16,0V136H72a8,8,0,0,1,0-16h48V72a8,8,0,0,1,16,0v48h48a8,8,0,0,1,0,16Z"},null,-1),ha=[va],_a={key:3},ya=x("path",{d:"M222,128a6,6,0,0,1-6,6H134v82a6,6,0,0,1-12,0V134H40a6,6,0,0,1,0-12h82V40a6,6,0,0,1,12,0v82h82A6,6,0,0,1,222,128Z"},null,-1),wa=[ya],ba={key:4},xa=x("path",{d:"M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80A8,8,0,0,1,224,128Z"},null,-1),ka=[xa],Ta={key:5},Ca=x("path",{d:"M220,128a4,4,0,0,1-4,4H132v84a4,4,0,0,1-8,0V132H40a4,4,0,0,1,0-8h84V40a4,4,0,0,1,8,0v84h84A4,4,0,0,1,220,128Z"},null,-1),Da=[Ca],Ma={name:"PhPlus"},$e=me({...Ma,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(s){const t=s,e=K("weight","regular"),a=K("size","1em"),n=K("color","currentColor"),o=K("mirrored",!1),i=R(()=>t.weight??e),g=R(()=>t.size??a),h=R(()=>t.color??n),f=R(()=>t.mirrored!==void 0?t.mirrored?"scale(-1, 1)":void 0:o?"scale(-1, 1)":void 0);return(w,p)=>(v(),D("svg",Xe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:g.value,height:g.value,fill:h.value,transform:f.value},w.$attrs),[Qe(w.$slots,"default"),i.value==="bold"?(v(),D("g",la,ca)):i.value==="duotone"?(v(),D("g",da,ga)):i.value==="fill"?(v(),D("g",pa,ha)):i.value==="light"?(v(),D("g",_a,wa)):i.value==="regular"?(v(),D("g",ba,ka)):i.value==="thin"?(v(),D("g",Ta,Da)):F("",!0)],16,ia))}});function Oa(s,t){N(2,arguments);var e=I(s),a=H(t);return isNaN(a)?new Date(NaN):(a&&e.setDate(e.getDate()+a),e)}function La(s,t){N(2,arguments);var e=I(s),a=H(t);if(isNaN(a))return new Date(NaN);if(!a)return e;var n=e.getDate(),o=new Date(e.getTime());o.setMonth(e.getMonth()+a+1,0);var i=o.getDate();return n>=i?o:(e.setFullYear(o.getFullYear(),o.getMonth(),n),e)}function ce(s,t){if(N(2,arguments),!t||Ke(t)!=="object")return new Date(NaN);var e=t.years?H(t.years):0,a=t.months?H(t.months):0,n=t.weeks?H(t.weeks):0,o=t.days?H(t.days):0,i=t.hours?H(t.hours):0,g=t.minutes?H(t.minutes):0,h=t.seconds?H(t.seconds):0,f=I(s),w=a||e?La(f,a+e*12):f,p=o||n?Oa(w,o+n*7):w,P=g+i*60,M=h+P*60,U=M*1e3,Y=new Date(p.getTime()+U);return Y}function Sa(s,t){N(2,arguments);var e=I(s).getTime(),a=H(t);return new Date(e+a)}function We(s){N(1,arguments);var t=I(s);return t.setHours(0,0,0,0),t}var $a=864e5;function Pa(s,t){N(2,arguments);var e=We(s),a=We(t),n=e.getTime()-Me(e),o=a.getTime()-Me(a);return Math.round((n-o)/$a)}var Ua=6e4,Na=36e5;function Ia(s){return N(1,arguments),s instanceof Date||Ke(s)==="object"&&Object.prototype.toString.call(s)==="[object Date]"}function Ea(s){if(N(1,arguments),!Ia(s)&&typeof s!="number")return!1;var t=I(s);return!isNaN(Number(t))}function Aa(s,t){N(2,arguments);var e=I(s),a=I(t);return e.getFullYear()-a.getFullYear()}function Fe(s,t){var e=s.getFullYear()-t.getFullYear()||s.getMonth()-t.getMonth()||s.getDate()-t.getDate()||s.getHours()-t.getHours()||s.getMinutes()-t.getMinutes()||s.getSeconds()-t.getSeconds()||s.getMilliseconds()-t.getMilliseconds();return e<0?-1:e>0?1:e}function Ya(s,t){N(2,arguments);var e=I(s),a=I(t),n=Fe(e,a),o=Math.abs(Pa(e,a));e.setDate(e.getDate()-n*o);var i=+(Fe(e,a)===-n),g=n*(o-i);return g===0?0:g}function Ra(s,t,e){N(2,arguments);var a=Je(s,t)/Na;return et()(a)}function Ha(s,t,e){N(2,arguments);var a=Je(s,t)/Ua;return et()(a)}function Wa(s,t){N(2,arguments);var e=I(s),a=I(t),n=Oe(e,a),o=Math.abs(Aa(e,a));e.setFullYear(1584),a.setFullYear(1584);var i=Oe(e,a)===-n,g=n*(o-Number(i));return g===0?0:g}function Fa(s,t){N(2,arguments);var e=H(t);return Sa(s,-e)}var Va=864e5;function ja(s){N(1,arguments);var t=I(s),e=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var a=t.getTime(),n=e-a;return Math.floor(n/Va)+1}function ye(s){N(1,arguments);var t=1,e=I(s),a=e.getUTCDay(),n=(a<t?7:0)+a-t;return e.setUTCDate(e.getUTCDate()-n),e.setUTCHours(0,0,0,0),e}function rt(s){N(1,arguments);var t=I(s),e=t.getUTCFullYear(),a=new Date(0);a.setUTCFullYear(e+1,0,4),a.setUTCHours(0,0,0,0);var n=ye(a),o=new Date(0);o.setUTCFullYear(e,0,4),o.setUTCHours(0,0,0,0);var i=ye(o);return t.getTime()>=n.getTime()?e+1:t.getTime()>=i.getTime()?e:e-1}function za(s){N(1,arguments);var t=rt(s),e=new Date(0);e.setUTCFullYear(t,0,4),e.setUTCHours(0,0,0,0);var a=ye(e);return a}var qa=6048e5;function Za(s){N(1,arguments);var t=I(s),e=ye(t).getTime()-za(t).getTime();return Math.round(e/qa)+1}function st(s,t){var e,a,n,o,i,g,h,f;N(1,arguments);var w=I(s),p=w.getUTCFullYear(),P=we(),M=H((e=(a=(n=(o=t?.firstWeekContainsDate)!==null&&o!==void 0?o:t==null||(i=t.locale)===null||i===void 0||(g=i.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&n!==void 0?n:P.firstWeekContainsDate)!==null&&a!==void 0?a:(h=P.locale)===null||h===void 0||(f=h.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&e!==void 0?e:1);if(!(M>=1&&M<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var U=new Date(0);U.setUTCFullYear(p+1,0,M),U.setUTCHours(0,0,0,0);var Y=_e(U,t),S=new Date(0);S.setUTCFullYear(p,0,M),S.setUTCHours(0,0,0,0);var b=_e(S,t);return w.getTime()>=Y.getTime()?p+1:w.getTime()>=b.getTime()?p:p-1}function Ba(s,t){var e,a,n,o,i,g,h,f;N(1,arguments);var w=we(),p=H((e=(a=(n=(o=t?.firstWeekContainsDate)!==null&&o!==void 0?o:t==null||(i=t.locale)===null||i===void 0||(g=i.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&n!==void 0?n:w.firstWeekContainsDate)!==null&&a!==void 0?a:(h=w.locale)===null||h===void 0||(f=h.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&e!==void 0?e:1),P=st(s,t),M=new Date(0);M.setUTCFullYear(P,0,p),M.setUTCHours(0,0,0,0);var U=_e(M,t);return U}var Ga=6048e5;function Qa(s,t){N(1,arguments);var e=I(s),a=_e(e,t).getTime()-Ba(e,t).getTime();return Math.round(a/Ga)+1}function L(s,t){for(var e=s<0?"-":"",a=Math.abs(s).toString();a.length<t;)a="0"+a;return e+a}var Q={y:function(t,e){var a=t.getUTCFullYear(),n=a>0?a:1-a;return L(e==="yy"?n%100:n,e.length)},M:function(t,e){var a=t.getUTCMonth();return e==="M"?String(a+1):L(a+1,2)},d:function(t,e){return L(t.getUTCDate(),e.length)},a:function(t,e){var a=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h:function(t,e){return L(t.getUTCHours()%12||12,e.length)},H:function(t,e){return L(t.getUTCHours(),e.length)},m:function(t,e){return L(t.getUTCMinutes(),e.length)},s:function(t,e){return L(t.getUTCSeconds(),e.length)},S:function(t,e){var a=e.length,n=t.getUTCMilliseconds(),o=Math.floor(n*Math.pow(10,a-3));return L(o,e.length)}},re={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Xa={G:function(t,e,a){var n=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"});case"GGGGG":return a.era(n,{width:"narrow"});case"GGGG":default:return a.era(n,{width:"wide"})}},y:function(t,e,a){if(e==="yo"){var n=t.getUTCFullYear(),o=n>0?n:1-n;return a.ordinalNumber(o,{unit:"year"})}return Q.y(t,e)},Y:function(t,e,a,n){var o=st(t,n),i=o>0?o:1-o;if(e==="YY"){var g=i%100;return L(g,2)}return e==="Yo"?a.ordinalNumber(i,{unit:"year"}):L(i,e.length)},R:function(t,e){var a=rt(t);return L(a,e.length)},u:function(t,e){var a=t.getUTCFullYear();return L(a,e.length)},Q:function(t,e,a){var n=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return L(n,2);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,a){var n=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return L(n,2);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,a){var n=t.getUTCMonth();switch(e){case"M":case"MM":return Q.M(t,e);case"Mo":return a.ordinalNumber(n+1,{unit:"month"});case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,a){var n=t.getUTCMonth();switch(e){case"L":return String(n+1);case"LL":return L(n+1,2);case"Lo":return a.ordinalNumber(n+1,{unit:"month"});case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,a,n){var o=Qa(t,n);return e==="wo"?a.ordinalNumber(o,{unit:"week"}):L(o,e.length)},I:function(t,e,a){var n=Za(t);return e==="Io"?a.ordinalNumber(n,{unit:"week"}):L(n,e.length)},d:function(t,e,a){return e==="do"?a.ordinalNumber(t.getUTCDate(),{unit:"date"}):Q.d(t,e)},D:function(t,e,a){var n=ja(t);return e==="Do"?a.ordinalNumber(n,{unit:"dayOfYear"}):L(n,e.length)},E:function(t,e,a){var n=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"});case"EEEE":default:return a.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,a,n){var o=t.getUTCDay(),i=(o-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return L(i,2);case"eo":return a.ordinalNumber(i,{unit:"day"});case"eee":return a.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(o,{width:"short",context:"formatting"});case"eeee":default:return a.day(o,{width:"wide",context:"formatting"})}},c:function(t,e,a,n){var o=t.getUTCDay(),i=(o-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return L(i,e.length);case"co":return a.ordinalNumber(i,{unit:"day"});case"ccc":return a.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(o,{width:"narrow",context:"standalone"});case"cccccc":return a.day(o,{width:"short",context:"standalone"});case"cccc":default:return a.day(o,{width:"wide",context:"standalone"})}},i:function(t,e,a){var n=t.getUTCDay(),o=n===0?7:n;switch(e){case"i":return String(o);case"ii":return L(o,e.length);case"io":return a.ordinalNumber(o,{unit:"day"});case"iii":return a.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(n,{width:"short",context:"formatting"});case"iiii":default:return a.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,a){var n=t.getUTCHours(),o=n/12>=1?"pm":"am";switch(e){case"a":case"aa":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,e,a){var n=t.getUTCHours(),o;switch(n===12?o=re.noon:n===0?o=re.midnight:o=n/12>=1?"pm":"am",e){case"b":case"bb":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,e,a){var n=t.getUTCHours(),o;switch(n>=17?o=re.evening:n>=12?o=re.afternoon:n>=4?o=re.morning:o=re.night,e){case"B":case"BB":case"BBB":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,e,a){if(e==="ho"){var n=t.getUTCHours()%12;return n===0&&(n=12),a.ordinalNumber(n,{unit:"hour"})}return Q.h(t,e)},H:function(t,e,a){return e==="Ho"?a.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Q.H(t,e)},K:function(t,e,a){var n=t.getUTCHours()%12;return e==="Ko"?a.ordinalNumber(n,{unit:"hour"}):L(n,e.length)},k:function(t,e,a){var n=t.getUTCHours();return n===0&&(n=24),e==="ko"?a.ordinalNumber(n,{unit:"hour"}):L(n,e.length)},m:function(t,e,a){return e==="mo"?a.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Q.m(t,e)},s:function(t,e,a){return e==="so"?a.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Q.s(t,e)},S:function(t,e){return Q.S(t,e)},X:function(t,e,a,n){var o=n._originalDate||t,i=o.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return je(i);case"XXXX":case"XX":return te(i);case"XXXXX":case"XXX":default:return te(i,":")}},x:function(t,e,a,n){var o=n._originalDate||t,i=o.getTimezoneOffset();switch(e){case"x":return je(i);case"xxxx":case"xx":return te(i);case"xxxxx":case"xxx":default:return te(i,":")}},O:function(t,e,a,n){var o=n._originalDate||t,i=o.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Ve(i,":");case"OOOO":default:return"GMT"+te(i,":")}},z:function(t,e,a,n){var o=n._originalDate||t,i=o.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Ve(i,":");case"zzzz":default:return"GMT"+te(i,":")}},t:function(t,e,a,n){var o=n._originalDate||t,i=Math.floor(o.getTime()/1e3);return L(i,e.length)},T:function(t,e,a,n){var o=n._originalDate||t,i=o.getTime();return L(i,e.length)}};function Ve(s,t){var e=s>0?"-":"+",a=Math.abs(s),n=Math.floor(a/60),o=a%60;if(o===0)return e+String(n);var i=t;return e+String(n)+i+L(o,2)}function je(s,t){if(s%60===0){var e=s>0?"-":"+";return e+L(Math.abs(s)/60,2)}return te(s,t)}function te(s,t){var e=t||"",a=s>0?"-":"+",n=Math.abs(s),o=L(Math.floor(n/60),2),i=L(n%60,2);return a+o+e+i}var ze=function(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},ot=function(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Ka=function(t,e){var a=t.match(/(P+)(p+)?/)||[],n=a[1],o=a[2];if(!o)return ze(t,e);var i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",ze(n,e)).replace("{{time}}",ot(o,e))},Ja={p:ot,P:Ka},en=["D","DD"],tn=["YY","YYYY"];function an(s){return en.indexOf(s)!==-1}function nn(s){return tn.indexOf(s)!==-1}function qe(s,t,e){if(s==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(s==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(s==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(s==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var rn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,sn=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,on=/^'([^]*?)'?$/,ln=/''/g,un=/[a-zA-Z]/;function Ze(s,t,e){var a,n,o,i,g,h,f,w,p,P,M,U,Y,S,b,O,d,T;N(2,arguments);var k=String(t),j=we(),Z=(a=(n=e?.locale)!==null&&n!==void 0?n:j.locale)!==null&&a!==void 0?a:Pe,oe=H((o=(i=(g=(h=e?.firstWeekContainsDate)!==null&&h!==void 0?h:e==null||(f=e.locale)===null||f===void 0||(w=f.options)===null||w===void 0?void 0:w.firstWeekContainsDate)!==null&&g!==void 0?g:j.firstWeekContainsDate)!==null&&i!==void 0?i:(p=j.locale)===null||p===void 0||(P=p.options)===null||P===void 0?void 0:P.firstWeekContainsDate)!==null&&o!==void 0?o:1);if(!(oe>=1&&oe<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var ie=H((M=(U=(Y=(S=e?.weekStartsOn)!==null&&S!==void 0?S:e==null||(b=e.locale)===null||b===void 0||(O=b.options)===null||O===void 0?void 0:O.weekStartsOn)!==null&&Y!==void 0?Y:j.weekStartsOn)!==null&&U!==void 0?U:(d=j.locale)===null||d===void 0||(T=d.options)===null||T===void 0?void 0:T.weekStartsOn)!==null&&M!==void 0?M:0);if(!(ie>=0&&ie<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!Z.localize)throw new RangeError("locale must contain localize property");if(!Z.formatLong)throw new RangeError("locale must contain formatLong property");var ne=I(s);if(!Ea(ne))throw new RangeError("Invalid time value");var be=Me(ne),xe=Fa(ne,be),ge={firstWeekContainsDate:oe,weekStartsOn:ie,locale:Z,_originalDate:ne},J=k.match(sn).map(function(E){var q=E[0];if(q==="p"||q==="P"){var ee=Ja[q];return ee(E,Z.formatLong)}return E}).join("").match(rn).map(function(E){if(E==="''")return"'";var q=E[0];if(q==="'")return cn(E);var ee=Xa[q];if(ee)return!(e!=null&&e.useAdditionalWeekYearTokens)&&nn(E)&&qe(E,t,String(s)),!(e!=null&&e.useAdditionalDayOfYearTokens)&&an(E)&&qe(E,t,String(s)),ee(xe,E,Z.localize,ge);if(q.match(un))throw new RangeError("Format string contains an unescaped latin alphabet character `"+q+"`");return E}).join("");return J}function cn(s){var t=s.match(on);return t?t[1].replace(ln,"'"):s}var dn=["years","months","weeks","days","hours","minutes","seconds"];function fn(s,t){var e,a,n,o,i;if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var g=we(),h=(e=(a=t?.locale)!==null&&a!==void 0?a:g.locale)!==null&&e!==void 0?e:Pe,f=(n=t?.format)!==null&&n!==void 0?n:dn,w=(o=t?.zero)!==null&&o!==void 0?o:!1,p=(i=t?.delimiter)!==null&&i!==void 0?i:" ";if(!h.formatDistance)return"";var P=f.reduce(function(M,U){var Y="x".concat(U.replace(/(^.)/,function(b){return b.toUpperCase()})),S=s[U];return typeof S=="number"&&(w||s[U])?M.concat(h.formatDistance(Y,S)):M},[]).join(p);return P}function mn(s){N(1,arguments);var t=I(s.start),e=I(s.end);if(isNaN(t.getTime()))throw new RangeError("Start Date is invalid");if(isNaN(e.getTime()))throw new RangeError("End Date is invalid");var a={};a.years=Math.abs(Wa(e,t));var n=Oe(e,t),o=ce(t,{years:n*a.years});a.months=Math.abs(lt(e,o));var i=ce(o,{months:n*a.months});a.days=Math.abs(Ya(e,i));var g=ce(i,{days:n*a.days});a.hours=Math.abs(Ra(e,g));var h=ce(g,{hours:n*a.hours});a.minutes=Math.abs(Ha(e,h));var f=ce(h,{minutes:n*a.minutes});return a.seconds=Math.abs(ut(e,f)),a}class gn{async listAgents(t){return await ue.get(`projects/${t}/agents`)}async runAgent(t,e,a,n,o){return await ue.post(`projects/${t}/agents/${e}/runs`,{prompt:a,permissions:n,...o})}async listRuns(t,e){return await ue.get(`projects/${t}/agents/${e}/runs`)}async getRun(t,e,a){return await ue.get(`projects/${t}/agents/${e}/runs/${a}`)}async cancelRun(t,e,a){await ue.delete(`projects/${t}/agents/${e}/runs/${a}`)}}const Be={type:"array",description:"List of permissions for the agent",items:{oneOf:[{type:"object",title:"TablesPermission",properties:{type:{const:"tables"},action:{type:"string",enum:["insert","update","delete","select"]},tableName:{type:"string"},condition:{type:"object",additionalProperties:{type:"string"}}},required:["type","action","tableName"]},{type:"object",title:"FilesPermission",properties:{type:{const:"files"},action:{type:"string",enum:["read","write","delete"]},condition:{type:"string",description:"Glob pattern to match file paths"}},required:["type","action"]},{type:"object",title:"ConnectorsPermission",properties:{type:{const:"connections"},connectionName:{type:"string"},connectorType:{type:"string"},action:{type:"string"},condition:{type:"object",additionalProperties:{type:"string"}}},required:["type","connectionName","action"]}]}};function pn(s){return{name:"getPrompt",description:"Get the current prompt text that the user has entered in the agent form. Use this to understand what the user wants the agent to do.",payloadSchema:{type:"object",properties:{},required:[]},execute:async()=>({prompt:s.getPrompt()})}}function vn(s){return{name:"updatePermissions",description:`Update the agent permissions based on the user's prompt. Call this after reading the prompt to set appropriate permissions for the agent task. The permissions schema is: ${JSON.stringify(Be)}`,payloadSchema:{type:"object",properties:{permissions:Be},required:["permissions"]},execute:async t=>{const e=t.permissions;return s.setPermissions(e),{success:!0,permissionsCount:e.length,permissions:e}}}}function hn(s){return[pn(s),vn(s)]}const _n={class:"key-value-editor"},yn=me({__name:"KeyValueEditor",props:{modelValue:{}},emits:["update:modelValue"],setup(s,{emit:t}){const e=s,a=t,n=V([]);se(()=>e.modelValue,h=>{if(!h){n.value=[];return}const f=n.value.reduce((w,p)=>(p.key&&(w[p.key]=p.value),w),{});JSON.stringify(f)!==JSON.stringify(h)&&(n.value=Object.entries(h).map(([w,p])=>({key:w,value:p})))},{immediate:!0,deep:!0}),se(n,()=>{g()},{deep:!0});function o(){n.value.push({key:"",value:""})}function i(h){n.value.splice(h,1)}function g(){const h=n.value.reduce((f,w)=>(w.key&&(f[w.key]=w.value),f),{});a("update:modelValue",h)}return(h,f)=>(v(),D("div",_n,[(v(!0),D(de,null,fe(n.value,(w,p)=>(v(),D("div",{key:p,class:"kv-row"},[l(r(he),{value:w.key,"onUpdate:value":P=>w.key=P,placeholder:r(u).translate("i18n_agents_placeholder_key"),size:"small",style:{flex:"1"}},null,8,["value","onUpdate:value","placeholder"]),f[0]||(f[0]=x("span",{class:"separator"},":",-1)),l(r(he),{value:w.value,"onUpdate:value":P=>w.value=P,placeholder:r(u).translate("i18n_agents_placeholder_value"),size:"small",style:{flex:"1"}},null,8,["value","onUpdate:value","placeholder"]),l(X,{type:"text",size:"small",danger:"",class:"remove-btn",onClick:P=>i(p)},{default:c(()=>[l(r(Ue))]),_:1},8,["onClick"])]))),128)),l(X,{type:"dashed",size:"small",block:"",onClick:o},{default:c(()=>[l(r($e)),$(" "+C(r(u).translate("i18n_agents_add_condition")),1)]),_:1})]))}}),Ge=Ne(yn,[["__scopeId","data-v-30962401"]]),wn={class:"permissions-editor"},bn={key:0,class:"header"},xn={class:"permissions-list"},kn={style:{"text-transform":"capitalize"}},Tn={key:0,class:"permission-body"},Cn={key:1,class:"permission-body"},Dn={key:2,class:"permission-body"},Mn=me({__name:"PermissionsEditor",props:{modelValue:{},projectId:{}},emits:["update:modelValue"],setup(s,{expose:t,emit:e}){const a=s,n=e,o=V([]),i=V([]),g=V([]),h=V({}),f=V([]);se(()=>a.modelValue,b=>{JSON.stringify(b)!==JSON.stringify(o.value)&&(o.value=JSON.parse(JSON.stringify(b||[])),o.value.forEach(O=>{O.type==="connections"&&O.connectionName&&U(O.connectionName,O.connectorType)}))},{immediate:!0,deep:!0}),tt(async()=>{try{const b=await Pt.list(a.projectId);i.value=b.map(O=>({label:O.name,value:O.name})).sort((O,d)=>O.label.localeCompare(d.label))}catch(b){console.error("Failed to load tables",b)}try{const O=await new Ye().listConnections(a.projectId);f.value=O,g.value=O.map(d=>({label:d.name,value:d.name})).sort((d,T)=>d.label.localeCompare(T.label))}catch(b){console.error("Failed to load connections",b)}});function w(b){switch(b){case"tables":return at;case"files":return Le;case"connections":return nt;default:return Le}}function p(b){switch(b){case"tables":return u.translate("i18n_agents_perm_type_table");case"files":return u.translate("i18n_agents_perm_type_file");case"connections":return u.translate("i18n_agents_perm_type_connection");default:return b}}function P(b){let O;if(b==="tables")O={type:"tables",action:void 0,tableName:"",condition:{}};else if(b==="files")O={type:"files",action:void 0,condition:""};else if(b==="connections")O={type:"connections",action:"",connectionName:"",connectorType:"",condition:{}};else return;o.value.push(O),S()}function M(b,O){O.action="";const d=f.value.find(T=>T.name===b);d&&(O.connectorType=d.connectionType,U(b,d.connectionType)),S()}async function U(b,O){if(!b||h.value[b])return;let d=O;if(d||(d=f.value.find(k=>k.name===b)?.connectionType),!!d)try{const k=await new Ye().getConnection(a.projectId,d,b);k.actions&&(h.value[b]=k.actions.map(j=>({label:j.name,value:j.name})).sort((j,Z)=>j.label.localeCompare(Z.label)))}catch(T){console.error("Failed to load connection actions",T)}}function Y(b){o.value.splice(b,1),S()}function S(){n("update:modelValue",o.value)}return t({addPermission:P}),(b,O)=>(v(),D("div",wn,[o.value.length>0?(v(),D("div",bn,[l(r(B),{strong:""},{default:c(()=>[$(C(r(u).translate("i18n_agents_permissions_title")),1)]),_:1})])):F("",!0),x("div",xn,[(v(!0),D(de,null,fe(o.value,(d,T)=>(v(),W(r(Se),{key:T,size:"small",class:"permission-card"},{title:c(()=>[l(r(z),{align:"center",gap:"8"},{default:c(()=>[(v(),W(ct(w(d.type)),{class:"type-icon"})),x("span",kn,C(p(d.type)),1)]),_:2},1024)]),extra:c(()=>[l(X,{type:"text",danger:"",size:"small",onClick:k=>Y(T)},{default:c(()=>[l(r(Ue))]),_:1},8,["onClick"])]),default:c(()=>[d.type==="tables"?(v(),D("div",Tn,[l(r(G),{label:r(u).translate("i18n_agents_label_table"),class:"mb-2"},{default:c(()=>[l(r(le),{value:d.tableName,"onUpdate:value":k=>d.tableName=k,options:i.value,placeholder:r(u).translate("i18n_agents_placeholder_select_table"),"show-search":"","option-filter-prop":"label",onChange:S},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1032,["label"]),l(r(G),{label:r(u).translate("i18n_agents_label_action"),class:"mb-2"},{default:c(()=>[l(r(le),{value:d.action,"onUpdate:value":k=>d.action=k,options:[{value:"select",label:r(u).translate("i18n_agents_perm_action_select")},{value:"insert",label:r(u).translate("i18n_agents_perm_action_insert")},{value:"update",label:r(u).translate("i18n_agents_perm_action_update")},{value:"delete",label:r(u).translate("i18n_agents_perm_action_delete")}],placeholder:r(u).translate("i18n_agents_placeholder_select_action"),"show-search":"","option-filter-prop":"label"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1032,["label"]),l(r(G),{label:r(u).translate("i18n_agents_label_conditions"),class:"mb-0"},{default:c(()=>[l(Ge,{modelValue:d.condition,"onUpdate:modelValue":[k=>d.condition=k,S]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"])])):d.type==="files"?(v(),D("div",Cn,[l(r(G),{label:r(u).translate("i18n_agents_label_action"),class:"mb-2"},{default:c(()=>[l(r(le),{value:d.action,"onUpdate:value":k=>d.action=k,options:[{value:"read",label:r(u).translate("i18n_agents_perm_action_read")},{value:"write",label:r(u).translate("i18n_agents_perm_action_write")},{value:"delete",label:r(u).translate("i18n_agents_perm_action_delete")}],placeholder:r(u).translate("i18n_agents_placeholder_select_action"),"show-search":"","option-filter-prop":"label"},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1032,["label"]),l(r(G),{label:r(u).translate("i18n_agents_label_path_pattern"),class:"mb-0"},{default:c(()=>[l(r(he),{value:d.condition,"onUpdate:value":k=>d.condition=k,placeholder:r(u).translate("i18n_agents_placeholder_glob_example"),onChange:S},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["label"])])):d.type==="connections"?(v(),D("div",Dn,[l(r(G),{label:r(u).translate("i18n_agents_label_connection"),class:"mb-2"},{default:c(()=>[l(r(le),{value:d.connectionName,"onUpdate:value":k=>d.connectionName=k,options:g.value,placeholder:r(u).translate("i18n_agents_placeholder_select_connection"),"show-search":"","option-filter-prop":"label",onChange:k=>M(k,d)},null,8,["value","onUpdate:value","options","placeholder","onChange"])]),_:2},1032,["label"]),l(r(G),{label:r(u).translate("i18n_agents_label_action"),class:"mb-2"},{default:c(()=>[l(r(le),{value:d.action,"onUpdate:value":k=>d.action=k,options:h.value[d.connectionName]||[],placeholder:r(u).translate("i18n_agents_placeholder_select_action"),disabled:!d.connectionName,"show-search":"","option-filter-prop":"label",onChange:S},null,8,["value","onUpdate:value","options","placeholder","disabled"])]),_:2},1032,["label"]),l(r(G),{label:r(u).translate("i18n_agents_label_conditions"),class:"mb-0"},{default:c(()=>[l(Ge,{modelValue:d.condition,"onUpdate:modelValue":[k=>d.condition=k,S]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"])])):F("",!0)]),_:2},1024))),128))])]))}}),On=Ne(Mn,[["__scopeId","data-v-8765ad8b"]]),ae="new-run",Ln=dt("agents",()=>{const s=new gn,t="browser",e=V([]),a=V(null),n=V(null),o=V(!1),i=V(!1),g=ft({prompt:"",permissions:[],secrets:{}});let h=null,f=null;async function w(d){i.value=!0;try{const T=await s.listRuns(d,t);e.value=T.runs||[]}catch(T){console.error("Failed to load runs",T)}finally{i.value=!1}}async function p(d,T){if(!T||T===ae){n.value=null;return}try{const k=await s.getRun(d,t,T);n.value=k}catch(k){console.error("Failed to fetch run details",k)}}function P(d){h||(w(d),h=window.setInterval(()=>w(d),1e4))}function M(){h&&(clearInterval(h),h=null)}function U(d){if(f)return;const T=()=>{a.value&&a.value!==ae&&p(d,a.value)};T(),f=window.setInterval(T,3e3)}function Y(){f&&(clearInterval(f),f=null)}async function S(d){if(g.prompt.trim()){o.value=!0;try{const T=Object.keys(g.secrets).length>0?g.secrets:void 0,k=await s.runAgent(d,t,g.prompt,g.permissions,T);pe.success({message:u.translate("i18n_agents_create_run_success")}),g.prompt="",g.secrets={},await w(d),k.runId&&O(k.runId)}catch(T){pe.error({message:u.translate("i18n_agents_create_run_error"),description:T instanceof Error?T.message:String(T)})}finally{o.value=!1}}}async function b(d,T){try{await s.cancelRun(d,t,T),pe.success({message:u.translate("i18n_agents_cancel_run_success")}),await w(d),a.value===T&&await p(d,T)}catch(k){pe.error({message:u.translate("i18n_agents_cancel_run_error"),description:k instanceof Error?k.message:String(k)})}}function O(d){a.value=d}return{runs:e,selectedRunId:a,selectedRunDetails:n,creatingRun:o,loadingRuns:i,createFormState:g,loadRuns:w,loadRunDetails:p,createRun:S,cancelRun:b,selectRun:O,startRunsPolling:P,stopRunsPolling:M,startDetailsPolling:U,stopDetailsPolling:Y}}),Sn={style:{padding:"16px"}},$n={class:"icon-wrapper"},Pn={style:{"font-weight":"500","font-size":"14px"}},Un={class:"sidebar-runs-container",style:{flex:"1",overflow:"auto",padding:"0 8px 16px 8px",height:"100%"}},Nn=["onClick"],In={style:{display:"flex","align-items":"center",gap:"10px",overflow:"hidden"}},En={class:"run-title"},An={class:"run-time"},Yn={key:0,style:{flex:"1","overflow-y":"auto","overflow-x":"hidden",padding:"24px",background:"#fafafa","min-height":"0"}},Rn={style:{"max-width":"800px",margin:"0 auto"}},Hn={style:{"text-align":"center","margin-bottom":"32px"}},Wn={style:{background:"#fdeef0",width:"64px",height:"64px","border-radius":"16px",display:"flex","align-items":"center","justify-content":"center",margin:"0 auto 16px"}},Fn={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-top":"8px"}},Vn={style:{display:"flex","align-items":"center",gap:"12px"}},jn={style:{"font-size":"13px","margin-left":"4px"}},zn={class:"secrets-section",style:{"margin-top":"24px"}},qn={style:{"font-weight":"500","font-size":"14px"}},Zn={key:0,class:"empty-secrets-state"},Bn={style:{color:"#8c8c8c","font-size":"13px"}},Gn={style:{"margin-top":"8px"}},Qn={key:1,style:{height:"100%",display:"flex","flex-direction":"column"}},Xn={style:{padding:"24px","border-bottom":"1px solid #f0f0f0","flex-shrink":"0"}},Kn={style:{display:"flex","justify-content":"space-between","align-items":"flex-start","margin-bottom":"16px"}},Jn={style:{flex:"1","overflow-y":"auto","overflow-x":"hidden",padding:"24px",background:"#fafafa","min-height":"0",height:"0"}},er={key:0,style:{"text-align":"center",color:"#999",padding:"40px"}},tr={class:"step-card"},ar={class:"step-header"},nr={key:0,class:"step-body"},rr={key:0,class:"step-screenshot"},sr={key:2,style:{height:"100%",display:"flex","align-items":"center","justify-content":"center"}},or=me({__name:"Agents",setup(s){const e=mt().params.projectId,a=Ln(),n=V(null),o=Ot();o.init("console",e);function i(){return u.getLocale()==="pt"?It:Pe}const{runs:g,selectedRunId:h,selectedRunDetails:f,creatingRun:w,createFormState:p}=gt(a);let P=0;const M=V([]);let U=!1;function Y(){M.value=Object.entries(p.value.secrets).map(([m,_])=>({id:P++,key:m,value:_}))}function S(){U=!0;const m={};for(const _ of M.value)_.key.trim()&&(m[_.key.trim()]=_.value);p.value.secrets=m,setTimeout(()=>{U=!1},0)}se(()=>p.value.secrets,()=>{U||Y()},{immediate:!0,deep:!0});const b=R(()=>p.value.prompt.trim().length<40||!Mt.safeParse(p.value.permissions).success?!1:p.value.permissions.every(_=>_.type==="tables"?!!_.tableName:_.type==="connections"?!!_.connectionName&&!!_.action:!0));tt(()=>{a.selectRun(ae),a.startRunsPolling(e)}),pt(()=>{a.stopRunsPolling(),a.stopDetailsPolling()}),se(h,async m=>{m&&m!==ae?await a.loadRunDetails(e,m):a.stopDetailsPolling()});const O=()=>({getPrompt:()=>p.value.prompt,getPermissions:()=>p.value.permissions,setPermissions:m=>{p.value.permissions=m}});function d(m){const _=m.key;_==="generate-ai"?T():n.value?.addPermission(_)}async function T(){if(!p.value.prompt.trim()){Dt.warning({title:u.translate("i18n_agents_generate_ai_no_prompt_title"),content:u.translate("i18n_agents_generate_ai_no_prompt_content")});return}const m=o.controller;if(!m){console.error("SmartChatController not available");return}try{const _=O(),y=hn(_);m.clearBrowserTools(),m.registerBrowserTools(y);const A=u.translate("i18n_agents_ai_permissions_instruction");o.open(),m.setInput(A),await m.send()}catch(_){console.error("Error generating permissions with AI:",_)}}function k(){a.createRun(e)}function j(){const m=M.value.map(A=>A.key);let _="secret",y=1;for(;m.includes(_);)_=`secret_${y}`,y++;M.value.push({id:P++,key:_,value:""}),S()}function Z(m){const _=M.value.findIndex(y=>y.id===m);_!==-1&&(M.value.splice(_,1),S())}function oe(m,_){const y=M.value.find(A=>A.id===m);y&&(y.key=_,S())}function ie(m,_){const y=M.value.find(A=>A.id===m);y&&(y.value=_,S())}function ne(m){a.cancelRun(e,m)}function be(m){switch(m){case"running":return"#3b82f6";case"completed":return"#10b981";case"failed":return"#ef4444";case"pending":return"#f59e0b";default:return"#9ca3af"}}function xe(m){switch(m){case"running":return u.translate("i18n_agents_status_running");case"completed":return u.translate("i18n_agents_status_completed");case"failed":return u.translate("i18n_agents_status_failed");case"pending":return u.translate("i18n_agents_status_pending");default:return u.translate("i18n_agents_status_unknown")}}function ge(m){switch(m){case"success":return"#10b981";case"error":return"#ef4444";case"running":return"#3b82f6";case"tool_call":return"#8b5cf6";case"cancelled":case"timeout":return"#f59e0b";default:return"#9ca3af"}}const J=R(()=>f.value?g.value?.find(_=>_.runId===f.value?.runId)?.status||f.value.status:"unknown"),E=R(()=>["running","pending"].includes(J.value));se(J,m=>{m&&["running","pending"].includes(m)?a.startDetailsPolling(e):a.stopDetailsPolling()},{immediate:!0});const q=R(()=>f.value?.prompt||""),ee=R(()=>{const m=f.value?.result;return m?typeof m=="string"?m:JSON.stringify(m,null,2):""}),Ie=R(()=>f.value?.steps||[]),Ee=R(()=>{if(!f.value)return"";const m=new Date(f.value.startedAt),_=f.value.completedAt?new Date(f.value.completedAt):new Date,y=mn({start:m,end:_});return fn(y,{format:["minutes","seconds"]})||"< 1s"});function it(m){return m.startsWith("data:image")?m:`data:image/png;base64,${m}`}return(m,_)=>(v(),W(r(Yt),{class:"agents-view",style:{height:"100%"}},{default:c(()=>[r(g)&&r(g).length>0?(v(),W(r(Et),{key:0,width:"260",theme:"light",style:{"border-right":"1px solid #f0f0f0",display:"flex","flex-direction":"column",overflow:"hidden"}},{default:c(()=>[x("div",Sn,[x("div",{class:ke(["new-run-button",{active:r(h)===r(ae)}]),onClick:_[0]||(_[0]=y=>r(a).selectRun(r(ae)))},[l(r(z),{align:"center",gap:12},{default:c(()=>[x("div",$n,[l(r(De),{size:16})]),x("span",Pn,C(r(u).translate("i18n_agents_create_button")),1)]),_:1})],2)]),x("div",Un,[(v(!0),D(de,null,fe(r(g)||[],y=>(v(),D("div",{key:y.runId,class:ke(["sidebar-run-item",{active:r(h)===y.runId}]),onClick:A=>r(a).selectRun(y.runId)},[l(r(z),{align:"center",justify:"space-between",style:{width:"100%"}},{default:c(()=>[x("div",In,[x("div",{class:ke(["status-dot",y.status])},null,2),x("span",En,C(y.prompt),1)]),x("span",An,C(y.startedAt?r(Nt)(new Date(y.startedAt),{addSuffix:!0,locale:i()}):""),1)]),_:2},1024)],10,Nn))),128))])]),_:1})):F("",!0),l(r(At),{style:{background:"#fff",display:"flex","flex-direction":"column",overflow:"hidden","min-height":"0"}},{default:c(()=>[r(h)===r(ae)?(v(),D("div",Yn,[x("div",Rn,[x("div",Hn,[x("div",Wn,[l(r(De),{style:{"font-size":"32px",color:"#ea576a"}})]),l(r(Te),{level:2,style:{"margin-bottom":"8px","margin-top":"0"}},{default:c(()=>[$(C(r(u).translate("i18n_agents_create_button")),1)]),_:1}),l(r(B),{type:"secondary",style:{"font-size":"15px"}},{default:c(()=>[$(C(r(u).translate("i18n_agents_description")),1)]),_:1})]),l(r(vt),{layout:"vertical"},{default:c(()=>[l(r(G),null,{default:c(()=>[l(r(ht),{value:r(p).prompt,"onUpdate:value":_[1]||(_[1]=y=>r(p).prompt=y),rows:6,placeholder:r(u).translate("i18n_agents_field_prompt_placeholder"),style:{"border-radius":"8px","font-size":"15px","border-color":"#d9d9d9",padding:"12px"},onKeydown:_[2]||(_[2]=_t(yt(y=>b.value&&k(),["ctrl"]),["enter"]))},null,8,["value","placeholder"]),x("div",Fn,[x("div",Vn,[l(r(wt),{trigger:["click"]},{overlay:c(()=>[l(r(bt),{onClick:d},{default:c(()=>[l(r(ve),{key:"tables"},{default:c(()=>[l(r(z),{gap:"8",align:"center"},{default:c(()=>[l(r(at)),$(" "+C(r(u).translate("i18n_agents_perm_type_table")),1)]),_:1})]),_:1}),l(r(ve),{key:"files"},{default:c(()=>[l(r(z),{gap:"8",align:"center"},{default:c(()=>[l(r(Le)),$(" "+C(r(u).translate("i18n_agents_perm_type_file")),1)]),_:1})]),_:1}),l(r(ve),{key:"connections"},{default:c(()=>[l(r(z),{gap:"8",align:"center"},{default:c(()=>[l(r(nt)),$(" "+C(r(u).translate("i18n_agents_perm_type_connection")),1)]),_:1})]),_:1}),l(r(xt)),l(r(ve),{key:"generate-ai"},{default:c(()=>[l(r(z),{gap:"8",align:"center"},{default:c(()=>[l(r(St)),$(" "+C(r(u).translate("i18n_agents_generate_with_ai")),1)]),_:1})]),_:1})]),_:1})]),default:c(()=>[l(X,{type:"text",size:"small"},{default:c(()=>[l(r($e)),x("span",jn,C(r(u).translate("i18n_agents_add_permission")),1)]),_:1})]),_:1}),r(p).prompt.length>0&&r(p).prompt.length<40?(v(),W(r(B),{key:0,type:"secondary",style:{"font-size":"12px"}},{default:c(()=>[$(C(r(p).prompt.length)+"/40 ",1)]),_:1})):F("",!0)]),l(r(B),{type:"secondary",style:{"font-size":"12px"}},{default:c(()=>[l(r(B),{code:""},{default:c(()=>[..._[5]||(_[5]=[$("Ctrl + Enter",-1)])]),_:1}),$(" "+C(r(u).translate("i18n_agents_shortcut_to_run")),1)]),_:1})])]),_:1}),l(On,{ref_key:"permissionsEditorRef",ref:n,modelValue:r(p).permissions,"onUpdate:modelValue":_[3]||(_[3]=y=>r(p).permissions=y),"project-id":r(e)},null,8,["modelValue","project-id"]),x("div",zn,[l(r(z),{align:"center",justify:"space-between",style:{"margin-bottom":"12px"}},{default:c(()=>[l(r(z),{align:"center",gap:8},{default:c(()=>[l(r(Lt),{size:16}),x("span",qn,C(r(u).translate("i18n_agents_secrets_title")),1)]),_:1}),l(X,{size:"small",type:"dashed",onClick:j},{default:c(()=>[l(r($e),{size:14}),$(" "+C(r(u).translate("i18n_agents_add_secret")),1)]),_:1})]),_:1}),M.value.length===0?(v(),D("div",Zn,[x("span",Bn,C(r(u).translate("i18n_agents_secrets_empty")),1)])):(v(),W(r(z),{key:1,vertical:"",gap:8},{default:c(()=>[(v(!0),D(de,null,fe(M.value,y=>(v(),D("div",{key:y.id,class:"secret-row"},[l(r(z),{gap:8,align:"center"},{default:c(()=>[l(r(he),{value:y.key,placeholder:r(u).translate("i18n_agents_secret_key_placeholder"),style:{width:"140px"},onInput:A=>oe(y.id,A.target.value)},null,8,["value","placeholder","onInput"]),l(r(kt),{value:y.value,placeholder:r(u).translate("i18n_agents_secret_value_placeholder"),style:{flex:"1"},onInput:A=>ie(y.id,A.target.value)},null,8,["value","placeholder","onInput"]),l(X,{type:"text",danger:"",size:"small",onClick:A=>Z(y.id)},{default:c(()=>[l(r(Ue),{size:16})]),_:1},8,["onClick"])]),_:2},1024)]))),128))]),_:1}))]),x("div",Gn,[l(X,{type:"primary",size:"large",loading:r(w),disabled:!b.value,style:{width:"100%",height:"48px","border-radius":"8px","font-weight":"600"},onClick:k},{default:c(()=>[l(r(De),{style:{"font-size":"20px"}}),$(" "+C(r(u).translate("i18n_agents_create_button")),1)]),_:1},8,["loading","disabled"])])]),_:1})])])):r(f)?(v(),D("div",Qn,[x("div",Xn,[x("div",Kn,[x("div",null,[l(r(Te),{level:3,style:{"margin-bottom":"8px","margin-top":"0"}},{default:c(()=>[$(C(r(u).translate("i18n_agents_details_run_prefix"))+" #"+C(r(f).runId.slice(0,8)),1)]),_:1}),l(r(He),null,{default:c(()=>[l(r(Ae),{color:be(J.value)},{default:c(()=>[$(C(xe(J.value)),1)]),_:1},8,["color"]),l(r(B),{type:"secondary"},{default:c(()=>[$(C(r(u).translate("i18n_agents_details_started"))+" "+C(r(Ze)(new Date(r(f).startedAt),"dd/MM/yyyy HH:mm:ss")),1)]),_:1}),Ee.value?(v(),W(r(B),{key:0,type:"secondary"},{default:c(()=>[$(C(r(u).translate("i18n_agents_details_duration"))+" "+C(Ee.value),1)]),_:1})):F("",!0)]),_:1})]),["running","pending"].includes(J.value)?(v(),W(X,{key:0,danger:"",onClick:_[4]||(_[4]=y=>ne(r(f).runId))},{default:c(()=>[l(r($t)),$(" "+C(r(u).translate("i18n_agents_action_cancel")),1)]),_:1})):F("",!0)])]),x("div",Jn,[l(r(He),{direction:"vertical",size:"large",style:{width:"100%"}},{default:c(()=>[l(r(Se),{title:r(u).translate("i18n_agents_section_prompt"),size:"small",bordered:!1},{default:c(()=>[l(r(Ce),{style:{"white-space":"pre-wrap","font-family":"monospace","margin-bottom":"0"}},{default:c(()=>[$(C(q.value),1)]),_:1})]),_:1},8,["title"]),ee.value?(v(),W(r(Se),{key:0,title:r(u).translate("i18n_agents_section_response"),size:"small",bordered:!1,style:{border:"1px solid #b7eb8f",background:"#f6ffed"}},{default:c(()=>[l(r(Ce),{style:{"white-space":"pre-wrap","font-family":"monospace","margin-bottom":"0",color:"#333"}},{default:c(()=>[$(C(ee.value),1)]),_:1})]),_:1},8,["title"])):F("",!0),x("div",null,[l(r(Te),{level:5,style:{"margin-bottom":"16px","margin-top":"0"}},{default:c(()=>[$(C(r(u).translate("i18n_agents_section_messages")),1)]),_:1}),Ie.value.length===0&&!E.value?(v(),D("div",er,C(r(u).translate("i18n_agents_empty_messages")),1)):(v(),W(r(Ut),{key:1,mode:"alternate"},{default:c(()=>[(v(!0),D(de,null,fe(Ie.value,(y,A)=>(v(),W(r(Re),{key:A,color:ge(y.status)},{default:c(()=>[x("div",tr,[x("div",ar,[l(r(Ae),{color:ge(y.status),size:"small"},{default:c(()=>[$(C(r(u).translate("i18n_agents_step"))+" "+C(A+1),1)]),_:2},1032,["color"]),l(r(B),{type:"secondary",style:{"font-size":"11px"}},{default:c(()=>[$(C(r(Ze)(new Date(y.timestamp),"HH:mm:ss")),1)]),_:2},1024)]),y.screenshotBase64||y.message?(v(),D("div",nr,[y.screenshotBase64?(v(),D("div",rr,[l(r(Tt),{src:it(y.screenshotBase64),alt:r(u).translate("i18n_agents_screenshot_alt")},null,8,["src","alt"])])):F("",!0),y.message?(v(),W(r(Ce),{key:1,ellipsis:{rows:4,expandable:!0,symbol:r(u).translate("i18n_agents_see_more")},class:"step-message"},{default:c(()=>[$(C(y.message),1)]),_:2},1032,["ellipsis"])):F("",!0)])):F("",!0)])]),_:2},1032,["color"]))),128)),E.value?(v(),W(r(Re),{key:0,color:"blue"},{dot:c(()=>[l(r(Rt),{spin:"",style:{"font-size":"16px"}})]),default:c(()=>[l(r(B),{type:"secondary"},{default:c(()=>[$(C(r(u).translate("i18n_agents_processing")),1)]),_:1})]),_:1})):F("",!0)]),_:1}))])]),_:1})])])):(v(),D("div",sr,[l(r(Ct),{description:r(u).translate("i18n_agents_select_run_hint")},null,8,["description"])]))]),_:1})]),_:1}))}}),Lr=Ne(or,[["__scopeId","data-v-c7f48bbe"]]);export{Lr as default};
//# sourceMappingURL=Agents-Dkev7pTt.js.map
