var k=Object.defineProperty;var C=(r,n,l)=>n in r?k(r,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[n]=l;var m=(r,n,l)=>(C(r,typeof n!="symbol"?n+"":n,l),l);import{c as w,a as D,d as v}from"./FormRunner.58fd59ea.js";import{a as F}from"./asyncComputed.8e9069f6.js";import{u as g}from"./uuid.20b6ab30.js";import{L as x}from"./CircularLoading.c29fd1a6.js";import{W as I}from"./PlayerConfigProvider.7144815b.js";import{d as S,e3 as A,a6 as U,f as W,h as E,u as t,o as f,K as R,b as T,c as y,w as B,F as V,Q as q}from"./index.c0b21cc0.js";import"./userStore.4cd7e6c0.js";import"./Login.vue_vue_type_script_setup_true_lang.e1a65f1e.js";import"./Logo.6da75dde.js";import"./string.eac11c3b.js";import"./index.75446ff9.js";import"./Steps.00424dfa.js";import"./index.f03ee0a5.js";import"./Watermark.492581b9.js";import"./colorHelpers.d6cb93fe.js";import"./index.f971afc4.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},n=new Error().stack;n&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[n]="8c61d77e-2812-47fe-aa0c-0815cac13cd0",r._sentryDebugIdIdentifier="sentry-dbid-8c61d77e-2812-47fe-aa0c-0815cac13cd0")}catch{}})();const K={key:0,class:"loading"},N=S({__name:"MockForm",setup(r){const n=A(),l=U({playerKey:g()}),d=W(null);E(n,()=>{n.name==="form"&&M()});class _ extends v{constructor(e){super("mock","editor",{});m(this,"onMessage",null);m(this,"onOpen",null);this.renderMessage=e,this.onMessage=null}async newConnection(){var e;(e=this.onOpen)==null||e.call(this)}async send(e){var s,u;const c="seq"in e?e.seq:0;e.type==="execution:start"&&((s=this.onMessage)==null||s.call(this,{type:"execution:started",executionId:"1234"})),(u=this.onMessage)==null||u.call(this,{...this.renderMessage,seq:c})}async close(e){}isEditorConnection(){return!1}}function h(a){for(a=a.replace(/-/g,"+").replace(/_/g,"/");a.length%4;)a+="=";const i=atob(a),e=Uint8Array.from(i,s=>s.charCodeAt(0)),c=new TextDecoder().decode(e);return JSON.parse(c)}const{loading:p,result:o,error:b,refetch:M}=F(async()=>{l.playerKey=g();const a={isLocal:!1,runtimeType:"form",allowRestart:!1,autoStart:!0,endMessage:null,errorMessage:null,id:"b9980b87-9eaf-456b-a449-11df261a0840",isInitial:!0,path:"public-form",restartButtonText:null,startButtonText:null,startMessage:null,timeoutMessage:null,title:"Public form",welcomeTitle:null,brandName:"Abstra Project",fontFamily:"Inter",language:"en",logoUrl:null,mainColor:"#d14056",sidebar:[],theme:"#fcf0f2"},i=h(n.query.msg);console.log("renderMessage",i);const e=new w({formRunnerData:a,logService:null,connectionManager:new _(i),onRedirect:()=>null,onFormStart:()=>null,onFormEnd:()=>null,onStackTraceUpdate:null,onStateUpdate:s=>d.value=s}),c=e.getState();return d.value=c.formState,{runnerData:a,controller:e}});return(a,i)=>t(p)?(f(),R("div",K,[T(x)])):t(o)&&t(o).runnerData&&d.value&&!t(b)&&!t(p)?(f(),y(I,{key:1,style:{height:"100vh"},"main-color":t(o).runnerData.mainColor,background:t(o).runnerData.theme,"font-family":t(o).runnerData.fontFamily,locale:t(o).runnerData.language,"logo-url":t(o).runnerData.logoUrl},{default:B(()=>{var e,c,s,u;return[(f(),y(D,{key:l.playerKey,"form-runner-data":t(o).runnerData,"form-state":d.value,"is-preview":!1,"user-email":null,onRedirect:()=>null,onActionClicked:(e=t(o))==null?void 0:e.controller.handleActionClick,onUpdateWidgetErrors:(c=t(o))==null?void 0:c.controller.updateWidgetFrontendErrors,onUpdateWidgetValue:(s=t(o))==null?void 0:s.controller.updateWidgetValue,onAuthComplete:(u=t(o))==null?void 0:u.controller.handleAuthComplete},null,8,["form-runner-data","form-state","onActionClicked","onUpdateWidgetErrors","onUpdateWidgetValue","onAuthComplete"]))]}),_:1},8,["main-color","background","font-family","locale","logo-url"])):V("",!0)}});const re=q(N,[["__scopeId","data-v-1f2a95c6"]]);export{re as default};
//# sourceMappingURL=MockForm.d355d35d.js.map
