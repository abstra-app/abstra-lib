import{d as h,b as e,d2 as s,G as D,bu as f,ez as $,e as d,eA as k,f as y,v as R,H as B,eu as m,c as j,eT as T,eF as q,ey as A,u as I,w as C,ak as E,eX as N,eB as G,eC as L}from"./registerWidgets.d6e66474.js";import{b as O}from"./index.0eed7dd2.js";import{T as V,a as P}from"./TabMenuUnderline.5c57e80c.js";import"./gateway.651c554e.js";import{C as F}from"./connector.ebd6e5e3.js";import{a as U}from"./asyncComputed.5c362931.js";import{B as z}from"./BackButton.000dfb31.js";import{_ as H}from"./SaveButton.vue_vue_type_script_setup_true_lang.ed344e02.js";import{L as J}from"./CircularLoading.2744e4b0.js";import"./passwordlessManager.a2051844.js";import"./pubsub.9e806cff.js";import"./storage.d7eb729a.js";import"./activeRecord.1009e596.js";import"./lottie.b059da2e.js";(function(){try{var c=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},o=new Error().stack;o&&(c._sentryDebugIds=c._sentryDebugIds||{},c._sentryDebugIds[o]="b0bc10fc-87e8-4cbe-97d0-010c68c02aa7",c._sentryDebugIdIdentifier="sentry-dbid-b0bc10fc-87e8-4cbe-97d0-010c68c02aa7")}catch{}})();const X=["value"],Q=h({__name:"TextInput",props:{value:{},schema:{}},emits:["change"],setup(c,{emit:o}){return(r,n)=>(e(),s("input",{value:r.value,onChange:n[0]||(n[0]=t=>o("change",t.target.value))},null,40,X))}}),W=["value"],Y=h({__name:"NumberInput",props:{value:{},schema:{}},emits:["change"],setup(c,{emit:o}){return(r,n)=>(e(),s("input",{value:r.value,type:"number",onChange:n[0]||(n[0]=t=>o("change",t.target.value))},null,40,W))}}),Z=["value"],x=h({__name:"BooleanInput",props:{value:{type:Boolean},schema:{}},emits:["change"],setup(c,{emit:o}){return(r,n)=>(e(),s("input",{value:r.value,type:"checkbox",onChange:n[0]||(n[0]=t=>o("change",t.target.checked))},null,40,Z))}}),K={class:"oi"},ee={class:"oi-item-label"},te=h({__name:"ObjectInput",props:{value:{},schema:{}},emits:["change"],setup(c,{emit:o}){var g;const r=c,n=D({value:(g=r.value)!=null?g:{}}),t=(b,a)=>{n.value[b]=a,u()},u=()=>{o("change",n.value)};return(b,a)=>(e(),s("div",K,[(e(!0),s(f,null,$(r.schema.values,(v,i)=>(e(),s("div",{key:i,class:"oi-item"},[d("div",ee,k(i),1),y(M,{class:"oi-item-input",schema:v,value:n.value[i],onChange:_=>t(i,_)},null,8,["schema","value","onChange"])]))),128))]))}});const se=R(te,[["__scopeId","data-v-bd751ecc"]]),ne={class:"ai"},ae=["onClick"],oe=h({__name:"ArrayInput",props:{value:{},schema:{}},emits:["change"],setup(c,{emit:o}){var a;const n=D({value:(a=c.value)!=null?a:[]}),t=()=>{n.value.push(void 0)},u=v=>{n.value.splice(v,1),b()},g=(v,i)=>{n.value[v]=i,b()},b=()=>{o("change",n.value)};return(v,i)=>(e(),s("div",ne,[(e(!0),s(f,null,$(n.value,(_,l)=>(e(),s("div",{key:l,class:"ai-item"},[y(M,{schema:v.schema.items,value:_,onChange:p=>g(l,p)},null,8,["schema","value","onChange"]),d("button",{class:"ai-item-remove",onClick:p=>u(l)},"x",8,ae)]))),128)),d("button",{class:"ai-item-add",onClick:i[0]||(i[0]=_=>t())},"Add")]))}});const re=R(oe,[["__scopeId","data-v-a6c8b9fb"]]),ce=["value"],ue=["value"],le=h({__name:"OptionsInput",props:{value:{},schema:{}},emits:["change"],setup(c,{emit:o}){return(r,n)=>(e(),s("select",{value:r.value,onChange:n[0]||(n[0]=t=>o("change",t.target.value))},[(e(!0),s(f,null,$(r.schema.values,t=>(e(),s("option",{key:t,value:t},k(t),9,ue))),128))],40,ce))}}),ie=["value"],de=h({__name:"UnionInput",props:{value:{},schema:{}},emits:["change"],setup(c,{emit:o}){return(r,n)=>(e(),s("input",{value:r.value,onChange:n[0]||(n[0]=t=>o("change",t.target.value))},null,40,ie))}}),pe=["value"],_e=h({__name:"AnyInput",props:{value:{},schema:{}},emits:["change"],setup(c,{emit:o}){return(r,n)=>(e(),s("input",{value:r.value,onChange:n[0]||(n[0]=t=>o("change",t.target.value))},null,40,pe))}}),me={string:Q,number:Y,boolean:x,object:se,array:re,options:le,any:_e,union:de},he={class:"gi"},ve={key:0,class:"gi-header"},ge={key:0,class:"gi-label"},be={key:1,class:"gi-tags"},ye={key:0,class:"gi-required"},fe={key:1,class:"gi-required"},$e={key:1,class:"gi-description"},ke=h({__name:"GenericInput",props:{value:{},schema:{}},emits:["change"],setup(c,{emit:o}){const r=c,n=B(()=>({component:me[r.schema.type],props:{value:r.value,schema:r.schema}}));return(t,u)=>(e(),s("div",he,["label"in t.schema?(e(),s("div",ve,["label"in t.schema?(e(),s("label",ge,k(t.schema.label),1)):m("",!0),"required"in t.schema||"secret"in t.schema?(e(),s("div",be,["required"in t.schema&&t.schema.required?(e(),s("span",ye,"[Required]")):m("",!0),"secret"in t.schema&&t.schema.secret?(e(),s("span",fe,"[Secret]")):m("",!0)])):m("",!0)])):m("",!0),"description"in t.schema?(e(),s("div",$e,k(t.schema.description),1)):m("",!0),(e(),j(q(n.value.component),T({class:"gi-input"},n.value.props,{onChange:u[0]||(u[0]=g=>o("change",g))}),null,16))]))}});const M=R(ke,[["__scopeId","data-v-dd33d764"]]),w=c=>(G("data-v-63dce332"),c=c(),L(),c),Ie={class:"page settings"},Ce={class:"page test"},Be={class:"test-method-selector"},Me=w(()=>d("label",{class:"test-method-selector-label"},"Method",-1)),Re=w(()=>d("option",{value:null,disabled:"",selected:"",hidden:""},"Select a method",-1)),we=["value"],Se={key:0,class:"test-method-parameters"},je=w(()=>d("label",{class:"test-method-parameters-label"},"Params",-1)),De={key:1,class:"test-method-response"},Oe=w(()=>d("label",{class:"test-method-response-label"},"Response",-1)),Pe={key:0,class:"test-method-response-errors"},Te={key:1,class:"test-method-response-returns"},qe={class:"test-method-response-returns-value"},Ae=h({__name:"ConnectorEditor",setup(c){const o=B(()=>{var i;return`/projects/${(i=u.value)==null?void 0:i.projectId}/connectors`}),n=A().params.connectorId,{loading:t,result:u}=U(()=>F.get(n)),g=B(()=>{var i;return(i=u.value)!=null&&i.schema.methods?Object.keys(u.value.schema.methods).reduce((_,l)=>{const p=u.value.schema.methods[l];return[..._,{key:l,...p}]},[]):[]}),b=B(()=>!u.value||!(u.value.type in O.schema)?null:O.schema[u.value.type]),a=D({testMethod:null,testParams:{},testResponse:null}),v=async()=>{!u.value||!a.testMethod||!a.testParams||(a.testResponse=await u.value.test(a.testMethod,a.testParams))};return(i,_)=>I(t)||!I(u)||!b.value?(e(),j(J,{key:0})):(e(),j(V,{key:1,class:"connector-editor"},{left:C(()=>[y(z,{link:o.value},null,8,["link"])]),right:C(()=>[y(H,{model:I(u)},null,8,["model"])]),default:C(()=>[y(P,{title:"Settings"},{default:C(()=>[d("div",Ie,[(e(!0),s(f,null,$(b.value.settings,(l,p)=>(e(),s("div",{key:p},[y(M,{schema:l,value:I(u).settings[p],onChange:S=>I(u).settings[p]=S},null,8,["schema","value","onChange"])]))),128))])]),_:1}),y(P,{title:"Test"},{default:C(()=>[d("div",Ce,[d("div",Be,[Me,E(d("select",{"onUpdate:modelValue":_[0]||(_[0]=l=>a.testMethod=l),class:"test-method-selector-selector"},[Re,(e(!0),s(f,null,$(g.value,l=>(e(),s("option",{key:l.key,value:l.key},k(l.label),9,we))),128))],512),[[N,a.testMethod]])]),a.testMethod?(e(),s("div",Se,[je,(e(!0),s(f,null,$(I(u).schema.methods[a.testMethod].params,(l,p)=>(e(),s("div",{key:p,class:"test-field"},[y(M,{schema:l,value:a.testParams[p],onChange:S=>a.testParams[p]=S},null,8,["schema","value","onChange"])]))),128)),d("button",{class:"test-method-run",onClick:_[1]||(_[1]=l=>v())},"Test")])):m("",!0),a.testResponse?(e(),s("div",De,[Oe,a.testResponse.errors.length>0?(e(),s("div",Pe,[(e(!0),s(f,null,$(a.testResponse.errors,l=>(e(),s("div",{key:l},k(l),1))),128))])):m("",!0),a.testResponse.returns&&Object.keys(a.testResponse.returns).length>0?(e(),s("div",Te,[d("span",qe,[d("pre",null,k(JSON.stringify(a.testResponse.returns,null,2)),1)])])):m("",!0)])):m("",!0)])]),_:1})]),_:1}))}});const Ze=R(Ae,[["__scopeId","data-v-63dce332"]]);export{Ze as default};
//# sourceMappingURL=ConnectorEditor.c512ee85.js.map
