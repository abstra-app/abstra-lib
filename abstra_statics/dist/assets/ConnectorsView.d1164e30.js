var de=Object.defineProperty;var ue=(u,e,a)=>e in u?de(u,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):u[e]=a;var b=(u,e,a)=>(ue(u,typeof e!="symbol"?e+"":e,a),a);import{_ as pe}from"./DocsButton.vue_vue_type_script_setup_true_lang.661d7943.js";import{_ as P}from"./AbstraButton.vue_vue_type_script_setup_true_lang.077cd6e3.js";import{_ as J}from"./AbstraLogo.vue_vue_type_script_setup_true_lang.7bfd127f.js";import{d as D,am as x,c as _,o as c,a5 as h,a7 as Q,h as w,e6 as X,e as y,r as E,M as L,a as m,b as i,f as l,u as n,de as C,d4 as he,g,da as $,ed as Z,ea as ve,_ as ee,eb as ge,aR as A,A as B,d9 as N,ec as z,bP as me,bx as ye,bw as Y,bJ as U,cW as fe,cy as Ce,cE as we,db as _e,cz as He,eG as be,ew as ke,ex as Ae}from"./jwt-decode.esm.2def9750.js";import{G as Ve}from"./PhDotsThreeVertical.vue.b3976fe9.js";import{h as I,l as $e}from"./router.0d3a3ad1.js";import{G as xe}from"./PhWebhooksLogo.vue.d42a09ff.js";import{A as te}from"./index.afecdd43.js";import{C as ne}from"./Card.4642437c.js";import{U as Se}from"./UploadOutlined.2a7c9a8a.js";import{A as Me}from"./index.95c86fe9.js";import"./constants.0310b4e4.js";import"./Logo.6a1de22f.js";import"./index.3d889278.js";(function(){try{var u=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(u._sentryDebugIds=u._sentryDebugIds||{},u._sentryDebugIds[e]="a82dcf78-756d-4ce0-91a3-d40024fdcf28",u._sentryDebugIdIdentifier="sentry-dbid-a82dcf78-756d-4ce0-91a3-d40024fdcf28")}catch{}})();const Ie=["width","height","fill","transform"],Te={key:0},Ze=y("path",{d:"M216.49,184.49l-32,32a12,12,0,0,1-17-17L179,188H48a12,12,0,0,1,0-24H179l-11.52-11.51a12,12,0,0,1,17-17l32,32A12,12,0,0,1,216.49,184.49Zm-145-64a12,12,0,0,0,17-17L77,92H208a12,12,0,0,0,0-24H77L88.49,56.49a12,12,0,0,0-17-17l-32,32a12,12,0,0,0,0,17Z"},null,-1),je=[Ze],Ne={key:1},ze=y("path",{d:"M208,80v96H48V80Z",opacity:"0.2"},null,-1),Ue=y("path",{d:"M213.66,181.66l-32,32a8,8,0,0,1-11.32-11.32L188.69,184H48a8,8,0,0,1,0-16H188.69l-18.35-18.34a8,8,0,0,1,11.32-11.32l32,32A8,8,0,0,1,213.66,181.66Zm-139.32-64a8,8,0,0,0,11.32-11.32L67.31,88H208a8,8,0,0,0,0-16H67.31L85.66,53.66A8,8,0,0,0,74.34,42.34l-32,32a8,8,0,0,0,0,11.32Z"},null,-1),Ee=[ze,Ue],Le={key:2},De=y("path",{d:"M42.34,85.66a8,8,0,0,1,0-11.32l32-32A8,8,0,0,1,88,48V72H208a8,8,0,0,1,0,16H88v24a8,8,0,0,1-13.66,5.66Zm171.32,84.68-32-32A8,8,0,0,0,168,144v24H48a8,8,0,0,0,0,16H168v24a8,8,0,0,0,13.66,5.66l32-32A8,8,0,0,0,213.66,170.34Z"},null,-1),Fe=[De],Pe={key:3},Be=y("path",{d:"M212.24,171.76a6,6,0,0,1,0,8.48l-32,32a6,6,0,0,1-8.48-8.48L193.51,182H48a6,6,0,0,1,0-12H193.51l-21.75-21.76a6,6,0,0,1,8.48-8.48ZM75.76,116.24a6,6,0,0,0,8.48-8.48L62.49,86H208a6,6,0,0,0,0-12H62.49L84.24,52.24a6,6,0,0,0-8.48-8.48l-32,32a6,6,0,0,0,0,8.48Z"},null,-1),Re=[Be],qe={key:4},Ge=y("path",{d:"M213.66,181.66l-32,32a8,8,0,0,1-11.32-11.32L188.69,184H48a8,8,0,0,1,0-16H188.69l-18.35-18.34a8,8,0,0,1,11.32-11.32l32,32A8,8,0,0,1,213.66,181.66Zm-139.32-64a8,8,0,0,0,11.32-11.32L67.31,88H208a8,8,0,0,0,0-16H67.31L85.66,53.66A8,8,0,0,0,74.34,42.34l-32,32a8,8,0,0,0,0,11.32Z"},null,-1),Ke=[Ge],Oe={key:5},We=y("path",{d:"M210.83,173.17a4,4,0,0,1,0,5.66l-32,32a4,4,0,0,1-5.66-5.66L198.34,180H48a4,4,0,0,1,0-8H198.34l-25.17-25.17a4,4,0,0,1,5.66-5.66ZM77.17,114.83a4,4,0,0,0,5.66-5.66L57.66,84H208a4,4,0,0,0,0-8H57.66L82.83,50.83a4,4,0,0,0-5.66-5.66l-32,32a4,4,0,0,0,0,5.66Z"},null,-1),Je=[We],Ye={name:"PhArrowsLeftRight"},Qe=D({...Ye,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(u){const e=u,a=x("weight","regular"),t=x("size","1em"),r=x("color","currentColor"),f=x("mirrored",!1),v=_(()=>{var p;return(p=e.weight)!=null?p:a}),k=_(()=>{var p;return(p=e.size)!=null?p:t}),V=_(()=>{var p;return(p=e.color)!=null?p:r}),T=_(()=>e.mirrored!==void 0?e.mirrored?"scale(-1, 1)":void 0:f?"scale(-1, 1)":void 0);return(p,F)=>(c(),h("svg",X({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:k.value,height:k.value,fill:V.value,transform:T.value},p.$attrs),[Q(p.$slots,"default"),v.value==="bold"?(c(),h("g",Te,je)):v.value==="duotone"?(c(),h("g",Ne,Ee)):v.value==="fill"?(c(),h("g",Le,Fe)):v.value==="light"?(c(),h("g",Pe,Re)):v.value==="regular"?(c(),h("g",qe,Ke)):v.value==="thin"?(c(),h("g",Oe,Je)):w("",!0)],16,Ie))}}),Xe=["width","height","fill","transform"],et={key:0},tt=y("path",{d:"M224,64H180V56a28,28,0,0,0-28-28H104A28,28,0,0,0,76,56v8H32A20,20,0,0,0,12,84V192a20,20,0,0,0,20,20H224a20,20,0,0,0,20-20V84A20,20,0,0,0,224,64ZM100,56a4,4,0,0,1,4-4h48a4,4,0,0,1,4,4v8H100ZM220,88v32H196v-4a12,12,0,0,0-24,0v4H84v-4a12,12,0,0,0-24,0v4H36V88ZM36,188V144H60v4a12,12,0,0,0,24,0v-4h88v4a12,12,0,0,0,24,0v-4h24v44Z"},null,-1),nt=[tt],at={key:1},ot=y("path",{d:"M232,120v72a8,8,0,0,1-8,8H32a8,8,0,0,1-8-8V120Z",opacity:"0.2"},null,-1),lt=y("path",{d:"M224,64H176V56a24,24,0,0,0-24-24H104A24,24,0,0,0,80,56v8H32A16,16,0,0,0,16,80V192a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V80A16,16,0,0,0,224,64ZM96,56a8,8,0,0,1,8-8h48a8,8,0,0,1,8,8v8H96ZM32,80H224v32H192v-8a8,8,0,0,0-16,0v8H80v-8a8,8,0,0,0-16,0v8H32ZM224,192H32V128H64v8a8,8,0,0,0,16,0v-8h96v8a8,8,0,0,0,16,0v-8h32v64Z"},null,-1),it=[ot,lt],st={key:2},ct=y("path",{d:"M224,64H176V56a24,24,0,0,0-24-24H104A24,24,0,0,0,80,56v8H32A16,16,0,0,0,16,80v28a4,4,0,0,0,4,4H64V96.27A8.17,8.17,0,0,1,71.47,88,8,8,0,0,1,80,96v16h96V96.27A8.17,8.17,0,0,1,183.47,88,8,8,0,0,1,192,96v16h44a4,4,0,0,0,4-4V80A16,16,0,0,0,224,64Zm-64,0H96V56a8,8,0,0,1,8-8h48a8,8,0,0,1,8,8Zm80,68v60a16,16,0,0,1-16,16H32a16,16,0,0,1-16-16V132a4,4,0,0,1,4-4H64v16a8,8,0,0,0,8.53,8A8.17,8.17,0,0,0,80,143.73V128h96v16a8,8,0,0,0,8.53,8,8.17,8.17,0,0,0,7.47-8.25V128h44A4,4,0,0,1,240,132Z"},null,-1),rt=[ct],dt={key:3},ut=y("path",{d:"M224,66H174V56a22,22,0,0,0-22-22H104A22,22,0,0,0,82,56V66H32A14,14,0,0,0,18,80V192a14,14,0,0,0,14,14H224a14,14,0,0,0,14-14V80A14,14,0,0,0,224,66ZM94,56a10,10,0,0,1,10-10h48a10,10,0,0,1,10,10V66H94ZM32,78H224a2,2,0,0,1,2,2v34H190V104a6,6,0,0,0-12,0v10H78V104a6,6,0,0,0-12,0v10H30V80A2,2,0,0,1,32,78ZM224,194H32a2,2,0,0,1-2-2V126H66v10a6,6,0,0,0,12,0V126H178v10a6,6,0,0,0,12,0V126h36v66A2,2,0,0,1,224,194Z"},null,-1),pt=[ut],ht={key:4},vt=y("path",{d:"M224,64H176V56a24,24,0,0,0-24-24H104A24,24,0,0,0,80,56v8H32A16,16,0,0,0,16,80V192a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V80A16,16,0,0,0,224,64ZM96,56a8,8,0,0,1,8-8h48a8,8,0,0,1,8,8v8H96ZM224,80v32H192v-8a8,8,0,0,0-16,0v8H80v-8a8,8,0,0,0-16,0v8H32V80Zm0,112H32V128H64v8a8,8,0,0,0,16,0v-8h96v8a8,8,0,0,0,16,0v-8h32v64Z"},null,-1),gt=[vt],mt={key:5},yt=y("path",{d:"M224,68H172V56a20,20,0,0,0-20-20H104A20,20,0,0,0,84,56V68H32A12,12,0,0,0,20,80V192a12,12,0,0,0,12,12H224a12,12,0,0,0,12-12V80A12,12,0,0,0,224,68ZM92,56a12,12,0,0,1,12-12h48a12,12,0,0,1,12,12V68H92ZM32,76H224a4,4,0,0,1,4,4v36H188V104a4,4,0,0,0-8,0v12H76V104a4,4,0,0,0-8,0v12H28V80A4,4,0,0,1,32,76ZM224,196H32a4,4,0,0,1-4-4V124H68v12a4,4,0,0,0,8,0V124H180v12a4,4,0,0,0,8,0V124h40v68A4,4,0,0,1,224,196Z"},null,-1),ft=[yt],Ct={name:"PhToolbox"},wt=D({...Ct,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(u){const e=u,a=x("weight","regular"),t=x("size","1em"),r=x("color","currentColor"),f=x("mirrored",!1),v=_(()=>{var p;return(p=e.weight)!=null?p:a}),k=_(()=>{var p;return(p=e.size)!=null?p:t}),V=_(()=>{var p;return(p=e.color)!=null?p:r}),T=_(()=>e.mirrored!==void 0?e.mirrored?"scale(-1, 1)":void 0:f?"scale(-1, 1)":void 0);return(p,F)=>(c(),h("svg",X({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:k.value,height:k.value,fill:V.value,transform:T.value},p.$attrs),[Q(p.$slots,"default"),v.value==="bold"?(c(),h("g",et,nt)):v.value==="duotone"?(c(),h("g",at,it)):v.value==="fill"?(c(),h("g",st,rt)):v.value==="light"?(c(),h("g",dt,pt)):v.value==="regular"?(c(),h("g",ht,gt)):v.value==="thin"?(c(),h("g",mt,ft)):w("",!0)],16,Xe))}});function _t(u){return new Promise((e,a)=>{const t=new FileReader;t.onload=()=>{const f=t.result.split(",")[1];e(f)},t.onerror=()=>a(t.error),t.readAsDataURL(u)})}class Ht{async generateEcdsaKey(e){const{projectId:a,connectionName:t,connectorType:r}=e;return I.post(`projects/${a}/connectors/${r}/connections/${t}/ecdsa-key`,{})}async getLoginUrl(e,a,t,r){return I.get(`projects/${e}/connectors/${t}/connections/${a}/login-url`,{scopeIds:r.join(",")})}async listConnectors(e){return I.get(`projects/${e}/connectors`)}async createTokenConnection(e){const{projectId:a,connectionName:t,connectorType:r,tokens:f}=e,v={type:"tokens",tokens:f};return I.post(`projects/${a}/connectors/${r}/connections/${t}`,v)}async listConnections(e){return I.get(`projects/${e}/connections`)}async deleteConnection(e){const{projectId:a,connectionName:t,connectorType:r}=e;return I.delete(`projects/${a}/connectors/${r}/connections/${t}`)}async renameConnection(e){const{projectId:a,connectionName:t,connectorType:r,newConnectionName:f}=e;return I.patch(`projects/${a}/connectors/${r}/connections/${t}`,{newConnectionName:f})}}class bt{constructor(e,a){b(this,"state");b(this,"hasChanges",_(()=>!!this.state.value.editingConnection&&this.state.value.editingConnection.name!==this.state.value.editingConnection.newName));b(this,"handleDeletionClick",async e=>{L.confirm({title:"Delete connection",content:"Are you sure you want to delete this connection?",onOk:()=>this.handleDeleteConnection(e)})});b(this,"handleDeleteConnection",async e=>{await this.api.deleteConnection({projectId:this.projectId,connectionName:e.name,connectorType:e.connectorType}),this.state.value.editingConnection=null,await this.refetchConnections()});b(this,"handleAddConnectionSubmit",async()=>{var r,f;const e=(r=this.state.value.addingConnection)==null?void 0:r.connector.metadata.key,a=(f=this.state.value.addingConnection)==null?void 0:f.selectedScopeIds;if(!e||!a)throw new Error("No connector or scope selected");const{url:t}=await this.getLoginUrl(e,this.getUniqueName(e),a);window.location.href=t});b(this,"handleAddTokenConnectionSubmit",async()=>{const e=this.state.value.addingConnection;if(!e)throw new Error("No connection is being added");const a=e.connector.metadata.key,t=this.getUniqueName(a);await this.api.createTokenConnection({projectId:this.projectId,connectionName:t,connectorType:a,tokens:e.tokenValues}),this.state.value.addingConnection=null,await this.refetchConnections()});b(this,"handleAddEcdsaConnectionSubmit",async e=>{if(!this.state.value.addingConnection||!e)throw new Error("No connection is being added or public key is missing");this.state.value.addingConnection=null,await this.refetchConnections()});b(this,"renameConnection",async()=>{const{editingConnection:e}=this.state.value;if(!e)throw new Error("No connection is being edited");const a=async()=>{await this.api.renameConnection({projectId:this.projectId,connectionName:e.name,connectorType:e.connectorType,newConnectionName:e.newName}),await this.refetchConnections(),this.state.value.editingConnection=null};L.confirm({title:"Rename connection",content:"Are you sure you want to rename this connection? This will break any existing references to the old name.",onOk:a})});b(this,"showAddConfirmationModal",e=>{this.state.value.addingConnection={selectedScopeIds:e.auth.type==="oauth2"?e.auth.scopes.map(a=>a.key):[],connector:e,tokenValues:{}}});b(this,"handleScopeToggle",(e,a)=>{a?this.state.value.addingConnection.selectedScopeIds.push(e):this.state.value.addingConnection.selectedScopeIds=this.state.value.addingConnection.selectedScopeIds.filter(t=>t!==e)});this.projectId=e,this.api=a,this.state=E({connectors:[],connections:[],addingConnection:null,editingConnection:null})}async fetchConnectors(){this.state.value.connectors=await this.api.listConnectors(this.projectId)}async fetchInitialState(){await this.fetchConnectors(),await this.refetchConnections()}async refetchConnections(){this.state.value.connections=(await this.api.listConnections(this.projectId)).map(e=>{const a=this.state.value.connectors.find(t=>t.metadata.key===e.connectionType);if(!a)throw new Error(`Unknown connector type: ${e.connectionType}`);return{name:e.name,connectorTitle:a.metadata.label,connectorType:e.connectionType,icon:a.metadata.logoUrl}})}handleEditConnectionClick(e){this.state.value.editingConnection={...e,newName:e.name}}async getLoginUrl(e,a,t){return this.api.getLoginUrl(this.projectId,a,e,t)}slugify(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-")}getUniqueName(e){const a=this.state.value.connections.filter(t=>t.connectorType===e).length;return a===0?e:`${e}-${a}`}async generateEcdsaKey(){const e=this.state.value.addingConnection;if(!e)throw new Error("No connection is being added");const a=e.connector.metadata.key,t=this.getUniqueName(a),{publicKey:r}=await this.api.generateEcdsaKey({projectId:this.projectId,connectionName:t,connectorType:a});return r}}const kt=D({__name:"ConnectorCard",props:{title:{},logoUrl:{},description:{},unavailable:{type:Boolean},connector:{}},setup(u){const e=u,a=_(()=>{var r;return((r=e.connector)==null?void 0:r.triggers)&&e.connector.triggers.length>0}),t=_(()=>{var r;return((r=e.connector)==null?void 0:r.actions)&&e.connector.actions.length>0});return(r,f)=>(c(),m(n(ne),{class:ve({"connector-card":!0,unavailable:r.unavailable})},{default:i(()=>[l(n(C),{style:{width:"100%"},vertical:"",gap:12},{default:i(()=>[l(n(C),{justify:"space-between"},{default:i(()=>[l(n(te),{src:r.logoUrl,shape:"square",size:"large"},null,8,["src"]),l(n(C),{gap:8},{default:i(()=>[a.value?(c(),m(n(xe),{key:0,size:16})):w("",!0),t.value?(c(),m(n(wt),{key:1,size:16})):w("",!0),r.unavailable?(c(),m(n(he),{key:2,style:{height:"fit-content"}},{default:i(()=>[g("Talk to us")]),_:1})):w("",!0)]),_:1})]),_:1}),l(n(C),{vertical:""},{default:i(()=>[l(n($),{strong:""},{default:i(()=>[g(Z(r.title),1)]),_:1}),l(n($),{type:"secondary"},{default:i(()=>[g(Z(r.description),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["class"]))}});const At=ee(kt,[["__scopeId","data-v-f5866f99"]]),Vt=u=>(ke("data-v-548dbddf"),u=u(),Ae(),u),$t=Vt(()=>y("div",{style:{"flex-grow":"1"}},null,-1)),xt={class:"connectors-grid"},St=D({__name:"ConnectorsView",setup(u){const a=ge().params.projectId,t=new bt(a,new Ht),r=_(()=>{var s;return((s=t.state.value.addingConnection)==null?void 0:s.connector.auth.type)==="oauth2"?t.state.value.addingConnection.connector.auth.scopes:[]}),f=_(()=>{var s;return((s=t.state.value.addingConnection)==null?void 0:s.connector.auth.type)==="tokens"?t.state.value.addingConnection.connector.auth.tokens:[]}),v=E(null),k=E(!1),V=E({});function T(){v.value=null,k.value=!1,V.value={}}async function p(){k.value=!0;try{const s=await t.generateEcdsaKey();v.value=s}finally{k.value=!1}}async function F(s,d){try{const H=await _t(s);V.value[d]={file:s,base64:H},t.state.value.addingConnection&&(t.state.value.addingConnection.tokenValues[d]=H)}catch(H){console.error("Error converting file to base64:",H)}return!1}function ae(s){delete V.value[s],t.state.value.addingConnection&&(t.state.value.addingConnection.tokenValues[s]="")}function oe(s){const d=V.value[s];return d?[{uid:s,name:d.file.name,status:"done",size:d.file.size}]:[]}const le=_(()=>[...t.state.value.connectors.filter(s=>s.auth.type==="oauth2"),...t.state.value.connectors.filter(s=>s.auth.type==="tokens"),...t.state.value.connectors.filter(s=>s.auth.type==="ecdsa"),...t.state.value.connectors.filter(s=>s.auth.type==="manual")]);t.fetchInitialState();function ie(){var d;switch((d=t.state.value.addingConnection)==null?void 0:d.connector.auth.type){case"oauth2":return"Authorize";case"tokens":return"Create Connection";case"ecdsa":return v.value?"Create Connection":"OK";default:return"OK"}}function se(){var d;switch((d=t.state.value.addingConnection)==null?void 0:d.connector.auth.type){case"oauth2":return t.handleAddConnectionSubmit();case"tokens":return t.handleAddTokenConnectionSubmit();case"ecdsa":{const H=t.handleAddEcdsaConnectionSubmit(v.value);return T(),H}}}function ce(s){var H,j;const d=[];return s.key&&d.push({required:!0,message:`${s.label||s.key} is required`}),(H=s.input)!=null&&H.minSize&&d.push({min:s.input.minSize,message:`Minimum length is ${s.input.minSize}`}),(j=s.input)!=null&&j.maxSize&&d.push({max:s.input.maxSize,message:`Maximum length is ${s.input.maxSize}`}),d}function re(s){s.auth.type==="manual"?$e.showNewMessage(be.translate("i18n_connectors_ask_for_access",null,s.metadata.label)):t.showAddConfirmationModal(s)}return(s,d)=>{var H,j;return c(),h(A,null,[l(n(Me),{direction:"vertical",style:{width:"100%","margin-bottom":"30px"}},{default:i(()=>[l(n(C),{align:"center",justify:"space-between"},{default:i(()=>[l(n(B),null,{default:i(()=>[g("Connectors")]),_:1})]),_:1}),l(n(N),null,{default:i(()=>[g(" Add and manage external integrations to your project. "),l(pe)]),_:1}),n(t).state.value.connections.length?(c(),m(n(C),{key:0,vertical:""},{default:i(()=>[l(n(B),{level:2},{default:i(()=>[g("Installed")]),_:1}),l(n(C),{vertical:"",gap:10},{default:i(()=>[(c(!0),h(A,null,z(n(t).state.value.connections,o=>(c(),m(n(ne),{key:o.name},{default:i(()=>[l(n(C),{align:"center",gap:20},{default:i(()=>[l(n(te),{src:o.icon,height:"40px",shape:"square"},null,8,["src"]),l(n($),{strong:""},{default:i(()=>[g(Z(o.connectorTitle),1)]),_:2},1024),$t,l(n($),{content:o.name,copyable:"",code:""},null,8,["content"]),l(n(me),null,{overlay:i(()=>[l(n(ye),null,{default:i(()=>[l(n(Y),{onClick:S=>n(t).handleEditConnectionClick(o)},{default:i(()=>[g(" Rename ")]),_:2},1032,["onClick"]),l(n(Y),{danger:"",onClick:S=>n(t).handleDeletionClick(o)},{default:i(()=>[g(" Delete ")]),_:2},1032,["onClick"])]),_:2},1024)]),default:i(()=>[l(n(Ve))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):w("",!0),l(n(C),{vertical:""},{default:i(()=>[n(t).state.value.connections.length?(c(),m(n(B),{key:0,level:2},{default:i(()=>[g("Available")]),_:1})):w("",!0),y("div",xt,[(c(!0),h(A,null,z(le.value,o=>(c(),m(At,{key:o.metadata.key,title:o.metadata.label,"logo-url":o.metadata.logoUrl,description:o.metadata.description,unavailable:o.auth.type==="manual",connector:o,onClick:S=>re(o)},null,8,["title","logo-url","description","unavailable","connector","onClick"]))),128))])]),_:1})]),_:1}),l(n(L),{open:!!n(t).state.value.editingConnection,title:`${(H=n(t).state.value.editingConnection)==null?void 0:H.connectorTitle} Connection`,onCancel:d[2]||(d[2]=o=>n(t).state.value.editingConnection=null)},{footer:i(()=>[l(n(C),{justify:"end"},{default:i(()=>[l(P,{disabled:!n(t).hasChanges.value,onClick:d[1]||(d[1]=o=>n(t).renameConnection())},{default:i(()=>[g(" Save ")]),_:1},8,["disabled"])]),_:1})]),default:i(()=>[n(t).state.value.editingConnection?(c(),m(n(U),{key:0,value:n(t).state.value.editingConnection.newName,"onUpdate:value":d[0]||(d[0]=o=>n(t).state.value.editingConnection.newName=o)},null,8,["value"])):w("",!0)]),_:1},8,["open","title"]),l(n(L),{open:!!n(t).state.value.addingConnection,title:`Add ${(j=n(t).state.value.addingConnection)==null?void 0:j.connector.metadata.label} Connection`,"ok-text":ie(),"wrap-class-name":"full-modal",onCancel:d[3]||(d[3]=()=>{n(t).state.value.addingConnection=null,T()}),onOk:se},{default:i(()=>[n(t).state.value.addingConnection?(c(),h(A,{key:0},[l(n(C),{justify:"center",align:"center",gap:20,style:{"margin-bottom":"24px",padding:"20px 0"}},{default:i(()=>[l(J,{"image-url":"/src/assets/logo.svg","brand-name":"Abstra",size:"medium","hide-text":""}),l(n(Qe),{size:24}),l(J,{"image-url":n(t).state.value.addingConnection.connector.metadata.logoUrl,"brand-name":n(t).state.value.addingConnection.connector.metadata.label,size:"medium","hide-text":""},null,8,["image-url","brand-name"])]),_:1}),n(t).state.value.addingConnection.connector.auth.type==="oauth2"?(c(),h(A,{key:0},[l(n(N),null,{default:i(()=>[g(" Please select the scopes you want to authorize for this connection. You can change these later by deleting and re-adding the connection. ")]),_:1}),l(n(C),{vertical:"",gap:"10",style:{margin:"30px 0px"}},{default:i(()=>[(c(!0),h(A,null,z(r.value,o=>(c(),m(n(C),{key:o.key,justify:"space-between",align:"center"},{default:i(()=>[l(n(C),{vertical:""},{default:i(()=>[l(n($),null,{default:i(()=>[g(Z(o.description),1)]),_:2},1024),l(n($),{type:"secondary"},{default:i(()=>[g(Z(o.key),1)]),_:2},1024)]),_:2},1024),l(n(fe),{checked:n(t).state.value.addingConnection.selectedScopeIds.includes(o.key),onChange:S=>n(t).handleScopeToggle(o.key,S)},null,8,["checked","onChange"])]),_:2},1024))),128))]),_:1})],64)):w("",!0),n(t).state.value.addingConnection.connector.auth.type==="tokens"?(c(),h(A,{key:1},[l(n(N),null,{default:i(()=>[g(" Please provide the required tokens/credentials for this connection. ")]),_:1}),l(n(Ce),{model:n(t).state.value.addingConnection.tokenValues,layout:"vertical"},{default:i(()=>[(c(!0),h(A,null,z(f.value,o=>(c(),m(n(He),{key:o.key,label:o.label,name:o.key,rules:ce(o)},{default:i(()=>{var S,R,q,G,K,O,W;return[((S=o.input)==null?void 0:S.type)==="small-string"?(c(),m(n(U),{key:0,value:n(t).state.value.addingConnection.tokenValues[o.key],"onUpdate:value":M=>n(t).state.value.addingConnection.tokenValues[o.key]=M,placeholder:o.description,maxlength:(R=o.input)==null?void 0:R.maxSize,minlength:(q=o.input)==null?void 0:q.minSize,type:"password"},null,8,["value","onUpdate:value","placeholder","maxlength","minlength"])):((G=o.input)==null?void 0:G.type)==="large-text"?(c(),m(n(we),{key:1,value:n(t).state.value.addingConnection.tokenValues[o.key],"onUpdate:value":M=>n(t).state.value.addingConnection.tokenValues[o.key]=M,placeholder:o.description,maxlength:(K=o.input)==null?void 0:K.maxSize,minlength:(O=o.input)==null?void 0:O.minSize,rows:4},null,8,["value","onUpdate:value","placeholder","maxlength","minlength"])):((W=o.input)==null?void 0:W.type)==="file"?(c(),m(n(_e),{key:2,"file-list":oe(o.key),"before-upload":M=>F(M,o.key),"max-count":1,"show-upload-list":!0,onRemove:()=>ae(o.key)},{default:i(()=>[l(P,null,{default:i(()=>[l(n(Se)),g(" Upload File ")]),_:1})]),_:2},1032,["file-list","before-upload","onRemove"])):(c(),m(n(U),{key:3,value:n(t).state.value.addingConnection.tokenValues[o.key],"onUpdate:value":M=>n(t).state.value.addingConnection.tokenValues[o.key]=M,placeholder:o.description,type:"password"},null,8,["value","onUpdate:value","placeholder"])),o.description?(c(),m(n($),{key:4,type:"secondary",style:{"font-size":"12px"}},{default:i(()=>[g(Z(o.description),1)]),_:2},1024)):w("",!0)]}),_:2},1032,["label","name","rules"]))),128))]),_:1},8,["model"])],64)):w("",!0),n(t).state.value.addingConnection.connector.auth.type==="ecdsa"?(c(),h(A,{key:2},[l(n(N),null,{default:i(()=>[g(" Gere um par de chaves ECDSA para autentica\xE7\xE3o. A chave privada ser\xE1 armazenada apenas no backend. Copie e salve a chave p\xFAblica abaixo para uso futuro. ")]),_:1}),l(n(C),{vertical:"",gap:"16"},{default:i(()=>[l(P,{loading:k.value,disabled:!!v.value,onClick:p},{default:i(()=>[g(" Gerar chave ")]),_:1},8,["loading","disabled"]),v.value?(c(),h(A,{key:0},[l(n($),{strong:""},{default:i(()=>[g("Chave p\xFAblica:")]),_:1}),l(n(U),{value:v.value,readonly:"",copyable:"",code:"",style:{"margin-top":"8px"}},null,8,["value"])],64)):w("",!0)]),_:1})],64)):w("",!0)],64)):w("",!0)]),_:1},8,["open","title","ok-text"])],64)}}});const qt=ee(St,[["__scopeId","data-v-548dbddf"]]);export{qt as default};
//# sourceMappingURL=ConnectorsView.d1164e30.js.map
