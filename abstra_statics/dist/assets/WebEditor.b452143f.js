var m=Object.defineProperty;var v=(t,e,i)=>e in t?m(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var s=(t,e,i)=>(v(t,typeof e!="symbol"?e+"":e,i),i);import{d as g,X as w,ah as y,o as a,c as l,w as r,b as o,u as n,dh as p,dd as I,aG as c,dc as u,cP as b,eF as x,eG as W,a as h,a0 as A,e as P,ef as j}from"./index.a1506152.js";import{_ as T}from"./AbstraLogo.vue_vue_type_script_setup_true_lang.c988a607.js";import{B as k}from"./BaseLayout.e8875241.js";import{l as f}from"./fetch.8f81a728.js";import"./gateway.36e126ca.js";import{a as E}from"./project.16717559.js";import"./tables.ca746641.js";import"./Logo.aea2420c.js";import"./popupNotifcation.7c2101f3.js";import"./record.d6bf7292.js";import"./string.a9f2e2e2.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="f6dff54d-d3e1-42e5-9090-c22bd16e60fb",t._sentryDebugIdIdentifier="sentry-dbid-f6dff54d-d3e1-42e5-9090-c22bd16e60fb")}catch{}})();const R=t=>(x("data-v-2536661a"),t=t(),W(),t),U=R(()=>h("div",{class:"video-container"},[h("iframe",{class:"responsive-iframe",src:"https://www.youtube.com/embed/videoseries?list=PLFPJgKA6K86ZdAHZ3aPWsrZHX_7jJ3Cc9&autoplay=1&mute=1",frameborder:"0",allow:"autoplay; picture-in-picture;",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:""})],-1)),V=g({__name:"View",props:{controller:{}},setup(t){const e=t,i=e.controller.loadingPercentage();return w(()=>{e.controller.start()}),y(()=>{e.controller.cleanUp()}),(d,_)=>(a(),l(k,null,{content:r(()=>[o(n(p),{align:"center",justify:"center",style:{width:"100vw",height:"100dvh"}},{default:r(()=>[o(n(p),{gap:"large",align:"center",vertical:"",style:{width:"45%","min-width":"600px"}},{default:r(()=>[o(T,{size:"large"}),U,o(n(I),{level:3},{default:r(()=>[c("Preparing your environment")]),_:1}),n(i)<100?(a(),l(n(u),{key:0},{default:r(()=>[c("We are setting things up... This may take up to 1 minute.")]),_:1})):(a(),l(n(u),{key:1},{default:r(()=>[c("You will be redirected soon")]),_:1})),o(n(b),{size:[10,10],"show-info":!1,percent:n(i),"stroke-color":"#EA576A"},null,8,["percent"])]),_:1})]),_:1})]),_:1}))}});const B=A(V,[["__scopeId","data-v-2536661a"]]);class C{constructor(e,i=f){s(this,"projectId");s(this,"loading");s(this,"fetch",f);s(this,"interval",null);s(this,"urls",null);s(this,"totalWaitTime");s(this,"poolingInterval");s(this,"pingResponded",!1);this.projectId=e,this.loading=P(0),this.fetch=i,this.totalWaitTime=6e4,this.poolingInterval=2500}increment(){this.loading.value+=100/(this.totalWaitTime/this.poolingInterval)}speedUp(){this.totalWaitTime=5e3,this.poolingInterval=500,this.interval&&clearInterval(this.interval),this.interval=setInterval(async()=>{this.increment(),this.loading.value>=100&&this.navigate()},this.poolingInterval)}navigate(){this.urls&&window.location.replace(this.urls.redirect),this.cleanUp()}async ping(){if(!this.urls)return!1;if(this.pingResponded)return!0;const e=await this.fetch(this.urls.ping,{signal:AbortSignal.timeout(500)});return this.pingResponded=e.status===200,this.pingResponded}async start(){const e=await E.startWebEditor(this.projectId);this.urls=e,this.interval=setInterval(async()=>{this.increment(),this.pingResponded||await this.ping()&&this.speedUp(),this.loading.value>=100&&this.navigate()},this.poolingInterval)}cleanUp(){this.interval&&clearInterval(this.interval)}loadingPercentage(){return this.loading}}const $=g({__name:"WebEditor",setup(t){const i=j().params.projectId,d=new C(i);return(_,D)=>(a(),l(B,{controller:n(d)},null,8,["controller"]))}});export{$ as default};
//# sourceMappingURL=WebEditor.b452143f.js.map
