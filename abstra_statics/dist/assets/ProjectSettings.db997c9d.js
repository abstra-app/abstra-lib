import{a as C}from"./asyncComputed.4c25409b.js";import{P as S}from"./project.eaa95a66.js";import"./console.80a42f1b.js";import{d as h,r as b,b as g,c as w,w as o,aJ as n,ey as I,u as a,c4 as E,cG as B,t as D,J as y,f as r,e as _,eC as j,bZ as T,eA as P,et as F,ew as V}from"./outputWidgets.75df2c6c.js";import"./index.50c5e781.js";import{n as N}from"./index.e3225393.js";import{c as A,A as H}from"./Title.de5720f2.js";import{A as R,a as f}from"./index.0a2703da.js";import{A as k}from"./index.a80e9f5f.js";import{F as $}from"./Form.c0328a64.js";import{A as x}from"./index.98621ec9.js";import"./gateway.dcef7bce.js";import"./activeRecord.5824d23b.js";import"./pubsub.01aac4ae.js";import"./CollapsePanel.1c0a5992.js";import"./index.ec013f94.js";import"./index.70117e20.js";import"./dayjs.0dc93a74.js";import"./index.fd4bfc8f.js";import"./index.ec94aa9a.js";import"./TabPane.4eb08ff3.js";import"./index.1a5c600f.js";import"./index.aabc4b68.js";import"./index.a54969a9.js";import"./index.6e2956ed.js";import"./index.8264e645.js";import"./index.be7d7e6f.js";import"./index.9f609020.js";(function(){try{var i=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},l=new Error().stack;l&&(i._sentryDebugIds=i._sentryDebugIds||{},i._sentryDebugIds[l]="d668f4ed-746a-48d6-bab4-c8fe8cccc830",i._sentryDebugIdIdentifier="sentry-dbid-d668f4ed-746a-48d6-bab4-c8fe8cccc830")}catch{}})();const J=h({__name:"SaveButton",props:{model:{},disabled:{type:Boolean}},emits:["error"],setup(i,{emit:l}){const t=i,d=b(!1),c=b(null);async function u(){d.value=!0;try{await t.model.save()}catch(e){e instanceof Error&&(l("error",e),B.error({message:"Error",description:e.message}),c.value=e)}finally{d.value=!1}}return addEventListener("keydown",e=>{(e.metaKey||e.ctrlKey)&&e.key==="s"&&(e.preventDefault(),u())}),addEventListener("beforeunload",e=>{t.model.hasChanges()&&(e.preventDefault(),e.returnValue="")}),(e,p)=>{var m,s,v;return g(),w(a(E),{class:I(["save-button",{changes:(m=e.model)==null?void 0:m.hasChanges()}]),loading:d.value,disabled:(v=e.disabled)!=null?v:!((s=e.model)!=null&&s.hasChanges()),onClick:p[0]||(p[0]=q=>u())},{default:o(()=>[n(" Save ")]),_:1},8,["class","loading","disabled"])}}}),K=h({__name:"SubdomainEditor",props:{project:{}},setup(i){const l=i,t=b(void 0),d=D.exports.debounce(async()=>{try{const{available:s}=await l.project.checkSubdomain();t.value=s?"available":"unavailable"}catch{t.value=void 0}},500);function c(){l.project.subdomain?(t.value="loading",d()):t.value="invalid"}const u=y(()=>{switch(t.value){case"invalid":return"error";case"loading":return"validating";case"available":return"success";case"unavailable":return"error";default:return}}),e=y(()=>{switch(t.value){case"loading":return"Checking availability...";case"available":return"Available";case"unavailable":return"Unavailable";case"invalid":return"Invalid subdomain";default:return}}),p=s=>{l.project.subdomain=N(s.target.value,{replacement:"-",lower:!0,strict:!0}),c()};function m(){l.project.resetChanges(),t.value=void 0}return(s,v)=>(g(),w(a(x),{direction:"vertical"},{default:o(()=>[r(a(A),{level:2},{default:o(()=>[n("Subdomain")]),_:1}),r(a(R),null,{default:o(()=>[n(" Every project in Abstra Cloud comes with a default subdomain, which will appear on all shared project links. ")]),_:1}),r(a(k),null,{default:o(()=>[r(a(f),null,{default:o(()=>[n("Forms and Dashes available at:")]),_:1}),r(a(f),{code:""},{default:o(()=>[n("https://"),_("span",null,j(s.project.subdomain),1),n(".abstra.app/[PATH] ")]),_:1})]),_:1}),r(a(k),null,{default:o(()=>[r(a(f),null,{default:o(()=>[n("Hooks available at:")]),_:1}),r(a(f),{code:""},{default:o(()=>[n(" https://"),_("span",null,j(s.project.subdomain),1),n(".abstra.app/_hooks/[PATH] ")]),_:1})]),_:1}),r(a($),null,{default:o(()=>[r(a(H),{"validate-status":u.value,help:e.value,"has-feedback":""},{default:o(()=>[r(a(T),{value:s.project.subdomain,type:"text",loading:t.value==="loading",onInput:p},{addonBefore:o(()=>[n("https://")]),addonAfter:o(()=>[n(".abstra.app")]),_:1},8,["value","loading"])]),_:1},8,["validate-status","help"]),r(J,{model:s.project,disabled:t.value!=="available",onError:m},null,8,["model","disabled"])]),_:1})]),_:1}))}}),L={key:0,class:"project-settings"},ge=h({__name:"ProjectSettings",setup(i){const t=P().params.projectId,{result:d}=C(()=>S.get(t));return(c,u)=>a(d)?(g(),F("div",L,[r(a(A),null,{default:o(()=>[n("Project Settings")]),_:1}),r(K,{project:a(d)},null,8,["project"])])):V("",!0)}});export{ge as default};
//# sourceMappingURL=ProjectSettings.db997c9d.js.map
