var ee=Object.defineProperty;var te=(a,e,t)=>e in a?ee(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var d=(a,e,t)=>(te(a,typeof e!="symbol"?e+"":e,t),t);import{f as l,ez as R,d as S,eA as V,eB as H,r as A,G as q,b as r,eu as p,a_ as $,eC as I,e as k,eD as j,ey as N,I as W,ew as w,c as g,w as s,u as o,t as L,eE as Y,eF as J,aq as v,bU as y,cA as ae,ck as ne,o as Q,K as oe,cF as z,cB as se,a as re}from"./outputWidgets.c4f3de67.js";import{f as le,h as ie,j as ce,c as ue,m as de,p as pe,w as _e}from"./icons.49e74e71.js";import{T as fe}from"./Tooltip.48f63d67.js";import{_ as me}from"./logo.084e5d7c.js";import{W as he}from"./workspaces.2ee29a71.js";import{l as P,_ as be}from"./DocsButton.vue_vue_type_script_setup_true_lang.cdf3ff1a.js";import{p as ge}from"./popupNotifcation.301aa26f.js";import{a as X}from"./asyncComputed.c75b06d6.js";import{S as ye}from"./index.59f56925.js";import{B as ve}from"./index.7c11f5ec.js";import{M as G}from"./transButton.ebe60b80.js";import{A as we}from"./index.b168b141.js";import{B as ke}from"./BaseLayout.3a885926.js";import{c as xe}from"./index.205feec3.js";import"./record.685c8ba7.js";import"./pubsub.1842fa2d.js";import"./url.d2782274.js";import"./isNumeric.75337b1e.js";(function(){try{var a=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[e]="3b491937-8234-4796-b38e-b91390081273",a._sentryDebugIdIdentifier="sentry-dbid-3b491937-8234-4796-b38e-b91390081273")}catch{}})();var Se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M865.3 244.7c-.3-.3-61.1 59.8-182.1 180.6l-84.9-84.9 180.9-180.9c-95.2-57.3-217.5-42.6-296.8 36.7A244.42 244.42 0 00419 432l1.8 6.7-283.5 283.4c-6.2 6.2-6.2 16.4 0 22.6l141.4 141.4c6.2 6.2 16.4 6.2 22.6 0l283.3-283.3 6.7 1.8c83.7 22.3 173.6-.9 236-63.3 79.4-79.3 94.1-201.6 38-296.6z"}}]},name:"tool",theme:"filled"};const Oe=Se;var Ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"};const $e=Ae;function M(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),n.forEach(function(i){Ie(a,i,t[i])})}return a}function Ie(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}var D=function(e,t){var n=M({},e,t.attrs);return l(R,M({},n,{icon:Oe}),null)};D.displayName="ToolFilled";D.inheritAttrs=!1;const je=D;function U(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),n.forEach(function(i){Le(a,i,t[i])})}return a}function Le(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}var F=function(e,t){var n=U({},e,t.attrs);return l(R,U({},n,{icon:$e}),null)};F.displayName="WarningOutlined";F.inheritAttrs=!1;const Be=F,Ce={class:"sidebar"},Pe={class:"section-name"},De=["onClick"],Fe={class:"item-name"},Te={key:0,class:"tag soon"},Ee={key:1,class:"tag beta"},Ne={key:2,class:"tag cloud"},We=S({__name:"Sidebar",setup(a){var m;const e=V(),t=H(),n=A((m=t.name)!=null?m:"forms"),i=q(()=>[{name:"Runtime",items:[{name:"Forms",icon:le,path:"forms"},{name:"Hooks",icon:ie,path:"hooks"},{name:"Jobs",icon:ce,path:"jobs",cloud:!0}]},{name:"Settings",items:[{name:"Style",icon:ue,path:"style"},{name:"Sidebar",icon:de,path:"sidebar"},{name:"Packages",icon:pe,path:"requirements"}]}]),_=h=>{h.unavailable||(e.push(h.path),n.value=h.path)};return(h,O)=>(r(),p("div",Ce,[(r(!0),p($,null,I(i.value,u=>(r(),p("div",{key:u.name,class:"section"},[k("span",Pe,j(u.name),1),(r(!0),p($,null,I(u.items,c=>(r(),p("div",{key:c.name,role:"button",class:N(["item",{active:n.value===c.path,disabled:c.unavailable||u.cloud}]),tabindex:"0",onClick:f=>_(c)},[l(W,{class:N(["icon",{disabled:c.unavailable,active:n.value===c.path}]),path:c.icon,width:"20",height:"20"},null,8,["class","path"]),k("span",Fe,j(c.name),1),c.unavailable?(r(),p("span",Te,"SOON")):w("",!0),c.beta?(r(),p("span",Ee,"BETA")):w("",!0),c.cloud?(r(),p("span",Ne,"CLOUD")):w("",!0),c.warning?(r(),g(fe,{key:3,class:"warning",text:c.warning,fixed:!0,top:18,left:18},{default:s(()=>[l(W,{path:o(_e),fill:"#D35249",width:"20",height:"20"},null,8,["path"])]),_:2},1032,["text"])):w("",!0)],10,De))),128))]))),128))]))}});const ze=L(We,[["__scopeId","data-v-fe2ede96"]]);const Ge={},Z=a=>(Y("data-v-81cd596e"),a=a(),J(),a),Me={class:"logo"},Ue=Z(()=>k("img",{src:me,alt:"Abstra cloud logo"},null,-1)),Re=Z(()=>k("span",null," Abstra ",-1)),Ve=[Ue,Re];function He(a,e){return r(),p("div",Me,Ve)}const qe=L(Ge,[["render",He],["__scopeId","data-v-81cd596e"]]);class Ye{async check(){return(await fetch("/_editor/api/linters/check")).json()}async fix(e,t){if(!(await fetch(`/_editor/api/linters/fix/${e}/${t}`,{method:"POST"})).ok)throw new Error("Failed to fix")}}const K=new Ye;class Je{constructor(e,t){d(this,"name");d(this,"label");d(this,"ruleName");this.name=e.name,this.label=e.label,this.ruleName=t}async fix(){await K.fix(this.ruleName,this.name)}}class Qe{constructor(e,t){d(this,"label");d(this,"fixes");d(this,"rule");this.label=e.label,this.rule=t,this.fixes=e.fixes.map(n=>new Je(n,t.name))}}class T{constructor(e){d(this,"name");d(this,"label");d(this,"type");d(this,"issues");d(this,"valid");this.name=e.name,this.label=e.label,this.type=e.type,this.issues=e.issues.map(t=>new Qe(t,this)),this.valid=e.valid}static async check(){return(await K.check()).map(t=>new T(t))}}const Xe=S({__name:"LoginBlock",setup(a){var C;const e="https://cloud.abstra.io/api-key?"+new URLSearchParams({redirect:location.href}),t=A(!1),n=(C=ye.instance)==null?void 0:C.deployEnabled,{loading:i,result:_,refetch:m}=X(()=>P.get()),h=H(),O=V();function u(){const b=new URL(location.href);b.searchParams.delete("api-key"),O.replace(b.pathname+b.search)}function c(){var b;(b=_.value)!=null&&b.logged?G.success({title:"You're logged in!",content:"You can now deploy your project to Abstra Cloud."}):G.error({title:"Login failed",content:"Please try again. If the problem persists, contact help@abstra.io."})}const f=h.query["api-key"];typeof f=="string"&&P.create(f).then(m).then(u).then(c);async function B(){!_.value||(await P.delete(),m())}async function x(){if(!!_.value){t.value=!0;try{await he.deploy(),window.open(`https://cloud.abstra.io/projects/${_.value.logged&&_.value.project_id}/builds`,"_blank")}catch(b){ge("Deploy failed",String(b))}t.value=!1}}return(b,rt)=>{var E;return(E=o(_))!=null&&E.logged?(r(),g(o(ne),{key:0},{default:s(()=>[l(o(y),{href:`https://cloud.abstra.io/projects/${o(_).project_id}`,target:"_blank"},{default:s(()=>[v(" Go to console ")]),_:1},8,["href"]),!t.value&&o(n)?(r(),g(o(ae),{key:0,title:"Are you sure you want to deploy this project to Abstra Cloud?",onConfirm:x},{default:s(()=>[l(o(y),null,{default:s(()=>[v("Deploy")]),_:1})]),_:1})):o(n)?(r(),g(o(y),{key:1,loading:""},{default:s(()=>[v("Deploying")]),_:1})):w("",!0),l(o(y),{onClick:B},{default:s(()=>[v("Logout")]),_:1})]),_:1})):(r(),g(o(y),{key:1,href:e,loading:o(i),disabled:o(i)},{default:s(()=>[v(" Login to deploy ")]),_:1},8,["loading","disabled"]))}}});const Ze=L(Xe,[["__scopeId","data-v-7b8037ee"]]),Ke=S({__name:"Linter",setup(a){const{result:e,refetch:t}=X(()=>T.check()),n=q(()=>{var u,c;return(c=(u=e.value)==null?void 0:u.flatMap(f=>f.issues))!=null?c:[]}),i=A(!1);async function _(u){i.value=!0;try{await u.fix(),t()}finally{i.value=!1}}const m=A(!1);function h(){setTimeout(async()=>{await t(),m.value&&h()},1e3)}Q(()=>{m.value=!0,h()}),oe(()=>{m.value=!1});function O(u){return u.type==="bug"?"warning":u.type==="security"?"error":"info"}return(u,c)=>n.value.length>0?(r(),g(o(se),{key:0},{content:s(()=>[l(o(z),{direction:"vertical"},{default:s(()=>[(r(!0),p($,null,I(n.value,(f,B)=>(r(),g(o(we),{key:B+f.rule.name,type:O(f.rule),style:{width:"400px"},message:f.rule.label},{description:s(()=>[l(o(z),{direction:"vertical"},{default:s(()=>[k("div",null,j(f.label),1),(r(!0),p($,null,I(f.fixes,x=>(r(),g(o(y),{key:x.name,loading:i.value,disabled:i.value,onClick:C=>_(x)},{icon:s(()=>[l(o(je))]),default:s(()=>[v(" "+j(x.label),1)]),_:2},1032,["loading","disabled","onClick"]))),128))]),_:2},1024)]),_:2},1032,["type","message"]))),128))]),_:1})]),default:s(()=>[l(o(ve),{count:n.value.length},{default:s(()=>[l(o(y),null,{default:s(()=>[l(o(Be))]),_:1})]),_:1},8,["count"])]),_:1})):w("",!0)}}),et=a=>(Y("data-v-84bf2f24"),a=a(),J(),a),tt={class:"container"},at=et(()=>k("a",{class:"github-button",href:"https://github.com/abstra-app/abstra-lib","data-icon":"octicon-star","data-size":"large","data-show-count":"true","aria-label":"Star abstra-app/abstra-lib on GitHub",display:"block"},"Star",-1)),nt=[at],ot=S({__name:"GithubStars",setup(a){return Q(()=>{if(!document.getElementById("github-bjs")&&!document.getElementsByClassName("widget-lg")[0]){const e=document.createElement("script");e.setAttribute("src","https://buttons.github.io/buttons.js"),e.setAttribute("async","true"),e.setAttribute("defer","true"),e.setAttribute("id","github-bjs"),document.body.appendChild(e)}}),(e,t)=>(r(),p("div",tt,nt))}});const st=L(ot,[["__scopeId","data-v-84bf2f24"]]),At=S({__name:"Workspace",setup(a){return(e,t)=>{const n=re("router-view");return r(),g(ke,null,{navbar:s(()=>[l(o(xe),{style:{padding:"5px 10px"}},{title:s(()=>[l(qe)]),extra:s(()=>[l(st),l(Ke),l(be),l(Ze)]),_:1})]),sidebar:s(()=>[l(ze,{class:"sidebar"})]),content:s(()=>[l(n)]),_:1})}}});export{At as default};
//# sourceMappingURL=Workspace.e32681db.js.map
