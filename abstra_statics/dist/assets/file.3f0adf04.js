import"./jwt-decode.esm.5fdd9ab8.js";import{k as i}from"./router.2629d009.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="cbc5d28d-293d-4dfb-851e-2bdec3fb27d1",t._sentryDebugIdIdentifier="sentry-dbid-cbc5d28d-293d-4dfb-851e-2bdec3fb27d1")}catch{}})();function m(t){var e;return(e=t.split(/\/|\\/).pop())!=null?e:""}function T(t){return[".png",".svg",".jpg",".jpeg",".ico",".webp"].some(e=>t.endsWith(e))}const p=5*1024*1024,a={"image/png":[".png"],"image/jpeg":[".jpg",".jpeg"],"image/gif":[".gif"],"image/webp":[".webp"],"application/pdf":[".pdf"],"text/plain":[".txt"],"text/csv":[".csv"],"text/markdown":[".md"],"application/json":[".json"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"application/vnd.ms-excel":[".xls"]},v=()=>Object.values(a).flat(),g=t=>Object.keys(a).includes(t),y=t=>{const e=t.lastIndexOf(".");return e===-1?"":t.substring(e).toLowerCase()},d=t=>{const e=y(t);if(!e)return null;for(const[o,n]of Object.entries(a))if(n.includes(e))return o;return null},w=t=>d(t)!==null,j=t=>{if(t.size>p)return{valid:!1,error:`File size exceeds ${h(p)} limit`};const e=t.type&&g(t.type),o=w(t.name);return!e&&!o?{valid:!1,error:"Unsupported file type"}:{valid:!0}},b=t=>new Promise((e,o)=>{const n=new FileReader;n.readAsDataURL(t),n.onload=()=>{const r=n.result.split(",")[1];e(r)},n.onerror=s=>o(s)}),S=async t=>{const e=j(t);if(!e.valid)throw new Error(e.error);const o=await b(t),n=t.type||d(t.name)||"application/octet-stream";return{fileName:t.name,fileContent:o,fileSize:t.size,mimeType:n}},h=t=>{if(t===0)return"0 Bytes";const e=1024,o=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(t)/Math.log(e));return Math.round(t/Math.pow(e,n)*100)/100+" "+o[n]};class l{constructor(e){this.projectId=e}static fromProjectId(e){return new l(e)}async list(e,o,n,s){const r=new URLSearchParams;r.set("limit",e.toString()),r.set("offset",o.toString()),n&&n.trim()&&r.set("search",n.trim()),s&&s.trim()&&r.set("path",s.trim());const u=r.toString(),f=`projects/${this.projectId}/files?${u}`,c=await i.get(f);return{items:c.items,totalCount:c.totalCount}}async upload(e,o){const n={"Content-Type":"multipart/form-data"},s=new File([o||new Uint8Array],m(e));return i.post(`projects/${this.projectId}/files/upload?path=${encodeURIComponent(e)}`,s,n)}async download(e){return i.getBlob(`projects/${this.projectId}/files/download?path=${encodeURIComponent(e)}`)}async delete(e){return i.delete(`projects/${this.projectId}/files?path=${encodeURIComponent(e)}`)}async move(e,o){return i.post(`projects/${this.projectId}/files/move`,{path:e,newPath:o})}async createFolder(e){return i.post(`projects/${this.projectId}/files/create-folder`,{path:e})}}export{l as F,v as g,T as i,S as p};
//# sourceMappingURL=file.3f0adf04.js.map
