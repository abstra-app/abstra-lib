import{_ as se}from"./AbstraButton.vue_vue_type_script_setup_true_lang.8af1a735.js";import{B as pa}from"./BaseLayout.47df57ec.js";import{H as Xe,u as va,o as Fe}from"./omniChatStore.95ec8f97.js";import{a as Ie}from"./asyncComputed.6917f6f4.js";import{d as Q,at as x,c as _,o as t,ac as s,ae as ce,h as z,ed as pe,e as u,ei as me,ec as Se,u as e,a as C,b as n,f as o,g as P,t as T,i as b,df as fa,ej as ne,dj as W,aY as te,_ as ze,bY as ae,cE as Y,bQ as de,eo as ma,bT as ga,cD as Le,r as F,w as ye,en as _e,S as $e,c$ as he,j as Be,cI as ha,cY as Ue,aI as Ze,ez as ya,U as ea,al as ba,b0 as ge,cS as Re,d9 as Ee,eh as _a,cR as $a,er as Ha,d0 as ka,bG as Ke,ax as Va,M as wa}from"./jwt-decode.esm.abec95f0.js";import{G as Ca}from"./PhSparkle.vue.b9247584.js";import{d as Te,p as He,j as Aa}from"./router.f720aa78.js";import{a as Za}from"./organization.5b02f2d4.js";import{a as xe}from"./project.ab26ef47.js";import{p as aa,T as oe,d as Ma,C as Pe}from"./tables.80ccafb0.js";import{F as Ia}from"./folder.df3a1aa0.js";import{_ as Sa}from"./ConsoleOmniChat.vue_vue_type_script_setup_true_lang.d2983926.js";import{C as Me}from"./ContentLayout.6c08a95c.js";import{F as za}from"./PhArrowSquareOut.vue.1c594a18.js";import{u as La}from"./useTables.b7971675.js";import{C as Oe,S as We}from"./Card.ba5a2709.js";import{F as Ba}from"./PhGear.vue.dade0a64.js";import{I as ta,F as Ta,a as xa,G as qa,b as Da}from"./PhWarningCircle.vue.a0b51485.js";import{A as qe}from"./index.465b4a3a.js";import{A as la}from"./index.8c48fae0.js";import{a as ja}from"./ant-design.361e84dc.js";import{B as Na,A as Fa}from"./Breadcrumb.6006fa25.js";import{A as Ua}from"./index.e37946c1.js";import"./record.e807d411.js";import"./uuid.36ef94d5.js";import"./PhCopySimple.vue.e7b96d09.js";import"./index.1570106c.js";import"./string.ca4fe1cf.js";import"./OmniChat.6561adc6.js";import"./AbstraLogo.vue_vue_type_script_setup_true_lang.0e0e29e3.js";import"./Logo.98106327.js";import"./files.7becc36d.js";import"./PhClockCounterClockwise.vue.6908fdd0.js";import"./LoadingOutlined.86b97d7d.js";import"./PhDatabase.vue.ed82f0b0.js";import"./index.a4b509ac.js";import"./index.6fbefddf.js";(function(){try{var H=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new Error().stack;r&&(H._sentryDebugIds=H._sentryDebugIds||{},H._sentryDebugIds[r]="62b84750-65c2-4647-b88b-f546d0b85494",H._sentryDebugIdIdentifier="sentry-dbid-62b84750-65c2-4647-b88b-f546d0b85494")}catch{}})();const Ra=["width","height","fill","transform"],Ea={key:0},Ka=u("path",{d:"M208.49,120.49a12,12,0,0,1-17,0L140,69V216a12,12,0,0,1-24,0V69L64.49,120.49a12,12,0,0,1-17-17l72-72a12,12,0,0,1,17,0l72,72A12,12,0,0,1,208.49,120.49Z"},null,-1),Pa=[Ka],Oa={key:1},Wa=u("path",{d:"M200,112H56l72-72Z",opacity:"0.2"},null,-1),Ga=u("path",{d:"M205.66,106.34l-72-72a8,8,0,0,0-11.32,0l-72,72A8,8,0,0,0,56,120h64v96a8,8,0,0,0,16,0V120h64a8,8,0,0,0,5.66-13.66ZM75.31,104,128,51.31,180.69,104Z"},null,-1),Qa=[Wa,Ga],Ja={key:2},Ya=u("path",{d:"M207.39,115.06A8,8,0,0,1,200,120H136v96a8,8,0,0,1-16,0V120H56a8,8,0,0,1-5.66-13.66l72-72a8,8,0,0,1,11.32,0l72,72A8,8,0,0,1,207.39,115.06Z"},null,-1),Xa=[Ya],e0={key:3},a0=u("path",{d:"M204.24,116.24a6,6,0,0,1-8.48,0L134,54.49V216a6,6,0,0,1-12,0V54.49L60.24,116.24a6,6,0,0,1-8.48-8.48l72-72a6,6,0,0,1,8.48,0l72,72A6,6,0,0,1,204.24,116.24Z"},null,-1),t0=[a0],l0={key:4},n0=u("path",{d:"M205.66,117.66a8,8,0,0,1-11.32,0L136,59.31V216a8,8,0,0,1-16,0V59.31L61.66,117.66a8,8,0,0,1-11.32-11.32l72-72a8,8,0,0,1,11.32,0l72,72A8,8,0,0,1,205.66,117.66Z"},null,-1),o0=[n0],r0={key:5},u0=u("path",{d:"M202.83,114.83a4,4,0,0,1-5.66,0L132,49.66V216a4,4,0,0,1-8,0V49.66L58.83,114.83a4,4,0,0,1-5.66-5.66l72-72a4,4,0,0,1,5.66,0l72,72A4,4,0,0,1,202.83,114.83Z"},null,-1),i0=[u0],s0={name:"PhArrowUp"},d0=Q({...s0,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(H){const r=H,a=x("weight","regular"),k=x("size","1em"),p=x("color","currentColor"),d=x("mirrored",!1),i=_(()=>{var l;return(l=r.weight)!=null?l:a}),w=_(()=>{var l;return(l=r.size)!=null?l:k}),v=_(()=>{var l;return(l=r.color)!=null?l:p}),h=_(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:d?"scale(-1, 1)":void 0);return(l,M)=>(t(),s("svg",pe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:w.value,height:w.value,fill:v.value,transform:h.value},l.$attrs),[ce(l.$slots,"default"),i.value==="bold"?(t(),s("g",Ea,Pa)):i.value==="duotone"?(t(),s("g",Oa,Qa)):i.value==="fill"?(t(),s("g",Ja,Xa)):i.value==="light"?(t(),s("g",e0,t0)):i.value==="regular"?(t(),s("g",l0,o0)):i.value==="thin"?(t(),s("g",r0,i0)):z("",!0)],16,Ra))}}),c0=["width","height","fill","transform"],p0={key:0},v0=u("path",{d:"M80,28H56A20,20,0,0,0,36,48V208a20,20,0,0,0,20,20H80a20,20,0,0,0,20-20V48A20,20,0,0,0,80,28ZM76,204H60V52H76ZM156,28H132a20,20,0,0,0-20,20V208a20,20,0,0,0,20,20h24a20,20,0,0,0,20-20V48A20,20,0,0,0,156,28Zm-4,176H136V52h16Zm100-76a12,12,0,0,1-12,12h-8v8a12,12,0,0,1-24,0v-8h-8a12,12,0,0,1,0-24h8v-8a12,12,0,0,1,24,0v8h8A12,12,0,0,1,252,128Z"},null,-1),f0=[v0],m0={key:1},g0=u("path",{d:"M88,48V208a8,8,0,0,1-8,8H56a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8H80A8,8,0,0,1,88,48Zm64-8H128a8,8,0,0,0-8,8V208a8,8,0,0,0,8,8h24a8,8,0,0,0,8-8V48A8,8,0,0,0,152,40Z",opacity:"0.2"},null,-1),h0=u("path",{d:"M80,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H80a16,16,0,0,0,16-16V48A16,16,0,0,0,80,32Zm0,176H56V48H80ZM152,32H128a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V48A16,16,0,0,0,152,32Zm0,176H128V48h24Zm96-80a8,8,0,0,1-8,8H224v16a8,8,0,0,1-16,0V136H192a8,8,0,0,1,0-16h16V104a8,8,0,0,1,16,0v16h16A8,8,0,0,1,248,128Z"},null,-1),y0=[g0,h0],b0={key:2},_0=u("path",{d:"M96,48V208a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V48A16,16,0,0,1,56,32H80A16,16,0,0,1,96,48Zm56-16H128a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V48A16,16,0,0,0,152,32Zm88,88H224V104a8,8,0,0,0-16,0v16H192a8,8,0,0,0,0,16h16v16a8,8,0,0,0,16,0V136h16a8,8,0,0,0,0-16Z"},null,-1),$0=[_0],H0={key:3},k0=u("path",{d:"M80,34H56A14,14,0,0,0,42,48V208a14,14,0,0,0,14,14H80a14,14,0,0,0,14-14V48A14,14,0,0,0,80,34Zm2,174a2,2,0,0,1-2,2H56a2,2,0,0,1-2-2V48a2,2,0,0,1,2-2H80a2,2,0,0,1,2,2ZM152,34H128a14,14,0,0,0-14,14V208a14,14,0,0,0,14,14h24a14,14,0,0,0,14-14V48A14,14,0,0,0,152,34Zm2,174a2,2,0,0,1-2,2H128a2,2,0,0,1-2-2V48a2,2,0,0,1,2-2h24a2,2,0,0,1,2,2Zm92-80a6,6,0,0,1-6,6H222v18a6,6,0,0,1-12,0V134H192a6,6,0,0,1,0-12h18V104a6,6,0,0,1,12,0v18h18A6,6,0,0,1,246,128Z"},null,-1),V0=[k0],w0={key:4},C0=u("path",{d:"M80,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H80a16,16,0,0,0,16-16V48A16,16,0,0,0,80,32Zm0,176H56V48H80ZM152,32H128a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V48A16,16,0,0,0,152,32Zm0,176H128V48h24Zm96-80a8,8,0,0,1-8,8H224v16a8,8,0,0,1-16,0V136H192a8,8,0,0,1,0-16h16V104a8,8,0,0,1,16,0v16h16A8,8,0,0,1,248,128Z"},null,-1),A0=[C0],Z0={key:5},M0=u("path",{d:"M80,36H56A12,12,0,0,0,44,48V208a12,12,0,0,0,12,12H80a12,12,0,0,0,12-12V48A12,12,0,0,0,80,36Zm4,172a4,4,0,0,1-4,4H56a4,4,0,0,1-4-4V48a4,4,0,0,1,4-4H80a4,4,0,0,1,4,4ZM152,36H128a12,12,0,0,0-12,12V208a12,12,0,0,0,12,12h24a12,12,0,0,0,12-12V48A12,12,0,0,0,152,36Zm4,172a4,4,0,0,1-4,4H128a4,4,0,0,1-4-4V48a4,4,0,0,1,4-4h24a4,4,0,0,1,4,4Zm88-80a4,4,0,0,1-4,4H220v20a4,4,0,0,1-8,0V132H192a4,4,0,0,1,0-8h20V104a4,4,0,0,1,8,0v20h20A4,4,0,0,1,244,128Z"},null,-1),I0=[M0],S0={name:"PhColumnsPlusRight"},z0=Q({...S0,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(H){const r=H,a=x("weight","regular"),k=x("size","1em"),p=x("color","currentColor"),d=x("mirrored",!1),i=_(()=>{var l;return(l=r.weight)!=null?l:a}),w=_(()=>{var l;return(l=r.size)!=null?l:k}),v=_(()=>{var l;return(l=r.color)!=null?l:p}),h=_(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:d?"scale(-1, 1)":void 0);return(l,M)=>(t(),s("svg",pe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:w.value,height:w.value,fill:v.value,transform:h.value},l.$attrs),[ce(l.$slots,"default"),i.value==="bold"?(t(),s("g",p0,f0)):i.value==="duotone"?(t(),s("g",m0,y0)):i.value==="fill"?(t(),s("g",b0,$0)):i.value==="light"?(t(),s("g",H0,V0)):i.value==="regular"?(t(),s("g",w0,A0)):i.value==="thin"?(t(),s("g",Z0,I0)):z("",!0)],16,c0))}}),L0=["width","height","fill","transform"],B0={key:0},T0=u("path",{d:"M148,96V48a12,12,0,0,1,24,0V84h36a12,12,0,0,1,0,24H160A12,12,0,0,1,148,96ZM96,148H48a12,12,0,0,0,0,24H84v36a12,12,0,0,0,24,0V160A12,12,0,0,0,96,148Zm112,0H160a12,12,0,0,0-12,12v48a12,12,0,0,0,24,0V172h36a12,12,0,0,0,0-24ZM96,36A12,12,0,0,0,84,48V84H48a12,12,0,0,0,0,24H96a12,12,0,0,0,12-12V48A12,12,0,0,0,96,36Z"},null,-1),x0=[T0],q0={key:1},D0=u("path",{d:"M208,64V192a16,16,0,0,1-16,16H64a16,16,0,0,1-16-16V64A16,16,0,0,1,64,48H192A16,16,0,0,1,208,64Z",opacity:"0.2"},null,-1),j0=u("path",{d:"M152,96V48a8,8,0,0,1,16,0V88h40a8,8,0,0,1,0,16H160A8,8,0,0,1,152,96ZM96,152H48a8,8,0,0,0,0,16H88v40a8,8,0,0,0,16,0V160A8,8,0,0,0,96,152Zm112,0H160a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V168h40a8,8,0,0,0,0-16ZM96,40a8,8,0,0,0-8,8V88H48a8,8,0,0,0,0,16H96a8,8,0,0,0,8-8V48A8,8,0,0,0,96,40Z"},null,-1),N0=[D0,j0],F0={key:2},U0=u("path",{d:"M152,96V48a8,8,0,0,1,13.66-5.66l48,48A8,8,0,0,1,208,104H160A8,8,0,0,1,152,96ZM96,152H48a8,8,0,0,0-5.66,13.66l48,48A8,8,0,0,0,104,208V160A8,8,0,0,0,96,152ZM99.06,40.61a8,8,0,0,0-8.72,1.73l-48,48A8,8,0,0,0,48,104H96a8,8,0,0,0,8-8V48A8,8,0,0,0,99.06,40.61ZM208,152H160a8,8,0,0,0-8,8v48a8,8,0,0,0,13.66,5.66l48-48A8,8,0,0,0,208,152Z"},null,-1),R0=[U0],E0={key:3},K0=u("path",{d:"M154,96V48a6,6,0,0,1,12,0V90h42a6,6,0,0,1,0,12H160A6,6,0,0,1,154,96ZM96,154H48a6,6,0,0,0,0,12H90v42a6,6,0,0,0,12,0V160A6,6,0,0,0,96,154Zm112,0H160a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V166h42a6,6,0,0,0,0-12ZM96,42a6,6,0,0,0-6,6V90H48a6,6,0,0,0,0,12H96a6,6,0,0,0,6-6V48A6,6,0,0,0,96,42Z"},null,-1),P0=[K0],O0={key:4},W0=u("path",{d:"M152,96V48a8,8,0,0,1,16,0V88h40a8,8,0,0,1,0,16H160A8,8,0,0,1,152,96ZM96,152H48a8,8,0,0,0,0,16H88v40a8,8,0,0,0,16,0V160A8,8,0,0,0,96,152Zm112,0H160a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V168h40a8,8,0,0,0,0-16ZM96,40a8,8,0,0,0-8,8V88H48a8,8,0,0,0,0,16H96a8,8,0,0,0,8-8V48A8,8,0,0,0,96,40Z"},null,-1),G0=[W0],Q0={key:5},J0=u("path",{d:"M156,96V48a4,4,0,0,1,8,0V92h44a4,4,0,0,1,0,8H160A4,4,0,0,1,156,96ZM96,156H48a4,4,0,0,0,0,8H92v44a4,4,0,0,0,8,0V160A4,4,0,0,0,96,156Zm112,0H160a4,4,0,0,0-4,4v48a4,4,0,0,0,8,0V164h44a4,4,0,0,0,0-8ZM96,44a4,4,0,0,0-4,4V92H48a4,4,0,0,0,0,8H96a4,4,0,0,0,4-4V48A4,4,0,0,0,96,44Z"},null,-1),Y0=[J0],X0={name:"PhCornersIn"},et=Q({...X0,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(H){const r=H,a=x("weight","regular"),k=x("size","1em"),p=x("color","currentColor"),d=x("mirrored",!1),i=_(()=>{var l;return(l=r.weight)!=null?l:a}),w=_(()=>{var l;return(l=r.size)!=null?l:k}),v=_(()=>{var l;return(l=r.color)!=null?l:p}),h=_(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:d?"scale(-1, 1)":void 0);return(l,M)=>(t(),s("svg",pe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:w.value,height:w.value,fill:v.value,transform:h.value},l.$attrs),[ce(l.$slots,"default"),i.value==="bold"?(t(),s("g",B0,x0)):i.value==="duotone"?(t(),s("g",q0,N0)):i.value==="fill"?(t(),s("g",F0,R0)):i.value==="light"?(t(),s("g",E0,P0)):i.value==="regular"?(t(),s("g",O0,G0)):i.value==="thin"?(t(),s("g",Q0,Y0)):z("",!0)],16,L0))}}),at=["width","height","fill","transform"],tt={key:0},lt=u("path",{d:"M220,48V88a12,12,0,0,1-24,0V60H168a12,12,0,0,1,0-24h40A12,12,0,0,1,220,48ZM88,196H60V168a12,12,0,0,0-24,0v40a12,12,0,0,0,12,12H88a12,12,0,0,0,0-24Zm120-40a12,12,0,0,0-12,12v28H168a12,12,0,0,0,0,24h40a12,12,0,0,0,12-12V168A12,12,0,0,0,208,156ZM88,36H48A12,12,0,0,0,36,48V88a12,12,0,0,0,24,0V60H88a12,12,0,0,0,0-24Z"},null,-1),nt=[lt],ot={key:1},rt=u("path",{d:"M208,48V208H48V48Z",opacity:"0.2"},null,-1),ut=u("path",{d:"M216,48V88a8,8,0,0,1-16,0V56H168a8,8,0,0,1,0-16h40A8,8,0,0,1,216,48ZM88,200H56V168a8,8,0,0,0-16,0v40a8,8,0,0,0,8,8H88a8,8,0,0,0,0-16Zm120-40a8,8,0,0,0-8,8v32H168a8,8,0,0,0,0,16h40a8,8,0,0,0,8-8V168A8,8,0,0,0,208,160ZM88,40H48a8,8,0,0,0-8,8V88a8,8,0,0,0,16,0V56H88a8,8,0,0,0,0-16Z"},null,-1),it=[rt,ut],st={key:2},dt=u("path",{d:"M93.66,202.34A8,8,0,0,1,88,216H48a8,8,0,0,1-8-8V168a8,8,0,0,1,13.66-5.66ZM88,40H48a8,8,0,0,0-8,8V88a8,8,0,0,0,13.66,5.66l40-40A8,8,0,0,0,88,40ZM211.06,160.61a8,8,0,0,0-8.72,1.73l-40,40A8,8,0,0,0,168,216h40a8,8,0,0,0,8-8V168A8,8,0,0,0,211.06,160.61ZM208,40H168a8,8,0,0,0-5.66,13.66l40,40A8,8,0,0,0,216,88V48A8,8,0,0,0,208,40Z"},null,-1),ct=[dt],pt={key:3},vt=u("path",{d:"M214,48V88a6,6,0,0,1-12,0V54H168a6,6,0,0,1,0-12h40A6,6,0,0,1,214,48ZM88,202H54V168a6,6,0,0,0-12,0v40a6,6,0,0,0,6,6H88a6,6,0,0,0,0-12Zm120-40a6,6,0,0,0-6,6v34H168a6,6,0,0,0,0,12h40a6,6,0,0,0,6-6V168A6,6,0,0,0,208,162ZM88,42H48a6,6,0,0,0-6,6V88a6,6,0,0,0,12,0V54H88a6,6,0,0,0,0-12Z"},null,-1),ft=[vt],mt={key:4},gt=u("path",{d:"M216,48V88a8,8,0,0,1-16,0V56H168a8,8,0,0,1,0-16h40A8,8,0,0,1,216,48ZM88,200H56V168a8,8,0,0,0-16,0v40a8,8,0,0,0,8,8H88a8,8,0,0,0,0-16Zm120-40a8,8,0,0,0-8,8v32H168a8,8,0,0,0,0,16h40a8,8,0,0,0,8-8V168A8,8,0,0,0,208,160ZM88,40H48a8,8,0,0,0-8,8V88a8,8,0,0,0,16,0V56H88a8,8,0,0,0,0-16Z"},null,-1),ht=[gt],yt={key:5},bt=u("path",{d:"M212,48V88a4,4,0,0,1-8,0V52H168a4,4,0,0,1,0-8h40A4,4,0,0,1,212,48ZM88,204H52V168a4,4,0,0,0-8,0v40a4,4,0,0,0,4,4H88a4,4,0,0,0,0-8Zm120-40a4,4,0,0,0-4,4v36H168a4,4,0,0,0,0,8h40a4,4,0,0,0,4-4V168A4,4,0,0,0,208,164ZM88,44H48a4,4,0,0,0-4,4V88a4,4,0,0,0,8,0V52H88a4,4,0,0,0,0-8Z"},null,-1),_t=[bt],$t={name:"PhCornersOut"},Ht=Q({...$t,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(H){const r=H,a=x("weight","regular"),k=x("size","1em"),p=x("color","currentColor"),d=x("mirrored",!1),i=_(()=>{var l;return(l=r.weight)!=null?l:a}),w=_(()=>{var l;return(l=r.size)!=null?l:k}),v=_(()=>{var l;return(l=r.color)!=null?l:p}),h=_(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:d?"scale(-1, 1)":void 0);return(l,M)=>(t(),s("svg",pe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:w.value,height:w.value,fill:v.value,transform:h.value},l.$attrs),[ce(l.$slots,"default"),i.value==="bold"?(t(),s("g",tt,nt)):i.value==="duotone"?(t(),s("g",ot,it)):i.value==="fill"?(t(),s("g",st,ct)):i.value==="light"?(t(),s("g",pt,ft)):i.value==="regular"?(t(),s("g",mt,ht)):i.value==="thin"?(t(),s("g",yt,_t)):z("",!0)],16,at))}}),kt=["width","height","fill","transform"],Vt={key:0},wt=u("path",{d:"M228,160a12,12,0,0,1-12,12H40a12,12,0,0,1,0-24H216A12,12,0,0,1,228,160ZM40,108H216a12,12,0,0,0,0-24H40a12,12,0,0,0,0,24Z"},null,-1),Ct=[wt],At={key:1},Zt=u("path",{d:"M216,56V200a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V56A16,16,0,0,1,56,40H200A16,16,0,0,1,216,56Z",opacity:"0.2"},null,-1),Mt=u("path",{d:"M224,160a8,8,0,0,1-8,8H40a8,8,0,0,1,0-16H216A8,8,0,0,1,224,160ZM40,104H216a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16Z"},null,-1),It=[Zt,Mt],St={key:2},zt=u("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM184,160H72a8,8,0,0,1,0-16H184a8,8,0,0,1,0,16Zm0-48H72a8,8,0,0,1,0-16H184a8,8,0,0,1,0,16Z"},null,-1),Lt=[zt],Bt={key:3},Tt=u("path",{d:"M222,160a6,6,0,0,1-6,6H40a6,6,0,0,1,0-12H216A6,6,0,0,1,222,160ZM40,102H216a6,6,0,0,0,0-12H40a6,6,0,0,0,0,12Z"},null,-1),xt=[Tt],qt={key:4},Dt=u("path",{d:"M224,160a8,8,0,0,1-8,8H40a8,8,0,0,1,0-16H216A8,8,0,0,1,224,160ZM40,104H216a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16Z"},null,-1),jt=[Dt],Nt={key:5},Ft=u("path",{d:"M220,160a4,4,0,0,1-4,4H40a4,4,0,0,1,0-8H216A4,4,0,0,1,220,160ZM40,100H216a4,4,0,0,0,0-8H40a4,4,0,0,0,0,8Z"},null,-1),Ut=[Ft],Rt={name:"PhEquals"},Et=Q({...Rt,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(H){const r=H,a=x("weight","regular"),k=x("size","1em"),p=x("color","currentColor"),d=x("mirrored",!1),i=_(()=>{var l;return(l=r.weight)!=null?l:a}),w=_(()=>{var l;return(l=r.size)!=null?l:k}),v=_(()=>{var l;return(l=r.color)!=null?l:p}),h=_(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:d?"scale(-1, 1)":void 0);return(l,M)=>(t(),s("svg",pe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:w.value,height:w.value,fill:v.value,transform:h.value},l.$attrs),[ce(l.$slots,"default"),i.value==="bold"?(t(),s("g",Vt,Ct)):i.value==="duotone"?(t(),s("g",At,It)):i.value==="fill"?(t(),s("g",St,Lt)):i.value==="light"?(t(),s("g",Bt,xt)):i.value==="regular"?(t(),s("g",qt,jt)):i.value==="thin"?(t(),s("g",Nt,Ut)):z("",!0)],16,kt))}}),Kt=["width","height","fill","transform"],Pt={key:0},Ot=u("path",{d:"M87.5,151.52l64-64a12,12,0,0,1,17,17l-64,64a12,12,0,0,1-17-17Zm131-114a60.08,60.08,0,0,0-84.87,0L103.51,67.61a12,12,0,0,0,17,17l30.07-30.06a36,36,0,0,1,50.93,50.92L171.4,135.52a12,12,0,1,0,17,17l30.08-30.06A60.09,60.09,0,0,0,218.45,37.55ZM135.52,171.4l-30.07,30.08a36,36,0,0,1-50.92-50.93l30.06-30.07a12,12,0,0,0-17-17L37.55,133.58a60,60,0,0,0,84.88,84.87l30.06-30.07a12,12,0,0,0-17-17Z"},null,-1),Wt=[Ot],Gt={key:1},Qt=u("path",{d:"M209.94,113.94l-96,96a48,48,0,0,1-67.88-67.88l96-96a48,48,0,0,1,67.88,67.88Z",opacity:"0.2"},null,-1),Jt=u("path",{d:"M165.66,90.34a8,8,0,0,1,0,11.32l-64,64a8,8,0,0,1-11.32-11.32l64-64A8,8,0,0,1,165.66,90.34ZM215.6,40.4a56,56,0,0,0-79.2,0L106.34,70.45a8,8,0,0,0,11.32,11.32l30.06-30a40,40,0,0,1,56.57,56.56l-30.07,30.06a8,8,0,0,0,11.31,11.32L215.6,119.6a56,56,0,0,0,0-79.2ZM138.34,174.22l-30.06,30.06a40,40,0,1,1-56.56-56.57l30.05-30.05a8,8,0,0,0-11.32-11.32L40.4,136.4a56,56,0,0,0,79.2,79.2l30.06-30.07a8,8,0,0,0-11.32-11.31Z"},null,-1),Yt=[Qt,Jt],Xt={key:2},el=u("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM144.56,173.66l-21.45,21.45a44,44,0,0,1-62.22-62.22l21.45-21.46a8,8,0,0,1,11.32,11.31L72.2,144.2a28,28,0,0,0,39.6,39.6l21.45-21.46a8,8,0,0,1,11.31,11.32Zm-34.9-16a8,8,0,0,1-11.32-11.32l48-48a8,8,0,0,1,11.32,11.32Zm85.45-34.55-21.45,21.45a8,8,0,0,1-11.32-11.31L183.8,111.8a28,28,0,0,0-39.6-39.6L122.74,93.66a8,8,0,0,1-11.31-11.32l21.46-21.45a44,44,0,0,1,62.22,62.22Z"},null,-1),al=[el],tl={key:3},ll=u("path",{d:"M164.25,91.75a6,6,0,0,1,0,8.49l-64,64a6,6,0,0,1-8.49-8.48l64-64A6,6,0,0,1,164.25,91.75ZM214.2,41.8a54.07,54.07,0,0,0-76.38,0L107.75,71.85a6,6,0,0,0,8.49,8.49l30.07-30.06a42,42,0,0,1,59.41,59.41l-30.08,30.07a6,6,0,1,0,8.49,8.49l30.07-30.07A54,54,0,0,0,214.2,41.8ZM139.76,175.64l-30.07,30.08a42,42,0,0,1-59.41-59.41l30.06-30.07a6,6,0,0,0-8.49-8.49l-30,30.07a54,54,0,0,0,76.38,76.39l30.07-30.08a6,6,0,0,0-8.49-8.49Z"},null,-1),nl=[ll],ol={key:4},rl=u("path",{d:"M165.66,90.34a8,8,0,0,1,0,11.32l-64,64a8,8,0,0,1-11.32-11.32l64-64A8,8,0,0,1,165.66,90.34ZM215.6,40.4a56,56,0,0,0-79.2,0L106.34,70.45a8,8,0,0,0,11.32,11.32l30.06-30a40,40,0,0,1,56.57,56.56l-30.07,30.06a8,8,0,0,0,11.31,11.32L215.6,119.6a56,56,0,0,0,0-79.2ZM138.34,174.22l-30.06,30.06a40,40,0,1,1-56.56-56.57l30.05-30.05a8,8,0,0,0-11.32-11.32L40.4,136.4a56,56,0,0,0,79.2,79.2l30.06-30.07a8,8,0,0,0-11.32-11.31Z"},null,-1),ul=[rl],il={key:5},sl=u("path",{d:"M162.84,93.16a4,4,0,0,1,0,5.66l-64,64a4,4,0,0,1-5.66-5.66l64-64A4,4,0,0,1,162.84,93.16Zm49.95-49.95a52.07,52.07,0,0,0-73.56,0L109.17,73.27a4,4,0,0,0,5.65,5.66l30.07-30.06a44,44,0,0,1,62.24,62.24l-30.07,30.06a4,4,0,0,0,5.66,5.66l30.07-30.06A52.07,52.07,0,0,0,212.79,43.21ZM141.17,177.06l-30.06,30.07a44,44,0,0,1-62.24-62.24l30.06-30.06a4,4,0,0,0-5.66-5.66L43.21,139.23a52,52,0,0,0,73.56,73.56l30.06-30.07a4,4,0,1,0-5.66-5.66Z"},null,-1),dl=[sl],cl={name:"PhLinkSimple"},Ge=Q({...cl,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(H){const r=H,a=x("weight","regular"),k=x("size","1em"),p=x("color","currentColor"),d=x("mirrored",!1),i=_(()=>{var l;return(l=r.weight)!=null?l:a}),w=_(()=>{var l;return(l=r.size)!=null?l:k}),v=_(()=>{var l;return(l=r.color)!=null?l:p}),h=_(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:d?"scale(-1, 1)":void 0);return(l,M)=>(t(),s("svg",pe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:w.value,height:w.value,fill:v.value,transform:h.value},l.$attrs),[ce(l.$slots,"default"),i.value==="bold"?(t(),s("g",Pt,Wt)):i.value==="duotone"?(t(),s("g",Gt,Yt)):i.value==="fill"?(t(),s("g",Xt,al)):i.value==="light"?(t(),s("g",tl,nl)):i.value==="regular"?(t(),s("g",ol,ul)):i.value==="thin"?(t(),s("g",il,dl)):z("",!0)],16,Kt))}}),pl=["width","height","fill","transform"],vl={key:0},fl=u("path",{d:"M232.49,55.51l-32-32a12,12,0,0,0-17,0l-96,96A12,12,0,0,0,84,128v32a12,12,0,0,0,12,12h32a12,12,0,0,0,8.49-3.51l96-96A12,12,0,0,0,232.49,55.51ZM192,49l15,15L196,75,181,60Zm-69,99H108V133l56-56,15,15Zm105-7.43V208a20,20,0,0,1-20,20H48a20,20,0,0,1-20-20V48A20,20,0,0,1,48,28h67.43a12,12,0,0,1,0,24H52V204H204V140.57a12,12,0,0,1,24,0Z"},null,-1),ml=[fl],gl={key:1},hl=u("path",{d:"M200,88l-72,72H96V128l72-72Z",opacity:"0.2"},null,-1),yl=u("path",{d:"M229.66,58.34l-32-32a8,8,0,0,0-11.32,0l-96,96A8,8,0,0,0,88,128v32a8,8,0,0,0,8,8h32a8,8,0,0,0,5.66-2.34l96-96A8,8,0,0,0,229.66,58.34ZM124.69,152H104V131.31l64-64L188.69,88ZM200,76.69,179.31,56,192,43.31,212.69,64ZM224,128v80a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32h80a8,8,0,0,1,0,16H48V208H208V128a8,8,0,0,1,16,0Z"},null,-1),bl=[hl,yl],_l={key:2},$l=u("path",{d:"M224,128v80a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32h80a8,8,0,0,1,0,16H48V208H208V128a8,8,0,0,1,16,0Zm5.66-58.34-96,96A8,8,0,0,1,128,168H96a8,8,0,0,1-8-8V128a8,8,0,0,1,2.34-5.66l96-96a8,8,0,0,1,11.32,0l32,32A8,8,0,0,1,229.66,69.66Zm-17-5.66L192,43.31,179.31,56,200,76.69Z"},null,-1),Hl=[$l],kl={key:3},Vl=u("path",{d:"M228.24,59.76l-32-32a6,6,0,0,0-8.48,0l-96,96A6,6,0,0,0,90,128v32a6,6,0,0,0,6,6h32a6,6,0,0,0,4.24-1.76l96-96A6,6,0,0,0,228.24,59.76ZM125.51,154H102V130.49l66-66L191.51,88ZM200,79.51,176.49,56,192,40.49,215.51,64ZM222,128v80a14,14,0,0,1-14,14H48a14,14,0,0,1-14-14V48A14,14,0,0,1,48,34h80a6,6,0,0,1,0,12H48a2,2,0,0,0-2,2V208a2,2,0,0,0,2,2H208a2,2,0,0,0,2-2V128a6,6,0,0,1,12,0Z"},null,-1),wl=[Vl],Cl={key:4},Al=u("path",{d:"M229.66,58.34l-32-32a8,8,0,0,0-11.32,0l-96,96A8,8,0,0,0,88,128v32a8,8,0,0,0,8,8h32a8,8,0,0,0,5.66-2.34l96-96A8,8,0,0,0,229.66,58.34ZM124.69,152H104V131.31l64-64L188.69,88ZM200,76.69,179.31,56,192,43.31,212.69,64ZM224,128v80a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32h80a8,8,0,0,1,0,16H48V208H208V128a8,8,0,0,1,16,0Z"},null,-1),Zl=[Al],Ml={key:5},Il=u("path",{d:"M226.83,61.17l-32-32a4,4,0,0,0-5.66,0l-96,96A4,4,0,0,0,92,128v32a4,4,0,0,0,4,4h32a4,4,0,0,0,2.83-1.17l96-96A4,4,0,0,0,226.83,61.17ZM126.34,156H100V129.66l68-68L194.34,88ZM200,82.34,173.66,56,192,37.66,218.34,64ZM220,128v80a12,12,0,0,1-12,12H48a12,12,0,0,1-12-12V48A12,12,0,0,1,48,36h80a4,4,0,0,1,0,8H48a4,4,0,0,0-4,4V208a4,4,0,0,0,4,4H208a4,4,0,0,0,4-4V128a4,4,0,0,1,8,0Z"},null,-1),Sl=[Il],zl={name:"PhNotePencil"},Ll=Q({...zl,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(H){const r=H,a=x("weight","regular"),k=x("size","1em"),p=x("color","currentColor"),d=x("mirrored",!1),i=_(()=>{var l;return(l=r.weight)!=null?l:a}),w=_(()=>{var l;return(l=r.size)!=null?l:k}),v=_(()=>{var l;return(l=r.color)!=null?l:p}),h=_(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:d?"scale(-1, 1)":void 0);return(l,M)=>(t(),s("svg",pe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:w.value,height:w.value,fill:v.value,transform:h.value},l.$attrs),[ce(l.$slots,"default"),i.value==="bold"?(t(),s("g",vl,ml)):i.value==="duotone"?(t(),s("g",gl,bl)):i.value==="fill"?(t(),s("g",_l,Hl)):i.value==="light"?(t(),s("g",kl,wl)):i.value==="regular"?(t(),s("g",Cl,Zl)):i.value==="thin"?(t(),s("g",Ml,Sl)):z("",!0)],16,pl))}}),Bl=["width","height","fill","transform"],Tl={key:0},xl=u("path",{d:"M208,112H48a20,20,0,0,0-20,20v24a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V132A20,20,0,0,0,208,112Zm-4,40H52V136H204Zm4-116H48A20,20,0,0,0,28,56V80a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V56A20,20,0,0,0,208,36Zm-4,40H52V60H204ZM160,220a12,12,0,0,1-12,12h-8v8a12,12,0,0,1-24,0v-8h-8a12,12,0,0,1,0-24h8v-8a12,12,0,0,1,24,0v8h8A12,12,0,0,1,160,220Z"},null,-1),ql=[xl],Dl={key:1},jl=u("path",{d:"M216,128v24a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V128a8,8,0,0,1,8-8H208A8,8,0,0,1,216,128Zm-8-80H48a8,8,0,0,0-8,8V80a8,8,0,0,0,8,8H208a8,8,0,0,0,8-8V56A8,8,0,0,0,208,48Z",opacity:"0.2"},null,-1),Nl=u("path",{d:"M208,112H48a16,16,0,0,0-16,16v24a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V128A16,16,0,0,0,208,112Zm0,40H48V128H208v24Zm0-112H48A16,16,0,0,0,32,56V80A16,16,0,0,0,48,96H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40Zm0,40H48V56H208V80ZM160,216a8,8,0,0,1-8,8H136v16a8,8,0,0,1-16,0V224H104a8,8,0,0,1,0-16h16V192a8,8,0,0,1,16,0v16h16A8,8,0,0,1,160,216Z"},null,-1),Fl=[jl,Nl],Ul={key:2},Rl=u("path",{d:"M224,128v24a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V128a16,16,0,0,1,16-16H208A16,16,0,0,1,224,128ZM208,40H48A16,16,0,0,0,32,56V80A16,16,0,0,0,48,96H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40ZM152,208H136V192a8,8,0,0,0-16,0v16H104a8,8,0,0,0,0,16h16v16a8,8,0,0,0,16,0V224h16a8,8,0,0,0,0-16Z"},null,-1),El=[Rl],Kl={key:3},Pl=u("path",{d:"M208,114H48a14,14,0,0,0-14,14v24a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V128A14,14,0,0,0,208,114Zm2,38a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V128a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2ZM208,42H48A14,14,0,0,0,34,56V80A14,14,0,0,0,48,94H208a14,14,0,0,0,14-14V56A14,14,0,0,0,208,42Zm2,38a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V56a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2ZM158,216a6,6,0,0,1-6,6H134v18a6,6,0,0,1-12,0V222H104a6,6,0,0,1,0-12h18V192a6,6,0,0,1,12,0v18h18A6,6,0,0,1,158,216Z"},null,-1),Ol=[Pl],Wl={key:4},Gl=u("path",{d:"M208,112H48a16,16,0,0,0-16,16v24a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V128A16,16,0,0,0,208,112Zm0,40H48V128H208v24Zm0-112H48A16,16,0,0,0,32,56V80A16,16,0,0,0,48,96H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40Zm0,40H48V56H208V80ZM160,216a8,8,0,0,1-8,8H136v16a8,8,0,0,1-16,0V224H104a8,8,0,0,1,0-16h16V192a8,8,0,0,1,16,0v16h16A8,8,0,0,1,160,216Z"},null,-1),Ql=[Gl],Jl={key:5},Yl=u("path",{d:"M208,116H48a12,12,0,0,0-12,12v24a12,12,0,0,0,12,12H208a12,12,0,0,0,12-12V128A12,12,0,0,0,208,116Zm4,36a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V128a4,4,0,0,1,4-4H208a4,4,0,0,1,4,4ZM208,44H48A12,12,0,0,0,36,56V80A12,12,0,0,0,48,92H208a12,12,0,0,0,12-12V56A12,12,0,0,0,208,44Zm4,36a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V56a4,4,0,0,1,4-4H208a4,4,0,0,1,4,4ZM156,216a4,4,0,0,1-4,4H132v20a4,4,0,0,1-8,0V220H104a4,4,0,0,1,0-8h20V192a4,4,0,0,1,8,0v20h20A4,4,0,0,1,156,216Z"},null,-1),Xl=[Yl],e1={name:"PhRowsPlusBottom"},Qe=Q({...e1,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(H){const r=H,a=x("weight","regular"),k=x("size","1em"),p=x("color","currentColor"),d=x("mirrored",!1),i=_(()=>{var l;return(l=r.weight)!=null?l:a}),w=_(()=>{var l;return(l=r.size)!=null?l:k}),v=_(()=>{var l;return(l=r.color)!=null?l:p}),h=_(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:d?"scale(-1, 1)":void 0);return(l,M)=>(t(),s("svg",pe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:w.value,height:w.value,fill:v.value,transform:h.value},l.$attrs),[ce(l.$slots,"default"),i.value==="bold"?(t(),s("g",Tl,ql)):i.value==="duotone"?(t(),s("g",Dl,Fl)):i.value==="fill"?(t(),s("g",Ul,El)):i.value==="light"?(t(),s("g",Kl,Ol)):i.value==="regular"?(t(),s("g",Wl,Ql)):i.value==="thin"?(t(),s("g",Jl,Xl)):z("",!0)],16,Bl))}}),a1={class:"related-tables"},t1={class:"related-section"},l1={class:"relation-info"},n1={class:"related-tables"},o1={class:"related-section"},r1={class:"relation-info"},u1=Q({__name:"RelatedTables",props:{table:{}},setup(H){const r=H,a=me(),k=Se(),p=a.params.projectId,{tables:d,loading:i}=La(p),w=_(()=>{const M=r.table.getColumns().find($=>$.primaryKey);return(M==null?void 0:M.name)||"id"}),v=_(()=>{if(!d.value.length)return{referencingTables:[],referencedTables:[]};const M=d.value.filter(g=>g.id!==r.table.id),$=[];for(const g of M){const j=g.getColumns().filter(q=>q.foreignKey);for(const q of j){if(!q.foreignKey)continue;let U;for(const J of d.value)if(U=J.getColumns().find(S=>{var Z;return S.id===((Z=q.foreignKey)==null?void 0:Z.columnId)}),U)break;(U==null?void 0:U.tableId)===r.table.id&&$.push({table:g,column:q})}}const I=[],L=r.table.getColumns().filter(g=>g.foreignKey);for(const g of L){if(!g.foreignKey)continue;let j,q;for(const U of d.value)if(q=U.getColumns().find(J=>{var S;return J.id===((S=g.foreignKey)==null?void 0:S.columnId)}),q){j=U;break}j&&q&&I.push({table:j,sourceColumn:g,targetColumn:q})}return{referencingTables:$,referencedTables:I}}),h=_(()=>{const M=new Map;for(const $ of v.value.referencingTables)M.has($.table.id)||M.set($.table.id,{tableId:$.table.id,tableName:$.table.name,description:`${$.column.name} \u2192 ${w.value}`});for(const $ of v.value.referencedTables)M.has($.table.id)||M.set($.table.id,{tableId:$.table.id,tableName:$.table.name,description:`${$.sourceColumn.name} \u2192 ${$.targetColumn.name}`});return Array.from(M.values())}),l=M=>{k.push({name:"tableEditor",params:{projectId:p,tableId:M}})};return(M,$)=>e(i)?(t(),C(Me,{key:0,"full-width":""},{default:n(()=>[u("div",a1,[u("div",t1,[o(e(fa),null,{default:n(()=>[P(T(e(b).translate("i18n_relatedtables_related_tables")),1)]),_:1}),o(e(W),{gap:"middle",wrap:"wrap"},{default:n(()=>[(t(),s(te,null,ne(3,I=>o(e(Oe),{key:I,class:"related-table-card loading-card"},{title:n(()=>[o(e(W),{justify:"space-between",align:"center"},{default:n(()=>[o(e(We),{active:!0,paragraph:!1,title:{width:"120px"}}),o(e(za),{size:16,style:{opacity:"0.3"}})]),_:1})]),default:n(()=>[u("p",l1,[o(e(Ge),{size:16,style:{opacity:"0.3"}}),o(e(We),{active:!0,paragraph:!1,title:{width:"150px"}})])]),_:2},1024)),64))]),_:1})])])]),_:1})):h.value.length>0?(t(),C(Me,{key:1,"full-width":""},{default:n(()=>[u("div",n1,[u("div",o1,[u("h3",null,T(e(b).translate("i18n_relatedtables_related_tables_count",null,h.value.length)),1),o(e(W),{gap:"middle",wrap:"wrap"},{default:n(()=>[(t(!0),s(te,null,ne(h.value,I=>(t(),C(e(Oe),{key:I.tableId,title:I.tableName,class:"related-table-card",hoverable:"",onClick:L=>l(I.tableId)},{default:n(()=>[u("p",r1,[o(e(Ge),{size:16}),u("span",null,T(I.description),1)])]),_:2},1032,["title","onClick"]))),128))]),_:1})])])]),_:1})):z("",!0)}});const i1=ze(u1,[["__scopeId","data-v-55a3ad92"]]),s1=Q({__name:"AddData",props:{open:{type:Boolean},editableItem:{},table:{},loading:{type:Boolean}},emits:["save","close","update-nullable","record-change"],setup(H,{emit:r}){return(a,k)=>(t(),C(e(Te),{title:e(b).translate("i18n_adddata_title"),width:720,open:a.open,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:k[2]||(k[2]=p=>r("close"))},{extra:n(()=>[o(e(qe),null,{default:n(()=>[o(e(ae),{onClick:k[0]||(k[0]=p=>r("close"))},{default:n(()=>[P(T(e(b).translate("i18n_adddata_cancel")),1)]),_:1}),o(e(ae),{type:"primary",loading:a.loading,onClick:k[1]||(k[1]=p=>r("save"))},{default:n(()=>[P(T(e(b).translate("i18n_adddata_save")),1)]),_:1},8,["loading"])]),_:1})]),default:n(()=>[o(e(Le),{model:a.editableItem,layout:"vertical"},{default:n(()=>[(t(!0),s(te,null,ne(a.table.getUnprotectedColumns(),p=>(t(),C(e(Y),{key:p.id,label:p.name,required:!p.nullable},{default:n(()=>[a.editableItem?(t(),C(e(de),{key:0,placeholder:p.type,value:a.editableItem[p.name],disabled:a.editableItem[p.name]===null,"onUpdate:value":d=>r("record-change",p.name,d)},ma({_:2},[p.nullable?{name:"addonAfter",fn:n(()=>[o(e(ga),{checked:a.editableItem[p.name]===null,"onUpdate:checked":d=>r("update-nullable",p.name,d)},{default:n(()=>[P(T(e(b).translate("i18n_adddata_null")),1)]),_:2},1032,["checked","onUpdate:checked"])]),key:"0"}:void 0]),1032,["placeholder","value","disabled","onUpdate:value"])):z("",!0)]),_:2},1032,["label","required"]))),128))]),_:1},8,["model"])]),_:1},8,["title","open"]))}}),na=(H,r)=>r.includes(H)?{status:"error",help:"There already is a column with this name in the table"}:{status:""},d1=Q({__name:"NewColumn",props:{open:{type:Boolean},table:{}},emits:["created","cancel"],setup(H,{emit:r}){const a=H,p=me().params.projectId,d=_(()=>{var Z;return((Z=a.table)==null?void 0:Z.getColumns().map(c=>c.name))||[]}),i=_(()=>na(v.value.name,d.value)),w={name:"",type:null,default:"",nullable:!0,unique:!1},v=F(w),h=()=>{v.value={...w}},l=F([{value:"reference",label:"reference",isLeaf:!1},...aa.map(Z=>({value:Z,label:Z,isLeaf:!0}))]),M=Z=>{if(!Z)return;const c=Z[Z.length-1];switch(Z.length){case 0:return;case 1:c.loading=!0,oe.list(p).then(E=>{c.children=E.map(X=>({value:X.id,label:X.name,isLeaf:!1})),c.loading=!1});return;case 2:c.loading=!0,oe.get(p,c.value).then(E=>{c.children=E.getColumns().map(X=>({type:X.type,value:X.id,label:X.name,isLeaf:!0})),c.loading=!1});return}},$=(Z,c)=>{if(!!Z){if(Z.length===1){v.value.type=Z[0],v.value.foreignKey=void 0;return}if(Z.length===3){const E=c[c.length-1];v.value.type=E.type,v.value.foreignKey={columnId:E.value}}}},I=Z=>{const c=Z.selectedOptions;return c?c.length===1?c[0].label:c.length===3?b.translate("i18n_newcolumn_reference_to",null,{tableName:c[1].label,columnName:c[2].label}):"":b.translate("i18n_newcolumn_select_type")},g=F({...{status:"success",message:"",fakeLoading:!1}}),j=()=>{g.value.fakeLoading=!0,U()};ye(()=>v.value.type,()=>{!v.value.type||(v.value.default=Ma[v.value.type]||"",j())});const U=_e.exports.debounce(async()=>{if(!v.value.default){g.value.status="success",g.value.message="",g.value.fakeLoading=!1;return}const Z=`select (${v.value.default})::${v.value.type} `;xe.executeQuery(p,Z,[]).then(c=>{g.value.status=c.errors.length>0?"error":"success",g.value.message=c.errors[0]||"",g.value.fakeLoading=!1})},500);function J(){r("cancel")}async function S(){if(!!a.table&&!(!v.value.name||!v.value.type))try{await a.table.addColumn(v.value),h(),r("created")}catch(Z){Z instanceof Error&&He("Database error",Z.message)}}return(Z,c)=>(t(),C(e(Te),{title:e(b).translate("i18n_newcolumn_new_column"),width:720,open:a.open,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:J},{extra:n(()=>[o(e(qe),null,{default:n(()=>[o(e(ae),{onClick:J},{default:n(()=>[P(T(e(b).translate("i18n_newcolumn_cancel")),1)]),_:1}),o(e(ae),{type:"primary",onClick:S},{default:n(()=>[P(T(e(b).translate("i18n_newcolumn_save")),1)]),_:1})]),_:1})]),default:n(()=>[o(e(Le),{model:v.value,layout:"vertical"},{default:n(()=>[o(e(Y),{key:"name",label:e(b).translate("i18n_newcolumn_name"),required:"","validate-status":i.value.status,help:i.value.help},{default:n(()=>[o(e(de),{value:v.value.name,"onUpdate:value":c[0]||(c[0]=E=>v.value.name=E)},null,8,["value"])]),_:1},8,["label","validate-status","help"]),o(e(Y),{key:"type",label:e(b).translate("i18n_newcolumn_type"),required:""},{default:n(()=>[o(e(la),{options:l.value,"load-data":M,"display-render":I,"allow-clear":!1,onChange:$},null,8,["options"])]),_:1},8,["label"]),o(e(Y),{key:"default-value",label:e(b).translate("i18n_newcolumn_default_value"),"validate-status":g.value.status,help:g.value.message},{default:n(()=>[o(e(de),{value:v.value.default,"onUpdate:value":c[1]||(c[1]=E=>v.value.default=E),placeholder:e(b).translate("i18n_newcolumn_null_placeholder"),onInput:j},{suffix:n(()=>[g.value.fakeLoading?(t(),C(e($e),{key:0})):z("",!0),!g.value.fakeLoading&&g.value.status==="success"?(t(),C(e(Xe),{key:1,size:"18"})):z("",!0),!g.value.fakeLoading&&g.value.status==="error"?(t(),C(e(ta),{key:2,size:"18"})):z("",!0)]),_:1},8,["value","placeholder"])]),_:1},8,["label","validate-status","help"]),o(e(Y),{key:"nullable",label:e(b).translate("i18n_newcolumn_nullable")},{default:n(()=>[o(e(he),{checked:v.value.nullable,"onUpdate:checked":c[2]||(c[2]=E=>v.value.nullable=E)},null,8,["checked"])]),_:1},8,["label"]),o(e(Y),{key:"unique",label:e(b).translate("i18n_newcolumn_unique")},{default:n(()=>[o(e(he),{checked:v.value.unique,"onUpdate:checked":c[3]||(c[3]=E=>v.value.unique=E)},null,8,["checked"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","open"]))}}),c1={class:"icon"},p1=Q({__name:"OrderByIcon",props:{column:{},orderBy:{}},emits:["reorder"],setup(H,{emit:r}){return(a,k)=>{var p,d,i;return t(),s("div",c1,[((p=a.orderBy)==null?void 0:p.column)!==String(a.column.title)?(t(),C(e(Ta),{key:0,size:"16",onClick:k[0]||(k[0]=w=>r("reorder",String(a.column.title)))})):z("",!0),((d=a.orderBy)==null?void 0:d.column)===String(a.column.title)&&a.orderBy.direction==="asc"?(t(),C(e(d0),{key:1,size:"16",onClick:k[1]||(k[1]=w=>r("reorder",String(a.column.title)))})):z("",!0),((i=a.orderBy)==null?void 0:i.column)===String(a.column.title)&&a.orderBy.direction==="desc"?(t(),C(e(xa),{key:2,size:"16",onClick:k[2]||(k[2]=w=>r("reorder",String(a.column.title)))})):z("",!0)])}}});const Je=ze(p1,[["__scopeId","data-v-6ae5cef6"]]);function Ye(H){return`"${H.replace(/"/g,'""')}"`}function v1(H){return H==null?"NULL":`'${String(H).replace(/'/g,"''")}'`}function f1(H,r){if(H.type==="search")return!H.q||H.q.trim()==="","";if(H.type==="and"){const a=H.conditions.filter(d=>d.value!==""&&d.value!==null);if(a.length===0)return"";const k=a.map(d=>{const i=Ye(d.field),w=v1(d.value);return`${i} = ${w}`});return`SELECT * FROM ${Ye(r)} WHERE ${k.join(" AND ")}`}return""}function m1(H,r){const a=F(r||{type:"search",q:""}),k=_(()=>H.value.getColumns().filter(I=>a.value.type==="and"&&!a.value.conditions.some(L=>L.field===I.name))),p=_(()=>H.value.getColumns().filter(I=>a.value.type==="and"&&!a.value.conditions.some(L=>L.field===I.name)));function d(){a.value={type:"and",conditions:[{type:"eq",field:"id",value:""}]}}function i(I){I==="search"?a.value={type:"search",q:""}:d()}function w(I){a.value.type==="and"&&a.value.conditions.push({type:"eq",field:String(I),value:""})}function v(I){a.value.type==="and"&&(a.value.conditions=a.value.conditions.filter(L=>L.field!==I))}function h(I){a.value.type==="search"&&(a.value={type:"search",q:I})}function l(I){if(a.value.type!=="and")return;const L=a.value.conditions.find(g=>g.field===I);L&&(L.field=I)}function M(I,L){if(a.value.type!=="and")return;const g=a.value.conditions.find(j=>j.field===I);g&&(g.value=L)}function $(){return f1(a.value,H.value.name)}return{searchValue:a,filteredColumns:k,nonFilteredColumns:p,changeSearchType:i,addCondition:w,removeCondition:v,updateSearch:h,updateConditionField:l,updateConditionValue:M,getSqlQuery:$}}const g1=Q({__name:"TableFilter",props:{search:{},table:{},data:{}},emits:["update:search"],setup(H,{emit:r}){const a=H,k=me(),p=_(()=>a.table),{searchValue:d,filteredColumns:i,nonFilteredColumns:w,changeSearchType:v,addCondition:h,removeCondition:l,updateSearch:M,updateConditionField:$,updateConditionValue:I,getSqlQuery:L}=m1(p,a.search),g=[{label:b.translate("i18n_tablefilter_search"),value:"search"},{label:b.translate("i18n_tablefilter_advanced"),value:"and"}];function j(c){v(c),r("update:search",d.value)}function q(c){h(String(c)),r("update:search",d.value)}function U(c){l(c),r("update:search",d.value)}function J(c){M(c),r("update:search",d.value)}function S(c){$(c),r("update:search",d.value)}const Z=(c,E)=>{I(c,E),r("update:search",d.value)};return ye(()=>a.search,c=>{d.value=c},{deep:!0}),(c,E)=>{const X=Be("RouterLink");return t(),C(e(W),{vertical:"",align:"start",gap:"small"},{default:n(()=>[o(e(W),{align:"center",justify:"space-between",style:{width:"100%"}},{default:n(()=>[o(e(Aa),{options:g,value:e(d).type,"onUpdate:value":j},null,8,["value"]),e(d).type==="and"?(t(),C(X,{key:0,to:{name:"sql",params:{projectId:e(k).params.projectId},query:{filter:e(L)()}}},{default:n(()=>[o(se,{type:"text",underline:""},{default:n(()=>[P(T(e(b).translate("i18n_tablefilter_edit_as_sql")),1)]),_:1})]),_:1},8,["to"])):z("",!0)]),_:1}),e(d).type==="search"?(t(),C(e(W),{key:0},{default:n(()=>[o(e(ha),{value:e(d).q,"onUpdate:value":J},null,8,["value"])]),_:1})):e(d).type==="and"?(t(),C(e(W),{key:1,vertical:"",gap:"small"},{default:n(()=>[(t(!0),s(te,null,ne(e(d).conditions,K=>(t(),C(e(W),{key:K.field,gap:"large",align:"center"},{default:n(()=>[o(e(Ze),{value:K.field,"onUpdate:value":[G=>K.field=G,G=>S(K.field)],style:{width:"120px"}},{default:n(()=>[(t(!0),s(te,null,ne(e(i),G=>(t(),C(e(Ue),{key:G.id,value:G.name},{default:n(()=>[P(T(G.name),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["value","onUpdate:value"]),o(e(Et)),o(e(de),{value:K.value,"onUpdate:value":[G=>K.value=G,G=>Z(K.field,G)],style:{width:"120px"}},null,8,["value","onUpdate:value"]),o(e(ya),{style:{cursor:"pointer"},onClick:G=>U(K.field)},null,8,["onClick"])]),_:2},1024))),128)),e(w)[0]?(t(),C(e(W),{key:0,justify:"space-between"},{default:n(()=>[o(e(Ze),{style:{width:"120px"},value:"","onUpdate:value":q},{default:n(()=>[(t(!0),s(te,null,ne(e(w),K=>(t(),C(e(Ue),{key:K.id,value:K.name},{default:n(()=>[P(T(K.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})):z("",!0)]),_:1})):z("",!0)]),_:1})}}}),h1={class:"twin-container"},y1={class:"fullwidth-input"},b1={class:"fullwidth-input"},_1={class:"using-container"},$1={class:"fullwidth-input"},H1=Q({__name:"UpdateColumn",props:{open:{type:Boolean},table:{},column:{}},emits:["updated","cancel"],setup(H,{emit:r}){const a=H,p=me().params.projectId,d=F(a.column.type);ea(async()=>{if(!a.column.foreignKey)return;d.value=b.translate("i18n_updatecolumn_loading");const f=await oe.fromColumnId(p,a.column.foreignKey.columnId),y=f.getColumn(a.column.foreignKey.columnId);d.value=b.translate("i18n_updatecolumn_reference_to",null,{tableName:f.name,columnName:y.name})});const i=_(()=>{var f;return((f=a.table)==null?void 0:f.getColumns().map(y=>y.record.initialState.name))||[]}),w=_(()=>a.column.name===a.column.record.initialState.name?{status:"",help:""}:na(a.column.name,i.value)),{result:v,loading:h}=Ie(async()=>a.table.select({},10,0).then(({total:f})=>f));function l(){a.column.record.resetChanges(),r("cancel")}const $=F({status:"success",message:"",fakeLoading:!1}),I=()=>{$.value.fakeLoading=!0,L()},L=_e.exports.debounce(async()=>{if(!a.column.default){$.value.status="success",$.value.message="",$.value.fakeLoading=!1;return}const f=`select (${a.column.default})::${a.column.type} `,y=await xe.executeQuery(p,f,[]);$.value.status=y.errors.length>0?"error":"success",$.value.message=y.errors[0]||"",$.value.fakeLoading=!1},500),g=F([{value:"reference",label:"reference",isLeaf:!1},...aa.filter(f=>f!==a.column.type).map(f=>({value:f,label:f,isLeaf:!0}))]),j=f=>{if(!f)return;const y=f[f.length-1];switch(f.length){case 0:return;case 1:y.loading=!0,oe.list(p).then(N=>{y.children=N.map(ie=>({value:ie.id,label:ie.name,isLeaf:!1})),y.loading=!1});return;case 2:y.loading=!0,oe.get(p,y.value).then(N=>{y.children=N.getColumns().map(ie=>({type:ie.type,value:ie.id,label:ie.name,isLeaf:!0})),y.loading=!1});return}},q=f=>{const y=f.selectedOptions;return y?y.length===1?y[0].label:y.length===3?b.translate("i18n_updatecolumn_reference_to",null,{tableName:y[1].label,columnName:y[2].label}):"":b.translate("i18n_updatecolumn_select_type")},U=(f,y)=>{if(!!f){if(f.length===1){a.column.type=f[0],a.column.foreignKey=null;return}if(f.length===3){if(a.column.foreignKey&&a.column.foreignKey.columnId===f[2])return;const N=y[y.length-1];a.column.type=N.type,a.column.foreignKey={columnId:N.value}}}};async function J(f){await ja(b.translate("i18n_updatecolumn_confirm_delete"))&&await S(f)}async function S(f){var y,N;await((N=(y=a.table)==null?void 0:y.getColumn(f))==null?void 0:N.delete()),r("updated")}const Z=()=>v.value===0||h.value?!1:a.column.record.hasChangesDeep("type"),c=F({type:"default"}),E=()=>{a.column.type=a.column.record.initialState.type,c.value={type:"default"}};function X(f,y){return y==="varchar"||f==="int"&&y==="boolean"||f==="boolean"&&y==="int"}ye(()=>a.column.type,()=>{I(),G.value||(c.value={type:"user-defined",using:ve.value,mandatory:!0})});const G=_(()=>c.value.type==="default"&&X(a.column.record.initialState.type,a.column.type)),be=_(()=>!X(a.column.record.initialState.type,a.column.type));function re(f){f?c.value={type:"default"}:c.value={type:"user-defined",using:ve.value,mandatory:!1}}function ke(f){if(c.value.type==="default")throw new Error("Can't change using when using default casting");c.value.using=f!=null?f:""}const ue=()=>be.value?!0:Z()&&c.value.type==="user-defined",ve=_(()=>`${a.column.record.initialState.name}::${a.column.type}`);async function Ve(){if(!a.column)return;let f=c.value.type==="default"?ve.value:c.value.using;v.value===0&&(f=`${a.column.record.initialState.name}::text::${a.column.type}`);try{await a.column.update(f),r("updated")}catch(y){y instanceof Error&&He("Database error",y.message)}}return(f,y)=>(t(),C(e(Te),{title:e(b).translate("i18n_updatecolumn_edit_column"),width:720,open:f.open,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:l},{extra:n(()=>[o(e(qe),null,{default:n(()=>[o(e(ae),{onClick:l},{default:n(()=>[P(T(e(b).translate("i18n_updatecolumn_cancel")),1)]),_:1}),o(e(ae),{type:"primary",onClick:Ve},{default:n(()=>[P(T(e(b).translate("i18n_updatecolumn_save")),1)]),_:1})]),_:1})]),footer:n(()=>[o(se,{danger:"",onClick:y[7]||(y[7]=N=>J(String(f.column.id)))},{default:n(()=>[P(T(e(b).translate("i18n_updatecolumn_delete")),1)]),_:1})]),default:n(()=>[o(e(Le),{model:f.column,layout:"vertical"},{default:n(()=>[o(e(Y),{key:"name",label:e(b).translate("i18n_updatecolumn_name"),"validate-status":w.value.status,help:w.value.help},{default:n(()=>[o(e(de),{value:f.column.name,"onUpdate:value":y[0]||(y[0]=N=>f.column.name=N)},null,8,["value"])]),_:1},8,["label","validate-status","help"]),u("div",h1,[u("span",y1,[o(e(Y),{key:"type",label:e(b).translate("i18n_updatecolumn_current_type")},{default:n(()=>[o(e(Ze),{value:d.value,"onUpdate:value":y[1]||(y[1]=N=>d.value=N),"default-active-first-option":"",disabled:""},null,8,["value"])]),_:1},8,["label"])]),o(e(qa),{class:"right-arrow"}),u("span",b1,[o(e(Y),{key:"new-type",label:e(b).translate("i18n_updatecolumn_new_type")},{default:n(()=>[o(e(la),{options:g.value,"load-data":j,"display-render":q,"allow-clear":!0,onClear:E,onChange:U},null,8,["options"])]),_:1},8,["label"])])]),o(e(Y),{key:"default-value",label:e(b).translate("i18n_updatecolumn_default_value"),"validate-status":$.value.status,help:$.value.message},{default:n(()=>[o(e(de),{value:f.column.default,"onUpdate:value":y[2]||(y[2]=N=>f.column.default=N),placeholder:e(b).translate("i18n_updatecolumn_null_placeholder"),onInput:I},{suffix:n(()=>[$.value.fakeLoading?(t(),C(e($e),{key:0,size:"small"})):z("",!0),!$.value.fakeLoading&&$.value.status==="success"?(t(),C(e(Xe),{key:1,size:18})):z("",!0),!$.value.fakeLoading&&$.value.status==="error"?(t(),C(e(ta),{key:2,size:18})):z("",!0)]),_:1},8,["value","placeholder"])]),_:1},8,["label","validate-status","help"]),u("div",_1,[Z()?(t(),C(e(Y),{key:"default-casting",label:e(b).translate("i18n_updatecolumn_use_default_casting")},{default:n(()=>[o(e(he),{checked:G.value,disabled:be.value,"onUpdate:checked":y[3]||(y[3]=N=>re(!!N))},null,8,["checked","disabled"])]),_:1},8,["label"])):z("",!0),u("span",$1,[Z()?(t(),C(e(Y),{key:"using",label:e(b).translate("i18n_updatecolumn_using")},{default:n(()=>[o(e(de),{value:c.value.type==="user-defined"?c.value.using:ve.value,disabled:!ue(),onInput:y[4]||(y[4]=N=>ke(N.target.value))},null,8,["value","disabled"])]),_:1},8,["label"])):z("",!0)])]),o(e(W),null,{default:n(()=>[o(e(Y),{key:"nullable",label:e(b).translate("i18n_updatecolumn_nullable")},{default:n(()=>[o(e(he),{checked:f.column.nullable,"onUpdate:checked":y[5]||(y[5]=N=>f.column.nullable=N)},null,8,["checked"])]),_:1},8,["label"]),o(e(Y),{key:"unique",label:e(b).translate("i18n_updatecolumn_unique")},{default:n(()=>[o(e(he),{checked:f.column.unique,"onUpdate:checked":y[6]||(y[6]=N=>f.column.unique=N)},null,8,["checked"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","open"]))}});const k1=ze(H1,[["__scopeId","data-v-f24d9ba7"]]),V1={style:{overflow:"hidden","white-space":"wrap"}},w1={key:1},C1={key:0,class:"table-row null"},A1={class:"foreign-key-popover"},Z1={key:0,class:"popover-loading"},M1={class:"field-label"},I1={class:"foreign-key-popover"},S1={key:0,class:"popover-loading"},z1={class:"field-label"},L1={class:"field-value"},B1={key:2,class:"foreign-key-error"},T1={key:1,class:"field-value"},x1={key:2,class:"foreign-key-error"},q1={class:"button-container"},D1={class:"button-container"},j1={class:"button-container"},N1={class:"button-container"},F1=Q({__name:"TableData",props:{table:{},loading:{type:Boolean}},emits:["refresh"],setup(H,{emit:r}){var je;const a=H,k=F(1),p=F(10),d=_(()=>{var m,V;return{total:(V=(m=re.value)==null?void 0:m.total)!=null?V:0,current:k.value,pageSize:p.value,totalBoundaryShowSizeChanger:10,showSizeChanger:!0,pageSizeOptions:["10","25","50","100"],onChange:async(D,A)=>{k.value=D,p.value=A,await ue()}}}),i=F([]),w=F(!1),v=F(null),h=F(null),l=F(!1),M=F(null),$=me(),I=Se(),L=F(typeof $.query.q=="string"?$.query.q:""),g=_(()=>{try{return JSON.parse($.query.where)}catch{return{}}}),j=F(Object.keys(g.value).length>0?{type:"and",conditions:Object.entries(g.value).reduce((m,[V,D])=>[...m,{type:"eq",field:V,value:D}],[])}:{type:"search",q:L.value}),q=_(()=>j.value.type==="search"?j.value.q:""),U=_(()=>j.value.type==="search"?{}:j.value.conditions.reduce((m,V)=>({...m,[V.field]:V.value}),{}));function J(m){m.type==="search"?I.replace({query:{q:m.q}}):I.replace({query:{where:JSON.stringify(U.value)}}),k.value=1,ue()}const S=F({type:"idle"});function Z(){S.value={type:"idle"}}async function c(){Z(),r("refresh")}ye(()=>a.table,()=>{ra(),ue()});function E(){S.value={type:"creating"}}const X=m=>{if(!a.table)throw new Error("Table not found");S.value={type:"editing",column:a.table.getColumn(m)}},K=F(null),G=m=>{var V;((V=K.value)==null?void 0:V.column)===m?K.value={column:m,direction:K.value.direction==="asc"?"desc":"asc"}:K.value={column:m,direction:"asc"},ue()},be=_(()=>{var m;return((m=re.value)==null?void 0:m.rows.length)===1}),{result:re,loading:ke,refetch:ue}=Ie(async()=>{const[{rows:m,total:V},D]=await Promise.all([a.table.select(U.value,(k.value-1)*p.value,p.value,q.value,K.value||void 0),Promise.all(a.table.getColumns().filter(A=>A.foreignKey).map(A=>oe.fromColumnId($.params.projectId,A.foreignKey.columnId).then(O=>[A.name,O])))]);return{rows:m,total:V,columns:D.reduce((A,[O,R])=>({...A,[O]:R}),{})}}),ve=(m,V)=>{var R,ee;const D=(R=a.table)==null?void 0:R.getColumns().find(B=>B.name===m);if(!D)return"";const A=(ee=re.value)==null?void 0:ee.columns[D.name],O=A==null?void 0:A.getColumns().find(B=>{var le;return B.id===((le=D.foreignKey)==null?void 0:le.columnId)});return!A||!O?"":{name:"tableEditor",params:{projectId:$.params.projectId,tableId:A.id},query:{where:JSON.stringify({[O.name]:V})}}},Ve=async(m,V)=>{var D;w.value=!0,v.value=null,h.value=null;try{const A=(D=a.table)==null?void 0:D.getColumns().find(B=>B.name===m);if(!A||!A.foreignKey)return;const O=await Pe.fromID($.params.projectId,A.foreignKey.columnId),R=await oe.get($.params.projectId,O.tableId),ee=await R.select({[O.name]:V},0,1,"");ee.rows.length>0&&(v.value=ee.rows[0],h.value=R)}catch(A){console.error("Error loading foreign key data:",A)}finally{w.value=!1}},f=m=>{if(!h.value)return!1;const V=h.value.getColumns().find(D=>D.name===m);return!!(V!=null&&V.foreignKey)},y=async(m,V)=>{if(!!h.value){l.value=!0,M.value=null;try{const D=h.value.getColumns().find(ee=>ee.name===m);if(!D||!D.foreignKey)return;const A=await Pe.fromID($.params.projectId,D.foreignKey.columnId),R=await(await oe.get($.params.projectId,A.tableId)).select({[A.name]:V},0,1,"");R.rows.length>0&&(M.value=R.rows[0])}catch(D){console.error("Error loading nested foreign key data:",D)}finally{l.value=!1}}},N=(m,V)=>{S.value.type==="adding"&&(S.value.editableItem[m]=V)},ie=(m,V)=>{S.value.type==="adding"&&(S.value.editableItem[m]=V?null:"")},De=()=>[...a.table.getColumns().map(m=>{var V;return{key:(V=m.id)!=null?V:"",title:m.name,dataIndex:m.name,width:220,resizable:!0,ellipsis:!1}}),{key:"action",title:"",fixed:"right",width:100,align:"center",resizable:!1,ellipsis:!1}],oa=De(),fe=F(oa),ra=()=>fe.value=De();function ua(m,V){fe.value=fe.value.map(D=>D.key===V.key?{...D,width:m}:D)}const we=_(()=>{var m;return((m=re.value)==null?void 0:m.rows.map(V=>({key:V.id,...V})))||[]});let ia=ba((je=a.table)==null?void 0:je.getUnprotectedColumns().reduce((m,V)=>({...m,[V.name]:""}),{}));const Ce=F(!1);async function sa(){if(!(!a.table||!ia||S.value.type!=="adding")){Ce.value=!0;try{S.value.editableItem.id&&(typeof S.value.editableItem.id=="string"||typeof S.value.editableItem.id=="number")?await a.table.updateRow(S.value.editableItem.id.toString(),S.value.editableItem):await a.table.insertRow(S.value.editableItem),ue(),Z()}catch(m){m instanceof Error&&He("Database error",m.message)}finally{Ce.value=!1}}}const da=async m=>{if(!(!re.value||!re.value.rows.find(V=>V.id===m)))try{await a.table.deleteRow(m),be.value&&(k.value=Math.max(1,k.value-1)),ue()}catch(V){V instanceof Error&&He("Database error",V.message)}},ca=m=>{var ee;const V=(ee=we.value)==null?void 0:ee.filter(B=>m===B.key)[0],D=a.table.getColumns(),A=D.map(B=>B.name),O=D.filter(B=>B.type==="json").map(B=>B.name),R=_e.exports.pick(_e.exports.cloneDeep(V),A);O.forEach(B=>{R[B]&&(R[B]=JSON.stringify(R[B]))}),S.value={type:"adding",editableItem:R}};return(m,V)=>{const D=Be("RouterLink");return t(),C(Me,{"full-width":""},{default:n(()=>[o(e(W),{justify:"space-between",style:{"margin-bottom":"16px"},gap:"middle"},{default:n(()=>[o(g1,{search:j.value,"onUpdate:search":[V[0]||(V[0]=A=>j.value=A),J],table:m.table,data:we.value},null,8,["search","table","data"]),o(e(W),{justify:"flex-end",gap:"middle"},{default:n(()=>[o(se,{type:"primary",onClick:E},{default:n(()=>[o(e(z0)),P(T(e(b).translate("i18n_tabledata_create_column")),1)]),_:1}),fe.value.length===3?(t(),C(e(ge),{key:0,title:e(b).translate("i18n_tabledata_create_column_first")},{default:n(()=>[o(se,{disabled:!0,onClick:V[1]||(V[1]=A=>S.value={type:"adding",editableItem:{}})},{default:n(()=>[o(e(Qe)),P(T(e(b).translate("i18n_tabledata_add_data")),1)]),_:1})]),_:1},8,["title"])):(t(),C(se,{key:1,onClick:V[2]||(V[2]=A=>S.value={type:"adding",editableItem:{}})},{default:n(()=>[o(e(Qe)),P(T(e(b).translate("i18n_tabledata_add_data")),1)]),_:1}))]),_:1})]),_:1}),o(e(ka),{columns:fe.value,"data-source":we.value,pagination:d.value,bordered:"",loading:e(ke)||m.loading,scroll:{x:1e3,y:720},size:"small",onResizeColumn:ua},{headerCell:n(({column:A})=>[A.title!=="id"&&A.title!=="created_at"&&A.key!=="action"?(t(),C(e(W),{key:0,align:"center",justify:"space-between",gap:"small"},{default:n(()=>[o(e(W),{style:{overflow:"hidden","white-space":"wrap"},align:"center",gap:"small"},{default:n(()=>[u("span",V1,T(A.title),1),o(e(W),null,{default:n(()=>[o(Je,{column:A,"order-by":K.value,onReorder:G},null,8,["column","order-by"])]),_:2},1024)]),_:2},1024),o(se,{type:"text",onClick:O=>X(String(A.key))},{default:n(()=>[o(e(Ba),{size:"18"})]),_:2},1032,["onClick"])]),_:2},1024)):(t(),s("span",w1,[o(e(W),{align:"center",gap:"small"},{default:n(()=>[P(T(A.title)+" ",1),A.key!=="action"?(t(),C(Je,{key:0,column:A,"order-by":K.value,onReorder:G},null,8,["column","order-by"])):z("",!0)]),_:2},1024)]))]),bodyCell:n(({column:A,text:O,record:R})=>{var ee;return[fe.value.map(B=>B.title).includes(A.dataIndex)?(t(),s(te,{key:0},[O===null?(t(),s("div",C1,T(e(b).translate("i18n_tabledata_null")),1)):(ee=m.table.getColumns().find(B=>B.name===A.dataIndex))!=null&&ee.foreignKey?(t(),C(e(Re),{key:1,trigger:["hover"],placement:"right",onMouseenter:B=>Ve(A.dataIndex,O)},{content:n(()=>[u("div",A1,[w.value?(t(),s("div",Z1,[o(e($e),{size:"small"})])):v.value&&h.value?(t(!0),s(te,{key:1},ne(v.value,(B,le)=>(t(),s("div",{key:le,class:"foreign-key-field"},[u("div",M1,T(le),1),f(le)&&B!==null?(t(),C(e(Re),{key:0,trigger:["hover"],placement:"right",onMouseenter:Ae=>y(le,B)},{content:n(()=>[u("div",I1,[l.value?(t(),s("div",S1,[o(e($e),{size:"small"})])):M.value?(t(!0),s(te,{key:1},ne(M.value,(Ae,Ne)=>(t(),s("div",{key:Ne,class:"foreign-key-field"},[u("div",z1,T(Ne),1),u("div",L1,T(Ae!==null?Ae:""),1)]))),128)):(t(),s("div",B1,T(e(b).translate("i18n_tabledata_failed_to_load")),1))])]),default:n(()=>[o(e(Ee),{class:"nested-fk-tag",color:"blue"},{default:n(()=>[P(T(B),1)]),_:2},1024)]),_:2},1032,["onMouseenter"])):(t(),s("div",T1,T(B!==null?B:""),1))]))),128)):(t(),s("div",x1,T(e(b).translate("i18n_tabledata_failed_to_load")),1))])]),default:n(()=>[o(e(Ee),{color:"blue",class:"foreign-key-tag"},{default:n(()=>[o(D,{to:ve(A.dataIndex,O),target:"_blank",class:"foreign-key-link"},{default:n(()=>[P(T(O),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2},1032,["onMouseenter"])):(t(),s("div",{key:2,class:_a(["table-row",{expanded:i.value.includes(R.id)}])},T(O),3))],64)):z("",!0),A.key==="action"?(t(),C(e(W),{key:1,gap:"small",justify:"center"},{default:n(()=>[i.value.includes(R.id)?(t(),C(e(ae),{key:0,class:"icons",onClick:B=>i.value=i.value.filter(le=>le!==R.id)},{icon:n(()=>[o(e(ge),{title:e(b).translate("i18n_tabledata_collapse")},{default:n(()=>[u("div",q1,[o(e(et),{size:15})])]),_:1},8,["title"])]),_:2},1032,["onClick"])):(t(),C(e(ae),{key:1,onClick:B=>i.value.push(R.id)},{icon:n(()=>[o(e(ge),{title:e(b).translate("i18n_tabledata_expand")},{default:n(()=>[u("div",D1,[o(e(Ht),{size:15})])]),_:1},8,["title"])]),_:2},1032,["onClick"])),o(e(ae),{onClick:B=>ca(R.id)},{icon:n(()=>[o(e(ge),{title:e(b).translate("i18n_tabledata_edit")},{default:n(()=>[u("div",j1,[o(e(Da),{size:15})])]),_:1},8,["title"])]),_:2},1032,["onClick"]),o(e($a),{title:e(b).translate("i18n_tabledata_sure_to_delete"),onConfirm:B=>da(R.id)},{default:n(()=>[o(e(ae),null,{icon:n(()=>[o(e(ge),{title:e(b).translate("i18n_tabledata_delete")},{default:n(()=>[u("div",N1,[o(e(Ha),{size:15})])]),_:1},8,["title"])]),_:1})]),_:2},1032,["title","onConfirm"])]),_:2},1024)):z("",!0)]}),_:1},8,["columns","data-source","pagination","loading"]),S.value.type==="adding"?(t(),C(s1,{key:0,open:S.value.type==="adding",table:a.table,"editable-item":S.value.editableItem,loading:Ce.value,onUpdateNullable:ie,onRecordChange:N,onClose:Z,onCancel:Z,onSave:sa},null,8,["open","table","editable-item","loading"])):z("",!0),S.value.type==="creating"?(t(),C(d1,{key:1,open:S.value.type==="creating",table:a.table,onClose:Z,onCancel:Z,onCreated:c},null,8,["open","table"])):z("",!0),S.value.type==="editing"?(t(),C(k1,{key:2,open:S.value.type==="editing",column:S.value.column,table:m.table,onUpdated:c,onClose:Z,onCancel:Z},null,8,["open","column","table"])):z("",!0)]),_:1})}}});const U1={style:{"font-size":"16px"}},An=Q({__name:"TableEditor",setup(H){const r=Se(),a=me(),k=Ke(()=>{if(typeof a.params.tableId=="string")return a.params.tableId;throw new Error("tableId is not a string")}),p=Ke(()=>{if(typeof a.params.projectId=="string")return a.params.projectId;throw new Error("projectId is not a string")}),d=F(!1),i=va(),w=()=>{var L;d.value=!1,(L=h.value)==null||L.table.save(),M()},v=_(()=>h.value?h.value.table.name:b.translate("i18n_tableeditor_loading")),{result:h,loading:l,refetch:M}=Ie(()=>Promise.all([xe.get(p.value).then(async L=>{const g=await Za.get(L.organizationId),U=(await new Ia().list(g.id)).find(J=>J.id===L.folderId);if(!U)throw new Error("Folder not found");return{project:L,organization:g,folder:U}}),oe.get(p.value,k.value)]).then(([{project:L,organization:g,folder:j},q])=>({project:L,organization:g,table:q,folder:j})));ye([k,p],()=>{M()});const $=_(()=>!l.value&&h.value?[{label:b.translate("i18n_tableeditor_my_organizations"),path:"/organizations"},{label:h.value.organization.name,path:`/organizations/${h.value.organization.id}`},{label:h.value.folder.name,path:`/organizations/${h.value.organization.id}#${h.value.folder.id}`},{label:h.value.project.name,path:`/projects/${h.value.project.id}/tables`}]:void 0);function I(){r.push({name:"tables",params:{projectId:p.value}})}return ea(()=>{const L=Fe.subscribe("columnCreated",({tableId:g})=>{g===k.value&&M()});Va(()=>{Fe.unsubscribe(L)})}),(L,g)=>{const j=Be("RouterLink");return t(),C(pa,{key:k.value},{navbar:n(()=>[o(e(Ua),{style:{padding:"5px 25px",border:"1px solid #f0f0f0"},onBack:I},{title:n(()=>[o(e(W),{align:"center",gap:"small"},{default:n(()=>[u("span",U1,T(v.value),1),o(se,{type:"text",onClick:g[0]||(g[0]=q=>d.value=!0)},{default:n(()=>[o(e(Ll),{size:"16"})]),_:1})]),_:1}),o(e(wa),{title:e(b).translate("i18n_tableeditor_change_table_name"),open:d.value,onCancel:g[2]||(g[2]=q=>d.value=!1),onOk:w},{default:n(()=>[e(h)?(t(),C(e(de),{key:0,value:e(h).table.name,"onUpdate:value":g[1]||(g[1]=q=>e(h).table.name=q)},null,8,["value"])):z("",!0)]),_:1},8,["title","open"])]),subTitle:n(()=>[$.value?(t(),C(e(Na),{key:0,style:{margin:"0px 20px"}},{default:n(()=>[(t(!0),s(te,null,ne($.value,(q,U)=>(t(),C(e(Fa),{key:U},{default:n(()=>[o(j,{to:q.path},{default:n(()=>[P(T(q.label),1)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1})):z("",!0)]),extra:n(()=>[o(se,{type:"link",onClick:g[3]||(g[3]=q=>e(i).toggle())},{default:n(()=>[o(e(Ca)),P(" "+T(e(b).translate("i18n_tableeditor_ai_assistant")),1)]),_:1})]),_:1})]),content:n(()=>[e(h)?(t(),C(F1,{key:0,loading:e(l),table:e(h).table,onRefresh:g[4]||(g[4]=q=>e(M)())},null,8,["loading","table"])):z("",!0),e(h)?(t(),C(i1,{key:1,table:e(h).table},null,8,["table"])):z("",!0)]),chat:n(()=>[o(Sa)]),_:1})}}});export{An as default};
//# sourceMappingURL=TableEditor.e7672853.js.map
