var $=Object.defineProperty;var B=(a,s,i)=>s in a?$(a,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[s]=i;var y=(a,s,i)=>(B(a,typeof s!="symbol"?s+"":s,i),i);import{L as LoadingIndicator}from"./CircularLoading.59d7fd3d.js";import{S as toEnvURL,d as defineComponent,u as reactive,b as openBlock,c as createElementBlock,v as createBaseVNode,H as toDisplayString,V as withDirectives,W as vModelText,$ as withKeys,B as createCommentVNode,N as pushScopeId,O as popScopeId,q as _export_sfc,a9 as defineAsyncComponent,aa as toRefs,_ as __vitePreload,a as resolveComponent,e as createVNode,G as computed,F as Fragment,J as renderList,E as normalizeClass,y as unref,I as Icon,t as createBlock,R as createTextVNode,ab as createStaticVNode,r as ref,w as withCtx,ac as TransitionGroup,ad as computed$1,o as onMounted,Q as watch,A as renderSlot,z as normalizeStyle}from"./registerWidgets.fff064a1.js";import{l as key,t as thinrefresh,n as menu,o as logout}from"./icons.b8ff2c28.js";import{g as getCname}from"./index.314cf40a.js";import{M as Modal}from"./Modal.2ceba592.js";class Storage{static get(s){try{const i=localStorage.getItem(s);return i&&JSON.parse(i)}catch{return null}}static set(s,i){localStorage.setItem(s,JSON.stringify(i))}static pop(s){const i=Storage.get(s);return Storage.remove(s),i}static remove(s){localStorage.removeItem(s)}}function e(a){this.message=a}e.prototype=new Error,e.prototype.name="InvalidCharacterError";var r=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(a){var s=String(a).replace(/=+$/,"");if(s.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,l,d=0,m=0,u="";l=s.charAt(m++);~l&&(i=d%4?64*i+l:l,d++%4)?u+=String.fromCharCode(255&i>>(-2*d&6)):0)l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(l);return u};function t(a){var s=a.replace(/-/g,"+").replace(/_/g,"/");switch(s.length%4){case 0:break;case 2:s+="==";break;case 3:s+="=";break;default:throw"Illegal base64url string!"}try{return function(i){return decodeURIComponent(r(i).replace(/(.)/g,function(l,d){var m=d.charCodeAt(0).toString(16).toUpperCase();return m.length<2&&(m="0"+m),"%"+m}))}(s)}catch{return r(s)}}function n(a){this.message=a}function o(a,s){if(typeof a!="string")throw new n("Invalid token specified");var i=(s=s||{}).header===!0?0:1;try{return JSON.parse(t(a.split(".")[i]))}catch(l){throw new n("Invalid token specified: "+l.message)}}n.prototype=new Error,n.prototype.name="InvalidTokenError";const f=class{async authenticate(s){try{const i=await fetch(`${toEnvURL("passwordless")}/authenticate`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:s})});if(!i.ok)throw new Error(await i.text());return null}catch(i){return i.message}}async verify(s,i){const l=await fetch(`${toEnvURL("passwordless")}/verify`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:s,token:i})});if(!l.ok)throw new Error(await l.text());const d=await l.json();return this.saveJWT(d.jwt),this.getUser()}saveJWT(s){Storage.set(f.key,s)}getJWT(){return Storage.get(f.key)}getUser(){const s=this.getJWT();if(s)try{const i=o(s);if(i.exp&&i.exp>Date.now()/1e3)return{jwt:s,claims:i}}catch{console.warn("Invalid JWT")}return null}removeUser(){Storage.remove(f.key)}getUserHeaders(){const s=this.getJWT();return s?{"User-Authorization":`Bearer ${s}`}:{}}};let PasswordlessManager=f;y(PasswordlessManager,"key","hackerforms:auth:jwt");const passwordlessManager=new PasswordlessManager,_withScopeId$3=a=>(pushScopeId("data-v-1b435c3a"),a=a(),popScopeId(),a),_hoisted_1$9={class:"auth-info"},_hoisted_2$8={class:"auth-header"},_hoisted_3$6={class:"auth-label"},_hoisted_4$5=_withScopeId$3(()=>createBaseVNode("div",{class:"description"},"To continue we need you to authenticate",-1)),_hoisted_5$4=["onKeyup"],_hoisted_6$3={key:0,class:"span-error"},_hoisted_7$2=_withScopeId$3(()=>createBaseVNode("div",{class:"spacer"},null,-1)),_sfc_main$a=defineComponent({__name:"AuthInfo",props:{invalid:{type:Boolean,default:!1},header:{type:String}},emits:["sendAuthInfo"],setup(a,{emit:s}){const i=reactive({email:""}),l=()=>{s("sendAuthInfo",i)};return(d,m)=>(openBlock(),createElementBlock("div",_hoisted_1$9,[createBaseVNode("div",_hoisted_2$8,[createBaseVNode("div",_hoisted_3$6,toDisplayString(a.header),1),_hoisted_4$5]),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":m[0]||(m[0]=u=>i.email=u),type:"email",placeholder:"Email address",class:"input email-input",onKeyup:withKeys(l,["enter"])},null,40,_hoisted_5$4),[[vModelText,i.email]]),a.invalid?(openBlock(),createElementBlock("span",_hoisted_6$3," Email invalid, please try again. ")):createCommentVNode("",!0),_hoisted_7$2,createBaseVNode("button",{class:"next-button",onClick:l}," Send a verification email ")]))}}),AuthInfo_vue_vue_type_style_index_0_scoped_1b435c3a_lang="",AuthInfo=_export_sfc(_sfc_main$a,[["__scopeId","data-v-1b435c3a"]]),_sfc_main$9=defineComponent({components:{ButtonWithIcon:defineAsyncComponent(()=>__vitePreload(()=>import("./ButtonWithIcon.59b28959.js"),["assets/ButtonWithIcon.59b28959.js","assets/registerWidgets.fff064a1.js","assets/registerWidgets.c4c71ee6.css"]))},props:{expired:Boolean,invalid:Boolean,email:String},emits:["sendToken","restartAuth","resendToken"],setup(a,{emit:s}){const i=reactive({token:""}),l=()=>{s("restartAuth")},d=()=>{s("resendToken")},m=()=>{s("sendToken",i.token)};return{...toRefs(i),restartAuth:l,resendToken:d,sendToken:m,keyIcon:key,icon:thinrefresh}}}),AuthToken_vue_vue_type_style_index_0_scoped_3e3a9099_lang="",_withScopeId$2=a=>(pushScopeId("data-v-3e3a9099"),a=a(),popScopeId(),a),_hoisted_1$8={class:"auth-token"},_hoisted_2$7={class:"auth-label"},_hoisted_3$5={key:0,class:"span-error"},_hoisted_4$4={key:1,class:"span-error"},_hoisted_5$3=_withScopeId$2(()=>createBaseVNode("div",{class:"spacer"},null,-1)),_hoisted_6$2=_withScopeId$2(()=>createBaseVNode("div",{class:"footer"}," If you haven't received the verification code, try again or choose another email ",-1));function _sfc_render(a,s,i,l,d,m){const u=resolveComponent("button-with-icon");return openBlock(),createElementBlock("div",_hoisted_1$8,[createBaseVNode("div",_hoisted_2$7," Check "+toDisplayString(a.email)+"'s inbox and enter your verification code below ",1),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":s[0]||(s[0]=c=>a.token=c),type:"text",placeholder:"Type your verification code",class:"input",onKeyup:s[1]||(s[1]=withKeys((...c)=>a.sendToken&&a.sendToken(...c),["enter"]))},null,544),[[vModelText,a.token]]),a.expired?(openBlock(),createElementBlock("span",_hoisted_3$5," Token expired, try to resend it. ")):createCommentVNode("",!0),a.invalid?(openBlock(),createElementBlock("span",_hoisted_4$4," Token invalid, please try again or go back and alter you email address. ")):createCommentVNode("",!0),_hoisted_5$3,createBaseVNode("button",{class:"next-button",onClick:s[2]||(s[2]=(...c)=>a.sendToken&&a.sendToken(...c))},"Verify Email"),createVNode(u,{"class-name":"secondary-button back",message:"Try Again",icon:a.icon,onClick:a.restartAuth},null,8,["icon","onClick"]),createBaseVNode("button",{class:"secondary-button back",onClick:s[3]||(s[3]=(...c)=>a.resendToken&&a.resendToken(...c))}," Resend Email "),_hoisted_6$2])}const AuthToken=_export_sfc(_sfc_main$9,[["render",_sfc_render],["__scopeId","data-v-3e3a9099"]]),_hoisted_1$7={key:0,class:"form"},_hoisted_2$6={class:"form-wrapper"},_hoisted_3$4={class:"widget"},_hoisted_4$3={key:1,class:"form"},_hoisted_5$2={class:"form-wrapper"},_hoisted_6$1={class:"widget"},_hoisted_7$1={key:2,class:"form"},_hoisted_8={class:"form-wrapper"},_hoisted_9={class:"loading"},_sfc_main$8=defineComponent({__name:"Passwordless",props:{header:{type:String,default:"Validate your email"}},emits:["done"],setup(a,{emit:s}){const i=reactive({stage:"collect-info",info:null,token:null,invalid:!1}),l=async c=>{i.info=c,i.stage="loading";const _=await passwordlessManager.authenticate(c.email);i.invalid=!!_,_?i.stage="collect-info":i.stage="collect-token"},d=async c=>{var _;if(!!((_=i.info)!=null&&_.email)){i.token=c,i.stage="loading";try{const p=await passwordlessManager.verify(i.info.email,i.token);if(!p)throw new Error("no user");s("done",p),i.stage="done"}catch{i.invalid=!0,i.stage="collect-token"}}},m=()=>{i.info&&l(i.info)},u=()=>{i.stage="collect-info",i.info=null,i.token=null,i.invalid=!1};return(c,_)=>{var p,h;return i.stage==="collect-info"?(openBlock(),createElementBlock("div",_hoisted_1$7,[createBaseVNode("div",_hoisted_2$6,[createBaseVNode("div",_hoisted_3$4,[createVNode(AuthInfo,{invalid:i.invalid,header:a.header,onSendAuthInfo:l},null,8,["invalid","header"])])])])):i.stage==="collect-token"?(openBlock(),createElementBlock("div",_hoisted_4$3,[createBaseVNode("div",_hoisted_5$2,[createBaseVNode("div",_hoisted_6$1,[createVNode(AuthToken,{invalid:i.invalid,email:(h=(p=i.info)==null?void 0:p.email)!=null?h:"",onSendToken:d,onResendToken:m,onRestartAuth:u},null,8,["invalid","email"])])])])):(openBlock(),createElementBlock("div",_hoisted_7$1,[createBaseVNode("div",_hoisted_8,[createBaseVNode("div",_hoisted_9,[createVNode(LoadingIndicator)])])]))}}}),Passwordless_vue_vue_type_style_index_0_scoped_cdf5651f_lang="",Passwordless=_export_sfc(_sfc_main$8,[["__scopeId","data-v-cdf5651f"]]),_hoisted_1$6={class:"sidebar-content"},_hoisted_2$5={class:"section"},_hoisted_3$3=["onClick"],_sfc_main$7=defineComponent({__name:"Sidebar",props:{currentRuntime:{type:Object,required:!0},displaySidebar:{type:Boolean,required:!0},forceResponsivity:{type:String,default:null}},emits:["selectRuntime","closeSidebar"],setup(a,{emit:s}){const i=a,l=computed(()=>i.currentRuntime.runtimeType==="dash"),d=c=>{u(c.id)||s("selectRuntime",c)},m=computed(()=>i.currentRuntime.sidebar.filter(c=>c.visible)),u=c=>c===i.currentRuntime.id;return(c,_)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["sidebar",a.forceResponsivity,{open:a.displaySidebar,dash:unref(l)}])},[createBaseVNode("div",_hoisted_1$6,[createBaseVNode("div",_hoisted_2$5,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(m),p=>(openBlock(),createElementBlock("div",{key:p.id,class:normalizeClass(["item",{active:u(p.id)}]),onClick:h=>d(p)},[createBaseVNode("div",{class:normalizeClass(["item-title",{open:a.displaySidebar}])},toDisplayString(p.name),3)],10,_hoisted_3$3))),128))])])],2))}}),Sidebar_vue_vue_type_style_index_0_scoped_10d37088_lang="",Sidebar=_export_sfc(_sfc_main$7,[["__scopeId","data-v-10d37088"]]),_withScopeId$1=a=>(pushScopeId("data-v-d84025be"),a=a(),popScopeId(),a),_hoisted_1$5={class:"left-side"},_hoisted_2$4=["d"],_hoisted_3$2={key:1,class:"brand"},_hoisted_4$2=["src"],_hoisted_5$1={key:1,class:"brand-name"},_hoisted_6=_withScopeId$1(()=>createBaseVNode("div",null,null,-1)),_hoisted_7={key:0,class:"signed-email"},_sfc_main$6=defineComponent({__name:"Navbar",props:{runtime:{type:Object,required:!0},brandName:{type:String},logoUrl:{type:String},userEmail:{type:String},forceResponsivity:{type:String,default:null}},emits:["logout","navigate"],setup(a,{emit:s}){const i=a,l=reactive({displaySidebar:!1}),d=computed(()=>{const u=i.runtime.sidebar;return!u||u.length==0?!1:u.some(c=>c.visible)}),m=u=>s("navigate",u);return(u,c)=>(openBlock(),createElementBlock(Fragment,null,[unref(d)||a.runtime.logoUrl||a.runtime.brandName||a.userEmail?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["navbar",(a.runtime.runtimeType=="dash"||unref(d))&&"background"])},[createBaseVNode("div",_hoisted_1$5,[unref(d)?(openBlock(),createElementBlock("svg",{key:0,class:normalizeClass(["sidebar-menu-icon",a.forceResponsivity,{dash:a.runtime.runtimeType=="dash"}]),viewBox:"0 0 24 24",fill:"var(--color-main)",onClick:c[0]||(c[0]=_=>l.displaySidebar=!l.displaySidebar)},[createBaseVNode("path",{d:unref(menu)},null,8,_hoisted_2$4)],2)):createCommentVNode("",!0),a.runtime.logoUrl||a.runtime.brandName?(openBlock(),createElementBlock("div",_hoisted_3$2,[a.runtime.logoUrl?(openBlock(),createElementBlock("img",{key:0,src:a.runtime.logoUrl,class:"logo-image"},null,8,_hoisted_4$2)):createCommentVNode("",!0),a.runtime.brandName?(openBlock(),createElementBlock("p",_hoisted_5$1,toDisplayString(a.runtime.brandName),1)):createCommentVNode("",!0)])):createCommentVNode("",!0)]),_hoisted_6,a.userEmail?(openBlock(),createElementBlock("div",_hoisted_7,[createBaseVNode("span",null,toDisplayString(a.userEmail),1),createVNode(Icon,{width:"20",height:"20",class:"logout",path:unref(logout),fill:"var(--color-main)",onClick:c[1]||(c[1]=_=>s("logout"))},null,8,["path"])])):createCommentVNode("",!0)],2)):createCommentVNode("",!0),unref(d)?(openBlock(),createBlock(Sidebar,{key:1,"current-runtime":a.runtime,"display-sidebar":l.displaySidebar,"force-responsivity":a.forceResponsivity,onSelectRuntime:m},null,8,["current-runtime","display-sidebar","force-responsivity"])):createCommentVNode("",!0)],64))}}),Navbar_vue_vue_type_style_index_0_scoped_d84025be_lang="",Navbar=_export_sfc(_sfc_main$6,[["__scopeId","data-v-d84025be"]]),_hoisted_1$4=["href"],_hoisted_2$3=createStaticVNode('<svg width="44" height="32" viewBox="0 0 256 256" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-5e5aec4d><g clip-path="url(#clip0_405_116214)" data-v-5e5aec4d><path d="M188.697 133.808L172.68 148.263C172.68 148.263 216.044 185.966 217.997 187.72C219.951 189.475 234.405 174.566 232.843 173.266C231.28 171.966 188.697 133.808 188.697 133.808Z" fill="#E36C7C" data-v-5e5aec4d></path><path d="M188.697 133.808L172.68 148.263C172.68 148.263 216.044 185.966 217.997 187.72C219.951 189.475 234.405 174.566 232.843 173.266C231.28 171.966 188.697 133.808 188.697 133.808Z" fill="url(#paint0_linear_405_116214)" data-v-5e5aec4d></path><path d="M218.387 91.2249L176.195 127.557L173.851 129.51C151.192 149.849 149.853 152.309 141.642 152.584L141.584 152.586C139.612 152.652 135.357 152.795 131.875 149.849C126.797 145.552 120.155 140.083 117.03 137.348C115.34 135.869 112.465 133.039 109.998 131.097C107.902 129.448 106.482 127.581 104.919 127.581C103.357 127.581 100.622 129.925 96.3246 133.832C92.0272 137.739 82.6511 146.333 82.6511 146.333L65.0712 161.569C65.0712 161.569 42.5857 180.688 36.7256 185.376C30.8656 190.064 16.5797 175.69 21.4895 171.703C21.9628 171.23 26.2429 167.755 29.7179 164.915C32.2165 162.84 34.2084 161.179 34.2084 161.179C34.9897 160.397 66.2433 133.051 66.2433 133.051L87.723 114.573C87.723 114.573 95.9339 106.094 105.701 106.094C108.826 106.094 112.83 106.485 126.015 118.205C129.531 121.33 131.485 122.542 135.782 126.409C137.345 127.816 139.852 130.316 140.861 130.316C141.882 130.316 143.986 128.363 145.549 127.023C145.549 127.023 195.897 84.4149 202.37 77.9421C207.839 72.4726 223.075 86.9273 218.387 91.2249Z" fill="url(#paint1_linear_405_116214)" data-v-5e5aec4d></path><path d="M33.238 67.1372C31.2846 68.6564 23.9305 75.1737 22.2992 76.9039C19.3366 80.0417 21.3638 81.3905 25.6611 84.9065C29.9585 88.4225 57.8962 112.712 64.8542 118.963L79.9642 105.221L41.288 71.2331C36.5999 67.1372 35.1913 65.6179 33.238 67.1372Z" fill="url(#paint2_linear_405_116214)" data-v-5e5aec4d></path></g><defs data-v-5e5aec4d><linearGradient id="paint0_linear_405_116214" x1="172.68" y1="133.808" x2="183.059" y2="196.169" gradientUnits="userSpaceOnUse" data-v-5e5aec4d><stop offset="0.114583" stop-color="#FF98A6" data-v-5e5aec4d></stop><stop offset="1" stop-color="#E36C7C" data-v-5e5aec4d></stop></linearGradient><linearGradient id="paint1_linear_405_116214" x1="219.271" y1="186.305" x2="206.115" y2="57.7298" gradientUnits="userSpaceOnUse" data-v-5e5aec4d><stop stop-color="#E36C7C" data-v-5e5aec4d></stop><stop offset="0.859375" stop-color="#FF98A6" data-v-5e5aec4d></stop></linearGradient><linearGradient id="paint2_linear_405_116214" x1="20.8984" y1="66.56" x2="30.8589" y2="127.049" gradientUnits="userSpaceOnUse" data-v-5e5aec4d><stop stop-color="#E36C7C" data-v-5e5aec4d></stop><stop offset="0.859375" stop-color="#FF98A6" data-v-5e5aec4d></stop></linearGradient><clipPath id="clip0_405_116214" data-v-5e5aec4d><rect width="256" height="256" fill="white" data-v-5e5aec4d></rect></clipPath></defs></svg><b data-v-5e5aec4d>Abstra Cloud</b>',2),_sfc_main$5=defineComponent({__name:"Watermark",props:{runtime:null,type:null},setup(a){const s=window.location.hostname.split(".")[0],i=!getCname();return(l,d)=>i?(openBlock(),createElementBlock("a",{key:0,href:`https://www.abstracloud.com/${a.type}?utm_source=abstra_pages&utm_medium=badge&utm_campaign=${a.runtime.id}&origin_subdomain=${unref(s)}`,target:"_blank",class:"watermark"},[createTextVNode(" Coded in Python with "),_hoisted_2$3],8,_hoisted_1$4)):createCommentVNode("",!0)}}),Watermark_vue_vue_type_style_index_0_scoped_5e5aec4d_lang="",Watermark=_export_sfc(_sfc_main$5,[["__scopeId","data-v-5e5aec4d"]]),_hoisted_1$3={key:0,class:"p-steps p-component"},_hoisted_2$2={class:"p-steps-list"},_hoisted_3$1={class:"p-menuitem-link"},_hoisted_4$1={class:"p-steps-number"},_sfc_main$4=defineComponent({__name:"Steps",props:{stepsInfo:{type:Object,default:null}},setup(a){const s=a,i=computed(()=>s.stepsInfo?Array(s.stepsInfo.total).fill(null).map(()=>({label:"",to:""})):[]);return(l,d)=>a.stepsInfo?(openBlock(),createElementBlock("nav",_hoisted_1$3,[createBaseVNode("ol",_hoisted_2$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(i),(m,u)=>(openBlock(),createElementBlock("li",{key:u,class:normalizeClass(["p-steps-item",{"p-highlight":u+1===a.stepsInfo.current}])},[createBaseVNode("span",_hoisted_3$1,[createBaseVNode("span",_hoisted_4$1,toDisplayString(u+1),1)])],2))),128))])])):createCommentVNode("",!0)}}),Steps_vue_vue_type_style_index_0_scoped_c6d9488a_lang="",Steps=_export_sfc(_sfc_main$4,[["__scopeId","data-v-c6d9488a"]]),_withScopeId=a=>(pushScopeId("data-v-54969e59"),a=a(),popScopeId(),a),_hoisted_1$2={class:"no-credits-message"},_hoisted_2$1={class:"image-container"},_hoisted_3={key:0,class:"no-credit-image",src:"https://abstra-cloud-assets.s3.amazonaws.com/no-credit.svg"},_hoisted_4=_withScopeId(()=>createBaseVNode("div",{class:"title"},"Insufficient credits to start this page",-1)),_hoisted_5=_withScopeId(()=>createBaseVNode("div",{class:"message"}," Please contact the creator for more information. ",-1)),_sfc_main$3=defineComponent({__name:"NoCreditsMessage",props:{runner:null},setup(a,{expose:s}){const i=ref(null),l={width:"380px",height:"unset",padding:"30px"},d={borderBottom:"none",color:"#D35249",fontSize:"20px",justifyContent:"flex-start",marginBottom:"17px"},m={color:"#414A58",fontSize:"14px"};return s({open:()=>{var c;(c=i.value)==null||c.open()}}),(c,_)=>(openBlock(),createBlock(Modal,{ref_key:"modalRef",ref:i,"container-style":l,"header-style":d,"content-style":m},{content:withCtx(()=>[createBaseVNode("div",_hoisted_1$2,[createBaseVNode("div",_hoisted_2$1,[a.runner.logoUrl?(openBlock(),createElementBlock("img",_hoisted_3)):createCommentVNode("",!0)]),_hoisted_4,_hoisted_5])]),_:1},512))}}),NoCreditsMessage_vue_vue_type_style_index_0_scoped_54969e59_lang="",NoCreditsMessage=_export_sfc(_sfc_main$3,[["__scopeId","data-v-54969e59"]]),_hoisted_1$1={class:"alert"},_sfc_main$2=defineComponent({__name:"Alerts",props:{alerts:null},setup(a){return(s,i)=>{const l=resolveComponent("Message");return openBlock(),createElementBlock("div",_hoisted_1$1,[createVNode(TransitionGroup,{name:"p-message",tag:"div"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.alerts,d=>(openBlock(),createBlock(l,{key:d.id,severity:d.severity,closable:!1,sticky:!1},{default:withCtx(()=>[createTextVNode(toDisplayString(d.message),1)]),_:2},1032,["severity"]))),128))]),_:1})])}}}),Alerts_vue_vue_type_style_index_0_scoped_737e6861_lang="",AlertsComponent=_export_sfc(_sfc_main$2,[["__scopeId","data-v-737e6861"]]),_sfc_main$1=defineComponent({__name:"RuntimeCommons",props:{runtime:{type:Object,required:!0},fullWidth:{type:Boolean},isPreview:Boolean,type:{type:String,required:!0},forceResponsivity:{type:String,default:null},userEmail:{type:String},stepsInfo:{type:Object,default:null},alerts:{type:Array,default:()=>[]}},emits:["navigate","logout"],setup(a,{expose:s,emit:i}){const l=ref(null),d=u=>i("navigate",u);return s({open:()=>{var u;return(u=l.value)==null?void 0:u.open()}}),(u,c)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("header",null,[createVNode(Navbar,{runtime:a.runtime,"user-email":a.userEmail,"force-responsivity":a.forceResponsivity,onLogout:c[0]||(c[0]=_=>i("logout")),onNavigate:d},null,8,["runtime","user-email","force-responsivity"])]),a.type==="forms"?(openBlock(),createBlock(Steps,{key:0,class:"steps","steps-info":a.stepsInfo},null,8,["steps-info"])):createCommentVNode("",!0),createVNode(NoCreditsMessage,{ref_key:"noCreditsMessageModalRef",ref:l,class:normalizeClass({"full-width":a.fullWidth}),runner:a.runtime},null,8,["class","runner"]),a.isPreview?createCommentVNode("",!0):(openBlock(),createBlock(Watermark,{key:1,class:normalizeClass(["watermark",{"viewport-attached":!a.isPreview}]),runtime:a.runtime,type:a.type},null,8,["class","runtime","type"])),a.alerts.length?(openBlock(),createBlock(AlertsComponent,{key:2,class:"alerts",alerts:a.alerts},null,8,["alerts"])):createCommentVNode("",!0)],64))}}),RuntimeCommons_vue_vue_type_style_index_0_scoped_89953a95_lang="",RuntimeCommons=_export_sfc(_sfc_main$1,[["__scopeId","data-v-89953a95"]]),uuid=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){const s=Math.random()*16|0;return(a=="x"?s:s&3|8).toString(16)});class LogService{constructor(){y(this,"logState",reactive({log:[]}));y(this,"_listeners",{})}get logs(){return this.logState.log}log(s,i){if(s.type!=="restart"&&s.log.trim()==="")return;const l=i?this.logs.find(d=>d.id===i):null;return l?Object.assign(l,s):this.logs.push({...s,id:i||uuid()}),this.notifyListeners(s),i}clear(){this.logState.log=[]}listen(s){const i=uuid();return this._listeners[i]=s,i}unlisten(s){delete this._listeners[s]}notifyListeners(s){Object.values(this._listeners).forEach(i=>i(s))}}const logService=new LogService,executeCode=($context,code)=>{let evaluatedCode;try{evaluatedCode=eval(code)}catch(a){throw console.error(`[Error: execute_js]: ${a.message}, context: ${$context}`),a}return isSerializable(evaluatedCode)?evaluatedCode:null};async function executeJs(a){return executeCode(a.context,a.code)}const isSerializable=a=>{try{return JSON.stringify(a),!0}catch{return!1}},COLOR_NAMES={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},DEFAULT_FORM_FONT_COLOR="#000",DEFAULT_DASH_FONT_COLOR="#272D35",LIGHT_COLOR="#ffffff",DARK_COLOR="#1b1b23";function darken(a,s){const{r:i,g:l,b:d,usePound:m}=getRGB(a);return toHex(applyGradient(i,-s),applyGradient(l,-s),applyGradient(d,-s),m)}function applyGradient(a,s){const i=a*(100+s*100)/100;return i>255?255:i<0?0:Math.round(i)}const lighten=(a,s)=>revert(darken(revert(a),s)),isColorDark=a=>{if(isHex(a))return isDark(a);const s=COLOR_NAMES[a.toLowerCase()];if(!s)return!1;const[i,l,d]=s;return isDark(toHex(i,l,d))},buttonFontColor=a=>isDark(a)?LIGHT_COLOR:DARK_COLOR,alternate=a=>isDark(a)?lighten(a,.1):darken(a,.1);function isDark(a){const{r:s,g:i,b:l}=getRGB(a);return s*.299+i*.587+l*.114<186}function getRGB(a){let s=!1;a[0]=="#"&&(a=a.slice(1),s=!0);const i=parseInt(a,16);return{r:i>>16&255,g:i>>8&255,b:i&255,usePound:s}}function revert(a){const{r:s,g:i,b:l,usePound:d}=getRGB(a);return toHex(255-s,255-i,255-l,d)}const toHex=(a,s,i,l=!0)=>(l?"#":"")+(i|s<<8|a<<16).toString(16).padStart(6,"0");function isHex(a){if(a.length>9)return!1;const s=a.startsWith("#")?a.slice(1):a;return/[0-9A-Fa-f]{6}/g.test(s)}function isURL(a){return/https?:\/\/[^\s]+/g.test(a)}const imageIsDarkCache={};function isImageDark(a){return a in imageIsDarkCache||(imageIsDarkCache[a]=new Promise(s=>{const i=document.createElement("img");i.src=a,i.crossOrigin="Anonymous",i.style.display="none",document.body.appendChild(i);let l=0;i.onload=()=>{const{width:d,height:m}=i,u=document.createElement("canvas");u.width=d,u.height=m;const c=u.getContext("2d");if(!c)return s(!1);c.drawImage(i,0,0);const _=c.getImageData(0,0,u.width,u.height),{data:p}=_;let h,v,k,C;for(let g=0,w=p.length;g<w;g+=4)h=p[g],v=p[g+1],k=p[g+2],C=Math.floor((h+v+k)/3),l+=C;const b=Math.floor(l/(d*m));document.body.removeChild(i),s(b<=127)}})),imageIsDarkCache[a]}const fontFamilyToGoogleFontsUrl=a=>`https://fonts.googleapis.com/css2?family=${a.split(" ").join("+")}:wght@300;400;500;700;900&display=swap`,isUrl=a=>{try{return new URL(a),!0}catch{return!1}},themeStyle=a=>isUrl(a)?{backgroundImage:`url(${a})`,backgroundSize:"cover"}:{backgroundColor:a},_hoisted_1=["theme"],_hoisted_2=["href"],_sfc_main=defineComponent({__name:"WidgetsFrame",props:{theme:null,mainColor:null,fontFamily:null,runtime:null},setup(a){const s=a,i=computed$1(()=>fontFamilyToGoogleFontsUrl(s.fontFamily)),l=computed$1(()=>{try{return typeof document<"u"&&document.documentElement.style.setProperty("--ac-global-font-family",s.fontFamily),{"--color-main":s.mainColor,"--color-main-light":lighten(s.mainColor,.15),"--color-main-hover":alternate(s.mainColor),"--color-main-active":alternate(s.mainColor),"--color-secondary":"transparent","--color-secondary-lighter":"transparent","--color-secondary-darker":"transparent","--button-font-color-main":buttonFontColor(s.mainColor),"--font-family":s.fontFamily,...themeStyle(s.theme)}}catch(c){return console.error(c),{}}}),d=computed$1(()=>s.runtime==="dash"?DEFAULT_DASH_FONT_COLOR:DEFAULT_FORM_FONT_COLOR),m=reactive({"--font-color":d.value,"--background-color":"transparent"}),u=async()=>{const c=isURL(s.theme)?await isImageDark(s.theme):isColorDark(s.theme);m["--font-color"]=c?LIGHT_COLOR:DARK_COLOR,m["--background-color"]=c?DARK_COLOR:LIGHT_COLOR};return onMounted(u),watch(()=>s.theme,u),(c,_)=>(openBlock(),createElementBlock("div",{class:"frame background-theme",theme:a.theme,style:normalizeStyle({...unref(l),...unref(m)})},[createBaseVNode("link",{href:unref(i),rel:"stylesheet"},null,8,_hoisted_2),renderSlot(c.$slots,"default",{},void 0,!0)],12,_hoisted_1))}}),WidgetsFrame_vue_vue_type_style_index_0_lang="",WidgetsFrame_vue_vue_type_style_index_1_scoped_538cca74_lang="",WidgetsFrame=_export_sfc(_sfc_main,[["__scopeId","data-v-538cca74"]]);export{Passwordless as P,RuntimeCommons as R,WidgetsFrame as W,executeJs as e,logService as l,passwordlessManager as p,uuid as u};
//# sourceMappingURL=WidgetsFrame.7e48c68b.js.map
