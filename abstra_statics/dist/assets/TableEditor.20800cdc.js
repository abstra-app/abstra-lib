import{_ as se}from"./AbstraButton.vue_vue_type_script_setup_true_lang.cedb2448.js";import{B as pa}from"./BaseLayout.c2afe612.js";import{H as Xe,u as fa,o as Fe}from"./omniChatStore.584c8f31.js";import{a as Ie}from"./asyncComputed.caa5e09e.js";import{d as Q,at as D,c as V,o as t,ac as s,ae as ce,h as z,ed as pe,e as u,ei as me,ec as Se,u as e,a as C,b as l,f as o,g as O,t as B,i as y,df as va,ej as ne,dj as W,aY as te,_ as ze,bY as ae,cE as Y,bQ as de,eq as ma,bT as ga,cD as Le,r as F,w as ye,ep as _e,S as He,c$ as he,j as Te,cI as ha,cY as Ue,aI as Ze,eB as ya,U as ea,al as ba,b0 as ge,cS as Re,d9 as Ee,eh as _a,cR as Ha,et as ka,d0 as $a,bG as Ke,ax as Va,M as wa}from"./jwt-decode.esm.936e78e8.js";import{G as Ca}from"./PhSparkle.vue.abd8fe1d.js";import{d as Be,p as ke,j as Aa}from"./router.507fb959.js";import{a as Za}from"./organization.29919696.js";import{a as qe}from"./project.c40c6aae.js";import{p as aa,T as oe,d as Ma,C as Pe}from"./tables.d717cdf2.js";import{F as Ia}from"./folder.281c3f1a.js";import{_ as Sa}from"./ConsoleOmniChat.vue_vue_type_script_setup_true_lang.5d56fe0d.js";import{C as Me}from"./ContentLayout.bb74de98.js";import{F as za}from"./PhArrowSquareOut.vue.997ae7f3.js";import{u as La}from"./useTables.5b47bdc5.js";import{C as Oe,S as We}from"./Card.a230b656.js";import{F as Ta}from"./PhGear.vue.9950a8a5.js";import{I as ta,F as Ba,a as qa,G as xa,b as Da}from"./PhWarningCircle.vue.3fe4ad73.js";import{A as xe}from"./index.83cd5357.js";import{A as la}from"./index.a0a9db55.js";import{F as ja}from"./PhArrowUp.vue.dcd364b5.js";import{a as Na}from"./ant-design.a93918ac.js";import{B as Fa,A as Ua}from"./Breadcrumb.ba77a523.js";import{A as Ra}from"./index.7870fcee.js";import"./record.e00b131c.js";import"./uuid.704dcd6e.js";import"./PhCopySimple.vue.44757ebb.js";import"./index.048264d3.js";import"./string.0652e8c7.js";import"./OmniChat.1c9412ae.js";import"./AbstraLogo.vue_vue_type_script_setup_true_lang.27e9d881.js";import"./Logo.fa436be4.js";import"./PhClockCounterClockwise.vue.9edacaf9.js";import"./LoadingOutlined.d37210c0.js";import"./file.0e869f02.js";import"./PhDatabase.vue.444ba9df.js";import"./index.f3b25de5.js";import"./index.29a06e27.js";(function(){try{var k=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new Error().stack;r&&(k._sentryDebugIds=k._sentryDebugIds||{},k._sentryDebugIds[r]="fd672649-6aac-4e89-b76b-33addc158fb4",k._sentryDebugIdIdentifier="sentry-dbid-fd672649-6aac-4e89-b76b-33addc158fb4")}catch{}})();const Ea=["width","height","fill","transform"],Ka={key:0},Pa=u("path",{d:"M80,28H56A20,20,0,0,0,36,48V208a20,20,0,0,0,20,20H80a20,20,0,0,0,20-20V48A20,20,0,0,0,80,28ZM76,204H60V52H76ZM156,28H132a20,20,0,0,0-20,20V208a20,20,0,0,0,20,20h24a20,20,0,0,0,20-20V48A20,20,0,0,0,156,28Zm-4,176H136V52h16Zm100-76a12,12,0,0,1-12,12h-8v8a12,12,0,0,1-24,0v-8h-8a12,12,0,0,1,0-24h8v-8a12,12,0,0,1,24,0v8h8A12,12,0,0,1,252,128Z"},null,-1),Oa=[Pa],Wa={key:1},Ga=u("path",{d:"M88,48V208a8,8,0,0,1-8,8H56a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8H80A8,8,0,0,1,88,48Zm64-8H128a8,8,0,0,0-8,8V208a8,8,0,0,0,8,8h24a8,8,0,0,0,8-8V48A8,8,0,0,0,152,40Z",opacity:"0.2"},null,-1),Qa=u("path",{d:"M80,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H80a16,16,0,0,0,16-16V48A16,16,0,0,0,80,32Zm0,176H56V48H80ZM152,32H128a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V48A16,16,0,0,0,152,32Zm0,176H128V48h24Zm96-80a8,8,0,0,1-8,8H224v16a8,8,0,0,1-16,0V136H192a8,8,0,0,1,0-16h16V104a8,8,0,0,1,16,0v16h16A8,8,0,0,1,248,128Z"},null,-1),Ja=[Ga,Qa],Ya={key:2},Xa=u("path",{d:"M96,48V208a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V48A16,16,0,0,1,56,32H80A16,16,0,0,1,96,48Zm56-16H128a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V48A16,16,0,0,0,152,32Zm88,88H224V104a8,8,0,0,0-16,0v16H192a8,8,0,0,0,0,16h16v16a8,8,0,0,0,16,0V136h16a8,8,0,0,0,0-16Z"},null,-1),e0=[Xa],a0={key:3},t0=u("path",{d:"M80,34H56A14,14,0,0,0,42,48V208a14,14,0,0,0,14,14H80a14,14,0,0,0,14-14V48A14,14,0,0,0,80,34Zm2,174a2,2,0,0,1-2,2H56a2,2,0,0,1-2-2V48a2,2,0,0,1,2-2H80a2,2,0,0,1,2,2ZM152,34H128a14,14,0,0,0-14,14V208a14,14,0,0,0,14,14h24a14,14,0,0,0,14-14V48A14,14,0,0,0,152,34Zm2,174a2,2,0,0,1-2,2H128a2,2,0,0,1-2-2V48a2,2,0,0,1,2-2h24a2,2,0,0,1,2,2Zm92-80a6,6,0,0,1-6,6H222v18a6,6,0,0,1-12,0V134H192a6,6,0,0,1,0-12h18V104a6,6,0,0,1,12,0v18h18A6,6,0,0,1,246,128Z"},null,-1),l0=[t0],n0={key:4},o0=u("path",{d:"M80,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H80a16,16,0,0,0,16-16V48A16,16,0,0,0,80,32Zm0,176H56V48H80ZM152,32H128a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V48A16,16,0,0,0,152,32Zm0,176H128V48h24Zm96-80a8,8,0,0,1-8,8H224v16a8,8,0,0,1-16,0V136H192a8,8,0,0,1,0-16h16V104a8,8,0,0,1,16,0v16h16A8,8,0,0,1,248,128Z"},null,-1),r0=[o0],u0={key:5},i0=u("path",{d:"M80,36H56A12,12,0,0,0,44,48V208a12,12,0,0,0,12,12H80a12,12,0,0,0,12-12V48A12,12,0,0,0,80,36Zm4,172a4,4,0,0,1-4,4H56a4,4,0,0,1-4-4V48a4,4,0,0,1,4-4H80a4,4,0,0,1,4,4ZM152,36H128a12,12,0,0,0-12,12V208a12,12,0,0,0,12,12h24a12,12,0,0,0,12-12V48A12,12,0,0,0,152,36Zm4,172a4,4,0,0,1-4,4H128a4,4,0,0,1-4-4V48a4,4,0,0,1,4-4h24a4,4,0,0,1,4,4Zm88-80a4,4,0,0,1-4,4H220v20a4,4,0,0,1-8,0V132H192a4,4,0,0,1,0-8h20V104a4,4,0,0,1,8,0v20h20A4,4,0,0,1,244,128Z"},null,-1),s0=[i0],d0={name:"PhColumnsPlusRight"},c0=Q({...d0,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(k){const r=k,a=D("weight","regular"),$=D("size","1em"),p=D("color","currentColor"),c=D("mirrored",!1),i=V(()=>{var n;return(n=r.weight)!=null?n:a}),A=V(()=>{var n;return(n=r.size)!=null?n:$}),v=V(()=>{var n;return(n=r.color)!=null?n:p}),b=V(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:c?"scale(-1, 1)":void 0);return(n,M)=>(t(),s("svg",pe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:A.value,height:A.value,fill:v.value,transform:b.value},n.$attrs),[ce(n.$slots,"default"),i.value==="bold"?(t(),s("g",Ka,Oa)):i.value==="duotone"?(t(),s("g",Wa,Ja)):i.value==="fill"?(t(),s("g",Ya,e0)):i.value==="light"?(t(),s("g",a0,l0)):i.value==="regular"?(t(),s("g",n0,r0)):i.value==="thin"?(t(),s("g",u0,s0)):z("",!0)],16,Ea))}}),p0=["width","height","fill","transform"],f0={key:0},v0=u("path",{d:"M148,96V48a12,12,0,0,1,24,0V84h36a12,12,0,0,1,0,24H160A12,12,0,0,1,148,96ZM96,148H48a12,12,0,0,0,0,24H84v36a12,12,0,0,0,24,0V160A12,12,0,0,0,96,148Zm112,0H160a12,12,0,0,0-12,12v48a12,12,0,0,0,24,0V172h36a12,12,0,0,0,0-24ZM96,36A12,12,0,0,0,84,48V84H48a12,12,0,0,0,0,24H96a12,12,0,0,0,12-12V48A12,12,0,0,0,96,36Z"},null,-1),m0=[v0],g0={key:1},h0=u("path",{d:"M208,64V192a16,16,0,0,1-16,16H64a16,16,0,0,1-16-16V64A16,16,0,0,1,64,48H192A16,16,0,0,1,208,64Z",opacity:"0.2"},null,-1),y0=u("path",{d:"M152,96V48a8,8,0,0,1,16,0V88h40a8,8,0,0,1,0,16H160A8,8,0,0,1,152,96ZM96,152H48a8,8,0,0,0,0,16H88v40a8,8,0,0,0,16,0V160A8,8,0,0,0,96,152Zm112,0H160a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V168h40a8,8,0,0,0,0-16ZM96,40a8,8,0,0,0-8,8V88H48a8,8,0,0,0,0,16H96a8,8,0,0,0,8-8V48A8,8,0,0,0,96,40Z"},null,-1),b0=[h0,y0],_0={key:2},H0=u("path",{d:"M152,96V48a8,8,0,0,1,13.66-5.66l48,48A8,8,0,0,1,208,104H160A8,8,0,0,1,152,96ZM96,152H48a8,8,0,0,0-5.66,13.66l48,48A8,8,0,0,0,104,208V160A8,8,0,0,0,96,152ZM99.06,40.61a8,8,0,0,0-8.72,1.73l-48,48A8,8,0,0,0,48,104H96a8,8,0,0,0,8-8V48A8,8,0,0,0,99.06,40.61ZM208,152H160a8,8,0,0,0-8,8v48a8,8,0,0,0,13.66,5.66l48-48A8,8,0,0,0,208,152Z"},null,-1),k0=[H0],$0={key:3},V0=u("path",{d:"M154,96V48a6,6,0,0,1,12,0V90h42a6,6,0,0,1,0,12H160A6,6,0,0,1,154,96ZM96,154H48a6,6,0,0,0,0,12H90v42a6,6,0,0,0,12,0V160A6,6,0,0,0,96,154Zm112,0H160a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V166h42a6,6,0,0,0,0-12ZM96,42a6,6,0,0,0-6,6V90H48a6,6,0,0,0,0,12H96a6,6,0,0,0,6-6V48A6,6,0,0,0,96,42Z"},null,-1),w0=[V0],C0={key:4},A0=u("path",{d:"M152,96V48a8,8,0,0,1,16,0V88h40a8,8,0,0,1,0,16H160A8,8,0,0,1,152,96ZM96,152H48a8,8,0,0,0,0,16H88v40a8,8,0,0,0,16,0V160A8,8,0,0,0,96,152Zm112,0H160a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V168h40a8,8,0,0,0,0-16ZM96,40a8,8,0,0,0-8,8V88H48a8,8,0,0,0,0,16H96a8,8,0,0,0,8-8V48A8,8,0,0,0,96,40Z"},null,-1),Z0=[A0],M0={key:5},I0=u("path",{d:"M156,96V48a4,4,0,0,1,8,0V92h44a4,4,0,0,1,0,8H160A4,4,0,0,1,156,96ZM96,156H48a4,4,0,0,0,0,8H92v44a4,4,0,0,0,8,0V160A4,4,0,0,0,96,156Zm112,0H160a4,4,0,0,0-4,4v48a4,4,0,0,0,8,0V164h44a4,4,0,0,0,0-8ZM96,44a4,4,0,0,0-4,4V92H48a4,4,0,0,0,0,8H96a4,4,0,0,0,4-4V48A4,4,0,0,0,96,44Z"},null,-1),S0=[I0],z0={name:"PhCornersIn"},L0=Q({...z0,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(k){const r=k,a=D("weight","regular"),$=D("size","1em"),p=D("color","currentColor"),c=D("mirrored",!1),i=V(()=>{var n;return(n=r.weight)!=null?n:a}),A=V(()=>{var n;return(n=r.size)!=null?n:$}),v=V(()=>{var n;return(n=r.color)!=null?n:p}),b=V(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:c?"scale(-1, 1)":void 0);return(n,M)=>(t(),s("svg",pe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:A.value,height:A.value,fill:v.value,transform:b.value},n.$attrs),[ce(n.$slots,"default"),i.value==="bold"?(t(),s("g",f0,m0)):i.value==="duotone"?(t(),s("g",g0,b0)):i.value==="fill"?(t(),s("g",_0,k0)):i.value==="light"?(t(),s("g",$0,w0)):i.value==="regular"?(t(),s("g",C0,Z0)):i.value==="thin"?(t(),s("g",M0,S0)):z("",!0)],16,p0))}}),T0=["width","height","fill","transform"],B0={key:0},q0=u("path",{d:"M220,48V88a12,12,0,0,1-24,0V60H168a12,12,0,0,1,0-24h40A12,12,0,0,1,220,48ZM88,196H60V168a12,12,0,0,0-24,0v40a12,12,0,0,0,12,12H88a12,12,0,0,0,0-24Zm120-40a12,12,0,0,0-12,12v28H168a12,12,0,0,0,0,24h40a12,12,0,0,0,12-12V168A12,12,0,0,0,208,156ZM88,36H48A12,12,0,0,0,36,48V88a12,12,0,0,0,24,0V60H88a12,12,0,0,0,0-24Z"},null,-1),x0=[q0],D0={key:1},j0=u("path",{d:"M208,48V208H48V48Z",opacity:"0.2"},null,-1),N0=u("path",{d:"M216,48V88a8,8,0,0,1-16,0V56H168a8,8,0,0,1,0-16h40A8,8,0,0,1,216,48ZM88,200H56V168a8,8,0,0,0-16,0v40a8,8,0,0,0,8,8H88a8,8,0,0,0,0-16Zm120-40a8,8,0,0,0-8,8v32H168a8,8,0,0,0,0,16h40a8,8,0,0,0,8-8V168A8,8,0,0,0,208,160ZM88,40H48a8,8,0,0,0-8,8V88a8,8,0,0,0,16,0V56H88a8,8,0,0,0,0-16Z"},null,-1),F0=[j0,N0],U0={key:2},R0=u("path",{d:"M93.66,202.34A8,8,0,0,1,88,216H48a8,8,0,0,1-8-8V168a8,8,0,0,1,13.66-5.66ZM88,40H48a8,8,0,0,0-8,8V88a8,8,0,0,0,13.66,5.66l40-40A8,8,0,0,0,88,40ZM211.06,160.61a8,8,0,0,0-8.72,1.73l-40,40A8,8,0,0,0,168,216h40a8,8,0,0,0,8-8V168A8,8,0,0,0,211.06,160.61ZM208,40H168a8,8,0,0,0-5.66,13.66l40,40A8,8,0,0,0,216,88V48A8,8,0,0,0,208,40Z"},null,-1),E0=[R0],K0={key:3},P0=u("path",{d:"M214,48V88a6,6,0,0,1-12,0V54H168a6,6,0,0,1,0-12h40A6,6,0,0,1,214,48ZM88,202H54V168a6,6,0,0,0-12,0v40a6,6,0,0,0,6,6H88a6,6,0,0,0,0-12Zm120-40a6,6,0,0,0-6,6v34H168a6,6,0,0,0,0,12h40a6,6,0,0,0,6-6V168A6,6,0,0,0,208,162ZM88,42H48a6,6,0,0,0-6,6V88a6,6,0,0,0,12,0V54H88a6,6,0,0,0,0-12Z"},null,-1),O0=[P0],W0={key:4},G0=u("path",{d:"M216,48V88a8,8,0,0,1-16,0V56H168a8,8,0,0,1,0-16h40A8,8,0,0,1,216,48ZM88,200H56V168a8,8,0,0,0-16,0v40a8,8,0,0,0,8,8H88a8,8,0,0,0,0-16Zm120-40a8,8,0,0,0-8,8v32H168a8,8,0,0,0,0,16h40a8,8,0,0,0,8-8V168A8,8,0,0,0,208,160ZM88,40H48a8,8,0,0,0-8,8V88a8,8,0,0,0,16,0V56H88a8,8,0,0,0,0-16Z"},null,-1),Q0=[G0],J0={key:5},Y0=u("path",{d:"M212,48V88a4,4,0,0,1-8,0V52H168a4,4,0,0,1,0-8h40A4,4,0,0,1,212,48ZM88,204H52V168a4,4,0,0,0-8,0v40a4,4,0,0,0,4,4H88a4,4,0,0,0,0-8Zm120-40a4,4,0,0,0-4,4v36H168a4,4,0,0,0,0,8h40a4,4,0,0,0,4-4V168A4,4,0,0,0,208,164ZM88,44H48a4,4,0,0,0-4,4V88a4,4,0,0,0,8,0V52H88a4,4,0,0,0,0-8Z"},null,-1),X0=[Y0],et={name:"PhCornersOut"},at=Q({...et,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(k){const r=k,a=D("weight","regular"),$=D("size","1em"),p=D("color","currentColor"),c=D("mirrored",!1),i=V(()=>{var n;return(n=r.weight)!=null?n:a}),A=V(()=>{var n;return(n=r.size)!=null?n:$}),v=V(()=>{var n;return(n=r.color)!=null?n:p}),b=V(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:c?"scale(-1, 1)":void 0);return(n,M)=>(t(),s("svg",pe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:A.value,height:A.value,fill:v.value,transform:b.value},n.$attrs),[ce(n.$slots,"default"),i.value==="bold"?(t(),s("g",B0,x0)):i.value==="duotone"?(t(),s("g",D0,F0)):i.value==="fill"?(t(),s("g",U0,E0)):i.value==="light"?(t(),s("g",K0,O0)):i.value==="regular"?(t(),s("g",W0,Q0)):i.value==="thin"?(t(),s("g",J0,X0)):z("",!0)],16,T0))}}),tt=["width","height","fill","transform"],lt={key:0},nt=u("path",{d:"M228,160a12,12,0,0,1-12,12H40a12,12,0,0,1,0-24H216A12,12,0,0,1,228,160ZM40,108H216a12,12,0,0,0,0-24H40a12,12,0,0,0,0,24Z"},null,-1),ot=[nt],rt={key:1},ut=u("path",{d:"M216,56V200a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V56A16,16,0,0,1,56,40H200A16,16,0,0,1,216,56Z",opacity:"0.2"},null,-1),it=u("path",{d:"M224,160a8,8,0,0,1-8,8H40a8,8,0,0,1,0-16H216A8,8,0,0,1,224,160ZM40,104H216a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16Z"},null,-1),st=[ut,it],dt={key:2},ct=u("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM184,160H72a8,8,0,0,1,0-16H184a8,8,0,0,1,0,16Zm0-48H72a8,8,0,0,1,0-16H184a8,8,0,0,1,0,16Z"},null,-1),pt=[ct],ft={key:3},vt=u("path",{d:"M222,160a6,6,0,0,1-6,6H40a6,6,0,0,1,0-12H216A6,6,0,0,1,222,160ZM40,102H216a6,6,0,0,0,0-12H40a6,6,0,0,0,0,12Z"},null,-1),mt=[vt],gt={key:4},ht=u("path",{d:"M224,160a8,8,0,0,1-8,8H40a8,8,0,0,1,0-16H216A8,8,0,0,1,224,160ZM40,104H216a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16Z"},null,-1),yt=[ht],bt={key:5},_t=u("path",{d:"M220,160a4,4,0,0,1-4,4H40a4,4,0,0,1,0-8H216A4,4,0,0,1,220,160ZM40,100H216a4,4,0,0,0,0-8H40a4,4,0,0,0,0,8Z"},null,-1),Ht=[_t],kt={name:"PhEquals"},$t=Q({...kt,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(k){const r=k,a=D("weight","regular"),$=D("size","1em"),p=D("color","currentColor"),c=D("mirrored",!1),i=V(()=>{var n;return(n=r.weight)!=null?n:a}),A=V(()=>{var n;return(n=r.size)!=null?n:$}),v=V(()=>{var n;return(n=r.color)!=null?n:p}),b=V(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:c?"scale(-1, 1)":void 0);return(n,M)=>(t(),s("svg",pe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:A.value,height:A.value,fill:v.value,transform:b.value},n.$attrs),[ce(n.$slots,"default"),i.value==="bold"?(t(),s("g",lt,ot)):i.value==="duotone"?(t(),s("g",rt,st)):i.value==="fill"?(t(),s("g",dt,pt)):i.value==="light"?(t(),s("g",ft,mt)):i.value==="regular"?(t(),s("g",gt,yt)):i.value==="thin"?(t(),s("g",bt,Ht)):z("",!0)],16,tt))}}),Vt=["width","height","fill","transform"],wt={key:0},Ct=u("path",{d:"M87.5,151.52l64-64a12,12,0,0,1,17,17l-64,64a12,12,0,0,1-17-17Zm131-114a60.08,60.08,0,0,0-84.87,0L103.51,67.61a12,12,0,0,0,17,17l30.07-30.06a36,36,0,0,1,50.93,50.92L171.4,135.52a12,12,0,1,0,17,17l30.08-30.06A60.09,60.09,0,0,0,218.45,37.55ZM135.52,171.4l-30.07,30.08a36,36,0,0,1-50.92-50.93l30.06-30.07a12,12,0,0,0-17-17L37.55,133.58a60,60,0,0,0,84.88,84.87l30.06-30.07a12,12,0,0,0-17-17Z"},null,-1),At=[Ct],Zt={key:1},Mt=u("path",{d:"M209.94,113.94l-96,96a48,48,0,0,1-67.88-67.88l96-96a48,48,0,0,1,67.88,67.88Z",opacity:"0.2"},null,-1),It=u("path",{d:"M165.66,90.34a8,8,0,0,1,0,11.32l-64,64a8,8,0,0,1-11.32-11.32l64-64A8,8,0,0,1,165.66,90.34ZM215.6,40.4a56,56,0,0,0-79.2,0L106.34,70.45a8,8,0,0,0,11.32,11.32l30.06-30a40,40,0,0,1,56.57,56.56l-30.07,30.06a8,8,0,0,0,11.31,11.32L215.6,119.6a56,56,0,0,0,0-79.2ZM138.34,174.22l-30.06,30.06a40,40,0,1,1-56.56-56.57l30.05-30.05a8,8,0,0,0-11.32-11.32L40.4,136.4a56,56,0,0,0,79.2,79.2l30.06-30.07a8,8,0,0,0-11.32-11.31Z"},null,-1),St=[Mt,It],zt={key:2},Lt=u("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM144.56,173.66l-21.45,21.45a44,44,0,0,1-62.22-62.22l21.45-21.46a8,8,0,0,1,11.32,11.31L72.2,144.2a28,28,0,0,0,39.6,39.6l21.45-21.46a8,8,0,0,1,11.31,11.32Zm-34.9-16a8,8,0,0,1-11.32-11.32l48-48a8,8,0,0,1,11.32,11.32Zm85.45-34.55-21.45,21.45a8,8,0,0,1-11.32-11.31L183.8,111.8a28,28,0,0,0-39.6-39.6L122.74,93.66a8,8,0,0,1-11.31-11.32l21.46-21.45a44,44,0,0,1,62.22,62.22Z"},null,-1),Tt=[Lt],Bt={key:3},qt=u("path",{d:"M164.25,91.75a6,6,0,0,1,0,8.49l-64,64a6,6,0,0,1-8.49-8.48l64-64A6,6,0,0,1,164.25,91.75ZM214.2,41.8a54.07,54.07,0,0,0-76.38,0L107.75,71.85a6,6,0,0,0,8.49,8.49l30.07-30.06a42,42,0,0,1,59.41,59.41l-30.08,30.07a6,6,0,1,0,8.49,8.49l30.07-30.07A54,54,0,0,0,214.2,41.8ZM139.76,175.64l-30.07,30.08a42,42,0,0,1-59.41-59.41l30.06-30.07a6,6,0,0,0-8.49-8.49l-30,30.07a54,54,0,0,0,76.38,76.39l30.07-30.08a6,6,0,0,0-8.49-8.49Z"},null,-1),xt=[qt],Dt={key:4},jt=u("path",{d:"M165.66,90.34a8,8,0,0,1,0,11.32l-64,64a8,8,0,0,1-11.32-11.32l64-64A8,8,0,0,1,165.66,90.34ZM215.6,40.4a56,56,0,0,0-79.2,0L106.34,70.45a8,8,0,0,0,11.32,11.32l30.06-30a40,40,0,0,1,56.57,56.56l-30.07,30.06a8,8,0,0,0,11.31,11.32L215.6,119.6a56,56,0,0,0,0-79.2ZM138.34,174.22l-30.06,30.06a40,40,0,1,1-56.56-56.57l30.05-30.05a8,8,0,0,0-11.32-11.32L40.4,136.4a56,56,0,0,0,79.2,79.2l30.06-30.07a8,8,0,0,0-11.32-11.31Z"},null,-1),Nt=[jt],Ft={key:5},Ut=u("path",{d:"M162.84,93.16a4,4,0,0,1,0,5.66l-64,64a4,4,0,0,1-5.66-5.66l64-64A4,4,0,0,1,162.84,93.16Zm49.95-49.95a52.07,52.07,0,0,0-73.56,0L109.17,73.27a4,4,0,0,0,5.65,5.66l30.07-30.06a44,44,0,0,1,62.24,62.24l-30.07,30.06a4,4,0,0,0,5.66,5.66l30.07-30.06A52.07,52.07,0,0,0,212.79,43.21ZM141.17,177.06l-30.06,30.07a44,44,0,0,1-62.24-62.24l30.06-30.06a4,4,0,0,0-5.66-5.66L43.21,139.23a52,52,0,0,0,73.56,73.56l30.06-30.07a4,4,0,1,0-5.66-5.66Z"},null,-1),Rt=[Ut],Et={name:"PhLinkSimple"},Ge=Q({...Et,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(k){const r=k,a=D("weight","regular"),$=D("size","1em"),p=D("color","currentColor"),c=D("mirrored",!1),i=V(()=>{var n;return(n=r.weight)!=null?n:a}),A=V(()=>{var n;return(n=r.size)!=null?n:$}),v=V(()=>{var n;return(n=r.color)!=null?n:p}),b=V(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:c?"scale(-1, 1)":void 0);return(n,M)=>(t(),s("svg",pe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:A.value,height:A.value,fill:v.value,transform:b.value},n.$attrs),[ce(n.$slots,"default"),i.value==="bold"?(t(),s("g",wt,At)):i.value==="duotone"?(t(),s("g",Zt,St)):i.value==="fill"?(t(),s("g",zt,Tt)):i.value==="light"?(t(),s("g",Bt,xt)):i.value==="regular"?(t(),s("g",Dt,Nt)):i.value==="thin"?(t(),s("g",Ft,Rt)):z("",!0)],16,Vt))}}),Kt=["width","height","fill","transform"],Pt={key:0},Ot=u("path",{d:"M232.49,55.51l-32-32a12,12,0,0,0-17,0l-96,96A12,12,0,0,0,84,128v32a12,12,0,0,0,12,12h32a12,12,0,0,0,8.49-3.51l96-96A12,12,0,0,0,232.49,55.51ZM192,49l15,15L196,75,181,60Zm-69,99H108V133l56-56,15,15Zm105-7.43V208a20,20,0,0,1-20,20H48a20,20,0,0,1-20-20V48A20,20,0,0,1,48,28h67.43a12,12,0,0,1,0,24H52V204H204V140.57a12,12,0,0,1,24,0Z"},null,-1),Wt=[Ot],Gt={key:1},Qt=u("path",{d:"M200,88l-72,72H96V128l72-72Z",opacity:"0.2"},null,-1),Jt=u("path",{d:"M229.66,58.34l-32-32a8,8,0,0,0-11.32,0l-96,96A8,8,0,0,0,88,128v32a8,8,0,0,0,8,8h32a8,8,0,0,0,5.66-2.34l96-96A8,8,0,0,0,229.66,58.34ZM124.69,152H104V131.31l64-64L188.69,88ZM200,76.69,179.31,56,192,43.31,212.69,64ZM224,128v80a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32h80a8,8,0,0,1,0,16H48V208H208V128a8,8,0,0,1,16,0Z"},null,-1),Yt=[Qt,Jt],Xt={key:2},el=u("path",{d:"M224,128v80a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32h80a8,8,0,0,1,0,16H48V208H208V128a8,8,0,0,1,16,0Zm5.66-58.34-96,96A8,8,0,0,1,128,168H96a8,8,0,0,1-8-8V128a8,8,0,0,1,2.34-5.66l96-96a8,8,0,0,1,11.32,0l32,32A8,8,0,0,1,229.66,69.66Zm-17-5.66L192,43.31,179.31,56,200,76.69Z"},null,-1),al=[el],tl={key:3},ll=u("path",{d:"M228.24,59.76l-32-32a6,6,0,0,0-8.48,0l-96,96A6,6,0,0,0,90,128v32a6,6,0,0,0,6,6h32a6,6,0,0,0,4.24-1.76l96-96A6,6,0,0,0,228.24,59.76ZM125.51,154H102V130.49l66-66L191.51,88ZM200,79.51,176.49,56,192,40.49,215.51,64ZM222,128v80a14,14,0,0,1-14,14H48a14,14,0,0,1-14-14V48A14,14,0,0,1,48,34h80a6,6,0,0,1,0,12H48a2,2,0,0,0-2,2V208a2,2,0,0,0,2,2H208a2,2,0,0,0,2-2V128a6,6,0,0,1,12,0Z"},null,-1),nl=[ll],ol={key:4},rl=u("path",{d:"M229.66,58.34l-32-32a8,8,0,0,0-11.32,0l-96,96A8,8,0,0,0,88,128v32a8,8,0,0,0,8,8h32a8,8,0,0,0,5.66-2.34l96-96A8,8,0,0,0,229.66,58.34ZM124.69,152H104V131.31l64-64L188.69,88ZM200,76.69,179.31,56,192,43.31,212.69,64ZM224,128v80a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32h80a8,8,0,0,1,0,16H48V208H208V128a8,8,0,0,1,16,0Z"},null,-1),ul=[rl],il={key:5},sl=u("path",{d:"M226.83,61.17l-32-32a4,4,0,0,0-5.66,0l-96,96A4,4,0,0,0,92,128v32a4,4,0,0,0,4,4h32a4,4,0,0,0,2.83-1.17l96-96A4,4,0,0,0,226.83,61.17ZM126.34,156H100V129.66l68-68L194.34,88ZM200,82.34,173.66,56,192,37.66,218.34,64ZM220,128v80a12,12,0,0,1-12,12H48a12,12,0,0,1-12-12V48A12,12,0,0,1,48,36h80a4,4,0,0,1,0,8H48a4,4,0,0,0-4,4V208a4,4,0,0,0,4,4H208a4,4,0,0,0,4-4V128a4,4,0,0,1,8,0Z"},null,-1),dl=[sl],cl={name:"PhNotePencil"},pl=Q({...cl,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(k){const r=k,a=D("weight","regular"),$=D("size","1em"),p=D("color","currentColor"),c=D("mirrored",!1),i=V(()=>{var n;return(n=r.weight)!=null?n:a}),A=V(()=>{var n;return(n=r.size)!=null?n:$}),v=V(()=>{var n;return(n=r.color)!=null?n:p}),b=V(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:c?"scale(-1, 1)":void 0);return(n,M)=>(t(),s("svg",pe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:A.value,height:A.value,fill:v.value,transform:b.value},n.$attrs),[ce(n.$slots,"default"),i.value==="bold"?(t(),s("g",Pt,Wt)):i.value==="duotone"?(t(),s("g",Gt,Yt)):i.value==="fill"?(t(),s("g",Xt,al)):i.value==="light"?(t(),s("g",tl,nl)):i.value==="regular"?(t(),s("g",ol,ul)):i.value==="thin"?(t(),s("g",il,dl)):z("",!0)],16,Kt))}}),fl=["width","height","fill","transform"],vl={key:0},ml=u("path",{d:"M208,112H48a20,20,0,0,0-20,20v24a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V132A20,20,0,0,0,208,112Zm-4,40H52V136H204Zm4-116H48A20,20,0,0,0,28,56V80a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V56A20,20,0,0,0,208,36Zm-4,40H52V60H204ZM160,220a12,12,0,0,1-12,12h-8v8a12,12,0,0,1-24,0v-8h-8a12,12,0,0,1,0-24h8v-8a12,12,0,0,1,24,0v8h8A12,12,0,0,1,160,220Z"},null,-1),gl=[ml],hl={key:1},yl=u("path",{d:"M216,128v24a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V128a8,8,0,0,1,8-8H208A8,8,0,0,1,216,128Zm-8-80H48a8,8,0,0,0-8,8V80a8,8,0,0,0,8,8H208a8,8,0,0,0,8-8V56A8,8,0,0,0,208,48Z",opacity:"0.2"},null,-1),bl=u("path",{d:"M208,112H48a16,16,0,0,0-16,16v24a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V128A16,16,0,0,0,208,112Zm0,40H48V128H208v24Zm0-112H48A16,16,0,0,0,32,56V80A16,16,0,0,0,48,96H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40Zm0,40H48V56H208V80ZM160,216a8,8,0,0,1-8,8H136v16a8,8,0,0,1-16,0V224H104a8,8,0,0,1,0-16h16V192a8,8,0,0,1,16,0v16h16A8,8,0,0,1,160,216Z"},null,-1),_l=[yl,bl],Hl={key:2},kl=u("path",{d:"M224,128v24a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V128a16,16,0,0,1,16-16H208A16,16,0,0,1,224,128ZM208,40H48A16,16,0,0,0,32,56V80A16,16,0,0,0,48,96H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40ZM152,208H136V192a8,8,0,0,0-16,0v16H104a8,8,0,0,0,0,16h16v16a8,8,0,0,0,16,0V224h16a8,8,0,0,0,0-16Z"},null,-1),$l=[kl],Vl={key:3},wl=u("path",{d:"M208,114H48a14,14,0,0,0-14,14v24a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V128A14,14,0,0,0,208,114Zm2,38a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V128a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2ZM208,42H48A14,14,0,0,0,34,56V80A14,14,0,0,0,48,94H208a14,14,0,0,0,14-14V56A14,14,0,0,0,208,42Zm2,38a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V56a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2ZM158,216a6,6,0,0,1-6,6H134v18a6,6,0,0,1-12,0V222H104a6,6,0,0,1,0-12h18V192a6,6,0,0,1,12,0v18h18A6,6,0,0,1,158,216Z"},null,-1),Cl=[wl],Al={key:4},Zl=u("path",{d:"M208,112H48a16,16,0,0,0-16,16v24a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V128A16,16,0,0,0,208,112Zm0,40H48V128H208v24Zm0-112H48A16,16,0,0,0,32,56V80A16,16,0,0,0,48,96H208a16,16,0,0,0,16-16V56A16,16,0,0,0,208,40Zm0,40H48V56H208V80ZM160,216a8,8,0,0,1-8,8H136v16a8,8,0,0,1-16,0V224H104a8,8,0,0,1,0-16h16V192a8,8,0,0,1,16,0v16h16A8,8,0,0,1,160,216Z"},null,-1),Ml=[Zl],Il={key:5},Sl=u("path",{d:"M208,116H48a12,12,0,0,0-12,12v24a12,12,0,0,0,12,12H208a12,12,0,0,0,12-12V128A12,12,0,0,0,208,116Zm4,36a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V128a4,4,0,0,1,4-4H208a4,4,0,0,1,4,4ZM208,44H48A12,12,0,0,0,36,56V80A12,12,0,0,0,48,92H208a12,12,0,0,0,12-12V56A12,12,0,0,0,208,44Zm4,36a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V56a4,4,0,0,1,4-4H208a4,4,0,0,1,4,4ZM156,216a4,4,0,0,1-4,4H132v20a4,4,0,0,1-8,0V220H104a4,4,0,0,1,0-8h20V192a4,4,0,0,1,8,0v20h20A4,4,0,0,1,156,216Z"},null,-1),zl=[Sl],Ll={name:"PhRowsPlusBottom"},Qe=Q({...Ll,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(k){const r=k,a=D("weight","regular"),$=D("size","1em"),p=D("color","currentColor"),c=D("mirrored",!1),i=V(()=>{var n;return(n=r.weight)!=null?n:a}),A=V(()=>{var n;return(n=r.size)!=null?n:$}),v=V(()=>{var n;return(n=r.color)!=null?n:p}),b=V(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:c?"scale(-1, 1)":void 0);return(n,M)=>(t(),s("svg",pe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:A.value,height:A.value,fill:v.value,transform:b.value},n.$attrs),[ce(n.$slots,"default"),i.value==="bold"?(t(),s("g",vl,gl)):i.value==="duotone"?(t(),s("g",hl,_l)):i.value==="fill"?(t(),s("g",Hl,$l)):i.value==="light"?(t(),s("g",Vl,Cl)):i.value==="regular"?(t(),s("g",Al,Ml)):i.value==="thin"?(t(),s("g",Il,zl)):z("",!0)],16,fl))}}),Tl={class:"related-tables"},Bl={class:"related-section"},ql={class:"relation-info"},xl={class:"related-tables"},Dl={class:"related-section"},jl={class:"relation-info"},Nl=Q({__name:"RelatedTables",props:{table:{}},setup(k){const r=k,a=me(),$=Se(),p=a.params.projectId,{tables:c,loading:i}=La(p),A=V(()=>{const M=r.table.getColumns().find(_=>_.primaryKey);return(M==null?void 0:M.name)||"id"}),v=V(()=>{if(!c.value.length)return{referencingTables:[],referencedTables:[]};const M=c.value.filter(g=>g.id!==r.table.id),_=[];for(const g of M){const j=g.getColumns().filter(x=>x.foreignKey);for(const x of j){if(!x.foreignKey)continue;let U;for(const J of c.value)if(U=J.getColumns().find(S=>{var Z;return S.id===((Z=x.foreignKey)==null?void 0:Z.columnId)}),U)break;(U==null?void 0:U.tableId)===r.table.id&&_.push({table:g,column:x})}}const I=[],L=r.table.getColumns().filter(g=>g.foreignKey);for(const g of L){if(!g.foreignKey)continue;let j,x;for(const U of c.value)if(x=U.getColumns().find(J=>{var S;return J.id===((S=g.foreignKey)==null?void 0:S.columnId)}),x){j=U;break}j&&x&&I.push({table:j,sourceColumn:g,targetColumn:x})}return{referencingTables:_,referencedTables:I}}),b=V(()=>{const M=new Map;for(const _ of v.value.referencingTables)M.has(_.table.id)||M.set(_.table.id,{tableId:_.table.id,tableName:_.table.name,description:`${_.column.name} \u2192 ${A.value}`});for(const _ of v.value.referencedTables)M.has(_.table.id)||M.set(_.table.id,{tableId:_.table.id,tableName:_.table.name,description:`${_.sourceColumn.name} \u2192 ${_.targetColumn.name}`});return Array.from(M.values())}),n=M=>{$.push({name:"tableEditor",params:{projectId:p,tableId:M}})};return(M,_)=>e(i)?(t(),C(Me,{key:0,"full-width":""},{default:l(()=>[u("div",Tl,[u("div",Bl,[o(e(va),null,{default:l(()=>[O(B(e(y).translate("i18n_relatedtables_related_tables")),1)]),_:1}),o(e(W),{gap:"middle",wrap:"wrap"},{default:l(()=>[(t(),s(te,null,ne(3,I=>o(e(Oe),{key:I,class:"related-table-card loading-card"},{title:l(()=>[o(e(W),{justify:"space-between",align:"center"},{default:l(()=>[o(e(We),{active:!0,paragraph:!1,title:{width:"120px"}}),o(e(za),{size:16,style:{opacity:"0.3"}})]),_:1})]),default:l(()=>[u("p",ql,[o(e(Ge),{size:16,style:{opacity:"0.3"}}),o(e(We),{active:!0,paragraph:!1,title:{width:"150px"}})])]),_:2},1024)),64))]),_:1})])])]),_:1})):b.value.length>0?(t(),C(Me,{key:1,"full-width":""},{default:l(()=>[u("div",xl,[u("div",Dl,[u("h3",null,B(e(y).translate("i18n_relatedtables_related_tables_count",null,b.value.length)),1),o(e(W),{gap:"middle",wrap:"wrap"},{default:l(()=>[(t(!0),s(te,null,ne(b.value,I=>(t(),C(e(Oe),{key:I.tableId,title:I.tableName,class:"related-table-card",hoverable:"",onClick:L=>n(I.tableId)},{default:l(()=>[u("p",jl,[o(e(Ge),{size:16}),u("span",null,B(I.description),1)])]),_:2},1032,["title","onClick"]))),128))]),_:1})])])]),_:1})):z("",!0)}});const Fl=ze(Nl,[["__scopeId","data-v-55a3ad92"]]),Ul=Q({__name:"AddData",props:{open:{type:Boolean},editableItem:{},table:{},loading:{type:Boolean}},emits:["save","close","update-nullable","record-change"],setup(k,{emit:r}){return(a,$)=>(t(),C(e(Be),{title:e(y).translate("i18n_adddata_title"),width:720,open:a.open,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:$[2]||($[2]=p=>r("close"))},{extra:l(()=>[o(e(xe),null,{default:l(()=>[o(e(ae),{onClick:$[0]||($[0]=p=>r("close"))},{default:l(()=>[O(B(e(y).translate("i18n_adddata_cancel")),1)]),_:1}),o(e(ae),{type:"primary",loading:a.loading,onClick:$[1]||($[1]=p=>r("save"))},{default:l(()=>[O(B(e(y).translate("i18n_adddata_save")),1)]),_:1},8,["loading"])]),_:1})]),default:l(()=>[o(e(Le),{model:a.editableItem,layout:"vertical"},{default:l(()=>[(t(!0),s(te,null,ne(a.table.getUnprotectedColumns(),p=>(t(),C(e(Y),{key:p.id,label:p.name,required:!p.nullable},{default:l(()=>[a.editableItem?(t(),C(e(de),{key:0,placeholder:p.type,value:a.editableItem[p.name],disabled:a.editableItem[p.name]===null,"onUpdate:value":c=>r("record-change",p.name,c)},ma({_:2},[p.nullable?{name:"addonAfter",fn:l(()=>[o(e(ga),{checked:a.editableItem[p.name]===null,"onUpdate:checked":c=>r("update-nullable",p.name,c)},{default:l(()=>[O(B(e(y).translate("i18n_adddata_null")),1)]),_:2},1032,["checked","onUpdate:checked"])]),key:"0"}:void 0]),1032,["placeholder","value","disabled","onUpdate:value"])):z("",!0)]),_:2},1032,["label","required"]))),128))]),_:1},8,["model"])]),_:1},8,["title","open"]))}}),na=(k,r)=>r.includes(k)?{status:"error",help:"There already is a column with this name in the table"}:{status:""},Rl=Q({__name:"NewColumn",props:{open:{type:Boolean},table:{}},emits:["created","cancel"],setup(k,{emit:r}){const a=k,p=me().params.projectId,c=V(()=>{var Z;return((Z=a.table)==null?void 0:Z.getColumns().map(d=>d.name))||[]}),i=V(()=>na(v.value.name,c.value)),A={name:"",type:null,default:"",nullable:!0,unique:!1},v=F(A),b=()=>{v.value={...A}},n=F([{value:"reference",label:"reference",isLeaf:!1},...aa.map(Z=>({value:Z,label:Z,isLeaf:!0}))]),M=Z=>{if(!Z)return;const d=Z[Z.length-1];switch(Z.length){case 0:return;case 1:d.loading=!0,oe.list(p).then(E=>{d.children=E.map(X=>({value:X.id,label:X.name,isLeaf:!1})),d.loading=!1});return;case 2:d.loading=!0,oe.get(p,d.value).then(E=>{d.children=E.getColumns().map(X=>({type:X.type,value:X.id,label:X.name,isLeaf:!0})),d.loading=!1});return}},_=(Z,d)=>{if(!!Z){if(Z.length===1){v.value.type=Z[0],v.value.foreignKey=void 0;return}if(Z.length===3){const E=d[d.length-1];v.value.type=E.type,v.value.foreignKey={columnId:E.value}}}},I=Z=>{const d=Z.selectedOptions;return d?d.length===1?d[0].label:d.length===3?y.translate("i18n_newcolumn_reference_to",null,{tableName:d[1].label,columnName:d[2].label}):"":y.translate("i18n_newcolumn_select_type")},g=F({...{status:"success",message:"",fakeLoading:!1}}),j=()=>{g.value.fakeLoading=!0,U()};ye(()=>v.value.type,()=>{!v.value.type||(v.value.default=Ma[v.value.type]||"",j())});const U=_e.exports.debounce(async()=>{if(!v.value.default){g.value.status="success",g.value.message="",g.value.fakeLoading=!1;return}const Z=`select (${v.value.default})::${v.value.type} `;qe.executeQuery(p,Z,[]).then(d=>{g.value.status=d.errors.length>0?"error":"success",g.value.message=d.errors[0]||"",g.value.fakeLoading=!1})},500);function J(){r("cancel")}async function S(){if(!!a.table&&!(!v.value.name||!v.value.type))try{await a.table.addColumn(v.value),b(),r("created")}catch(Z){Z instanceof Error&&ke("Database error",Z.message)}}return(Z,d)=>(t(),C(e(Be),{title:e(y).translate("i18n_newcolumn_new_column"),width:720,open:a.open,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:J},{extra:l(()=>[o(e(xe),null,{default:l(()=>[o(e(ae),{onClick:J},{default:l(()=>[O(B(e(y).translate("i18n_newcolumn_cancel")),1)]),_:1}),o(e(ae),{type:"primary",onClick:S},{default:l(()=>[O(B(e(y).translate("i18n_newcolumn_save")),1)]),_:1})]),_:1})]),default:l(()=>[o(e(Le),{model:v.value,layout:"vertical"},{default:l(()=>[o(e(Y),{key:"name",label:e(y).translate("i18n_newcolumn_name"),required:"","validate-status":i.value.status,help:i.value.help},{default:l(()=>[o(e(de),{value:v.value.name,"onUpdate:value":d[0]||(d[0]=E=>v.value.name=E)},null,8,["value"])]),_:1},8,["label","validate-status","help"]),o(e(Y),{key:"type",label:e(y).translate("i18n_newcolumn_type"),required:""},{default:l(()=>[o(e(la),{options:n.value,"load-data":M,"display-render":I,"allow-clear":!1,onChange:_},null,8,["options"])]),_:1},8,["label"]),o(e(Y),{key:"default-value",label:e(y).translate("i18n_newcolumn_default_value"),"validate-status":g.value.status,help:g.value.message},{default:l(()=>[o(e(de),{value:v.value.default,"onUpdate:value":d[1]||(d[1]=E=>v.value.default=E),placeholder:e(y).translate("i18n_newcolumn_null_placeholder"),onInput:j},{suffix:l(()=>[g.value.fakeLoading?(t(),C(e(He),{key:0})):z("",!0),!g.value.fakeLoading&&g.value.status==="success"?(t(),C(e(Xe),{key:1,size:"18"})):z("",!0),!g.value.fakeLoading&&g.value.status==="error"?(t(),C(e(ta),{key:2,size:"18"})):z("",!0)]),_:1},8,["value","placeholder"])]),_:1},8,["label","validate-status","help"]),o(e(Y),{key:"nullable",label:e(y).translate("i18n_newcolumn_nullable")},{default:l(()=>[o(e(he),{checked:v.value.nullable,"onUpdate:checked":d[2]||(d[2]=E=>v.value.nullable=E)},null,8,["checked"])]),_:1},8,["label"]),o(e(Y),{key:"unique",label:e(y).translate("i18n_newcolumn_unique")},{default:l(()=>[o(e(he),{checked:v.value.unique,"onUpdate:checked":d[3]||(d[3]=E=>v.value.unique=E)},null,8,["checked"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","open"]))}}),El={class:"icon"},Kl=Q({__name:"OrderByIcon",props:{column:{},orderBy:{}},emits:["reorder"],setup(k,{emit:r}){return(a,$)=>{var p,c,i;return t(),s("div",El,[((p=a.orderBy)==null?void 0:p.column)!==String(a.column.title)?(t(),C(e(Ba),{key:0,size:"16",onClick:$[0]||($[0]=A=>r("reorder",String(a.column.title)))})):z("",!0),((c=a.orderBy)==null?void 0:c.column)===String(a.column.title)&&a.orderBy.direction==="asc"?(t(),C(e(ja),{key:1,size:"16",onClick:$[1]||($[1]=A=>r("reorder",String(a.column.title)))})):z("",!0),((i=a.orderBy)==null?void 0:i.column)===String(a.column.title)&&a.orderBy.direction==="desc"?(t(),C(e(qa),{key:2,size:"16",onClick:$[2]||($[2]=A=>r("reorder",String(a.column.title)))})):z("",!0)])}}});const Je=ze(Kl,[["__scopeId","data-v-6ae5cef6"]]);function Ye(k){return`"${k.replace(/"/g,'""')}"`}function Pl(k){return k==null?"NULL":`'${String(k).replace(/'/g,"''")}'`}function Ol(k,r){if(k.type==="search")return!k.q||k.q.trim()==="","";if(k.type==="and"){const a=k.conditions.filter(c=>c.value!==""&&c.value!==null);if(a.length===0)return"";const $=a.map(c=>{const i=Ye(c.field),A=Pl(c.value);return`${i} = ${A}`});return`SELECT * FROM ${Ye(r)} WHERE ${$.join(" AND ")}`}return""}function Wl(k,r){const a=F(r||{type:"search",q:""}),$=V(()=>k.value.getColumns().filter(I=>a.value.type==="and"&&!a.value.conditions.some(L=>L.field===I.name))),p=V(()=>k.value.getColumns().filter(I=>a.value.type==="and"&&!a.value.conditions.some(L=>L.field===I.name)));function c(){a.value={type:"and",conditions:[{type:"eq",field:"id",value:""}]}}function i(I){I==="search"?a.value={type:"search",q:""}:c()}function A(I){a.value.type==="and"&&a.value.conditions.push({type:"eq",field:String(I),value:""})}function v(I){a.value.type==="and"&&(a.value.conditions=a.value.conditions.filter(L=>L.field!==I))}function b(I){a.value.type==="search"&&(a.value={type:"search",q:I})}function n(I){if(a.value.type!=="and")return;const L=a.value.conditions.find(g=>g.field===I);L&&(L.field=I)}function M(I,L){if(a.value.type!=="and")return;const g=a.value.conditions.find(j=>j.field===I);g&&(g.value=L)}function _(){return Ol(a.value,k.value.name)}return{searchValue:a,filteredColumns:$,nonFilteredColumns:p,changeSearchType:i,addCondition:A,removeCondition:v,updateSearch:b,updateConditionField:n,updateConditionValue:M,getSqlQuery:_}}const Gl=Q({__name:"TableFilter",props:{search:{},table:{},data:{}},emits:["update:search"],setup(k,{emit:r}){const a=k,$=me(),p=V(()=>a.table),{searchValue:c,filteredColumns:i,nonFilteredColumns:A,changeSearchType:v,addCondition:b,removeCondition:n,updateSearch:M,updateConditionField:_,updateConditionValue:I,getSqlQuery:L}=Wl(p,a.search),g=[{label:y.translate("i18n_tablefilter_search"),value:"search"},{label:y.translate("i18n_tablefilter_advanced"),value:"and"}];function j(d){v(d),r("update:search",c.value)}function x(d){b(String(d)),r("update:search",c.value)}function U(d){n(d),r("update:search",c.value)}function J(d){M(d),r("update:search",c.value)}function S(d){_(d),r("update:search",c.value)}const Z=(d,E)=>{I(d,E),r("update:search",c.value)};return ye(()=>a.search,d=>{c.value=d},{deep:!0}),(d,E)=>{const X=Te("RouterLink");return t(),C(e(W),{vertical:"",align:"start",gap:"small"},{default:l(()=>[o(e(W),{align:"center",justify:"space-between",style:{width:"100%"}},{default:l(()=>[o(e(Aa),{options:g,value:e(c).type,"onUpdate:value":j},null,8,["value"]),e(c).type==="and"?(t(),C(X,{key:0,to:{name:"sql",params:{projectId:e($).params.projectId},query:{filter:e(L)()}}},{default:l(()=>[o(se,{type:"text",underline:""},{default:l(()=>[O(B(e(y).translate("i18n_tablefilter_edit_as_sql")),1)]),_:1})]),_:1},8,["to"])):z("",!0)]),_:1}),e(c).type==="search"?(t(),C(e(W),{key:0},{default:l(()=>[o(e(ha),{value:e(c).q,"onUpdate:value":J},null,8,["value"])]),_:1})):e(c).type==="and"?(t(),C(e(W),{key:1,vertical:"",gap:"small"},{default:l(()=>[(t(!0),s(te,null,ne(e(c).conditions,K=>(t(),C(e(W),{key:K.field,gap:"large",align:"center"},{default:l(()=>[o(e(Ze),{value:K.field,"onUpdate:value":[G=>K.field=G,G=>S(K.field)],style:{width:"120px"}},{default:l(()=>[(t(!0),s(te,null,ne(e(i),G=>(t(),C(e(Ue),{key:G.id,value:G.name},{default:l(()=>[O(B(G.name),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["value","onUpdate:value"]),o(e($t)),o(e(de),{value:K.value,"onUpdate:value":[G=>K.value=G,G=>Z(K.field,G)],style:{width:"120px"}},null,8,["value","onUpdate:value"]),o(e(ya),{style:{cursor:"pointer"},onClick:G=>U(K.field)},null,8,["onClick"])]),_:2},1024))),128)),e(A)[0]?(t(),C(e(W),{key:0,justify:"space-between"},{default:l(()=>[o(e(Ze),{style:{width:"120px"},value:"","onUpdate:value":x},{default:l(()=>[(t(!0),s(te,null,ne(e(A),K=>(t(),C(e(Ue),{key:K.id,value:K.name},{default:l(()=>[O(B(K.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})):z("",!0)]),_:1})):z("",!0)]),_:1})}}}),Ql={class:"twin-container"},Jl={class:"fullwidth-input"},Yl={class:"fullwidth-input"},Xl={class:"using-container"},en={class:"fullwidth-input"},an=Q({__name:"UpdateColumn",props:{open:{type:Boolean},table:{},column:{}},emits:["updated","cancel"],setup(k,{emit:r}){const a=k,p=me().params.projectId,c=F(a.column.type);ea(async()=>{if(!a.column.foreignKey)return;c.value=y.translate("i18n_updatecolumn_loading");const f=await oe.fromColumnId(p,a.column.foreignKey.columnId),h=f.getColumn(a.column.foreignKey.columnId);c.value=y.translate("i18n_updatecolumn_reference_to",null,{tableName:f.name,columnName:h.name})});const i=V(()=>{var f;return((f=a.table)==null?void 0:f.getColumns().map(h=>h.record.initialState.name))||[]}),A=V(()=>a.column.name===a.column.record.initialState.name?{status:"",help:""}:na(a.column.name,i.value)),{result:v,loading:b}=Ie(async()=>a.table.select({},10,0).then(({total:f})=>f));function n(){a.column.record.resetChanges(),r("cancel")}const _=F({status:"success",message:"",fakeLoading:!1}),I=()=>{_.value.fakeLoading=!0,L()},L=_e.exports.debounce(async()=>{if(!a.column.default){_.value.status="success",_.value.message="",_.value.fakeLoading=!1;return}const f=`select (${a.column.default})::${a.column.type} `,h=await qe.executeQuery(p,f,[]);_.value.status=h.errors.length>0?"error":"success",_.value.message=h.errors[0]||"",_.value.fakeLoading=!1},500),g=F([{value:"reference",label:"reference",isLeaf:!1},...aa.filter(f=>f!==a.column.type).map(f=>({value:f,label:f,isLeaf:!0}))]),j=f=>{if(!f)return;const h=f[f.length-1];switch(f.length){case 0:return;case 1:h.loading=!0,oe.list(p).then(N=>{h.children=N.map(ie=>({value:ie.id,label:ie.name,isLeaf:!1})),h.loading=!1});return;case 2:h.loading=!0,oe.get(p,h.value).then(N=>{h.children=N.getColumns().map(ie=>({type:ie.type,value:ie.id,label:ie.name,isLeaf:!0})),h.loading=!1});return}},x=f=>{const h=f.selectedOptions;return h?h.length===1?h[0].label:h.length===3?y.translate("i18n_updatecolumn_reference_to",null,{tableName:h[1].label,columnName:h[2].label}):"":y.translate("i18n_updatecolumn_select_type")},U=(f,h)=>{if(!!f){if(f.length===1){a.column.type=f[0],a.column.foreignKey=null;return}if(f.length===3){if(a.column.foreignKey&&a.column.foreignKey.columnId===f[2])return;const N=h[h.length-1];a.column.type=N.type,a.column.foreignKey={columnId:N.value}}}};async function J(f){await Na(y.translate("i18n_updatecolumn_confirm_delete"))&&await S(f)}async function S(f){var h,N;await((N=(h=a.table)==null?void 0:h.getColumn(f))==null?void 0:N.delete()),r("updated")}const Z=()=>v.value===0||b.value?!1:a.column.record.hasChangesDeep("type"),d=F({type:"default"}),E=()=>{a.column.type=a.column.record.initialState.type,d.value={type:"default"}};function X(f,h){return h==="varchar"||f==="int"&&h==="boolean"||f==="boolean"&&h==="int"}ye(()=>a.column.type,()=>{I(),G.value||(d.value={type:"user-defined",using:fe.value,mandatory:!0})});const G=V(()=>d.value.type==="default"&&X(a.column.record.initialState.type,a.column.type)),be=V(()=>!X(a.column.record.initialState.type,a.column.type));function re(f){f?d.value={type:"default"}:d.value={type:"user-defined",using:fe.value,mandatory:!1}}function $e(f){if(d.value.type==="default")throw new Error("Can't change using when using default casting");d.value.using=f!=null?f:""}const ue=()=>be.value?!0:Z()&&d.value.type==="user-defined",fe=V(()=>`${a.column.record.initialState.name}::${a.column.type}`);async function Ve(){if(!a.column)return;let f=d.value.type==="default"?fe.value:d.value.using;v.value===0&&(f=`${a.column.record.initialState.name}::text::${a.column.type}`);try{await a.column.update(f),r("updated")}catch(h){h instanceof Error&&ke("Database error",h.message)}}return(f,h)=>(t(),C(e(Be),{title:e(y).translate("i18n_updatecolumn_edit_column"),width:720,open:f.open,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:n},{extra:l(()=>[o(e(xe),null,{default:l(()=>[o(e(ae),{onClick:n},{default:l(()=>[O(B(e(y).translate("i18n_updatecolumn_cancel")),1)]),_:1}),o(e(ae),{type:"primary",onClick:Ve},{default:l(()=>[O(B(e(y).translate("i18n_updatecolumn_save")),1)]),_:1})]),_:1})]),footer:l(()=>[o(se,{danger:"",onClick:h[7]||(h[7]=N=>J(String(f.column.id)))},{default:l(()=>[O(B(e(y).translate("i18n_updatecolumn_delete")),1)]),_:1})]),default:l(()=>[o(e(Le),{model:f.column,layout:"vertical"},{default:l(()=>[o(e(Y),{key:"name",label:e(y).translate("i18n_updatecolumn_name"),"validate-status":A.value.status,help:A.value.help},{default:l(()=>[o(e(de),{value:f.column.name,"onUpdate:value":h[0]||(h[0]=N=>f.column.name=N)},null,8,["value"])]),_:1},8,["label","validate-status","help"]),u("div",Ql,[u("span",Jl,[o(e(Y),{key:"type",label:e(y).translate("i18n_updatecolumn_current_type")},{default:l(()=>[o(e(Ze),{value:c.value,"onUpdate:value":h[1]||(h[1]=N=>c.value=N),"default-active-first-option":"",disabled:""},null,8,["value"])]),_:1},8,["label"])]),o(e(xa),{class:"right-arrow"}),u("span",Yl,[o(e(Y),{key:"new-type",label:e(y).translate("i18n_updatecolumn_new_type")},{default:l(()=>[o(e(la),{options:g.value,"load-data":j,"display-render":x,"allow-clear":!0,onClear:E,onChange:U},null,8,["options"])]),_:1},8,["label"])])]),o(e(Y),{key:"default-value",label:e(y).translate("i18n_updatecolumn_default_value"),"validate-status":_.value.status,help:_.value.message},{default:l(()=>[o(e(de),{value:f.column.default,"onUpdate:value":h[2]||(h[2]=N=>f.column.default=N),placeholder:e(y).translate("i18n_updatecolumn_null_placeholder"),onInput:I},{suffix:l(()=>[_.value.fakeLoading?(t(),C(e(He),{key:0,size:"small"})):z("",!0),!_.value.fakeLoading&&_.value.status==="success"?(t(),C(e(Xe),{key:1,size:18})):z("",!0),!_.value.fakeLoading&&_.value.status==="error"?(t(),C(e(ta),{key:2,size:18})):z("",!0)]),_:1},8,["value","placeholder"])]),_:1},8,["label","validate-status","help"]),u("div",Xl,[Z()?(t(),C(e(Y),{key:"default-casting",label:e(y).translate("i18n_updatecolumn_use_default_casting")},{default:l(()=>[o(e(he),{checked:G.value,disabled:be.value,"onUpdate:checked":h[3]||(h[3]=N=>re(!!N))},null,8,["checked","disabled"])]),_:1},8,["label"])):z("",!0),u("span",en,[Z()?(t(),C(e(Y),{key:"using",label:e(y).translate("i18n_updatecolumn_using")},{default:l(()=>[o(e(de),{value:d.value.type==="user-defined"?d.value.using:fe.value,disabled:!ue(),onInput:h[4]||(h[4]=N=>$e(N.target.value))},null,8,["value","disabled"])]),_:1},8,["label"])):z("",!0)])]),o(e(W),null,{default:l(()=>[o(e(Y),{key:"nullable",label:e(y).translate("i18n_updatecolumn_nullable")},{default:l(()=>[o(e(he),{checked:f.column.nullable,"onUpdate:checked":h[5]||(h[5]=N=>f.column.nullable=N)},null,8,["checked"])]),_:1},8,["label"]),o(e(Y),{key:"unique",label:e(y).translate("i18n_updatecolumn_unique")},{default:l(()=>[o(e(he),{checked:f.column.unique,"onUpdate:checked":h[6]||(h[6]=N=>f.column.unique=N)},null,8,["checked"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","open"]))}});const tn=ze(an,[["__scopeId","data-v-f24d9ba7"]]),ln={style:{overflow:"hidden","white-space":"wrap"}},nn={key:1},on={key:0,class:"table-row null"},rn={class:"foreign-key-popover"},un={key:0,class:"popover-loading"},sn={class:"field-label"},dn={class:"foreign-key-popover"},cn={key:0,class:"popover-loading"},pn={class:"field-label"},fn={class:"field-value"},vn={key:2,class:"foreign-key-error"},mn={key:1,class:"field-value"},gn={key:2,class:"foreign-key-error"},hn={class:"button-container"},yn={class:"button-container"},bn={class:"button-container"},_n={class:"button-container"},Hn=Q({__name:"TableData",props:{table:{},loading:{type:Boolean}},emits:["refresh"],setup(k,{emit:r}){var je;const a=k,$=F(1),p=F(10),c=V(()=>{var m,H;return{total:(H=(m=re.value)==null?void 0:m.total)!=null?H:0,current:$.value,pageSize:p.value,totalBoundaryShowSizeChanger:10,showSizeChanger:!0,pageSizeOptions:["10","25","50","100"],onChange:async(q,w)=>{$.value=q,p.value=w,await ue()}}}),i=F([]),A=F(!1),v=F(null),b=F(null),n=F(!1),M=F(null),_=me(),I=Se(),L=F(typeof _.query.q=="string"?_.query.q:""),g=V(()=>{try{return JSON.parse(_.query.where)}catch{return{}}}),j=F(Object.keys(g.value).length>0?{type:"and",conditions:Object.entries(g.value).reduce((m,[H,q])=>[...m,{type:"eq",field:H,value:q}],[])}:{type:"search",q:L.value}),x=V(()=>j.value.type==="search"?j.value.q:""),U=V(()=>j.value.type==="search"?{}:j.value.conditions.reduce((m,H)=>({...m,[H.field]:H.value}),{}));function J(m){m.type==="search"?I.replace({query:{q:m.q}}):I.replace({query:{where:JSON.stringify(U.value)}}),$.value=1,ue()}const S=F({type:"idle"});function Z(){S.value={type:"idle"}}async function d(){Z(),r("refresh")}ye(()=>a.table,()=>{ra(),ue()});function E(){S.value={type:"creating"}}const X=m=>{if(!a.table)throw new Error("Table not found");S.value={type:"editing",column:a.table.getColumn(m)}},K=F(null),G=m=>{var H;((H=K.value)==null?void 0:H.column)===m?K.value={column:m,direction:K.value.direction==="asc"?"desc":"asc"}:K.value={column:m,direction:"asc"},ue()},be=V(()=>{var m;return((m=re.value)==null?void 0:m.rows.length)===1}),{result:re,loading:$e,refetch:ue}=Ie(async()=>{const[{rows:m,total:H},q]=await Promise.all([a.table.select(U.value,($.value-1)*p.value,p.value,x.value,K.value||void 0),Promise.all(a.table.getColumns().filter(w=>w.foreignKey).map(w=>oe.fromColumnId(_.params.projectId,w.foreignKey.columnId).then(P=>[w.name,P])))]);return{rows:m,total:H,columns:q.reduce((w,[P,R])=>({...w,[P]:R}),{})}}),fe=(m,H)=>{var R,ee;const q=(R=a.table)==null?void 0:R.getColumns().find(T=>T.name===m);if(!q)return"";const w=(ee=re.value)==null?void 0:ee.columns[q.name],P=w==null?void 0:w.getColumns().find(T=>{var le;return T.id===((le=q.foreignKey)==null?void 0:le.columnId)});return!w||!P?"":{name:"tableEditor",params:{projectId:_.params.projectId,tableId:w.id},query:{where:JSON.stringify({[P.name]:H})}}},Ve=async(m,H)=>{var q;A.value=!0,v.value=null,b.value=null;try{const w=(q=a.table)==null?void 0:q.getColumns().find(T=>T.name===m);if(!w||!w.foreignKey)return;const P=await Pe.fromID(_.params.projectId,w.foreignKey.columnId),R=await oe.get(_.params.projectId,P.tableId),ee=await R.select({[P.name]:H},0,1,"");ee.rows.length>0&&(v.value=ee.rows[0],b.value=R)}catch(w){console.error("Error loading foreign key data:",w)}finally{A.value=!1}},f=m=>{if(!b.value)return!1;const H=b.value.getColumns().find(q=>q.name===m);return!!(H!=null&&H.foreignKey)},h=async(m,H)=>{if(!!b.value){n.value=!0,M.value=null;try{const q=b.value.getColumns().find(ee=>ee.name===m);if(!q||!q.foreignKey)return;const w=await Pe.fromID(_.params.projectId,q.foreignKey.columnId),R=await(await oe.get(_.params.projectId,w.tableId)).select({[w.name]:H},0,1,"");R.rows.length>0&&(M.value=R.rows[0])}catch(q){console.error("Error loading nested foreign key data:",q)}finally{n.value=!1}}},N=(m,H)=>{S.value.type==="adding"&&(S.value.editableItem[m]=H)},ie=(m,H)=>{S.value.type==="adding"&&(S.value.editableItem[m]=H?null:"")},De=()=>[...a.table.getColumns().map(m=>{var H;return{key:(H=m.id)!=null?H:"",title:m.name,dataIndex:m.name,width:220,resizable:!0,ellipsis:!1}}),{key:"action",title:"",fixed:"right",width:100,align:"center",resizable:!1,ellipsis:!1}],oa=De(),ve=F(oa),ra=()=>ve.value=De();function ua(m,H){const q=H;if(!(q!=null&&q.key))return;const w=ve.value.findIndex(P=>P.key===q.key);w!==-1&&(ve.value[w].width=m)}const we=V(()=>{var m;return((m=re.value)==null?void 0:m.rows.map(H=>({key:H.id,...H})))||[]});let ia=ba((je=a.table)==null?void 0:je.getUnprotectedColumns().reduce((m,H)=>({...m,[H.name]:""}),{}));const Ce=F(!1);async function sa(){if(!(!a.table||!ia||S.value.type!=="adding")){Ce.value=!0;try{S.value.editableItem.id&&(typeof S.value.editableItem.id=="string"||typeof S.value.editableItem.id=="number")?await a.table.updateRow(S.value.editableItem.id.toString(),S.value.editableItem):await a.table.insertRow(S.value.editableItem),ue(),Z()}catch(m){m instanceof Error&&ke("Database error",m.message)}finally{Ce.value=!1}}}const da=async m=>{if(!(!re.value||!re.value.rows.find(H=>H.id===m)))try{await a.table.deleteRow(m),be.value&&($.value=Math.max(1,$.value-1)),ue()}catch(H){H instanceof Error&&ke("Database error",H.message)}},ca=m=>{var ee;const H=(ee=we.value)==null?void 0:ee.filter(T=>m===T.key)[0],q=a.table.getColumns(),w=q.map(T=>T.name),P=q.filter(T=>T.type==="json").map(T=>T.name),R=_e.exports.pick(_e.exports.cloneDeep(H),w);P.forEach(T=>{R[T]&&(R[T]=JSON.stringify(R[T]))}),S.value={type:"adding",editableItem:R}};return(m,H)=>{const q=Te("RouterLink");return t(),C(Me,{"full-width":""},{default:l(()=>[o(e(W),{justify:"space-between",style:{"margin-bottom":"16px"},gap:"middle"},{default:l(()=>[o(Gl,{search:j.value,"onUpdate:search":[H[0]||(H[0]=w=>j.value=w),J],table:m.table,data:we.value},null,8,["search","table","data"]),o(e(W),{justify:"flex-end",gap:"middle"},{default:l(()=>[o(se,{type:"primary",onClick:E},{default:l(()=>[o(e(c0)),O(B(e(y).translate("i18n_tabledata_create_column")),1)]),_:1}),ve.value.length===3?(t(),C(e(ge),{key:0,title:e(y).translate("i18n_tabledata_create_column_first")},{default:l(()=>[o(se,{disabled:!0,onClick:H[1]||(H[1]=w=>S.value={type:"adding",editableItem:{}})},{default:l(()=>[o(e(Qe)),O(B(e(y).translate("i18n_tabledata_add_data")),1)]),_:1})]),_:1},8,["title"])):(t(),C(se,{key:1,onClick:H[2]||(H[2]=w=>S.value={type:"adding",editableItem:{}})},{default:l(()=>[o(e(Qe)),O(B(e(y).translate("i18n_tabledata_add_data")),1)]),_:1}))]),_:1})]),_:1}),o(e($a),{columns:ve.value,"data-source":we.value,pagination:c.value,bordered:"",loading:e($e)||m.loading,scroll:{x:1e3,y:720},size:"small",onResizeColumn:ua},{headerCell:l(({column:w})=>[w.title!=="id"&&w.title!=="created_at"&&w.key!=="action"?(t(),C(e(W),{key:0,align:"center",justify:"space-between",gap:"small"},{default:l(()=>[o(e(W),{style:{overflow:"hidden","white-space":"wrap"},align:"center",gap:"small"},{default:l(()=>[u("span",ln,B(w.title),1),o(e(W),null,{default:l(()=>[o(Je,{column:w,"order-by":K.value,onReorder:G},null,8,["column","order-by"])]),_:2},1024)]),_:2},1024),o(se,{type:"text",onClick:P=>X(String(w.key))},{default:l(()=>[o(e(Ta),{size:"18"})]),_:2},1032,["onClick"])]),_:2},1024)):(t(),s("span",nn,[o(e(W),{align:"center",gap:"small"},{default:l(()=>[O(B(w.title)+" ",1),w.key!=="action"?(t(),C(Je,{key:0,column:w,"order-by":K.value,onReorder:G},null,8,["column","order-by"])):z("",!0)]),_:2},1024)]))]),bodyCell:l(({column:w,text:P,record:R})=>{var ee;return[ve.value.map(T=>T.title).includes(w.dataIndex)?(t(),s(te,{key:0},[P===null?(t(),s("div",on,B(e(y).translate("i18n_tabledata_null")),1)):(ee=m.table.getColumns().find(T=>T.name===w.dataIndex))!=null&&ee.foreignKey?(t(),C(e(Re),{key:1,trigger:["hover"],placement:"right",onMouseenter:T=>Ve(w.dataIndex,P)},{content:l(()=>[u("div",rn,[A.value?(t(),s("div",un,[o(e(He),{size:"small"})])):v.value&&b.value?(t(!0),s(te,{key:1},ne(v.value,(T,le)=>(t(),s("div",{key:le,class:"foreign-key-field"},[u("div",sn,B(le),1),f(le)&&T!==null?(t(),C(e(Re),{key:0,trigger:["hover"],placement:"right",onMouseenter:Ae=>h(le,T)},{content:l(()=>[u("div",dn,[n.value?(t(),s("div",cn,[o(e(He),{size:"small"})])):M.value?(t(!0),s(te,{key:1},ne(M.value,(Ae,Ne)=>(t(),s("div",{key:Ne,class:"foreign-key-field"},[u("div",pn,B(Ne),1),u("div",fn,B(Ae!==null?Ae:""),1)]))),128)):(t(),s("div",vn,B(e(y).translate("i18n_tabledata_failed_to_load")),1))])]),default:l(()=>[o(e(Ee),{class:"nested-fk-tag",color:"blue"},{default:l(()=>[O(B(T),1)]),_:2},1024)]),_:2},1032,["onMouseenter"])):(t(),s("div",mn,B(T!==null?T:""),1))]))),128)):(t(),s("div",gn,B(e(y).translate("i18n_tabledata_failed_to_load")),1))])]),default:l(()=>[o(e(Ee),{color:"blue",class:"foreign-key-tag"},{default:l(()=>[o(q,{to:fe(w.dataIndex,P),target:"_blank",class:"foreign-key-link"},{default:l(()=>[O(B(P),1)]),_:2},1032,["to"])]),_:2},1024)]),_:2},1032,["onMouseenter"])):(t(),s("div",{key:2,class:_a(["table-row",{expanded:i.value.includes(R.id)}])},B(P),3))],64)):z("",!0),w.key==="action"?(t(),C(e(W),{key:1,gap:"small",justify:"center"},{default:l(()=>[i.value.includes(R.id)?(t(),C(e(ae),{key:0,class:"icons",onClick:T=>i.value=i.value.filter(le=>le!==R.id)},{icon:l(()=>[o(e(ge),{title:e(y).translate("i18n_tabledata_collapse")},{default:l(()=>[u("div",hn,[o(e(L0),{size:15})])]),_:1},8,["title"])]),_:2},1032,["onClick"])):(t(),C(e(ae),{key:1,onClick:T=>i.value.push(R.id)},{icon:l(()=>[o(e(ge),{title:e(y).translate("i18n_tabledata_expand")},{default:l(()=>[u("div",yn,[o(e(at),{size:15})])]),_:1},8,["title"])]),_:2},1032,["onClick"])),o(e(ae),{onClick:T=>ca(R.id)},{icon:l(()=>[o(e(ge),{title:e(y).translate("i18n_tabledata_edit")},{default:l(()=>[u("div",bn,[o(e(Da),{size:15})])]),_:1},8,["title"])]),_:2},1032,["onClick"]),o(e(Ha),{title:e(y).translate("i18n_tabledata_sure_to_delete"),onConfirm:T=>da(R.id)},{default:l(()=>[o(e(ae),null,{icon:l(()=>[o(e(ge),{title:e(y).translate("i18n_tabledata_delete")},{default:l(()=>[u("div",_n,[o(e(ka),{size:15})])]),_:1},8,["title"])]),_:1})]),_:2},1032,["title","onConfirm"])]),_:2},1024)):z("",!0)]}),_:1},8,["columns","data-source","pagination","loading"]),S.value.type==="adding"?(t(),C(Ul,{key:0,open:S.value.type==="adding",table:a.table,"editable-item":S.value.editableItem,loading:Ce.value,onUpdateNullable:ie,onRecordChange:N,onClose:Z,onCancel:Z,onSave:sa},null,8,["open","table","editable-item","loading"])):z("",!0),S.value.type==="creating"?(t(),C(Rl,{key:1,open:S.value.type==="creating",table:a.table,onClose:Z,onCancel:Z,onCreated:d},null,8,["open","table"])):z("",!0),S.value.type==="editing"?(t(),C(tn,{key:2,open:S.value.type==="editing",column:S.value.column,table:m.table,onUpdated:d,onClose:Z,onCancel:Z},null,8,["open","column","table"])):z("",!0)]),_:1})}}});const kn={style:{"font-size":"16px"}},u1=Q({__name:"TableEditor",setup(k){const r=Se(),a=me(),$=Ke(()=>{if(typeof a.params.tableId=="string")return a.params.tableId;throw new Error("tableId is not a string")}),p=Ke(()=>{if(typeof a.params.projectId=="string")return a.params.projectId;throw new Error("projectId is not a string")}),c=F(!1),i=fa(),A=()=>{var L;c.value=!1,(L=b.value)==null||L.table.save(),M()},v=V(()=>b.value?b.value.table.name:y.translate("i18n_tableeditor_loading")),{result:b,loading:n,refetch:M}=Ie(()=>Promise.all([qe.get(p.value).then(async L=>{const g=await Za.get(L.organizationId),U=(await new Ia().list(g.id)).find(J=>J.id===L.folderId);if(!U)throw new Error("Folder not found");return{project:L,organization:g,folder:U}}),oe.get(p.value,$.value)]).then(([{project:L,organization:g,folder:j},x])=>({project:L,organization:g,table:x,folder:j})));ye([$,p],()=>{M()});const _=V(()=>!n.value&&b.value?[{label:y.translate("i18n_tableeditor_my_organizations"),path:"/organizations"},{label:b.value.organization.name,path:`/organizations/${b.value.organization.id}`},{label:b.value.folder.name,path:`/organizations/${b.value.organization.id}#${b.value.folder.id}`},{label:b.value.project.name,path:`/projects/${b.value.project.id}/tables`}]:void 0);function I(){r.push({name:"tables",params:{projectId:p.value}})}return ea(()=>{const L=Fe.subscribe("columnCreated",({tableId:g})=>{g===$.value&&M()});Va(()=>{Fe.unsubscribe(L)})}),(L,g)=>{const j=Te("RouterLink");return t(),C(pa,{key:$.value},{navbar:l(()=>[o(e(Ra),{style:{padding:"5px 25px",border:"1px solid #f0f0f0"},onBack:I},{title:l(()=>[o(e(W),{align:"center",gap:"small"},{default:l(()=>[u("span",kn,B(v.value),1),o(se,{type:"text",onClick:g[0]||(g[0]=x=>c.value=!0)},{default:l(()=>[o(e(pl),{size:"16"})]),_:1})]),_:1}),o(e(wa),{title:e(y).translate("i18n_tableeditor_change_table_name"),open:c.value,onCancel:g[2]||(g[2]=x=>c.value=!1),onOk:A},{default:l(()=>[e(b)?(t(),C(e(de),{key:0,value:e(b).table.name,"onUpdate:value":g[1]||(g[1]=x=>e(b).table.name=x)},null,8,["value"])):z("",!0)]),_:1},8,["title","open"])]),subTitle:l(()=>[_.value?(t(),C(e(Fa),{key:0,style:{margin:"0px 20px"}},{default:l(()=>[(t(!0),s(te,null,ne(_.value,(x,U)=>(t(),C(e(Ua),{key:U},{default:l(()=>[o(j,{to:x.path},{default:l(()=>[O(B(x.label),1)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1})):z("",!0)]),extra:l(()=>[o(se,{type:"link",onClick:g[3]||(g[3]=x=>e(i).toggle())},{default:l(()=>[o(e(Ca)),O(" "+B(e(y).translate("i18n_tableeditor_ai_assistant")),1)]),_:1})]),_:1})]),content:l(()=>[e(b)?(t(),C(Hn,{key:0,loading:e(n),table:e(b).table,onRefresh:g[4]||(g[4]=x=>e(M)())},null,8,["loading","table"])):z("",!0),e(b)?(t(),C(Fl,{key:1,table:e(b).table},null,8,["table"])):z("",!0)]),chat:l(()=>[o(Sa)]),_:1})}}});export{u1 as default};
//# sourceMappingURL=TableEditor.20800cdc.js.map
