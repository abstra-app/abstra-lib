import{C as T}from"./CrudView.232cb2b0.js";import{a as $}from"./asyncComputed.9b764511.js";import{d as B,Z as R,ac as D,u as e,o as p,et as h,aD as E,eC as z,c as b,w as a,b as r,ar as l,ez as _,cP as x,cw as U,bj as V,R as L,eA as N,f as P,a as f,fd as F,cO as S,cQ as C,ev as G,bG as M,eH as q,eI as H,cp as O}from"./vue-router.9c189215.js";import"./gateway.9f52e1b9.js";import{g as Q,B as W,a as Y}from"./datetime.2ad99619.js";import"./tables.7c712ae1.js";import{P as Z}from"./project.94e04bb5.js";import{r as A,C as J}from"./router.e3c5e041.js";import{_ as K,E as X}from"./ExecutionStatusIcon.vue_vue_type_script_setup_true_lang.f6764162.js";import{G as ee}from"./PhArrowCounterClockwise.vue.e28d4fad.js";import{F as te}from"./PhArrowSquareOut.vue.ddd88f8c.js";import{G as se}from"./PhChats.vue.4d395358.js";import{I as oe}from"./PhCopySimple.vue.7a3e309e.js";import{F as ae}from"./PhRocketLaunch.vue.d1ef7089.js";import{A as re}from"./index.7be8b358.js";import{A as ie}from"./index.25372697.js";import"./DocsButton.vue_vue_type_script_setup_true_lang.c0e8bace.js";import"./BookOutlined.09421b52.js";import"./url.31fc40ca.js";import"./index.cef5be1e.js";import"./popupNotifcation.36212eac.js";import"./record.81eab1e4.js";import"./string.ab5242d0.js";import"./LoadingOutlined.2e22119b.js";(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},m=new Error().stack;m&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[m]="eb33328e-9dd9-4357-a757-67cd529deb65",n._sentryDebugIdIdentifier="sentry-dbid-eb33328e-9dd9-4357-a757-67cd529deb65")}catch{}})();const le={key:0,class:"flex-row"},ne={key:1,class:"flex-row"},de={key:2,class:"flex-row"},ce=B({__name:"ExecutionsShort",props:{stageId:{},projectId:{}},emits:["select"],setup(n,{emit:m}){const c=n,k=new X,{result:g,refetch:u,loading:w}=$(async()=>{const{executions:o}=await k.list({projectId:c.projectId,stageId:c.stageId,limit:6});return o}),v=o=>{m("select",o)},I=o=>Q(o,{weekday:void 0});let s=null;return R(()=>{s=setInterval(()=>u(),15e3)}),D(()=>{s&&clearInterval(s)}),(o,d)=>e(g)?(p(),h("div",le,[(p(!0),h(E,null,z(e(g),t=>(p(),b(e(U),{key:t.id,title:I(t.createdAt),onClick:y=>v(t)},{content:a(()=>[r(e(x),null,{default:a(()=>[l("Status: "+_(t.status),1)]),_:2},1024),r(e(x),null,{default:a(()=>[l("Duration: "+_(t.duration_seconds),1)]),_:2},1024),r(e(x),null,{default:a(()=>[l("Build: "+_(t.buildId.slice(0,6)),1)]),_:2},1024)]),default:a(()=>[r(K,{status:t.status},null,8,["status"])]),_:2},1032,["title","onClick"]))),128))])):e(w)?(p(),h("div",ne,[r(e(V))])):(p(),h("div",de,"None"))}});const pe=L(ce,[["__scopeId","data-v-da0ef620"]]),ue=n=>(q("data-v-a07d9964"),n=n(),H(),n),fe={style:{"max-width":"250px",overflow:"hidden","text-overflow":"ellipsis ellipsis","white-space":"nowrap"}},_e={key:1},me={class:"desc",style:{"margin-bottom":"80px",padding:"10px 30px","background-color":"#f6f6f6","border-radius":"5px"}},ge={style:{"font-size":"16px",display:"flex","align-items":"center",gap:"5px"}},ye=ue(()=>f("strong",null,"Getting started",-1)),he=B({__name:"Live",setup(n){const c=N().params.projectId,k=s=>{A.push({name:"logs",params:{projectId:c},query:{stageId:s.stageId,executionId:s.id}})},{loading:g,result:u}=$(async()=>{const o=(await W.list(c)).find(y=>y.latest);if(!o)return null;const[d,t]=await Promise.all([Y.get(o.id),Z.get(c)]);return{buildSpec:d,project:t}}),w=s=>{var t;if(!("path"in s)||!s.path)return;const o=s.type==="form"?`/${s.path}`:`/_hooks/${s.path}`,d=(t=u.value)==null?void 0:t.project.getUrl(o);!d||(navigator.clipboard.writeText(d),O.success("Copied URL to clipboard"))},v=s=>s.type=="form"?`/${s.path}`.slice(0,30):s.type=="hook"?`/_hooks/${s.path}`.slice(0,30):s.type=="job"?`${s.schedule}`:"",I=P(()=>{var d;const s=[{name:"Type",align:"left"},{name:"Title",align:"left"},{name:"Trigger",align:"left"},{name:"Last Runs"},{name:"",align:"right"}],o=(d=u.value)==null?void 0:d.buildSpec;return o?{columns:s,rows:o.runtimes.map(t=>({key:t.id,cells:[{type:"tag",text:t.type.charAt(0).toUpperCase()+t.type.slice(1),tagColor:"default"},{type:"slot",key:"title",payload:{runtime:t}},{type:"slot",key:"trigger",payload:{runtime:t}},{type:"slot",key:"last-runs",payload:{runtime:t}},{type:"actions",actions:[{icon:ee,label:"View script logs",onClick:()=>A.push({name:"logs",params:{projectId:c},query:{stageId:t.id}})},{icon:oe,label:"Copy URL",onClick:()=>w(t),hide:!["form","hook"].includes(t.type)}]}]}))}:{columns:s,rows:[]}});return(s,o)=>{var d,t,y;return e(g)||((y=(t=(d=e(u))==null?void 0:d.buildSpec)==null?void 0:t.runtimes.length)!=null?y:0)>0?(p(),b(T,{key:0,"empty-title":"","entity-name":"build",description:"Access and monitor your project's current scripts here.",table:I.value,loading:e(g),title:"Live View"},{description:a(()=>{var i;return[r(e(S),{target:"_blank",href:(i=e(u))==null?void 0:i.project.getUrl()},{default:a(()=>[l(" Open App"),r(e(te),{class:"icon",size:16})]),_:1},8,["href"])]}),title:a(({payload:i})=>{var j;return[f("div",fe,[i.runtime.type!="form"?(p(),b(e(C),{key:0},{default:a(()=>[l(_(i.runtime.title),1)]),_:2},1024)):i.runtime.type=="form"?(p(),b(e(S),{key:1,href:(j=e(u))==null?void 0:j.project.getUrl(i.runtime.path),target:"_blank"},{default:a(()=>[l(_(i.runtime.title),1)]),_:2},1032,["href"])):G("",!0)])]}),"last-runs":a(({payload:i})=>[r(pe,{"stage-id":i.runtime.id,"project-id":e(c),onSelect:k},null,8,["stage-id","project-id"])]),trigger:a(({payload:i})=>[r(e(ie),{color:"default"},{default:a(()=>[l(_(v(i.runtime)),1)]),_:2},1024)]),_:1},8,["table","loading"])):(p(),h("section",_e,[f("div",me,[f("p",ge,[r(e(F),{size:"30"}),ye]),f("p",null,[l("Install the editor using pip: "),r(e(C),{code:"",copyable:""},{default:a(()=>[l("pip install abstra")]),_:1})]),f("p",null,[l(" Run the editor: "),r(e(C),{code:"",copyable:""},{default:a(()=>[l("abstra editor my-new-project")]),_:1})]),f("p",null,[l(" Feeling lost? "),r(e(M),{target:"_blank",type:"default",size:"small",onClick:o[0]||(o[0]=()=>e(J).showNewMessage("I need help getting started with Abstra"))},{default:a(()=>[r(e(se))]),_:1})])]),r(e(re),{status:"info",title:"Waiting for your first deploy!","sub-title":"Your live stages will appear here once you make your first deploy"},{icon:a(()=>[r(e(ae),{size:"100",color:"#d14056"})]),_:1})]))}}});const Me=L(he,[["__scopeId","data-v-a07d9964"]]);export{Me as default};
//# sourceMappingURL=Live.5ed91139.js.map
