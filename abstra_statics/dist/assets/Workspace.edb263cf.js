import{B as le}from"./BaseLayout.d0740a8e.js";import{d as N,D as O,f,o as a,Y as i,$ as ie,S as m,e8 as ue,a as g,e as A,g as ce,X as de,ah as pe,r as X,b as o,w as t,u as e,dh as y,aS as S,e9 as V,c as u,aG as d,ea as k,d5 as me,dc as H,bT as I,p as E,bR as fe,bz as ye,bx as U,cI as ve,eb as ge,db as _e,by as he,bL as we,ec as Y,ed as ke,ee as be,K as Ae,a0 as Ce,ef as He}from"./index.a95f3dfe.js";import{S as Te,L as Me,N as xe}from"./log.8e938faf.js";import{_ as Se}from"./AbstraLogo.vue_vue_type_script_setup_true_lang.1daad9e3.js";import{G as Ve}from"./PhClockCounterClockwise.vue.38e248c4.js";import{u as Ie}from"./omniChatStore.e2150125.js";import{L as G}from"./LoadingOutlined.03d94d2b.js";import{A as Le}from"./Avatar.86cfe116.js";import"./AbstraButton.vue_vue_type_script_setup_true_lang.048aceff.js";import"./PhArrowCounterClockwise.vue.770e9c5e.js";import"./PhFilePy.vue.665d1b8a.js";import"./PhChats.vue.72042c64.js";import"./PhRocket.vue.a5219931.js";import"./PhPackage.vue.d44c579f.js";import"./linters.89f3e048.js";import"./asyncComputed.cb5b1d6d.js";import"./workspaces.d225abfe.js";import"./workspaceStore.2ea22595.js";import"./url.a3a3492f.js";import"./colorHelpers.4faf9736.js";import"./record.1896cfd9.js";import"./polling.bce112d9.js";import"./PhArrowSquareOut.vue.7513bf56.js";import"./PhSignOut.vue.324f0dcb.js";import"./editor.37bf1b84.js";import"./index.3c6f1260.js";import"./CloseCircleOutlined.7dbee5d6.js";import"./CheckCircleFilled.3a7fc123.js";import"./index.12d555af.js";import"./popupNotifcation.98fdb9df.js";import"./ai.08c4f0f8.js";import"./uuid.ef3e0c9c.js";import"./PhCheckCircle.vue.7f75bd66.js";import"./PhCopySimple.vue.8693727c.js";import"./scripts.3fece2c3.js";import"./controller.3b1d1b49.js";import"./vue-flow-core.07b945c3.js";import"./validations.6bbfe3b5.js";import"./string.9fd91434.js";import"./metadata.d217de12.js";import"./PhRobot.vue.1a24ea75.js";import"./PhWebhooksLogo.vue.3b3d46e9.js";import"./controller.510320c4.js";import"./gateway.f96afce5.js";import"./fetch.fdb70e86.js";import"./PhPencil.vue.03c94f57.js";import"./Logo.f019c7ef.js";(function(){try{var _=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new Error().stack;r&&(_._sentryDebugIds=_._sentryDebugIds||{},_._sentryDebugIds[r]="549f3dcc-0b18-43b8-a2f5-0e6293870bdd",_._sentryDebugIdIdentifier="sentry-dbid-549f3dcc-0b18-43b8-a2f5-0e6293870bdd")}catch{}})();const Be=["width","height","fill","transform"],$e={key:0},De=g("path",{d:"M228,128a12,12,0,0,1-12,12H140v76a12,12,0,0,1-24,0V140H40a12,12,0,0,1,0-24h76V40a12,12,0,0,1,24,0v76h76A12,12,0,0,1,228,128Z"},null,-1),Oe=[De],Re={key:1},Ke=g("path",{d:"M216,56V200a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V56A16,16,0,0,1,56,40H200A16,16,0,0,1,216,56Z",opacity:"0.2"},null,-1),ze=g("path",{d:"M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80A8,8,0,0,1,224,128Z"},null,-1),Ee=[Ke,ze],Ne={key:2},Fe=g("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM184,136H136v48a8,8,0,0,1-16,0V136H72a8,8,0,0,1,0-16h48V72a8,8,0,0,1,16,0v48h48a8,8,0,0,1,0,16Z"},null,-1),Pe=[Fe],Ze={key:3},je=g("path",{d:"M222,128a6,6,0,0,1-6,6H134v82a6,6,0,0,1-12,0V134H40a6,6,0,0,1,0-12h82V40a6,6,0,0,1,12,0v82h82A6,6,0,0,1,222,128Z"},null,-1),qe=[je],Ue={key:4},Ye=g("path",{d:"M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80A8,8,0,0,1,224,128Z"},null,-1),Ge=[Ye],We={key:5},Xe=g("path",{d:"M220,128a4,4,0,0,1-4,4H132v84a4,4,0,0,1-8,0V132H40a4,4,0,0,1,0-8h84V40a4,4,0,0,1,8,0v84h84A4,4,0,0,1,220,128Z"},null,-1),Je=[Xe],Qe={name:"PhPlus"},et=N({...Qe,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(_){const r=_,h=O("weight","regular"),n=O("size","1em"),b=O("color","currentColor"),C=O("mirrored",!1),w=f(()=>{var c;return(c=r.weight)!=null?c:h}),T=f(()=>{var c;return(c=r.size)!=null?c:n}),L=f(()=>{var c;return(c=r.color)!=null?c:b}),B=f(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:C?"scale(-1, 1)":void 0);return(c,F)=>(a(),i("svg",ue({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:T.value,height:T.value,fill:L.value,transform:B.value},c.$attrs),[ie(c.$slots,"default"),w.value==="bold"?(a(),i("g",$e,Oe)):w.value==="duotone"?(a(),i("g",Re,Ee)):w.value==="fill"?(a(),i("g",Ne,Pe)):w.value==="light"?(a(),i("g",Ze,qe)):w.value==="regular"?(a(),i("g",Ue,Ge)):w.value==="thin"?(a(),i("g",We,Je)):m("",!0)],16,Be))}}),tt=["onKeydown"],at={key:0,class:"entry"},ot={class:"entry-owner"},st={key:1,class:"entry"},nt={class:"entry-owner"},rt="Smart Chat",W="You",lt=.98,it=N({__name:"OmniChat",setup(_){const r=Ie(),h=Me.create(),n=new Te(h,null),b=A(null),C=A(""),w=f(()=>n.getVisibleActions()),T=f(()=>n.isLoadingActions()),L=f(()=>n.isAnswering()),B=f(()=>n.isProcessing()),c=f(()=>!B.value&&!L.value),F=f(()=>n.isLoadingHistory()),P=f(()=>n.shouldRenderLoadMoreHistory());ce(()=>T.value,()=>{setTimeout(()=>{Q()},100)});const v=A(null),R=A(!0),Z=A(!1),$=A(!1),K=A(!1),J=l=>{n.moveThreadFromHistoryToRecents(l),K.value=!1},Q=()=>{R.value=!0,v.value&&(v.value.scrollTop=v.value.scrollHeight)},ee=()=>{if(!v.value)return;const{scrollTop:l,scrollHeight:p,clientHeight:z}=v.value;l+z>=p*lt?(R.value=!0,Z.value=!1):(R.value=!1,Z.value=!0)},te=f(()=>L.value?"Answering...":B.value?"Processing...":"Type your question"),ae=()=>{r.open(),Ae(()=>oe())},M=()=>{r.isOpen=!1},oe=()=>{b.value&&(r.focusInput(),b.value.focus())},se=l=>{l.target===l.currentTarget&&M()},j=l=>{if((l.metaKey||l.ctrlKey)&&l.key==="k"){l.preventDefault(),$.value=!0;return}$.value&&l.key==="i"&&(l.preventDefault(),r.isOpen?M():ae(),$.value=!1),l.metaKey||l.ctrlKey||($.value=!1),l.key==="Escape"&&r.isOpen&&M()},ne=async()=>{await n.setupThread(),n.clearActions(),h.clear()},q=async()=>{n.setInput(C.value),C.value="",await n.send(null)};return de(()=>{n.init(),window.addEventListener("keydown",j),v.value}),pe(()=>{window.removeEventListener("keydown",j),v.value&&v.value.removeEventListener("scroll",ee)}),(l,p)=>{const z=X("Markdown");return a(),i("div",{class:be(["container",{visible:e(r).isOpen}]),justify:"center",align:"center",onKeydown:Y(M,["esc"]),onClick:se},[o(e(y),{class:"upper",justify:"space-between",gap:"small"},{default:t(()=>[o(e(y),{align:"center",class:"recent-container"},{default:t(()=>[(a(!0),i(S,null,V(e(n).recentlyAccessedThreads,s=>(a(),u(e(me),{key:s.threadId,class:"recent-thread",closable:"",onClick:x=>e(n).setCurrentThreadFromRecents(s.threadId),onClose:x=>e(n).removeFromRecentlyAccessedThreads(s.threadId)},{default:t(()=>[d(k(s.title),1)]),_:2},1032,["onClick","onClose"]))),128)),e(n).recentlyAccessedThreads.length===0?(a(),u(e(H),{key:0,type:"secondary"},{default:t(()=>[d(" No recent threads ")]),_:1})):m("",!0)]),_:1}),o(e(y),{gap:"2"},{default:t(()=>[o(e(I),{type:"text",icon:E(e(et)),onClick:ne},null,8,["icon"]),o(e(fe),{open:K.value},{overlay:t(()=>[o(e(ye),null,{default:t(()=>[(a(!0),i(S,null,V(e(n).pastThreads,s=>(a(),u(e(U),{key:s.threadId,onClick:x=>J(s.threadId)},{default:t(()=>[d(k(s.title),1)]),_:2},1032,["onClick"]))),128)),P.value?(a(),u(e(ve),{key:0})):m("",!0),P.value?(a(),u(e(U),{key:1,onClick:p[1]||(p[1]=s=>e(n).loadMoreHistory())},{default:t(()=>[o(e(y),{gap:"small"},{default:t(()=>[d(" Load more "),F.value?(a(),u(e(G),{key:0,size:"16"})):m("",!0)]),_:1})]),_:1})):m("",!0)]),_:1})]),default:t(()=>[o(e(I),{type:"text",icon:E(e(Ve)),onClick:p[0]||(p[0]=s=>K.value=!0)},null,8,["icon"])]),_:1},8,["open"]),o(e(I),{type:"text",icon:E(e(ge)),onClick:M},null,8,["icon"])]),_:1})]),_:1}),e(r).isOpen?(a(),u(e(y),{key:0,ref_key:"entriesContainer",ref:v,class:"content"},{default:t(()=>[(a(!0),i(S,null,V(e(h).logs,(s,x)=>(a(),i("div",{key:x},[s.type==="ai-output"?(a(),i("div",at,[g("div",ot,[o(Se,{size:"small","hide-text":""}),o(e(H),{strong:""},{default:t(()=>[d(k(rt))]),_:1})]),s.type==="ai-output"?(a(),u(z,{key:0,source:s.log,class:"entry-text"},null,8,["source"])):m("",!0)])):m("",!0),s.type==="ai-input"?(a(),i("div",st,[g("div",nt,[o(e(Le),{size:20,shape:"square",class:"avatar"},{default:t(()=>{var D;return[d(k((D=W[0])!=null?D:"Y"),1)]}),_:1}),o(e(H),{strong:""},{default:t(()=>[d(k(W))]),_:1})]),(a(!0),i(S,null,V(s.log.split(`
`),(D,re)=>(a(),u(e(_e),{key:re},{default:t(()=>[d(k(D),1)]),_:2},1024))),128))])):m("",!0)]))),128)),e(h).hasAiLogs()?m("",!0):(a(),u(e(y),{key:0,vertical:"",justify:"center",align:"center",class:"empty-container"},{default:t(()=>[o(e(H),null,{default:t(()=>[d("Ask anything!")]),_:1}),o(e(H),{type:"secondary"},{default:t(()=>[d("No messages yet")]),_:1})]),_:1})),o(e(y),{gap:"small",style:{"margin-bottom":"20px"},wrap:"wrap"},{default:t(()=>[T.value?(a(),u(e(he),{key:0,style:{"margin-bottom":"20px"}})):m("",!0),(a(!0),i(S,null,V(w.value,s=>(a(),u(e(I),{key:s.label,type:"primary",disabled:s.disabled,loading:s.loading,onClick:x=>s.execute()},{default:t(()=>[d(k(s.label),1)]),_:2},1032,["disabled","loading","onClick"]))),128))]),_:1})]),_:1},512)):m("",!0),o(e(y),{class:"lower",vertical:"",justify:"space-between"},{default:t(()=>[o(e(we),{ref_key:"inputRef",ref:b,value:C.value,"onUpdate:value":p[2]||(p[2]=s=>C.value=s),bordered:!1,placeholder:"Ask a question",onKeydown:Y(q,["enter"]),onFocus:p[3]||(p[3]=s=>e(r).focusInput()),onBlur:p[4]||(p[4]=s=>e(r).blurInput())},null,8,["value","onKeydown"]),o(e(y),{justify:"space-between",class:"bottom-lower",gap:"small",align:"center"},{default:t(()=>[o(e(y),{gap:"small"},{default:t(()=>[o(e(H),{type:"secondary",class:"info"},{default:t(()=>[c.value?m("",!0):(a(),u(e(G),{key:0,size:"16"})),d(" "+k(te.value),1)]),_:1})]),_:1}),o(e(y),{gap:"small",align:"center"},{default:t(()=>[o(e(ke),{size:"16"}),o(e(I),{size:"small",type:"primary",onClick:q},{default:t(()=>[d("Send")]),_:1})]),_:1})]),_:1})]),_:1})],42,tt)}}});const ut=Ce(it,[["__scopeId","data-v-f3e7f5b0"]]),oa=N({__name:"Workspace",setup(_){const r=He();return(h,n)=>{const b=X("RouterView");return a(),u(le,null,{navbar:t(()=>[o(xe,{"page-title":e(r).meta.title},null,8,["page-title"])]),content:t(()=>[o(b)]),chat:t(()=>[o(ut)]),_:1})}}});export{oa as default};
//# sourceMappingURL=Workspace.edb263cf.js.map
