import{d as D,af as F,g as w,o as u,K as h,O as j,F as b,e5 as le,a as v,b as p,e6 as $,eH as se,eI as ce,eJ as de,N as T,ec as q,f as W,u as c,cw as fe,w as m,c as g,az as P,eb as J,d4 as pe,bM as E,cm as he,da as me,eh as ve,bK as ye,eK as ge,bs as be,bq as Z,cZ as Oe,cq as we,t as C,Q as Ae}from"./index.2bd55860.js";import{p as Pe}from"./popupNotifcation.44e16211.js";import{a as Fe}from"./ant-design.52becce9.js";import{f as N}from"./files.7d0ee655.js";import{f as Q}from"./string.fcee8e82.js";import{G as Ve}from"./PhFolder.vue.0fd5da48.js";(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[e]="17971b07-f821-44b5-9329-35dae7198452",n._sentryDebugIdIdentifier="sentry-dbid-17971b07-f821-44b5-9329-35dae7198452")}catch{}})();var ke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM544 472c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v108H372c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h108v108c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h108c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V472z"}}]},name:"file-add",theme:"outlined"};const Me=ke;var $e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M484 443.1V528h-84.5c-4.1 0-7.5 3.1-7.5 7v42c0 3.8 3.4 7 7.5 7H484v84.9c0 3.9 3.2 7.1 7 7.1h42c3.9 0 7-3.2 7-7.1V584h84.5c4.1 0 7.5-3.2 7.5-7v-42c0-3.9-3.4-7-7.5-7H540v-84.9c0-3.9-3.1-7.1-7-7.1h-42c-3.8 0-7 3.2-7 7.1zm396-144.7H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder-add",theme:"outlined"};const Se=$e;var He={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};const Ze=He,_e=["width","height","fill","transform"],Ce={key:0},De=v("path",{d:"M144,128a16,16,0,1,1-16-16A16,16,0,0,1,144,128ZM60,112a16,16,0,1,0,16,16A16,16,0,0,0,60,112Zm136,0a16,16,0,1,0,16,16A16,16,0,0,0,196,112Z"},null,-1),je=[De],ze={key:1},Ee=v("path",{d:"M240,96v64a16,16,0,0,1-16,16H32a16,16,0,0,1-16-16V96A16,16,0,0,1,32,80H224A16,16,0,0,1,240,96Z",opacity:"0.2"},null,-1),Ne=v("path",{d:"M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128Zm56-12a12,12,0,1,0,12,12A12,12,0,0,0,196,116ZM60,116a12,12,0,1,0,12,12A12,12,0,0,0,60,116Z"},null,-1),Be=[Ee,Ne],Ue={key:2},Ie=v("path",{d:"M224,80H32A16,16,0,0,0,16,96v64a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V96A16,16,0,0,0,224,80ZM60,140a12,12,0,1,1,12-12A12,12,0,0,1,60,140Zm68,0a12,12,0,1,1,12-12A12,12,0,0,1,128,140Zm68,0a12,12,0,1,1,12-12A12,12,0,0,1,196,140Z"},null,-1),Re=[Ie],xe={key:3},Le=v("path",{d:"M138,128a10,10,0,1,1-10-10A10,10,0,0,1,138,128ZM60,118a10,10,0,1,0,10,10A10,10,0,0,0,60,118Zm136,0a10,10,0,1,0,10,10A10,10,0,0,0,196,118Z"},null,-1),Ge=[Le],Te={key:4},qe=v("path",{d:"M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128Zm56-12a12,12,0,1,0,12,12A12,12,0,0,0,196,116ZM60,116a12,12,0,1,0,12,12A12,12,0,0,0,60,116Z"},null,-1),We=[qe],Je={key:5},Qe=v("path",{d:"M136,128a8,8,0,1,1-8-8A8,8,0,0,1,136,128Zm-76-8a8,8,0,1,0,8,8A8,8,0,0,0,60,120Zm136,0a8,8,0,1,0,8,8A8,8,0,0,0,196,120Z"},null,-1),Xe=[Qe],Ye={name:"PhDotsThree"},Ke=D({...Ye,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(n){const e=n,t=F("weight","regular"),o=F("size","1em"),i=F("color","currentColor"),O=F("mirrored",!1),y=w(()=>{var d;return(d=e.weight)!=null?d:t}),A=w(()=>{var d;return(d=e.size)!=null?d:o}),k=w(()=>{var d;return(d=e.color)!=null?d:i}),M=w(()=>e.mirrored!==void 0?e.mirrored?"scale(-1, 1)":void 0:O?"scale(-1, 1)":void 0);return(d,z)=>(u(),h("svg",le({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:A.value,height:A.value,fill:k.value,transform:M.value},d.$attrs),[j(d.$slots,"default"),y.value==="bold"?(u(),h("g",Ce,je)):y.value==="duotone"?(u(),h("g",ze,Be)):y.value==="fill"?(u(),h("g",Ue,Re)):y.value==="light"?(u(),h("g",xe,Ge)):y.value==="regular"?(u(),h("g",Te,We)):y.value==="thin"?(u(),h("g",Je,Xe)):b("",!0)],16,_e))}}),et=["width","height","fill","transform"],tt={key:0},nt=v("path",{d:"M216.49,79.52l-56-56A12,12,0,0,0,152,20H56A20,20,0,0,0,36,40V216a20,20,0,0,0,20,20H200a20,20,0,0,0,20-20V88A12,12,0,0,0,216.49,79.52ZM160,57l23,23H160ZM60,212V44h76V92a12,12,0,0,0,12,12h48V212Z"},null,-1),rt=[nt],at={key:1},lt=v("path",{d:"M208,88H152V32Z",opacity:"0.2"},null,-1),ot=v("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM200,216H56V40h88V88a8,8,0,0,0,8,8h48V216Z"},null,-1),it=[lt,ot],ut={key:2},st=v("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM152,88V44l44,44Z"},null,-1),ct=[st],dt={key:3},ft=v("path",{d:"M212.24,83.76l-56-56A6,6,0,0,0,152,26H56A14,14,0,0,0,42,40V216a14,14,0,0,0,14,14H200a14,14,0,0,0,14-14V88A6,6,0,0,0,212.24,83.76ZM158,46.48,193.52,82H158ZM200,218H56a2,2,0,0,1-2-2V40a2,2,0,0,1,2-2h90V88a6,6,0,0,0,6,6h50V216A2,2,0,0,1,200,218Z"},null,-1),pt=[ft],ht={key:4},mt=v("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM200,216H56V40h88V88a8,8,0,0,0,8,8h48V216Z"},null,-1),vt=[mt],yt={key:5},gt=v("path",{d:"M210.83,85.17l-56-56A4,4,0,0,0,152,28H56A12,12,0,0,0,44,40V216a12,12,0,0,0,12,12H200a12,12,0,0,0,12-12V88A4,4,0,0,0,210.83,85.17ZM156,41.65,198.34,84H156ZM200,220H56a4,4,0,0,1-4-4V40a4,4,0,0,1,4-4h92V88a4,4,0,0,0,4,4h52V216A4,4,0,0,1,200,220Z"},null,-1),bt=[gt],Ot={name:"PhFile"},wt=D({...Ot,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(n){const e=n,t=F("weight","regular"),o=F("size","1em"),i=F("color","currentColor"),O=F("mirrored",!1),y=w(()=>{var d;return(d=e.weight)!=null?d:t}),A=w(()=>{var d;return(d=e.size)!=null?d:o}),k=w(()=>{var d;return(d=e.color)!=null?d:i}),M=w(()=>e.mirrored!==void 0?e.mirrored?"scale(-1, 1)":void 0:O?"scale(-1, 1)":void 0);return(d,z)=>(u(),h("svg",le({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:A.value,height:A.value,fill:k.value,transform:M.value},d.$attrs),[j(d.$slots,"default"),y.value==="bold"?(u(),h("g",tt,rt)):y.value==="duotone"?(u(),h("g",at,it)):y.value==="fill"?(u(),h("g",ut,ct)):y.value==="light"?(u(),h("g",dt,pt)):y.value==="regular"?(u(),h("g",ht,vt)):y.value==="thin"?(u(),h("g",yt,bt)):b("",!0)],16,et))}});function X(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),o.forEach(function(i){At(n,i,t[i])})}return n}function At(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var B=function(e,t){var o=X({},e,t.attrs);return p($,X({},o,{icon:se}),null)};B.displayName="DeleteOutlined";B.inheritAttrs=!1;const Pt=B;function Y(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),o.forEach(function(i){Ft(n,i,t[i])})}return n}function Ft(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var U=function(e,t){var o=Y({},e,t.attrs);return p($,Y({},o,{icon:ce}),null)};U.displayName="DownloadOutlined";U.inheritAttrs=!1;const Vt=U;function K(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),o.forEach(function(i){kt(n,i,t[i])})}return n}function kt(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var I=function(e,t){var o=K({},e,t.attrs);return p($,K({},o,{icon:de}),null)};I.displayName="EditOutlined";I.inheritAttrs=!1;const Mt=I;function ee(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),o.forEach(function(i){$t(n,i,t[i])})}return n}function $t(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var R=function(e,t){var o=ee({},e,t.attrs);return p($,ee({},o,{icon:Me}),null)};R.displayName="FileAddOutlined";R.inheritAttrs=!1;const te=R;function ne(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),o.forEach(function(i){St(n,i,t[i])})}return n}function St(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var x=function(e,t){var o=ne({},e,t.attrs);return p($,ne({},o,{icon:Se}),null)};x.displayName="FolderAddOutlined";x.inheritAttrs=!1;const Ht=x;function re(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},o=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),o.forEach(function(i){Zt(n,i,t[i])})}return n}function Zt(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var L=function(e,t){var o=re({},e,t.attrs);return p($,re({},o,{icon:Ze}),null)};L.displayName="UploadOutlined";L.inheritAttrs=!1;const ae=L,_t=D({__name:"ScrollArea",props:{innerClass:{},outerClass:{},outerStyle:{},innerStyle:{}},setup(n){const e=n,t=w(()=>e.outerStyle?{position:"relative",...e.outerStyle}:{position:"relative"}),o=w(()=>{var i;return{position:"absolute",inset:0,overflow:"auto",...(i=e.innerStyle)!=null?i:{}}});return(i,O)=>(u(),h("div",{style:T(t.value),class:q(i.outerClass)},[v("div",{style:T(o.value),class:q(i.innerClass)},[j(i.$slots,"default")],6)],6))}}),Ct={class:"files-navigator"},Dt={key:0},jt={key:1},zt={key:0,class:"file-size"},Et=D({__name:"FilesNavigator",props:{files:{},loading:{type:Boolean},onCreate:{type:Function},onDownload:{type:Function},onDelete:{type:Function},onRefetch:{type:Function},onRename:{type:Function},onOpen:{type:Function},onMkdir:{type:Function},separator:{}},setup(n){const e=n,t=r=>a=>{var l,s;return{key:a.pathParts.join(e.separator),title:r.keepFullPath?a.pathParts.join(e.separator):N(a.pathParts),isLeaf:a.type==="file",file:a,children:r.keepFullPath?void 0:(s=(l=a.children)==null?void 0:l.map(f=>{var H;const S=(H=e.files)==null?void 0:H.find(_=>_.pathParts.join(e.separator)===f.join(e.separator));if(!S)throw new Error("Child node not found");return t({keepFullPath:r.keepFullPath})(S)}))!=null?s:[]}},o=r=>{if(!V.value.trim())return C("span",r);const a=Q(V.value,r);return a?C("span",r.split("").map((l,s)=>a.includes(s)?C("span",{class:"char-match"},l):l)):C("span",r)},i=r=>{if(r.type==="directory")return"";const a=r.size;if(a<1024)return`${a} B`;const l=a/1024;if(l<1024)return`${l.toFixed(2)} KB`;const s=l/1024;return s<1024?`${s.toFixed(2)} MB`:`${(s/1024).toFixed(2)} GB`},O=w(()=>{var r,a;return V.value.trim()?(r=e.files)==null?void 0:r.filter(l=>l.pathParts.length===1&&Q(V.value,l.pathParts.join(e.separator))).map(t({keepFullPath:!0})):(a=e.files)==null?void 0:a.filter(l=>l.pathParts.length===1).map(t({keepFullPath:!1}))}),y=r=>{var a,l;return r.isLeaf?1:(l=(a=r.children)==null?void 0:a.reduce((s,f)=>s+y(f),0))!=null?l:0},A=w(()=>O.value?O==null?void 0:O.value.reduce((r,a)=>r+y(a),0):0),k=W(!1);function M(r){if(r&&r.type==="file")return;const a=document.createElement("input");a.type="file",a.onchange=async()=>{var f,S,H,_,G;const l=(f=a.files)==null?void 0:f[0],s=await(l==null?void 0:l.arrayBuffer());if(!!l)try{k.value=!0,await((_=e.onCreate)==null?void 0:_.call(e,[...(S=r==null?void 0:r.pathParts)!=null?S:[],(H=l.name)!=null?H:"Untitled file"],s?new Uint8Array(s):void 0)),await((G=e.onRefetch)==null?void 0:G.call(e))}catch{Pe("Failed to upload file","File already exists")}finally{k.value=!1}},a.click()}function d(r){var s;if(r&&r.type==="file")return;const a=prompt("Enter the name of the new file");if(!a)return;const l=r?[...r.pathParts,a]:[a];(s=e.onCreate)==null||s.call(e,l)}async function z(r){if(!r||!e.onDownload)return;const a=await e.onDownload(r.pathParts),l=document.createElement("a");l.href=URL.createObjectURL(a),l.download=N(r.pathParts),l.click()}async function oe(r){var l,s;if(!r)return;const a="Are you sure you want to delete this "+(r.type==="file"?"file":"directory and all its contents")+"?";await Fe(a)&&(await((l=e.onDelete)==null?void 0:l.call(e,r.pathParts)),await((s=e.onRefetch)==null?void 0:s.call(e)))}async function ie(r){var s,f;if(!r)return;const a=prompt("Enter the new name of the file",N(r.pathParts));if(!a)return;const l=[...r.pathParts.slice(0,-1),a];await((s=e.onRename)==null?void 0:s.call(e,r.pathParts,l)),await((f=e.onRefetch)==null?void 0:f.call(e))}async function ue(r){var s;if(r&&r.type==="file")return;const a=prompt("Enter the name of the new folder");if(!a)return;const l=r?[...r.pathParts,a]:[a];(s=e.onMkdir)==null||s.call(e,l)}const V=W("");return(r,a)=>(u(),h("div",Ct,[p(c(fe),{value:V.value,"onUpdate:value":a[0]||(a[0]=l=>V.value=l),loading:e.loading,placeholder:"Search files"},null,8,["value","loading"]),p(c(me),{justify:"space-between"},{default:m(()=>[A.value>0?(u(),g(c(pe),{key:0},{default:m(()=>[v("b",null,[P(J(A.value)+" File",1),A.value!==1?(u(),h("span",Dt,"s")):b("",!0),V.value?(u(),h("span",jt," found ")):b("",!0)])]),_:1})):b("",!0),r.loading?b("",!0):(u(),g(c(he),{key:1},{default:m(()=>[r.onCreate?(u(),g(c(E),{key:0,onClick:a[1]||(a[1]=()=>d())},{default:m(()=>[p(c(te)),P(" New File ")]),_:1})):b("",!0),r.onCreate?(u(),g(c(E),{key:1,onClick:a[2]||(a[2]=()=>M())},{default:m(()=>[p(c(ae)),P(" Upload ")]),_:1})):b("",!0),r.onMkdir?(u(),g(c(E),{key:2,onClick:a[3]||(a[3]=()=>ue())},{default:m(()=>[p(c(Ht)),P(" New Folder ")]),_:1})):b("",!0)]),_:1}))]),_:1}),p(_t,{class:"scroll-area","outer-style":{flexGrow:"1"}},{default:m(()=>[O.value&&O.value.length>0?(u(),g(c(Oe),{key:0,class:"files-tree","tree-data":O.value,selectable:"",onSelect:a[5]||(a[5]=(l,{node:{file:s}})=>{var f;return(f=e.onOpen)==null?void 0:f.call(e,s.pathParts)})},{title:m(({title:l,isLeaf:s,file:f})=>[v("span",null,[(u(),g(ve(o(l)))),s?(u(),h("span",zt,"("+J(i(f))+")",1)):b("",!0)]),p(c(ye),{onClick:a[4]||(a[4]=ge(()=>{},["stop"]))},{overlay:m(()=>[p(c(be),{disabled:r.loading},{default:m(()=>[r.onDownload?(u(),g(c(Z),{key:0,onClick:()=>z(f)},{default:m(()=>[p(c(Vt)),P(" Download ")]),_:2},1032,["onClick"])):b("",!0),r.onRename?(u(),g(c(Z),{key:1,onClick:()=>ie(f)},{default:m(()=>[p(c(Mt)),P(" Rename ")]),_:2},1032,["onClick"])):b("",!0),!s&&r.onCreate?(u(),g(c(Z),{key:2,onClick:()=>d(f)},{default:m(()=>[p(c(te)),P(" New File ")]),_:2},1032,["onClick"])):b("",!0),r.onCreate?(u(),g(c(Z),{key:3,loading:r.loading,onClick:()=>M(f)},{default:m(()=>[p(c(ae)),P(" Upload ")]),_:2},1032,["loading","onClick"])):b("",!0),r.onDelete?(u(),g(c(Z),{key:4,danger:"",onClick:()=>oe(f)},{default:m(()=>[p(c(Pt)),P(" Delete ")]),_:2},1032,["onClick"])):b("",!0)]),_:2},1032,["disabled"])]),default:m(()=>[p(c(Ke),{style:{cursor:"pointer",float:"inline-end"},size:"25px"})]),_:2},1024)]),icon:m(({file:l})=>[j(r.$slots,"icon",{file:l},()=>[l.type==="directory"?(u(),g(c(Ve),{key:0})):(u(),g(c(wt),{key:1}))],!0)]),_:3},8,["tree-data"])):(u(),g(c(we),{key:1,description:r.loading?"Loading...":"No files"},null,8,["description"]))]),_:3})]))}});const Gt=Ae(Et,[["__scopeId","data-v-1c0a4c2f"]]);export{Gt as F,wt as I,_t as _};
//# sourceMappingURL=FilesNavigator.91d0433e.js.map
