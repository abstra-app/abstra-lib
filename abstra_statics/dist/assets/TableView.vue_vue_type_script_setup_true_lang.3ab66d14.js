import{l as Ae}from"./fetch.55a475bd.js";import{d as U,Z as V,J as x,b as l,ew as C,dj as oe,ey as E,eB as se,e as L,f as u,eI as re,eT as Ue,z as e,r as M,c as f,w as i,eF as W,as as P,eH as D,u as a,cK as Ne,aE as K,cC as N,x as Q,bh as qe,eL as ve,eG as Y,aI as ae,ck as Ce,eC as Be,eD as He,eU as We,bG as G,eK as Ke,K as Ge,o as _e,O as Re,af as Je,cB as Qe,eO as Xe,bz as Ye,eV as et,cE as pe}from"./outputWidgets.7dd23d3d.js";import{d as tt}from"./vuedraggable.umd.9e3b6699.js";import"./workspaces.299c954e.js";import{S as at}from"./scripts.20bb39cb.js";import"./envVars.edb75e83.js";import{A as nt}from"./api.9b0a26a8.js";import{t as ot}from"./ant-design.410c5d74.js";import{A as B}from"./Text.8f0caa1d.js";import{a as we}from"./asyncComputed.8f047c40.js";import{A as j}from"./index.8d63ab0d.js";import{s as ee}from"./metadata.306bd23a.js";import{A as J}from"./index.a5cb16ca.js";import{f as st}from"./index.bda542d5.js";import{A as ge}from"./Paragraph.7df229fc.js";import"./index.63d9c692.js";import{A as X}from"./Title.0952eb37.js";import{T as rt,A as it}from"./index.90ad5190.js";import{A as Le,C as ke}from"./CollapsePanel.c7d8ef37.js";import{A as lt}from"./Link.ffd51525.js";import{A as ct}from"./index.42ade5ee.js";import{A as ut}from"./index.7c32ff54.js";import{C as dt,A as mt}from"./Card.fee12f7e.js";import{L as Pe}from"./LoadingOutlined.bc742123.js";import"./index.063cef17.js";import{F as pt,A as gt}from"./Form.9f41d3b4.js";import{c as ht}from"./string.8d4f9524.js";(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new Error().stack;t&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[t]="bc1ac215-7f28-4bff-8347-e592c918d739",s._sentryDebugIdIdentifier="sentry-dbid-bc1ac215-7f28-4bff-8347-e592c918d739")}catch{}})();var St={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM641.7 520.8L442.3 677.6c-7.4 5.8-18.3.6-18.3-8.8V355.3c0-9.4 10.9-14.7 18.3-8.8l199.4 156.7a11.2 11.2 0 010 17.6z"}}]},name:"play-square",theme:"filled"};const bt=St;var ft={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"};const yt=ft,At=["width","height","fill","transform"],vt={key:0},Ct=L("path",{d:"M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm0,192a84,84,0,1,1,84-84A84.09,84.09,0,0,1,128,212Zm68-84a12,12,0,0,1-12,12H128a12,12,0,0,1-12-12V72a12,12,0,0,1,24,0v44h44A12,12,0,0,1,196,128Z"},null,-1),_t=[Ct],Rt={key:1},wt=L("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"},null,-1),Lt=L("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm64-88a8,8,0,0,1-8,8H128a8,8,0,0,1-8-8V72a8,8,0,0,1,16,0v48h48A8,8,0,0,1,192,128Z"},null,-1),kt=[wt,Lt],Pt={key:2},Et=L("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm56,112H128a8,8,0,0,1-8-8V72a8,8,0,0,1,16,0v48h48a8,8,0,0,1,0,16Z"},null,-1),It=[Et],Ot={key:3},xt=L("path",{d:"M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm0,192a90,90,0,1,1,90-90A90.1,90.1,0,0,1,128,218Zm62-90a6,6,0,0,1-6,6H128a6,6,0,0,1-6-6V72a6,6,0,0,1,12,0v50h50A6,6,0,0,1,190,128Z"},null,-1),$t=[xt],Mt={key:4},jt=L("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm64-88a8,8,0,0,1-8,8H128a8,8,0,0,1-8-8V72a8,8,0,0,1,16,0v48h48A8,8,0,0,1,192,128Z"},null,-1),Dt=[jt],Tt={key:5},zt=L("path",{d:"M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm0,192a92,92,0,1,1,92-92A92.1,92.1,0,0,1,128,220Zm60-92a4,4,0,0,1-4,4H128a4,4,0,0,1-4-4V72a4,4,0,0,1,8,0v52h52A4,4,0,0,1,188,128Z"},null,-1),Zt=[zt],Ft={name:"PhClock"},Vt=U({...Ft,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(s){const t=s,o=V("weight","regular"),n=V("size","1em"),r=V("color","currentColor"),m=V("mirrored",!1),c=x(()=>{var d;return(d=t.weight)!=null?d:o}),p=x(()=>{var d;return(d=t.size)!=null?d:n}),w=x(()=>{var d;return(d=t.color)!=null?d:r}),y=x(()=>t.mirrored!==void 0?t.mirrored?"scale(-1, 1)":void 0:m?"scale(-1, 1)":void 0);return(d,A)=>(l(),C("svg",se({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:p.value,height:p.value,fill:w.value,transform:y.value},d.$attrs),[oe(d.$slots,"default"),c.value==="bold"?(l(),C("g",vt,_t)):c.value==="duotone"?(l(),C("g",Rt,kt)):c.value==="fill"?(l(),C("g",Pt,It)):c.value==="light"?(l(),C("g",Ot,$t)):c.value==="regular"?(l(),C("g",Mt,Dt)):c.value==="thin"?(l(),C("g",Tt,Zt)):E("",!0)],16,At))}}),Ut=["width","height","fill","transform"],Nt={key:0},qt=L("path",{d:"M228,64a36,36,0,1,0-48,33.94V112a4,4,0,0,1-4,4H80a4,4,0,0,1-4-4V97.94a36,36,0,1,0-24,0V112a28,28,0,0,0,28,28h36v18.06a36,36,0,1,0,24,0V140h36a28,28,0,0,0,28-28V97.94A36.07,36.07,0,0,0,228,64ZM64,52A12,12,0,1,1,52,64,12,12,0,0,1,64,52Zm64,152a12,12,0,1,1,12-12A12,12,0,0,1,128,204ZM192,76a12,12,0,1,1,12-12A12,12,0,0,1,192,76Z"},null,-1),Bt=[qt],Ht={key:1},Wt=L("path",{d:"M88,64A24,24,0,1,1,64,40,24,24,0,0,1,88,64ZM192,40a24,24,0,1,0,24,24A24,24,0,0,0,192,40Z",opacity:"0.2"},null,-1),Kt=L("path",{d:"M224,64a32,32,0,1,0-40,31v17a8,8,0,0,1-8,8H80a8,8,0,0,1-8-8V95a32,32,0,1,0-16,0v17a24,24,0,0,0,24,24h40v25a32,32,0,1,0,16,0V136h40a24,24,0,0,0,24-24V95A32.06,32.06,0,0,0,224,64ZM48,64A16,16,0,1,1,64,80,16,16,0,0,1,48,64Zm96,128a16,16,0,1,1-16-16A16,16,0,0,1,144,192ZM192,80a16,16,0,1,1,16-16A16,16,0,0,1,192,80Z"},null,-1),Gt=[Wt,Kt],Jt={key:2},Qt=L("path",{d:"M224,64a32,32,0,1,0-40,31v17a8,8,0,0,1-8,8H80a8,8,0,0,1-8-8V95a32,32,0,1,0-16,0v17a24,24,0,0,0,24,24h40v25a32,32,0,1,0,16,0V136h40a24,24,0,0,0,24-24V95A32.06,32.06,0,0,0,224,64ZM144,192a16,16,0,1,1-16-16A16,16,0,0,1,144,192Z"},null,-1),Xt=[Qt],Yt={key:3},ea=L("path",{d:"M222,64a30,30,0,1,0-36,29.4V112a10,10,0,0,1-10,10H80a10,10,0,0,1-10-10V93.4a30,30,0,1,0-12,0V112a22,22,0,0,0,22,22h42v28.6a30,30,0,1,0,12,0V134h42a22,22,0,0,0,22-22V93.4A30.05,30.05,0,0,0,222,64ZM46,64A18,18,0,1,1,64,82,18,18,0,0,1,46,64ZM146,192a18,18,0,1,1-18-18A18,18,0,0,1,146,192ZM192,82a18,18,0,1,1,18-18A18,18,0,0,1,192,82Z"},null,-1),ta=[ea],aa={key:4},na=L("path",{d:"M224,64a32,32,0,1,0-40,31v17a8,8,0,0,1-8,8H80a8,8,0,0,1-8-8V95a32,32,0,1,0-16,0v17a24,24,0,0,0,24,24h40v25a32,32,0,1,0,16,0V136h40a24,24,0,0,0,24-24V95A32.06,32.06,0,0,0,224,64ZM48,64A16,16,0,1,1,64,80,16,16,0,0,1,48,64Zm96,128a16,16,0,1,1-16-16A16,16,0,0,1,144,192ZM192,80a16,16,0,1,1,16-16A16,16,0,0,1,192,80Z"},null,-1),oa=[na],sa={key:5},ra=L("path",{d:"M220,64a28,28,0,1,0-32,27.71V112a12,12,0,0,1-12,12H80a12,12,0,0,1-12-12V91.71a28,28,0,1,0-8,0V112a20,20,0,0,0,20,20h44v32.29a28,28,0,1,0,8,0V132h44a20,20,0,0,0,20-20V91.71A28,28,0,0,0,220,64ZM44,64A20,20,0,1,1,64,84,20,20,0,0,1,44,64ZM148,192a20,20,0,1,1-20-20A20,20,0,0,1,148,192ZM192,84a20,20,0,1,1,20-20A20,20,0,0,1,192,84Z"},null,-1),ia=[ra],la={name:"PhGitFork"},ca=U({...la,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(s){const t=s,o=V("weight","regular"),n=V("size","1em"),r=V("color","currentColor"),m=V("mirrored",!1),c=x(()=>{var d;return(d=t.weight)!=null?d:o}),p=x(()=>{var d;return(d=t.size)!=null?d:n}),w=x(()=>{var d;return(d=t.color)!=null?d:r}),y=x(()=>t.mirrored!==void 0?t.mirrored?"scale(-1, 1)":void 0:m?"scale(-1, 1)":void 0);return(d,A)=>(l(),C("svg",se({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:p.value,height:p.value,fill:w.value,transform:y.value},d.$attrs),[oe(d.$slots,"default"),c.value==="bold"?(l(),C("g",Nt,Bt)):c.value==="duotone"?(l(),C("g",Ht,Gt)):c.value==="fill"?(l(),C("g",Jt,Xt)):c.value==="light"?(l(),C("g",Yt,ta)):c.value==="regular"?(l(),C("g",aa,oa)):c.value==="thin"?(l(),C("g",sa,ia)):E("",!0)],16,Ut))}}),ua=["width","height","fill","transform"],da={key:0},ma=L("path",{d:"M144,180a16,16,0,1,1-16-16A16,16,0,0,1,144,180Zm92-52A108,108,0,1,1,128,20,108.12,108.12,0,0,1,236,128Zm-24,0a84,84,0,1,0-84,84A84.09,84.09,0,0,0,212,128ZM128,64c-24.26,0-44,17.94-44,40v4a12,12,0,0,0,24,0v-4c0-8.82,9-16,20-16s20,7.18,20,16-9,16-20,16a12,12,0,0,0-12,12v8a12,12,0,0,0,23.73,2.56C158.31,137.88,172,122.37,172,104,172,81.94,152.26,64,128,64Z"},null,-1),pa=[ma],ga={key:1},ha=L("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"},null,-1),Sa=L("path",{d:"M140,180a12,12,0,1,1-12-12A12,12,0,0,1,140,180ZM128,72c-22.06,0-40,16.15-40,36v4a8,8,0,0,0,16,0v-4c0-11,10.77-20,24-20s24,9,24,20-10.77,20-24,20a8,8,0,0,0-8,8v8a8,8,0,0,0,16,0v-.72c18.24-3.35,32-17.9,32-35.28C168,88.15,150.06,72,128,72Zm104,56A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"},null,-1),ba=[ha,Sa],fa={key:2},ya=L("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,168a12,12,0,1,1,12-12A12,12,0,0,1,128,192Zm8-48.72V144a8,8,0,0,1-16,0v-8a8,8,0,0,1,8-8c13.23,0,24-9,24-20s-10.77-20-24-20-24,9-24,20v4a8,8,0,0,1-16,0v-4c0-19.85,17.94-36,40-36s40,16.15,40,36C168,125.38,154.24,139.93,136,143.28Z"},null,-1),Aa=[ya],va={key:3},Ca=L("path",{d:"M138,180a10,10,0,1,1-10-10A10,10,0,0,1,138,180ZM128,74c-21,0-38,15.25-38,34v4a6,6,0,0,0,12,0v-4c0-12.13,11.66-22,26-22s26,9.87,26,22-11.66,22-26,22a6,6,0,0,0-6,6v8a6,6,0,0,0,12,0v-2.42c18.11-2.58,32-16.66,32-33.58C166,89.25,149,74,128,74Zm102,54A102,102,0,1,1,128,26,102.12,102.12,0,0,1,230,128Zm-12,0a90,90,0,1,0-90,90A90.1,90.1,0,0,0,218,128Z"},null,-1),_a=[Ca],Ra={key:4},wa=L("path",{d:"M140,180a12,12,0,1,1-12-12A12,12,0,0,1,140,180ZM128,72c-22.06,0-40,16.15-40,36v4a8,8,0,0,0,16,0v-4c0-11,10.77-20,24-20s24,9,24,20-10.77,20-24,20a8,8,0,0,0-8,8v8a8,8,0,0,0,16,0v-.72c18.24-3.35,32-17.9,32-35.28C168,88.15,150.06,72,128,72Zm104,56A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"},null,-1),La=[wa],ka={key:5},Pa=L("path",{d:"M136,180a8,8,0,1,1-8-8A8,8,0,0,1,136,180ZM128,76c-19.85,0-36,14.36-36,32v4a4,4,0,0,0,8,0v-4c0-13.23,12.56-24,28-24s28,10.77,28,24-12.56,24-28,24a4,4,0,0,0-4,4v8a4,4,0,0,0,8,0v-4.2c18-1.77,32-15.36,32-31.8C164,90.36,147.85,76,128,76Zm100,52A100,100,0,1,1,128,28,100.11,100.11,0,0,1,228,128Zm-8,0a92,92,0,1,0-92,92A92.1,92.1,0,0,0,220,128Z"},null,-1),Ea=[Pa],Ia={name:"PhQuestion"},Oa=U({...Ia,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(s){const t=s,o=V("weight","regular"),n=V("size","1em"),r=V("color","currentColor"),m=V("mirrored",!1),c=x(()=>{var d;return(d=t.weight)!=null?d:o}),p=x(()=>{var d;return(d=t.size)!=null?d:n}),w=x(()=>{var d;return(d=t.color)!=null?d:r}),y=x(()=>t.mirrored!==void 0?t.mirrored?"scale(-1, 1)":void 0:m?"scale(-1, 1)":void 0);return(d,A)=>(l(),C("svg",se({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:p.value,height:p.value,fill:w.value,transform:y.value},d.$attrs),[oe(d.$slots,"default"),c.value==="bold"?(l(),C("g",da,pa)):c.value==="duotone"?(l(),C("g",ga,ba)):c.value==="fill"?(l(),C("g",fa,Aa)):c.value==="light"?(l(),C("g",va,_a)):c.value==="regular"?(l(),C("g",Ra,La)):c.value==="thin"?(l(),C("g",ka,Ea)):E("",!0)],16,ua))}});function he(s){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable}))),n.forEach(function(r){xa(s,r,o[r])})}return s}function xa(s,t,o){return t in s?Object.defineProperty(s,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[t]=o,s}var ie=function(t,o){var n=he({},t,o.attrs);return u(re,he({},n,{icon:Ue}),null)};ie.displayName="EyeInvisibleOutlined";ie.inheritAttrs=!1;const $a=ie;function Se(s){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable}))),n.forEach(function(r){Ma(s,r,o[r])})}return s}function Ma(s,t,o){return t in s?Object.defineProperty(s,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[t]=o,s}var le=function(t,o){var n=Se({},t,o.attrs);return u(re,Se({},n,{icon:bt}),null)};le.displayName="PlaySquareFilled";le.inheritAttrs=!1;const ja=le;function be(s){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable}))),n.forEach(function(r){Da(s,r,o[r])})}return s}function Da(s,t,o){return t in s?Object.defineProperty(s,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[t]=o,s}var ce=function(t,o){var n=be({},t,o.attrs);return u(re,be({},n,{icon:yt}),null)};ce.displayName="SyncOutlined";ce.inheritAttrs=!1;const Ee=ce,Ta=e.boolean(),za=e.boolean(),Za=e.boolean(),Fa=e.boolean();e.object({PROJECT_LIVE:Ta.optional(),ALLOW_RELEASE:za.optional(),CONNECTORS_CONSOLE:Za.optional(),DUPLICATE_PROJECTS:Fa.optional()});const Va=e.string(),Ua=e.string(),Na=e.string(),qa=e.string(),Ba=e.string();e.object({plan:Va.optional(),expires:Ua.optional(),message:Na.optional(),messageLink:qa.optional(),messageCTA:Ba.optional()});const Ha=e.string(),Ie=e.string(),ue=e.string(),Wa=e.string(),Ka=e.string(),Ga=e.object({id:Ha,name:Ie,description:ue.optional(),projectId:Wa,createdAt:Ka}),Ja=e.string(),Qa=e.string(),Xa=e.string(),Ya=e.string(),en=e.string().regex(new RegExp("^[0-9]+m$")),tn=e.string().regex(new RegExp("^[0-9]+m$")),an=e.string().regex(new RegExp("^[0-9]+Mi$")),nn=e.string().regex(new RegExp("^[0-9]+Mi$")),on=e.string().regex(new RegExp("^[0-9]+$")),sn=e.string().regex(new RegExp("^[0-9]+$")),rn=e.enum(["shared","clickbus","test"]),ln=e.object({requestsCPU:en.optional(),limitsCPU:tn.optional(),requestsMemory:an.optional(),limitsMemory:nn.optional(),minReplicas:on.optional(),timeoutSeconds:sn.optional(),workerType:rn.optional()});e.object({id:Ja,name:Qa,subdomain:Xa,organizationId:Ya,deploymentResources:ln.optional()});const cn=e.string(),un=e.string(),Oe=e.array(un),xe=e.string(),dn=e.string();e.object({id:cn,emailPatterns:Oe,projectId:xe,createdAt:dn});const mn=e.string().regex(new RegExp("^[0-9]+m$")),pn=e.string().regex(new RegExp("^[0-9]+m$")),gn=e.string().regex(new RegExp("^[0-9]+Mi$")),hn=e.string().regex(new RegExp("^[0-9]+Mi$")),Sn=e.string().regex(new RegExp("^[0-9]+$")),bn=e.string().regex(new RegExp("^[0-9]+$")),fn=e.enum(["shared","clickbus","test"]);e.object({requestsCPU:mn.optional(),limitsCPU:pn.optional(),requestsMemory:gn.optional(),limitsMemory:hn.optional(),minReplicas:Sn.optional(),timeoutSeconds:bn.optional(),workerType:fn.optional()});const yn=e.string(),te=e.string().email(),An=e.string(),de=e.array(An),vn=e.string(),Cn=e.string(),_n=e.object({id:yn,email:te,roles:de,projectId:vn,createdAt:Cn}),$e=e.string(),Me=e.string(),Rn=e.boolean(),wn=e.boolean(),Ln=e.boolean(),kn=e.boolean(),je=e.object({PROJECT_LIVE:Rn,ALLOW_RELEASE:wn,CONNECTORS_CONSOLE:Ln,DUPLICATE_PROJECTS:kn}),Pn=e.string(),En=e.string(),In=e.string(),On=e.string(),xn=e.string(),De=e.object({plan:Pn.optional(),expires:En.optional(),message:In.optional(),messageLink:On.optional(),messageCTA:xn.optional()}),$n=e.string().regex(new RegExp("^[0-9]+m$")),Mn=e.string().regex(new RegExp("^[0-9]+m$")),jn=e.string().regex(new RegExp("^[0-9]+Mi$")),Dn=e.string().regex(new RegExp("^[0-9]+Mi$")),Tn=e.string().regex(new RegExp("^[0-9]+$")),zn=e.string().regex(new RegExp("^[0-9]+$")),Zn=e.enum(["shared","clickbus","test"]),Fn=e.object({requestsCPU:$n.optional(),limitsCPU:Mn.optional(),requestsMemory:jn.optional(),limitsMemory:Dn.optional(),minReplicas:Tn.optional(),timeoutSeconds:zn.optional(),workerType:Zn.optional()}),Vn=e.string(),Un=e.array(Vn),Nn=e.object({whitelistPatterns:Un.optional()});e.object({id:$e,name:Me,featureFlags:je,billingMetadata:De,deploymentResources:Fn.optional(),membershipsMetadata:Nn.optional()});const qn=e.string(),Bn=e.array(qn);e.object({whitelistPatterns:Bn.optional()});const Hn=$e,Wn=Me,Kn=je,Gn=De;e.object({id:Hn,name:Wn,featureFlags:Kn,billingMetadata:Gn});const Jn=ue;e.object({description:Jn});const Qn=e.number(),Xn=e.number();e.object({offset:Qn.optional(),limit:Xn.optional()});const Yn=Ga;e.array(Yn);const eo=Ie,to=ue;e.object({name:eo,description:to.optional()});const ao=te,no=de;e.object({email:ao.optional(),roles:no.optional()});const oo=e.number(),so=e.number();e.object({offset:oo.optional(),limit:so.optional()});const ro=_n;e.array(ro);const io=te,lo=de;e.object({email:io,roles:lo});const co=Oe;e.object({emailPatterns:co});const uo=xe;e.object({projectId:uo});const mo=e.boolean();e.object({shouldBeOnboarded:mo.optional()});const po=e.string(),go=e.string(),ho=e.string(),So=e.string();e.object({name:po.optional(),companyName:go.optional(),source:ho.optional(),authorEmail:So.optional()});const bo=e.string(),fo=e.record(e.any()),yo=e.string(),Ao=e.object({key:bo,value:fo,type:yo}),vo=Ao,Co=e.array(vo),_o=e.string(),Ro=e.enum(["text","image","table","progress-bar"]),wo=e.object({name:_o,type:Ro}),Lo=e.string(),ko=e.string(),Po=e.record(e.any()),Te=e.enum(["waiting","running","processing","finished","failed","abandoned"]),Eo=["waiting","running","processing","finished","failed","abandoned"],Io=e.string(),Oo=e.string(),xo=e.string(),$o=e.string();e.object({id:Lo,stage:ko,data:Po,status:Te,created_at:Io,updated_at:Oo,parent_id:xo.optional(),execution_id:$o.optional()});const Mo=e.string(),jo=e.string(),Do=e.string(),To=e.string(),zo=Te,Zo=Co,Fo=e.string(),Vo=e.object({id:Mo,created_at:jo,updated_at:Do.optional(),assignee:To.optional(),status:zo,content:Zo,stage:Fo.optional()}),Uo=Vo,ze=e.array(Uo),No=e.string(),qo=e.enum(["form","hook","job","script","iterator","condition"]),Bo=e.string(),Ho=e.string(),Wo=e.boolean(),Ze=e.object({id:No,type:qo,title:Bo,path:Ho.optional(),can_be_started:Wo}),Ko=Ze,Go=ze,Jo=e.number(),Qo=e.boolean(),Xo=e.object({selected_stage:Ko,stage_run_cards:Go,total_count:Jo,loading:Qo.optional()}),Yo=Xo,es=e.array(Yo),ts=es;e.object({columns:ts});const as=ze,ns=e.string(),os=e.array(ns),ss=e.number();e.object({stage_run_cards:as,not_found_stages:os,total_count:ss});const rs=wo;e.array(rs);const is=Ze,Mr=e.array(is),ls=e.string(),cs=e.string(),us=e.literal("bug"),ds=e.string(),ms=e.string(),ps=e.string(),gs=e.object({name:ms,label:ps}),hs=gs,Ss=e.array(hs),bs=e.object({label:ds,fixes:Ss}),fs=bs,ys=e.array(fs),As=e.object({name:ls,label:cs,type:us,issues:ys}),vs=e.string(),Cs=e.string(),_s=e.object({key:vs,value:Cs}),Rs=e.boolean();e.object({success:Rs});const ws=As;e.array(ws);const Ls=_s;e.array(Ls);const ks=te;e.object({email:ks});const Ps=e.enum(["ALLOWED","UNAUTHORIZED","FORBIDEN"]);e.object({status:Ps});class jr{constructor(t=Ae){this.fetch=t}async getStages(){return(await this.fetch("/_editor/api/kanban/stages")).json()}async getData(t){return(await this.fetch("/_editor/api/kanban",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})).json()}async getPath(t){return(await this.fetch(`/_editor/api/kanban/path?n=${t}`)).json()}async getLogs(t){return(await this.fetch(`/_editor/api/kanban/logs/${t}`)).json()}async startJob(t){await this.fetch(`/_editor/api/kanban/jobs/${t}/start`,{method:"POST"})}}class Dr{constructor(t,o=Ae){this.authProvider=t,this.fetch=o}get headers(){return{"Content-Type":"application/json",...this.authProvider.authHeaders()}}async getStages(){return(await this.fetch("/_kanban/stages",{headers:this.headers})).json()}async getData(t){return(await this.fetch("/_kanban/",{method:"POST",body:JSON.stringify(t),headers:this.headers})).json()}async getPath(t){return(await this.fetch(`/_kanban/path?n=${t}`,{headers:this.headers})).json()}async getLogs(t){return(await this.fetch(`/_kanban/logs/${t}`,{headers:this.headers})).json()}async startJob(t){await this.fetch(`/_kanban/jobs/${t}/start`,{method:"POST",headers:this.headers})}}function me(s){switch(s.status){case"waiting":return{color:"blue",text:"Waiting"};case"running":case"processing":return{color:"processing",text:"Running"};case"finished":return{color:"success",text:"Success"};case"failed":return{color:"error",text:"Failed"};case"abandoned":return{color:"warning",text:"Abandoned"}}}const Es=10,Is=[...Eo].filter(s=>s!=="processing"),Fe=()=>{const s=M([]),t=M({}),o=M(""),n=M([]),r=M(Es),m=M(0),c=()=>({status:s.value,data:t.value,search:o.value,stage:n.value});return{stageIds:n,filterStatus:s,filterData:t,filterSearch:o,limit:r,offset:m,filterFactory:c,labelOption:y=>me({status:y}).text,requestDataFactory:()=>({filter:c(),limit:r.value,offset:m.value})}},Os=3,xs=({kanbanStagesStorage:s,kanbanRepository:t})=>{const o=M([]),n=M([]),r=x(()=>o.value.filter(A=>!n.value.map(g=>g.stage.id).includes(A.id))),m=async()=>{n.value=[]},c=A=>{n.value=n.value.filter(g=>g.stage.id!==A),s.set(n.value.map(g=>g.stage).filter(g=>g.id!==A))},p=async(A,g)=>{if(A)n.value=[...n.value.slice(0,g),{stage:A,limit:H,offset:0},...n.value.slice(g+1)];else{const _=n.value[g].stage;return n.value=[...n.value.slice(0,g),...n.value.slice(g+1)],_}return s.set(n.value.map(_=>_.stage)),A},w=async A=>{const g=n.value[A.moved.oldIndex];p(null,A.moved.oldIndex),n.value=[...n.value.slice(0,A.moved.newIndex),g,...n.value.slice(A.moved.newIndex)],s.set(n.value.map(_=>_.stage))},y=A=>{n.value=A.reduce((g,_)=>{const T=o.value.find(Z=>Z.id===_);return T&&g.push({stage:T,limit:H,offset:0}),g},[])};return{setup:async()=>{var g;o.value=await t.getStages();const A=(g=s.get())!=null?g:[];if(A.length===0){const _=await t.getPath(Os);y(_)}else n.value=A.map(_=>({stage:_,limit:H,offset:0}))},allStages:o,selectedStages:n,nonSelectedStages:r,clearSelection:m,unselect:c,setStage:p,reorderStages:w,initSelection:y}},H=10,$s=1e3,Ms=({kanbanRepository:s,kanbanStagesStorage:t,router:o})=>{const n=Fe(),r=xs({kanbanStagesStorage:t,kanbanRepository:s}),m=M({columns:[],next_stage_options:[]}),c=async()=>{try{const v=r.selectedStages.value,R=v.map($=>(n.stageIds.value=[$.stage.id],s.getData(n.requestDataFactory()))),b={columns:[]},h=new Set,S=(await Promise.all(R)).map(($,z)=>({...$,stage:v[z].stage})),I=r.selectedStages.value;for(const $ of I){const z=S.find(q=>q.stage.id===$.stage.id);if(!z){b.columns.push({stage_run_cards:[],selected_stage:$.stage,total_count:0,loading:!1});continue}b.columns.push({stage_run_cards:z.stage_run_cards,selected_stage:$.stage,total_count:z.total_count,loading:!1});for(const q of z.not_found_stages)h.add(q)}const O=Array.from(h);for(const $ of O)r.unselect($);return{columns:b.columns,next_stage_options:r.nonSelectedStages.value}}catch{return r.clearSelection(),{columns:[],next_stage_options:[]}}};function p(v){const R=v.selected_stage.id,b=r.selectedStages.value.find(h=>h.stage.id===R);return b!=null&&b.limit?b.limit<v.total_count:!1}async function w(v){var b;const R=r.selectedStages.value.find(h=>h.stage.id===v.selected_stage.id);R&&(R.limit=((b=R.limit)!=null?b:0)+H,m.value=await c())}async function y(v){const R=r.selectedStages.value.find(b=>b.stage.id===v);R&&R.limit&&R.limit>H&&(R.limit-=H,m.value=await c())}async function d(v,R){const b=await r.setStage(v,R);if(v===null){r.unselect(b.id),m.value.columns=m.value.columns.filter(I=>I.selected_stage.id!==b.id);const h=r.allStages.value,k=h.findIndex(I=>I.id===b.id);let S=0;for(const I of m.value.next_stage_options)h.findIndex($=>$.id===I.id)<k&&S++;m.value.next_stage_options=[...m.value.next_stage_options.slice(0,S),b,...m.value.next_stage_options.slice(S)]}}async function A(v){await r.setStage(v,r.selectedStages.value.length),v&&(m.value.columns.push({stage_run_cards:[],selected_stage:v,total_count:0,loading:!0}),n.stageIds.value=[v.id],m.value.next_stage_options=r.nonSelectedStages.value)}async function g(v){await r.reorderStages(v)}let _=null;return{kanbanState:m,increasePagination:w,hasPagination:p,seeLess:y,setStage:d,addStage:A,cardActionHandler:async(v,R)=>{const b=v.selected_stage,h=R.id;if(b.type==="script"){const k=await at.get(b.id);if(!k)return;await k.run(h)}if(b.type==="form"){const k=o.resolve({path:`/${b.path}`,query:h?{[nt]:h}:{}});window.open(k.href,h)}},setup:async()=>{await r.setup(),m.value={columns:r.selectedStages.value.map(R=>({stage_run_cards:[],selected_stage:R.stage,total_count:0,loading:!0})),next_stage_options:r.nonSelectedStages.value};let v=!1;m.value=await c(),_=setInterval(async()=>{v||(v=!0,m.value=await c(),v=!1)},$s)},tearDown:()=>{_&&clearInterval(_)},reorderStages:g,filterController:n}},ne=U({__name:"StageRunData",props:{data:{}},setup(s){return(t,o)=>(l(),f(a(N),{direction:"vertical",style:{overflow:"hidden"}},{default:i(()=>[(l(!0),C(K,null,W(t.data,n=>(l(),C("div",{key:n.key},[u(a(B),{strong:""},{default:i(()=>[P(D(n.key),1)]),_:2},1024),u(a(Ne),{"tree-data":a(ot)(n.value),selectable:!1},null,8,["tree-data"])]))),128))]),_:1}))}}),js={key:0},Ds={key:1,class:"terminal"},Ts=U({__name:"ExecutionInspector",props:{logs:{}},setup(s){return(t,o)=>t.logs.length===0?(l(),C("span",js)):(l(),C("div",Ds,[u(a(j),{vertical:""},{default:i(()=>[(l(!0),C(K,null,W(t.logs,n=>(l(),C("pre",{key:n.executionId,class:"log-text"},D(n.payload.text),1))),128))]),_:1})]))}});const zs=Q(Ts,[["__scopeId","data-v-4e71a195"]]),Zs=s=>(Be("data-v-b7151dd7"),s=s(),He(),s),Fs={key:1},Vs={key:1},Us=Zs(()=>L("span",null,"[Deleted Stage]",-1)),Ns=["onClick"],qs=U({__name:"StageRunInspector",props:{stageRun:{},kanbanRepository:{},stageRunRepository:{}},emits:["close"],setup(s,{emit:t}){const o=s;function n(p){return Object.entries(p).map(([w,y])=>({key:w,value:y,type:typeof y}))}const{result:r,loading:m}=we(()=>{var p;return o.kanbanRepository.getLogs((p=o.stageRun)==null?void 0:p.id)}),c=(p,w)=>{var y;p.stopPropagation(),(y=o.stageRunRepository)==null||y.fork(w),t("close")};return(p,w)=>(l(),f(a(ut),{open:"",title:"Thread details",size:"large",onClose:w[0]||(w[0]=y=>t("close"))},{extra:i(()=>[u(a(ge),null,{default:i(()=>[u(a(J),{style:{"font-weight":"600"}},{default:i(()=>{var y;return[P(D(a(me)({status:(y=p.stageRun)==null?void 0:y.status}).text),1)]}),_:1}),P(" "+D(a(st)(new Date(p.stageRun.created_at),{addSuffix:!0})),1)]),_:1})]),default:i(()=>{var y,d,A;return[(y=p.stageRun)!=null&&y.assignee?(l(),f(a(ge),{key:0},{default:i(()=>{var g;return[P(" Assignee: "+D((g=p.stageRun)==null?void 0:g.assignee),1)]}),_:1})):E("",!0),((d=p.stageRun)==null?void 0:d.content)&&((A=p.stageRun)==null?void 0:A.content.length)>0?(l(),C("div",Fs,[u(a(X),{level:4},{default:i(()=>[P("Current data")]),_:1}),u(ne,{data:p.stageRun.content},null,8,["data"])])):E("",!0),u(a(X),{level:4,style:{"margin-bottom":"30px"}},{default:i(()=>[P(" Timeline ")]),_:1}),a(m)?(l(),f(a(qe),{key:2})):a(r)?(l(),f(a(rt),{key:3},{default:i(()=>[(l(!0),C(K,null,W(a(r),({stage:g,stage_run:_,logs:T})=>(l(),f(a(it),{key:_.id},{default:i(()=>[u(a(ke),{ghost:"","expand-icon-position":"end"},{default:i(()=>[u(a(Le),{class:"panel"},ve({header:i(()=>[g?(l(),f(a(j),{key:0,align:"center",gap:15},{default:i(()=>[(l(),f(Y(a(ee)(g.type)))),T.length?(l(),C("span",Vs,D(g.title),1)):(l(),f(a(ae),{key:0,placement:"right",title:"No logs"},{default:i(()=>[P(D(g.title),1)]),_:2},1024))]),_:2},1024)):(l(),f(a(j),{key:1,align:"center",gap:15},{default:i(()=>[u(a(Oa)),Us]),_:1}))]),default:i(()=>[n(_.data).length||T.length?(l(),f(a(j),{key:0,vertical:""},{default:i(()=>[n(_.data).length?(l(),f(a(j),{key:0,gap:0,vertical:""},{default:i(()=>[u(a(X),{level:5},{default:i(()=>[P(" Output data ")]),_:1}),u(ne,{data:n(_.data)},null,8,["data"])]),_:2},1024)):E("",!0),T.length?(l(),f(a(j),{key:1,vertical:"",gap:0},{default:i(()=>[u(a(ct)),u(a(X),{level:5},{default:i(()=>[P(" Logs ")]),_:1}),u(zs,{logs:T},null,8,["logs"])]),_:2},1024)):E("",!0)]),_:2},1024)):(l(),f(a(Ce),{key:1,description:"No logs"}))]),_:2},[p.stageRunRepository&&g?{name:"extra",fn:i(()=>[L("span",{onClick:Z=>c(Z,_.id)},[u(a(j),{gap:"small"},{default:i(()=>[u(a(ca),{size:"22"}),u(a(lt),null,{default:i(()=>[P("Fork")]),_:1})]),_:1})],8,Ns)]),key:"0"}:void 0]),1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):E("",!0)]}),_:1}))}});const Bs=Q(qs,[["__scopeId","data-v-b7151dd7"]]),fe="_thread_title",Hs=U({__name:"Card",props:{stage:{},card:{}},emits:["inspect","action"],setup(s){const t=s,o=x(()=>{const c=t.card.content.find(w=>w.key===fe);return c?c.value:new Date(String(t.card.updated_at)).toLocaleString()}),n=x(()=>t.card.content.filter(c=>c.key!==fe)),r=x(()=>me({status:t.card.status}).text),m=x(()=>We(new Date(String(t.card.updated_at))));return(c,p)=>{var w,y;return l(),f(a(dt),{size:"small",style:{cursor:"pointer"},"head-style":{"border-bottom":((w=c.card.content)==null?void 0:w.length)>0?"":"none"},"body-style":{display:((y=c.card.content)==null?void 0:y.length)>0?"block":"none"},onClick:p[1]||(p[1]=d=>c.$emit("inspect"))},ve({title:i(()=>[u(a(ae),{title:o.value.length>24?o.value:void 0},{default:i(()=>[P(D(o.value),1)]),_:1},8,["title"])]),default:i(()=>[u(a(N),{direction:"vertical",style:{"max-height":"300px",width:"100%",overflow:"hidden"}},{default:i(()=>[u(ne,{data:n.value,disabled:!0},null,8,["data"]),c.card.assignee?(l(),f(a(J),{key:0},{default:i(()=>[P(D(c.card.assignee),1)]),_:1})):E("",!0)]),_:1}),u(a(j),{gap:"10",style:{"margin-top":"8px"}},{default:i(()=>[u(a(ae),null,{title:i(()=>[P(D(c.card.updated_at),1)]),default:i(()=>[u(a(B),{type:"secondary",style:{"font-size":"12px",display:"flex","align-items":"center",gap:"4px"}},{default:i(()=>[u(a(Vt),{size:14}),P(" Updated at: "+D(m.value),1)]),_:1})]),_:1})]),_:1})]),extra:i(()=>[u(a(J),null,{default:i(()=>[P(D(r.value)+" ",1),r.value==="Running"?(l(),f(a(Ee),{key:0,spin:!0,style:{"margin-left":"4px"}})):E("",!0)]),_:1})]),_:2},[c.card.status==="waiting"?{name:"actions",fn:i(()=>[u(a(G),{onClick:p[0]||(p[0]=d=>c.$emit("action"))},{default:i(()=>[u(a(ja)),P(" Continue this thread ")]),_:1})]),key:"0"}:void 0]),1032,["head-style","body-style"])}}});class Ws{constructor(t,o,n){this.router=t,this.column=o,this.kanbanRepository=n}get stage(){return this.column.selected_stage}get canStart(){return this.stage.can_be_started}get launchLink(){return!this.stage.can_be_started||this.stage.type!=="form"||!this.stage.path?null:this.router.resolve({path:`/${this.stage.path}`}).href}click(){if(this.launchLink)return window.open(this.launchLink,"_blank");if(this.stage.type==="job")return this.kanbanRepository.startJob(this.stage.id).catch(console.error)}}const Ks=U({__name:"Column",props:{router:{},hasPagination:{type:Boolean},column:{},kanbanRepository:{}},emits:["increasePagination","cardAction","stageUpdate","cardInspection"],setup(s,{emit:t}){const o=s,n=x(()=>new Ws(o.router,o.column,o.kanbanRepository));return(r,m)=>(l(),f(a(N),{direction:"vertical",class:"stage-column"},{default:i(()=>[u(a(N),{direction:"horizontal",style:{width:"100%","justify-content":"space-between"}},{default:i(()=>[u(a(j),{gap:"8",style:{"max-width":"200px","padding-left":"10px"}},{default:i(()=>[u(a(j),null,{default:i(()=>[(l(),f(Y(a(ee)(r.column.selected_stage.type)),{size:"20"}))]),_:1}),u(a(B),{ellipsis:"",content:r.column.selected_stage.title},null,8,["content"])]),_:1}),u(a(N),null,{default:i(()=>[r.column.loading?E("",!0):(l(),f(a(B),{key:0,type:"secondary",style:{"font-size":"small","margin-right":"2px"}},{default:i(()=>[P(D(r.column.total_count),1)]),_:1})),r.column.loading?(l(),f(a(Pe),{key:1})):E("",!0),u(a(G),{type:"text",style:{padding:"4px"},onClick:m[0]||(m[0]=c=>t("stageUpdate",null))},{default:i(()=>[u(a(B),{type:"secondary",style:{"font-size":"small","margin-right":"2px"}},{default:i(()=>[u(a($a))]),_:1})]),_:1})]),_:1})]),_:1}),u(a(N),{direction:"vertical",style:{width:"100%"}},{default:i(()=>[u(a(j),{justify:"center",align:"center"},{default:i(()=>[r.column.loading?(l(),f(a(mt),{key:0,active:"",block:"",size:"large",class:"skeleton"})):E("",!0)]),_:1}),!r.column.loading&&r.column.stage_run_cards.length===0?(l(),f(a(Ce),{key:0})):E("",!0),(l(!0),C(K,null,W(r.column.stage_run_cards,c=>(l(),f(Hs,{key:c.id,stage:r.column.selected_stage,card:c,onInspect:p=>t("cardInspection",c),onAction:p=>t("cardAction",c)},null,8,["stage","card","onInspect","onAction"]))),128)),r.hasPagination?(l(),f(a(G),{key:1,style:{width:"100%"},onClick:m[1]||(m[1]=c=>t("increasePagination"))},{default:i(()=>[P("See more")]),_:1})):E("",!0),n.value.canStart?(l(),f(a(G),{key:2,style:{width:"100%"},onClick:m[2]||(m[2]=()=>n.value.click())},{default:i(()=>[P(" Start new thread ")]),_:1})):E("",!0)]),_:1})]),_:1}))}});const Gs=Q(Ks,[["__scopeId","data-v-0fd81111"]]),Js=U({__name:"EmptyColumn",props:{stages:{}},emits:["stageUpdate"],setup(s,{emit:t}){const o=n=>{t("stageUpdate",n)};return(n,r)=>(l(),f(a(N),{direction:"vertical"},{default:i(()=>[(l(!0),C(K,null,W(n.stages,m=>(l(),f(a(J),{key:m.id,class:"tag",onClick:c=>o(m)},{default:i(()=>[u(a(j),{gap:"8",style:{"max-width":"200px","justify-content":"center","align-items":"center"}},{default:i(()=>[u(a(j),null,{default:i(()=>[(l(),f(Y(a(ee)(m.type)),{size:"20"}))]),_:2},1024),u(a(B),{ellipsis:"",content:m.title},null,8,["content"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1}))}});const Qs=Q(Js,[["__scopeId","data-v-08e39e62"]]);function Xs(){const s=M({state:"closed"});function t(){s.value={state:"closed"}}function o(){s.value={state:"visualizations"}}function n(m,c){s.value={state:"stage-run",stageRun:c}}const r=x(()=>"stageRun"in s.value?s.value.stageRun:null);return{closeDrawer:t,openVisualizationEditor:o,inspectStageRun:n,drawerState:s,selectedStageRunForDrawer:r}}const Ys={class:"stages-container"},er={class:"stages-content"},tr=U({__name:"Kanban",props:{kanbanStagesStorage:{},kanbanRepository:{},stageRunRepository:{}},setup(s){const t=s,o=Ke(),{closeDrawer:n,inspectStageRun:r,drawerState:m,selectedStageRunForDrawer:c}=Xs(),p=h=>{v.value=h},{kanbanState:w,setStage:y,addStage:d,setup:A,tearDown:g,cardActionHandler:_,increasePagination:T,hasPagination:Z,reorderStages:F,filterController:{filterStatus:v,labelOption:R}}=Ms({kanbanRepository:t.kanbanRepository,kanbanStagesStorage:t.kanbanStagesStorage,router:o}),b=M([]);return Ge(()=>{var h;return(h=w.value)==null?void 0:h.columns},h=>{h!==void 0&&(b.value=h)}),_e(A),Re(g),(h,k)=>(l(),C("div",null,[u(a(j),{vertical:"",style:{height:"100%"}},{default:i(()=>[u(a(ke),{ghost:""},{default:i(()=>[u(a(Le),{header:"Filters"},{default:i(()=>[u(a(pt),null,{default:i(()=>[u(a(gt),{label:"Status",colon:!1},{default:i(()=>[u(a(Je),{value:a(v),style:{width:"325px"},mode:"multiple","onUpdate:value":k[0]||(k[0]=S=>p(S))},{default:i(()=>[(l(!0),C(K,null,W(a(Is),S=>(l(),f(a(Qe),{key:S,value:S},{default:i(()=>[P(D(a(R)(S)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),L("div",Ys,[L("div",er,[u(a(N),{align:"start"},{default:i(()=>[u(a(tt),{modelValue:b.value,"onUpdate:modelValue":k[1]||(k[1]=S=>b.value=S),class:"draggable","item-key":S=>S.selected_stage.id,"ghost-class":"ghost",onStart:a(g),onEnd:a(A),onChange:a(F)},{item:i(({element:S,index:I})=>[(l(),f(a(Gs),{key:S.selected_stage.id,column:S,router:a(o),"has-pagination":a(Z)(S),"kanban-repository":t.kanbanRepository,class:"stages-content-column",onIncreasePagination:O=>a(T)(S),onCardInspection:O=>a(r)(S,O),onCardAction:O=>a(_)(S,O),onStageUpdate:O=>a(y)(O,I)},null,8,["column","router","has-pagination","kanban-repository","onIncreasePagination","onCardInspection","onCardAction","onStageUpdate"]))]),_:1},8,["modelValue","item-key","onStart","onEnd","onChange"]),u(a(Qs),{stages:a(w).next_stage_options||[],onStageUpdate:k[2]||(k[2]=S=>a(d)(S))},null,8,["stages"])]),_:1})])])]),_:1}),a(m).state==="stage-run"&&a(c)?(l(),f(a(Bs),{key:0,"kanban-repository":t.kanbanRepository,"stage-run":a(c),"stage-run-repository":t.stageRunRepository,onClose:a(n)},null,8,["kanban-repository","stage-run","stage-run-repository","onClose"])):E("",!0)]))}});const Tr=Q(tr,[["__scopeId","data-v-b0d07d30"]]),ar=2e3,ye=[{title:"Thread",dataIndex:"thread"},{title:"Stage",dataIndex:"stage"},{title:"Status",dataIndex:"status"},{title:"Updated at",dataIndex:"updated_at"}],nr=({kanbanRepository:s})=>{const t=Fe(),o=M(0),n=M(1),r=M(10),m=async()=>{var R,b;const d=await s.getStages(),A=await s.getData({filter:{},limit:1e3,offset:0}),g=(R=A.stage_run_cards)==null?void 0:R.map(h=>h.content.map(k=>k.key)).flat(),_=Array.from(new Set(g)),Z=[...ye.map(h=>h.title),..._],F=(b=A.stage_run_cards)==null?void 0:b.map(h=>{var S,I;const k=d.find(O=>O.id===h.stage);return[h.id,(S=k==null?void 0:k.title)!=null?S:"",h.status,(I=h.updated_at)!=null?I:"",..._.map(O=>{const $=h.content.find(z=>z.key===O);return $?JSON.stringify($.value):""})]}),v=new Date;return{columns:Z,rows:F!=null?F:[],fileName:`therads-${v.toISOString()}`}},c=we(async()=>{var d,A,g,_;try{const T=await s.getStages();t.limit.value=r.value*n.value,t.offset.value=(n.value-1)*r.value;const Z=t.requestDataFactory(),F=await s.getData(Z);o.value=F.total_count;const v=(A=(d=F.stage_run_cards)==null?void 0:d.map(S=>S.content.map(I=>I.key)).flat())!=null?A:[],R=Array.from(new Set(v)),b=(_=(g=F.stage_run_cards)==null?void 0:g.reduce((S,I)=>{const O=T.find(z=>z.id===I.stage);let $={};for(const z of R){const q=I.content.find(Ve=>Ve.key===z);$={...$,[z]:q?q.value:null,status:I.status,thread:I.id,updated_at:I.updated_at,stage:O==null?void 0:O.title}}return S==null||S.push({type:O==null?void 0:O.type,...$}),S},[]))!=null?_:[],h=[];for(const S of ye)h.push({title:S.title,dataIndex:S.dataIndex});const k=[];for(const S of R)k.push({title:S,dataIndex:S.toLowerCase()});return h.push({title:"Data",children:k}),{tableColumns:h,tableRows:b}}catch{return{tableColumns:[],tableRows:[]}}});let p=null;return{setup:async()=>{c.refetch(),p=setInterval(()=>{c.refetch()},ar)},tearDown:()=>{p&&clearInterval(p)},tableAsyncComputed:c,totalCount:o,current:n,pageSize:r,filterController:t,getDataAsCsv:m}},or=s=>{let t=s.columns.join(",")+`
`;s.rows.forEach(n=>{t+=n.join(","),t+=`
`});const o=document.createElement("a");o.href="data:text/csv;charset=utf-8,"+encodeURIComponent(t),o.target="_blank",o.download=`${s.fileName}.csv`,o.click()},sr={style:{"text-align":"center",margin:"0"}},rr=L("div",{style:{height:"50px"}},null,-1),zr=U({__name:"TableView",props:{kanbanRepository:{}},setup(s){const t=s,o=M(""),n=M(!1),r=M(!1),m=()=>{n.value=!0,_.filterSearch.value=o.value,c()},c=Xe.exports.debounce(()=>{y.refetch(),n.value=!1},500),{setup:p,tearDown:w,tableAsyncComputed:y,totalCount:d,current:A,pageSize:g,filterController:_,getDataAsCsv:T}=nr({kanbanRepository:t.kanbanRepository}),Z=x(()=>({total:d.value,current:A.value,pageSize:g.value,totalBoundaryShowSizeChanger:10,showSizeChanger:!0,pageSizeOptions:["10","25","50","100"],onChange:async(v,R)=>{A.value=v,g.value=R,await y.refetch()}})),F=async()=>{if(r.value=!0,!y.result.value)return;const v=await T();or(v),r.value=!1};return _e(p),Re(w),(v,R)=>(l(),C("div",null,[u(a(j),{justify:"space-between",style:{"margin-bottom":"12px"}},{default:i(()=>[u(a(Ye),{value:o.value,"onUpdate:value":[R[0]||(R[0]=b=>o.value=b),m],placeholder:"Search data or status",style:{width:"400px"},"allow-clear":""},{prefix:i(()=>[u(a(et))]),suffix:i(()=>[n.value?(l(),f(a(Pe),{key:0})):E("",!0)]),_:1},8,["value"]),u(a(G),{loading:r.value,onClick:F},{default:i(()=>[P("Export to CSV")]),_:1},8,["loading"])]),_:1}),a(y).result.value?(l(),f(a(pe),{key:0,columns:a(y).result.value.tableColumns,"data-source":a(y).result.value.tableRows,loading:n.value,pagination:Z.value,scroll:{x:2400,y:700},bordered:"",size:"middle"},{headerCell:i(({column:b})=>[L("p",sr,D(b.title),1)]),bodyCell:i(({column:b,text:h,record:k})=>[b.dataIndex==="stage"?(l(),f(a(j),{key:0,gap:"small"},{default:i(()=>[(l(),f(Y(a(ee)(k.type)),{size:"20"})),P(" "+D(h),1)]),_:2},1024)):E("",!0),b.dataIndex==="status"?(l(),f(a(j),{key:1,gap:"small"},{default:i(()=>[u(a(J),null,{default:i(()=>[P(D(a(ht)(String(h)))+" ",1),h==="running"?(l(),f(a(Ee),{key:0,spin:!0,style:{"margin-left":"4px"}})):E("",!0)]),_:2},1024)]),_:2},1024)):E("",!0)]),_:1},8,["columns","data-source","loading","pagination"])):(l(),f(a(pe),{key:1,loading:"",columns:[{title:"Thread"},{title:"Stage"},{title:"Status"}],bordered:""},{emptyText:i(()=>[rr]),_:1}))]))}});export{Mr as A,jr as E,Tr as K,Dr as P,zr as _};
//# sourceMappingURL=TableView.vue_vue_type_script_setup_true_lang.3ab66d14.js.map
