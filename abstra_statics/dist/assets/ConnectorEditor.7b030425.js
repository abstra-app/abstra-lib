import{d as g,b as t,er as a,G as D,bu as $,ez as C,e as O,eA as j,f as m,v as T,H as P,eu as _,c as y,eU as V,eH as E,r as H,ey as L,ex as x,a as J,w as l,u as o,b0 as M,ad as Q,cQ as S,cb as W,eD as X}from"./registerWidgets.faf49e08.js";import{b as q}from"./index.72bdd39f.js";import{P as Y}from"./project.9f5cff42.js";import"./gateway.ac5d4b11.js";import{O as Z}from"./organization.8e3358ce.js";import{C as K}from"./connector.603d8f51.js";import{a as ee}from"./asyncComputed.70c50dd2.js";import{_ as te}from"./SaveButton.vue_vue_type_script_setup_true_lang.2808d1a6.js";import{B as ne}from"./BaseLayout.2545ec4d.js";import{T as ae,a as N}from"./index.65170895.js";import{B as se,a as oe,c as re}from"./index.d5a89d63.js";import{F}from"./Form.4d822450.js";import{A as G}from"./FormItem.b7aa4c27.js";import{A as ue}from"./index.fcf76a3b.js";import"./activeRecord.a639288f.js";import"./pubsub.04fb37b2.js";import"./passwordlessManager.c54f57c4.js";import"./storage.0aff2700.js";import"./transButton.4230aac2.js";import"./index.e6dcb33c.js";(function(){try{var i=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new Error().stack;s&&(i._sentryDebugIds=i._sentryDebugIds||{},i._sentryDebugIds[s]="21ddc9d9-4818-4aa3-b7b8-2426b17ecd60",i._sentryDebugIdIdentifier="sentry-dbid-21ddc9d9-4818-4aa3-b7b8-2426b17ecd60")}catch{}})();const ce=["value"],le=g({__name:"TextInput",props:{value:{},schema:{}},emits:["change"],setup(i,{emit:s}){return(r,n)=>(t(),a("input",{value:r.value,onChange:n[0]||(n[0]=e=>s("change",e.target.value))},null,40,ce))}}),ie=["value"],de=g({__name:"NumberInput",props:{value:{},schema:{}},emits:["change"],setup(i,{emit:s}){return(r,n)=>(t(),a("input",{value:r.value,type:"number",onChange:n[0]||(n[0]=e=>s("change",e.target.value))},null,40,ie))}}),pe=["value"],me=g({__name:"BooleanInput",props:{value:{type:Boolean},schema:{}},emits:["change"],setup(i,{emit:s}){return(r,n)=>(t(),a("input",{value:r.value,type:"checkbox",onChange:n[0]||(n[0]=e=>s("change",e.target.checked))},null,40,pe))}}),_e={class:"oi"},ve={class:"oi-item-label"},he=g({__name:"ObjectInput",props:{value:{},schema:{}},emits:["change"],setup(i,{emit:s}){var b;const r=i,n=D({value:(b=r.value)!=null?b:{}}),e=(A,B)=>{n.value[A]=B,k()},k=()=>{s("change",n.value)};return(A,B)=>(t(),a("div",_e,[(t(!0),a($,null,C(r.schema.values,(f,v)=>(t(),a("div",{key:v,class:"oi-item"},[O("div",ve,j(v),1),m(z,{class:"oi-item-input",schema:f,value:n.value[v],onChange:u=>e(v,u)},null,8,["schema","value","onChange"])]))),128))]))}});const ge=T(he,[["__scopeId","data-v-bd751ecc"]]),be={class:"ai"},fe=["onClick"],ye=g({__name:"ArrayInput",props:{value:{},schema:{}},emits:["change"],setup(i,{emit:s}){var B;const n=D({value:(B=i.value)!=null?B:[]}),e=()=>{n.value.push(void 0)},k=f=>{n.value.splice(f,1),A()},b=(f,v)=>{n.value[f]=v,A()},A=()=>{s("change",n.value)};return(f,v)=>(t(),a("div",be,[(t(!0),a($,null,C(n.value,(u,w)=>(t(),a("div",{key:w,class:"ai-item"},[m(z,{schema:f.schema.items,value:u,onChange:p=>b(w,p)},null,8,["schema","value","onChange"]),O("button",{class:"ai-item-remove",onClick:p=>k(w)},"x",8,fe)]))),128)),O("button",{class:"ai-item-add",onClick:v[0]||(v[0]=u=>e())},"Add")]))}});const ke=T(ye,[["__scopeId","data-v-a6c8b9fb"]]),Ie=["value"],$e=["value"],Ce=g({__name:"OptionsInput",props:{value:{},schema:{}},emits:["change"],setup(i,{emit:s}){return(r,n)=>(t(),a("select",{value:r.value,onChange:n[0]||(n[0]=e=>s("change",e.target.value))},[(t(!0),a($,null,C(r.schema.values,e=>(t(),a("option",{key:e,value:e},j(e),9,$e))),128))],40,Ie))}}),je=["value"],Ae=g({__name:"UnionInput",props:{value:{},schema:{}},emits:["change"],setup(i,{emit:s}){return(r,n)=>(t(),a("input",{value:r.value,onChange:n[0]||(n[0]=e=>s("change",e.target.value))},null,40,je))}}),Be=["value"],Re=g({__name:"AnyInput",props:{value:{},schema:{}},emits:["change"],setup(i,{emit:s}){return(r,n)=>(t(),a("input",{value:r.value,onChange:n[0]||(n[0]=e=>s("change",e.target.value))},null,40,Be))}}),we={string:le,number:de,boolean:me,object:ge,array:ke,options:Ce,any:Re,union:Ae},Me={class:"gi"},Oe={key:0,class:"gi-header"},Pe={key:0,class:"gi-label"},ze={key:1,class:"gi-tags"},De={key:0,class:"gi-required"},Te={key:1,class:"gi-required"},Se={key:1,class:"gi-description"},qe=g({__name:"GenericInput",props:{value:{},schema:{}},emits:["change"],setup(i,{emit:s}){const r=i,n=P(()=>({component:we[r.schema.type],props:{value:r.value,schema:r.schema}}));return(e,k)=>(t(),a("div",Me,["label"in e.schema?(t(),a("div",Oe,["label"in e.schema?(t(),a("label",Pe,j(e.schema.label),1)):_("",!0),"required"in e.schema||"secret"in e.schema?(t(),a("div",ze,["required"in e.schema&&e.schema.required?(t(),a("span",De,"[Required]")):_("",!0),"secret"in e.schema&&e.schema.secret?(t(),a("span",Te,"[Secret]")):_("",!0)])):_("",!0)])):_("",!0),"description"in e.schema?(t(),a("div",Se,j(e.schema.description),1)):_("",!0),(t(),y(E(n.value.component),V({class:"gi-input"},n.value.props,{onChange:k[0]||(k[0]=b=>s("change",b))}),null,16))]))}});const z=T(qe,[["__scopeId","data-v-dd33d764"]]),Ne={key:0},Fe={key:1},Ge={key:0},Ue={key:1},ct=g({__name:"ConnectorEditor",setup(i){const s=H("connect"),n=L().params.connectorId,{result:e,loading:k}=ee(async()=>{const p=await K.get(n),d=await Y.get(p.projectId),I=await Z.get(d.organizationId);return X({connector:p,project:d,organization:I})}),b=P(()=>!k.value&&e.value?[{label:"My organizations",path:"/organizations"},{label:e.value.organization.name,path:`/organizations/${e.value.organization.id}`},{label:e.value.project.name,path:`/projects/${e.value.project.id}/connectors`}]:void 0),A=x();function B(){e.value&&A.push({name:"connectors",params:{projectId:e.value.project.id}})}const f=P(()=>{var p;return(p=e.value)!=null&&p.connector.schema.methods?Object.entries(e.value.connector.schema.methods).reduce((d,[I,c])=>[...d,{key:I,...c}],[]):[]}),v=P(()=>{var p,d,I;return!((p=e.value)!=null&&p.connector)||!(((d=e.value)==null?void 0:d.connector.type)in q.schema)?null:q.schema[(I=e.value)==null?void 0:I.connector.type]}),u=D({testMethod:void 0,testParams:{},testResponse:null}),w=async()=>{var p,d;!((p=e.value)!=null&&p.connector)||!u.testMethod||!u.testParams||(u.testResponse=await((d=e.value)==null?void 0:d.connector.test(u.testMethod,u.testParams)))};return(p,d)=>{const I=J("router-link");return t(),y(ne,null,{navbar:l(()=>{var c;return[m(o(re),{title:(c=o(e))==null?void 0:c.connector.name,onBack:B},{footer:l(()=>[m(o(ae),{"active-key":s.value,"onUpdate:activeKey":d[0]||(d[0]=h=>s.value=h)},{default:l(()=>[m(o(N),{key:"connect",tab:"Connect"}),m(o(N),{key:"test",tab:"Test"})]),_:1},8,["active-key"])]),breadcrumb:l(()=>[b.value?(t(),y(o(se),{key:0},{default:l(()=>[(t(!0),a($,null,C(b.value,(h,R)=>(t(),y(o(oe),{key:R},{default:l(()=>[m(I,{to:h.path},{default:l(()=>[M(j(h.label),1)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1})):_("",!0)]),extra:l(()=>[o(e)?(t(),y(te,{key:0,model:o(e).connector},null,8,["model"])):_("",!0)]),_:1},8,["title"])]}),content:l(()=>[o(e)&&s.value==="connect"?(t(),y(o(F),{key:0},{default:l(()=>{var c;return[(t(!0),a($,null,C((c=v.value)==null?void 0:c.settings,(h,R)=>(t(),y(o(G),{key:R},{default:l(()=>[m(z,{schema:h,value:o(e).connector.settings[R],onChange:U=>o(e).connector.settings[R]=U},null,8,["schema","value","onChange"])]),_:2},1024))),128))]}),_:1})):_("",!0),o(e)&&s.value==="test"?(t(),y(o(F),{key:1},{default:l(()=>[m(o(G),{label:"Method"},{default:l(()=>[m(o(Q),{value:u.testMethod,"onUpdate:value":d[1]||(d[1]=c=>u.testMethod=c)},{default:l(()=>[m(o(S),{value:null,disabled:"",selected:"",hidden:""},{default:l(()=>[M("Select a method")]),_:1}),(t(!0),a($,null,C(f.value,c=>(t(),y(o(S),{key:c.key,value:c.key},{default:l(()=>[M(j(c.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),u.testMethod?(t(),a("div",Ne,[(t(!0),a($,null,C(o(e).connector.schema.methods[u.testMethod].params,(c,h)=>(t(),a("div",{key:h},[m(z,{schema:c,value:u.testParams[h],onChange:R=>u.testParams[h]=R},null,8,["schema","value","onChange"])]))),128)),m(o(W),{type:"primary",onClick:d[2]||(d[2]=c=>w())},{default:l(()=>[M("Test")]),_:1})])):_("",!0),u.testResponse?(t(),a("div",Fe,[m(o(ue),{orientation:"left"},{default:l(()=>[M("Response")]),_:1}),u.testResponse.errors.length>0?(t(),a("div",Ge,[(t(!0),a($,null,C(u.testResponse.errors,c=>(t(),a("div",{key:c},j(c),1))),128))])):_("",!0),u.testResponse.returns&&Object.keys(u.testResponse.returns).length>0?(t(),a("div",Ue,[O("span",null,[O("pre",null,j(JSON.stringify(u.testResponse.returns,null,2)),1)])])):_("",!0)])):_("",!0)]),_:1})):_("",!0)]),_:1})}}});export{ct as default};
//# sourceMappingURL=ConnectorEditor.7b030425.js.map
