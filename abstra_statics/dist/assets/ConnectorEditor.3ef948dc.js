import{B as E}from"./BaseLayout.00638592.js";import{S as F}from"./SaveButton.9e326ad9.js";import{d as g,o as t,et as a,D as z,aD as I,eC as $,a as D,ez as R,b as m,R as S,f as O,ev as _,c as b,ey as U,eD as x,e as H,eA as J,eM as Q,r as W,w as l,y as X,u as o,ar as w,ci as T,cj as q,am as Y,cB as N,bG as Z}from"./vue-router.637ad36e.js";import{a as K}from"./asyncComputed.0b7f3eaf.js";import{b as G}from"./tables.0c659977.js";import"./gateway.e1c89e24.js";import{C as ee}from"./connector.06a2341f.js";import{O as te}from"./organization.0cc361ba.js";import{P as ne}from"./project.83f082ba.js";import{T as ae,A as L}from"./TabPane.db2c1289.js";import{B as se,A as oe,b as re}from"./index.9858c95f.js";import{A as ue}from"./index.5388dc8c.js";import"./ExclamationCircleOutlined.b054d85e.js";import"./record.833ab838.js";import"./string.876500c9.js";import"./popupNotifcation.498cf509.js";import"./index.b59203d3.js";import"./index.faf7cd82.js";(function(){try{var i=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new Error().stack;s&&(i._sentryDebugIds=i._sentryDebugIds||{},i._sentryDebugIds[s]="b39afc82-88f1-49a9-9da5-0a4750116dd8",i._sentryDebugIdIdentifier="sentry-dbid-b39afc82-88f1-49a9-9da5-0a4750116dd8")}catch{}})();const ce=["value"],le=g({__name:"TextInput",props:{value:{},schema:{}},emits:["change"],setup(i,{emit:s}){return(r,n)=>(t(),a("input",{value:r.value,onChange:n[0]||(n[0]=e=>s("change",e.target.value))},null,40,ce))}}),ie=["value"],pe=g({__name:"NumberInput",props:{value:{},schema:{}},emits:["change"],setup(i,{emit:s}){return(r,n)=>(t(),a("input",{value:r.value,type:"number",onChange:n[0]||(n[0]=e=>s("change",e.target.value))},null,40,ie))}}),de=["value"],me=g({__name:"BooleanInput",props:{value:{type:Boolean},schema:{}},emits:["change"],setup(i,{emit:s}){return(r,n)=>(t(),a("input",{value:r.value,type:"checkbox",onChange:n[0]||(n[0]=e=>s("change",e.target.checked))},null,40,de))}}),_e={class:"oi"},ve={class:"oi-item-label"},he=g({__name:"ObjectInput",props:{value:{},schema:{}},emits:["change"],setup(i,{emit:s}){var f;const r=i,n=z({value:(f=r.value)!=null?f:{}}),e=(j,A)=>{n.value[j]=A,k()},k=()=>{s("change",n.value)};return(j,A)=>(t(),a("div",_e,[(t(!0),a(I,null,$(r.schema.values,(y,v)=>(t(),a("div",{key:v,class:"oi-item"},[D("div",ve,R(v),1),m(P,{class:"oi-item-input",schema:y,value:n.value[v],onChange:u=>e(v,u)},null,8,["schema","value","onChange"])]))),128))]))}});const ge=S(he,[["__scopeId","data-v-e8a335b1"]]),fe={class:"ai"},ye=["onClick"],be=g({__name:"ArrayInput",props:{value:{},schema:{}},emits:["change"],setup(i,{emit:s}){var A;const n=z({value:(A=i.value)!=null?A:[]}),e=()=>{n.value.push(void 0)},k=y=>{n.value.splice(y,1),j()},f=(y,v)=>{n.value[y]=v,j()},j=()=>{s("change",n.value)};return(y,v)=>(t(),a("div",fe,[(t(!0),a(I,null,$(n.value,(u,M)=>(t(),a("div",{key:M,class:"ai-item"},[m(P,{schema:y.schema.items,value:u,onChange:d=>f(M,d)},null,8,["schema","value","onChange"]),D("button",{class:"ai-item-remove",onClick:d=>k(M)},"x",8,ye)]))),128)),D("button",{class:"ai-item-add",onClick:v[0]||(v[0]=u=>e())},"Add")]))}});const ke=S(be,[["__scopeId","data-v-e5d0aefd"]]),Ce=["value"],Ie=["value"],$e=g({__name:"OptionsInput",props:{value:{},schema:{}},emits:["change"],setup(i,{emit:s}){return(r,n)=>(t(),a("select",{value:r.value,onChange:n[0]||(n[0]=e=>s("change",e.target.value))},[(t(!0),a(I,null,$(r.schema.values,e=>(t(),a("option",{key:e,value:e},R(e),9,Ie))),128))],40,Ce))}}),Re=["value"],je=g({__name:"UnionInput",props:{value:{},schema:{}},emits:["change"],setup(i,{emit:s}){return(r,n)=>(t(),a("input",{value:r.value,onChange:n[0]||(n[0]=e=>s("change",e.target.value))},null,40,Re))}}),Ae=["value"],Be=g({__name:"AnyInput",props:{value:{},schema:{}},emits:["change"],setup(i,{emit:s}){return(r,n)=>(t(),a("input",{value:r.value,onChange:n[0]||(n[0]=e=>s("change",e.target.value))},null,40,Ae))}}),Me={string:le,number:pe,boolean:me,object:ge,array:ke,options:$e,any:Be,union:je},we={class:"gi"},De={key:0,class:"gi-header"},Oe={key:0,class:"gi-label"},Pe={key:1,class:"gi-tags"},ze={key:0,class:"gi-required"},Se={key:1,class:"gi-required"},Te={key:1,class:"gi-description"},qe=g({__name:"GenericInput",props:{value:{},schema:{}},emits:["change"],setup(i,{emit:s}){const r=i,n=O(()=>({component:Me[r.schema.type],props:{value:r.value,schema:r.schema}}));return(e,k)=>(t(),a("div",we,["label"in e.schema?(t(),a("div",De,["label"in e.schema?(t(),a("label",Oe,R(e.schema.label),1)):_("",!0),"required"in e.schema||"secret"in e.schema?(t(),a("div",Pe,["required"in e.schema&&e.schema.required?(t(),a("span",ze,"[Required]")):_("",!0),"secret"in e.schema&&e.schema.secret?(t(),a("span",Se,"[Secret]")):_("",!0)])):_("",!0)])):_("",!0),"description"in e.schema?(t(),a("div",Te,R(e.schema.description),1)):_("",!0),(t(),b(x(n.value.component),U({class:"gi-input"},n.value.props,{onChange:k[0]||(k[0]=f=>s("change",f))}),null,16))]))}});const P=S(qe,[["__scopeId","data-v-138e05c1"]]),Ne={key:0},Ge={key:1},Le={key:0},Ve={key:1},rt=g({__name:"ConnectorEditor",setup(i){const s=H("connect"),n=J().params.connectorId,{result:e,loading:k}=K(async()=>{const d=await ee.get(n),p=await ne.get(d.projectId),C=await te.get(p.organizationId);return X({connector:d,project:p,organization:C})}),f=O(()=>!k.value&&e.value?[{label:"My organizations",path:"/organizations"},{label:e.value.organization.name,path:`/organizations/${e.value.organization.id}`},{label:e.value.project.name,path:`/projects/${e.value.project.id}/connectors`}]:void 0),j=Q();function A(){e.value&&j.push({name:"connectors",params:{projectId:e.value.project.id}})}const y=O(()=>{var d;return(d=e.value)!=null&&d.connector.schema.methods?Object.entries(e.value.connector.schema.methods).reduce((p,[C,c])=>[...p,{key:C,...c}],[]):[]}),v=O(()=>{var d,p,C;return!((d=e.value)!=null&&d.connector)||!(((p=e.value)==null?void 0:p.connector.type)in G.schema)?null:G.schema[(C=e.value)==null?void 0:C.connector.type]}),u=z({testMethod:void 0,testParams:{},testResponse:null}),M=async()=>{var d,p;!((d=e.value)!=null&&d.connector)||!u.testMethod||!u.testParams||(u.testResponse=await((p=e.value)==null?void 0:p.connector.test(u.testMethod,u.testParams)))};return(d,p)=>{const C=W("RouterLink");return t(),b(E,null,{navbar:l(()=>{var c;return[m(o(re),{title:(c=o(e))==null?void 0:c.connector.name,style:{padding:"5px 25px"},onBack:A},{footer:l(()=>[m(o(ae),{"active-key":s.value,"onUpdate:activeKey":p[0]||(p[0]=h=>s.value=h)},{default:l(()=>[m(o(L),{key:"connect",tab:"Connect"}),m(o(L),{key:"test",tab:"Test"})]),_:1},8,["active-key"])]),breadcrumb:l(()=>[f.value?(t(),b(o(se),{key:0},{default:l(()=>[(t(!0),a(I,null,$(f.value,(h,B)=>(t(),b(o(oe),{key:B},{default:l(()=>[m(C,{to:h.path},{default:l(()=>[w(R(h.label),1)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1})):_("",!0)]),extra:l(()=>[o(e)?(t(),b(F,{key:0,model:o(e).connector},null,8,["model"])):_("",!0)]),_:1},8,["title"])]}),content:l(()=>[o(e)&&s.value==="connect"?(t(),b(o(T),{key:0},{default:l(()=>{var c;return[(t(!0),a(I,null,$((c=v.value)==null?void 0:c.settings,(h,B)=>(t(),b(o(q),{key:B},{default:l(()=>[m(P,{schema:h,value:o(e).connector.settings[B],onChange:V=>o(e).connector.settings[B]=V},null,8,["schema","value","onChange"])]),_:2},1024))),128))]}),_:1})):_("",!0),o(e)&&s.value==="test"?(t(),b(o(T),{key:1},{default:l(()=>[m(o(q),{label:"Method"},{default:l(()=>[m(o(Y),{value:u.testMethod,"onUpdate:value":p[1]||(p[1]=c=>u.testMethod=c)},{default:l(()=>[m(o(N),{value:null,disabled:"",selected:"",hidden:""},{default:l(()=>[w("Select a method")]),_:1}),(t(!0),a(I,null,$(y.value,c=>(t(),b(o(N),{key:c.key,value:c.key},{default:l(()=>[w(R(c.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),u.testMethod?(t(),a("div",Ne,[(t(!0),a(I,null,$(o(e).connector.schema.methods[u.testMethod].params,(c,h)=>(t(),a("div",{key:h},[m(P,{schema:c,value:u.testParams[h],onChange:B=>u.testParams[h]=B},null,8,["schema","value","onChange"])]))),128)),m(o(Z),{type:"primary",onClick:p[2]||(p[2]=c=>M())},{default:l(()=>[w("Test")]),_:1})])):_("",!0),u.testResponse?(t(),a("div",Ge,[m(o(ue),{orientation:"left"},{default:l(()=>[w("Response")]),_:1}),u.testResponse.errors.length>0?(t(),a("div",Le,[(t(!0),a(I,null,$(u.testResponse.errors,c=>(t(),a("div",{key:c},R(c),1))),128))])):_("",!0),u.testResponse.returns&&Object.keys(u.testResponse.returns).length>0?(t(),a("div",Ve,[D("span",null,[D("pre",null,R(JSON.stringify(u.testResponse.returns,null,2)),1)])])):_("",!0)])):_("",!0)]),_:1})):_("",!0)]),_:1})}}});export{rt as default};
//# sourceMappingURL=ConnectorEditor.3ef948dc.js.map
