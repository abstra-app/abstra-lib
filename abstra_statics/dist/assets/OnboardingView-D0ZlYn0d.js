import{u as Z}from"./userStore-CXpmlJ4c.js";import{E as Q,b as W}from"./router-FiPGiJmO.js";import{a as O,c as U,i as a,k as T,f as i,b as v,e as S,h as o,u as e,B as F,w as t,g as I,t as w,aK as D,a_ as z,N as X,ba as N,b5 as h,b3 as x,b6 as M,bn as B,Q as E,Z as A,bo as K,cx as ee,bl as ae,af as le,ag as oe,r as $,V as ne,m as V,aJ as te}from"./jwt-decode.esm-pmJTfMF_.js";import{M as re}from"./member-K2CLrHf2.js";import{O as L}from"./organization-CaWgUrjn.js";import"./tables-Bky1cD5E.js";import{F as se}from"./folder-BdKsjGYn.js";import{S as C}from"./index-lJA5FKFO.js";import{_ as ie}from"./AbstraLogo.vue_vue_type_script_setup_true_lang-DWoEl1R_.js";import{S as ue,A as de}from"./index-BXn41HzK.js";import"./ts.worker-D2PA0F_A.js";import"./record-oSECIlP2.js";import"./string-BIiBoNw2.js";import"./logo-BiWG9_W5.js";import"./Logo-RGReAR87.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},p=new Error().stack;p&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[p]="92b3f0ec-3a48-4a6e-9bd5-f782dd3a879d",r._sentryDebugIdIdentifier="sentry-dbid-92b3f0ec-3a48-4a6e-9bd5-f782dd3a879d")}catch{}})();async function ce(r){const p=Z(),y={email:r.basicInfo.email,name:r.basicInfo.name,work_email:r.basicInfo.workEmail,company_name:r.companyInfo.companyName,company_domain:r.companyInfo.companyDomain,team:r.companyInfo.team,other_team:r.companyInfo.otherTeam,role:r.companyInfo.role,python_experience:r.userDetails.pythonExperience,has_use_case:r.userDetails.hasUseCase,reported_use_cases:r.userDetails.reportedUseCases,other_use_cases:r.userDetails.otherUseCases,tools:r.userDetails.tools,source:r.sourceInfo.reportedSource,other_source:r.sourceInfo.otherSource,ref_url:document.referrer},u=await fetch(`${Q.onboarding}/_hooks/onboarding-completed`,{method:"POST",headers:{"Content-Type":"application/json",token:p.jwt||""},body:JSON.stringify(y)});if(!u.ok)throw new Error(`Failed to submit onboarding data: ${u.statusText}`)}const me=[{value:"Finance",labelKey:"i18n_onboardingcompanyinfo_team_finance"},{value:"Accounting",labelKey:"i18n_onboardingcompanyinfo_team_accounting"},{value:"Tax",labelKey:"i18n_onboardingcompanyinfo_team_tax"},{value:"FinOps",labelKey:"i18n_onboardingcompanyinfo_team_finops"},{value:"Financial Planning & Analysis",labelKey:"i18n_onboardingcompanyinfo_team_fpa"},{value:"Operations",labelKey:"i18n_onboardingcompanyinfo_team_operations"},{value:"Product",labelKey:"i18n_onboardingcompanyinfo_team_product"},{value:"Marketing",labelKey:"i18n_onboardingcompanyinfo_team_marketing"},{value:"Sales",labelKey:"i18n_onboardingcompanyinfo_team_sales"},{value:"Cybersecurity",labelKey:"i18n_onboardingcompanyinfo_team_cybersecurity"},{value:"Customer Success",labelKey:"i18n_onboardingcompanyinfo_team_customersuccess"},{value:"HR",labelKey:"i18n_onboardingcompanyinfo_team_hr"},{value:"Other",labelKey:"i18n_onboardingcompanyinfo_team_other"}],_e=[{value:"I've never used Python before, but I'm excited to learn",labelKey:"i18n_onboardinguserdetails_python_never"},{value:"I sometimes use ChatGPT to generate Python scripts",labelKey:"i18n_onboardinguserdetails_python_chatgpt"},{value:"I've written some Python here and there",labelKey:"i18n_onboardinguserdetails_python_some"},{value:"I use Python regularly",labelKey:"i18n_onboardinguserdetails_python_regularly"}],be=[{value:"Enable other teammates to run my scripts",labelKey:"i18n_onboardinguserdetails_usecase_enableteammates"},{value:"Design workflows with manual and automated steps",labelKey:"i18n_onboardinguserdetails_usecase_designworkflows"},{value:"Schedule my scripts to run automatically",labelKey:"i18n_onboardinguserdetails_usecase_schedule"},{value:"Integrate and connect the tools my team uses",labelKey:"i18n_onboardinguserdetails_usecase_integrate"},{value:"Automate spreadsheet work",labelKey:"i18n_onboardinguserdetails_usecase_spreadsheet"},{value:"Use AI to parse documents",labelKey:"i18n_onboardinguserdetails_usecase_ai"},{value:"Build an automated workflow",labelKey:"i18n_onboardinguserdetails_usecase_workflow"},{value:"Create automated reports",labelKey:"i18n_onboardinguserdetails_usecase_reports"},{value:"Other",labelKey:"i18n_onboardinguserdetails_usecase_other"}],pe=[{value:"Google",labelKey:"i18n_onboardingsourceinfo_source_google"},{value:"Linkedin",labelKey:"i18n_onboardingsourceinfo_source_linkedin"},{value:"Github",labelKey:"i18n_onboardingsourceinfo_source_github"},{value:"Youtube",labelKey:"i18n_onboardingsourceinfo_source_youtube"},{value:"From a friend or coworker",labelKey:"i18n_onboardingsourceinfo_source_friend"},{value:"Event or conference",labelKey:"i18n_onboardingsourceinfo_source_event"},{value:"Other",labelKey:"i18n_onboardingsourceinfo_source_other"}],fe=["Excel","Google Sheets","Salesforce","Slack"],R=["gmail.com","yahoo.com","hotmail.com","outlook.com","icloud.com","protonmail.com","aol.com"],ve={class:"form-actions"},ye=O({__name:"OnboardingFormActions",props:{showBack:{type:Boolean,default:!1},isSubmit:{type:Boolean,default:!1},submitText:{default:void 0},loading:{type:Boolean,default:!1}},emits:["back"],setup(r){const p=r,y=U(()=>p.isSubmit?p.submitText||a.translate("i18n_onboardingformactions_complete"):a.translate("i18n_onboardingformactions_next"));return(u,d)=>(i(),T("div",ve,[r.showBack?(i(),v(e(F),{key:0,size:"large",onClick:d[0]||(d[0]=s=>u.$emit("back"))},{default:t(()=>[I(w(e(a).translate("i18n_onboardingformactions_back")),1)]),_:1})):S("",!0),o(e(F),{type:"primary",size:"large","html-type":"submit",loading:r.loading},{default:t(()=>[I(w(y.value),1)]),_:1},8,["loading"])]))}}),q=D(ye,[["__scopeId","data-v-706fd497"]]),ge={key:1,class:"warning-text"},he=O({__name:"BasicUserInfo",props:{modelValue:{}},emits:["update:modelValue","next"],setup(r,{emit:p}){const{Title:y,Text:u}=z,d=r,s=p,l=U({get:()=>d.modelValue,set:n=>s("update:modelValue",n)}),k=W.getAuthor();k&&!l.value.email&&(l.value={...l.value,email:k.claims.email});const g=U(()=>!l.value.email||!l.value.email.includes("@")?"":l.value.email.split("@")[1]||""),_=U(()=>R.includes(g.value.toLowerCase())),m=U(()=>{if(!l.value.name)return a.translate("i18n_onboardingbasicuserinfo_workemail_placeholder");const n=l.value.name.replace(/[^a-zA-Z0-9]/g,"").toLowerCase();return n?`${n}@coolcompany.com`:a.translate("i18n_onboardingbasicuserinfo_workemail_placeholder")});X(g,n=>{R.includes(n.toLowerCase())||(l.value={...l.value,workEmail:l.value.email})});const b=()=>{s("next")};return(n,f)=>(i(),v(e(N),{layout:"vertical",model:l.value,onFinish:b},{default:t(()=>[o(e(y),{level:3},{default:t(()=>[I(w(e(a).translate("i18n_onboardingbasicuserinfo_title")),1)]),_:1}),o(e(h),{label:e(a).translate("i18n_onboardingbasicuserinfo_name_label"),name:"name",rules:[{required:!0,message:e(a).translate("i18n_onboardingbasicuserinfo_name_required")}]},{default:t(()=>[o(e(x),{value:l.value.name,"onUpdate:value":f[0]||(f[0]=c=>l.value.name=c),placeholder:e(a).translate("i18n_onboardingbasicuserinfo_name_placeholder"),size:"large"},null,8,["value","placeholder"])]),_:1},8,["label","rules"]),o(e(h),{label:e(a).translate("i18n_onboardingbasicuserinfo_email_label")},{default:t(()=>[o(e(x),{value:l.value.email,disabled:"",size:"large"},null,8,["value"])]),_:1},8,["label"]),_.value?(i(),v(e(h),{key:0,label:e(a).translate("i18n_onboardingbasicuserinfo_workemail_label"),name:"workEmail",rules:[{required:!1,type:"email",message:e(a).translate("i18n_onboardingbasicuserinfo_workemail_invalid")}]},{default:t(()=>[o(e(x),{value:l.value.workEmail,"onUpdate:value":f[1]||(f[1]=c=>l.value.workEmail=c),placeholder:m.value,size:"large"},null,8,["value","placeholder"])]),_:1},8,["label","rules"])):S("",!0),_.value?(i(),T("div",ge,[o(e(u),{type:"warning"},{default:t(()=>[I(w(e(a).translate("i18n_onboardingbasicuserinfo_warning")),1)]),_:1})])):S("",!0),o(q)]),_:1},8,["model"]))}}),ke=D(he,[["__scopeId","data-v-3fc1f0da"]]),we=O({__name:"CompanyInfo",props:{modelValue:{}},emits:["update:modelValue","next","back"],setup(r,{emit:p}){const y=r,u=p,d=U({get:()=>y.modelValue,set:g=>u("update:modelValue",g)}),s=me.map(g=>({label:a.translate(g.labelKey),value:g.value})),l=()=>{u("next")},k=()=>{u("back")};return(g,_)=>(i(),v(e(N),{layout:"vertical",model:d.value,onFinish:l},{default:t(()=>[o(e(h),{label:e(a).translate("i18n_onboardingcompanyinfo_company_label"),name:"companyName",rules:[{required:!0,message:e(a).translate("i18n_onboardingcompanyinfo_company_required")}]},{default:t(()=>[o(e(x),{value:d.value.companyName,"onUpdate:value":_[0]||(_[0]=m=>d.value.companyName=m),placeholder:e(a).translate("i18n_onboardingcompanyinfo_company_placeholder"),size:"large"},null,8,["value","placeholder"])]),_:1},8,["label","rules"]),o(e(h),{label:e(a).translate("i18n_onboardingcompanyinfo_website_label"),name:"companyDomain"},{default:t(()=>[o(e(x),{value:d.value.companyDomain,"onUpdate:value":_[1]||(_[1]=m=>d.value.companyDomain=m),placeholder:e(a).translate("i18n_onboardingcompanyinfo_website_placeholder"),size:"large"},null,8,["value","placeholder"])]),_:1},8,["label"]),o(e(h),{label:e(a).translate("i18n_onboardingcompanyinfo_team_label"),name:"team",rules:[{required:!0,message:e(a).translate("i18n_onboardingcompanyinfo_team_required")}]},{default:t(()=>[o(e(M),{value:d.value.team,"onUpdate:value":_[2]||(_[2]=m=>d.value.team=m),placeholder:e(a).translate("i18n_onboardingcompanyinfo_team_placeholder"),size:"large",options:e(s)},null,8,["value","placeholder","options"])]),_:1},8,["label","rules"]),d.value.team==="Other"?(i(),v(e(h),{key:0,label:e(a).translate("i18n_onboardingcompanyinfo_otherteam_label"),name:"otherTeam",rules:[{required:!0,message:e(a).translate("i18n_onboardingcompanyinfo_otherteam_required")}]},{default:t(()=>[o(e(x),{value:d.value.otherTeam,"onUpdate:value":_[3]||(_[3]=m=>d.value.otherTeam=m),placeholder:e(a).translate("i18n_onboardingcompanyinfo_otherteam_placeholder"),size:"large"},null,8,["value","placeholder"])]),_:1},8,["label","rules"])):S("",!0),o(e(h),{label:e(a).translate("i18n_onboardingcompanyinfo_role_label"),name:"role",rules:[{required:!0,message:e(a).translate("i18n_onboardingcompanyinfo_role_required")}]},{default:t(()=>[o(e(x),{value:d.value.role,"onUpdate:value":_[4]||(_[4]=m=>d.value.role=m),placeholder:e(a).translate("i18n_onboardingcompanyinfo_role_placeholder"),size:"large"},null,8,["value","placeholder"])]),_:1},8,["label","rules"]),o(q,{"show-back":"",onBack:k})]),_:1},8,["model"]))}}),Ie=O({__name:"SourceInfo",props:{modelValue:{},loading:{type:Boolean,default:!1},isLastStep:{type:Boolean,default:!0}},emits:["update:modelValue","submit","back"],setup(r,{emit:p}){const{Title:y}=z,{TextArea:u}=x,d=r,s=p,l=U({get:()=>d.modelValue,set:m=>s("update:modelValue",m)}),k=pe.map(m=>({value:m.value,label:a.translate(m.labelKey)})),g=()=>{s("submit")},_=()=>{s("back")};return(m,b)=>(i(),v(e(N),{layout:"vertical",model:l.value,onFinish:g},{default:t(()=>[o(e(y),{level:3},{default:t(()=>[I(w(e(a).translate("i18n_onboardingsourceinfo_title")),1)]),_:1}),o(e(h),{label:e(a).translate("i18n_onboardingsourceinfo_source_label"),name:"reportedSource"},{default:t(()=>[o(e(B),{value:l.value.reportedSource,"onUpdate:value":b[0]||(b[0]=n=>l.value.reportedSource=n),size:"large"},{default:t(()=>[o(e(C),{direction:"vertical"},{default:t(()=>[(i(!0),T(E,null,A(e(k),n=>(i(),v(e(K),{key:n.value,value:n.value},{default:t(()=>[I(w(n.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),l.value.reportedSource==="Other"?(i(),v(e(h),{key:0,label:e(a).translate("i18n_onboardingsourceinfo_other_label"),name:"otherSource",rules:[{required:!0,message:e(a).translate("i18n_onboardingsourceinfo_other_required")}]},{default:t(()=>[o(e(u),{value:l.value.otherSource,"onUpdate:value":b[1]||(b[1]=n=>l.value.otherSource=n),rows:3,placeholder:e(a).translate("i18n_onboardingsourceinfo_other_placeholder")},null,8,["value","placeholder"])]),_:1},8,["label","rules"])):S("",!0),o(q,{"show-back":"","is-submit":r.isLastStep,loading:r.loading,onBack:_},null,8,["is-submit","loading"])]),_:1},8,["model"]))}}),xe={key:0},Se=O({__name:"UserDetails",props:{modelValue:{}},emits:["update:modelValue","next","back"],setup(r,{emit:p}){const{Title:y}=z,{TextArea:u}=x,d=r,s=p,l=U({get:()=>d.modelValue,set:n=>s("update:modelValue",n)}),k=_e.map(n=>({value:n.value,label:a.translate(n.labelKey)})),g=be.map(n=>({value:n.value,label:a.translate(n.labelKey)})),_=fe,m=()=>{s("next")},b=()=>{s("back")};return(n,f)=>(i(),v(e(N),{layout:"vertical",model:l.value,onFinish:m},{default:t(()=>[o(e(y),{level:3},{default:t(()=>[I(w(e(a).translate("i18n_onboardinguserdetails_title")),1)]),_:1}),o(e(h),{label:e(a).translate("i18n_onboardinguserdetails_python_label"),name:"pythonExperience",rules:[{required:!0,message:e(a).translate("i18n_onboardinguserdetails_python_required")}]},{default:t(()=>[o(e(B),{value:l.value.pythonExperience,"onUpdate:value":f[0]||(f[0]=c=>l.value.pythonExperience=c),size:"large"},{default:t(()=>[o(e(C),{direction:"vertical"},{default:t(()=>[(i(!0),T(E,null,A(e(k),c=>(i(),v(e(K),{key:c.value,value:c.value},{default:t(()=>[I(w(c.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1},8,["label","rules"]),o(e(h),{label:e(a).translate("i18n_onboardinguserdetails_usecase_label"),name:"hasUseCase",rules:[{required:!0,message:e(a).translate("i18n_onboardinguserdetails_usecase_required")}]},{default:t(()=>[o(e(B),{value:l.value.hasUseCase,"onUpdate:value":f[1]||(f[1]=c=>l.value.hasUseCase=c),size:"large"},{default:t(()=>[o(e(C),{direction:"vertical"},{default:t(()=>[o(e(K),{value:!0},{default:t(()=>[I(w(e(a).translate("i18n_onboardinguserdetails_usecase_yes")),1)]),_:1}),o(e(K),{value:!1},{default:t(()=>[I(w(e(a).translate("i18n_onboardinguserdetails_usecase_no")),1)]),_:1})]),_:1})]),_:1},8,["value"])]),_:1},8,["label","rules"]),l.value.hasUseCase?(i(),T("div",xe,[o(e(h),{label:e(a).translate("i18n_onboardinguserdetails_mainusecase_label"),name:"reportedUseCases",rules:[{required:!0,message:e(a).translate("i18n_onboardinguserdetails_mainusecase_required"),type:"array",min:1}]},{default:t(()=>[o(e(ee),{value:l.value.reportedUseCases,"onUpdate:value":f[2]||(f[2]=c=>l.value.reportedUseCases=c)},{default:t(()=>[o(e(C),{direction:"vertical"},{default:t(()=>[(i(!0),T(E,null,A(e(g),c=>(i(),v(e(ae),{key:c.value,value:c.value},{default:t(()=>[I(w(c.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1},8,["label","rules"]),l.value.reportedUseCases.includes("Integrate and connect the tools my team uses")?(i(),v(e(h),{key:0,label:e(a).translate("i18n_onboardinguserdetails_tools_label")},{default:t(()=>[o(e(M),{value:l.value.tools,"onUpdate:value":f[3]||(f[3]=c=>l.value.tools=c),mode:"tags",placeholder:e(a).translate("i18n_onboardinguserdetails_tools_placeholder"),size:"large","default-value":e(_)},null,8,["value","placeholder","default-value"])]),_:1},8,["label"])):S("",!0),l.value.reportedUseCases.includes("Other")?(i(),v(e(h),{key:1,label:e(a).translate("i18n_onboardinguserdetails_other_label"),name:"otherUseCases",rules:[{required:!0,message:e(a).translate("i18n_onboardinguserdetails_other_required")}]},{default:t(()=>[o(e(u),{value:l.value.otherUseCases,"onUpdate:value":f[4]||(f[4]=c=>l.value.otherUseCases=c),rows:3,placeholder:e(a).translate("i18n_onboardinguserdetails_other_placeholder")},null,8,["value","placeholder"])]),_:1},8,["label","rules"])):S("",!0)])):S("",!0),o(q,{"show-back":"",onBack:b})]),_:1},8,["model"]))}}),Ue={class:"onboarding-container"},Te={class:"onboarding-form"},Oe={class:"header"},Ve={class:"form-content"},Ke=O({__name:"OnboardingView",setup(r){const p=le(),y=oe(),u=$(0),d=[a.translate("i18n_onboardingview_step_basicinfo"),a.translate("i18n_onboardingview_step_company"),a.translate("i18n_onboardingview_step_details"),a.translate("i18n_onboardingview_step_source")],s=ne({basicInfo:{name:"",email:"",workEmail:""},companyInfo:{companyName:"",companyDomain:"",team:"",otherTeam:"",role:""},userDetails:{pythonExperience:"",hasUseCase:!1,reportedUseCases:[],otherUseCases:"",tools:[]},sourceInfo:{reportedSource:"",otherSource:""}}),l=()=>{u.value<d.length-1&&u.value++},k=()=>{u.value>0&&u.value--},g=$(!1),_=async()=>{g.value=!0;try{if(await ce(s),(await L.list()).length===0){const f=s.companyInfo.companyName||"My Organization",c=await L.create(f),G=new se,j=await new re().list(c.id),H=s.basicInfo.workEmail||s.basicInfo.email,P=j.find(Y=>Y.email===H),J=s.companyInfo.team||"General";await G.create({organizationId:c.id,name:J,memberIds:P?[P.id]:[]})}}catch(n){te(n,{extra:{step:"submitOnboarding",formData:s}});return}finally{g.value=!1}const m=y.query.redirect,b=y.query["prev-redirect"];if(m){const n=m.split("/").at(-1);await p.push({path:n,query:{...y.query,redirect:b,"prev-redirect":void 0}});return}p.push({name:"home"})};return(m,b)=>(i(),T("div",Ue,[V("div",Te,[V("div",Oe,[o(ie,{"hide-text":"",size:"large"}),V("h2",null,w(e(a).translate("i18n_onboardingview_welcome")),1),o(e(de),{current:u.value,size:"small",class:"step-indicator"},{default:t(()=>[(i(),T(E,null,A(d,n=>o(e(ue),{key:n,title:n,disabled:!0},null,8,["title"])),64))]),_:1},8,["current"])]),V("div",Ve,[u.value===0?(i(),v(ke,{key:0,modelValue:s.basicInfo,"onUpdate:modelValue":b[0]||(b[0]=n=>s.basicInfo=n),onNext:l},null,8,["modelValue"])):u.value===1?(i(),v(we,{key:1,modelValue:s.companyInfo,"onUpdate:modelValue":b[1]||(b[1]=n=>s.companyInfo=n),onNext:l,onBack:k},null,8,["modelValue"])):u.value===2?(i(),v(Se,{key:2,modelValue:s.userDetails,"onUpdate:modelValue":b[2]||(b[2]=n=>s.userDetails=n),onNext:l,onBack:k},null,8,["modelValue"])):u.value===3?(i(),v(Ie,{key:3,modelValue:s.sourceInfo,"onUpdate:modelValue":b[3]||(b[3]=n=>s.sourceInfo=n),loading:g.value,onSubmit:_,onBack:k},null,8,["modelValue","loading"])):S("",!0)])])]))}}),He=D(Ke,[["__scopeId","data-v-2d1c9ed0"]]);export{He as default};
//# sourceMappingURL=OnboardingView-D0ZlYn0d.js.map
